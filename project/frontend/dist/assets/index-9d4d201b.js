var GS=Object.defineProperty;var HS=($,_e,rt)=>_e in $?GS($,_e,{enumerable:!0,configurable:!0,writable:!0,value:rt}):$[_e]=rt;var gs=($,_e,rt)=>(HS($,typeof _e!="symbol"?_e+"":_e,rt),rt);(function(){const _e=document.createElement("link").relList;if(_e&&_e.supports&&_e.supports("modulepreload"))return;for(const ht of document.querySelectorAll('link[rel="modulepreload"]'))at(ht);new MutationObserver(ht=>{for(const pt of ht)if(pt.type==="childList")for(const wt of pt.addedNodes)wt.tagName==="LINK"&&wt.rel==="modulepreload"&&at(wt)}).observe(document,{childList:!0,subtree:!0});function rt(ht){const pt={};return ht.integrity&&(pt.integrity=ht.integrity),ht.referrerPolicy&&(pt.referrerPolicy=ht.referrerPolicy),ht.crossOrigin==="use-credentials"?pt.credentials="include":ht.crossOrigin==="anonymous"?pt.credentials="omit":pt.credentials="same-origin",pt}function at(ht){if(ht.ep)return;ht.ep=!0;const pt=rt(ht);fetch(ht.href,pt)}})();var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs($){return $&&$.__esModule&&Object.prototype.hasOwnProperty.call($,"default")?$.default:$}function getAugmentedNamespace($){if($.__esModule)return $;var _e=$.default;if(typeof _e=="function"){var rt=function at(){return this instanceof at?Reflect.construct(_e,arguments,this.constructor):_e.apply(this,arguments)};rt.prototype=_e.prototype}else rt={};return Object.defineProperty(rt,"__esModule",{value:!0}),Object.keys($).forEach(function(at){var ht=Object.getOwnPropertyDescriptor($,at);Object.defineProperty(rt,at,ht.get?ht:{enumerable:!0,get:function(){return $[at]}})}),rt}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$6=Symbol.for("react.element"),n$7=Symbol.for("react.portal"),p$8=Symbol.for("react.fragment"),q$7=Symbol.for("react.strict_mode"),r$5=Symbol.for("react.profiler"),t$6=Symbol.for("react.provider"),u$4=Symbol.for("react.context"),v$6=Symbol.for("react.forward_ref"),w$4=Symbol.for("react.suspense"),x$3=Symbol.for("react.memo"),y$3=Symbol.for("react.lazy"),z$4=Symbol.iterator;function A$4($){return $===null||typeof $!="object"?null:($=z$4&&$[z$4]||$["@@iterator"],typeof $=="function"?$:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$2={};function E$2($,_e,rt){this.props=$,this.context=_e,this.refs=D$2,this.updater=rt||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function($,_e){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,_e,"setState")};E$2.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function F$1(){}F$1.prototype=E$2.prototype;function G$2($,_e,rt){this.props=$,this.context=_e,this.refs=D$2,this.updater=rt||B$2}var H$2=G$2.prototype=new F$1;H$2.constructor=G$2;C$1(H$2,E$2.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$2($,_e,rt){var at,ht={},pt=null,wt=null;if(_e!=null)for(at in _e.ref!==void 0&&(wt=_e.ref),_e.key!==void 0&&(pt=""+_e.key),_e)J.call(_e,at)&&!L$2.hasOwnProperty(at)&&(ht[at]=_e[at]);var st=arguments.length-2;if(st===1)ht.children=rt;else if(1<st){for(var Tt=Array(st),kt=0;kt<st;kt++)Tt[kt]=arguments[kt+2];ht.children=Tt}if($&&$.defaultProps)for(at in st=$.defaultProps,st)ht[at]===void 0&&(ht[at]=st[at]);return{$$typeof:l$6,type:$,key:pt,ref:wt,props:ht,_owner:K$1.current}}function N$2($,_e){return{$$typeof:l$6,type:$.type,key:_e,ref:$.ref,props:$.props,_owner:$._owner}}function O$2($){return typeof $=="object"&&$!==null&&$.$$typeof===l$6}function escape($){var _e={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(rt){return _e[rt]})}var P$2=/\/+/g;function Q$2($,_e){return typeof $=="object"&&$!==null&&$.key!=null?escape(""+$.key):_e.toString(36)}function R$2($,_e,rt,at,ht){var pt=typeof $;(pt==="undefined"||pt==="boolean")&&($=null);var wt=!1;if($===null)wt=!0;else switch(pt){case"string":case"number":wt=!0;break;case"object":switch($.$$typeof){case l$6:case n$7:wt=!0}}if(wt)return wt=$,ht=ht(wt),$=at===""?"."+Q$2(wt,0):at,I$2(ht)?(rt="",$!=null&&(rt=$.replace(P$2,"$&/")+"/"),R$2(ht,_e,rt,"",function(kt){return kt})):ht!=null&&(O$2(ht)&&(ht=N$2(ht,rt+(!ht.key||wt&&wt.key===ht.key?"":(""+ht.key).replace(P$2,"$&/")+"/")+$)),_e.push(ht)),1;if(wt=0,at=at===""?".":at+":",I$2($))for(var st=0;st<$.length;st++){pt=$[st];var Tt=at+Q$2(pt,st);wt+=R$2(pt,_e,rt,Tt,ht)}else if(Tt=A$4($),typeof Tt=="function")for($=Tt.call($),st=0;!(pt=$.next()).done;)pt=pt.value,Tt=at+Q$2(pt,st++),wt+=R$2(pt,_e,rt,Tt,ht);else if(pt==="object")throw _e=String($),Error("Objects are not valid as a React child (found: "+(_e==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":_e)+"). If you meant to render a collection of children, use an array instead.");return wt}function S$2($,_e,rt){if($==null)return $;var at=[],ht=0;return R$2($,at,"","",function(pt){return _e.call(rt,pt,ht++)}),at}function T$1($){if($._status===-1){var _e=$._result;_e=_e(),_e.then(function(rt){($._status===0||$._status===-1)&&($._status=1,$._result=rt)},function(rt){($._status===0||$._status===-1)&&($._status=2,$._result=rt)}),$._status===-1&&($._status=0,$._result=_e)}if($._status===1)return $._result.default;throw $._result}var U$2={current:null},V$1={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};react_production_min.Children={map:S$2,forEach:function($,_e,rt){S$2($,function(){_e.apply(this,arguments)},rt)},count:function($){var _e=0;return S$2($,function(){_e++}),_e},toArray:function($){return S$2($,function(_e){return _e})||[]},only:function($){if(!O$2($))throw Error("React.Children.only expected to receive a single React element child.");return $}};react_production_min.Component=E$2;react_production_min.Fragment=p$8;react_production_min.Profiler=r$5;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$7;react_production_min.Suspense=w$4;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.cloneElement=function($,_e,rt){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var at=C$1({},$.props),ht=$.key,pt=$.ref,wt=$._owner;if(_e!=null){if(_e.ref!==void 0&&(pt=_e.ref,wt=K$1.current),_e.key!==void 0&&(ht=""+_e.key),$.type&&$.type.defaultProps)var st=$.type.defaultProps;for(Tt in _e)J.call(_e,Tt)&&!L$2.hasOwnProperty(Tt)&&(at[Tt]=_e[Tt]===void 0&&st!==void 0?st[Tt]:_e[Tt])}var Tt=arguments.length-2;if(Tt===1)at.children=rt;else if(1<Tt){st=Array(Tt);for(var kt=0;kt<Tt;kt++)st[kt]=arguments[kt+2];at.children=st}return{$$typeof:l$6,type:$.type,key:ht,ref:pt,props:at,_owner:wt}};react_production_min.createContext=function($){return $={$$typeof:u$4,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:t$6,_context:$},$.Consumer=$};react_production_min.createElement=M$2;react_production_min.createFactory=function($){var _e=M$2.bind(null,$);return _e.type=$,_e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function($){return{$$typeof:v$6,render:$}};react_production_min.isValidElement=O$2;react_production_min.lazy=function($){return{$$typeof:y$3,_payload:{_status:-1,_result:$},_init:T$1}};react_production_min.memo=function($,_e){return{$$typeof:x$3,type:$,compare:_e===void 0?null:_e}};react_production_min.startTransition=function($){var _e=V$1.transition;V$1.transition={};try{$()}finally{V$1.transition=_e}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function($,_e){return U$2.current.useCallback($,_e)};react_production_min.useContext=function($){return U$2.current.useContext($)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function($){return U$2.current.useDeferredValue($)};react_production_min.useEffect=function($,_e){return U$2.current.useEffect($,_e)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function($,_e,rt){return U$2.current.useImperativeHandle($,_e,rt)};react_production_min.useInsertionEffect=function($,_e){return U$2.current.useInsertionEffect($,_e)};react_production_min.useLayoutEffect=function($,_e){return U$2.current.useLayoutEffect($,_e)};react_production_min.useMemo=function($,_e){return U$2.current.useMemo($,_e)};react_production_min.useReducer=function($,_e,rt){return U$2.current.useReducer($,_e,rt)};react_production_min.useRef=function($){return U$2.current.useRef($)};react_production_min.useState=function($){return U$2.current.useState($)};react_production_min.useSyncExternalStore=function($,_e,rt){return U$2.current.useSyncExternalStore($,_e,rt)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$4=reactExports,k$5=Symbol.for("react.element"),l$5=Symbol.for("react.fragment"),m$7=Object.prototype.hasOwnProperty,n$6=f$4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$7={key:!0,ref:!0,__self:!0,__source:!0};function q$6($,_e,rt){var at,ht={},pt=null,wt=null;rt!==void 0&&(pt=""+rt),_e.key!==void 0&&(pt=""+_e.key),_e.ref!==void 0&&(wt=_e.ref);for(at in _e)m$7.call(_e,at)&&!p$7.hasOwnProperty(at)&&(ht[at]=_e[at]);if($&&$.defaultProps)for(at in _e=$.defaultProps,_e)ht[at]===void 0&&(ht[at]=_e[at]);return{$$typeof:k$5,type:$,key:pt,ref:wt,props:ht,_owner:n$6.current}}reactJsxRuntime_production_min.Fragment=l$5;reactJsxRuntime_production_min.jsx=q$6;reactJsxRuntime_production_min.jsxs=q$6;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function($){function _e(Pr,Gr){var Or=Pr.length;Pr.push(Gr);e:for(;0<Or;){var sn=Or-1>>>1,ln=Pr[sn];if(0<ht(ln,Gr))Pr[sn]=Gr,Pr[Or]=ln,Or=sn;else break e}}function rt(Pr){return Pr.length===0?null:Pr[0]}function at(Pr){if(Pr.length===0)return null;var Gr=Pr[0],Or=Pr.pop();if(Or!==Gr){Pr[0]=Or;e:for(var sn=0,ln=Pr.length,kn=ln>>>1;sn<kn;){var Bn=2*(sn+1)-1,Fn=Pr[Bn],Nn=Bn+1,Kn=Pr[Nn];if(0>ht(Fn,Or))Nn<ln&&0>ht(Kn,Fn)?(Pr[sn]=Kn,Pr[Nn]=Or,sn=Nn):(Pr[sn]=Fn,Pr[Bn]=Or,sn=Bn);else if(Nn<ln&&0>ht(Kn,Or))Pr[sn]=Kn,Pr[Nn]=Or,sn=Nn;else break e}}return Gr}function ht(Pr,Gr){var Or=Pr.sortIndex-Gr.sortIndex;return Or!==0?Or:Pr.id-Gr.id}if(typeof performance=="object"&&typeof performance.now=="function"){var pt=performance;$.unstable_now=function(){return pt.now()}}else{var wt=Date,st=wt.now();$.unstable_now=function(){return wt.now()-st}}var Tt=[],kt=[],Mt=1,Dt=null,Ot=3,Ut=!1,qt=!1,tr=!1,ar=typeof setTimeout=="function"?setTimeout:null,Yt=typeof clearTimeout=="function"?clearTimeout:null,Kt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Jt(Pr){for(var Gr=rt(kt);Gr!==null;){if(Gr.callback===null)at(kt);else if(Gr.startTime<=Pr)at(kt),Gr.sortIndex=Gr.expirationTime,_e(Tt,Gr);else break;Gr=rt(kt)}}function pr(Pr){if(tr=!1,Jt(Pr),!qt)if(rt(Tt)!==null)qt=!0,xn(Sr);else{var Gr=rt(kt);Gr!==null&&gn(pr,Gr.startTime-Pr)}}function Sr(Pr,Gr){qt=!1,tr&&(tr=!1,Yt(Lr),Lr=-1),Ut=!0;var Or=Ot;try{for(Jt(Gr),Dt=rt(Tt);Dt!==null&&(!(Dt.expirationTime>Gr)||Pr&&!dn());){var sn=Dt.callback;if(typeof sn=="function"){Dt.callback=null,Ot=Dt.priorityLevel;var ln=sn(Dt.expirationTime<=Gr);Gr=$.unstable_now(),typeof ln=="function"?Dt.callback=ln:Dt===rt(Tt)&&at(Tt),Jt(Gr)}else at(Tt);Dt=rt(Tt)}if(Dt!==null)var kn=!0;else{var Bn=rt(kt);Bn!==null&&gn(pr,Bn.startTime-Gr),kn=!1}return kn}finally{Dt=null,Ot=Or,Ut=!1}}var Er=!1,Rr=null,Lr=-1,Mr=5,Zr=-1;function dn(){return!($.unstable_now()-Zr<Mr)}function Jr(){if(Rr!==null){var Pr=$.unstable_now();Zr=Pr;var Gr=!0;try{Gr=Rr(!0,Pr)}finally{Gr?wr():(Er=!1,Rr=null)}}else Er=!1}var wr;if(typeof Kt=="function")wr=function(){Kt(Jr)};else if(typeof MessageChannel<"u"){var Xr=new MessageChannel,Dr=Xr.port2;Xr.port1.onmessage=Jr,wr=function(){Dr.postMessage(null)}}else wr=function(){ar(Jr,0)};function xn(Pr){Rr=Pr,Er||(Er=!0,wr())}function gn(Pr,Gr){Lr=ar(function(){Pr($.unstable_now())},Gr)}$.unstable_IdlePriority=5,$.unstable_ImmediatePriority=1,$.unstable_LowPriority=4,$.unstable_NormalPriority=3,$.unstable_Profiling=null,$.unstable_UserBlockingPriority=2,$.unstable_cancelCallback=function(Pr){Pr.callback=null},$.unstable_continueExecution=function(){qt||Ut||(qt=!0,xn(Sr))},$.unstable_forceFrameRate=function(Pr){0>Pr||125<Pr?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Mr=0<Pr?Math.floor(1e3/Pr):5},$.unstable_getCurrentPriorityLevel=function(){return Ot},$.unstable_getFirstCallbackNode=function(){return rt(Tt)},$.unstable_next=function(Pr){switch(Ot){case 1:case 2:case 3:var Gr=3;break;default:Gr=Ot}var Or=Ot;Ot=Gr;try{return Pr()}finally{Ot=Or}},$.unstable_pauseExecution=function(){},$.unstable_requestPaint=function(){},$.unstable_runWithPriority=function(Pr,Gr){switch(Pr){case 1:case 2:case 3:case 4:case 5:break;default:Pr=3}var Or=Ot;Ot=Pr;try{return Gr()}finally{Ot=Or}},$.unstable_scheduleCallback=function(Pr,Gr,Or){var sn=$.unstable_now();switch(typeof Or=="object"&&Or!==null?(Or=Or.delay,Or=typeof Or=="number"&&0<Or?sn+Or:sn):Or=sn,Pr){case 1:var ln=-1;break;case 2:ln=250;break;case 5:ln=1073741823;break;case 4:ln=1e4;break;default:ln=5e3}return ln=Or+ln,Pr={id:Mt++,callback:Gr,priorityLevel:Pr,startTime:Or,expirationTime:ln,sortIndex:-1},Or>sn?(Pr.sortIndex=Or,_e(kt,Pr),rt(Tt)===null&&Pr===rt(kt)&&(tr?(Yt(Lr),Lr=-1):tr=!0,gn(pr,Or-sn))):(Pr.sortIndex=ln,_e(Tt,Pr),qt||Ut||(qt=!0,xn(Sr))),Pr},$.unstable_shouldYield=dn,$.unstable_wrapCallback=function(Pr){var Gr=Ot;return function(){var Or=Ot;Ot=Gr;try{return Pr.apply(this,arguments)}finally{Ot=Or}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$6($){for(var _e="https://reactjs.org/docs/error-decoder.html?invariant="+$,rt=1;rt<arguments.length;rt++)_e+="&args[]="+encodeURIComponent(arguments[rt]);return"Minified React error #"+$+"; visit "+_e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa($,_e){ha($,_e),ha($+"Capture",_e)}function ha($,_e){for(ea[$]=_e,$=0;$<_e.length;$++)da.add(_e[$])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa($){return ja.call(ma,$)?!0:ja.call(la,$)?!1:ka.test($)?ma[$]=!0:(la[$]=!0,!1)}function pa($,_e,rt,at){if(rt!==null&&rt.type===0)return!1;switch(typeof _e){case"function":case"symbol":return!0;case"boolean":return at?!1:rt!==null?!rt.acceptsBooleans:($=$.toLowerCase().slice(0,5),$!=="data-"&&$!=="aria-");default:return!1}}function qa($,_e,rt,at){if(_e===null||typeof _e>"u"||pa($,_e,rt,at))return!0;if(at)return!1;if(rt!==null)switch(rt.type){case 3:return!_e;case 4:return _e===!1;case 5:return isNaN(_e);case 6:return isNaN(_e)||1>_e}return!1}function v$5($,_e,rt,at,ht,pt,wt){this.acceptsBooleans=_e===2||_e===3||_e===4,this.attributeName=at,this.attributeNamespace=ht,this.mustUseProperty=rt,this.propertyName=$,this.type=_e,this.sanitizeURL=pt,this.removeEmptyString=wt}var z$3={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function($){z$3[$]=new v$5($,0,!1,$,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function($){var _e=$[0];z$3[_e]=new v$5(_e,1,!1,$[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function($){z$3[$]=new v$5($,2,!1,$.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function($){z$3[$]=new v$5($,2,!1,$,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function($){z$3[$]=new v$5($,3,!1,$.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function($){z$3[$]=new v$5($,3,!0,$,null,!1,!1)});["capture","download"].forEach(function($){z$3[$]=new v$5($,4,!1,$,null,!1,!1)});["cols","rows","size","span"].forEach(function($){z$3[$]=new v$5($,6,!1,$,null,!1,!1)});["rowSpan","start"].forEach(function($){z$3[$]=new v$5($,5,!1,$.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa($){return $[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function($){var _e=$.replace(ra,sa);z$3[_e]=new v$5(_e,1,!1,$,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function($){var _e=$.replace(ra,sa);z$3[_e]=new v$5(_e,1,!1,$,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function($){var _e=$.replace(ra,sa);z$3[_e]=new v$5(_e,1,!1,$,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function($){z$3[$]=new v$5($,1,!1,$.toLowerCase(),null,!1,!1)});z$3.xlinkHref=new v$5("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function($){z$3[$]=new v$5($,1,!1,$.toLowerCase(),null,!0,!0)});function ta($,_e,rt,at){var ht=z$3.hasOwnProperty(_e)?z$3[_e]:null;(ht!==null?ht.type!==0:at||!(2<_e.length)||_e[0]!=="o"&&_e[0]!=="O"||_e[1]!=="n"&&_e[1]!=="N")&&(qa(_e,rt,ht,at)&&(rt=null),at||ht===null?oa(_e)&&(rt===null?$.removeAttribute(_e):$.setAttribute(_e,""+rt)):ht.mustUseProperty?$[ht.propertyName]=rt===null?ht.type===3?!1:"":rt:(_e=ht.attributeName,at=ht.attributeNamespace,rt===null?$.removeAttribute(_e):(ht=ht.type,rt=ht===3||ht===4&&rt===!0?"":""+rt,at?$.setAttributeNS(at,_e,rt):$.setAttribute(_e,rt))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka($){return $===null||typeof $!="object"?null:($=Ja&&$[Ja]||$["@@iterator"],typeof $=="function"?$:null)}var A$3=Object.assign,La;function Ma($){if(La===void 0)try{throw Error()}catch(rt){var _e=rt.stack.trim().match(/\n( *(at )?)/);La=_e&&_e[1]||""}return`
`+La+$}var Na=!1;function Oa($,_e){if(!$||Na)return"";Na=!0;var rt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_e)if(_e=function(){throw Error()},Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(kt){var at=kt}Reflect.construct($,[],_e)}else{try{_e.call()}catch(kt){at=kt}$.call(_e.prototype)}else{try{throw Error()}catch(kt){at=kt}$()}}catch(kt){if(kt&&at&&typeof kt.stack=="string"){for(var ht=kt.stack.split(`
`),pt=at.stack.split(`
`),wt=ht.length-1,st=pt.length-1;1<=wt&&0<=st&&ht[wt]!==pt[st];)st--;for(;1<=wt&&0<=st;wt--,st--)if(ht[wt]!==pt[st]){if(wt!==1||st!==1)do if(wt--,st--,0>st||ht[wt]!==pt[st]){var Tt=`
`+ht[wt].replace(" at new "," at ");return $.displayName&&Tt.includes("<anonymous>")&&(Tt=Tt.replace("<anonymous>",$.displayName)),Tt}while(1<=wt&&0<=st);break}}}finally{Na=!1,Error.prepareStackTrace=rt}return($=$?$.displayName||$.name:"")?Ma($):""}function Pa($){switch($.tag){case 5:return Ma($.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return $=Oa($.type,!1),$;case 11:return $=Oa($.type.render,!1),$;case 1:return $=Oa($.type,!0),$;default:return""}}function Qa($){if($==null)return null;if(typeof $=="function")return $.displayName||$.name||null;if(typeof $=="string")return $;switch($){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof $=="object")switch($.$$typeof){case Ca:return($.displayName||"Context")+".Consumer";case Ba:return($._context.displayName||"Context")+".Provider";case Da:var _e=$.render;return $=$.displayName,$||($=_e.displayName||_e.name||"",$=$!==""?"ForwardRef("+$+")":"ForwardRef"),$;case Ga:return _e=$.displayName||null,_e!==null?_e:Qa($.type)||"Memo";case Ha:_e=$._payload,$=$._init;try{return Qa($(_e))}catch{}}return null}function Ra($){var _e=$.type;switch($.tag){case 24:return"Cache";case 9:return(_e.displayName||"Context")+".Consumer";case 10:return(_e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return $=_e.render,$=$.displayName||$.name||"",_e.displayName||($!==""?"ForwardRef("+$+")":"ForwardRef");case 7:return"Fragment";case 5:return _e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(_e);case 8:return _e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _e=="function")return _e.displayName||_e.name||null;if(typeof _e=="string")return _e}return null}function Sa($){switch(typeof $){case"boolean":case"number":case"string":case"undefined":return $;case"object":return $;default:return""}}function Ta($){var _e=$.type;return($=$.nodeName)&&$.toLowerCase()==="input"&&(_e==="checkbox"||_e==="radio")}function Ua($){var _e=Ta($)?"checked":"value",rt=Object.getOwnPropertyDescriptor($.constructor.prototype,_e),at=""+$[_e];if(!$.hasOwnProperty(_e)&&typeof rt<"u"&&typeof rt.get=="function"&&typeof rt.set=="function"){var ht=rt.get,pt=rt.set;return Object.defineProperty($,_e,{configurable:!0,get:function(){return ht.call(this)},set:function(wt){at=""+wt,pt.call(this,wt)}}),Object.defineProperty($,_e,{enumerable:rt.enumerable}),{getValue:function(){return at},setValue:function(wt){at=""+wt},stopTracking:function(){$._valueTracker=null,delete $[_e]}}}}function Va($){$._valueTracker||($._valueTracker=Ua($))}function Wa($){if(!$)return!1;var _e=$._valueTracker;if(!_e)return!0;var rt=_e.getValue(),at="";return $&&(at=Ta($)?$.checked?"true":"false":$.value),$=at,$!==rt?(_e.setValue($),!0):!1}function Xa($){if($=$||(typeof document<"u"?document:void 0),typeof $>"u")return null;try{return $.activeElement||$.body}catch{return $.body}}function Ya($,_e){var rt=_e.checked;return A$3({},_e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:rt??$._wrapperState.initialChecked})}function Za($,_e){var rt=_e.defaultValue==null?"":_e.defaultValue,at=_e.checked!=null?_e.checked:_e.defaultChecked;rt=Sa(_e.value!=null?_e.value:rt),$._wrapperState={initialChecked:at,initialValue:rt,controlled:_e.type==="checkbox"||_e.type==="radio"?_e.checked!=null:_e.value!=null}}function ab($,_e){_e=_e.checked,_e!=null&&ta($,"checked",_e,!1)}function bb($,_e){ab($,_e);var rt=Sa(_e.value),at=_e.type;if(rt!=null)at==="number"?(rt===0&&$.value===""||$.value!=rt)&&($.value=""+rt):$.value!==""+rt&&($.value=""+rt);else if(at==="submit"||at==="reset"){$.removeAttribute("value");return}_e.hasOwnProperty("value")?cb($,_e.type,rt):_e.hasOwnProperty("defaultValue")&&cb($,_e.type,Sa(_e.defaultValue)),_e.checked==null&&_e.defaultChecked!=null&&($.defaultChecked=!!_e.defaultChecked)}function db($,_e,rt){if(_e.hasOwnProperty("value")||_e.hasOwnProperty("defaultValue")){var at=_e.type;if(!(at!=="submit"&&at!=="reset"||_e.value!==void 0&&_e.value!==null))return;_e=""+$._wrapperState.initialValue,rt||_e===$.value||($.value=_e),$.defaultValue=_e}rt=$.name,rt!==""&&($.name=""),$.defaultChecked=!!$._wrapperState.initialChecked,rt!==""&&($.name=rt)}function cb($,_e,rt){(_e!=="number"||Xa($.ownerDocument)!==$)&&(rt==null?$.defaultValue=""+$._wrapperState.initialValue:$.defaultValue!==""+rt&&($.defaultValue=""+rt))}var eb=Array.isArray;function fb($,_e,rt,at){if($=$.options,_e){_e={};for(var ht=0;ht<rt.length;ht++)_e["$"+rt[ht]]=!0;for(rt=0;rt<$.length;rt++)ht=_e.hasOwnProperty("$"+$[rt].value),$[rt].selected!==ht&&($[rt].selected=ht),ht&&at&&($[rt].defaultSelected=!0)}else{for(rt=""+Sa(rt),_e=null,ht=0;ht<$.length;ht++){if($[ht].value===rt){$[ht].selected=!0,at&&($[ht].defaultSelected=!0);return}_e!==null||$[ht].disabled||(_e=$[ht])}_e!==null&&(_e.selected=!0)}}function gb($,_e){if(_e.dangerouslySetInnerHTML!=null)throw Error(p$6(91));return A$3({},_e,{value:void 0,defaultValue:void 0,children:""+$._wrapperState.initialValue})}function hb($,_e){var rt=_e.value;if(rt==null){if(rt=_e.children,_e=_e.defaultValue,rt!=null){if(_e!=null)throw Error(p$6(92));if(eb(rt)){if(1<rt.length)throw Error(p$6(93));rt=rt[0]}_e=rt}_e==null&&(_e=""),rt=_e}$._wrapperState={initialValue:Sa(rt)}}function ib($,_e){var rt=Sa(_e.value),at=Sa(_e.defaultValue);rt!=null&&(rt=""+rt,rt!==$.value&&($.value=rt),_e.defaultValue==null&&$.defaultValue!==rt&&($.defaultValue=rt)),at!=null&&($.defaultValue=""+at)}function jb($){var _e=$.textContent;_e===$._wrapperState.initialValue&&_e!==""&&_e!==null&&($.value=_e)}function kb($){switch($){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb($,_e){return $==null||$==="http://www.w3.org/1999/xhtml"?kb(_e):$==="http://www.w3.org/2000/svg"&&_e==="foreignObject"?"http://www.w3.org/1999/xhtml":$}var mb,nb=function($){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_e,rt,at,ht){MSApp.execUnsafeLocalFunction(function(){return $(_e,rt,at,ht)})}:$}(function($,_e){if($.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in $)$.innerHTML=_e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+_e.valueOf().toString()+"</svg>",_e=mb.firstChild;$.firstChild;)$.removeChild($.firstChild);for(;_e.firstChild;)$.appendChild(_e.firstChild)}});function ob($,_e){if(_e){var rt=$.firstChild;if(rt&&rt===$.lastChild&&rt.nodeType===3){rt.nodeValue=_e;return}}$.textContent=_e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function($){qb.forEach(function(_e){_e=_e+$.charAt(0).toUpperCase()+$.substring(1),pb[_e]=pb[$]})});function rb($,_e,rt){return _e==null||typeof _e=="boolean"||_e===""?"":rt||typeof _e!="number"||_e===0||pb.hasOwnProperty($)&&pb[$]?(""+_e).trim():_e+"px"}function sb($,_e){$=$.style;for(var rt in _e)if(_e.hasOwnProperty(rt)){var at=rt.indexOf("--")===0,ht=rb(rt,_e[rt],at);rt==="float"&&(rt="cssFloat"),at?$.setProperty(rt,ht):$[rt]=ht}}var tb=A$3({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub($,_e){if(_e){if(tb[$]&&(_e.children!=null||_e.dangerouslySetInnerHTML!=null))throw Error(p$6(137,$));if(_e.dangerouslySetInnerHTML!=null){if(_e.children!=null)throw Error(p$6(60));if(typeof _e.dangerouslySetInnerHTML!="object"||!("__html"in _e.dangerouslySetInnerHTML))throw Error(p$6(61))}if(_e.style!=null&&typeof _e.style!="object")throw Error(p$6(62))}}function vb($,_e){if($.indexOf("-")===-1)return typeof _e.is=="string";switch($){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb($){return $=$.target||$.srcElement||window,$.correspondingUseElement&&($=$.correspondingUseElement),$.nodeType===3?$.parentNode:$}var yb=null,zb=null,Ab=null;function Bb($){if($=Cb($)){if(typeof yb!="function")throw Error(p$6(280));var _e=$.stateNode;_e&&(_e=Db(_e),yb($.stateNode,$.type,_e))}}function Eb($){zb?Ab?Ab.push($):Ab=[$]:zb=$}function Fb(){if(zb){var $=zb,_e=Ab;if(Ab=zb=null,Bb($),_e)for($=0;$<_e.length;$++)Bb(_e[$])}}function Gb($,_e){return $(_e)}function Hb(){}var Ib=!1;function Jb($,_e,rt){if(Ib)return $(_e,rt);Ib=!0;try{return Gb($,_e,rt)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb($,_e){var rt=$.stateNode;if(rt===null)return null;var at=Db(rt);if(at===null)return null;rt=at[_e];e:switch(_e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(at=!at.disabled)||($=$.type,at=!($==="button"||$==="input"||$==="select"||$==="textarea")),$=!at;break e;default:$=!1}if($)return null;if(rt&&typeof rt!="function")throw Error(p$6(231,_e,typeof rt));return rt}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb($,_e,rt,at,ht,pt,wt,st,Tt){var kt=Array.prototype.slice.call(arguments,3);try{_e.apply(rt,kt)}catch(Mt){this.onError(Mt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function($){Ob=!0,Pb=$}};function Tb($,_e,rt,at,ht,pt,wt,st,Tt){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub($,_e,rt,at,ht,pt,wt,st,Tt){if(Tb.apply(this,arguments),Ob){if(Ob){var kt=Pb;Ob=!1,Pb=null}else throw Error(p$6(198));Qb||(Qb=!0,Rb=kt)}}function Vb($){var _e=$,rt=$;if($.alternate)for(;_e.return;)_e=_e.return;else{$=_e;do _e=$,_e.flags&4098&&(rt=_e.return),$=_e.return;while($)}return _e.tag===3?rt:null}function Wb($){if($.tag===13){var _e=$.memoizedState;if(_e===null&&($=$.alternate,$!==null&&(_e=$.memoizedState)),_e!==null)return _e.dehydrated}return null}function Xb($){if(Vb($)!==$)throw Error(p$6(188))}function Yb($){var _e=$.alternate;if(!_e){if(_e=Vb($),_e===null)throw Error(p$6(188));return _e!==$?null:$}for(var rt=$,at=_e;;){var ht=rt.return;if(ht===null)break;var pt=ht.alternate;if(pt===null){if(at=ht.return,at!==null){rt=at;continue}break}if(ht.child===pt.child){for(pt=ht.child;pt;){if(pt===rt)return Xb(ht),$;if(pt===at)return Xb(ht),_e;pt=pt.sibling}throw Error(p$6(188))}if(rt.return!==at.return)rt=ht,at=pt;else{for(var wt=!1,st=ht.child;st;){if(st===rt){wt=!0,rt=ht,at=pt;break}if(st===at){wt=!0,at=ht,rt=pt;break}st=st.sibling}if(!wt){for(st=pt.child;st;){if(st===rt){wt=!0,rt=pt,at=ht;break}if(st===at){wt=!0,at=pt,rt=ht;break}st=st.sibling}if(!wt)throw Error(p$6(189))}}if(rt.alternate!==at)throw Error(p$6(190))}if(rt.tag!==3)throw Error(p$6(188));return rt.stateNode.current===rt?$:_e}function Zb($){return $=Yb($),$!==null?$b($):null}function $b($){if($.tag===5||$.tag===6)return $;for($=$.child;$!==null;){var _e=$b($);if(_e!==null)return _e;$=$.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc($){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,$,void 0,($.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc($){return $>>>=0,$===0?32:31-(pc($)/qc|0)|0}var rc=64,sc=4194304;function tc($){switch($&-$){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return $&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return $&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return $}}function uc($,_e){var rt=$.pendingLanes;if(rt===0)return 0;var at=0,ht=$.suspendedLanes,pt=$.pingedLanes,wt=rt&268435455;if(wt!==0){var st=wt&~ht;st!==0?at=tc(st):(pt&=wt,pt!==0&&(at=tc(pt)))}else wt=rt&~ht,wt!==0?at=tc(wt):pt!==0&&(at=tc(pt));if(at===0)return 0;if(_e!==0&&_e!==at&&!(_e&ht)&&(ht=at&-at,pt=_e&-_e,ht>=pt||ht===16&&(pt&4194240)!==0))return _e;if(at&4&&(at|=rt&16),_e=$.entangledLanes,_e!==0)for($=$.entanglements,_e&=at;0<_e;)rt=31-oc(_e),ht=1<<rt,at|=$[rt],_e&=~ht;return at}function vc($,_e){switch($){case 1:case 2:case 4:return _e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc($,_e){for(var rt=$.suspendedLanes,at=$.pingedLanes,ht=$.expirationTimes,pt=$.pendingLanes;0<pt;){var wt=31-oc(pt),st=1<<wt,Tt=ht[wt];Tt===-1?(!(st&rt)||st&at)&&(ht[wt]=vc(st,_e)):Tt<=_e&&($.expiredLanes|=st),pt&=~st}}function xc($){return $=$.pendingLanes&-1073741825,$!==0?$:$&1073741824?1073741824:0}function yc(){var $=rc;return rc<<=1,!(rc&4194240)&&(rc=64),$}function zc($){for(var _e=[],rt=0;31>rt;rt++)_e.push($);return _e}function Ac($,_e,rt){$.pendingLanes|=_e,_e!==536870912&&($.suspendedLanes=0,$.pingedLanes=0),$=$.eventTimes,_e=31-oc(_e),$[_e]=rt}function Bc($,_e){var rt=$.pendingLanes&~_e;$.pendingLanes=_e,$.suspendedLanes=0,$.pingedLanes=0,$.expiredLanes&=_e,$.mutableReadLanes&=_e,$.entangledLanes&=_e,_e=$.entanglements;var at=$.eventTimes;for($=$.expirationTimes;0<rt;){var ht=31-oc(rt),pt=1<<ht;_e[ht]=0,at[ht]=-1,$[ht]=-1,rt&=~pt}}function Cc($,_e){var rt=$.entangledLanes|=_e;for($=$.entanglements;rt;){var at=31-oc(rt),ht=1<<at;ht&_e|$[at]&_e&&($[at]|=_e),rt&=~ht}}var C=0;function Dc($){return $&=-$,1<$?4<$?$&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc($,_e){switch($){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(_e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(_e.pointerId)}}function Tc($,_e,rt,at,ht,pt){return $===null||$.nativeEvent!==pt?($={blockedOn:_e,domEventName:rt,eventSystemFlags:at,nativeEvent:pt,targetContainers:[ht]},_e!==null&&(_e=Cb(_e),_e!==null&&Fc(_e)),$):($.eventSystemFlags|=at,_e=$.targetContainers,ht!==null&&_e.indexOf(ht)===-1&&_e.push(ht),$)}function Uc($,_e,rt,at,ht){switch(_e){case"focusin":return Lc=Tc(Lc,$,_e,rt,at,ht),!0;case"dragenter":return Mc=Tc(Mc,$,_e,rt,at,ht),!0;case"mouseover":return Nc=Tc(Nc,$,_e,rt,at,ht),!0;case"pointerover":var pt=ht.pointerId;return Oc.set(pt,Tc(Oc.get(pt)||null,$,_e,rt,at,ht)),!0;case"gotpointercapture":return pt=ht.pointerId,Pc.set(pt,Tc(Pc.get(pt)||null,$,_e,rt,at,ht)),!0}return!1}function Vc($){var _e=Wc($.target);if(_e!==null){var rt=Vb(_e);if(rt!==null){if(_e=rt.tag,_e===13){if(_e=Wb(rt),_e!==null){$.blockedOn=_e,Ic($.priority,function(){Gc(rt)});return}}else if(_e===3&&rt.stateNode.current.memoizedState.isDehydrated){$.blockedOn=rt.tag===3?rt.stateNode.containerInfo:null;return}}}$.blockedOn=null}function Xc($){if($.blockedOn!==null)return!1;for(var _e=$.targetContainers;0<_e.length;){var rt=Yc($.domEventName,$.eventSystemFlags,_e[0],$.nativeEvent);if(rt===null){rt=$.nativeEvent;var at=new rt.constructor(rt.type,rt);wb=at,rt.target.dispatchEvent(at),wb=null}else return _e=Cb(rt),_e!==null&&Fc(_e),$.blockedOn=rt,!1;_e.shift()}return!0}function Zc($,_e,rt){Xc($)&&rt.delete(_e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad($,_e){$.blockedOn===_e&&($.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd($){function _e(ht){return ad(ht,$)}if(0<Kc.length){ad(Kc[0],$);for(var rt=1;rt<Kc.length;rt++){var at=Kc[rt];at.blockedOn===$&&(at.blockedOn=null)}}for(Lc!==null&&ad(Lc,$),Mc!==null&&ad(Mc,$),Nc!==null&&ad(Nc,$),Oc.forEach(_e),Pc.forEach(_e),rt=0;rt<Qc.length;rt++)at=Qc[rt],at.blockedOn===$&&(at.blockedOn=null);for(;0<Qc.length&&(rt=Qc[0],rt.blockedOn===null);)Vc(rt),rt.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed($,_e,rt,at){var ht=C,pt=cd.transition;cd.transition=null;try{C=1,fd($,_e,rt,at)}finally{C=ht,cd.transition=pt}}function gd($,_e,rt,at){var ht=C,pt=cd.transition;cd.transition=null;try{C=4,fd($,_e,rt,at)}finally{C=ht,cd.transition=pt}}function fd($,_e,rt,at){if(dd){var ht=Yc($,_e,rt,at);if(ht===null)hd($,_e,at,id,rt),Sc($,at);else if(Uc(ht,$,_e,rt,at))at.stopPropagation();else if(Sc($,at),_e&4&&-1<Rc.indexOf($)){for(;ht!==null;){var pt=Cb(ht);if(pt!==null&&Ec(pt),pt=Yc($,_e,rt,at),pt===null&&hd($,_e,at,id,rt),pt===ht)break;ht=pt}ht!==null&&at.stopPropagation()}else hd($,_e,at,null,rt)}}var id=null;function Yc($,_e,rt,at){if(id=null,$=xb(at),$=Wc($),$!==null)if(_e=Vb($),_e===null)$=null;else if(rt=_e.tag,rt===13){if($=Wb(_e),$!==null)return $;$=null}else if(rt===3){if(_e.stateNode.current.memoizedState.isDehydrated)return _e.tag===3?_e.stateNode.containerInfo:null;$=null}else _e!==$&&($=null);return id=$,null}function jd($){switch($){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var $,_e=ld,rt=_e.length,at,ht="value"in kd?kd.value:kd.textContent,pt=ht.length;for($=0;$<rt&&_e[$]===ht[$];$++);var wt=rt-$;for(at=1;at<=wt&&_e[rt-at]===ht[pt-at];at++);return md=ht.slice($,1<at?1-at:void 0)}function od($){var _e=$.keyCode;return"charCode"in $?($=$.charCode,$===0&&_e===13&&($=13)):$=_e,$===10&&($=13),32<=$||$===13?$:0}function pd(){return!0}function qd(){return!1}function rd($){function _e(rt,at,ht,pt,wt){this._reactName=rt,this._targetInst=ht,this.type=at,this.nativeEvent=pt,this.target=wt,this.currentTarget=null;for(var st in $)$.hasOwnProperty(st)&&(rt=$[st],this[st]=rt?rt(pt):pt[st]);return this.isDefaultPrevented=(pt.defaultPrevented!=null?pt.defaultPrevented:pt.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$3(_e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var rt=this.nativeEvent;rt&&(rt.preventDefault?rt.preventDefault():typeof rt.returnValue!="unknown"&&(rt.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var rt=this.nativeEvent;rt&&(rt.stopPropagation?rt.stopPropagation():typeof rt.cancelBubble!="unknown"&&(rt.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),_e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function($){return $.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$3({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$3({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function($){return $.relatedTarget===void 0?$.fromElement===$.srcElement?$.toElement:$.fromElement:$.relatedTarget},movementX:function($){return"movementX"in $?$.movementX:($!==yd&&(yd&&$.type==="mousemove"?(wd=$.screenX-yd.screenX,xd=$.screenY-yd.screenY):xd=wd=0,yd=$),wd)},movementY:function($){return"movementY"in $?$.movementY:xd}}),Bd=rd(Ad),Cd=A$3({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$3({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$3({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$3({},sd,{clipboardData:function($){return"clipboardData"in $?$.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$3({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd($){var _e=this.nativeEvent;return _e.getModifierState?_e.getModifierState($):($=Od[$])?!!_e[$]:!1}function zd(){return Pd}var Qd=A$3({},ud,{key:function($){if($.key){var _e=Md[$.key]||$.key;if(_e!=="Unidentified")return _e}return $.type==="keypress"?($=od($),$===13?"Enter":String.fromCharCode($)):$.type==="keydown"||$.type==="keyup"?Nd[$.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function($){return $.type==="keypress"?od($):0},keyCode:function($){return $.type==="keydown"||$.type==="keyup"?$.keyCode:0},which:function($){return $.type==="keypress"?od($):$.type==="keydown"||$.type==="keyup"?$.keyCode:0}}),Rd=rd(Qd),Sd=A$3({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$3({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$3({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$3({},Ad,{deltaX:function($){return"deltaX"in $?$.deltaX:"wheelDeltaX"in $?-$.wheelDeltaX:0},deltaY:function($){return"deltaY"in $?$.deltaY:"wheelDeltaY"in $?-$.wheelDeltaY:"wheelDelta"in $?-$.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;function ge($,_e){switch($){case"keyup":return $d.indexOf(_e.keyCode)!==-1;case"keydown":return _e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he($){return $=$.detail,typeof $=="object"&&"data"in $?$.data:null}var ie=!1;function je($,_e){switch($){case"compositionend":return he(_e);case"keypress":return _e.which!==32?null:(fe=!0,ee);case"textInput":return $=_e.data,$===ee&&fe?null:$;default:return null}}function ke($,_e){if(ie)return $==="compositionend"||!ae&&ge($,_e)?($=nd(),md=ld=kd=null,ie=!1,$):null;switch($){case"paste":return null;case"keypress":if(!(_e.ctrlKey||_e.altKey||_e.metaKey)||_e.ctrlKey&&_e.altKey){if(_e.char&&1<_e.char.length)return _e.char;if(_e.which)return String.fromCharCode(_e.which)}return null;case"compositionend":return de&&_e.locale!=="ko"?null:_e.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me($){var _e=$&&$.nodeName&&$.nodeName.toLowerCase();return _e==="input"?!!le[$.type]:_e==="textarea"}function ne($,_e,rt,at){Eb(at),_e=oe(_e,"onChange"),0<_e.length&&(rt=new td("onChange","change",null,rt,at),$.push({event:rt,listeners:_e}))}var pe=null,qe=null;function re($){se($,0)}function te($){var _e=ue$1($);if(Wa(_e))return $}function ve($,_e){if($==="change")return _e}var we=!1;if(ia){var xe$1;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe$1=ye}else xe$1=!1;we=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be($){if($.propertyName==="value"&&te(qe)){var _e=[];ne(_e,qe,$,xb($)),Jb(re,_e)}}function Ce$1($,_e,rt){$==="focusin"?(Ae(),pe=_e,qe=rt,pe.attachEvent("onpropertychange",Be)):$==="focusout"&&Ae()}function De($){if($==="selectionchange"||$==="keyup"||$==="keydown")return te(qe)}function Ee$1($,_e){if($==="click")return te(_e)}function Fe($,_e){if($==="input"||$==="change")return te(_e)}function Ge($,_e){return $===_e&&($!==0||1/$===1/_e)||$!==$&&_e!==_e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie$1($,_e){if(He($,_e))return!0;if(typeof $!="object"||$===null||typeof _e!="object"||_e===null)return!1;var rt=Object.keys($),at=Object.keys(_e);if(rt.length!==at.length)return!1;for(at=0;at<rt.length;at++){var ht=rt[at];if(!ja.call(_e,ht)||!He($[ht],_e[ht]))return!1}return!0}function Je($){for(;$&&$.firstChild;)$=$.firstChild;return $}function Ke($,_e){var rt=Je($);$=0;for(var at;rt;){if(rt.nodeType===3){if(at=$+rt.textContent.length,$<=_e&&at>=_e)return{node:rt,offset:_e-$};$=at}e:{for(;rt;){if(rt.nextSibling){rt=rt.nextSibling;break e}rt=rt.parentNode}rt=void 0}rt=Je(rt)}}function Le($,_e){return $&&_e?$===_e?!0:$&&$.nodeType===3?!1:_e&&_e.nodeType===3?Le($,_e.parentNode):"contains"in $?$.contains(_e):$.compareDocumentPosition?!!($.compareDocumentPosition(_e)&16):!1:!1}function Me$1(){for(var $=window,_e=Xa();_e instanceof $.HTMLIFrameElement;){try{var rt=typeof _e.contentWindow.location.href=="string"}catch{rt=!1}if(rt)$=_e.contentWindow;else break;_e=Xa($.document)}return _e}function Ne$1($){var _e=$&&$.nodeName&&$.nodeName.toLowerCase();return _e&&(_e==="input"&&($.type==="text"||$.type==="search"||$.type==="tel"||$.type==="url"||$.type==="password")||_e==="textarea"||$.contentEditable==="true")}function Oe($){var _e=Me$1(),rt=$.focusedElem,at=$.selectionRange;if(_e!==rt&&rt&&rt.ownerDocument&&Le(rt.ownerDocument.documentElement,rt)){if(at!==null&&Ne$1(rt)){if(_e=at.start,$=at.end,$===void 0&&($=_e),"selectionStart"in rt)rt.selectionStart=_e,rt.selectionEnd=Math.min($,rt.value.length);else if($=(_e=rt.ownerDocument||document)&&_e.defaultView||window,$.getSelection){$=$.getSelection();var ht=rt.textContent.length,pt=Math.min(at.start,ht);at=at.end===void 0?pt:Math.min(at.end,ht),!$.extend&&pt>at&&(ht=at,at=pt,pt=ht),ht=Ke(rt,pt);var wt=Ke(rt,at);ht&&wt&&($.rangeCount!==1||$.anchorNode!==ht.node||$.anchorOffset!==ht.offset||$.focusNode!==wt.node||$.focusOffset!==wt.offset)&&(_e=_e.createRange(),_e.setStart(ht.node,ht.offset),$.removeAllRanges(),pt>at?($.addRange(_e),$.extend(wt.node,wt.offset)):(_e.setEnd(wt.node,wt.offset),$.addRange(_e)))}}for(_e=[],$=rt;$=$.parentNode;)$.nodeType===1&&_e.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof rt.focus=="function"&&rt.focus(),rt=0;rt<_e.length;rt++)$=_e[rt],$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re$1=null,Se=null,Te=!1;function Ue($,_e,rt){var at=rt.window===rt?rt.document:rt.nodeType===9?rt:rt.ownerDocument;Te||Qe==null||Qe!==Xa(at)||(at=Qe,"selectionStart"in at&&Ne$1(at)?at={start:at.selectionStart,end:at.selectionEnd}:(at=(at.ownerDocument&&at.ownerDocument.defaultView||window).getSelection(),at={anchorNode:at.anchorNode,anchorOffset:at.anchorOffset,focusNode:at.focusNode,focusOffset:at.focusOffset}),Se&&Ie$1(Se,at)||(Se=at,at=oe(Re$1,"onSelect"),0<at.length&&(_e=new td("onSelect","select",null,_e,rt),$.push({event:_e,listeners:at}),_e.target=Qe)))}function Ve($,_e){var rt={};return rt[$.toLowerCase()]=_e.toLowerCase(),rt["Webkit"+$]="webkit"+_e,rt["Moz"+$]="moz"+_e,rt}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze($){if(Xe[$])return Xe[$];if(!We[$])return $;var _e=We[$],rt;for(rt in _e)if(_e.hasOwnProperty(rt)&&rt in Ye)return Xe[$]=_e[rt];return $}var $e$1=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff($,_e){df.set($,_e),fa(_e,[$])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf($,_e,rt){var at=$.type||"unknown-event";$.currentTarget=rt,Ub(at,_e,void 0,$),$.currentTarget=null}function se($,_e){_e=(_e&4)!==0;for(var rt=0;rt<$.length;rt++){var at=$[rt],ht=at.event;at=at.listeners;e:{var pt=void 0;if(_e)for(var wt=at.length-1;0<=wt;wt--){var st=at[wt],Tt=st.instance,kt=st.currentTarget;if(st=st.listener,Tt!==pt&&ht.isPropagationStopped())break e;nf(ht,st,kt),pt=Tt}else for(wt=0;wt<at.length;wt++){if(st=at[wt],Tt=st.instance,kt=st.currentTarget,st=st.listener,Tt!==pt&&ht.isPropagationStopped())break e;nf(ht,st,kt),pt=Tt}}}if(Qb)throw $=Rb,Qb=!1,Rb=null,$}function D$1($,_e){var rt=_e[of];rt===void 0&&(rt=_e[of]=new Set);var at=$+"__bubble";rt.has(at)||(pf(_e,$,2,!1),rt.add(at))}function qf($,_e,rt){var at=0;_e&&(at|=4),pf(rt,$,at,_e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf($){if(!$[rf]){$[rf]=!0,da.forEach(function(rt){rt!=="selectionchange"&&(mf.has(rt)||qf(rt,!1,$),qf(rt,!0,$))});var _e=$.nodeType===9?$:$.ownerDocument;_e===null||_e[rf]||(_e[rf]=!0,qf("selectionchange",!1,_e))}}function pf($,_e,rt,at){switch(jd(_e)){case 1:var ht=ed;break;case 4:ht=gd;break;default:ht=fd}rt=ht.bind(null,_e,rt,$),ht=void 0,!Lb||_e!=="touchstart"&&_e!=="touchmove"&&_e!=="wheel"||(ht=!0),at?ht!==void 0?$.addEventListener(_e,rt,{capture:!0,passive:ht}):$.addEventListener(_e,rt,!0):ht!==void 0?$.addEventListener(_e,rt,{passive:ht}):$.addEventListener(_e,rt,!1)}function hd($,_e,rt,at,ht){var pt=at;if(!(_e&1)&&!(_e&2)&&at!==null)e:for(;;){if(at===null)return;var wt=at.tag;if(wt===3||wt===4){var st=at.stateNode.containerInfo;if(st===ht||st.nodeType===8&&st.parentNode===ht)break;if(wt===4)for(wt=at.return;wt!==null;){var Tt=wt.tag;if((Tt===3||Tt===4)&&(Tt=wt.stateNode.containerInfo,Tt===ht||Tt.nodeType===8&&Tt.parentNode===ht))return;wt=wt.return}for(;st!==null;){if(wt=Wc(st),wt===null)return;if(Tt=wt.tag,Tt===5||Tt===6){at=pt=wt;continue e}st=st.parentNode}}at=at.return}Jb(function(){var kt=pt,Mt=xb(rt),Dt=[];e:{var Ot=df.get($);if(Ot!==void 0){var Ut=td,qt=$;switch($){case"keypress":if(od(rt)===0)break e;case"keydown":case"keyup":Ut=Rd;break;case"focusin":qt="focus",Ut=Fd;break;case"focusout":qt="blur",Ut=Fd;break;case"beforeblur":case"afterblur":Ut=Fd;break;case"click":if(rt.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ut=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ut=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ut=Vd;break;case $e$1:case af:case bf:Ut=Hd;break;case cf:Ut=Xd;break;case"scroll":Ut=vd;break;case"wheel":Ut=Zd;break;case"copy":case"cut":case"paste":Ut=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ut=Td}var tr=(_e&4)!==0,ar=!tr&&$==="scroll",Yt=tr?Ot!==null?Ot+"Capture":null:Ot;tr=[];for(var Kt=kt,Jt;Kt!==null;){Jt=Kt;var pr=Jt.stateNode;if(Jt.tag===5&&pr!==null&&(Jt=pr,Yt!==null&&(pr=Kb(Kt,Yt),pr!=null&&tr.push(tf(Kt,pr,Jt)))),ar)break;Kt=Kt.return}0<tr.length&&(Ot=new Ut(Ot,qt,null,rt,Mt),Dt.push({event:Ot,listeners:tr}))}}if(!(_e&7)){e:{if(Ot=$==="mouseover"||$==="pointerover",Ut=$==="mouseout"||$==="pointerout",Ot&&rt!==wb&&(qt=rt.relatedTarget||rt.fromElement)&&(Wc(qt)||qt[uf]))break e;if((Ut||Ot)&&(Ot=Mt.window===Mt?Mt:(Ot=Mt.ownerDocument)?Ot.defaultView||Ot.parentWindow:window,Ut?(qt=rt.relatedTarget||rt.toElement,Ut=kt,qt=qt?Wc(qt):null,qt!==null&&(ar=Vb(qt),qt!==ar||qt.tag!==5&&qt.tag!==6)&&(qt=null)):(Ut=null,qt=kt),Ut!==qt)){if(tr=Bd,pr="onMouseLeave",Yt="onMouseEnter",Kt="mouse",($==="pointerout"||$==="pointerover")&&(tr=Td,pr="onPointerLeave",Yt="onPointerEnter",Kt="pointer"),ar=Ut==null?Ot:ue$1(Ut),Jt=qt==null?Ot:ue$1(qt),Ot=new tr(pr,Kt+"leave",Ut,rt,Mt),Ot.target=ar,Ot.relatedTarget=Jt,pr=null,Wc(Mt)===kt&&(tr=new tr(Yt,Kt+"enter",qt,rt,Mt),tr.target=Jt,tr.relatedTarget=ar,pr=tr),ar=pr,Ut&&qt)t:{for(tr=Ut,Yt=qt,Kt=0,Jt=tr;Jt;Jt=vf(Jt))Kt++;for(Jt=0,pr=Yt;pr;pr=vf(pr))Jt++;for(;0<Kt-Jt;)tr=vf(tr),Kt--;for(;0<Jt-Kt;)Yt=vf(Yt),Jt--;for(;Kt--;){if(tr===Yt||Yt!==null&&tr===Yt.alternate)break t;tr=vf(tr),Yt=vf(Yt)}tr=null}else tr=null;Ut!==null&&wf(Dt,Ot,Ut,tr,!1),qt!==null&&ar!==null&&wf(Dt,ar,qt,tr,!0)}}e:{if(Ot=kt?ue$1(kt):window,Ut=Ot.nodeName&&Ot.nodeName.toLowerCase(),Ut==="select"||Ut==="input"&&Ot.type==="file")var Sr=ve;else if(me(Ot))if(we)Sr=Fe;else{Sr=De;var Er=Ce$1}else(Ut=Ot.nodeName)&&Ut.toLowerCase()==="input"&&(Ot.type==="checkbox"||Ot.type==="radio")&&(Sr=Ee$1);if(Sr&&(Sr=Sr($,kt))){ne(Dt,Sr,rt,Mt);break e}Er&&Er($,Ot,kt),$==="focusout"&&(Er=Ot._wrapperState)&&Er.controlled&&Ot.type==="number"&&cb(Ot,"number",Ot.value)}switch(Er=kt?ue$1(kt):window,$){case"focusin":(me(Er)||Er.contentEditable==="true")&&(Qe=Er,Re$1=kt,Se=null);break;case"focusout":Se=Re$1=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(Dt,rt,Mt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(Dt,rt,Mt)}var Rr;if(ae)e:{switch($){case"compositionstart":var Lr="onCompositionStart";break e;case"compositionend":Lr="onCompositionEnd";break e;case"compositionupdate":Lr="onCompositionUpdate";break e}Lr=void 0}else ie?ge($,rt)&&(Lr="onCompositionEnd"):$==="keydown"&&rt.keyCode===229&&(Lr="onCompositionStart");Lr&&(de&&rt.locale!=="ko"&&(ie||Lr!=="onCompositionStart"?Lr==="onCompositionEnd"&&ie&&(Rr=nd()):(kd=Mt,ld="value"in kd?kd.value:kd.textContent,ie=!0)),Er=oe(kt,Lr),0<Er.length&&(Lr=new Ld(Lr,$,null,rt,Mt),Dt.push({event:Lr,listeners:Er}),Rr?Lr.data=Rr:(Rr=he(rt),Rr!==null&&(Lr.data=Rr)))),(Rr=ce?je($,rt):ke($,rt))&&(kt=oe(kt,"onBeforeInput"),0<kt.length&&(Mt=new Ld("onBeforeInput","beforeinput",null,rt,Mt),Dt.push({event:Mt,listeners:kt}),Mt.data=Rr))}se(Dt,_e)})}function tf($,_e,rt){return{instance:$,listener:_e,currentTarget:rt}}function oe($,_e){for(var rt=_e+"Capture",at=[];$!==null;){var ht=$,pt=ht.stateNode;ht.tag===5&&pt!==null&&(ht=pt,pt=Kb($,rt),pt!=null&&at.unshift(tf($,pt,ht)),pt=Kb($,_e),pt!=null&&at.push(tf($,pt,ht))),$=$.return}return at}function vf($){if($===null)return null;do $=$.return;while($&&$.tag!==5);return $||null}function wf($,_e,rt,at,ht){for(var pt=_e._reactName,wt=[];rt!==null&&rt!==at;){var st=rt,Tt=st.alternate,kt=st.stateNode;if(Tt!==null&&Tt===at)break;st.tag===5&&kt!==null&&(st=kt,ht?(Tt=Kb(rt,pt),Tt!=null&&wt.unshift(tf(rt,Tt,st))):ht||(Tt=Kb(rt,pt),Tt!=null&&wt.push(tf(rt,Tt,st)))),rt=rt.return}wt.length!==0&&$.push({event:_e,listeners:wt})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf($){return(typeof $=="string"?$:""+$).replace(xf,`
`).replace(yf,"")}function Af($,_e,rt){if(_e=zf(_e),zf($)!==_e&&rt)throw Error(p$6(425))}function Bf(){}var Cf=null,Df=null;function Ef($,_e){return $==="textarea"||$==="noscript"||typeof _e.children=="string"||typeof _e.children=="number"||typeof _e.dangerouslySetInnerHTML=="object"&&_e.dangerouslySetInnerHTML!==null&&_e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function($){return Hf.resolve(null).then($).catch(If)}:Ff;function If($){setTimeout(function(){throw $})}function Kf($,_e){var rt=_e,at=0;do{var ht=rt.nextSibling;if($.removeChild(rt),ht&&ht.nodeType===8)if(rt=ht.data,rt==="/$"){if(at===0){$.removeChild(ht),bd(_e);return}at--}else rt!=="$"&&rt!=="$?"&&rt!=="$!"||at++;rt=ht}while(rt);bd(_e)}function Lf($){for(;$!=null;$=$.nextSibling){var _e=$.nodeType;if(_e===1||_e===3)break;if(_e===8){if(_e=$.data,_e==="$"||_e==="$!"||_e==="$?")break;if(_e==="/$")return null}}return $}function Mf($){$=$.previousSibling;for(var _e=0;$;){if($.nodeType===8){var rt=$.data;if(rt==="$"||rt==="$!"||rt==="$?"){if(_e===0)return $;_e--}else rt==="/$"&&_e++}$=$.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc($){var _e=$[Of];if(_e)return _e;for(var rt=$.parentNode;rt;){if(_e=rt[uf]||rt[Of]){if(rt=_e.alternate,_e.child!==null||rt!==null&&rt.child!==null)for($=Mf($);$!==null;){if(rt=$[Of])return rt;$=Mf($)}return _e}$=rt,rt=$.parentNode}return null}function Cb($){return $=$[Of]||$[uf],!$||$.tag!==5&&$.tag!==6&&$.tag!==13&&$.tag!==3?null:$}function ue$1($){if($.tag===5||$.tag===6)return $.stateNode;throw Error(p$6(33))}function Db($){return $[Pf]||null}var Sf=[],Tf=-1;function Uf($){return{current:$}}function E$1($){0>Tf||($.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1($,_e){Tf++,Sf[Tf]=$.current,$.current=_e}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf($,_e){var rt=$.type.contextTypes;if(!rt)return Vf;var at=$.stateNode;if(at&&at.__reactInternalMemoizedUnmaskedChildContext===_e)return at.__reactInternalMemoizedMaskedChildContext;var ht={},pt;for(pt in rt)ht[pt]=_e[pt];return at&&($=$.stateNode,$.__reactInternalMemoizedUnmaskedChildContext=_e,$.__reactInternalMemoizedMaskedChildContext=ht),ht}function Zf($){return $=$.childContextTypes,$!=null}function $f(){E$1(Wf),E$1(H$1)}function ag($,_e,rt){if(H$1.current!==Vf)throw Error(p$6(168));G$1(H$1,_e),G$1(Wf,rt)}function bg($,_e,rt){var at=$.stateNode;if(_e=_e.childContextTypes,typeof at.getChildContext!="function")return rt;at=at.getChildContext();for(var ht in at)if(!(ht in _e))throw Error(p$6(108,Ra($)||"Unknown",ht));return A$3({},rt,at)}function cg($){return $=($=$.stateNode)&&$.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G$1(H$1,$),G$1(Wf,Wf.current),!0}function dg($,_e,rt){var at=$.stateNode;if(!at)throw Error(p$6(169));rt?($=bg($,_e,Xf),at.__reactInternalMemoizedMergedChildContext=$,E$1(Wf),E$1(H$1),G$1(H$1,$)):E$1(Wf),G$1(Wf,rt)}var eg=null,fg=!1,gg=!1;function hg($){eg===null?eg=[$]:eg.push($)}function ig($){fg=!0,hg($)}function jg(){if(!gg&&eg!==null){gg=!0;var $=0,_e=C;try{var rt=eg;for(C=1;$<rt.length;$++){var at=rt[$];do at=at(!0);while(at!==null)}eg=null,fg=!1}catch(ht){throw eg!==null&&(eg=eg.slice($+1)),ac(fc,jg),ht}finally{C=_e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg($,_e){kg[lg++]=ng,kg[lg++]=mg,mg=$,ng=_e}function ug($,_e,rt){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=$;var at=rg;$=sg;var ht=32-oc(at)-1;at&=~(1<<ht),rt+=1;var pt=32-oc(_e)+ht;if(30<pt){var wt=ht-ht%5;pt=(at&(1<<wt)-1).toString(32),at>>=wt,ht-=wt,rg=1<<32-oc(_e)+ht|rt<<ht|at,sg=pt+$}else rg=1<<pt|rt<<ht|at,sg=$}function vg($){$.return!==null&&(tg($,1),ug($,1,0))}function wg($){for(;$===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;$===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag($,_e){var rt=Bg(5,null,null,0);rt.elementType="DELETED",rt.stateNode=_e,rt.return=$,_e=$.deletions,_e===null?($.deletions=[rt],$.flags|=16):_e.push(rt)}function Cg($,_e){switch($.tag){case 5:var rt=$.type;return _e=_e.nodeType!==1||rt.toLowerCase()!==_e.nodeName.toLowerCase()?null:_e,_e!==null?($.stateNode=_e,xg=$,yg=Lf(_e.firstChild),!0):!1;case 6:return _e=$.pendingProps===""||_e.nodeType!==3?null:_e,_e!==null?($.stateNode=_e,xg=$,yg=null,!0):!1;case 13:return _e=_e.nodeType!==8?null:_e,_e!==null?(rt=qg!==null?{id:rg,overflow:sg}:null,$.memoizedState={dehydrated:_e,treeContext:rt,retryLane:1073741824},rt=Bg(18,null,null,0),rt.stateNode=_e,rt.return=$,$.child=rt,xg=$,yg=null,!0):!1;default:return!1}}function Dg($){return($.mode&1)!==0&&($.flags&128)===0}function Eg($){if(I$1){var _e=yg;if(_e){var rt=_e;if(!Cg($,_e)){if(Dg($))throw Error(p$6(418));_e=Lf(rt.nextSibling);var at=xg;_e&&Cg($,_e)?Ag(at,rt):($.flags=$.flags&-4097|2,I$1=!1,xg=$)}}else{if(Dg($))throw Error(p$6(418));$.flags=$.flags&-4097|2,I$1=!1,xg=$}}}function Fg($){for($=$.return;$!==null&&$.tag!==5&&$.tag!==3&&$.tag!==13;)$=$.return;xg=$}function Gg($){if($!==xg)return!1;if(!I$1)return Fg($),I$1=!0,!1;var _e;if((_e=$.tag!==3)&&!(_e=$.tag!==5)&&(_e=$.type,_e=_e!=="head"&&_e!=="body"&&!Ef($.type,$.memoizedProps)),_e&&(_e=yg)){if(Dg($))throw Hg(),Error(p$6(418));for(;_e;)Ag($,_e),_e=Lf(_e.nextSibling)}if(Fg($),$.tag===13){if($=$.memoizedState,$=$!==null?$.dehydrated:null,!$)throw Error(p$6(317));e:{for($=$.nextSibling,_e=0;$;){if($.nodeType===8){var rt=$.data;if(rt==="/$"){if(_e===0){yg=Lf($.nextSibling);break e}_e--}else rt!=="$"&&rt!=="$!"&&rt!=="$?"||_e++}$=$.nextSibling}yg=null}}else yg=xg?Lf($.stateNode.nextSibling):null;return!0}function Hg(){for(var $=yg;$;)$=Lf($.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg($){zg===null?zg=[$]:zg.push($)}var Kg=ua.ReactCurrentBatchConfig;function Lg($,_e){if($&&$.defaultProps){_e=A$3({},_e),$=$.defaultProps;for(var rt in $)_e[rt]===void 0&&(_e[rt]=$[rt]);return _e}return _e}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg($){var _e=Mg.current;E$1(Mg),$._currentValue=_e}function Sg($,_e,rt){for(;$!==null;){var at=$.alternate;if(($.childLanes&_e)!==_e?($.childLanes|=_e,at!==null&&(at.childLanes|=_e)):at!==null&&(at.childLanes&_e)!==_e&&(at.childLanes|=_e),$===rt)break;$=$.return}}function Tg($,_e){Ng=$,Pg=Og=null,$=$.dependencies,$!==null&&$.firstContext!==null&&($.lanes&_e&&(Ug=!0),$.firstContext=null)}function Vg($){var _e=$._currentValue;if(Pg!==$)if($={context:$,memoizedValue:_e,next:null},Og===null){if(Ng===null)throw Error(p$6(308));Og=$,Ng.dependencies={lanes:0,firstContext:$}}else Og=Og.next=$;return _e}var Wg=null;function Xg($){Wg===null?Wg=[$]:Wg.push($)}function Yg($,_e,rt,at){var ht=_e.interleaved;return ht===null?(rt.next=rt,Xg(_e)):(rt.next=ht.next,ht.next=rt),_e.interleaved=rt,Zg($,at)}function Zg($,_e){$.lanes|=_e;var rt=$.alternate;for(rt!==null&&(rt.lanes|=_e),rt=$,$=$.return;$!==null;)$.childLanes|=_e,rt=$.alternate,rt!==null&&(rt.childLanes|=_e),rt=$,$=$.return;return rt.tag===3?rt.stateNode:null}var $g=!1;function ah($){$.updateQueue={baseState:$.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh($,_e){$=$.updateQueue,_e.updateQueue===$&&(_e.updateQueue={baseState:$.baseState,firstBaseUpdate:$.firstBaseUpdate,lastBaseUpdate:$.lastBaseUpdate,shared:$.shared,effects:$.effects})}function ch($,_e){return{eventTime:$,lane:_e,tag:0,payload:null,callback:null,next:null}}function dh($,_e,rt){var at=$.updateQueue;if(at===null)return null;if(at=at.shared,K&2){var ht=at.pending;return ht===null?_e.next=_e:(_e.next=ht.next,ht.next=_e),at.pending=_e,Zg($,rt)}return ht=at.interleaved,ht===null?(_e.next=_e,Xg(at)):(_e.next=ht.next,ht.next=_e),at.interleaved=_e,Zg($,rt)}function eh($,_e,rt){if(_e=_e.updateQueue,_e!==null&&(_e=_e.shared,(rt&4194240)!==0)){var at=_e.lanes;at&=$.pendingLanes,rt|=at,_e.lanes=rt,Cc($,rt)}}function fh($,_e){var rt=$.updateQueue,at=$.alternate;if(at!==null&&(at=at.updateQueue,rt===at)){var ht=null,pt=null;if(rt=rt.firstBaseUpdate,rt!==null){do{var wt={eventTime:rt.eventTime,lane:rt.lane,tag:rt.tag,payload:rt.payload,callback:rt.callback,next:null};pt===null?ht=pt=wt:pt=pt.next=wt,rt=rt.next}while(rt!==null);pt===null?ht=pt=_e:pt=pt.next=_e}else ht=pt=_e;rt={baseState:at.baseState,firstBaseUpdate:ht,lastBaseUpdate:pt,shared:at.shared,effects:at.effects},$.updateQueue=rt;return}$=rt.lastBaseUpdate,$===null?rt.firstBaseUpdate=_e:$.next=_e,rt.lastBaseUpdate=_e}function gh($,_e,rt,at){var ht=$.updateQueue;$g=!1;var pt=ht.firstBaseUpdate,wt=ht.lastBaseUpdate,st=ht.shared.pending;if(st!==null){ht.shared.pending=null;var Tt=st,kt=Tt.next;Tt.next=null,wt===null?pt=kt:wt.next=kt,wt=Tt;var Mt=$.alternate;Mt!==null&&(Mt=Mt.updateQueue,st=Mt.lastBaseUpdate,st!==wt&&(st===null?Mt.firstBaseUpdate=kt:st.next=kt,Mt.lastBaseUpdate=Tt))}if(pt!==null){var Dt=ht.baseState;wt=0,Mt=kt=Tt=null,st=pt;do{var Ot=st.lane,Ut=st.eventTime;if((at&Ot)===Ot){Mt!==null&&(Mt=Mt.next={eventTime:Ut,lane:0,tag:st.tag,payload:st.payload,callback:st.callback,next:null});e:{var qt=$,tr=st;switch(Ot=_e,Ut=rt,tr.tag){case 1:if(qt=tr.payload,typeof qt=="function"){Dt=qt.call(Ut,Dt,Ot);break e}Dt=qt;break e;case 3:qt.flags=qt.flags&-65537|128;case 0:if(qt=tr.payload,Ot=typeof qt=="function"?qt.call(Ut,Dt,Ot):qt,Ot==null)break e;Dt=A$3({},Dt,Ot);break e;case 2:$g=!0}}st.callback!==null&&st.lane!==0&&($.flags|=64,Ot=ht.effects,Ot===null?ht.effects=[st]:Ot.push(st))}else Ut={eventTime:Ut,lane:Ot,tag:st.tag,payload:st.payload,callback:st.callback,next:null},Mt===null?(kt=Mt=Ut,Tt=Dt):Mt=Mt.next=Ut,wt|=Ot;if(st=st.next,st===null){if(st=ht.shared.pending,st===null)break;Ot=st,st=Ot.next,Ot.next=null,ht.lastBaseUpdate=Ot,ht.shared.pending=null}}while(1);if(Mt===null&&(Tt=Dt),ht.baseState=Tt,ht.firstBaseUpdate=kt,ht.lastBaseUpdate=Mt,_e=ht.shared.interleaved,_e!==null){ht=_e;do wt|=ht.lane,ht=ht.next;while(ht!==_e)}else pt===null&&(ht.shared.lanes=0);hh|=wt,$.lanes=wt,$.memoizedState=Dt}}function ih($,_e,rt){if($=_e.effects,_e.effects=null,$!==null)for(_e=0;_e<$.length;_e++){var at=$[_e],ht=at.callback;if(ht!==null){if(at.callback=null,at=rt,typeof ht!="function")throw Error(p$6(191,ht));ht.call(at)}}}var jh=new aa.Component().refs;function kh($,_e,rt,at){_e=$.memoizedState,rt=rt(at,_e),rt=rt==null?_e:A$3({},_e,rt),$.memoizedState=rt,$.lanes===0&&($.updateQueue.baseState=rt)}var nh={isMounted:function($){return($=$._reactInternals)?Vb($)===$:!1},enqueueSetState:function($,_e,rt){$=$._reactInternals;var at=L$1(),ht=lh($),pt=ch(at,ht);pt.payload=_e,rt!=null&&(pt.callback=rt),_e=dh($,pt,ht),_e!==null&&(mh(_e,$,ht,at),eh(_e,$,ht))},enqueueReplaceState:function($,_e,rt){$=$._reactInternals;var at=L$1(),ht=lh($),pt=ch(at,ht);pt.tag=1,pt.payload=_e,rt!=null&&(pt.callback=rt),_e=dh($,pt,ht),_e!==null&&(mh(_e,$,ht,at),eh(_e,$,ht))},enqueueForceUpdate:function($,_e){$=$._reactInternals;var rt=L$1(),at=lh($),ht=ch(rt,at);ht.tag=2,_e!=null&&(ht.callback=_e),_e=dh($,ht,at),_e!==null&&(mh(_e,$,at,rt),eh(_e,$,at))}};function oh($,_e,rt,at,ht,pt,wt){return $=$.stateNode,typeof $.shouldComponentUpdate=="function"?$.shouldComponentUpdate(at,pt,wt):_e.prototype&&_e.prototype.isPureReactComponent?!Ie$1(rt,at)||!Ie$1(ht,pt):!0}function ph($,_e,rt){var at=!1,ht=Vf,pt=_e.contextType;return typeof pt=="object"&&pt!==null?pt=Vg(pt):(ht=Zf(_e)?Xf:H$1.current,at=_e.contextTypes,pt=(at=at!=null)?Yf($,ht):Vf),_e=new _e(rt,pt),$.memoizedState=_e.state!==null&&_e.state!==void 0?_e.state:null,_e.updater=nh,$.stateNode=_e,_e._reactInternals=$,at&&($=$.stateNode,$.__reactInternalMemoizedUnmaskedChildContext=ht,$.__reactInternalMemoizedMaskedChildContext=pt),_e}function qh($,_e,rt,at){$=_e.state,typeof _e.componentWillReceiveProps=="function"&&_e.componentWillReceiveProps(rt,at),typeof _e.UNSAFE_componentWillReceiveProps=="function"&&_e.UNSAFE_componentWillReceiveProps(rt,at),_e.state!==$&&nh.enqueueReplaceState(_e,_e.state,null)}function rh($,_e,rt,at){var ht=$.stateNode;ht.props=rt,ht.state=$.memoizedState,ht.refs=jh,ah($);var pt=_e.contextType;typeof pt=="object"&&pt!==null?ht.context=Vg(pt):(pt=Zf(_e)?Xf:H$1.current,ht.context=Yf($,pt)),ht.state=$.memoizedState,pt=_e.getDerivedStateFromProps,typeof pt=="function"&&(kh($,_e,pt,rt),ht.state=$.memoizedState),typeof _e.getDerivedStateFromProps=="function"||typeof ht.getSnapshotBeforeUpdate=="function"||typeof ht.UNSAFE_componentWillMount!="function"&&typeof ht.componentWillMount!="function"||(_e=ht.state,typeof ht.componentWillMount=="function"&&ht.componentWillMount(),typeof ht.UNSAFE_componentWillMount=="function"&&ht.UNSAFE_componentWillMount(),_e!==ht.state&&nh.enqueueReplaceState(ht,ht.state,null),gh($,rt,ht,at),ht.state=$.memoizedState),typeof ht.componentDidMount=="function"&&($.flags|=4194308)}function sh($,_e,rt){if($=rt.ref,$!==null&&typeof $!="function"&&typeof $!="object"){if(rt._owner){if(rt=rt._owner,rt){if(rt.tag!==1)throw Error(p$6(309));var at=rt.stateNode}if(!at)throw Error(p$6(147,$));var ht=at,pt=""+$;return _e!==null&&_e.ref!==null&&typeof _e.ref=="function"&&_e.ref._stringRef===pt?_e.ref:(_e=function(wt){var st=ht.refs;st===jh&&(st=ht.refs={}),wt===null?delete st[pt]:st[pt]=wt},_e._stringRef=pt,_e)}if(typeof $!="string")throw Error(p$6(284));if(!rt._owner)throw Error(p$6(290,$))}return $}function th($,_e){throw $=Object.prototype.toString.call(_e),Error(p$6(31,$==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":$))}function uh($){var _e=$._init;return _e($._payload)}function vh($){function _e(Yt,Kt){if($){var Jt=Yt.deletions;Jt===null?(Yt.deletions=[Kt],Yt.flags|=16):Jt.push(Kt)}}function rt(Yt,Kt){if(!$)return null;for(;Kt!==null;)_e(Yt,Kt),Kt=Kt.sibling;return null}function at(Yt,Kt){for(Yt=new Map;Kt!==null;)Kt.key!==null?Yt.set(Kt.key,Kt):Yt.set(Kt.index,Kt),Kt=Kt.sibling;return Yt}function ht(Yt,Kt){return Yt=wh(Yt,Kt),Yt.index=0,Yt.sibling=null,Yt}function pt(Yt,Kt,Jt){return Yt.index=Jt,$?(Jt=Yt.alternate,Jt!==null?(Jt=Jt.index,Jt<Kt?(Yt.flags|=2,Kt):Jt):(Yt.flags|=2,Kt)):(Yt.flags|=1048576,Kt)}function wt(Yt){return $&&Yt.alternate===null&&(Yt.flags|=2),Yt}function st(Yt,Kt,Jt,pr){return Kt===null||Kt.tag!==6?(Kt=xh(Jt,Yt.mode,pr),Kt.return=Yt,Kt):(Kt=ht(Kt,Jt),Kt.return=Yt,Kt)}function Tt(Yt,Kt,Jt,pr){var Sr=Jt.type;return Sr===ya?Mt(Yt,Kt,Jt.props.children,pr,Jt.key):Kt!==null&&(Kt.elementType===Sr||typeof Sr=="object"&&Sr!==null&&Sr.$$typeof===Ha&&uh(Sr)===Kt.type)?(pr=ht(Kt,Jt.props),pr.ref=sh(Yt,Kt,Jt),pr.return=Yt,pr):(pr=yh(Jt.type,Jt.key,Jt.props,null,Yt.mode,pr),pr.ref=sh(Yt,Kt,Jt),pr.return=Yt,pr)}function kt(Yt,Kt,Jt,pr){return Kt===null||Kt.tag!==4||Kt.stateNode.containerInfo!==Jt.containerInfo||Kt.stateNode.implementation!==Jt.implementation?(Kt=zh(Jt,Yt.mode,pr),Kt.return=Yt,Kt):(Kt=ht(Kt,Jt.children||[]),Kt.return=Yt,Kt)}function Mt(Yt,Kt,Jt,pr,Sr){return Kt===null||Kt.tag!==7?(Kt=Ah(Jt,Yt.mode,pr,Sr),Kt.return=Yt,Kt):(Kt=ht(Kt,Jt),Kt.return=Yt,Kt)}function Dt(Yt,Kt,Jt){if(typeof Kt=="string"&&Kt!==""||typeof Kt=="number")return Kt=xh(""+Kt,Yt.mode,Jt),Kt.return=Yt,Kt;if(typeof Kt=="object"&&Kt!==null){switch(Kt.$$typeof){case va:return Jt=yh(Kt.type,Kt.key,Kt.props,null,Yt.mode,Jt),Jt.ref=sh(Yt,null,Kt),Jt.return=Yt,Jt;case wa:return Kt=zh(Kt,Yt.mode,Jt),Kt.return=Yt,Kt;case Ha:var pr=Kt._init;return Dt(Yt,pr(Kt._payload),Jt)}if(eb(Kt)||Ka(Kt))return Kt=Ah(Kt,Yt.mode,Jt,null),Kt.return=Yt,Kt;th(Yt,Kt)}return null}function Ot(Yt,Kt,Jt,pr){var Sr=Kt!==null?Kt.key:null;if(typeof Jt=="string"&&Jt!==""||typeof Jt=="number")return Sr!==null?null:st(Yt,Kt,""+Jt,pr);if(typeof Jt=="object"&&Jt!==null){switch(Jt.$$typeof){case va:return Jt.key===Sr?Tt(Yt,Kt,Jt,pr):null;case wa:return Jt.key===Sr?kt(Yt,Kt,Jt,pr):null;case Ha:return Sr=Jt._init,Ot(Yt,Kt,Sr(Jt._payload),pr)}if(eb(Jt)||Ka(Jt))return Sr!==null?null:Mt(Yt,Kt,Jt,pr,null);th(Yt,Jt)}return null}function Ut(Yt,Kt,Jt,pr,Sr){if(typeof pr=="string"&&pr!==""||typeof pr=="number")return Yt=Yt.get(Jt)||null,st(Kt,Yt,""+pr,Sr);if(typeof pr=="object"&&pr!==null){switch(pr.$$typeof){case va:return Yt=Yt.get(pr.key===null?Jt:pr.key)||null,Tt(Kt,Yt,pr,Sr);case wa:return Yt=Yt.get(pr.key===null?Jt:pr.key)||null,kt(Kt,Yt,pr,Sr);case Ha:var Er=pr._init;return Ut(Yt,Kt,Jt,Er(pr._payload),Sr)}if(eb(pr)||Ka(pr))return Yt=Yt.get(Jt)||null,Mt(Kt,Yt,pr,Sr,null);th(Kt,pr)}return null}function qt(Yt,Kt,Jt,pr){for(var Sr=null,Er=null,Rr=Kt,Lr=Kt=0,Mr=null;Rr!==null&&Lr<Jt.length;Lr++){Rr.index>Lr?(Mr=Rr,Rr=null):Mr=Rr.sibling;var Zr=Ot(Yt,Rr,Jt[Lr],pr);if(Zr===null){Rr===null&&(Rr=Mr);break}$&&Rr&&Zr.alternate===null&&_e(Yt,Rr),Kt=pt(Zr,Kt,Lr),Er===null?Sr=Zr:Er.sibling=Zr,Er=Zr,Rr=Mr}if(Lr===Jt.length)return rt(Yt,Rr),I$1&&tg(Yt,Lr),Sr;if(Rr===null){for(;Lr<Jt.length;Lr++)Rr=Dt(Yt,Jt[Lr],pr),Rr!==null&&(Kt=pt(Rr,Kt,Lr),Er===null?Sr=Rr:Er.sibling=Rr,Er=Rr);return I$1&&tg(Yt,Lr),Sr}for(Rr=at(Yt,Rr);Lr<Jt.length;Lr++)Mr=Ut(Rr,Yt,Lr,Jt[Lr],pr),Mr!==null&&($&&Mr.alternate!==null&&Rr.delete(Mr.key===null?Lr:Mr.key),Kt=pt(Mr,Kt,Lr),Er===null?Sr=Mr:Er.sibling=Mr,Er=Mr);return $&&Rr.forEach(function(dn){return _e(Yt,dn)}),I$1&&tg(Yt,Lr),Sr}function tr(Yt,Kt,Jt,pr){var Sr=Ka(Jt);if(typeof Sr!="function")throw Error(p$6(150));if(Jt=Sr.call(Jt),Jt==null)throw Error(p$6(151));for(var Er=Sr=null,Rr=Kt,Lr=Kt=0,Mr=null,Zr=Jt.next();Rr!==null&&!Zr.done;Lr++,Zr=Jt.next()){Rr.index>Lr?(Mr=Rr,Rr=null):Mr=Rr.sibling;var dn=Ot(Yt,Rr,Zr.value,pr);if(dn===null){Rr===null&&(Rr=Mr);break}$&&Rr&&dn.alternate===null&&_e(Yt,Rr),Kt=pt(dn,Kt,Lr),Er===null?Sr=dn:Er.sibling=dn,Er=dn,Rr=Mr}if(Zr.done)return rt(Yt,Rr),I$1&&tg(Yt,Lr),Sr;if(Rr===null){for(;!Zr.done;Lr++,Zr=Jt.next())Zr=Dt(Yt,Zr.value,pr),Zr!==null&&(Kt=pt(Zr,Kt,Lr),Er===null?Sr=Zr:Er.sibling=Zr,Er=Zr);return I$1&&tg(Yt,Lr),Sr}for(Rr=at(Yt,Rr);!Zr.done;Lr++,Zr=Jt.next())Zr=Ut(Rr,Yt,Lr,Zr.value,pr),Zr!==null&&($&&Zr.alternate!==null&&Rr.delete(Zr.key===null?Lr:Zr.key),Kt=pt(Zr,Kt,Lr),Er===null?Sr=Zr:Er.sibling=Zr,Er=Zr);return $&&Rr.forEach(function(Jr){return _e(Yt,Jr)}),I$1&&tg(Yt,Lr),Sr}function ar(Yt,Kt,Jt,pr){if(typeof Jt=="object"&&Jt!==null&&Jt.type===ya&&Jt.key===null&&(Jt=Jt.props.children),typeof Jt=="object"&&Jt!==null){switch(Jt.$$typeof){case va:e:{for(var Sr=Jt.key,Er=Kt;Er!==null;){if(Er.key===Sr){if(Sr=Jt.type,Sr===ya){if(Er.tag===7){rt(Yt,Er.sibling),Kt=ht(Er,Jt.props.children),Kt.return=Yt,Yt=Kt;break e}}else if(Er.elementType===Sr||typeof Sr=="object"&&Sr!==null&&Sr.$$typeof===Ha&&uh(Sr)===Er.type){rt(Yt,Er.sibling),Kt=ht(Er,Jt.props),Kt.ref=sh(Yt,Er,Jt),Kt.return=Yt,Yt=Kt;break e}rt(Yt,Er);break}else _e(Yt,Er);Er=Er.sibling}Jt.type===ya?(Kt=Ah(Jt.props.children,Yt.mode,pr,Jt.key),Kt.return=Yt,Yt=Kt):(pr=yh(Jt.type,Jt.key,Jt.props,null,Yt.mode,pr),pr.ref=sh(Yt,Kt,Jt),pr.return=Yt,Yt=pr)}return wt(Yt);case wa:e:{for(Er=Jt.key;Kt!==null;){if(Kt.key===Er)if(Kt.tag===4&&Kt.stateNode.containerInfo===Jt.containerInfo&&Kt.stateNode.implementation===Jt.implementation){rt(Yt,Kt.sibling),Kt=ht(Kt,Jt.children||[]),Kt.return=Yt,Yt=Kt;break e}else{rt(Yt,Kt);break}else _e(Yt,Kt);Kt=Kt.sibling}Kt=zh(Jt,Yt.mode,pr),Kt.return=Yt,Yt=Kt}return wt(Yt);case Ha:return Er=Jt._init,ar(Yt,Kt,Er(Jt._payload),pr)}if(eb(Jt))return qt(Yt,Kt,Jt,pr);if(Ka(Jt))return tr(Yt,Kt,Jt,pr);th(Yt,Jt)}return typeof Jt=="string"&&Jt!==""||typeof Jt=="number"?(Jt=""+Jt,Kt!==null&&Kt.tag===6?(rt(Yt,Kt.sibling),Kt=ht(Kt,Jt),Kt.return=Yt,Yt=Kt):(rt(Yt,Kt),Kt=xh(Jt,Yt.mode,pr),Kt.return=Yt,Yt=Kt),wt(Yt)):rt(Yt,Kt)}return ar}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh($){if($===Dh)throw Error(p$6(174));return $}function Ih($,_e){switch(G$1(Gh,_e),G$1(Fh,$),G$1(Eh,Dh),$=_e.nodeType,$){case 9:case 11:_e=(_e=_e.documentElement)?_e.namespaceURI:lb(null,"");break;default:$=$===8?_e.parentNode:_e,_e=$.namespaceURI||null,$=$.tagName,_e=lb(_e,$)}E$1(Eh),G$1(Eh,_e)}function Jh(){E$1(Eh),E$1(Fh),E$1(Gh)}function Kh($){Hh(Gh.current);var _e=Hh(Eh.current),rt=lb(_e,$.type);_e!==rt&&(G$1(Fh,$),G$1(Eh,rt))}function Lh($){Fh.current===$&&(E$1(Eh),E$1(Fh))}var M$1=Uf(0);function Mh($){for(var _e=$;_e!==null;){if(_e.tag===13){var rt=_e.memoizedState;if(rt!==null&&(rt=rt.dehydrated,rt===null||rt.data==="$?"||rt.data==="$!"))return _e}else if(_e.tag===19&&_e.memoizedProps.revealOrder!==void 0){if(_e.flags&128)return _e}else if(_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===$)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===$)return null;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}return null}var Nh=[];function Oh(){for(var $=0;$<Nh.length;$++)Nh[$]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N$1=null,O$1=null,P$1=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$1(){throw Error(p$6(321))}function Wh($,_e){if(_e===null)return!1;for(var rt=0;rt<_e.length&&rt<$.length;rt++)if(!He($[rt],_e[rt]))return!1;return!0}function Xh($,_e,rt,at,ht,pt){if(Rh=pt,N$1=_e,_e.memoizedState=null,_e.updateQueue=null,_e.lanes=0,Ph.current=$===null||$.memoizedState===null?Yh:Zh,$=rt(at,ht),Th){pt=0;do{if(Th=!1,Uh=0,25<=pt)throw Error(p$6(301));pt+=1,P$1=O$1=null,_e.updateQueue=null,Ph.current=$h,$=rt(at,ht)}while(Th)}if(Ph.current=ai,_e=O$1!==null&&O$1.next!==null,Rh=0,P$1=O$1=N$1=null,Sh=!1,_e)throw Error(p$6(300));return $}function bi(){var $=Uh!==0;return Uh=0,$}function ci(){var $={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$1===null?N$1.memoizedState=P$1=$:P$1=P$1.next=$,P$1}function di(){if(O$1===null){var $=N$1.alternate;$=$!==null?$.memoizedState:null}else $=O$1.next;var _e=P$1===null?N$1.memoizedState:P$1.next;if(_e!==null)P$1=_e,O$1=$;else{if($===null)throw Error(p$6(310));O$1=$,$={memoizedState:O$1.memoizedState,baseState:O$1.baseState,baseQueue:O$1.baseQueue,queue:O$1.queue,next:null},P$1===null?N$1.memoizedState=P$1=$:P$1=P$1.next=$}return P$1}function ei($,_e){return typeof _e=="function"?_e($):_e}function fi($){var _e=di(),rt=_e.queue;if(rt===null)throw Error(p$6(311));rt.lastRenderedReducer=$;var at=O$1,ht=at.baseQueue,pt=rt.pending;if(pt!==null){if(ht!==null){var wt=ht.next;ht.next=pt.next,pt.next=wt}at.baseQueue=ht=pt,rt.pending=null}if(ht!==null){pt=ht.next,at=at.baseState;var st=wt=null,Tt=null,kt=pt;do{var Mt=kt.lane;if((Rh&Mt)===Mt)Tt!==null&&(Tt=Tt.next={lane:0,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null}),at=kt.hasEagerState?kt.eagerState:$(at,kt.action);else{var Dt={lane:Mt,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null};Tt===null?(st=Tt=Dt,wt=at):Tt=Tt.next=Dt,N$1.lanes|=Mt,hh|=Mt}kt=kt.next}while(kt!==null&&kt!==pt);Tt===null?wt=at:Tt.next=st,He(at,_e.memoizedState)||(Ug=!0),_e.memoizedState=at,_e.baseState=wt,_e.baseQueue=Tt,rt.lastRenderedState=at}if($=rt.interleaved,$!==null){ht=$;do pt=ht.lane,N$1.lanes|=pt,hh|=pt,ht=ht.next;while(ht!==$)}else ht===null&&(rt.lanes=0);return[_e.memoizedState,rt.dispatch]}function gi($){var _e=di(),rt=_e.queue;if(rt===null)throw Error(p$6(311));rt.lastRenderedReducer=$;var at=rt.dispatch,ht=rt.pending,pt=_e.memoizedState;if(ht!==null){rt.pending=null;var wt=ht=ht.next;do pt=$(pt,wt.action),wt=wt.next;while(wt!==ht);He(pt,_e.memoizedState)||(Ug=!0),_e.memoizedState=pt,_e.baseQueue===null&&(_e.baseState=pt),rt.lastRenderedState=pt}return[pt,at]}function hi(){}function ii($,_e){var rt=N$1,at=di(),ht=_e(),pt=!He(at.memoizedState,ht);if(pt&&(at.memoizedState=ht,Ug=!0),at=at.queue,ji(ki.bind(null,rt,at,$),[$]),at.getSnapshot!==_e||pt||P$1!==null&&P$1.memoizedState.tag&1){if(rt.flags|=2048,li(9,mi.bind(null,rt,at,ht,_e),void 0,null),R$1===null)throw Error(p$6(349));Rh&30||ni(rt,_e,ht)}return ht}function ni($,_e,rt){$.flags|=16384,$={getSnapshot:_e,value:rt},_e=N$1.updateQueue,_e===null?(_e={lastEffect:null,stores:null},N$1.updateQueue=_e,_e.stores=[$]):(rt=_e.stores,rt===null?_e.stores=[$]:rt.push($))}function mi($,_e,rt,at){_e.value=rt,_e.getSnapshot=at,oi(_e)&&pi($)}function ki($,_e,rt){return rt(function(){oi(_e)&&pi($)})}function oi($){var _e=$.getSnapshot;$=$.value;try{var rt=_e();return!He($,rt)}catch{return!0}}function pi($){var _e=Zg($,1);_e!==null&&mh(_e,$,1,-1)}function qi($){var _e=ci();return typeof $=="function"&&($=$()),_e.memoizedState=_e.baseState=$,$={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:$},_e.queue=$,$=$.dispatch=ri.bind(null,N$1,$),[_e.memoizedState,$]}function li($,_e,rt,at){return $={tag:$,create:_e,destroy:rt,deps:at,next:null},_e=N$1.updateQueue,_e===null?(_e={lastEffect:null,stores:null},N$1.updateQueue=_e,_e.lastEffect=$.next=$):(rt=_e.lastEffect,rt===null?_e.lastEffect=$.next=$:(at=rt.next,rt.next=$,$.next=at,_e.lastEffect=$)),$}function si(){return di().memoizedState}function ti($,_e,rt,at){var ht=ci();N$1.flags|=$,ht.memoizedState=li(1|_e,rt,void 0,at===void 0?null:at)}function ui($,_e,rt,at){var ht=di();at=at===void 0?null:at;var pt=void 0;if(O$1!==null){var wt=O$1.memoizedState;if(pt=wt.destroy,at!==null&&Wh(at,wt.deps)){ht.memoizedState=li(_e,rt,pt,at);return}}N$1.flags|=$,ht.memoizedState=li(1|_e,rt,pt,at)}function vi($,_e){return ti(8390656,8,$,_e)}function ji($,_e){return ui(2048,8,$,_e)}function wi($,_e){return ui(4,2,$,_e)}function xi($,_e){return ui(4,4,$,_e)}function yi($,_e){if(typeof _e=="function")return $=$(),_e($),function(){_e(null)};if(_e!=null)return $=$(),_e.current=$,function(){_e.current=null}}function zi($,_e,rt){return rt=rt!=null?rt.concat([$]):null,ui(4,4,yi.bind(null,_e,$),rt)}function Ai(){}function Bi($,_e){var rt=di();_e=_e===void 0?null:_e;var at=rt.memoizedState;return at!==null&&_e!==null&&Wh(_e,at[1])?at[0]:(rt.memoizedState=[$,_e],$)}function Ci($,_e){var rt=di();_e=_e===void 0?null:_e;var at=rt.memoizedState;return at!==null&&_e!==null&&Wh(_e,at[1])?at[0]:($=$(),rt.memoizedState=[$,_e],$)}function Di($,_e,rt){return Rh&21?(He(rt,_e)||(rt=yc(),N$1.lanes|=rt,hh|=rt,$.baseState=!0),_e):($.baseState&&($.baseState=!1,Ug=!0),$.memoizedState=rt)}function Ei($,_e){var rt=C;C=rt!==0&&4>rt?rt:4,$(!0);var at=Qh.transition;Qh.transition={};try{$(!1),_e()}finally{C=rt,Qh.transition=at}}function Fi(){return di().memoizedState}function Gi($,_e,rt){var at=lh($);if(rt={lane:at,action:rt,hasEagerState:!1,eagerState:null,next:null},Hi($))Ii(_e,rt);else if(rt=Yg($,_e,rt,at),rt!==null){var ht=L$1();mh(rt,$,at,ht),Ji(rt,_e,at)}}function ri($,_e,rt){var at=lh($),ht={lane:at,action:rt,hasEagerState:!1,eagerState:null,next:null};if(Hi($))Ii(_e,ht);else{var pt=$.alternate;if($.lanes===0&&(pt===null||pt.lanes===0)&&(pt=_e.lastRenderedReducer,pt!==null))try{var wt=_e.lastRenderedState,st=pt(wt,rt);if(ht.hasEagerState=!0,ht.eagerState=st,He(st,wt)){var Tt=_e.interleaved;Tt===null?(ht.next=ht,Xg(_e)):(ht.next=Tt.next,Tt.next=ht),_e.interleaved=ht;return}}catch{}finally{}rt=Yg($,_e,ht,at),rt!==null&&(ht=L$1(),mh(rt,$,at,ht),Ji(rt,_e,at))}}function Hi($){var _e=$.alternate;return $===N$1||_e!==null&&_e===N$1}function Ii($,_e){Th=Sh=!0;var rt=$.pending;rt===null?_e.next=_e:(_e.next=rt.next,rt.next=_e),$.pending=_e}function Ji($,_e,rt){if(rt&4194240){var at=_e.lanes;at&=$.pendingLanes,rt|=at,_e.lanes=rt,Cc($,rt)}}var ai={readContext:Vg,useCallback:Q$1,useContext:Q$1,useEffect:Q$1,useImperativeHandle:Q$1,useInsertionEffect:Q$1,useLayoutEffect:Q$1,useMemo:Q$1,useReducer:Q$1,useRef:Q$1,useState:Q$1,useDebugValue:Q$1,useDeferredValue:Q$1,useTransition:Q$1,useMutableSource:Q$1,useSyncExternalStore:Q$1,useId:Q$1,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function($,_e){return ci().memoizedState=[$,_e===void 0?null:_e],$},useContext:Vg,useEffect:vi,useImperativeHandle:function($,_e,rt){return rt=rt!=null?rt.concat([$]):null,ti(4194308,4,yi.bind(null,_e,$),rt)},useLayoutEffect:function($,_e){return ti(4194308,4,$,_e)},useInsertionEffect:function($,_e){return ti(4,2,$,_e)},useMemo:function($,_e){var rt=ci();return _e=_e===void 0?null:_e,$=$(),rt.memoizedState=[$,_e],$},useReducer:function($,_e,rt){var at=ci();return _e=rt!==void 0?rt(_e):_e,at.memoizedState=at.baseState=_e,$={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$,lastRenderedState:_e},at.queue=$,$=$.dispatch=Gi.bind(null,N$1,$),[at.memoizedState,$]},useRef:function($){var _e=ci();return $={current:$},_e.memoizedState=$},useState:qi,useDebugValue:Ai,useDeferredValue:function($){return ci().memoizedState=$},useTransition:function(){var $=qi(!1),_e=$[0];return $=Ei.bind(null,$[1]),ci().memoizedState=$,[_e,$]},useMutableSource:function(){},useSyncExternalStore:function($,_e,rt){var at=N$1,ht=ci();if(I$1){if(rt===void 0)throw Error(p$6(407));rt=rt()}else{if(rt=_e(),R$1===null)throw Error(p$6(349));Rh&30||ni(at,_e,rt)}ht.memoizedState=rt;var pt={value:rt,getSnapshot:_e};return ht.queue=pt,vi(ki.bind(null,at,pt,$),[$]),at.flags|=2048,li(9,mi.bind(null,at,pt,rt,_e),void 0,null),rt},useId:function(){var $=ci(),_e=R$1.identifierPrefix;if(I$1){var rt=sg,at=rg;rt=(at&~(1<<32-oc(at)-1)).toString(32)+rt,_e=":"+_e+"R"+rt,rt=Uh++,0<rt&&(_e+="H"+rt.toString(32)),_e+=":"}else rt=Vh++,_e=":"+_e+"r"+rt.toString(32)+":";return $.memoizedState=_e},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function($){var _e=di();return Di(_e,O$1.memoizedState,$)},useTransition:function(){var $=fi(ei)[0],_e=di().memoizedState;return[$,_e]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function($){var _e=di();return O$1===null?_e.memoizedState=$:Di(_e,O$1.memoizedState,$)},useTransition:function(){var $=gi(ei)[0],_e=di().memoizedState;return[$,_e]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki($,_e){try{var rt="",at=_e;do rt+=Pa(at),at=at.return;while(at);var ht=rt}catch(pt){ht=`
Error generating stack: `+pt.message+`
`+pt.stack}return{value:$,source:_e,stack:ht,digest:null}}function Li($,_e,rt){return{value:$,source:null,stack:rt??null,digest:_e??null}}function Mi($,_e){try{console.error(_e.value)}catch(rt){setTimeout(function(){throw rt})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi($,_e,rt){rt=ch(-1,rt),rt.tag=3,rt.payload={element:null};var at=_e.value;return rt.callback=function(){Pi||(Pi=!0,Qi=at),Mi($,_e)},rt}function Ri($,_e,rt){rt=ch(-1,rt),rt.tag=3;var at=$.type.getDerivedStateFromError;if(typeof at=="function"){var ht=_e.value;rt.payload=function(){return at(ht)},rt.callback=function(){Mi($,_e)}}var pt=$.stateNode;return pt!==null&&typeof pt.componentDidCatch=="function"&&(rt.callback=function(){Mi($,_e),typeof at!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var wt=_e.stack;this.componentDidCatch(_e.value,{componentStack:wt!==null?wt:""})}),rt}function Ti($,_e,rt){var at=$.pingCache;if(at===null){at=$.pingCache=new Ni;var ht=new Set;at.set(_e,ht)}else ht=at.get(_e),ht===void 0&&(ht=new Set,at.set(_e,ht));ht.has(rt)||(ht.add(rt),$=Ui.bind(null,$,_e,rt),_e.then($,$))}function Vi($){do{var _e;if((_e=$.tag===13)&&(_e=$.memoizedState,_e=_e!==null?_e.dehydrated!==null:!0),_e)return $;$=$.return}while($!==null);return null}function Wi($,_e,rt,at,ht){return $.mode&1?($.flags|=65536,$.lanes=ht,$):($===_e?$.flags|=65536:($.flags|=128,rt.flags|=131072,rt.flags&=-52805,rt.tag===1&&(rt.alternate===null?rt.tag=17:(_e=ch(-1,1),_e.tag=2,dh(rt,_e,1))),rt.lanes|=1),$)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi($,_e,rt,at){_e.child=$===null?Ch(_e,null,rt,at):Bh(_e,$.child,rt,at)}function Zi($,_e,rt,at,ht){rt=rt.render;var pt=_e.ref;return Tg(_e,ht),at=Xh($,_e,rt,at,pt,ht),rt=bi(),$!==null&&!Ug?(_e.updateQueue=$.updateQueue,_e.flags&=-2053,$.lanes&=~ht,$i($,_e,ht)):(I$1&&rt&&vg(_e),_e.flags|=1,Yi($,_e,at,ht),_e.child)}function aj($,_e,rt,at,ht){if($===null){var pt=rt.type;return typeof pt=="function"&&!bj(pt)&&pt.defaultProps===void 0&&rt.compare===null&&rt.defaultProps===void 0?(_e.tag=15,_e.type=pt,cj($,_e,pt,at,ht)):($=yh(rt.type,null,at,_e,_e.mode,ht),$.ref=_e.ref,$.return=_e,_e.child=$)}if(pt=$.child,!($.lanes&ht)){var wt=pt.memoizedProps;if(rt=rt.compare,rt=rt!==null?rt:Ie$1,rt(wt,at)&&$.ref===_e.ref)return $i($,_e,ht)}return _e.flags|=1,$=wh(pt,at),$.ref=_e.ref,$.return=_e,_e.child=$}function cj($,_e,rt,at,ht){if($!==null){var pt=$.memoizedProps;if(Ie$1(pt,at)&&$.ref===_e.ref)if(Ug=!1,_e.pendingProps=at=pt,($.lanes&ht)!==0)$.flags&131072&&(Ug=!0);else return _e.lanes=$.lanes,$i($,_e,ht)}return dj($,_e,rt,at,ht)}function ej($,_e,rt){var at=_e.pendingProps,ht=at.children,pt=$!==null?$.memoizedState:null;if(at.mode==="hidden")if(!(_e.mode&1))_e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj,gj),gj|=rt;else{if(!(rt&1073741824))return $=pt!==null?pt.baseLanes|rt:rt,_e.lanes=_e.childLanes=1073741824,_e.memoizedState={baseLanes:$,cachePool:null,transitions:null},_e.updateQueue=null,G$1(fj,gj),gj|=$,null;_e.memoizedState={baseLanes:0,cachePool:null,transitions:null},at=pt!==null?pt.baseLanes:rt,G$1(fj,gj),gj|=at}else pt!==null?(at=pt.baseLanes|rt,_e.memoizedState=null):at=rt,G$1(fj,gj),gj|=at;return Yi($,_e,ht,rt),_e.child}function hj($,_e){var rt=_e.ref;($===null&&rt!==null||$!==null&&$.ref!==rt)&&(_e.flags|=512,_e.flags|=2097152)}function dj($,_e,rt,at,ht){var pt=Zf(rt)?Xf:H$1.current;return pt=Yf(_e,pt),Tg(_e,ht),rt=Xh($,_e,rt,at,pt,ht),at=bi(),$!==null&&!Ug?(_e.updateQueue=$.updateQueue,_e.flags&=-2053,$.lanes&=~ht,$i($,_e,ht)):(I$1&&at&&vg(_e),_e.flags|=1,Yi($,_e,rt,ht),_e.child)}function ij($,_e,rt,at,ht){if(Zf(rt)){var pt=!0;cg(_e)}else pt=!1;if(Tg(_e,ht),_e.stateNode===null)jj($,_e),ph(_e,rt,at),rh(_e,rt,at,ht),at=!0;else if($===null){var wt=_e.stateNode,st=_e.memoizedProps;wt.props=st;var Tt=wt.context,kt=rt.contextType;typeof kt=="object"&&kt!==null?kt=Vg(kt):(kt=Zf(rt)?Xf:H$1.current,kt=Yf(_e,kt));var Mt=rt.getDerivedStateFromProps,Dt=typeof Mt=="function"||typeof wt.getSnapshotBeforeUpdate=="function";Dt||typeof wt.UNSAFE_componentWillReceiveProps!="function"&&typeof wt.componentWillReceiveProps!="function"||(st!==at||Tt!==kt)&&qh(_e,wt,at,kt),$g=!1;var Ot=_e.memoizedState;wt.state=Ot,gh(_e,at,wt,ht),Tt=_e.memoizedState,st!==at||Ot!==Tt||Wf.current||$g?(typeof Mt=="function"&&(kh(_e,rt,Mt,at),Tt=_e.memoizedState),(st=$g||oh(_e,rt,st,at,Ot,Tt,kt))?(Dt||typeof wt.UNSAFE_componentWillMount!="function"&&typeof wt.componentWillMount!="function"||(typeof wt.componentWillMount=="function"&&wt.componentWillMount(),typeof wt.UNSAFE_componentWillMount=="function"&&wt.UNSAFE_componentWillMount()),typeof wt.componentDidMount=="function"&&(_e.flags|=4194308)):(typeof wt.componentDidMount=="function"&&(_e.flags|=4194308),_e.memoizedProps=at,_e.memoizedState=Tt),wt.props=at,wt.state=Tt,wt.context=kt,at=st):(typeof wt.componentDidMount=="function"&&(_e.flags|=4194308),at=!1)}else{wt=_e.stateNode,bh($,_e),st=_e.memoizedProps,kt=_e.type===_e.elementType?st:Lg(_e.type,st),wt.props=kt,Dt=_e.pendingProps,Ot=wt.context,Tt=rt.contextType,typeof Tt=="object"&&Tt!==null?Tt=Vg(Tt):(Tt=Zf(rt)?Xf:H$1.current,Tt=Yf(_e,Tt));var Ut=rt.getDerivedStateFromProps;(Mt=typeof Ut=="function"||typeof wt.getSnapshotBeforeUpdate=="function")||typeof wt.UNSAFE_componentWillReceiveProps!="function"&&typeof wt.componentWillReceiveProps!="function"||(st!==Dt||Ot!==Tt)&&qh(_e,wt,at,Tt),$g=!1,Ot=_e.memoizedState,wt.state=Ot,gh(_e,at,wt,ht);var qt=_e.memoizedState;st!==Dt||Ot!==qt||Wf.current||$g?(typeof Ut=="function"&&(kh(_e,rt,Ut,at),qt=_e.memoizedState),(kt=$g||oh(_e,rt,kt,at,Ot,qt,Tt)||!1)?(Mt||typeof wt.UNSAFE_componentWillUpdate!="function"&&typeof wt.componentWillUpdate!="function"||(typeof wt.componentWillUpdate=="function"&&wt.componentWillUpdate(at,qt,Tt),typeof wt.UNSAFE_componentWillUpdate=="function"&&wt.UNSAFE_componentWillUpdate(at,qt,Tt)),typeof wt.componentDidUpdate=="function"&&(_e.flags|=4),typeof wt.getSnapshotBeforeUpdate=="function"&&(_e.flags|=1024)):(typeof wt.componentDidUpdate!="function"||st===$.memoizedProps&&Ot===$.memoizedState||(_e.flags|=4),typeof wt.getSnapshotBeforeUpdate!="function"||st===$.memoizedProps&&Ot===$.memoizedState||(_e.flags|=1024),_e.memoizedProps=at,_e.memoizedState=qt),wt.props=at,wt.state=qt,wt.context=Tt,at=kt):(typeof wt.componentDidUpdate!="function"||st===$.memoizedProps&&Ot===$.memoizedState||(_e.flags|=4),typeof wt.getSnapshotBeforeUpdate!="function"||st===$.memoizedProps&&Ot===$.memoizedState||(_e.flags|=1024),at=!1)}return kj($,_e,rt,at,pt,ht)}function kj($,_e,rt,at,ht,pt){hj($,_e);var wt=(_e.flags&128)!==0;if(!at&&!wt)return ht&&dg(_e,rt,!1),$i($,_e,pt);at=_e.stateNode,Xi.current=_e;var st=wt&&typeof rt.getDerivedStateFromError!="function"?null:at.render();return _e.flags|=1,$!==null&&wt?(_e.child=Bh(_e,$.child,null,pt),_e.child=Bh(_e,null,st,pt)):Yi($,_e,st,pt),_e.memoizedState=at.state,ht&&dg(_e,rt,!0),_e.child}function lj($){var _e=$.stateNode;_e.pendingContext?ag($,_e.pendingContext,_e.pendingContext!==_e.context):_e.context&&ag($,_e.context,!1),Ih($,_e.containerInfo)}function mj($,_e,rt,at,ht){return Ig(),Jg(ht),_e.flags|=256,Yi($,_e,rt,at),_e.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj($){return{baseLanes:$,cachePool:null,transitions:null}}function pj($,_e,rt){var at=_e.pendingProps,ht=M$1.current,pt=!1,wt=(_e.flags&128)!==0,st;if((st=wt)||(st=$!==null&&$.memoizedState===null?!1:(ht&2)!==0),st?(pt=!0,_e.flags&=-129):($===null||$.memoizedState!==null)&&(ht|=1),G$1(M$1,ht&1),$===null)return Eg(_e),$=_e.memoizedState,$!==null&&($=$.dehydrated,$!==null)?(_e.mode&1?$.data==="$!"?_e.lanes=8:_e.lanes=1073741824:_e.lanes=1,null):(wt=at.children,$=at.fallback,pt?(at=_e.mode,pt=_e.child,wt={mode:"hidden",children:wt},!(at&1)&&pt!==null?(pt.childLanes=0,pt.pendingProps=wt):pt=qj(wt,at,0,null),$=Ah($,at,rt,null),pt.return=_e,$.return=_e,pt.sibling=$,_e.child=pt,_e.child.memoizedState=oj(rt),_e.memoizedState=nj,$):rj(_e,wt));if(ht=$.memoizedState,ht!==null&&(st=ht.dehydrated,st!==null))return sj($,_e,wt,at,st,ht,rt);if(pt){pt=at.fallback,wt=_e.mode,ht=$.child,st=ht.sibling;var Tt={mode:"hidden",children:at.children};return!(wt&1)&&_e.child!==ht?(at=_e.child,at.childLanes=0,at.pendingProps=Tt,_e.deletions=null):(at=wh(ht,Tt),at.subtreeFlags=ht.subtreeFlags&14680064),st!==null?pt=wh(st,pt):(pt=Ah(pt,wt,rt,null),pt.flags|=2),pt.return=_e,at.return=_e,at.sibling=pt,_e.child=at,at=pt,pt=_e.child,wt=$.child.memoizedState,wt=wt===null?oj(rt):{baseLanes:wt.baseLanes|rt,cachePool:null,transitions:wt.transitions},pt.memoizedState=wt,pt.childLanes=$.childLanes&~rt,_e.memoizedState=nj,at}return pt=$.child,$=pt.sibling,at=wh(pt,{mode:"visible",children:at.children}),!(_e.mode&1)&&(at.lanes=rt),at.return=_e,at.sibling=null,$!==null&&(rt=_e.deletions,rt===null?(_e.deletions=[$],_e.flags|=16):rt.push($)),_e.child=at,_e.memoizedState=null,at}function rj($,_e){return _e=qj({mode:"visible",children:_e},$.mode,0,null),_e.return=$,$.child=_e}function tj($,_e,rt,at){return at!==null&&Jg(at),Bh(_e,$.child,null,rt),$=rj(_e,_e.pendingProps.children),$.flags|=2,_e.memoizedState=null,$}function sj($,_e,rt,at,ht,pt,wt){if(rt)return _e.flags&256?(_e.flags&=-257,at=Li(Error(p$6(422))),tj($,_e,wt,at)):_e.memoizedState!==null?(_e.child=$.child,_e.flags|=128,null):(pt=at.fallback,ht=_e.mode,at=qj({mode:"visible",children:at.children},ht,0,null),pt=Ah(pt,ht,wt,null),pt.flags|=2,at.return=_e,pt.return=_e,at.sibling=pt,_e.child=at,_e.mode&1&&Bh(_e,$.child,null,wt),_e.child.memoizedState=oj(wt),_e.memoizedState=nj,pt);if(!(_e.mode&1))return tj($,_e,wt,null);if(ht.data==="$!"){if(at=ht.nextSibling&&ht.nextSibling.dataset,at)var st=at.dgst;return at=st,pt=Error(p$6(419)),at=Li(pt,at,void 0),tj($,_e,wt,at)}if(st=(wt&$.childLanes)!==0,Ug||st){if(at=R$1,at!==null){switch(wt&-wt){case 4:ht=2;break;case 16:ht=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ht=32;break;case 536870912:ht=268435456;break;default:ht=0}ht=ht&(at.suspendedLanes|wt)?0:ht,ht!==0&&ht!==pt.retryLane&&(pt.retryLane=ht,Zg($,ht),mh(at,$,ht,-1))}return uj(),at=Li(Error(p$6(421))),tj($,_e,wt,at)}return ht.data==="$?"?(_e.flags|=128,_e.child=$.child,_e=vj.bind(null,$),ht._reactRetry=_e,null):($=pt.treeContext,yg=Lf(ht.nextSibling),xg=_e,I$1=!0,zg=null,$!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=$.id,sg=$.overflow,qg=_e),_e=rj(_e,at.children),_e.flags|=4096,_e)}function wj($,_e,rt){$.lanes|=_e;var at=$.alternate;at!==null&&(at.lanes|=_e),Sg($.return,_e,rt)}function xj($,_e,rt,at,ht){var pt=$.memoizedState;pt===null?$.memoizedState={isBackwards:_e,rendering:null,renderingStartTime:0,last:at,tail:rt,tailMode:ht}:(pt.isBackwards=_e,pt.rendering=null,pt.renderingStartTime=0,pt.last=at,pt.tail=rt,pt.tailMode=ht)}function yj($,_e,rt){var at=_e.pendingProps,ht=at.revealOrder,pt=at.tail;if(Yi($,_e,at.children,rt),at=M$1.current,at&2)at=at&1|2,_e.flags|=128;else{if($!==null&&$.flags&128)e:for($=_e.child;$!==null;){if($.tag===13)$.memoizedState!==null&&wj($,rt,_e);else if($.tag===19)wj($,rt,_e);else if($.child!==null){$.child.return=$,$=$.child;continue}if($===_e)break e;for(;$.sibling===null;){if($.return===null||$.return===_e)break e;$=$.return}$.sibling.return=$.return,$=$.sibling}at&=1}if(G$1(M$1,at),!(_e.mode&1))_e.memoizedState=null;else switch(ht){case"forwards":for(rt=_e.child,ht=null;rt!==null;)$=rt.alternate,$!==null&&Mh($)===null&&(ht=rt),rt=rt.sibling;rt=ht,rt===null?(ht=_e.child,_e.child=null):(ht=rt.sibling,rt.sibling=null),xj(_e,!1,ht,rt,pt);break;case"backwards":for(rt=null,ht=_e.child,_e.child=null;ht!==null;){if($=ht.alternate,$!==null&&Mh($)===null){_e.child=ht;break}$=ht.sibling,ht.sibling=rt,rt=ht,ht=$}xj(_e,!0,rt,null,pt);break;case"together":xj(_e,!1,null,null,void 0);break;default:_e.memoizedState=null}return _e.child}function jj($,_e){!(_e.mode&1)&&$!==null&&($.alternate=null,_e.alternate=null,_e.flags|=2)}function $i($,_e,rt){if($!==null&&(_e.dependencies=$.dependencies),hh|=_e.lanes,!(rt&_e.childLanes))return null;if($!==null&&_e.child!==$.child)throw Error(p$6(153));if(_e.child!==null){for($=_e.child,rt=wh($,$.pendingProps),_e.child=rt,rt.return=_e;$.sibling!==null;)$=$.sibling,rt=rt.sibling=wh($,$.pendingProps),rt.return=_e;rt.sibling=null}return _e.child}function zj($,_e,rt){switch(_e.tag){case 3:lj(_e),Ig();break;case 5:Kh(_e);break;case 1:Zf(_e.type)&&cg(_e);break;case 4:Ih(_e,_e.stateNode.containerInfo);break;case 10:var at=_e.type._context,ht=_e.memoizedProps.value;G$1(Mg,at._currentValue),at._currentValue=ht;break;case 13:if(at=_e.memoizedState,at!==null)return at.dehydrated!==null?(G$1(M$1,M$1.current&1),_e.flags|=128,null):rt&_e.child.childLanes?pj($,_e,rt):(G$1(M$1,M$1.current&1),$=$i($,_e,rt),$!==null?$.sibling:null);G$1(M$1,M$1.current&1);break;case 19:if(at=(rt&_e.childLanes)!==0,$.flags&128){if(at)return yj($,_e,rt);_e.flags|=128}if(ht=_e.memoizedState,ht!==null&&(ht.rendering=null,ht.tail=null,ht.lastEffect=null),G$1(M$1,M$1.current),at)break;return null;case 22:case 23:return _e.lanes=0,ej($,_e,rt)}return $i($,_e,rt)}var Aj,Bj,Cj,Dj;Aj=function($,_e){for(var rt=_e.child;rt!==null;){if(rt.tag===5||rt.tag===6)$.appendChild(rt.stateNode);else if(rt.tag!==4&&rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===_e)break;for(;rt.sibling===null;){if(rt.return===null||rt.return===_e)return;rt=rt.return}rt.sibling.return=rt.return,rt=rt.sibling}};Bj=function(){};Cj=function($,_e,rt,at){var ht=$.memoizedProps;if(ht!==at){$=_e.stateNode,Hh(Eh.current);var pt=null;switch(rt){case"input":ht=Ya($,ht),at=Ya($,at),pt=[];break;case"select":ht=A$3({},ht,{value:void 0}),at=A$3({},at,{value:void 0}),pt=[];break;case"textarea":ht=gb($,ht),at=gb($,at),pt=[];break;default:typeof ht.onClick!="function"&&typeof at.onClick=="function"&&($.onclick=Bf)}ub(rt,at);var wt;rt=null;for(kt in ht)if(!at.hasOwnProperty(kt)&&ht.hasOwnProperty(kt)&&ht[kt]!=null)if(kt==="style"){var st=ht[kt];for(wt in st)st.hasOwnProperty(wt)&&(rt||(rt={}),rt[wt]="")}else kt!=="dangerouslySetInnerHTML"&&kt!=="children"&&kt!=="suppressContentEditableWarning"&&kt!=="suppressHydrationWarning"&&kt!=="autoFocus"&&(ea.hasOwnProperty(kt)?pt||(pt=[]):(pt=pt||[]).push(kt,null));for(kt in at){var Tt=at[kt];if(st=ht!=null?ht[kt]:void 0,at.hasOwnProperty(kt)&&Tt!==st&&(Tt!=null||st!=null))if(kt==="style")if(st){for(wt in st)!st.hasOwnProperty(wt)||Tt&&Tt.hasOwnProperty(wt)||(rt||(rt={}),rt[wt]="");for(wt in Tt)Tt.hasOwnProperty(wt)&&st[wt]!==Tt[wt]&&(rt||(rt={}),rt[wt]=Tt[wt])}else rt||(pt||(pt=[]),pt.push(kt,rt)),rt=Tt;else kt==="dangerouslySetInnerHTML"?(Tt=Tt?Tt.__html:void 0,st=st?st.__html:void 0,Tt!=null&&st!==Tt&&(pt=pt||[]).push(kt,Tt)):kt==="children"?typeof Tt!="string"&&typeof Tt!="number"||(pt=pt||[]).push(kt,""+Tt):kt!=="suppressContentEditableWarning"&&kt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(kt)?(Tt!=null&&kt==="onScroll"&&D$1("scroll",$),pt||st===Tt||(pt=[])):(pt=pt||[]).push(kt,Tt))}rt&&(pt=pt||[]).push("style",rt);var kt=pt;(_e.updateQueue=kt)&&(_e.flags|=4)}};Dj=function($,_e,rt,at){rt!==at&&(_e.flags|=4)};function Ej($,_e){if(!I$1)switch($.tailMode){case"hidden":_e=$.tail;for(var rt=null;_e!==null;)_e.alternate!==null&&(rt=_e),_e=_e.sibling;rt===null?$.tail=null:rt.sibling=null;break;case"collapsed":rt=$.tail;for(var at=null;rt!==null;)rt.alternate!==null&&(at=rt),rt=rt.sibling;at===null?_e||$.tail===null?$.tail=null:$.tail.sibling=null:at.sibling=null}}function S$1($){var _e=$.alternate!==null&&$.alternate.child===$.child,rt=0,at=0;if(_e)for(var ht=$.child;ht!==null;)rt|=ht.lanes|ht.childLanes,at|=ht.subtreeFlags&14680064,at|=ht.flags&14680064,ht.return=$,ht=ht.sibling;else for(ht=$.child;ht!==null;)rt|=ht.lanes|ht.childLanes,at|=ht.subtreeFlags,at|=ht.flags,ht.return=$,ht=ht.sibling;return $.subtreeFlags|=at,$.childLanes=rt,_e}function Fj($,_e,rt){var at=_e.pendingProps;switch(wg(_e),_e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(_e),null;case 1:return Zf(_e.type)&&$f(),S$1(_e),null;case 3:return at=_e.stateNode,Jh(),E$1(Wf),E$1(H$1),Oh(),at.pendingContext&&(at.context=at.pendingContext,at.pendingContext=null),($===null||$.child===null)&&(Gg(_e)?_e.flags|=4:$===null||$.memoizedState.isDehydrated&&!(_e.flags&256)||(_e.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj($,_e),S$1(_e),null;case 5:Lh(_e);var ht=Hh(Gh.current);if(rt=_e.type,$!==null&&_e.stateNode!=null)Cj($,_e,rt,at,ht),$.ref!==_e.ref&&(_e.flags|=512,_e.flags|=2097152);else{if(!at){if(_e.stateNode===null)throw Error(p$6(166));return S$1(_e),null}if($=Hh(Eh.current),Gg(_e)){at=_e.stateNode,rt=_e.type;var pt=_e.memoizedProps;switch(at[Of]=_e,at[Pf]=pt,$=(_e.mode&1)!==0,rt){case"dialog":D$1("cancel",at),D$1("close",at);break;case"iframe":case"object":case"embed":D$1("load",at);break;case"video":case"audio":for(ht=0;ht<lf.length;ht++)D$1(lf[ht],at);break;case"source":D$1("error",at);break;case"img":case"image":case"link":D$1("error",at),D$1("load",at);break;case"details":D$1("toggle",at);break;case"input":Za(at,pt),D$1("invalid",at);break;case"select":at._wrapperState={wasMultiple:!!pt.multiple},D$1("invalid",at);break;case"textarea":hb(at,pt),D$1("invalid",at)}ub(rt,pt),ht=null;for(var wt in pt)if(pt.hasOwnProperty(wt)){var st=pt[wt];wt==="children"?typeof st=="string"?at.textContent!==st&&(pt.suppressHydrationWarning!==!0&&Af(at.textContent,st,$),ht=["children",st]):typeof st=="number"&&at.textContent!==""+st&&(pt.suppressHydrationWarning!==!0&&Af(at.textContent,st,$),ht=["children",""+st]):ea.hasOwnProperty(wt)&&st!=null&&wt==="onScroll"&&D$1("scroll",at)}switch(rt){case"input":Va(at),db(at,pt,!0);break;case"textarea":Va(at),jb(at);break;case"select":case"option":break;default:typeof pt.onClick=="function"&&(at.onclick=Bf)}at=ht,_e.updateQueue=at,at!==null&&(_e.flags|=4)}else{wt=ht.nodeType===9?ht:ht.ownerDocument,$==="http://www.w3.org/1999/xhtml"&&($=kb(rt)),$==="http://www.w3.org/1999/xhtml"?rt==="script"?($=wt.createElement("div"),$.innerHTML="<script><\/script>",$=$.removeChild($.firstChild)):typeof at.is=="string"?$=wt.createElement(rt,{is:at.is}):($=wt.createElement(rt),rt==="select"&&(wt=$,at.multiple?wt.multiple=!0:at.size&&(wt.size=at.size))):$=wt.createElementNS($,rt),$[Of]=_e,$[Pf]=at,Aj($,_e,!1,!1),_e.stateNode=$;e:{switch(wt=vb(rt,at),rt){case"dialog":D$1("cancel",$),D$1("close",$),ht=at;break;case"iframe":case"object":case"embed":D$1("load",$),ht=at;break;case"video":case"audio":for(ht=0;ht<lf.length;ht++)D$1(lf[ht],$);ht=at;break;case"source":D$1("error",$),ht=at;break;case"img":case"image":case"link":D$1("error",$),D$1("load",$),ht=at;break;case"details":D$1("toggle",$),ht=at;break;case"input":Za($,at),ht=Ya($,at),D$1("invalid",$);break;case"option":ht=at;break;case"select":$._wrapperState={wasMultiple:!!at.multiple},ht=A$3({},at,{value:void 0}),D$1("invalid",$);break;case"textarea":hb($,at),ht=gb($,at),D$1("invalid",$);break;default:ht=at}ub(rt,ht),st=ht;for(pt in st)if(st.hasOwnProperty(pt)){var Tt=st[pt];pt==="style"?sb($,Tt):pt==="dangerouslySetInnerHTML"?(Tt=Tt?Tt.__html:void 0,Tt!=null&&nb($,Tt)):pt==="children"?typeof Tt=="string"?(rt!=="textarea"||Tt!=="")&&ob($,Tt):typeof Tt=="number"&&ob($,""+Tt):pt!=="suppressContentEditableWarning"&&pt!=="suppressHydrationWarning"&&pt!=="autoFocus"&&(ea.hasOwnProperty(pt)?Tt!=null&&pt==="onScroll"&&D$1("scroll",$):Tt!=null&&ta($,pt,Tt,wt))}switch(rt){case"input":Va($),db($,at,!1);break;case"textarea":Va($),jb($);break;case"option":at.value!=null&&$.setAttribute("value",""+Sa(at.value));break;case"select":$.multiple=!!at.multiple,pt=at.value,pt!=null?fb($,!!at.multiple,pt,!1):at.defaultValue!=null&&fb($,!!at.multiple,at.defaultValue,!0);break;default:typeof ht.onClick=="function"&&($.onclick=Bf)}switch(rt){case"button":case"input":case"select":case"textarea":at=!!at.autoFocus;break e;case"img":at=!0;break e;default:at=!1}}at&&(_e.flags|=4)}_e.ref!==null&&(_e.flags|=512,_e.flags|=2097152)}return S$1(_e),null;case 6:if($&&_e.stateNode!=null)Dj($,_e,$.memoizedProps,at);else{if(typeof at!="string"&&_e.stateNode===null)throw Error(p$6(166));if(rt=Hh(Gh.current),Hh(Eh.current),Gg(_e)){if(at=_e.stateNode,rt=_e.memoizedProps,at[Of]=_e,(pt=at.nodeValue!==rt)&&($=xg,$!==null))switch($.tag){case 3:Af(at.nodeValue,rt,($.mode&1)!==0);break;case 5:$.memoizedProps.suppressHydrationWarning!==!0&&Af(at.nodeValue,rt,($.mode&1)!==0)}pt&&(_e.flags|=4)}else at=(rt.nodeType===9?rt:rt.ownerDocument).createTextNode(at),at[Of]=_e,_e.stateNode=at}return S$1(_e),null;case 13:if(E$1(M$1),at=_e.memoizedState,$===null||$.memoizedState!==null&&$.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&_e.mode&1&&!(_e.flags&128))Hg(),Ig(),_e.flags|=98560,pt=!1;else if(pt=Gg(_e),at!==null&&at.dehydrated!==null){if($===null){if(!pt)throw Error(p$6(318));if(pt=_e.memoizedState,pt=pt!==null?pt.dehydrated:null,!pt)throw Error(p$6(317));pt[Of]=_e}else Ig(),!(_e.flags&128)&&(_e.memoizedState=null),_e.flags|=4;S$1(_e),pt=!1}else zg!==null&&(Gj(zg),zg=null),pt=!0;if(!pt)return _e.flags&65536?_e:null}return _e.flags&128?(_e.lanes=rt,_e):(at=at!==null,at!==($!==null&&$.memoizedState!==null)&&at&&(_e.child.flags|=8192,_e.mode&1&&($===null||M$1.current&1?T===0&&(T=3):uj())),_e.updateQueue!==null&&(_e.flags|=4),S$1(_e),null);case 4:return Jh(),Bj($,_e),$===null&&sf(_e.stateNode.containerInfo),S$1(_e),null;case 10:return Rg(_e.type._context),S$1(_e),null;case 17:return Zf(_e.type)&&$f(),S$1(_e),null;case 19:if(E$1(M$1),pt=_e.memoizedState,pt===null)return S$1(_e),null;if(at=(_e.flags&128)!==0,wt=pt.rendering,wt===null)if(at)Ej(pt,!1);else{if(T!==0||$!==null&&$.flags&128)for($=_e.child;$!==null;){if(wt=Mh($),wt!==null){for(_e.flags|=128,Ej(pt,!1),at=wt.updateQueue,at!==null&&(_e.updateQueue=at,_e.flags|=4),_e.subtreeFlags=0,at=rt,rt=_e.child;rt!==null;)pt=rt,$=at,pt.flags&=14680066,wt=pt.alternate,wt===null?(pt.childLanes=0,pt.lanes=$,pt.child=null,pt.subtreeFlags=0,pt.memoizedProps=null,pt.memoizedState=null,pt.updateQueue=null,pt.dependencies=null,pt.stateNode=null):(pt.childLanes=wt.childLanes,pt.lanes=wt.lanes,pt.child=wt.child,pt.subtreeFlags=0,pt.deletions=null,pt.memoizedProps=wt.memoizedProps,pt.memoizedState=wt.memoizedState,pt.updateQueue=wt.updateQueue,pt.type=wt.type,$=wt.dependencies,pt.dependencies=$===null?null:{lanes:$.lanes,firstContext:$.firstContext}),rt=rt.sibling;return G$1(M$1,M$1.current&1|2),_e.child}$=$.sibling}pt.tail!==null&&B$1()>Hj&&(_e.flags|=128,at=!0,Ej(pt,!1),_e.lanes=4194304)}else{if(!at)if($=Mh(wt),$!==null){if(_e.flags|=128,at=!0,rt=$.updateQueue,rt!==null&&(_e.updateQueue=rt,_e.flags|=4),Ej(pt,!0),pt.tail===null&&pt.tailMode==="hidden"&&!wt.alternate&&!I$1)return S$1(_e),null}else 2*B$1()-pt.renderingStartTime>Hj&&rt!==1073741824&&(_e.flags|=128,at=!0,Ej(pt,!1),_e.lanes=4194304);pt.isBackwards?(wt.sibling=_e.child,_e.child=wt):(rt=pt.last,rt!==null?rt.sibling=wt:_e.child=wt,pt.last=wt)}return pt.tail!==null?(_e=pt.tail,pt.rendering=_e,pt.tail=_e.sibling,pt.renderingStartTime=B$1(),_e.sibling=null,rt=M$1.current,G$1(M$1,at?rt&1|2:rt&1),_e):(S$1(_e),null);case 22:case 23:return Ij(),at=_e.memoizedState!==null,$!==null&&$.memoizedState!==null!==at&&(_e.flags|=8192),at&&_e.mode&1?gj&1073741824&&(S$1(_e),_e.subtreeFlags&6&&(_e.flags|=8192)):S$1(_e),null;case 24:return null;case 25:return null}throw Error(p$6(156,_e.tag))}function Jj($,_e){switch(wg(_e),_e.tag){case 1:return Zf(_e.type)&&$f(),$=_e.flags,$&65536?(_e.flags=$&-65537|128,_e):null;case 3:return Jh(),E$1(Wf),E$1(H$1),Oh(),$=_e.flags,$&65536&&!($&128)?(_e.flags=$&-65537|128,_e):null;case 5:return Lh(_e),null;case 13:if(E$1(M$1),$=_e.memoizedState,$!==null&&$.dehydrated!==null){if(_e.alternate===null)throw Error(p$6(340));Ig()}return $=_e.flags,$&65536?(_e.flags=$&-65537|128,_e):null;case 19:return E$1(M$1),null;case 4:return Jh(),null;case 10:return Rg(_e.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$1=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Mj($,_e){var rt=$.ref;if(rt!==null)if(typeof rt=="function")try{rt(null)}catch(at){W$1($,_e,at)}else rt.current=null}function Nj($,_e,rt){try{rt()}catch(at){W$1($,_e,at)}}var Oj=!1;function Pj($,_e){if(Cf=dd,$=Me$1(),Ne$1($)){if("selectionStart"in $)var rt={start:$.selectionStart,end:$.selectionEnd};else e:{rt=(rt=$.ownerDocument)&&rt.defaultView||window;var at=rt.getSelection&&rt.getSelection();if(at&&at.rangeCount!==0){rt=at.anchorNode;var ht=at.anchorOffset,pt=at.focusNode;at=at.focusOffset;try{rt.nodeType,pt.nodeType}catch{rt=null;break e}var wt=0,st=-1,Tt=-1,kt=0,Mt=0,Dt=$,Ot=null;t:for(;;){for(var Ut;Dt!==rt||ht!==0&&Dt.nodeType!==3||(st=wt+ht),Dt!==pt||at!==0&&Dt.nodeType!==3||(Tt=wt+at),Dt.nodeType===3&&(wt+=Dt.nodeValue.length),(Ut=Dt.firstChild)!==null;)Ot=Dt,Dt=Ut;for(;;){if(Dt===$)break t;if(Ot===rt&&++kt===ht&&(st=wt),Ot===pt&&++Mt===at&&(Tt=wt),(Ut=Dt.nextSibling)!==null)break;Dt=Ot,Ot=Dt.parentNode}Dt=Ut}rt=st===-1||Tt===-1?null:{start:st,end:Tt}}else rt=null}rt=rt||{start:0,end:0}}else rt=null;for(Df={focusedElem:$,selectionRange:rt},dd=!1,V=_e;V!==null;)if(_e=V,$=_e.child,(_e.subtreeFlags&1028)!==0&&$!==null)$.return=_e,V=$;else for(;V!==null;){_e=V;try{var qt=_e.alternate;if(_e.flags&1024)switch(_e.tag){case 0:case 11:case 15:break;case 1:if(qt!==null){var tr=qt.memoizedProps,ar=qt.memoizedState,Yt=_e.stateNode,Kt=Yt.getSnapshotBeforeUpdate(_e.elementType===_e.type?tr:Lg(_e.type,tr),ar);Yt.__reactInternalSnapshotBeforeUpdate=Kt}break;case 3:var Jt=_e.stateNode.containerInfo;Jt.nodeType===1?Jt.textContent="":Jt.nodeType===9&&Jt.documentElement&&Jt.removeChild(Jt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$6(163))}}catch(pr){W$1(_e,_e.return,pr)}if($=_e.sibling,$!==null){$.return=_e.return,V=$;break}V=_e.return}return qt=Oj,Oj=!1,qt}function Qj($,_e,rt){var at=_e.updateQueue;if(at=at!==null?at.lastEffect:null,at!==null){var ht=at=at.next;do{if((ht.tag&$)===$){var pt=ht.destroy;ht.destroy=void 0,pt!==void 0&&Nj(_e,rt,pt)}ht=ht.next}while(ht!==at)}}function Rj($,_e){if(_e=_e.updateQueue,_e=_e!==null?_e.lastEffect:null,_e!==null){var rt=_e=_e.next;do{if((rt.tag&$)===$){var at=rt.create;rt.destroy=at()}rt=rt.next}while(rt!==_e)}}function Sj($){var _e=$.ref;if(_e!==null){var rt=$.stateNode;switch($.tag){case 5:$=rt;break;default:$=rt}typeof _e=="function"?_e($):_e.current=$}}function Tj($){var _e=$.alternate;_e!==null&&($.alternate=null,Tj(_e)),$.child=null,$.deletions=null,$.sibling=null,$.tag===5&&(_e=$.stateNode,_e!==null&&(delete _e[Of],delete _e[Pf],delete _e[of],delete _e[Qf],delete _e[Rf])),$.stateNode=null,$.return=null,$.dependencies=null,$.memoizedProps=null,$.memoizedState=null,$.pendingProps=null,$.stateNode=null,$.updateQueue=null}function Uj($){return $.tag===5||$.tag===3||$.tag===4}function Vj($){e:for(;;){for(;$.sibling===null;){if($.return===null||Uj($.return))return null;$=$.return}for($.sibling.return=$.return,$=$.sibling;$.tag!==5&&$.tag!==6&&$.tag!==18;){if($.flags&2||$.child===null||$.tag===4)continue e;$.child.return=$,$=$.child}if(!($.flags&2))return $.stateNode}}function Wj($,_e,rt){var at=$.tag;if(at===5||at===6)$=$.stateNode,_e?rt.nodeType===8?rt.parentNode.insertBefore($,_e):rt.insertBefore($,_e):(rt.nodeType===8?(_e=rt.parentNode,_e.insertBefore($,rt)):(_e=rt,_e.appendChild($)),rt=rt._reactRootContainer,rt!=null||_e.onclick!==null||(_e.onclick=Bf));else if(at!==4&&($=$.child,$!==null))for(Wj($,_e,rt),$=$.sibling;$!==null;)Wj($,_e,rt),$=$.sibling}function Xj($,_e,rt){var at=$.tag;if(at===5||at===6)$=$.stateNode,_e?rt.insertBefore($,_e):rt.appendChild($);else if(at!==4&&($=$.child,$!==null))for(Xj($,_e,rt),$=$.sibling;$!==null;)Xj($,_e,rt),$=$.sibling}var X$1=null,Yj=!1;function Zj($,_e,rt){for(rt=rt.child;rt!==null;)ak($,_e,rt),rt=rt.sibling}function ak($,_e,rt){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,rt)}catch{}switch(rt.tag){case 5:U$1||Mj(rt,_e);case 6:var at=X$1,ht=Yj;X$1=null,Zj($,_e,rt),X$1=at,Yj=ht,X$1!==null&&(Yj?($=X$1,rt=rt.stateNode,$.nodeType===8?$.parentNode.removeChild(rt):$.removeChild(rt)):X$1.removeChild(rt.stateNode));break;case 18:X$1!==null&&(Yj?($=X$1,rt=rt.stateNode,$.nodeType===8?Kf($.parentNode,rt):$.nodeType===1&&Kf($,rt),bd($)):Kf(X$1,rt.stateNode));break;case 4:at=X$1,ht=Yj,X$1=rt.stateNode.containerInfo,Yj=!0,Zj($,_e,rt),X$1=at,Yj=ht;break;case 0:case 11:case 14:case 15:if(!U$1&&(at=rt.updateQueue,at!==null&&(at=at.lastEffect,at!==null))){ht=at=at.next;do{var pt=ht,wt=pt.destroy;pt=pt.tag,wt!==void 0&&(pt&2||pt&4)&&Nj(rt,_e,wt),ht=ht.next}while(ht!==at)}Zj($,_e,rt);break;case 1:if(!U$1&&(Mj(rt,_e),at=rt.stateNode,typeof at.componentWillUnmount=="function"))try{at.props=rt.memoizedProps,at.state=rt.memoizedState,at.componentWillUnmount()}catch(st){W$1(rt,_e,st)}Zj($,_e,rt);break;case 21:Zj($,_e,rt);break;case 22:rt.mode&1?(U$1=(at=U$1)||rt.memoizedState!==null,Zj($,_e,rt),U$1=at):Zj($,_e,rt);break;default:Zj($,_e,rt)}}function bk($){var _e=$.updateQueue;if(_e!==null){$.updateQueue=null;var rt=$.stateNode;rt===null&&(rt=$.stateNode=new Lj),_e.forEach(function(at){var ht=ck.bind(null,$,at);rt.has(at)||(rt.add(at),at.then(ht,ht))})}}function dk($,_e){var rt=_e.deletions;if(rt!==null)for(var at=0;at<rt.length;at++){var ht=rt[at];try{var pt=$,wt=_e,st=wt;e:for(;st!==null;){switch(st.tag){case 5:X$1=st.stateNode,Yj=!1;break e;case 3:X$1=st.stateNode.containerInfo,Yj=!0;break e;case 4:X$1=st.stateNode.containerInfo,Yj=!0;break e}st=st.return}if(X$1===null)throw Error(p$6(160));ak(pt,wt,ht),X$1=null,Yj=!1;var Tt=ht.alternate;Tt!==null&&(Tt.return=null),ht.return=null}catch(kt){W$1(ht,_e,kt)}}if(_e.subtreeFlags&12854)for(_e=_e.child;_e!==null;)ek(_e,$),_e=_e.sibling}function ek($,_e){var rt=$.alternate,at=$.flags;switch($.tag){case 0:case 11:case 14:case 15:if(dk(_e,$),fk($),at&4){try{Qj(3,$,$.return),Rj(3,$)}catch(tr){W$1($,$.return,tr)}try{Qj(5,$,$.return)}catch(tr){W$1($,$.return,tr)}}break;case 1:dk(_e,$),fk($),at&512&&rt!==null&&Mj(rt,rt.return);break;case 5:if(dk(_e,$),fk($),at&512&&rt!==null&&Mj(rt,rt.return),$.flags&32){var ht=$.stateNode;try{ob(ht,"")}catch(tr){W$1($,$.return,tr)}}if(at&4&&(ht=$.stateNode,ht!=null)){var pt=$.memoizedProps,wt=rt!==null?rt.memoizedProps:pt,st=$.type,Tt=$.updateQueue;if($.updateQueue=null,Tt!==null)try{st==="input"&&pt.type==="radio"&&pt.name!=null&&ab(ht,pt),vb(st,wt);var kt=vb(st,pt);for(wt=0;wt<Tt.length;wt+=2){var Mt=Tt[wt],Dt=Tt[wt+1];Mt==="style"?sb(ht,Dt):Mt==="dangerouslySetInnerHTML"?nb(ht,Dt):Mt==="children"?ob(ht,Dt):ta(ht,Mt,Dt,kt)}switch(st){case"input":bb(ht,pt);break;case"textarea":ib(ht,pt);break;case"select":var Ot=ht._wrapperState.wasMultiple;ht._wrapperState.wasMultiple=!!pt.multiple;var Ut=pt.value;Ut!=null?fb(ht,!!pt.multiple,Ut,!1):Ot!==!!pt.multiple&&(pt.defaultValue!=null?fb(ht,!!pt.multiple,pt.defaultValue,!0):fb(ht,!!pt.multiple,pt.multiple?[]:"",!1))}ht[Pf]=pt}catch(tr){W$1($,$.return,tr)}}break;case 6:if(dk(_e,$),fk($),at&4){if($.stateNode===null)throw Error(p$6(162));ht=$.stateNode,pt=$.memoizedProps;try{ht.nodeValue=pt}catch(tr){W$1($,$.return,tr)}}break;case 3:if(dk(_e,$),fk($),at&4&&rt!==null&&rt.memoizedState.isDehydrated)try{bd(_e.containerInfo)}catch(tr){W$1($,$.return,tr)}break;case 4:dk(_e,$),fk($);break;case 13:dk(_e,$),fk($),ht=$.child,ht.flags&8192&&(pt=ht.memoizedState!==null,ht.stateNode.isHidden=pt,!pt||ht.alternate!==null&&ht.alternate.memoizedState!==null||(gk=B$1())),at&4&&bk($);break;case 22:if(Mt=rt!==null&&rt.memoizedState!==null,$.mode&1?(U$1=(kt=U$1)||Mt,dk(_e,$),U$1=kt):dk(_e,$),fk($),at&8192){if(kt=$.memoizedState!==null,($.stateNode.isHidden=kt)&&!Mt&&$.mode&1)for(V=$,Mt=$.child;Mt!==null;){for(Dt=V=Mt;V!==null;){switch(Ot=V,Ut=Ot.child,Ot.tag){case 0:case 11:case 14:case 15:Qj(4,Ot,Ot.return);break;case 1:Mj(Ot,Ot.return);var qt=Ot.stateNode;if(typeof qt.componentWillUnmount=="function"){at=Ot,rt=Ot.return;try{_e=at,qt.props=_e.memoizedProps,qt.state=_e.memoizedState,qt.componentWillUnmount()}catch(tr){W$1(at,rt,tr)}}break;case 5:Mj(Ot,Ot.return);break;case 22:if(Ot.memoizedState!==null){hk(Dt);continue}}Ut!==null?(Ut.return=Ot,V=Ut):hk(Dt)}Mt=Mt.sibling}e:for(Mt=null,Dt=$;;){if(Dt.tag===5){if(Mt===null){Mt=Dt;try{ht=Dt.stateNode,kt?(pt=ht.style,typeof pt.setProperty=="function"?pt.setProperty("display","none","important"):pt.display="none"):(st=Dt.stateNode,Tt=Dt.memoizedProps.style,wt=Tt!=null&&Tt.hasOwnProperty("display")?Tt.display:null,st.style.display=rb("display",wt))}catch(tr){W$1($,$.return,tr)}}}else if(Dt.tag===6){if(Mt===null)try{Dt.stateNode.nodeValue=kt?"":Dt.memoizedProps}catch(tr){W$1($,$.return,tr)}}else if((Dt.tag!==22&&Dt.tag!==23||Dt.memoizedState===null||Dt===$)&&Dt.child!==null){Dt.child.return=Dt,Dt=Dt.child;continue}if(Dt===$)break e;for(;Dt.sibling===null;){if(Dt.return===null||Dt.return===$)break e;Mt===Dt&&(Mt=null),Dt=Dt.return}Mt===Dt&&(Mt=null),Dt.sibling.return=Dt.return,Dt=Dt.sibling}}break;case 19:dk(_e,$),fk($),at&4&&bk($);break;case 21:break;default:dk(_e,$),fk($)}}function fk($){var _e=$.flags;if(_e&2){try{e:{for(var rt=$.return;rt!==null;){if(Uj(rt)){var at=rt;break e}rt=rt.return}throw Error(p$6(160))}switch(at.tag){case 5:var ht=at.stateNode;at.flags&32&&(ob(ht,""),at.flags&=-33);var pt=Vj($);Xj($,pt,ht);break;case 3:case 4:var wt=at.stateNode.containerInfo,st=Vj($);Wj($,st,wt);break;default:throw Error(p$6(161))}}catch(Tt){W$1($,$.return,Tt)}$.flags&=-3}_e&4096&&($.flags&=-4097)}function ik($,_e,rt){V=$,jk($)}function jk($,_e,rt){for(var at=($.mode&1)!==0;V!==null;){var ht=V,pt=ht.child;if(ht.tag===22&&at){var wt=ht.memoizedState!==null||Kj;if(!wt){var st=ht.alternate,Tt=st!==null&&st.memoizedState!==null||U$1;st=Kj;var kt=U$1;if(Kj=wt,(U$1=Tt)&&!kt)for(V=ht;V!==null;)wt=V,Tt=wt.child,wt.tag===22&&wt.memoizedState!==null?kk(ht):Tt!==null?(Tt.return=wt,V=Tt):kk(ht);for(;pt!==null;)V=pt,jk(pt),pt=pt.sibling;V=ht,Kj=st,U$1=kt}lk($)}else ht.subtreeFlags&8772&&pt!==null?(pt.return=ht,V=pt):lk($)}}function lk($){for(;V!==null;){var _e=V;if(_e.flags&8772){var rt=_e.alternate;try{if(_e.flags&8772)switch(_e.tag){case 0:case 11:case 15:U$1||Rj(5,_e);break;case 1:var at=_e.stateNode;if(_e.flags&4&&!U$1)if(rt===null)at.componentDidMount();else{var ht=_e.elementType===_e.type?rt.memoizedProps:Lg(_e.type,rt.memoizedProps);at.componentDidUpdate(ht,rt.memoizedState,at.__reactInternalSnapshotBeforeUpdate)}var pt=_e.updateQueue;pt!==null&&ih(_e,pt,at);break;case 3:var wt=_e.updateQueue;if(wt!==null){if(rt=null,_e.child!==null)switch(_e.child.tag){case 5:rt=_e.child.stateNode;break;case 1:rt=_e.child.stateNode}ih(_e,wt,rt)}break;case 5:var st=_e.stateNode;if(rt===null&&_e.flags&4){rt=st;var Tt=_e.memoizedProps;switch(_e.type){case"button":case"input":case"select":case"textarea":Tt.autoFocus&&rt.focus();break;case"img":Tt.src&&(rt.src=Tt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_e.memoizedState===null){var kt=_e.alternate;if(kt!==null){var Mt=kt.memoizedState;if(Mt!==null){var Dt=Mt.dehydrated;Dt!==null&&bd(Dt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$6(163))}U$1||_e.flags&512&&Sj(_e)}catch(Ot){W$1(_e,_e.return,Ot)}}if(_e===$){V=null;break}if(rt=_e.sibling,rt!==null){rt.return=_e.return,V=rt;break}V=_e.return}}function hk($){for(;V!==null;){var _e=V;if(_e===$){V=null;break}var rt=_e.sibling;if(rt!==null){rt.return=_e.return,V=rt;break}V=_e.return}}function kk($){for(;V!==null;){var _e=V;try{switch(_e.tag){case 0:case 11:case 15:var rt=_e.return;try{Rj(4,_e)}catch(Tt){W$1(_e,rt,Tt)}break;case 1:var at=_e.stateNode;if(typeof at.componentDidMount=="function"){var ht=_e.return;try{at.componentDidMount()}catch(Tt){W$1(_e,ht,Tt)}}var pt=_e.return;try{Sj(_e)}catch(Tt){W$1(_e,pt,Tt)}break;case 5:var wt=_e.return;try{Sj(_e)}catch(Tt){W$1(_e,wt,Tt)}}}catch(Tt){W$1(_e,_e.return,Tt)}if(_e===$){V=null;break}var st=_e.sibling;if(st!==null){st.return=_e.return,V=st;break}V=_e.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K=0,R$1=null,Y=null,Z$1=0,gj=0,fj=Uf(0),T=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$1(){return K&6?B$1():Bk!==-1?Bk:Bk=B$1()}function lh($){return $.mode&1?K&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):($=C,$!==0||($=window.event,$=$===void 0?16:jd($.type)),$):1}function mh($,_e,rt,at){if(50<zk)throw zk=0,Ak=null,Error(p$6(185));Ac($,rt,at),(!(K&2)||$!==R$1)&&($===R$1&&(!(K&2)&&(rk|=rt),T===4&&Dk($,Z$1)),Ek($,at),rt===1&&K===0&&!(_e.mode&1)&&(Hj=B$1()+500,fg&&jg()))}function Ek($,_e){var rt=$.callbackNode;wc($,_e);var at=uc($,$===R$1?Z$1:0);if(at===0)rt!==null&&bc(rt),$.callbackNode=null,$.callbackPriority=0;else if(_e=at&-at,$.callbackPriority!==_e){if(rt!=null&&bc(rt),_e===1)$.tag===0?ig(Fk.bind(null,$)):hg(Fk.bind(null,$)),Jf(function(){!(K&6)&&jg()}),rt=null;else{switch(Dc(at)){case 1:rt=fc;break;case 4:rt=gc;break;case 16:rt=hc;break;case 536870912:rt=jc;break;default:rt=hc}rt=Gk(rt,Hk.bind(null,$))}$.callbackPriority=_e,$.callbackNode=rt}}function Hk($,_e){if(Bk=-1,Ck=0,K&6)throw Error(p$6(327));var rt=$.callbackNode;if(Ik()&&$.callbackNode!==rt)return null;var at=uc($,$===R$1?Z$1:0);if(at===0)return null;if(at&30||at&$.expiredLanes||_e)_e=Jk($,at);else{_e=at;var ht=K;K|=2;var pt=Kk();(R$1!==$||Z$1!==_e)&&(vk=null,Hj=B$1()+500,Lk($,_e));do try{Mk();break}catch(st){Nk($,st)}while(1);Qg(),nk.current=pt,K=ht,Y!==null?_e=0:(R$1=null,Z$1=0,_e=T)}if(_e!==0){if(_e===2&&(ht=xc($),ht!==0&&(at=ht,_e=Ok($,ht))),_e===1)throw rt=qk,Lk($,0),Dk($,at),Ek($,B$1()),rt;if(_e===6)Dk($,at);else{if(ht=$.current.alternate,!(at&30)&&!Pk(ht)&&(_e=Jk($,at),_e===2&&(pt=xc($),pt!==0&&(at=pt,_e=Ok($,pt))),_e===1))throw rt=qk,Lk($,0),Dk($,at),Ek($,B$1()),rt;switch($.finishedWork=ht,$.finishedLanes=at,_e){case 0:case 1:throw Error(p$6(345));case 2:Qk($,uk,vk);break;case 3:if(Dk($,at),(at&130023424)===at&&(_e=gk+500-B$1(),10<_e)){if(uc($,0)!==0)break;if(ht=$.suspendedLanes,(ht&at)!==at){L$1(),$.pingedLanes|=$.suspendedLanes&ht;break}$.timeoutHandle=Ff(Qk.bind(null,$,uk,vk),_e);break}Qk($,uk,vk);break;case 4:if(Dk($,at),(at&4194240)===at)break;for(_e=$.eventTimes,ht=-1;0<at;){var wt=31-oc(at);pt=1<<wt,wt=_e[wt],wt>ht&&(ht=wt),at&=~pt}if(at=ht,at=B$1()-at,at=(120>at?120:480>at?480:1080>at?1080:1920>at?1920:3e3>at?3e3:4320>at?4320:1960*mk(at/1960))-at,10<at){$.timeoutHandle=Ff(Qk.bind(null,$,uk,vk),at);break}Qk($,uk,vk);break;case 5:Qk($,uk,vk);break;default:throw Error(p$6(329))}}}return Ek($,B$1()),$.callbackNode===rt?Hk.bind(null,$):null}function Ok($,_e){var rt=tk;return $.current.memoizedState.isDehydrated&&(Lk($,_e).flags|=256),$=Jk($,_e),$!==2&&(_e=uk,uk=rt,_e!==null&&Gj(_e)),$}function Gj($){uk===null?uk=$:uk.push.apply(uk,$)}function Pk($){for(var _e=$;;){if(_e.flags&16384){var rt=_e.updateQueue;if(rt!==null&&(rt=rt.stores,rt!==null))for(var at=0;at<rt.length;at++){var ht=rt[at],pt=ht.getSnapshot;ht=ht.value;try{if(!He(pt(),ht))return!1}catch{return!1}}}if(rt=_e.child,_e.subtreeFlags&16384&&rt!==null)rt.return=_e,_e=rt;else{if(_e===$)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===$)return!0;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}}return!0}function Dk($,_e){for(_e&=~sk,_e&=~rk,$.suspendedLanes|=_e,$.pingedLanes&=~_e,$=$.expirationTimes;0<_e;){var rt=31-oc(_e),at=1<<rt;$[rt]=-1,_e&=~at}}function Fk($){if(K&6)throw Error(p$6(327));Ik();var _e=uc($,0);if(!(_e&1))return Ek($,B$1()),null;var rt=Jk($,_e);if($.tag!==0&&rt===2){var at=xc($);at!==0&&(_e=at,rt=Ok($,at))}if(rt===1)throw rt=qk,Lk($,0),Dk($,_e),Ek($,B$1()),rt;if(rt===6)throw Error(p$6(345));return $.finishedWork=$.current.alternate,$.finishedLanes=_e,Qk($,uk,vk),Ek($,B$1()),null}function Rk($,_e){var rt=K;K|=1;try{return $(_e)}finally{K=rt,K===0&&(Hj=B$1()+500,fg&&jg())}}function Sk($){xk!==null&&xk.tag===0&&!(K&6)&&Ik();var _e=K;K|=1;var rt=pk.transition,at=C;try{if(pk.transition=null,C=1,$)return $()}finally{C=at,pk.transition=rt,K=_e,!(K&6)&&jg()}}function Ij(){gj=fj.current,E$1(fj)}function Lk($,_e){$.finishedWork=null,$.finishedLanes=0;var rt=$.timeoutHandle;if(rt!==-1&&($.timeoutHandle=-1,Gf(rt)),Y!==null)for(rt=Y.return;rt!==null;){var at=rt;switch(wg(at),at.tag){case 1:at=at.type.childContextTypes,at!=null&&$f();break;case 3:Jh(),E$1(Wf),E$1(H$1),Oh();break;case 5:Lh(at);break;case 4:Jh();break;case 13:E$1(M$1);break;case 19:E$1(M$1);break;case 10:Rg(at.type._context);break;case 22:case 23:Ij()}rt=rt.return}if(R$1=$,Y=$=wh($.current,null),Z$1=gj=_e,T=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(_e=0;_e<Wg.length;_e++)if(rt=Wg[_e],at=rt.interleaved,at!==null){rt.interleaved=null;var ht=at.next,pt=rt.pending;if(pt!==null){var wt=pt.next;pt.next=ht,at.next=wt}rt.pending=at}Wg=null}return $}function Nk($,_e){do{var rt=Y;try{if(Qg(),Ph.current=ai,Sh){for(var at=N$1.memoizedState;at!==null;){var ht=at.queue;ht!==null&&(ht.pending=null),at=at.next}Sh=!1}if(Rh=0,P$1=O$1=N$1=null,Th=!1,Uh=0,ok.current=null,rt===null||rt.return===null){T=1,qk=_e,Y=null;break}e:{var pt=$,wt=rt.return,st=rt,Tt=_e;if(_e=Z$1,st.flags|=32768,Tt!==null&&typeof Tt=="object"&&typeof Tt.then=="function"){var kt=Tt,Mt=st,Dt=Mt.tag;if(!(Mt.mode&1)&&(Dt===0||Dt===11||Dt===15)){var Ot=Mt.alternate;Ot?(Mt.updateQueue=Ot.updateQueue,Mt.memoizedState=Ot.memoizedState,Mt.lanes=Ot.lanes):(Mt.updateQueue=null,Mt.memoizedState=null)}var Ut=Vi(wt);if(Ut!==null){Ut.flags&=-257,Wi(Ut,wt,st,pt,_e),Ut.mode&1&&Ti(pt,kt,_e),_e=Ut,Tt=kt;var qt=_e.updateQueue;if(qt===null){var tr=new Set;tr.add(Tt),_e.updateQueue=tr}else qt.add(Tt);break e}else{if(!(_e&1)){Ti(pt,kt,_e),uj();break e}Tt=Error(p$6(426))}}else if(I$1&&st.mode&1){var ar=Vi(wt);if(ar!==null){!(ar.flags&65536)&&(ar.flags|=256),Wi(ar,wt,st,pt,_e),Jg(Ki(Tt,st));break e}}pt=Tt=Ki(Tt,st),T!==4&&(T=2),tk===null?tk=[pt]:tk.push(pt),pt=wt;do{switch(pt.tag){case 3:pt.flags|=65536,_e&=-_e,pt.lanes|=_e;var Yt=Oi(pt,Tt,_e);fh(pt,Yt);break e;case 1:st=Tt;var Kt=pt.type,Jt=pt.stateNode;if(!(pt.flags&128)&&(typeof Kt.getDerivedStateFromError=="function"||Jt!==null&&typeof Jt.componentDidCatch=="function"&&(Si===null||!Si.has(Jt)))){pt.flags|=65536,_e&=-_e,pt.lanes|=_e;var pr=Ri(pt,st,_e);fh(pt,pr);break e}}pt=pt.return}while(pt!==null)}Tk(rt)}catch(Sr){_e=Sr,Y===rt&&rt!==null&&(Y=rt=rt.return);continue}break}while(1)}function Kk(){var $=nk.current;return nk.current=ai,$===null?ai:$}function uj(){(T===0||T===3||T===2)&&(T=4),R$1===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$1,Z$1)}function Jk($,_e){var rt=K;K|=2;var at=Kk();(R$1!==$||Z$1!==_e)&&(vk=null,Lk($,_e));do try{Uk();break}catch(ht){Nk($,ht)}while(1);if(Qg(),K=rt,nk.current=at,Y!==null)throw Error(p$6(261));return R$1=null,Z$1=0,T}function Uk(){for(;Y!==null;)Vk(Y)}function Mk(){for(;Y!==null&&!cc();)Vk(Y)}function Vk($){var _e=Wk($.alternate,$,gj);$.memoizedProps=$.pendingProps,_e===null?Tk($):Y=_e,ok.current=null}function Tk($){var _e=$;do{var rt=_e.alternate;if($=_e.return,_e.flags&32768){if(rt=Jj(rt,_e),rt!==null){rt.flags&=32767,Y=rt;return}if($!==null)$.flags|=32768,$.subtreeFlags=0,$.deletions=null;else{T=6,Y=null;return}}else if(rt=Fj(rt,_e,gj),rt!==null){Y=rt;return}if(_e=_e.sibling,_e!==null){Y=_e;return}Y=_e=$}while(_e!==null);T===0&&(T=5)}function Qk($,_e,rt){var at=C,ht=pk.transition;try{pk.transition=null,C=1,Xk($,_e,rt,at)}finally{pk.transition=ht,C=at}return null}function Xk($,_e,rt,at){do Ik();while(xk!==null);if(K&6)throw Error(p$6(327));rt=$.finishedWork;var ht=$.finishedLanes;if(rt===null)return null;if($.finishedWork=null,$.finishedLanes=0,rt===$.current)throw Error(p$6(177));$.callbackNode=null,$.callbackPriority=0;var pt=rt.lanes|rt.childLanes;if(Bc($,pt),$===R$1&&(Y=R$1=null,Z$1=0),!(rt.subtreeFlags&2064)&&!(rt.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),pt=(rt.flags&15990)!==0,rt.subtreeFlags&15990||pt){pt=pk.transition,pk.transition=null;var wt=C;C=1;var st=K;K|=4,ok.current=null,Pj($,rt),ek(rt,$),Oe(Df),dd=!!Cf,Df=Cf=null,$.current=rt,ik(rt),dc(),K=st,C=wt,pk.transition=pt}else $.current=rt;if(wk&&(wk=!1,xk=$,yk=ht),pt=$.pendingLanes,pt===0&&(Si=null),mc(rt.stateNode),Ek($,B$1()),_e!==null)for(at=$.onRecoverableError,rt=0;rt<_e.length;rt++)ht=_e[rt],at(ht.value,{componentStack:ht.stack,digest:ht.digest});if(Pi)throw Pi=!1,$=Qi,Qi=null,$;return yk&1&&$.tag!==0&&Ik(),pt=$.pendingLanes,pt&1?$===Ak?zk++:(zk=0,Ak=$):zk=0,jg(),null}function Ik(){if(xk!==null){var $=Dc(yk),_e=pk.transition,rt=C;try{if(pk.transition=null,C=16>$?16:$,xk===null)var at=!1;else{if($=xk,xk=null,yk=0,K&6)throw Error(p$6(331));var ht=K;for(K|=4,V=$.current;V!==null;){var pt=V,wt=pt.child;if(V.flags&16){var st=pt.deletions;if(st!==null){for(var Tt=0;Tt<st.length;Tt++){var kt=st[Tt];for(V=kt;V!==null;){var Mt=V;switch(Mt.tag){case 0:case 11:case 15:Qj(8,Mt,pt)}var Dt=Mt.child;if(Dt!==null)Dt.return=Mt,V=Dt;else for(;V!==null;){Mt=V;var Ot=Mt.sibling,Ut=Mt.return;if(Tj(Mt),Mt===kt){V=null;break}if(Ot!==null){Ot.return=Ut,V=Ot;break}V=Ut}}}var qt=pt.alternate;if(qt!==null){var tr=qt.child;if(tr!==null){qt.child=null;do{var ar=tr.sibling;tr.sibling=null,tr=ar}while(tr!==null)}}V=pt}}if(pt.subtreeFlags&2064&&wt!==null)wt.return=pt,V=wt;else e:for(;V!==null;){if(pt=V,pt.flags&2048)switch(pt.tag){case 0:case 11:case 15:Qj(9,pt,pt.return)}var Yt=pt.sibling;if(Yt!==null){Yt.return=pt.return,V=Yt;break e}V=pt.return}}var Kt=$.current;for(V=Kt;V!==null;){wt=V;var Jt=wt.child;if(wt.subtreeFlags&2064&&Jt!==null)Jt.return=wt,V=Jt;else e:for(wt=Kt;V!==null;){if(st=V,st.flags&2048)try{switch(st.tag){case 0:case 11:case 15:Rj(9,st)}}catch(Sr){W$1(st,st.return,Sr)}if(st===wt){V=null;break e}var pr=st.sibling;if(pr!==null){pr.return=st.return,V=pr;break e}V=st.return}}if(K=ht,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,$)}catch{}at=!0}return at}finally{C=rt,pk.transition=_e}}return!1}function Yk($,_e,rt){_e=Ki(rt,_e),_e=Oi($,_e,1),$=dh($,_e,1),_e=L$1(),$!==null&&(Ac($,1,_e),Ek($,_e))}function W$1($,_e,rt){if($.tag===3)Yk($,$,rt);else for(;_e!==null;){if(_e.tag===3){Yk(_e,$,rt);break}else if(_e.tag===1){var at=_e.stateNode;if(typeof _e.type.getDerivedStateFromError=="function"||typeof at.componentDidCatch=="function"&&(Si===null||!Si.has(at))){$=Ki(rt,$),$=Ri(_e,$,1),_e=dh(_e,$,1),$=L$1(),_e!==null&&(Ac(_e,1,$),Ek(_e,$));break}}_e=_e.return}}function Ui($,_e,rt){var at=$.pingCache;at!==null&&at.delete(_e),_e=L$1(),$.pingedLanes|=$.suspendedLanes&rt,R$1===$&&(Z$1&rt)===rt&&(T===4||T===3&&(Z$1&130023424)===Z$1&&500>B$1()-gk?Lk($,0):sk|=rt),Ek($,_e)}function Zk($,_e){_e===0&&($.mode&1?(_e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):_e=1);var rt=L$1();$=Zg($,_e),$!==null&&(Ac($,_e,rt),Ek($,rt))}function vj($){var _e=$.memoizedState,rt=0;_e!==null&&(rt=_e.retryLane),Zk($,rt)}function ck($,_e){var rt=0;switch($.tag){case 13:var at=$.stateNode,ht=$.memoizedState;ht!==null&&(rt=ht.retryLane);break;case 19:at=$.stateNode;break;default:throw Error(p$6(314))}at!==null&&at.delete(_e),Zk($,rt)}var Wk;Wk=function($,_e,rt){if($!==null)if($.memoizedProps!==_e.pendingProps||Wf.current)Ug=!0;else{if(!($.lanes&rt)&&!(_e.flags&128))return Ug=!1,zj($,_e,rt);Ug=!!($.flags&131072)}else Ug=!1,I$1&&_e.flags&1048576&&ug(_e,ng,_e.index);switch(_e.lanes=0,_e.tag){case 2:var at=_e.type;jj($,_e),$=_e.pendingProps;var ht=Yf(_e,H$1.current);Tg(_e,rt),ht=Xh(null,_e,at,$,ht,rt);var pt=bi();return _e.flags|=1,typeof ht=="object"&&ht!==null&&typeof ht.render=="function"&&ht.$$typeof===void 0?(_e.tag=1,_e.memoizedState=null,_e.updateQueue=null,Zf(at)?(pt=!0,cg(_e)):pt=!1,_e.memoizedState=ht.state!==null&&ht.state!==void 0?ht.state:null,ah(_e),ht.updater=nh,_e.stateNode=ht,ht._reactInternals=_e,rh(_e,at,$,rt),_e=kj(null,_e,at,!0,pt,rt)):(_e.tag=0,I$1&&pt&&vg(_e),Yi(null,_e,ht,rt),_e=_e.child),_e;case 16:at=_e.elementType;e:{switch(jj($,_e),$=_e.pendingProps,ht=at._init,at=ht(at._payload),_e.type=at,ht=_e.tag=$k(at),$=Lg(at,$),ht){case 0:_e=dj(null,_e,at,$,rt);break e;case 1:_e=ij(null,_e,at,$,rt);break e;case 11:_e=Zi(null,_e,at,$,rt);break e;case 14:_e=aj(null,_e,at,Lg(at.type,$),rt);break e}throw Error(p$6(306,at,""))}return _e;case 0:return at=_e.type,ht=_e.pendingProps,ht=_e.elementType===at?ht:Lg(at,ht),dj($,_e,at,ht,rt);case 1:return at=_e.type,ht=_e.pendingProps,ht=_e.elementType===at?ht:Lg(at,ht),ij($,_e,at,ht,rt);case 3:e:{if(lj(_e),$===null)throw Error(p$6(387));at=_e.pendingProps,pt=_e.memoizedState,ht=pt.element,bh($,_e),gh(_e,at,null,rt);var wt=_e.memoizedState;if(at=wt.element,pt.isDehydrated)if(pt={element:at,isDehydrated:!1,cache:wt.cache,pendingSuspenseBoundaries:wt.pendingSuspenseBoundaries,transitions:wt.transitions},_e.updateQueue.baseState=pt,_e.memoizedState=pt,_e.flags&256){ht=Ki(Error(p$6(423)),_e),_e=mj($,_e,at,rt,ht);break e}else if(at!==ht){ht=Ki(Error(p$6(424)),_e),_e=mj($,_e,at,rt,ht);break e}else for(yg=Lf(_e.stateNode.containerInfo.firstChild),xg=_e,I$1=!0,zg=null,rt=Ch(_e,null,at,rt),_e.child=rt;rt;)rt.flags=rt.flags&-3|4096,rt=rt.sibling;else{if(Ig(),at===ht){_e=$i($,_e,rt);break e}Yi($,_e,at,rt)}_e=_e.child}return _e;case 5:return Kh(_e),$===null&&Eg(_e),at=_e.type,ht=_e.pendingProps,pt=$!==null?$.memoizedProps:null,wt=ht.children,Ef(at,ht)?wt=null:pt!==null&&Ef(at,pt)&&(_e.flags|=32),hj($,_e),Yi($,_e,wt,rt),_e.child;case 6:return $===null&&Eg(_e),null;case 13:return pj($,_e,rt);case 4:return Ih(_e,_e.stateNode.containerInfo),at=_e.pendingProps,$===null?_e.child=Bh(_e,null,at,rt):Yi($,_e,at,rt),_e.child;case 11:return at=_e.type,ht=_e.pendingProps,ht=_e.elementType===at?ht:Lg(at,ht),Zi($,_e,at,ht,rt);case 7:return Yi($,_e,_e.pendingProps,rt),_e.child;case 8:return Yi($,_e,_e.pendingProps.children,rt),_e.child;case 12:return Yi($,_e,_e.pendingProps.children,rt),_e.child;case 10:e:{if(at=_e.type._context,ht=_e.pendingProps,pt=_e.memoizedProps,wt=ht.value,G$1(Mg,at._currentValue),at._currentValue=wt,pt!==null)if(He(pt.value,wt)){if(pt.children===ht.children&&!Wf.current){_e=$i($,_e,rt);break e}}else for(pt=_e.child,pt!==null&&(pt.return=_e);pt!==null;){var st=pt.dependencies;if(st!==null){wt=pt.child;for(var Tt=st.firstContext;Tt!==null;){if(Tt.context===at){if(pt.tag===1){Tt=ch(-1,rt&-rt),Tt.tag=2;var kt=pt.updateQueue;if(kt!==null){kt=kt.shared;var Mt=kt.pending;Mt===null?Tt.next=Tt:(Tt.next=Mt.next,Mt.next=Tt),kt.pending=Tt}}pt.lanes|=rt,Tt=pt.alternate,Tt!==null&&(Tt.lanes|=rt),Sg(pt.return,rt,_e),st.lanes|=rt;break}Tt=Tt.next}}else if(pt.tag===10)wt=pt.type===_e.type?null:pt.child;else if(pt.tag===18){if(wt=pt.return,wt===null)throw Error(p$6(341));wt.lanes|=rt,st=wt.alternate,st!==null&&(st.lanes|=rt),Sg(wt,rt,_e),wt=pt.sibling}else wt=pt.child;if(wt!==null)wt.return=pt;else for(wt=pt;wt!==null;){if(wt===_e){wt=null;break}if(pt=wt.sibling,pt!==null){pt.return=wt.return,wt=pt;break}wt=wt.return}pt=wt}Yi($,_e,ht.children,rt),_e=_e.child}return _e;case 9:return ht=_e.type,at=_e.pendingProps.children,Tg(_e,rt),ht=Vg(ht),at=at(ht),_e.flags|=1,Yi($,_e,at,rt),_e.child;case 14:return at=_e.type,ht=Lg(at,_e.pendingProps),ht=Lg(at.type,ht),aj($,_e,at,ht,rt);case 15:return cj($,_e,_e.type,_e.pendingProps,rt);case 17:return at=_e.type,ht=_e.pendingProps,ht=_e.elementType===at?ht:Lg(at,ht),jj($,_e),_e.tag=1,Zf(at)?($=!0,cg(_e)):$=!1,Tg(_e,rt),ph(_e,at,ht),rh(_e,at,ht,rt),kj(null,_e,at,!0,$,rt);case 19:return yj($,_e,rt);case 22:return ej($,_e,rt)}throw Error(p$6(156,_e.tag))};function Gk($,_e){return ac($,_e)}function al($,_e,rt,at){this.tag=$,this.key=rt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=at,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg($,_e,rt,at){return new al($,_e,rt,at)}function bj($){return $=$.prototype,!(!$||!$.isReactComponent)}function $k($){if(typeof $=="function")return bj($)?1:0;if($!=null){if($=$.$$typeof,$===Da)return 11;if($===Ga)return 14}return 2}function wh($,_e){var rt=$.alternate;return rt===null?(rt=Bg($.tag,_e,$.key,$.mode),rt.elementType=$.elementType,rt.type=$.type,rt.stateNode=$.stateNode,rt.alternate=$,$.alternate=rt):(rt.pendingProps=_e,rt.type=$.type,rt.flags=0,rt.subtreeFlags=0,rt.deletions=null),rt.flags=$.flags&14680064,rt.childLanes=$.childLanes,rt.lanes=$.lanes,rt.child=$.child,rt.memoizedProps=$.memoizedProps,rt.memoizedState=$.memoizedState,rt.updateQueue=$.updateQueue,_e=$.dependencies,rt.dependencies=_e===null?null:{lanes:_e.lanes,firstContext:_e.firstContext},rt.sibling=$.sibling,rt.index=$.index,rt.ref=$.ref,rt}function yh($,_e,rt,at,ht,pt){var wt=2;if(at=$,typeof $=="function")bj($)&&(wt=1);else if(typeof $=="string")wt=5;else e:switch($){case ya:return Ah(rt.children,ht,pt,_e);case za:wt=8,ht|=8;break;case Aa:return $=Bg(12,rt,_e,ht|2),$.elementType=Aa,$.lanes=pt,$;case Ea:return $=Bg(13,rt,_e,ht),$.elementType=Ea,$.lanes=pt,$;case Fa:return $=Bg(19,rt,_e,ht),$.elementType=Fa,$.lanes=pt,$;case Ia:return qj(rt,ht,pt,_e);default:if(typeof $=="object"&&$!==null)switch($.$$typeof){case Ba:wt=10;break e;case Ca:wt=9;break e;case Da:wt=11;break e;case Ga:wt=14;break e;case Ha:wt=16,at=null;break e}throw Error(p$6(130,$==null?$:typeof $,""))}return _e=Bg(wt,rt,_e,ht),_e.elementType=$,_e.type=at,_e.lanes=pt,_e}function Ah($,_e,rt,at){return $=Bg(7,$,at,_e),$.lanes=rt,$}function qj($,_e,rt,at){return $=Bg(22,$,at,_e),$.elementType=Ia,$.lanes=rt,$.stateNode={isHidden:!1},$}function xh($,_e,rt){return $=Bg(6,$,null,_e),$.lanes=rt,$}function zh($,_e,rt){return _e=Bg(4,$.children!==null?$.children:[],$.key,_e),_e.lanes=rt,_e.stateNode={containerInfo:$.containerInfo,pendingChildren:null,implementation:$.implementation},_e}function bl($,_e,rt,at,ht){this.tag=_e,this.containerInfo=$,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=at,this.onRecoverableError=ht,this.mutableSourceEagerHydrationData=null}function cl($,_e,rt,at,ht,pt,wt,st,Tt){return $=new bl($,_e,rt,st,Tt),_e===1?(_e=1,pt===!0&&(_e|=8)):_e=0,pt=Bg(3,null,null,_e),$.current=pt,pt.stateNode=$,pt.memoizedState={element:at,isDehydrated:rt,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(pt),$}function dl($,_e,rt){var at=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:at==null?null:""+at,children:$,containerInfo:_e,implementation:rt}}function el($){if(!$)return Vf;$=$._reactInternals;e:{if(Vb($)!==$||$.tag!==1)throw Error(p$6(170));var _e=$;do{switch(_e.tag){case 3:_e=_e.stateNode.context;break e;case 1:if(Zf(_e.type)){_e=_e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_e=_e.return}while(_e!==null);throw Error(p$6(171))}if($.tag===1){var rt=$.type;if(Zf(rt))return bg($,rt,_e)}return _e}function fl($,_e,rt,at,ht,pt,wt,st,Tt){return $=cl(rt,at,!0,$,ht,pt,wt,st,Tt),$.context=el(null),rt=$.current,at=L$1(),ht=lh(rt),pt=ch(at,ht),pt.callback=_e??null,dh(rt,pt,ht),$.current.lanes=ht,Ac($,ht,at),Ek($,at),$}function gl($,_e,rt,at){var ht=_e.current,pt=L$1(),wt=lh(ht);return rt=el(rt),_e.context===null?_e.context=rt:_e.pendingContext=rt,_e=ch(pt,wt),_e.payload={element:$},at=at===void 0?null:at,at!==null&&(_e.callback=at),$=dh(ht,_e,wt),$!==null&&(mh($,ht,wt,pt),eh($,ht,wt)),wt}function hl($){if($=$.current,!$.child)return null;switch($.child.tag){case 5:return $.child.stateNode;default:return $.child.stateNode}}function il($,_e){if($=$.memoizedState,$!==null&&$.dehydrated!==null){var rt=$.retryLane;$.retryLane=rt!==0&&rt<_e?rt:_e}}function jl($,_e){il($,_e),($=$.alternate)&&il($,_e)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function($){console.error($)};function ml($){this._internalRoot=$}nl.prototype.render=ml.prototype.render=function($){var _e=this._internalRoot;if(_e===null)throw Error(p$6(409));gl($,_e,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var $=this._internalRoot;if($!==null){this._internalRoot=null;var _e=$.containerInfo;Sk(function(){gl(null,$,null,null)}),_e[uf]=null}};function nl($){this._internalRoot=$}nl.prototype.unstable_scheduleHydration=function($){if($){var _e=Hc();$={blockedOn:null,target:$,priority:_e};for(var rt=0;rt<Qc.length&&_e!==0&&_e<Qc[rt].priority;rt++);Qc.splice(rt,0,$),rt===0&&Vc($)}};function ol($){return!(!$||$.nodeType!==1&&$.nodeType!==9&&$.nodeType!==11)}function pl($){return!(!$||$.nodeType!==1&&$.nodeType!==9&&$.nodeType!==11&&($.nodeType!==8||$.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl($,_e,rt,at,ht){if(ht){if(typeof at=="function"){var pt=at;at=function(){var kt=hl(wt);pt.call(kt)}}var wt=fl(_e,at,$,0,null,!1,!1,"",ql);return $._reactRootContainer=wt,$[uf]=wt.current,sf($.nodeType===8?$.parentNode:$),Sk(),wt}for(;ht=$.lastChild;)$.removeChild(ht);if(typeof at=="function"){var st=at;at=function(){var kt=hl(Tt);st.call(kt)}}var Tt=cl($,0,!1,null,null,!1,!1,"",ql);return $._reactRootContainer=Tt,$[uf]=Tt.current,sf($.nodeType===8?$.parentNode:$),Sk(function(){gl(_e,Tt,rt,at)}),Tt}function sl($,_e,rt,at,ht){var pt=rt._reactRootContainer;if(pt){var wt=pt;if(typeof ht=="function"){var st=ht;ht=function(){var Tt=hl(wt);st.call(Tt)}}gl(_e,wt,$,ht)}else wt=rl(rt,_e,$,ht,at);return hl(wt)}Ec=function($){switch($.tag){case 3:var _e=$.stateNode;if(_e.current.memoizedState.isDehydrated){var rt=tc(_e.pendingLanes);rt!==0&&(Cc(_e,rt|1),Ek(_e,B$1()),!(K&6)&&(Hj=B$1()+500,jg()))}break;case 13:Sk(function(){var at=Zg($,1);if(at!==null){var ht=L$1();mh(at,$,1,ht)}}),jl($,1)}};Fc=function($){if($.tag===13){var _e=Zg($,134217728);if(_e!==null){var rt=L$1();mh(_e,$,134217728,rt)}jl($,134217728)}};Gc=function($){if($.tag===13){var _e=lh($),rt=Zg($,_e);if(rt!==null){var at=L$1();mh(rt,$,_e,at)}jl($,_e)}};Hc=function(){return C};Ic=function($,_e){var rt=C;try{return C=$,_e()}finally{C=rt}};yb=function($,_e,rt){switch(_e){case"input":if(bb($,rt),_e=rt.name,rt.type==="radio"&&_e!=null){for(rt=$;rt.parentNode;)rt=rt.parentNode;for(rt=rt.querySelectorAll("input[name="+JSON.stringify(""+_e)+'][type="radio"]'),_e=0;_e<rt.length;_e++){var at=rt[_e];if(at!==$&&at.form===$.form){var ht=Db(at);if(!ht)throw Error(p$6(90));Wa(at),bb(at,ht)}}}break;case"textarea":ib($,rt);break;case"select":_e=rt.value,_e!=null&&fb($,!!rt.multiple,_e,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function($){return $=Zb($),$===null?null:$.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function($,_e){var rt=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(_e))throw Error(p$6(200));return dl($,_e,null,rt)};reactDom_production_min.createRoot=function($,_e){if(!ol($))throw Error(p$6(299));var rt=!1,at="",ht=ll;return _e!=null&&(_e.unstable_strictMode===!0&&(rt=!0),_e.identifierPrefix!==void 0&&(at=_e.identifierPrefix),_e.onRecoverableError!==void 0&&(ht=_e.onRecoverableError)),_e=cl($,1,!1,null,null,rt,!1,at,ht),$[uf]=_e.current,sf($.nodeType===8?$.parentNode:$),new ml(_e)};reactDom_production_min.findDOMNode=function($){if($==null)return null;if($.nodeType===1)return $;var _e=$._reactInternals;if(_e===void 0)throw typeof $.render=="function"?Error(p$6(188)):($=Object.keys($).join(","),Error(p$6(268,$)));return $=Zb(_e),$=$===null?null:$.stateNode,$};reactDom_production_min.flushSync=function($){return Sk($)};reactDom_production_min.hydrate=function($,_e,rt){if(!pl(_e))throw Error(p$6(200));return sl(null,$,_e,!0,rt)};reactDom_production_min.hydrateRoot=function($,_e,rt){if(!ol($))throw Error(p$6(405));var at=rt!=null&&rt.hydratedSources||null,ht=!1,pt="",wt=ll;if(rt!=null&&(rt.unstable_strictMode===!0&&(ht=!0),rt.identifierPrefix!==void 0&&(pt=rt.identifierPrefix),rt.onRecoverableError!==void 0&&(wt=rt.onRecoverableError)),_e=fl(_e,null,$,1,rt??null,ht,!1,pt,wt),$[uf]=_e.current,sf($),at)for($=0;$<at.length;$++)rt=at[$],ht=rt._getVersion,ht=ht(rt._source),_e.mutableSourceEagerHydrationData==null?_e.mutableSourceEagerHydrationData=[rt,ht]:_e.mutableSourceEagerHydrationData.push(rt,ht);return new nl(_e)};reactDom_production_min.render=function($,_e,rt){if(!pl(_e))throw Error(p$6(200));return sl(null,$,_e,!1,rt)};reactDom_production_min.unmountComponentAtNode=function($){if(!pl($))throw Error(p$6(40));return $._reactRootContainer?(Sk(function(){sl(null,null,$,!1,function(){$._reactRootContainer=null,$[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function($,_e,rt,at){if(!pl(rt))throw Error(p$6(200));if($==null||$._reactInternals===void 0)throw Error(p$6(38));return sl($,_e,rt,!1,at)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch($){console.error($)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var m$6=reactDomExports;client.createRoot=m$6.createRoot,client.hydrateRoot=m$6.hydrateRoot;const scriptRel="modulepreload",assetsURL=function($){return"/"+$},seen={},__vitePreload=function(_e,rt,at){if(!rt||rt.length===0)return _e();const ht=document.getElementsByTagName("link");return Promise.all(rt.map(pt=>{if(pt=assetsURL(pt),pt in seen)return;seen[pt]=!0;const wt=pt.endsWith(".css"),st=wt?'[rel="stylesheet"]':"";if(!!at)for(let Mt=ht.length-1;Mt>=0;Mt--){const Dt=ht[Mt];if(Dt.href===pt&&(!wt||Dt.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${pt}"]${st}`))return;const kt=document.createElement("link");if(kt.rel=wt?"stylesheet":scriptRel,wt||(kt.as="script",kt.crossOrigin=""),kt.href=pt,document.head.appendChild(kt),wt)return new Promise((Mt,Dt)=>{kt.addEventListener("load",Mt),kt.addEventListener("error",()=>Dt(new Error(`Unable to preload CSS for ${pt}`)))})})).then(()=>_e()).catch(pt=>{const wt=new Event("vite:preloadError",{cancelable:!0});if(wt.payload=pt,window.dispatchEvent(wt),!wt.defaultPrevented)throw pt})};function _setPrototypeOf$1($,_e){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(at,ht){return at.__proto__=ht,at},_setPrototypeOf$1($,_e)}function _inheritsLoose($,_e){$.prototype=Object.create(_e.prototype),$.prototype.constructor=$,_setPrototypeOf$1($,_e)}var propTypes$3={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function $(at,ht,pt,wt,st,Tt){if(Tt!==ReactPropTypesSecret){var kt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw kt.name="Invariant Violation",kt}}$.isRequired=$;function _e(){return $}var rt={array:$,bigint:$,bool:$,func:$,number:$,object:$,string:$,symbol:$,any:$,arrayOf:_e,element:$,elementType:$,instanceOf:_e,node:$,objectOf:_e,oneOf:_e,oneOfType:_e,shape:_e,exact:_e,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return rt.PropTypes=rt,rt};propTypes$3.exports=factoryWithThrowingShims();var propTypesExports=propTypes$3.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);function _extends(){return _extends=Object.assign?Object.assign.bind():function($){for(var _e=1;_e<arguments.length;_e++){var rt=arguments[_e];for(var at in rt)Object.prototype.hasOwnProperty.call(rt,at)&&($[at]=rt[at])}return $},_extends.apply(this,arguments)}function isAbsolute($){return $.charAt(0)==="/"}function spliceOne($,_e){for(var rt=_e,at=rt+1,ht=$.length;at<ht;rt+=1,at+=1)$[rt]=$[at];$.pop()}function resolvePathname($,_e){_e===void 0&&(_e="");var rt=$&&$.split("/")||[],at=_e&&_e.split("/")||[],ht=$&&isAbsolute($),pt=_e&&isAbsolute(_e),wt=ht||pt;if($&&isAbsolute($)?at=rt:rt.length&&(at.pop(),at=at.concat(rt)),!at.length)return"/";var st;if(at.length){var Tt=at[at.length-1];st=Tt==="."||Tt===".."||Tt===""}else st=!1;for(var kt=0,Mt=at.length;Mt>=0;Mt--){var Dt=at[Mt];Dt==="."?spliceOne(at,Mt):Dt===".."?(spliceOne(at,Mt),kt++):kt&&(spliceOne(at,Mt),kt--)}if(!wt)for(;kt--;kt)at.unshift("..");wt&&at[0]!==""&&(!at[0]||!isAbsolute(at[0]))&&at.unshift("");var Ot=at.join("/");return st&&Ot.substr(-1)!=="/"&&(Ot+="/"),Ot}function valueOf($){return $.valueOf?$.valueOf():Object.prototype.valueOf.call($)}function valueEqual($,_e){if($===_e)return!0;if($==null||_e==null)return!1;if(Array.isArray($))return Array.isArray(_e)&&$.length===_e.length&&$.every(function(ht,pt){return valueEqual(ht,_e[pt])});if(typeof $=="object"||typeof _e=="object"){var rt=valueOf($),at=valueOf(_e);return rt!==$||at!==_e?valueEqual(rt,at):Object.keys(Object.assign({},$,_e)).every(function(ht){return valueEqual($[ht],_e[ht])})}return!1}var isProduction=!0,prefix="Invariant failed";function invariant($,_e){if(!$){if(isProduction)throw new Error(prefix);var rt=typeof _e=="function"?_e():_e,at=rt?"".concat(prefix,": ").concat(rt):prefix;throw new Error(at)}}const tinyInvariant=Object.freeze(Object.defineProperty({__proto__:null,default:invariant},Symbol.toStringTag,{value:"Module"}));function addLeadingSlash$1($){return $.charAt(0)==="/"?$:"/"+$}function stripLeadingSlash($){return $.charAt(0)==="/"?$.substr(1):$}function hasBasename($,_e){return $.toLowerCase().indexOf(_e.toLowerCase())===0&&"/?#".indexOf($.charAt(_e.length))!==-1}function stripBasename$1($,_e){return hasBasename($,_e)?$.substr(_e.length):$}function stripTrailingSlash($){return $.charAt($.length-1)==="/"?$.slice(0,-1):$}function parsePath($){var _e=$||"/",rt="",at="",ht=_e.indexOf("#");ht!==-1&&(at=_e.substr(ht),_e=_e.substr(0,ht));var pt=_e.indexOf("?");return pt!==-1&&(rt=_e.substr(pt),_e=_e.substr(0,pt)),{pathname:_e,search:rt==="?"?"":rt,hash:at==="#"?"":at}}function createPath($){var _e=$.pathname,rt=$.search,at=$.hash,ht=_e||"/";return rt&&rt!=="?"&&(ht+=rt.charAt(0)==="?"?rt:"?"+rt),at&&at!=="#"&&(ht+=at.charAt(0)==="#"?at:"#"+at),ht}function createLocation($,_e,rt,at){var ht;typeof $=="string"?(ht=parsePath($),ht.state=_e):(ht=_extends({},$),ht.pathname===void 0&&(ht.pathname=""),ht.search?ht.search.charAt(0)!=="?"&&(ht.search="?"+ht.search):ht.search="",ht.hash?ht.hash.charAt(0)!=="#"&&(ht.hash="#"+ht.hash):ht.hash="",_e!==void 0&&ht.state===void 0&&(ht.state=_e));try{ht.pathname=decodeURI(ht.pathname)}catch(pt){throw pt instanceof URIError?new URIError('Pathname "'+ht.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):pt}return rt&&(ht.key=rt),at?ht.pathname?ht.pathname.charAt(0)!=="/"&&(ht.pathname=resolvePathname(ht.pathname,at.pathname)):ht.pathname=at.pathname:ht.pathname||(ht.pathname="/"),ht}function locationsAreEqual($,_e){return $.pathname===_e.pathname&&$.search===_e.search&&$.hash===_e.hash&&$.key===_e.key&&valueEqual($.state,_e.state)}function createTransitionManager(){var $=null;function _e(wt){return $=wt,function(){$===wt&&($=null)}}function rt(wt,st,Tt,kt){if($!=null){var Mt=typeof $=="function"?$(wt,st):$;typeof Mt=="string"?typeof Tt=="function"?Tt(Mt,kt):kt(!0):kt(Mt!==!1)}else kt(!0)}var at=[];function ht(wt){var st=!0;function Tt(){st&&wt.apply(void 0,arguments)}return at.push(Tt),function(){st=!1,at=at.filter(function(kt){return kt!==Tt})}}function pt(){for(var wt=arguments.length,st=new Array(wt),Tt=0;Tt<wt;Tt++)st[Tt]=arguments[Tt];at.forEach(function(kt){return kt.apply(void 0,st)})}return{setPrompt:_e,confirmTransitionTo:rt,appendListener:ht,notifyListeners:pt}}var canUseDOM$2=!!(typeof window<"u"&&window.document&&window.document.createElement);function getConfirmation($,_e){_e(window.confirm($))}function supportsHistory(){var $=window.navigator.userAgent;return($.indexOf("Android 2.")!==-1||$.indexOf("Android 4.0")!==-1)&&$.indexOf("Mobile Safari")!==-1&&$.indexOf("Chrome")===-1&&$.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function supportsPopStateOnHashChange(){return window.navigator.userAgent.indexOf("Trident")===-1}function supportsGoWithoutReloadUsingHash(){return window.navigator.userAgent.indexOf("Firefox")===-1}function isExtraneousPopstateEvent($){return $.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}var PopStateEvent="popstate",HashChangeEvent="hashchange";function getHistoryState(){try{return window.history.state||{}}catch{return{}}}function createBrowserHistory($){$===void 0&&($={}),canUseDOM$2||invariant(!1);var _e=window.history,rt=supportsHistory(),at=!supportsPopStateOnHashChange(),ht=$,pt=ht.forceRefresh,wt=pt===void 0?!1:pt,st=ht.getUserConfirmation,Tt=st===void 0?getConfirmation:st,kt=ht.keyLength,Mt=kt===void 0?6:kt,Dt=$.basename?stripTrailingSlash(addLeadingSlash$1($.basename)):"";function Ot(Gr){var Or=Gr||{},sn=Or.key,ln=Or.state,kn=window.location,Bn=kn.pathname,Fn=kn.search,Nn=kn.hash,Kn=Bn+Fn+Nn;return Dt&&(Kn=stripBasename$1(Kn,Dt)),createLocation(Kn,ln,sn)}function Ut(){return Math.random().toString(36).substr(2,Mt)}var qt=createTransitionManager();function tr(Gr){_extends(Pr,Gr),Pr.length=_e.length,qt.notifyListeners(Pr.location,Pr.action)}function ar(Gr){isExtraneousPopstateEvent(Gr)||Jt(Ot(Gr.state))}function Yt(){Jt(Ot(getHistoryState()))}var Kt=!1;function Jt(Gr){if(Kt)Kt=!1,tr();else{var Or="POP";qt.confirmTransitionTo(Gr,Or,Tt,function(sn){sn?tr({action:Or,location:Gr}):pr(Gr)})}}function pr(Gr){var Or=Pr.location,sn=Er.indexOf(Or.key);sn===-1&&(sn=0);var ln=Er.indexOf(Gr.key);ln===-1&&(ln=0);var kn=sn-ln;kn&&(Kt=!0,Zr(kn))}var Sr=Ot(getHistoryState()),Er=[Sr.key];function Rr(Gr){return Dt+createPath(Gr)}function Lr(Gr,Or){var sn="PUSH",ln=createLocation(Gr,Or,Ut(),Pr.location);qt.confirmTransitionTo(ln,sn,Tt,function(kn){if(kn){var Bn=Rr(ln),Fn=ln.key,Nn=ln.state;if(rt)if(_e.pushState({key:Fn,state:Nn},null,Bn),wt)window.location.href=Bn;else{var Kn=Er.indexOf(Pr.location.key),uo=Er.slice(0,Kn+1);uo.push(ln.key),Er=uo,tr({action:sn,location:ln})}else window.location.href=Bn}})}function Mr(Gr,Or){var sn="REPLACE",ln=createLocation(Gr,Or,Ut(),Pr.location);qt.confirmTransitionTo(ln,sn,Tt,function(kn){if(kn){var Bn=Rr(ln),Fn=ln.key,Nn=ln.state;if(rt)if(_e.replaceState({key:Fn,state:Nn},null,Bn),wt)window.location.replace(Bn);else{var Kn=Er.indexOf(Pr.location.key);Kn!==-1&&(Er[Kn]=ln.key),tr({action:sn,location:ln})}else window.location.replace(Bn)}})}function Zr(Gr){_e.go(Gr)}function dn(){Zr(-1)}function Jr(){Zr(1)}var wr=0;function Xr(Gr){wr+=Gr,wr===1&&Gr===1?(window.addEventListener(PopStateEvent,ar),at&&window.addEventListener(HashChangeEvent,Yt)):wr===0&&(window.removeEventListener(PopStateEvent,ar),at&&window.removeEventListener(HashChangeEvent,Yt))}var Dr=!1;function xn(Gr){Gr===void 0&&(Gr=!1);var Or=qt.setPrompt(Gr);return Dr||(Xr(1),Dr=!0),function(){return Dr&&(Dr=!1,Xr(-1)),Or()}}function gn(Gr){var Or=qt.appendListener(Gr);return Xr(1),function(){Xr(-1),Or()}}var Pr={length:_e.length,action:"POP",location:Sr,createHref:Rr,push:Lr,replace:Mr,go:Zr,goBack:dn,goForward:Jr,block:xn,listen:gn};return Pr}var HashChangeEvent$1="hashchange",HashPathCoders={hashbang:{encodePath:function(_e){return _e.charAt(0)==="!"?_e:"!/"+stripLeadingSlash(_e)},decodePath:function(_e){return _e.charAt(0)==="!"?_e.substr(1):_e}},noslash:{encodePath:stripLeadingSlash,decodePath:addLeadingSlash$1},slash:{encodePath:addLeadingSlash$1,decodePath:addLeadingSlash$1}};function stripHash($){var _e=$.indexOf("#");return _e===-1?$:$.slice(0,_e)}function getHashPath(){var $=window.location.href,_e=$.indexOf("#");return _e===-1?"":$.substring(_e+1)}function pushHashPath($){window.location.hash=$}function replaceHashPath($){window.location.replace(stripHash(window.location.href)+"#"+$)}function createHashHistory($){$===void 0&&($={}),canUseDOM$2||invariant(!1);var _e=window.history;supportsGoWithoutReloadUsingHash();var rt=$,at=rt.getUserConfirmation,ht=at===void 0?getConfirmation:at,pt=rt.hashType,wt=pt===void 0?"slash":pt,st=$.basename?stripTrailingSlash(addLeadingSlash$1($.basename)):"",Tt=HashPathCoders[wt],kt=Tt.encodePath,Mt=Tt.decodePath;function Dt(){var Or=Mt(getHashPath());return st&&(Or=stripBasename$1(Or,st)),createLocation(Or)}var Ot=createTransitionManager();function Ut(Or){_extends(Gr,Or),Gr.length=_e.length,Ot.notifyListeners(Gr.location,Gr.action)}var qt=!1,tr=null;function ar(Or,sn){return Or.pathname===sn.pathname&&Or.search===sn.search&&Or.hash===sn.hash}function Yt(){var Or=getHashPath(),sn=kt(Or);if(Or!==sn)replaceHashPath(sn);else{var ln=Dt(),kn=Gr.location;if(!qt&&ar(kn,ln)||tr===createPath(ln))return;tr=null,Kt(ln)}}function Kt(Or){if(qt)qt=!1,Ut();else{var sn="POP";Ot.confirmTransitionTo(Or,sn,ht,function(ln){ln?Ut({action:sn,location:Or}):Jt(Or)})}}function Jt(Or){var sn=Gr.location,ln=Rr.lastIndexOf(createPath(sn));ln===-1&&(ln=0);var kn=Rr.lastIndexOf(createPath(Or));kn===-1&&(kn=0);var Bn=ln-kn;Bn&&(qt=!0,dn(Bn))}var pr=getHashPath(),Sr=kt(pr);pr!==Sr&&replaceHashPath(Sr);var Er=Dt(),Rr=[createPath(Er)];function Lr(Or){var sn=document.querySelector("base"),ln="";return sn&&sn.getAttribute("href")&&(ln=stripHash(window.location.href)),ln+"#"+kt(st+createPath(Or))}function Mr(Or,sn){var ln="PUSH",kn=createLocation(Or,void 0,void 0,Gr.location);Ot.confirmTransitionTo(kn,ln,ht,function(Bn){if(Bn){var Fn=createPath(kn),Nn=kt(st+Fn),Kn=getHashPath()!==Nn;if(Kn){tr=Fn,pushHashPath(Nn);var uo=Rr.lastIndexOf(createPath(Gr.location)),vo=Rr.slice(0,uo+1);vo.push(Fn),Rr=vo,Ut({action:ln,location:kn})}else Ut()}})}function Zr(Or,sn){var ln="REPLACE",kn=createLocation(Or,void 0,void 0,Gr.location);Ot.confirmTransitionTo(kn,ln,ht,function(Bn){if(Bn){var Fn=createPath(kn),Nn=kt(st+Fn),Kn=getHashPath()!==Nn;Kn&&(tr=Fn,replaceHashPath(Nn));var uo=Rr.indexOf(createPath(Gr.location));uo!==-1&&(Rr[uo]=Fn),Ut({action:ln,location:kn})}})}function dn(Or){_e.go(Or)}function Jr(){dn(-1)}function wr(){dn(1)}var Xr=0;function Dr(Or){Xr+=Or,Xr===1&&Or===1?window.addEventListener(HashChangeEvent$1,Yt):Xr===0&&window.removeEventListener(HashChangeEvent$1,Yt)}var xn=!1;function gn(Or){Or===void 0&&(Or=!1);var sn=Ot.setPrompt(Or);return xn||(Dr(1),xn=!0),function(){return xn&&(xn=!1,Dr(-1)),sn()}}function Pr(Or){var sn=Ot.appendListener(Or);return Dr(1),function(){Dr(-1),sn()}}var Gr={length:_e.length,action:"POP",location:Er,createHref:Lr,push:Mr,replace:Zr,go:dn,goBack:Jr,goForward:wr,block:gn,listen:Pr};return Gr}function clamp($,_e,rt){return Math.min(Math.max($,_e),rt)}function createMemoryHistory($){$===void 0&&($={});var _e=$,rt=_e.getUserConfirmation,at=_e.initialEntries,ht=at===void 0?["/"]:at,pt=_e.initialIndex,wt=pt===void 0?0:pt,st=_e.keyLength,Tt=st===void 0?6:st,kt=createTransitionManager();function Mt(Lr){_extends(Rr,Lr),Rr.length=Rr.entries.length,kt.notifyListeners(Rr.location,Rr.action)}function Dt(){return Math.random().toString(36).substr(2,Tt)}var Ot=clamp(wt,0,ht.length-1),Ut=ht.map(function(Lr){return typeof Lr=="string"?createLocation(Lr,void 0,Dt()):createLocation(Lr,void 0,Lr.key||Dt())}),qt=createPath;function tr(Lr,Mr){var Zr="PUSH",dn=createLocation(Lr,Mr,Dt(),Rr.location);kt.confirmTransitionTo(dn,Zr,rt,function(Jr){if(Jr){var wr=Rr.index,Xr=wr+1,Dr=Rr.entries.slice(0);Dr.length>Xr?Dr.splice(Xr,Dr.length-Xr,dn):Dr.push(dn),Mt({action:Zr,location:dn,index:Xr,entries:Dr})}})}function ar(Lr,Mr){var Zr="REPLACE",dn=createLocation(Lr,Mr,Dt(),Rr.location);kt.confirmTransitionTo(dn,Zr,rt,function(Jr){Jr&&(Rr.entries[Rr.index]=dn,Mt({action:Zr,location:dn}))})}function Yt(Lr){var Mr=clamp(Rr.index+Lr,0,Rr.entries.length-1),Zr="POP",dn=Rr.entries[Mr];kt.confirmTransitionTo(dn,Zr,rt,function(Jr){Jr?Mt({action:Zr,location:dn,index:Mr}):Mt()})}function Kt(){Yt(-1)}function Jt(){Yt(1)}function pr(Lr){var Mr=Rr.index+Lr;return Mr>=0&&Mr<Rr.entries.length}function Sr(Lr){return Lr===void 0&&(Lr=!1),kt.setPrompt(Lr)}function Er(Lr){return kt.appendListener(Lr)}var Rr={length:Ut.length,action:"POP",location:Ut[Ot],index:Ot,entries:Ut,createHref:qt,push:tr,replace:ar,go:Yt,goBack:Kt,goForward:Jt,canGo:pr,block:Sr,listen:Er};return Rr}const history=Object.freeze(Object.defineProperty({__proto__:null,createBrowserHistory,createHashHistory,createLocation,createMemoryHistory,createPath,locationsAreEqual,parsePath},Symbol.toStringTag,{value:"Module"}));var pathToRegexp$2={exports:{}},isarray$1=Array.isArray||function($){return Object.prototype.toString.call($)=="[object Array]"},isarray=isarray$1;pathToRegexp$2.exports=pathToRegexp;pathToRegexp$2.exports.parse=parse;pathToRegexp$2.exports.compile=compile;pathToRegexp$2.exports.tokensToFunction=tokensToFunction;pathToRegexp$2.exports.tokensToRegExp=tokensToRegExp;var PATH_REGEXP=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function parse($,_e){for(var rt=[],at=0,ht=0,pt="",wt=_e&&_e.delimiter||"/",st;(st=PATH_REGEXP.exec($))!=null;){var Tt=st[0],kt=st[1],Mt=st.index;if(pt+=$.slice(ht,Mt),ht=Mt+Tt.length,kt){pt+=kt[1];continue}var Dt=$[ht],Ot=st[2],Ut=st[3],qt=st[4],tr=st[5],ar=st[6],Yt=st[7];pt&&(rt.push(pt),pt="");var Kt=Ot!=null&&Dt!=null&&Dt!==Ot,Jt=ar==="+"||ar==="*",pr=ar==="?"||ar==="*",Sr=st[2]||wt,Er=qt||tr;rt.push({name:Ut||at++,prefix:Ot||"",delimiter:Sr,optional:pr,repeat:Jt,partial:Kt,asterisk:!!Yt,pattern:Er?escapeGroup(Er):Yt?".*":"[^"+escapeString(Sr)+"]+?"})}return ht<$.length&&(pt+=$.substr(ht)),pt&&rt.push(pt),rt}function compile($,_e){return tokensToFunction(parse($,_e),_e)}function encodeURIComponentPretty($){return encodeURI($).replace(/[\/?#]/g,function(_e){return"%"+_e.charCodeAt(0).toString(16).toUpperCase()})}function encodeAsterisk($){return encodeURI($).replace(/[?#]/g,function(_e){return"%"+_e.charCodeAt(0).toString(16).toUpperCase()})}function tokensToFunction($,_e){for(var rt=new Array($.length),at=0;at<$.length;at++)typeof $[at]=="object"&&(rt[at]=new RegExp("^(?:"+$[at].pattern+")$",flags(_e)));return function(ht,pt){for(var wt="",st=ht||{},Tt=pt||{},kt=Tt.pretty?encodeURIComponentPretty:encodeURIComponent,Mt=0;Mt<$.length;Mt++){var Dt=$[Mt];if(typeof Dt=="string"){wt+=Dt;continue}var Ot=st[Dt.name],Ut;if(Ot==null)if(Dt.optional){Dt.partial&&(wt+=Dt.prefix);continue}else throw new TypeError('Expected "'+Dt.name+'" to be defined');if(isarray(Ot)){if(!Dt.repeat)throw new TypeError('Expected "'+Dt.name+'" to not repeat, but received `'+JSON.stringify(Ot)+"`");if(Ot.length===0){if(Dt.optional)continue;throw new TypeError('Expected "'+Dt.name+'" to not be empty')}for(var qt=0;qt<Ot.length;qt++){if(Ut=kt(Ot[qt]),!rt[Mt].test(Ut))throw new TypeError('Expected all "'+Dt.name+'" to match "'+Dt.pattern+'", but received `'+JSON.stringify(Ut)+"`");wt+=(qt===0?Dt.prefix:Dt.delimiter)+Ut}continue}if(Ut=Dt.asterisk?encodeAsterisk(Ot):kt(Ot),!rt[Mt].test(Ut))throw new TypeError('Expected "'+Dt.name+'" to match "'+Dt.pattern+'", but received "'+Ut+'"');wt+=Dt.prefix+Ut}return wt}}function escapeString($){return $.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function escapeGroup($){return $.replace(/([=!:$\/()])/g,"\\$1")}function attachKeys($,_e){return $.keys=_e,$}function flags($){return $&&$.sensitive?"":"i"}function regexpToRegexp($,_e){var rt=$.source.match(/\((?!\?)/g);if(rt)for(var at=0;at<rt.length;at++)_e.push({name:at,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return attachKeys($,_e)}function arrayToRegexp($,_e,rt){for(var at=[],ht=0;ht<$.length;ht++)at.push(pathToRegexp($[ht],_e,rt).source);var pt=new RegExp("(?:"+at.join("|")+")",flags(rt));return attachKeys(pt,_e)}function stringToRegexp($,_e,rt){return tokensToRegExp(parse($,rt),_e,rt)}function tokensToRegExp($,_e,rt){isarray(_e)||(rt=_e||rt,_e=[]),rt=rt||{};for(var at=rt.strict,ht=rt.end!==!1,pt="",wt=0;wt<$.length;wt++){var st=$[wt];if(typeof st=="string")pt+=escapeString(st);else{var Tt=escapeString(st.prefix),kt="(?:"+st.pattern+")";_e.push(st),st.repeat&&(kt+="(?:"+Tt+kt+")*"),st.optional?st.partial?kt=Tt+"("+kt+")?":kt="(?:"+Tt+"("+kt+"))?":kt=Tt+"("+kt+")",pt+=kt}}var Mt=escapeString(rt.delimiter||"/"),Dt=pt.slice(-Mt.length)===Mt;return at||(pt=(Dt?pt.slice(0,-Mt.length):pt)+"(?:"+Mt+"(?=$))?"),ht?pt+="$":pt+=at&&Dt?"":"(?="+Mt+"|$)",attachKeys(new RegExp("^"+pt,flags(rt)),_e)}function pathToRegexp($,_e,rt){return isarray(_e)||(rt=_e||rt,_e=[]),rt=rt||{},$ instanceof RegExp?regexpToRegexp($,_e):isarray($)?arrayToRegexp($,_e,rt):stringToRegexp($,_e,rt)}var pathToRegexpExports=pathToRegexp$2.exports;const pathToRegexp$1=getDefaultExportFromCjs(pathToRegexpExports);var reactIs_production_min$2={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$3=typeof Symbol=="function"&&Symbol.for,c$3=b$3?Symbol.for("react.element"):60103,d$3=b$3?Symbol.for("react.portal"):60106,e$3=b$3?Symbol.for("react.fragment"):60107,f$3=b$3?Symbol.for("react.strict_mode"):60108,g$3=b$3?Symbol.for("react.profiler"):60114,h$5=b$3?Symbol.for("react.provider"):60109,k$4=b$3?Symbol.for("react.context"):60110,l$4=b$3?Symbol.for("react.async_mode"):60111,m$5=b$3?Symbol.for("react.concurrent_mode"):60111,n$5=b$3?Symbol.for("react.forward_ref"):60112,p$5=b$3?Symbol.for("react.suspense"):60113,q$5=b$3?Symbol.for("react.suspense_list"):60120,r$4=b$3?Symbol.for("react.memo"):60115,t$5=b$3?Symbol.for("react.lazy"):60116,v$4=b$3?Symbol.for("react.block"):60121,w$3=b$3?Symbol.for("react.fundamental"):60117,x$2=b$3?Symbol.for("react.responder"):60118,y$2=b$3?Symbol.for("react.scope"):60119;function z$2($){if(typeof $=="object"&&$!==null){var _e=$.$$typeof;switch(_e){case c$3:switch($=$.type,$){case l$4:case m$5:case e$3:case g$3:case f$3:case p$5:return $;default:switch($=$&&$.$$typeof,$){case k$4:case n$5:case t$5:case r$4:case h$5:return $;default:return _e}}case d$3:return _e}}}function A$2($){return z$2($)===m$5}reactIs_production_min$2.AsyncMode=l$4;reactIs_production_min$2.ConcurrentMode=m$5;reactIs_production_min$2.ContextConsumer=k$4;reactIs_production_min$2.ContextProvider=h$5;reactIs_production_min$2.Element=c$3;reactIs_production_min$2.ForwardRef=n$5;reactIs_production_min$2.Fragment=e$3;reactIs_production_min$2.Lazy=t$5;reactIs_production_min$2.Memo=r$4;reactIs_production_min$2.Portal=d$3;reactIs_production_min$2.Profiler=g$3;reactIs_production_min$2.StrictMode=f$3;reactIs_production_min$2.Suspense=p$5;reactIs_production_min$2.isAsyncMode=function($){return A$2($)||z$2($)===l$4};reactIs_production_min$2.isConcurrentMode=A$2;reactIs_production_min$2.isContextConsumer=function($){return z$2($)===k$4};reactIs_production_min$2.isContextProvider=function($){return z$2($)===h$5};reactIs_production_min$2.isElement=function($){return typeof $=="object"&&$!==null&&$.$$typeof===c$3};reactIs_production_min$2.isForwardRef=function($){return z$2($)===n$5};reactIs_production_min$2.isFragment=function($){return z$2($)===e$3};reactIs_production_min$2.isLazy=function($){return z$2($)===t$5};reactIs_production_min$2.isMemo=function($){return z$2($)===r$4};reactIs_production_min$2.isPortal=function($){return z$2($)===d$3};reactIs_production_min$2.isProfiler=function($){return z$2($)===g$3};reactIs_production_min$2.isStrictMode=function($){return z$2($)===f$3};reactIs_production_min$2.isSuspense=function($){return z$2($)===p$5};reactIs_production_min$2.isValidElementType=function($){return typeof $=="string"||typeof $=="function"||$===e$3||$===m$5||$===g$3||$===f$3||$===p$5||$===q$5||typeof $=="object"&&$!==null&&($.$$typeof===t$5||$.$$typeof===r$4||$.$$typeof===h$5||$.$$typeof===k$4||$.$$typeof===n$5||$.$$typeof===w$3||$.$$typeof===x$2||$.$$typeof===y$2||$.$$typeof===v$4)};reactIs_production_min$2.typeOf=z$2;function _objectWithoutPropertiesLoose$9($,_e){if($==null)return{};var rt={},at=Object.keys($),ht,pt;for(pt=0;pt<at.length;pt++)ht=at[pt],!(_e.indexOf(ht)>=0)&&(rt[ht]=$[ht]);return rt}var reactIs$2={exports:{}},reactIs_production_min$1={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$2=typeof Symbol=="function"&&Symbol.for,c$2=b$2?Symbol.for("react.element"):60103,d$2=b$2?Symbol.for("react.portal"):60106,e$2=b$2?Symbol.for("react.fragment"):60107,f$2=b$2?Symbol.for("react.strict_mode"):60108,g$2=b$2?Symbol.for("react.profiler"):60114,h$4=b$2?Symbol.for("react.provider"):60109,k$3=b$2?Symbol.for("react.context"):60110,l$3=b$2?Symbol.for("react.async_mode"):60111,m$4=b$2?Symbol.for("react.concurrent_mode"):60111,n$4=b$2?Symbol.for("react.forward_ref"):60112,p$4=b$2?Symbol.for("react.suspense"):60113,q$4=b$2?Symbol.for("react.suspense_list"):60120,r$3=b$2?Symbol.for("react.memo"):60115,t$4=b$2?Symbol.for("react.lazy"):60116,v$3=b$2?Symbol.for("react.block"):60121,w$2=b$2?Symbol.for("react.fundamental"):60117,x$1=b$2?Symbol.for("react.responder"):60118,y$1=b$2?Symbol.for("react.scope"):60119;function z$1($){if(typeof $=="object"&&$!==null){var _e=$.$$typeof;switch(_e){case c$2:switch($=$.type,$){case l$3:case m$4:case e$2:case g$2:case f$2:case p$4:return $;default:switch($=$&&$.$$typeof,$){case k$3:case n$4:case t$4:case r$3:case h$4:return $;default:return _e}}case d$2:return _e}}}function A$1($){return z$1($)===m$4}reactIs_production_min$1.AsyncMode=l$3;reactIs_production_min$1.ConcurrentMode=m$4;reactIs_production_min$1.ContextConsumer=k$3;reactIs_production_min$1.ContextProvider=h$4;reactIs_production_min$1.Element=c$2;reactIs_production_min$1.ForwardRef=n$4;reactIs_production_min$1.Fragment=e$2;reactIs_production_min$1.Lazy=t$4;reactIs_production_min$1.Memo=r$3;reactIs_production_min$1.Portal=d$2;reactIs_production_min$1.Profiler=g$2;reactIs_production_min$1.StrictMode=f$2;reactIs_production_min$1.Suspense=p$4;reactIs_production_min$1.isAsyncMode=function($){return A$1($)||z$1($)===l$3};reactIs_production_min$1.isConcurrentMode=A$1;reactIs_production_min$1.isContextConsumer=function($){return z$1($)===k$3};reactIs_production_min$1.isContextProvider=function($){return z$1($)===h$4};reactIs_production_min$1.isElement=function($){return typeof $=="object"&&$!==null&&$.$$typeof===c$2};reactIs_production_min$1.isForwardRef=function($){return z$1($)===n$4};reactIs_production_min$1.isFragment=function($){return z$1($)===e$2};reactIs_production_min$1.isLazy=function($){return z$1($)===t$4};reactIs_production_min$1.isMemo=function($){return z$1($)===r$3};reactIs_production_min$1.isPortal=function($){return z$1($)===d$2};reactIs_production_min$1.isProfiler=function($){return z$1($)===g$2};reactIs_production_min$1.isStrictMode=function($){return z$1($)===f$2};reactIs_production_min$1.isSuspense=function($){return z$1($)===p$4};reactIs_production_min$1.isValidElementType=function($){return typeof $=="string"||typeof $=="function"||$===e$2||$===m$4||$===g$2||$===f$2||$===p$4||$===q$4||typeof $=="object"&&$!==null&&($.$$typeof===t$4||$.$$typeof===r$3||$.$$typeof===h$4||$.$$typeof===k$3||$.$$typeof===n$4||$.$$typeof===w$2||$.$$typeof===x$1||$.$$typeof===y$1||$.$$typeof===v$3)};reactIs_production_min$1.typeOf=z$1;reactIs$2.exports=reactIs_production_min$1;var reactIsExports$1=reactIs$2.exports,reactIs$1=reactIsExports$1,REACT_STATICS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},KNOWN_STATICS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs$1.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs$1.Memo]=MEMO_STATICS;function getStatics($){return reactIs$1.isMemo($)?MEMO_STATICS:TYPE_STATICS[$.$$typeof]||REACT_STATICS}var defineProperty=Object.defineProperty,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getPrototypeOf$1=Object.getPrototypeOf,objectPrototype=Object.prototype;function hoistNonReactStatics($,_e,rt){if(typeof _e!="string"){if(objectPrototype){var at=getPrototypeOf$1(_e);at&&at!==objectPrototype&&hoistNonReactStatics($,at,rt)}var ht=getOwnPropertyNames(_e);getOwnPropertySymbols&&(ht=ht.concat(getOwnPropertySymbols(_e)));for(var pt=getStatics($),wt=getStatics(_e),st=0;st<ht.length;++st){var Tt=ht[st];if(!KNOWN_STATICS[Tt]&&!(rt&&rt[Tt])&&!(wt&&wt[Tt])&&!(pt&&pt[Tt])){var kt=getOwnPropertyDescriptor(_e,Tt);try{defineProperty($,Tt,kt)}catch{}}}}return $}var hoistNonReactStatics_cjs=hoistNonReactStatics;const hoistStatics=getDefaultExportFromCjs(hoistNonReactStatics_cjs);var MAX_SIGNED_31_BIT_INT=1073741823,commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{};function getUniqueId(){var $="__global_unique_id__";return commonjsGlobal[$]=(commonjsGlobal[$]||0)+1}function objectIs($,_e){return $===_e?$!==0||1/$===1/_e:$!==$&&_e!==_e}function createEventEmitter($){var _e=[];return{on:function(at){_e.push(at)},off:function(at){_e=_e.filter(function(ht){return ht!==at})},get:function(){return $},set:function(at,ht){$=at,_e.forEach(function(pt){return pt($,ht)})}}}function onlyChild($){return Array.isArray($)?$[0]:$}function createReactContext($,_e){var rt,at,ht="__create-react-context-"+getUniqueId()+"__",pt=function(st){_inheritsLoose(Tt,st);function Tt(){for(var Mt,Dt=arguments.length,Ot=new Array(Dt),Ut=0;Ut<Dt;Ut++)Ot[Ut]=arguments[Ut];return Mt=st.call.apply(st,[this].concat(Ot))||this,Mt.emitter=createEventEmitter(Mt.props.value),Mt}var kt=Tt.prototype;return kt.getChildContext=function(){var Dt;return Dt={},Dt[ht]=this.emitter,Dt},kt.componentWillReceiveProps=function(Dt){if(this.props.value!==Dt.value){var Ot=this.props.value,Ut=Dt.value,qt;objectIs(Ot,Ut)?qt=0:(qt=typeof _e=="function"?_e(Ot,Ut):MAX_SIGNED_31_BIT_INT,qt|=0,qt!==0&&this.emitter.set(Dt.value,qt))}},kt.render=function(){return this.props.children},Tt}(React.Component);pt.childContextTypes=(rt={},rt[ht]=PropTypes.object.isRequired,rt);var wt=function(st){_inheritsLoose(Tt,st);function Tt(){for(var Mt,Dt=arguments.length,Ot=new Array(Dt),Ut=0;Ut<Dt;Ut++)Ot[Ut]=arguments[Ut];return Mt=st.call.apply(st,[this].concat(Ot))||this,Mt.observedBits=void 0,Mt.state={value:Mt.getValue()},Mt.onUpdate=function(qt,tr){var ar=Mt.observedBits|0;ar&tr&&Mt.setState({value:Mt.getValue()})},Mt}var kt=Tt.prototype;return kt.componentWillReceiveProps=function(Dt){var Ot=Dt.observedBits;this.observedBits=Ot??MAX_SIGNED_31_BIT_INT},kt.componentDidMount=function(){this.context[ht]&&this.context[ht].on(this.onUpdate);var Dt=this.props.observedBits;this.observedBits=Dt??MAX_SIGNED_31_BIT_INT},kt.componentWillUnmount=function(){this.context[ht]&&this.context[ht].off(this.onUpdate)},kt.getValue=function(){return this.context[ht]?this.context[ht].get():$},kt.render=function(){return onlyChild(this.props.children)(this.state.value)},Tt}(React.Component);return wt.contextTypes=(at={},at[ht]=PropTypes.object,at),{Provider:pt,Consumer:wt}}var createContext=React.createContext||createReactContext,createNamedContext=function(_e){var rt=createContext();return rt.displayName=_e,rt},historyContext=createNamedContext("Router-History"),context$5=createNamedContext("Router"),Router=function($){_inheritsLoose(_e,$),_e.computeRootMatch=function(ht){return{path:"/",url:"/",params:{},isExact:ht==="/"}};function _e(at){var ht;return ht=$.call(this,at)||this,ht.state={location:at.history.location},ht._isMounted=!1,ht._pendingLocation=null,at.staticContext||(ht.unlisten=at.history.listen(function(pt){ht._pendingLocation=pt})),ht}var rt=_e.prototype;return rt.componentDidMount=function(){var ht=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(pt){ht._isMounted&&ht.setState({location:pt})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},rt.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},rt.render=function(){return React.createElement(context$5.Provider,{value:{history:this.props.history,location:this.state.location,match:_e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},React.createElement(historyContext.Provider,{children:this.props.children||null,value:this.props.history}))},_e}(React.Component),MemoryRouter=function($){_inheritsLoose(_e,$);function _e(){for(var at,ht=arguments.length,pt=new Array(ht),wt=0;wt<ht;wt++)pt[wt]=arguments[wt];return at=$.call.apply($,[this].concat(pt))||this,at.history=createMemoryHistory(at.props),at}var rt=_e.prototype;return rt.render=function(){return React.createElement(Router,{history:this.history,children:this.props.children})},_e}(React.Component),Lifecycle=function($){_inheritsLoose(_e,$);function _e(){return $.apply(this,arguments)||this}var rt=_e.prototype;return rt.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},rt.componentDidUpdate=function(ht){this.props.onUpdate&&this.props.onUpdate.call(this,this,ht)},rt.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},rt.render=function(){return null},_e}(React.Component);function Prompt($){var _e=$.message,rt=$.when,at=rt===void 0?!0:rt;return React.createElement(context$5.Consumer,null,function(ht){if(ht||invariant(!1),!at||ht.staticContext)return null;var pt=ht.history.block;return React.createElement(Lifecycle,{onMount:function(st){st.release=pt(_e)},onUpdate:function(st,Tt){Tt.message!==_e&&(st.release(),st.release=pt(_e))},onUnmount:function(st){st.release()},message:_e})})}var cache={},cacheLimit=1e4,cacheCount=0;function compilePath($){if(cache[$])return cache[$];var _e=pathToRegexp$1.compile($);return cacheCount<cacheLimit&&(cache[$]=_e,cacheCount++),_e}function generatePath($,_e){return $===void 0&&($="/"),_e===void 0&&(_e={}),$==="/"?$:compilePath($)(_e,{pretty:!0})}function Redirect($){var _e=$.computedMatch,rt=$.to,at=$.push,ht=at===void 0?!1:at;return React.createElement(context$5.Consumer,null,function(pt){pt||invariant(!1);var wt=pt.history,st=pt.staticContext,Tt=ht?wt.push:wt.replace,kt=createLocation(_e?typeof rt=="string"?generatePath(rt,_e.params):_extends({},rt,{pathname:generatePath(rt.pathname,_e.params)}):rt);return st?(Tt(kt),null):React.createElement(Lifecycle,{onMount:function(){Tt(kt)},onUpdate:function(Dt,Ot){var Ut=createLocation(Ot.to);locationsAreEqual(Ut,_extends({},kt,{key:Ut.key}))||Tt(kt)},to:rt})})}var cache$1={},cacheLimit$1=1e4,cacheCount$1=0;function compilePath$1($,_e){var rt=""+_e.end+_e.strict+_e.sensitive,at=cache$1[rt]||(cache$1[rt]={});if(at[$])return at[$];var ht=[],pt=pathToRegexp$1($,ht,_e),wt={regexp:pt,keys:ht};return cacheCount$1<cacheLimit$1&&(at[$]=wt,cacheCount$1++),wt}function matchPath($,_e){_e===void 0&&(_e={}),(typeof _e=="string"||Array.isArray(_e))&&(_e={path:_e});var rt=_e,at=rt.path,ht=rt.exact,pt=ht===void 0?!1:ht,wt=rt.strict,st=wt===void 0?!1:wt,Tt=rt.sensitive,kt=Tt===void 0?!1:Tt,Mt=[].concat(at);return Mt.reduce(function(Dt,Ot){if(!Ot&&Ot!=="")return null;if(Dt)return Dt;var Ut=compilePath$1(Ot,{end:pt,strict:st,sensitive:kt}),qt=Ut.regexp,tr=Ut.keys,ar=qt.exec($);if(!ar)return null;var Yt=ar[0],Kt=ar.slice(1),Jt=$===Yt;return pt&&!Jt?null:{path:Ot,url:Ot==="/"&&Yt===""?"/":Yt,isExact:Jt,params:tr.reduce(function(pr,Sr,Er){return pr[Sr.name]=Kt[Er],pr},{})}},null)}function isEmptyChildren($){return React.Children.count($)===0}var Route=function($){_inheritsLoose(_e,$);function _e(){return $.apply(this,arguments)||this}var rt=_e.prototype;return rt.render=function(){var ht=this;return React.createElement(context$5.Consumer,null,function(pt){pt||invariant(!1);var wt=ht.props.location||pt.location,st=ht.props.computedMatch?ht.props.computedMatch:ht.props.path?matchPath(wt.pathname,ht.props):pt.match,Tt=_extends({},pt,{location:wt,match:st}),kt=ht.props,Mt=kt.children,Dt=kt.component,Ot=kt.render;return Array.isArray(Mt)&&isEmptyChildren(Mt)&&(Mt=null),React.createElement(context$5.Provider,{value:Tt},Tt.match?Mt?typeof Mt=="function"?Mt(Tt):Mt:Dt?React.createElement(Dt,Tt):Ot?Ot(Tt):null:typeof Mt=="function"?Mt(Tt):null)})},_e}(React.Component);function addLeadingSlash($){return $.charAt(0)==="/"?$:"/"+$}function addBasename($,_e){return $?_extends({},_e,{pathname:addLeadingSlash($)+_e.pathname}):_e}function stripBasename($,_e){if(!$)return _e;var rt=addLeadingSlash($);return _e.pathname.indexOf(rt)!==0?_e:_extends({},_e,{pathname:_e.pathname.substr(rt.length)})}function createURL($){return typeof $=="string"?$:createPath($)}function staticHandler($){return function(){invariant(!1)}}function noop$8(){}var StaticRouter=function($){_inheritsLoose(_e,$);function _e(){for(var at,ht=arguments.length,pt=new Array(ht),wt=0;wt<ht;wt++)pt[wt]=arguments[wt];return at=$.call.apply($,[this].concat(pt))||this,at.handlePush=function(st){return at.navigateTo(st,"PUSH")},at.handleReplace=function(st){return at.navigateTo(st,"REPLACE")},at.handleListen=function(){return noop$8},at.handleBlock=function(){return noop$8},at}var rt=_e.prototype;return rt.navigateTo=function(ht,pt){var wt=this.props,st=wt.basename,Tt=st===void 0?"":st,kt=wt.context,Mt=kt===void 0?{}:kt;Mt.action=pt,Mt.location=addBasename(Tt,createLocation(ht)),Mt.url=createURL(Mt.location)},rt.render=function(){var ht=this.props,pt=ht.basename,wt=pt===void 0?"":pt,st=ht.context,Tt=st===void 0?{}:st,kt=ht.location,Mt=kt===void 0?"/":kt,Dt=_objectWithoutPropertiesLoose$9(ht,["basename","context","location"]),Ot={createHref:function(qt){return addLeadingSlash(wt+createURL(qt))},action:"POP",location:stripBasename(wt,createLocation(Mt)),push:this.handlePush,replace:this.handleReplace,go:staticHandler(),goBack:staticHandler(),goForward:staticHandler(),listen:this.handleListen,block:this.handleBlock};return React.createElement(Router,_extends({},Dt,{history:Ot,staticContext:Tt}))},_e}(React.Component),Switch$2=function($){_inheritsLoose(_e,$);function _e(){return $.apply(this,arguments)||this}var rt=_e.prototype;return rt.render=function(){var ht=this;return React.createElement(context$5.Consumer,null,function(pt){pt||invariant(!1);var wt=ht.props.location||pt.location,st,Tt;return React.Children.forEach(ht.props.children,function(kt){if(Tt==null&&React.isValidElement(kt)){st=kt;var Mt=kt.props.path||kt.props.from;Tt=Mt?matchPath(wt.pathname,_extends({},kt.props,{path:Mt})):pt.match}}),Tt?React.cloneElement(st,{location:wt,computedMatch:Tt}):null})},_e}(React.Component);function withRouter($){var _e="withRouter("+($.displayName||$.name)+")",rt=function(ht){var pt=ht.wrappedComponentRef,wt=_objectWithoutPropertiesLoose$9(ht,["wrappedComponentRef"]);return React.createElement(context$5.Consumer,null,function(st){return st||invariant(!1),React.createElement($,_extends({},wt,st,{ref:pt}))})};return rt.displayName=_e,rt.WrappedComponent=$,hoistStatics(rt,$)}var useContext=React.useContext;function useHistory(){return useContext(historyContext)}function useLocation(){return useContext(context$5).location}function useParams(){var $=useContext(context$5).match;return $?$.params:{}}function useRouteMatch($){var _e=useLocation(),rt=useContext(context$5).match;return $?matchPath(_e.pathname,$):rt}const reactRouter=Object.freeze(Object.defineProperty({__proto__:null,MemoryRouter,Prompt,Redirect,Route,Router,StaticRouter,Switch:Switch$2,__HistoryContext:historyContext,__RouterContext:context$5,generatePath,matchPath,useHistory,useLocation,useParams,useRouteMatch,withRouter},Symbol.toStringTag,{value:"Module"}));var BrowserRouter=function($){_inheritsLoose(_e,$);function _e(){for(var at,ht=arguments.length,pt=new Array(ht),wt=0;wt<ht;wt++)pt[wt]=arguments[wt];return at=$.call.apply($,[this].concat(pt))||this,at.history=createBrowserHistory(at.props),at}var rt=_e.prototype;return rt.render=function(){return React.createElement(Router,{history:this.history,children:this.props.children})},_e}(React.Component);React.Component;var resolveToLocation=function(_e,rt){return typeof _e=="function"?_e(rt):_e},normalizeToLocation=function(_e,rt){return typeof _e=="string"?createLocation(_e,null,null,rt):_e},forwardRefShim=function(_e){return _e},forwardRef=React.forwardRef;typeof forwardRef>"u"&&(forwardRef=forwardRefShim);function isModifiedEvent$1($){return!!($.metaKey||$.altKey||$.ctrlKey||$.shiftKey)}var LinkAnchor=forwardRef(function($,_e){var rt=$.innerRef,at=$.navigate,ht=$.onClick,pt=_objectWithoutPropertiesLoose$9($,["innerRef","navigate","onClick"]),wt=pt.target,st=_extends({},pt,{onClick:function(kt){try{ht&&ht(kt)}catch(Mt){throw kt.preventDefault(),Mt}!kt.defaultPrevented&&kt.button===0&&(!wt||wt==="_self")&&!isModifiedEvent$1(kt)&&(kt.preventDefault(),at())}});return forwardRefShim!==forwardRef?st.ref=_e||rt:st.ref=rt,React.createElement("a",st)}),Link=forwardRef(function($,_e){var rt=$.component,at=rt===void 0?LinkAnchor:rt,ht=$.replace,pt=$.to,wt=$.innerRef,st=_objectWithoutPropertiesLoose$9($,["component","replace","to","innerRef"]);return React.createElement(context$5.Consumer,null,function(Tt){Tt||invariant(!1);var kt=Tt.history,Mt=normalizeToLocation(resolveToLocation(pt,Tt.location),Tt.location),Dt=Mt?kt.createHref(Mt):"",Ot=_extends({},st,{href:Dt,navigate:function(){var qt=resolveToLocation(pt,Tt.location),tr=createPath(Tt.location)===createPath(normalizeToLocation(qt)),ar=ht||tr?kt.replace:kt.push;ar(qt)}});return forwardRefShim!==forwardRef?Ot.ref=_e||wt:Ot.innerRef=wt,React.createElement(at,Ot)})}),forwardRefShim$1=function(_e){return _e},forwardRef$1=React.forwardRef;typeof forwardRef$1>"u"&&(forwardRef$1=forwardRefShim$1);function joinClassnames(){for(var $=arguments.length,_e=new Array($),rt=0;rt<$;rt++)_e[rt]=arguments[rt];return _e.filter(function(at){return at}).join(" ")}forwardRef$1(function($,_e){var rt=$["aria-current"],at=rt===void 0?"page":rt,ht=$.activeClassName,pt=ht===void 0?"active":ht,wt=$.activeStyle,st=$.className,Tt=$.exact,kt=$.isActive,Mt=$.location,Dt=$.sensitive,Ot=$.strict,Ut=$.style,qt=$.to,tr=$.innerRef,ar=_objectWithoutPropertiesLoose$9($,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return React.createElement(context$5.Consumer,null,function(Yt){Yt||invariant(!1);var Kt=Mt||Yt.location,Jt=normalizeToLocation(resolveToLocation(qt,Kt),Kt),pr=Jt.pathname,Sr=pr&&pr.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),Er=Sr?matchPath(Kt.pathname,{path:Sr,exact:Tt,sensitive:Dt,strict:Ot}):null,Rr=!!(kt?kt(Er,Kt):Er),Lr=typeof st=="function"?st(Rr):st,Mr=typeof Ut=="function"?Ut(Rr):Ut;Rr&&(Lr=joinClassnames(Lr,pt),Mr=_extends({},Mr,wt));var Zr=_extends({"aria-current":Rr&&at||null,className:Lr,style:Mr,to:Jt},ar);return forwardRefShim$1!==forwardRef$1?Zr.ref=_e||tr:Zr.innerRef=tr,React.createElement(Link,Zr)})});const App$1="",index="",bootstrap_min="";var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function($){(function(){var _e={}.hasOwnProperty;function rt(){for(var at=[],ht=0;ht<arguments.length;ht++){var pt=arguments[ht];if(pt){var wt=typeof pt;if(wt==="string"||wt==="number")at.push(pt);else if(Array.isArray(pt)){if(pt.length){var st=rt.apply(null,pt);st&&at.push(st)}}else if(wt==="object"){if(pt.toString!==Object.prototype.toString&&!pt.toString.toString().includes("[native code]")){at.push(pt.toString());continue}for(var Tt in pt)_e.call(pt,Tt)&&pt[Tt]&&at.push(Tt)}}}return at.join(" ")}$.exports?(rt.default=rt,$.exports=rt):window.classNames=rt})()})(classnames);var classnamesExports=classnames.exports;const classNames=getDefaultExportFromCjs(classnamesExports),DEFAULT_BREAKPOINTS=["xxl","xl","lg","md","sm","xs"],DEFAULT_MIN_BREAKPOINT="xs",ThemeContext=reactExports.createContext({prefixes:{},breakpoints:DEFAULT_BREAKPOINTS,minBreakpoint:DEFAULT_MIN_BREAKPOINT});function useBootstrapPrefix($,_e){const{prefixes:rt}=reactExports.useContext(ThemeContext);return $||rt[_e]||_e}function useBootstrapBreakpoints(){const{breakpoints:$}=reactExports.useContext(ThemeContext);return $}function useBootstrapMinBreakpoint(){const{minBreakpoint:$}=reactExports.useContext(ThemeContext);return $}function useIsRTL(){const{dir:$}=reactExports.useContext(ThemeContext);return $==="rtl"}const Container=reactExports.forwardRef(({bsPrefix:$,fluid:_e=!1,as:rt="div",className:at,...ht},pt)=>{const wt=useBootstrapPrefix($,"container"),st=typeof _e=="string"?`-${_e}`:"-fluid";return jsxRuntimeExports.jsx(rt,{ref:pt,...ht,className:classNames(at,_e?`${wt}${st}`:wt)})});Container.displayName="Container";const Container$1=Container;var all={exports:{}},createChainableTypeChecker={exports:{}};(function($,_e){Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=rt;function rt(at){function ht(wt,st,Tt,kt,Mt,Dt){var Ot=kt||"<<anonymous>>",Ut=Dt||Tt;if(st[Tt]==null)return wt?new Error("Required "+Mt+" `"+Ut+"` was not specified "+("in `"+Ot+"`.")):null;for(var qt=arguments.length,tr=Array(qt>6?qt-6:0),ar=6;ar<qt;ar++)tr[ar-6]=arguments[ar];return at.apply(void 0,[st,Tt,Ot,Mt,Ut].concat(tr))}var pt=ht.bind(null,!1);return pt.isRequired=ht.bind(null,!0),pt}$.exports=_e.default})(createChainableTypeChecker,createChainableTypeChecker.exports);var createChainableTypeCheckerExports=createChainableTypeChecker.exports;(function($,_e){Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=pt;var rt=createChainableTypeCheckerExports,at=ht(rt);function ht(wt){return wt&&wt.__esModule?wt:{default:wt}}function pt(){for(var wt=arguments.length,st=Array(wt),Tt=0;Tt<wt;Tt++)st[Tt]=arguments[Tt];function kt(){for(var Mt=arguments.length,Dt=Array(Mt),Ot=0;Ot<Mt;Ot++)Dt[Ot]=arguments[Ot];var Ut=null;return st.forEach(function(qt){if(Ut==null){var tr=qt.apply(void 0,Dt);tr!=null&&(Ut=tr)}}),Ut}return(0,at.default)(kt)}$.exports=_e.default})(all,all.exports);function defaultKey($){return"default"+$.charAt(0).toUpperCase()+$.substr(1)}function _toPropertyKey$1($){var _e=_toPrimitive$1($,"string");return typeof _e=="symbol"?_e:String(_e)}function _toPrimitive$1($,_e){if(typeof $!="object"||$===null)return $;var rt=$[Symbol.toPrimitive];if(rt!==void 0){var at=rt.call($,_e||"default");if(typeof at!="object")return at;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_e==="string"?String:Number)($)}function useUncontrolledProp$1($,_e,rt){var at=reactExports.useRef($!==void 0),ht=reactExports.useState(_e),pt=ht[0],wt=ht[1],st=$!==void 0,Tt=at.current;return at.current=st,!st&&Tt&&pt!==_e&&wt(_e),[st?$:pt,reactExports.useCallback(function(kt){for(var Mt=arguments.length,Dt=new Array(Mt>1?Mt-1:0),Ot=1;Ot<Mt;Ot++)Dt[Ot-1]=arguments[Ot];rt&&rt.apply(void 0,[kt].concat(Dt)),wt(kt)},[rt])]}function useUncontrolled($,_e){return Object.keys(_e).reduce(function(rt,at){var ht,pt=rt,wt=pt[defaultKey(at)],st=pt[at],Tt=_objectWithoutPropertiesLoose$9(pt,[defaultKey(at),at].map(_toPropertyKey$1)),kt=_e[at],Mt=useUncontrolledProp$1(st,wt,$[kt]),Dt=Mt[0],Ot=Mt[1];return _extends({},Tt,(ht={},ht[at]=Dt,ht[kt]=Ot,ht))},$)}var toArray$1=Function.prototype.bind.call(Function.prototype.call,[].slice);function qsa($,_e){return toArray$1($.querySelectorAll(_e))}function useForceUpdate(){const[,$]=reactExports.useReducer(_e=>!_e,!1);return $}const toFnRef=$=>!$||typeof $=="function"?$:_e=>{$.current=_e};function mergeRefs($,_e){const rt=toFnRef($),at=toFnRef(_e);return ht=>{rt&&rt(ht),at&&at(ht)}}function useMergedRefs($,_e){return reactExports.useMemo(()=>mergeRefs($,_e),[$,_e])}const NavContext=reactExports.createContext(null);NavContext.displayName="NavContext";const NavContext$1=NavContext,SelectableContext=reactExports.createContext(null),makeEventKey=($,_e=null)=>$!=null?String($):_e||null,TabContext=reactExports.createContext(null),TabContext$1=TabContext,ATTRIBUTE_PREFIX="data-rr-ui-",PROPERTY_PREFIX="rrUi";function dataAttr($){return`${ATTRIBUTE_PREFIX}${$}`}function dataProp($){return`${PROPERTY_PREFIX}${$}`}function useCommittedRef($){const _e=reactExports.useRef($);return reactExports.useEffect(()=>{_e.current=$},[$]),_e}function useEventCallback($){const _e=useCommittedRef($);return reactExports.useCallback(function(...rt){return _e.current&&_e.current(...rt)},[_e])}const _excluded$9=["as","disabled"];function _objectWithoutPropertiesLoose$8($,_e){if($==null)return{};var rt={},at=Object.keys($),ht,pt;for(pt=0;pt<at.length;pt++)ht=at[pt],!(_e.indexOf(ht)>=0)&&(rt[ht]=$[ht]);return rt}function isTrivialHref$1($){return!$||$.trim()==="#"}function useButtonProps({tagName:$,disabled:_e,href:rt,target:at,rel:ht,role:pt,onClick:wt,tabIndex:st=0,type:Tt}){$||(rt!=null||at!=null||ht!=null?$="a":$="button");const kt={tagName:$};if($==="button")return[{type:Tt||"button",disabled:_e},kt];const Mt=Ot=>{if((_e||$==="a"&&isTrivialHref$1(rt))&&Ot.preventDefault(),_e){Ot.stopPropagation();return}wt==null||wt(Ot)},Dt=Ot=>{Ot.key===" "&&(Ot.preventDefault(),Mt(Ot))};return $==="a"&&(rt||(rt="#"),_e&&(rt=void 0)),[{role:pt??"button",disabled:void 0,tabIndex:_e?void 0:st,href:rt,target:$==="a"?at:void 0,"aria-disabled":_e||void 0,rel:$==="a"?ht:void 0,onClick:Mt,onKeyDown:Dt},kt]}const Button$2=reactExports.forwardRef(($,_e)=>{let{as:rt,disabled:at}=$,ht=_objectWithoutPropertiesLoose$8($,_excluded$9);const[pt,{tagName:wt}]=useButtonProps(Object.assign({tagName:rt,disabled:at},ht));return jsxRuntimeExports.jsx(wt,Object.assign({},ht,pt,{ref:_e}))});Button$2.displayName="Button";const _excluded$8=["as","active","eventKey"];function _objectWithoutPropertiesLoose$7($,_e){if($==null)return{};var rt={},at=Object.keys($),ht,pt;for(pt=0;pt<at.length;pt++)ht=at[pt],!(_e.indexOf(ht)>=0)&&(rt[ht]=$[ht]);return rt}function useNavItem({key:$,onClick:_e,active:rt,id:at,role:ht,disabled:pt}){const wt=reactExports.useContext(SelectableContext),st=reactExports.useContext(NavContext$1),Tt=reactExports.useContext(TabContext$1);let kt=rt;const Mt={role:ht};if(st){!ht&&st.role==="tablist"&&(Mt.role="tab");const Dt=st.getControllerId($??null),Ot=st.getControlledId($??null);Mt[dataAttr("event-key")]=$,Mt.id=Dt||at,kt=rt==null&&$!=null?st.activeKey===$:rt,(kt||!(Tt!=null&&Tt.unmountOnExit)&&!(Tt!=null&&Tt.mountOnEnter))&&(Mt["aria-controls"]=Ot)}return Mt.role==="tab"&&(Mt["aria-selected"]=kt,kt||(Mt.tabIndex=-1),pt&&(Mt.tabIndex=-1,Mt["aria-disabled"]=!0)),Mt.onClick=useEventCallback(Dt=>{pt||(_e==null||_e(Dt),$!=null&&wt&&!Dt.isPropagationStopped()&&wt($,Dt))}),[Mt,{isActive:kt}]}const NavItem$2=reactExports.forwardRef(($,_e)=>{let{as:rt=Button$2,active:at,eventKey:ht}=$,pt=_objectWithoutPropertiesLoose$7($,_excluded$8);const[wt,st]=useNavItem(Object.assign({key:makeEventKey(ht,pt.href),active:at},pt));return wt[dataAttr("active")]=st.isActive,jsxRuntimeExports.jsx(rt,Object.assign({},pt,wt,{ref:_e}))});NavItem$2.displayName="NavItem";const NavItem$3=NavItem$2,_excluded$7=["as","onSelect","activeKey","role","onKeyDown"];function _objectWithoutPropertiesLoose$6($,_e){if($==null)return{};var rt={},at=Object.keys($),ht,pt;for(pt=0;pt<at.length;pt++)ht=at[pt],!(_e.indexOf(ht)>=0)&&(rt[ht]=$[ht]);return rt}const noop$7=()=>{},EVENT_KEY_ATTR=dataAttr("event-key"),Nav$2=reactExports.forwardRef(($,_e)=>{let{as:rt="div",onSelect:at,activeKey:ht,role:pt,onKeyDown:wt}=$,st=_objectWithoutPropertiesLoose$6($,_excluded$7);const Tt=useForceUpdate(),kt=reactExports.useRef(!1),Mt=reactExports.useContext(SelectableContext),Dt=reactExports.useContext(TabContext$1);let Ot,Ut;Dt&&(pt=pt||"tablist",ht=Dt.activeKey,Ot=Dt.getControlledId,Ut=Dt.getControllerId);const qt=reactExports.useRef(null),tr=Jt=>{const pr=qt.current;if(!pr)return null;const Sr=qsa(pr,`[${EVENT_KEY_ATTR}]:not([aria-disabled=true])`),Er=pr.querySelector("[aria-selected=true]");if(!Er||Er!==document.activeElement)return null;const Rr=Sr.indexOf(Er);if(Rr===-1)return null;let Lr=Rr+Jt;return Lr>=Sr.length&&(Lr=0),Lr<0&&(Lr=Sr.length-1),Sr[Lr]},ar=(Jt,pr)=>{Jt!=null&&(at==null||at(Jt,pr),Mt==null||Mt(Jt,pr))},Yt=Jt=>{if(wt==null||wt(Jt),!Dt)return;let pr;switch(Jt.key){case"ArrowLeft":case"ArrowUp":pr=tr(-1);break;case"ArrowRight":case"ArrowDown":pr=tr(1);break;default:return}pr&&(Jt.preventDefault(),ar(pr.dataset[dataProp("EventKey")]||null,Jt),kt.current=!0,Tt())};reactExports.useEffect(()=>{if(qt.current&&kt.current){const Jt=qt.current.querySelector(`[${EVENT_KEY_ATTR}][aria-selected=true]`);Jt==null||Jt.focus()}kt.current=!1});const Kt=useMergedRefs(_e,qt);return jsxRuntimeExports.jsx(SelectableContext.Provider,{value:ar,children:jsxRuntimeExports.jsx(NavContext$1.Provider,{value:{role:pt,activeKey:makeEventKey(ht),getControlledId:Ot||noop$7,getControllerId:Ut||noop$7},children:jsxRuntimeExports.jsx(rt,Object.assign({},st,{onKeyDown:Yt,ref:Kt,role:pt}))})})});Nav$2.displayName="Nav";const BaseNav=Object.assign(Nav$2,{Item:NavItem$3}),context$4=reactExports.createContext(null);context$4.displayName="NavbarContext";const NavbarContext=context$4,context$3=reactExports.createContext(null);context$3.displayName="CardHeaderContext";const CardHeaderContext=context$3,NavItem=reactExports.forwardRef(({className:$,bsPrefix:_e,as:rt="div",...at},ht)=>(_e=useBootstrapPrefix(_e,"nav-item"),jsxRuntimeExports.jsx(rt,{ref:ht,className:classNames($,_e),...at})));NavItem.displayName="NavItem";const NavItem$1=NavItem;function useCallbackRef(){return reactExports.useState(null)}function useEventListener($,_e,rt,at=!1){const ht=useEventCallback(rt);reactExports.useEffect(()=>{const pt=typeof $=="function"?$():$;return pt.addEventListener(_e,ht,at),()=>pt.removeEventListener(_e,ht,at)},[$])}function useMounted(){const $=reactExports.useRef(!0),_e=reactExports.useRef(()=>$.current);return reactExports.useEffect(()=>($.current=!0,()=>{$.current=!1}),[]),_e.current}function usePrevious($){const _e=reactExports.useRef(null);return reactExports.useEffect(()=>{_e.current=$}),_e.current}const isReactNative=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",isDOM=typeof document<"u",useIsomorphicEffect=isDOM||isReactNative?reactExports.useLayoutEffect:reactExports.useEffect,_excluded$6=["onKeyDown"];function _objectWithoutPropertiesLoose$5($,_e){if($==null)return{};var rt={},at=Object.keys($),ht,pt;for(pt=0;pt<at.length;pt++)ht=at[pt],!(_e.indexOf(ht)>=0)&&(rt[ht]=$[ht]);return rt}function isTrivialHref($){return!$||$.trim()==="#"}const Anchor=reactExports.forwardRef(($,_e)=>{let{onKeyDown:rt}=$,at=_objectWithoutPropertiesLoose$5($,_excluded$6);const[ht]=useButtonProps(Object.assign({tagName:"a"},at)),pt=useEventCallback(wt=>{ht.onKeyDown(wt),rt==null||rt(wt)});return isTrivialHref(at.href)||at.role==="button"?jsxRuntimeExports.jsx("a",Object.assign({ref:_e},at,ht,{onKeyDown:pt})):jsxRuntimeExports.jsx("a",Object.assign({ref:_e},at,{onKeyDown:rt}))});Anchor.displayName="Anchor";const Anchor$1=Anchor,NavLink=reactExports.forwardRef(({bsPrefix:$,className:_e,as:rt=Anchor$1,active:at,eventKey:ht,disabled:pt=!1,...wt},st)=>{$=useBootstrapPrefix($,"nav-link");const[Tt,kt]=useNavItem({key:makeEventKey(ht,wt.href),active:at,disabled:pt,...wt});return jsxRuntimeExports.jsx(rt,{...wt,...Tt,ref:st,disabled:pt,className:classNames(_e,$,pt&&"disabled",kt.isActive&&"active")})});NavLink.displayName="NavLink";const NavLink$1=NavLink,Nav=reactExports.forwardRef(($,_e)=>{const{as:rt="div",bsPrefix:at,variant:ht,fill:pt=!1,justify:wt=!1,navbar:st,navbarScroll:Tt,className:kt,activeKey:Mt,...Dt}=useUncontrolled($,{activeKey:"onSelect"}),Ot=useBootstrapPrefix(at,"nav");let Ut,qt,tr=!1;const ar=reactExports.useContext(NavbarContext),Yt=reactExports.useContext(CardHeaderContext);return ar?(Ut=ar.bsPrefix,tr=st??!0):Yt&&({cardHeaderBsPrefix:qt}=Yt),jsxRuntimeExports.jsx(BaseNav,{as:rt,ref:_e,activeKey:Mt,className:classNames(kt,{[Ot]:!tr,[`${Ut}-nav`]:tr,[`${Ut}-nav-scroll`]:tr&&Tt,[`${qt}-${ht}`]:!!qt,[`${Ot}-${ht}`]:!!ht,[`${Ot}-fill`]:pt,[`${Ot}-justified`]:wt}),...Dt})});Nav.displayName="Nav";const Nav$1=Object.assign(Nav,{Item:NavItem$1,Link:NavLink$1}),NavbarBrand=reactExports.forwardRef(({bsPrefix:$,className:_e,as:rt,...at},ht)=>{$=useBootstrapPrefix($,"navbar-brand");const pt=rt||(at.href?"a":"span");return jsxRuntimeExports.jsx(pt,{...at,ref:ht,className:classNames(_e,$)})});NavbarBrand.displayName="NavbarBrand";const NavbarBrand$1=NavbarBrand;function ownerDocument($){return $&&$.ownerDocument||document}function ownerWindow($){var _e=ownerDocument($);return _e&&_e.defaultView||window}function getComputedStyle$2($,_e){return ownerWindow($).getComputedStyle($,_e)}var rUpper=/([A-Z])/g;function hyphenate($){return $.replace(rUpper,"-$1").toLowerCase()}var msPattern=/^ms-/;function hyphenateStyleName($){return hyphenate($).replace(msPattern,"-ms-")}var supportedTransforms=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function isTransform($){return!!($&&supportedTransforms.test($))}function style($,_e){var rt="",at="";if(typeof _e=="string")return $.style.getPropertyValue(hyphenateStyleName(_e))||getComputedStyle$2($).getPropertyValue(hyphenateStyleName(_e));Object.keys(_e).forEach(function(ht){var pt=_e[ht];!pt&&pt!==0?$.style.removeProperty(hyphenateStyleName(ht)):isTransform(ht)?at+=ht+"("+pt+") ":rt+=hyphenateStyleName(ht)+": "+pt+";"}),at&&(rt+="transform: "+at+";"),$.style.cssText+=";"+rt}const config$1={disabled:!1},TransitionGroupContext=React.createContext(null);var forceReflow=function(_e){return _e.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function($){_inheritsLoose(_e,$);function _e(at,ht){var pt;pt=$.call(this,at,ht)||this;var wt=ht,st=wt&&!wt.isMounting?at.enter:at.appear,Tt;return pt.appearStatus=null,at.in?st?(Tt=EXITED,pt.appearStatus=ENTERING):Tt=ENTERED:at.unmountOnExit||at.mountOnEnter?Tt=UNMOUNTED:Tt=EXITED,pt.state={status:Tt},pt.nextCallback=null,pt}_e.getDerivedStateFromProps=function(ht,pt){var wt=ht.in;return wt&&pt.status===UNMOUNTED?{status:EXITED}:null};var rt=_e.prototype;return rt.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},rt.componentDidUpdate=function(ht){var pt=null;if(ht!==this.props){var wt=this.state.status;this.props.in?wt!==ENTERING&&wt!==ENTERED&&(pt=ENTERING):(wt===ENTERING||wt===ENTERED)&&(pt=EXITING)}this.updateStatus(!1,pt)},rt.componentWillUnmount=function(){this.cancelNextCallback()},rt.getTimeouts=function(){var ht=this.props.timeout,pt,wt,st;return pt=wt=st=ht,ht!=null&&typeof ht!="number"&&(pt=ht.exit,wt=ht.enter,st=ht.appear!==void 0?ht.appear:wt),{exit:pt,enter:wt,appear:st}},rt.updateStatus=function(ht,pt){if(ht===void 0&&(ht=!1),pt!==null)if(this.cancelNextCallback(),pt===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var wt=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);wt&&forceReflow(wt)}this.performEnter(ht)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},rt.performEnter=function(ht){var pt=this,wt=this.props.enter,st=this.context?this.context.isMounting:ht,Tt=this.props.nodeRef?[st]:[ReactDOM.findDOMNode(this),st],kt=Tt[0],Mt=Tt[1],Dt=this.getTimeouts(),Ot=st?Dt.appear:Dt.enter;if(!ht&&!wt||config$1.disabled){this.safeSetState({status:ENTERED},function(){pt.props.onEntered(kt)});return}this.props.onEnter(kt,Mt),this.safeSetState({status:ENTERING},function(){pt.props.onEntering(kt,Mt),pt.onTransitionEnd(Ot,function(){pt.safeSetState({status:ENTERED},function(){pt.props.onEntered(kt,Mt)})})})},rt.performExit=function(){var ht=this,pt=this.props.exit,wt=this.getTimeouts(),st=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!pt||config$1.disabled){this.safeSetState({status:EXITED},function(){ht.props.onExited(st)});return}this.props.onExit(st),this.safeSetState({status:EXITING},function(){ht.props.onExiting(st),ht.onTransitionEnd(wt.exit,function(){ht.safeSetState({status:EXITED},function(){ht.props.onExited(st)})})})},rt.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},rt.safeSetState=function(ht,pt){pt=this.setNextCallback(pt),this.setState(ht,pt)},rt.setNextCallback=function(ht){var pt=this,wt=!0;return this.nextCallback=function(st){wt&&(wt=!1,pt.nextCallback=null,ht(st))},this.nextCallback.cancel=function(){wt=!1},this.nextCallback},rt.onTransitionEnd=function(ht,pt){this.setNextCallback(pt);var wt=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),st=ht==null&&!this.props.addEndListener;if(!wt||st){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var Tt=this.props.nodeRef?[this.nextCallback]:[wt,this.nextCallback],kt=Tt[0],Mt=Tt[1];this.props.addEndListener(kt,Mt)}ht!=null&&setTimeout(this.nextCallback,ht)},rt.render=function(){var ht=this.state.status;if(ht===UNMOUNTED)return null;var pt=this.props,wt=pt.children;pt.in,pt.mountOnEnter,pt.unmountOnExit,pt.appear,pt.enter,pt.exit,pt.timeout,pt.addEndListener,pt.onEnter,pt.onEntering,pt.onEntered,pt.onExit,pt.onExiting,pt.onExited,pt.nodeRef;var st=_objectWithoutPropertiesLoose$9(pt,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React.createElement(TransitionGroupContext.Provider,{value:null},typeof wt=="function"?wt(ht,st):React.cloneElement(React.Children.only(wt),st))},_e}(React.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop$6(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$6,onEntering:noop$6,onEntered:noop$6,onExit:noop$6,onExiting:noop$6,onExited:noop$6};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;const Transition$1=Transition,canUseDOM$1=!!(typeof window<"u"&&window.document&&window.document.createElement);var optionsSupported=!1,onceSupported=!1;try{var options={get passive(){return optionsSupported=!0},get once(){return onceSupported=optionsSupported=!0}};canUseDOM$1&&(window.addEventListener("test",options,options),window.removeEventListener("test",options,!0))}catch{}function addEventListener($,_e,rt,at){if(at&&typeof at!="boolean"&&!onceSupported){var ht=at.once,pt=at.capture,wt=rt;!onceSupported&&ht&&(wt=rt.__once||function st(Tt){this.removeEventListener(_e,st,pt),rt.call(this,Tt)},rt.__once=wt),$.addEventListener(_e,wt,optionsSupported?at:pt)}$.addEventListener(_e,rt,at)}function removeEventListener($,_e,rt,at){var ht=at&&typeof at!="boolean"?at.capture:at;$.removeEventListener(_e,rt,ht),rt.__once&&$.removeEventListener(_e,rt.__once,ht)}function listen($,_e,rt,at){return addEventListener($,_e,rt,at),function(){removeEventListener($,_e,rt,at)}}function triggerEvent($,_e,rt,at){if(rt===void 0&&(rt=!1),at===void 0&&(at=!0),$){var ht=document.createEvent("HTMLEvents");ht.initEvent(_e,rt,at),$.dispatchEvent(ht)}}function parseDuration$1($){var _e=style($,"transitionDuration")||"",rt=_e.indexOf("ms")===-1?1e3:1;return parseFloat(_e)*rt}function emulateTransitionEnd($,_e,rt){rt===void 0&&(rt=5);var at=!1,ht=setTimeout(function(){at||triggerEvent($,"transitionend",!0)},_e+rt),pt=listen($,"transitionend",function(){at=!0},{once:!0});return function(){clearTimeout(ht),pt()}}function transitionEnd($,_e,rt,at){rt==null&&(rt=parseDuration$1($)||0);var ht=emulateTransitionEnd($,rt,at),pt=listen($,"transitionend",_e);return function(){ht(),pt()}}function parseDuration($,_e){const rt=style($,_e)||"",at=rt.indexOf("ms")===-1?1e3:1;return parseFloat(rt)*at}function transitionEndListener($,_e){const rt=parseDuration($,"transitionDuration"),at=parseDuration($,"transitionDelay"),ht=transitionEnd($,pt=>{pt.target===$&&(ht(),_e(pt))},rt+at)}function createChainedFunction(...$){return $.filter(_e=>_e!=null).reduce((_e,rt)=>{if(typeof rt!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return _e===null?rt:function(...ht){_e.apply(this,ht),rt.apply(this,ht)}},null)}function triggerBrowserReflow($){$.offsetHeight}function safeFindDOMNode($){return $&&"setState"in $?ReactDOM.findDOMNode($):$??null}const TransitionWrapper=React.forwardRef(({onEnter:$,onEntering:_e,onEntered:rt,onExit:at,onExiting:ht,onExited:pt,addEndListener:wt,children:st,childRef:Tt,...kt},Mt)=>{const Dt=reactExports.useRef(null),Ot=useMergedRefs(Dt,Tt),Ut=Er=>{Ot(safeFindDOMNode(Er))},qt=Er=>Rr=>{Er&&Dt.current&&Er(Dt.current,Rr)},tr=reactExports.useCallback(qt($),[$]),ar=reactExports.useCallback(qt(_e),[_e]),Yt=reactExports.useCallback(qt(rt),[rt]),Kt=reactExports.useCallback(qt(at),[at]),Jt=reactExports.useCallback(qt(ht),[ht]),pr=reactExports.useCallback(qt(pt),[pt]),Sr=reactExports.useCallback(qt(wt),[wt]);return jsxRuntimeExports.jsx(Transition$1,{ref:Mt,...kt,onEnter:tr,onEntered:Yt,onEntering:ar,onExit:Kt,onExited:pr,onExiting:Jt,addEndListener:Sr,nodeRef:Dt,children:typeof st=="function"?(Er,Rr)=>st(Er,{...Rr,ref:Ut}):React.cloneElement(st,{ref:Ut})})}),TransitionWrapper$1=TransitionWrapper,MARGINS={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function getDefaultDimensionValue($,_e){const rt=`offset${$[0].toUpperCase()}${$.slice(1)}`,at=_e[rt],ht=MARGINS[$];return at+parseInt(style(_e,ht[0]),10)+parseInt(style(_e,ht[1]),10)}const collapseStyles={[EXITED]:"collapse",[EXITING]:"collapsing",[ENTERING]:"collapsing",[ENTERED]:"collapse show"},Collapse=React.forwardRef(({onEnter:$,onEntering:_e,onEntered:rt,onExit:at,onExiting:ht,className:pt,children:wt,dimension:st="height",in:Tt=!1,timeout:kt=300,mountOnEnter:Mt=!1,unmountOnExit:Dt=!1,appear:Ot=!1,getDimensionValue:Ut=getDefaultDimensionValue,...qt},tr)=>{const ar=typeof st=="function"?st():st,Yt=reactExports.useMemo(()=>createChainedFunction(Er=>{Er.style[ar]="0"},$),[ar,$]),Kt=reactExports.useMemo(()=>createChainedFunction(Er=>{const Rr=`scroll${ar[0].toUpperCase()}${ar.slice(1)}`;Er.style[ar]=`${Er[Rr]}px`},_e),[ar,_e]),Jt=reactExports.useMemo(()=>createChainedFunction(Er=>{Er.style[ar]=null},rt),[ar,rt]),pr=reactExports.useMemo(()=>createChainedFunction(Er=>{Er.style[ar]=`${Ut(ar,Er)}px`,triggerBrowserReflow(Er)},at),[at,Ut,ar]),Sr=reactExports.useMemo(()=>createChainedFunction(Er=>{Er.style[ar]=null},ht),[ar,ht]);return jsxRuntimeExports.jsx(TransitionWrapper$1,{ref:tr,addEndListener:transitionEndListener,...qt,"aria-expanded":qt.role?Tt:null,onEnter:Yt,onEntering:Kt,onEntered:Jt,onExit:pr,onExiting:Sr,childRef:wt.ref,in:Tt,timeout:kt,mountOnEnter:Mt,unmountOnExit:Dt,appear:Ot,children:(Er,Rr)=>React.cloneElement(wt,{...Rr,className:classNames(pt,wt.props.className,collapseStyles[Er],ar==="width"&&"collapse-horizontal")})})}),Collapse$1=Collapse,NavbarCollapse=reactExports.forwardRef(({children:$,bsPrefix:_e,...rt},at)=>{_e=useBootstrapPrefix(_e,"navbar-collapse");const ht=reactExports.useContext(NavbarContext);return jsxRuntimeExports.jsx(Collapse$1,{in:!!(ht&&ht.expanded),...rt,children:jsxRuntimeExports.jsx("div",{ref:at,className:_e,children:$})})});NavbarCollapse.displayName="NavbarCollapse";const NavbarCollapse$1=NavbarCollapse,NavbarToggle=reactExports.forwardRef(({bsPrefix:$,className:_e,children:rt,label:at="Toggle navigation",as:ht="button",onClick:pt,...wt},st)=>{$=useBootstrapPrefix($,"navbar-toggler");const{onToggle:Tt,expanded:kt}=reactExports.useContext(NavbarContext)||{},Mt=useEventCallback(Dt=>{pt&&pt(Dt),Tt&&Tt()});return ht==="button"&&(wt.type="button"),jsxRuntimeExports.jsx(ht,{...wt,ref:st,onClick:Mt,"aria-label":at,className:classNames(_e,$,!kt&&"collapsed"),children:rt||jsxRuntimeExports.jsx("span",{className:`${$}-icon`})})});NavbarToggle.displayName="NavbarToggle";const NavbarToggle$1=NavbarToggle,matchersByWindow=new WeakMap,getMatcher=($,_e)=>{if(!$||!_e)return;const rt=matchersByWindow.get(_e)||new Map;matchersByWindow.set(_e,rt);let at=rt.get($);return at||(at=_e.matchMedia($),at.refCount=0,rt.set(at.media,at)),at};function useMediaQuery($,_e=typeof window>"u"?void 0:window){const rt=getMatcher($,_e),[at,ht]=reactExports.useState(()=>rt?rt.matches:!1);return useIsomorphicEffect(()=>{let pt=getMatcher($,_e);if(!pt)return ht(!1);let wt=matchersByWindow.get(_e);const st=()=>{ht(pt.matches)};return pt.refCount++,pt.addListener(st),st(),()=>{pt.removeListener(st),pt.refCount--,pt.refCount<=0&&(wt==null||wt.delete(pt.media)),pt=void 0}},[$]),at}function createBreakpointHook($){const _e=Object.keys($);function rt(st,Tt){return st===Tt?Tt:st?`${st} and ${Tt}`:Tt}function at(st){return _e[Math.min(_e.indexOf(st)+1,_e.length-1)]}function ht(st){const Tt=at(st);let kt=$[Tt];return typeof kt=="number"?kt=`${kt-.2}px`:kt=`calc(${kt} - 0.2px)`,`(max-width: ${kt})`}function pt(st){let Tt=$[st];return typeof Tt=="number"&&(Tt=`${Tt}px`),`(min-width: ${Tt})`}function wt(st,Tt,kt){let Mt;typeof st=="object"?(Mt=st,kt=Tt,Tt=!0):(Tt=Tt||!0,Mt={[st]:Tt});let Dt=reactExports.useMemo(()=>Object.entries(Mt).reduce((Ot,[Ut,qt])=>((qt==="up"||qt===!0)&&(Ot=rt(Ot,pt(Ut))),(qt==="down"||qt===!0)&&(Ot=rt(Ot,ht(Ut))),Ot),""),[JSON.stringify(Mt)]);return useMediaQuery(Dt,kt)}return wt}const useBreakpoint=createBreakpointHook({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400});function activeElement($){$===void 0&&($=ownerDocument());try{var _e=$.activeElement;return!_e||!_e.nodeName?null:_e}catch{return $.body}}function contains$1($,_e){if($.contains)return $.contains(_e);if($.compareDocumentPosition)return $===_e||!!($.compareDocumentPosition(_e)&16)}function useUpdatedRef($){const _e=reactExports.useRef($);return _e.current=$,_e}function useWillUnmount($){const _e=useUpdatedRef($);reactExports.useEffect(()=>()=>_e.current(),[])}function getBodyScrollbarWidth($=document){const _e=$.defaultView;return Math.abs(_e.innerWidth-$.documentElement.clientWidth)}const OPEN_DATA_ATTRIBUTE=dataAttr("modal-open");class ModalManager{constructor({ownerDocument:_e,handleContainerOverflow:rt=!0,isRTL:at=!1}={}){this.handleContainerOverflow=rt,this.isRTL=at,this.modals=[],this.ownerDocument=_e}getScrollbarWidth(){return getBodyScrollbarWidth(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(_e){}removeModalAttributes(_e){}setContainerStyle(_e){const rt={overflow:"hidden"},at=this.isRTL?"paddingLeft":"paddingRight",ht=this.getElement();_e.style={overflow:ht.style.overflow,[at]:ht.style[at]},_e.scrollBarWidth&&(rt[at]=`${parseInt(style(ht,at)||"0",10)+_e.scrollBarWidth}px`),ht.setAttribute(OPEN_DATA_ATTRIBUTE,""),style(ht,rt)}reset(){[...this.modals].forEach(_e=>this.remove(_e))}removeContainerStyle(_e){const rt=this.getElement();rt.removeAttribute(OPEN_DATA_ATTRIBUTE),Object.assign(rt.style,_e.style)}add(_e){let rt=this.modals.indexOf(_e);return rt!==-1||(rt=this.modals.length,this.modals.push(_e),this.setModalAttributes(_e),rt!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),rt}remove(_e){const rt=this.modals.indexOf(_e);rt!==-1&&(this.modals.splice(rt,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(_e))}isTopModal(_e){return!!this.modals.length&&this.modals[this.modals.length-1]===_e}}const ModalManager$1=ModalManager,Context=reactExports.createContext(canUseDOM$1?window:void 0);Context.Provider;function useWindow(){return reactExports.useContext(Context)}const resolveContainerRef=($,_e)=>canUseDOM$1?$==null?(_e||ownerDocument()).body:(typeof $=="function"&&($=$()),$&&"current"in $&&($=$.current),$&&("nodeType"in $||$.getBoundingClientRect)?$:null):null;function useWaitForDOMRef($,_e){const rt=useWindow(),[at,ht]=reactExports.useState(()=>resolveContainerRef($,rt==null?void 0:rt.document));if(!at){const pt=resolveContainerRef($);pt&&ht(pt)}return reactExports.useEffect(()=>{_e&&at&&_e(at)},[_e,at]),reactExports.useEffect(()=>{const pt=resolveContainerRef($);pt!==at&&ht(pt)},[$,at]),at}function NoopTransition({children:$,in:_e,onExited:rt,mountOnEnter:at,unmountOnExit:ht}){const pt=reactExports.useRef(null),wt=reactExports.useRef(_e),st=useEventCallback(rt);reactExports.useEffect(()=>{_e?wt.current=!0:st(pt.current)},[_e,st]);const Tt=useMergedRefs(pt,$.ref),kt=reactExports.cloneElement($,{ref:Tt});return _e?kt:ht||!wt.current&&at?null:kt}function useTransition({in:$,onTransition:_e}){const rt=reactExports.useRef(null),at=reactExports.useRef(!0),ht=useEventCallback(_e);return useIsomorphicEffect(()=>{if(!rt.current)return;let pt=!1;return ht({in:$,element:rt.current,initial:at.current,isStale:()=>pt}),()=>{pt=!0}},[$,ht]),useIsomorphicEffect(()=>(at.current=!1,()=>{at.current=!0}),[]),rt}function ImperativeTransition({children:$,in:_e,onExited:rt,onEntered:at,transition:ht}){const[pt,wt]=reactExports.useState(!_e);_e&&pt&&wt(!1);const st=useTransition({in:!!_e,onTransition:kt=>{const Mt=()=>{kt.isStale()||(kt.in?at==null||at(kt.element,kt.initial):(wt(!0),rt==null||rt(kt.element)))};Promise.resolve(ht(kt)).then(Mt,Dt=>{throw kt.in||wt(!0),Dt})}}),Tt=useMergedRefs(st,$.ref);return pt&&!_e?null:reactExports.cloneElement($,{ref:Tt})}function renderTransition($,_e,rt){return $?jsxRuntimeExports.jsx($,Object.assign({},rt)):_e?jsxRuntimeExports.jsx(ImperativeTransition,Object.assign({},rt,{transition:_e})):jsxRuntimeExports.jsx(NoopTransition,Object.assign({},rt))}function isEscKey($){return $.code==="Escape"||$.keyCode===27}const _excluded$5=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function _objectWithoutPropertiesLoose$4($,_e){if($==null)return{};var rt={},at=Object.keys($),ht,pt;for(pt=0;pt<at.length;pt++)ht=at[pt],!(_e.indexOf(ht)>=0)&&(rt[ht]=$[ht]);return rt}let manager;function getManager($){return manager||(manager=new ModalManager$1({ownerDocument:$==null?void 0:$.document})),manager}function useModalManager($){const _e=useWindow(),rt=$||getManager(_e),at=reactExports.useRef({dialog:null,backdrop:null});return Object.assign(at.current,{add:()=>rt.add(at.current),remove:()=>rt.remove(at.current),isTopModal:()=>rt.isTopModal(at.current),setDialogRef:reactExports.useCallback(ht=>{at.current.dialog=ht},[]),setBackdropRef:reactExports.useCallback(ht=>{at.current.backdrop=ht},[])})}const Modal=reactExports.forwardRef(($,_e)=>{let{show:rt=!1,role:at="dialog",className:ht,style:pt,children:wt,backdrop:st=!0,keyboard:Tt=!0,onBackdropClick:kt,onEscapeKeyDown:Mt,transition:Dt,runTransition:Ot,backdropTransition:Ut,runBackdropTransition:qt,autoFocus:tr=!0,enforceFocus:ar=!0,restoreFocus:Yt=!0,restoreFocusOptions:Kt,renderDialog:Jt,renderBackdrop:pr=Hn=>jsxRuntimeExports.jsx("div",Object.assign({},Hn)),manager:Sr,container:Er,onShow:Rr,onHide:Lr=()=>{},onExit:Mr,onExited:Zr,onExiting:dn,onEnter:Jr,onEntering:wr,onEntered:Xr}=$,Dr=_objectWithoutPropertiesLoose$4($,_excluded$5);const xn=useWindow(),gn=useWaitForDOMRef(Er),Pr=useModalManager(Sr),Gr=useMounted(),Or=usePrevious(rt),[sn,ln]=reactExports.useState(!rt),kn=reactExports.useRef(null);reactExports.useImperativeHandle(_e,()=>Pr,[Pr]),canUseDOM$1&&!Or&&rt&&(kn.current=activeElement(xn==null?void 0:xn.document)),rt&&sn&&ln(!1);const Bn=useEventCallback(()=>{if(Pr.add(),Ao.current=listen(document,"keydown",uo),vo.current=listen(document,"focus",()=>setTimeout(Nn),!0),Rr&&Rr(),tr){var Hn,Jo;const js=activeElement((Hn=(Jo=Pr.dialog)==null?void 0:Jo.ownerDocument)!=null?Hn:xn==null?void 0:xn.document);Pr.dialog&&js&&!contains$1(Pr.dialog,js)&&(kn.current=js,Pr.dialog.focus())}}),Fn=useEventCallback(()=>{if(Pr.remove(),Ao.current==null||Ao.current(),vo.current==null||vo.current(),Yt){var Hn;(Hn=kn.current)==null||Hn.focus==null||Hn.focus(Kt),kn.current=null}});reactExports.useEffect(()=>{!rt||!gn||Bn()},[rt,gn,Bn]),reactExports.useEffect(()=>{sn&&Fn()},[sn,Fn]),useWillUnmount(()=>{Fn()});const Nn=useEventCallback(()=>{if(!ar||!Gr()||!Pr.isTopModal())return;const Hn=activeElement(xn==null?void 0:xn.document);Pr.dialog&&Hn&&!contains$1(Pr.dialog,Hn)&&Pr.dialog.focus()}),Kn=useEventCallback(Hn=>{Hn.target===Hn.currentTarget&&(kt==null||kt(Hn),st===!0&&Lr())}),uo=useEventCallback(Hn=>{Tt&&isEscKey(Hn)&&Pr.isTopModal()&&(Mt==null||Mt(Hn),Hn.defaultPrevented||Lr())}),vo=reactExports.useRef(),Ao=reactExports.useRef(),Un=(...Hn)=>{ln(!0),Zr==null||Zr(...Hn)};if(!gn)return null;const so=Object.assign({role:at,ref:Pr.setDialogRef,"aria-modal":at==="dialog"?!0:void 0},Dr,{style:pt,className:ht,tabIndex:-1});let Qn=Jt?Jt(so):jsxRuntimeExports.jsx("div",Object.assign({},so,{children:reactExports.cloneElement(wt,{role:"document"})}));Qn=renderTransition(Dt,Ot,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!rt,onExit:Mr,onExiting:dn,onExited:Un,onEnter:Jr,onEntering:wr,onEntered:Xr,children:Qn});let Vo=null;return st&&(Vo=pr({ref:Pr.setBackdropRef,onClick:Kn}),Vo=renderTransition(Ut,qt,{in:!!rt,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Vo})),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ReactDOM.createPortal(jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Vo,Qn]}),gn)})});Modal.displayName="Modal";const BaseModal=Object.assign(Modal,{Manager:ModalManager$1}),fadeStyles={[ENTERING]:"show",[ENTERED]:"show"},Fade=reactExports.forwardRef(({className:$,children:_e,transitionClasses:rt={},onEnter:at,...ht},pt)=>{const wt={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...ht},st=reactExports.useCallback((Tt,kt)=>{triggerBrowserReflow(Tt),at==null||at(Tt,kt)},[at]);return jsxRuntimeExports.jsx(TransitionWrapper$1,{ref:pt,addEndListener:transitionEndListener,...wt,onEnter:st,childRef:_e.ref,children:(Tt,kt)=>reactExports.cloneElement(_e,{...kt,className:classNames("fade",$,_e.props.className,fadeStyles[Tt],rt[Tt])})})});Fade.displayName="Fade";const Fade$1=Fade,OffcanvasBody=reactExports.forwardRef(({className:$,bsPrefix:_e,as:rt="div",...at},ht)=>(_e=useBootstrapPrefix(_e,"offcanvas-body"),jsxRuntimeExports.jsx(rt,{ref:ht,className:classNames($,_e),...at})));OffcanvasBody.displayName="OffcanvasBody";const OffcanvasBody$1=OffcanvasBody,transitionStyles={[ENTERING]:"show",[ENTERED]:"show"},OffcanvasToggling=reactExports.forwardRef(({bsPrefix:$,className:_e,children:rt,in:at=!1,mountOnEnter:ht=!1,unmountOnExit:pt=!1,appear:wt=!1,...st},Tt)=>($=useBootstrapPrefix($,"offcanvas"),jsxRuntimeExports.jsx(TransitionWrapper$1,{ref:Tt,addEndListener:transitionEndListener,in:at,mountOnEnter:ht,unmountOnExit:pt,appear:wt,...st,childRef:rt.ref,children:(kt,Mt)=>reactExports.cloneElement(rt,{...Mt,className:classNames(_e,rt.props.className,(kt===ENTERING||kt===EXITING)&&`${$}-toggling`,transitionStyles[kt])})})));OffcanvasToggling.displayName="OffcanvasToggling";const OffcanvasToggling$1=OffcanvasToggling,ModalContext=reactExports.createContext({onHide(){}}),ModalContext$1=ModalContext,propTypes$2={"aria-label":PropTypes.string,onClick:PropTypes.func,variant:PropTypes.oneOf(["white"])},CloseButton=reactExports.forwardRef(({className:$,variant:_e,"aria-label":rt="Close",...at},ht)=>jsxRuntimeExports.jsx("button",{ref:ht,type:"button",className:classNames("btn-close",_e&&`btn-close-${_e}`,$),"aria-label":rt,...at}));CloseButton.displayName="CloseButton";CloseButton.propTypes=propTypes$2;const CloseButton$1=CloseButton,AbstractModalHeader=reactExports.forwardRef(({closeLabel:$="Close",closeVariant:_e,closeButton:rt=!1,onHide:at,children:ht,...pt},wt)=>{const st=reactExports.useContext(ModalContext$1),Tt=useEventCallback(()=>{st==null||st.onHide(),at==null||at()});return jsxRuntimeExports.jsxs("div",{ref:wt,...pt,children:[ht,rt&&jsxRuntimeExports.jsx(CloseButton$1,{"aria-label":$,variant:_e,onClick:Tt})]})}),AbstractModalHeader$1=AbstractModalHeader,OffcanvasHeader=reactExports.forwardRef(({bsPrefix:$,className:_e,closeLabel:rt="Close",closeButton:at=!1,...ht},pt)=>($=useBootstrapPrefix($,"offcanvas-header"),jsxRuntimeExports.jsx(AbstractModalHeader$1,{ref:pt,...ht,className:classNames(_e,$),closeLabel:rt,closeButton:at})));OffcanvasHeader.displayName="OffcanvasHeader";const OffcanvasHeader$1=OffcanvasHeader,divWithClassName=$=>reactExports.forwardRef((_e,rt)=>jsxRuntimeExports.jsx("div",{..._e,ref:rt,className:classNames(_e.className,$)})),DivStyledAsH5$1=divWithClassName("h5"),OffcanvasTitle=reactExports.forwardRef(({className:$,bsPrefix:_e,as:rt=DivStyledAsH5$1,...at},ht)=>(_e=useBootstrapPrefix(_e,"offcanvas-title"),jsxRuntimeExports.jsx(rt,{ref:ht,className:classNames($,_e),...at})));OffcanvasTitle.displayName="OffcanvasTitle";const OffcanvasTitle$1=OffcanvasTitle;function hasClass($,_e){return $.classList?!!_e&&$.classList.contains(_e):(" "+($.className.baseVal||$.className)+" ").indexOf(" "+_e+" ")!==-1}function addClass($,_e){$.classList?$.classList.add(_e):hasClass($,_e)||(typeof $.className=="string"?$.className=$.className+" "+_e:$.setAttribute("class",($.className&&$.className.baseVal||"")+" "+_e))}function replaceClassName($,_e){return $.replace(new RegExp("(^|\\s)"+_e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function removeClass($,_e){$.classList?$.classList.remove(_e):typeof $.className=="string"?$.className=replaceClassName($.className,_e):$.setAttribute("class",replaceClassName($.className&&$.className.baseVal||"",_e))}const Selector={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class BootstrapModalManager extends ModalManager$1{adjustAndStore(_e,rt,at){const ht=rt.style[_e];rt.dataset[_e]=ht,style(rt,{[_e]:`${parseFloat(style(rt,_e))+at}px`})}restore(_e,rt){const at=rt.dataset[_e];at!==void 0&&(delete rt.dataset[_e],style(rt,{[_e]:at}))}setContainerStyle(_e){super.setContainerStyle(_e);const rt=this.getElement();if(addClass(rt,"modal-open"),!_e.scrollBarWidth)return;const at=this.isRTL?"paddingLeft":"paddingRight",ht=this.isRTL?"marginLeft":"marginRight";qsa(rt,Selector.FIXED_CONTENT).forEach(pt=>this.adjustAndStore(at,pt,_e.scrollBarWidth)),qsa(rt,Selector.STICKY_CONTENT).forEach(pt=>this.adjustAndStore(ht,pt,-_e.scrollBarWidth)),qsa(rt,Selector.NAVBAR_TOGGLER).forEach(pt=>this.adjustAndStore(ht,pt,_e.scrollBarWidth))}removeContainerStyle(_e){super.removeContainerStyle(_e);const rt=this.getElement();removeClass(rt,"modal-open");const at=this.isRTL?"paddingLeft":"paddingRight",ht=this.isRTL?"marginLeft":"marginRight";qsa(rt,Selector.FIXED_CONTENT).forEach(pt=>this.restore(at,pt)),qsa(rt,Selector.STICKY_CONTENT).forEach(pt=>this.restore(ht,pt)),qsa(rt,Selector.NAVBAR_TOGGLER).forEach(pt=>this.restore(ht,pt))}}let sharedManager;function getSharedManager($){return sharedManager||(sharedManager=new BootstrapModalManager($)),sharedManager}const BootstrapModalManager$1=BootstrapModalManager;function DialogTransition($){return jsxRuntimeExports.jsx(OffcanvasToggling$1,{...$})}function BackdropTransition($){return jsxRuntimeExports.jsx(Fade$1,{...$})}const Offcanvas=reactExports.forwardRef(({bsPrefix:$,className:_e,children:rt,"aria-labelledby":at,placement:ht="start",responsive:pt,show:wt=!1,backdrop:st=!0,keyboard:Tt=!0,scroll:kt=!1,onEscapeKeyDown:Mt,onShow:Dt,onHide:Ot,container:Ut,autoFocus:qt=!0,enforceFocus:tr=!0,restoreFocus:ar=!0,restoreFocusOptions:Yt,onEntered:Kt,onExit:Jt,onExiting:pr,onEnter:Sr,onEntering:Er,onExited:Rr,backdropClassName:Lr,manager:Mr,renderStaticNode:Zr=!1,...dn},Jr)=>{const wr=reactExports.useRef();$=useBootstrapPrefix($,"offcanvas");const{onToggle:Xr}=reactExports.useContext(NavbarContext)||{},[Dr,xn]=reactExports.useState(!1),gn=useBreakpoint(pt||"xs","up");reactExports.useEffect(()=>{xn(pt?wt&&!gn:wt)},[wt,pt,gn]);const Pr=useEventCallback(()=>{Xr==null||Xr(),Ot==null||Ot()}),Gr=reactExports.useMemo(()=>({onHide:Pr}),[Pr]);function Or(){return Mr||(kt?(wr.current||(wr.current=new BootstrapModalManager$1({handleContainerOverflow:!1})),wr.current):getSharedManager())}const sn=(Fn,...Nn)=>{Fn&&(Fn.style.visibility="visible"),Sr==null||Sr(Fn,...Nn)},ln=(Fn,...Nn)=>{Fn&&(Fn.style.visibility=""),Rr==null||Rr(...Nn)},kn=reactExports.useCallback(Fn=>jsxRuntimeExports.jsx("div",{...Fn,className:classNames(`${$}-backdrop`,Lr)}),[Lr,$]),Bn=Fn=>jsxRuntimeExports.jsx("div",{...Fn,...dn,className:classNames(_e,pt?`${$}-${pt}`:$,`${$}-${ht}`),"aria-labelledby":at,children:rt});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!Dr&&(pt||Zr)&&Bn({}),jsxRuntimeExports.jsx(ModalContext$1.Provider,{value:Gr,children:jsxRuntimeExports.jsx(BaseModal,{show:Dr,ref:Jr,backdrop:st,container:Ut,keyboard:Tt,autoFocus:qt,enforceFocus:tr&&!kt,restoreFocus:ar,restoreFocusOptions:Yt,onEscapeKeyDown:Mt,onShow:Dt,onHide:Pr,onEnter:sn,onEntering:Er,onEntered:Kt,onExit:Jt,onExiting:pr,onExited:ln,manager:Or(),transition:DialogTransition,backdropTransition:BackdropTransition,renderBackdrop:kn,renderDialog:Bn})})]})});Offcanvas.displayName="Offcanvas";const Offcanvas$1=Object.assign(Offcanvas,{Body:OffcanvasBody$1,Header:OffcanvasHeader$1,Title:OffcanvasTitle$1}),NavbarOffcanvas=reactExports.forwardRef(($,_e)=>{const rt=reactExports.useContext(NavbarContext);return jsxRuntimeExports.jsx(Offcanvas$1,{ref:_e,show:!!(rt!=null&&rt.expanded),...$,renderStaticNode:!0})});NavbarOffcanvas.displayName="NavbarOffcanvas";const NavbarOffcanvas$1=NavbarOffcanvas,NavbarText=reactExports.forwardRef(({className:$,bsPrefix:_e,as:rt="span",...at},ht)=>(_e=useBootstrapPrefix(_e,"navbar-text"),jsxRuntimeExports.jsx(rt,{ref:ht,className:classNames($,_e),...at})));NavbarText.displayName="NavbarText";const NavbarText$1=NavbarText,Navbar=reactExports.forwardRef(($,_e)=>{const{bsPrefix:rt,expand:at=!0,variant:ht="light",bg:pt,fixed:wt,sticky:st,className:Tt,as:kt="nav",expanded:Mt,onToggle:Dt,onSelect:Ot,collapseOnSelect:Ut=!1,...qt}=useUncontrolled($,{expanded:"onToggle"}),tr=useBootstrapPrefix(rt,"navbar"),ar=reactExports.useCallback((...Jt)=>{Ot==null||Ot(...Jt),Ut&&Mt&&(Dt==null||Dt(!1))},[Ot,Ut,Mt,Dt]);qt.role===void 0&&kt!=="nav"&&(qt.role="navigation");let Yt=`${tr}-expand`;typeof at=="string"&&(Yt=`${Yt}-${at}`);const Kt=reactExports.useMemo(()=>({onToggle:()=>Dt==null?void 0:Dt(!Mt),bsPrefix:tr,expanded:!!Mt,expand:at}),[tr,Mt,at,Dt]);return jsxRuntimeExports.jsx(NavbarContext.Provider,{value:Kt,children:jsxRuntimeExports.jsx(SelectableContext.Provider,{value:ar,children:jsxRuntimeExports.jsx(kt,{ref:_e,...qt,className:classNames(Tt,tr,at&&Yt,ht&&`${tr}-${ht}`,pt&&`bg-${pt}`,st&&`sticky-${st}`,wt&&`fixed-${wt}`)})})})});Navbar.displayName="Navbar";const Navbar$1=Object.assign(Navbar,{Brand:NavbarBrand$1,Collapse:NavbarCollapse$1,Offcanvas:NavbarOffcanvas$1,Text:NavbarText$1,Toggle:NavbarToggle$1});function useUncontrolledProp($,_e,rt){const at=reactExports.useRef($!==void 0),[ht,pt]=reactExports.useState(_e),wt=$!==void 0,st=at.current;return at.current=wt,!wt&&st&&ht!==_e&&pt(_e),[wt?$:ht,reactExports.useCallback((...Tt)=>{const[kt,...Mt]=Tt;let Dt=rt==null?void 0:rt(kt,...Mt);return pt(kt),Dt},[rt])]}const DropdownContext$2=reactExports.createContext(null),DropdownContext$3=DropdownContext$2;var has=Object.prototype.hasOwnProperty;function find($,_e,rt){for(rt of $.keys())if(dequal(rt,_e))return rt}function dequal($,_e){var rt,at,ht;if($===_e)return!0;if($&&_e&&(rt=$.constructor)===_e.constructor){if(rt===Date)return $.getTime()===_e.getTime();if(rt===RegExp)return $.toString()===_e.toString();if(rt===Array){if((at=$.length)===_e.length)for(;at--&&dequal($[at],_e[at]););return at===-1}if(rt===Set){if($.size!==_e.size)return!1;for(at of $)if(ht=at,ht&&typeof ht=="object"&&(ht=find(_e,ht),!ht)||!_e.has(ht))return!1;return!0}if(rt===Map){if($.size!==_e.size)return!1;for(at of $)if(ht=at[0],ht&&typeof ht=="object"&&(ht=find(_e,ht),!ht)||!dequal(at[1],_e.get(ht)))return!1;return!0}if(rt===ArrayBuffer)$=new Uint8Array($),_e=new Uint8Array(_e);else if(rt===DataView){if((at=$.byteLength)===_e.byteLength)for(;at--&&$.getInt8(at)===_e.getInt8(at););return at===-1}if(ArrayBuffer.isView($)){if((at=$.byteLength)===_e.byteLength)for(;at--&&$[at]===_e[at];);return at===-1}if(!rt||typeof $=="object"){at=0;for(rt in $)if(has.call($,rt)&&++at&&!has.call(_e,rt)||!(rt in _e)||!dequal($[rt],_e[rt]))return!1;return Object.keys(_e).length===at}}return $!==$&&_e!==_e}function useSafeState($){const _e=useMounted();return[$[0],reactExports.useCallback(rt=>{if(_e())return $[1](rt)},[_e,$[1]])]}var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function($,_e){return $.concat([_e+"-"+start,_e+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function($,_e){return $.concat([_e,_e+"-"+start,_e+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getBasePlacement($){return $.split("-")[0]}function getWindow($){if($==null)return window;if($.toString()!=="[object Window]"){var _e=$.ownerDocument;return _e&&_e.defaultView||window}return $}function isElement($){var _e=getWindow($).Element;return $ instanceof _e||$ instanceof Element}function isHTMLElement($){var _e=getWindow($).HTMLElement;return $ instanceof _e||$ instanceof HTMLElement}function isShadowRoot($){if(typeof ShadowRoot>"u")return!1;var _e=getWindow($).ShadowRoot;return $ instanceof _e||$ instanceof ShadowRoot}var max=Math.max,min=Math.min,round=Math.round;function getUAString(){var $=navigator.userAgentData;return $!=null&&$.brands&&Array.isArray($.brands)?$.brands.map(function(_e){return _e.brand+"/"+_e.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect($,_e,rt){_e===void 0&&(_e=!1),rt===void 0&&(rt=!1);var at=$.getBoundingClientRect(),ht=1,pt=1;_e&&isHTMLElement($)&&(ht=$.offsetWidth>0&&round(at.width)/$.offsetWidth||1,pt=$.offsetHeight>0&&round(at.height)/$.offsetHeight||1);var wt=isElement($)?getWindow($):window,st=wt.visualViewport,Tt=!isLayoutViewport()&&rt,kt=(at.left+(Tt&&st?st.offsetLeft:0))/ht,Mt=(at.top+(Tt&&st?st.offsetTop:0))/pt,Dt=at.width/ht,Ot=at.height/pt;return{width:Dt,height:Ot,top:Mt,right:kt+Dt,bottom:Mt+Ot,left:kt,x:kt,y:Mt}}function getLayoutRect($){var _e=getBoundingClientRect($),rt=$.offsetWidth,at=$.offsetHeight;return Math.abs(_e.width-rt)<=1&&(rt=_e.width),Math.abs(_e.height-at)<=1&&(at=_e.height),{x:$.offsetLeft,y:$.offsetTop,width:rt,height:at}}function contains($,_e){var rt=_e.getRootNode&&_e.getRootNode();if($.contains(_e))return!0;if(rt&&isShadowRoot(rt)){var at=_e;do{if(at&&$.isSameNode(at))return!0;at=at.parentNode||at.host}while(at)}return!1}function getNodeName($){return $?($.nodeName||"").toLowerCase():null}function getComputedStyle$1($){return getWindow($).getComputedStyle($)}function isTableElement($){return["table","td","th"].indexOf(getNodeName($))>=0}function getDocumentElement($){return((isElement($)?$.ownerDocument:$.document)||window.document).documentElement}function getParentNode($){return getNodeName($)==="html"?$:$.assignedSlot||$.parentNode||(isShadowRoot($)?$.host:null)||getDocumentElement($)}function getTrueOffsetParent($){return!isHTMLElement($)||getComputedStyle$1($).position==="fixed"?null:$.offsetParent}function getContainingBlock($){var _e=/firefox/i.test(getUAString()),rt=/Trident/i.test(getUAString());if(rt&&isHTMLElement($)){var at=getComputedStyle$1($);if(at.position==="fixed")return null}var ht=getParentNode($);for(isShadowRoot(ht)&&(ht=ht.host);isHTMLElement(ht)&&["html","body"].indexOf(getNodeName(ht))<0;){var pt=getComputedStyle$1(ht);if(pt.transform!=="none"||pt.perspective!=="none"||pt.contain==="paint"||["transform","perspective"].indexOf(pt.willChange)!==-1||_e&&pt.willChange==="filter"||_e&&pt.filter&&pt.filter!=="none")return ht;ht=ht.parentNode}return null}function getOffsetParent($){for(var _e=getWindow($),rt=getTrueOffsetParent($);rt&&isTableElement(rt)&&getComputedStyle$1(rt).position==="static";)rt=getTrueOffsetParent(rt);return rt&&(getNodeName(rt)==="html"||getNodeName(rt)==="body"&&getComputedStyle$1(rt).position==="static")?_e:rt||getContainingBlock($)||_e}function getMainAxisFromPlacement($){return["top","bottom"].indexOf($)>=0?"x":"y"}function within($,_e,rt){return max($,min(_e,rt))}function withinMaxClamp($,_e,rt){var at=within($,_e,rt);return at>rt?rt:at}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject($){return Object.assign({},getFreshSideObject(),$)}function expandToHashMap($,_e){return _e.reduce(function(rt,at){return rt[at]=$,rt},{})}var toPaddingObject=function(_e,rt){return _e=typeof _e=="function"?_e(Object.assign({},rt.rects,{placement:rt.placement})):_e,mergePaddingObject(typeof _e!="number"?_e:expandToHashMap(_e,basePlacements))};function arrow($){var _e,rt=$.state,at=$.name,ht=$.options,pt=rt.elements.arrow,wt=rt.modifiersData.popperOffsets,st=getBasePlacement(rt.placement),Tt=getMainAxisFromPlacement(st),kt=[left,right].indexOf(st)>=0,Mt=kt?"height":"width";if(!(!pt||!wt)){var Dt=toPaddingObject(ht.padding,rt),Ot=getLayoutRect(pt),Ut=Tt==="y"?top:left,qt=Tt==="y"?bottom:right,tr=rt.rects.reference[Mt]+rt.rects.reference[Tt]-wt[Tt]-rt.rects.popper[Mt],ar=wt[Tt]-rt.rects.reference[Tt],Yt=getOffsetParent(pt),Kt=Yt?Tt==="y"?Yt.clientHeight||0:Yt.clientWidth||0:0,Jt=tr/2-ar/2,pr=Dt[Ut],Sr=Kt-Ot[Mt]-Dt[qt],Er=Kt/2-Ot[Mt]/2+Jt,Rr=within(pr,Er,Sr),Lr=Tt;rt.modifiersData[at]=(_e={},_e[Lr]=Rr,_e.centerOffset=Rr-Er,_e)}}function effect$1($){var _e=$.state,rt=$.options,at=rt.element,ht=at===void 0?"[data-popper-arrow]":at;ht!=null&&(typeof ht=="string"&&(ht=_e.elements.popper.querySelector(ht),!ht)||contains(_e.elements.popper,ht)&&(_e.elements.arrow=ht))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation($){return $.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR($,_e){var rt=$.x,at=$.y,ht=_e.devicePixelRatio||1;return{x:round(rt*ht)/ht||0,y:round(at*ht)/ht||0}}function mapToStyles($){var _e,rt=$.popper,at=$.popperRect,ht=$.placement,pt=$.variation,wt=$.offsets,st=$.position,Tt=$.gpuAcceleration,kt=$.adaptive,Mt=$.roundOffsets,Dt=$.isFixed,Ot=wt.x,Ut=Ot===void 0?0:Ot,qt=wt.y,tr=qt===void 0?0:qt,ar=typeof Mt=="function"?Mt({x:Ut,y:tr}):{x:Ut,y:tr};Ut=ar.x,tr=ar.y;var Yt=wt.hasOwnProperty("x"),Kt=wt.hasOwnProperty("y"),Jt=left,pr=top,Sr=window;if(kt){var Er=getOffsetParent(rt),Rr="clientHeight",Lr="clientWidth";if(Er===getWindow(rt)&&(Er=getDocumentElement(rt),getComputedStyle$1(Er).position!=="static"&&st==="absolute"&&(Rr="scrollHeight",Lr="scrollWidth")),Er=Er,ht===top||(ht===left||ht===right)&&pt===end){pr=bottom;var Mr=Dt&&Er===Sr&&Sr.visualViewport?Sr.visualViewport.height:Er[Rr];tr-=Mr-at.height,tr*=Tt?1:-1}if(ht===left||(ht===top||ht===bottom)&&pt===end){Jt=right;var Zr=Dt&&Er===Sr&&Sr.visualViewport?Sr.visualViewport.width:Er[Lr];Ut-=Zr-at.width,Ut*=Tt?1:-1}}var dn=Object.assign({position:st},kt&&unsetSides),Jr=Mt===!0?roundOffsetsByDPR({x:Ut,y:tr},getWindow(rt)):{x:Ut,y:tr};if(Ut=Jr.x,tr=Jr.y,Tt){var wr;return Object.assign({},dn,(wr={},wr[pr]=Kt?"0":"",wr[Jt]=Yt?"0":"",wr.transform=(Sr.devicePixelRatio||1)<=1?"translate("+Ut+"px, "+tr+"px)":"translate3d("+Ut+"px, "+tr+"px, 0)",wr))}return Object.assign({},dn,(_e={},_e[pr]=Kt?tr+"px":"",_e[Jt]=Yt?Ut+"px":"",_e.transform="",_e))}function computeStyles($){var _e=$.state,rt=$.options,at=rt.gpuAcceleration,ht=at===void 0?!0:at,pt=rt.adaptive,wt=pt===void 0?!0:pt,st=rt.roundOffsets,Tt=st===void 0?!0:st,kt={placement:getBasePlacement(_e.placement),variation:getVariation(_e.placement),popper:_e.elements.popper,popperRect:_e.rects.popper,gpuAcceleration:ht,isFixed:_e.options.strategy==="fixed"};_e.modifiersData.popperOffsets!=null&&(_e.styles.popper=Object.assign({},_e.styles.popper,mapToStyles(Object.assign({},kt,{offsets:_e.modifiersData.popperOffsets,position:_e.options.strategy,adaptive:wt,roundOffsets:Tt})))),_e.modifiersData.arrow!=null&&(_e.styles.arrow=Object.assign({},_e.styles.arrow,mapToStyles(Object.assign({},kt,{offsets:_e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Tt})))),_e.attributes.popper=Object.assign({},_e.attributes.popper,{"data-popper-placement":_e.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect($){var _e=$.state,rt=$.instance,at=$.options,ht=at.scroll,pt=ht===void 0?!0:ht,wt=at.resize,st=wt===void 0?!0:wt,Tt=getWindow(_e.elements.popper),kt=[].concat(_e.scrollParents.reference,_e.scrollParents.popper);return pt&&kt.forEach(function(Mt){Mt.addEventListener("scroll",rt.update,passive)}),st&&Tt.addEventListener("resize",rt.update,passive),function(){pt&&kt.forEach(function(Mt){Mt.removeEventListener("scroll",rt.update,passive)}),st&&Tt.removeEventListener("resize",rt.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement($){return $.replace(/left|right|bottom|top/g,function(_e){return hash$1[_e]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement($){return $.replace(/start|end/g,function(_e){return hash[_e]})}function getWindowScroll($){var _e=getWindow($),rt=_e.pageXOffset,at=_e.pageYOffset;return{scrollLeft:rt,scrollTop:at}}function getWindowScrollBarX($){return getBoundingClientRect(getDocumentElement($)).left+getWindowScroll($).scrollLeft}function getViewportRect($,_e){var rt=getWindow($),at=getDocumentElement($),ht=rt.visualViewport,pt=at.clientWidth,wt=at.clientHeight,st=0,Tt=0;if(ht){pt=ht.width,wt=ht.height;var kt=isLayoutViewport();(kt||!kt&&_e==="fixed")&&(st=ht.offsetLeft,Tt=ht.offsetTop)}return{width:pt,height:wt,x:st+getWindowScrollBarX($),y:Tt}}function getDocumentRect($){var _e,rt=getDocumentElement($),at=getWindowScroll($),ht=(_e=$.ownerDocument)==null?void 0:_e.body,pt=max(rt.scrollWidth,rt.clientWidth,ht?ht.scrollWidth:0,ht?ht.clientWidth:0),wt=max(rt.scrollHeight,rt.clientHeight,ht?ht.scrollHeight:0,ht?ht.clientHeight:0),st=-at.scrollLeft+getWindowScrollBarX($),Tt=-at.scrollTop;return getComputedStyle$1(ht||rt).direction==="rtl"&&(st+=max(rt.clientWidth,ht?ht.clientWidth:0)-pt),{width:pt,height:wt,x:st,y:Tt}}function isScrollParent($){var _e=getComputedStyle$1($),rt=_e.overflow,at=_e.overflowX,ht=_e.overflowY;return/auto|scroll|overlay|hidden/.test(rt+ht+at)}function getScrollParent($){return["html","body","#document"].indexOf(getNodeName($))>=0?$.ownerDocument.body:isHTMLElement($)&&isScrollParent($)?$:getScrollParent(getParentNode($))}function listScrollParents($,_e){var rt;_e===void 0&&(_e=[]);var at=getScrollParent($),ht=at===((rt=$.ownerDocument)==null?void 0:rt.body),pt=getWindow(at),wt=ht?[pt].concat(pt.visualViewport||[],isScrollParent(at)?at:[]):at,st=_e.concat(wt);return ht?st:st.concat(listScrollParents(getParentNode(wt)))}function rectToClientRect($){return Object.assign({},$,{left:$.x,top:$.y,right:$.x+$.width,bottom:$.y+$.height})}function getInnerBoundingClientRect($,_e){var rt=getBoundingClientRect($,!1,_e==="fixed");return rt.top=rt.top+$.clientTop,rt.left=rt.left+$.clientLeft,rt.bottom=rt.top+$.clientHeight,rt.right=rt.left+$.clientWidth,rt.width=$.clientWidth,rt.height=$.clientHeight,rt.x=rt.left,rt.y=rt.top,rt}function getClientRectFromMixedType($,_e,rt){return _e===viewport?rectToClientRect(getViewportRect($,rt)):isElement(_e)?getInnerBoundingClientRect(_e,rt):rectToClientRect(getDocumentRect(getDocumentElement($)))}function getClippingParents($){var _e=listScrollParents(getParentNode($)),rt=["absolute","fixed"].indexOf(getComputedStyle$1($).position)>=0,at=rt&&isHTMLElement($)?getOffsetParent($):$;return isElement(at)?_e.filter(function(ht){return isElement(ht)&&contains(ht,at)&&getNodeName(ht)!=="body"}):[]}function getClippingRect($,_e,rt,at){var ht=_e==="clippingParents"?getClippingParents($):[].concat(_e),pt=[].concat(ht,[rt]),wt=pt[0],st=pt.reduce(function(Tt,kt){var Mt=getClientRectFromMixedType($,kt,at);return Tt.top=max(Mt.top,Tt.top),Tt.right=min(Mt.right,Tt.right),Tt.bottom=min(Mt.bottom,Tt.bottom),Tt.left=max(Mt.left,Tt.left),Tt},getClientRectFromMixedType($,wt,at));return st.width=st.right-st.left,st.height=st.bottom-st.top,st.x=st.left,st.y=st.top,st}function computeOffsets($){var _e=$.reference,rt=$.element,at=$.placement,ht=at?getBasePlacement(at):null,pt=at?getVariation(at):null,wt=_e.x+_e.width/2-rt.width/2,st=_e.y+_e.height/2-rt.height/2,Tt;switch(ht){case top:Tt={x:wt,y:_e.y-rt.height};break;case bottom:Tt={x:wt,y:_e.y+_e.height};break;case right:Tt={x:_e.x+_e.width,y:st};break;case left:Tt={x:_e.x-rt.width,y:st};break;default:Tt={x:_e.x,y:_e.y}}var kt=ht?getMainAxisFromPlacement(ht):null;if(kt!=null){var Mt=kt==="y"?"height":"width";switch(pt){case start:Tt[kt]=Tt[kt]-(_e[Mt]/2-rt[Mt]/2);break;case end:Tt[kt]=Tt[kt]+(_e[Mt]/2-rt[Mt]/2);break}}return Tt}function detectOverflow($,_e){_e===void 0&&(_e={});var rt=_e,at=rt.placement,ht=at===void 0?$.placement:at,pt=rt.strategy,wt=pt===void 0?$.strategy:pt,st=rt.boundary,Tt=st===void 0?clippingParents:st,kt=rt.rootBoundary,Mt=kt===void 0?viewport:kt,Dt=rt.elementContext,Ot=Dt===void 0?popper:Dt,Ut=rt.altBoundary,qt=Ut===void 0?!1:Ut,tr=rt.padding,ar=tr===void 0?0:tr,Yt=mergePaddingObject(typeof ar!="number"?ar:expandToHashMap(ar,basePlacements)),Kt=Ot===popper?reference:popper,Jt=$.rects.popper,pr=$.elements[qt?Kt:Ot],Sr=getClippingRect(isElement(pr)?pr:pr.contextElement||getDocumentElement($.elements.popper),Tt,Mt,wt),Er=getBoundingClientRect($.elements.reference),Rr=computeOffsets({reference:Er,element:Jt,strategy:"absolute",placement:ht}),Lr=rectToClientRect(Object.assign({},Jt,Rr)),Mr=Ot===popper?Lr:Er,Zr={top:Sr.top-Mr.top+Yt.top,bottom:Mr.bottom-Sr.bottom+Yt.bottom,left:Sr.left-Mr.left+Yt.left,right:Mr.right-Sr.right+Yt.right},dn=$.modifiersData.offset;if(Ot===popper&&dn){var Jr=dn[ht];Object.keys(Zr).forEach(function(wr){var Xr=[right,bottom].indexOf(wr)>=0?1:-1,Dr=[top,bottom].indexOf(wr)>=0?"y":"x";Zr[wr]+=Jr[Dr]*Xr})}return Zr}function computeAutoPlacement($,_e){_e===void 0&&(_e={});var rt=_e,at=rt.placement,ht=rt.boundary,pt=rt.rootBoundary,wt=rt.padding,st=rt.flipVariations,Tt=rt.allowedAutoPlacements,kt=Tt===void 0?placements:Tt,Mt=getVariation(at),Dt=Mt?st?variationPlacements:variationPlacements.filter(function(qt){return getVariation(qt)===Mt}):basePlacements,Ot=Dt.filter(function(qt){return kt.indexOf(qt)>=0});Ot.length===0&&(Ot=Dt);var Ut=Ot.reduce(function(qt,tr){return qt[tr]=detectOverflow($,{placement:tr,boundary:ht,rootBoundary:pt,padding:wt})[getBasePlacement(tr)],qt},{});return Object.keys(Ut).sort(function(qt,tr){return Ut[qt]-Ut[tr]})}function getExpandedFallbackPlacements($){if(getBasePlacement($)===auto)return[];var _e=getOppositePlacement($);return[getOppositeVariationPlacement($),_e,getOppositeVariationPlacement(_e)]}function flip($){var _e=$.state,rt=$.options,at=$.name;if(!_e.modifiersData[at]._skip){for(var ht=rt.mainAxis,pt=ht===void 0?!0:ht,wt=rt.altAxis,st=wt===void 0?!0:wt,Tt=rt.fallbackPlacements,kt=rt.padding,Mt=rt.boundary,Dt=rt.rootBoundary,Ot=rt.altBoundary,Ut=rt.flipVariations,qt=Ut===void 0?!0:Ut,tr=rt.allowedAutoPlacements,ar=_e.options.placement,Yt=getBasePlacement(ar),Kt=Yt===ar,Jt=Tt||(Kt||!qt?[getOppositePlacement(ar)]:getExpandedFallbackPlacements(ar)),pr=[ar].concat(Jt).reduce(function(Bn,Fn){return Bn.concat(getBasePlacement(Fn)===auto?computeAutoPlacement(_e,{placement:Fn,boundary:Mt,rootBoundary:Dt,padding:kt,flipVariations:qt,allowedAutoPlacements:tr}):Fn)},[]),Sr=_e.rects.reference,Er=_e.rects.popper,Rr=new Map,Lr=!0,Mr=pr[0],Zr=0;Zr<pr.length;Zr++){var dn=pr[Zr],Jr=getBasePlacement(dn),wr=getVariation(dn)===start,Xr=[top,bottom].indexOf(Jr)>=0,Dr=Xr?"width":"height",xn=detectOverflow(_e,{placement:dn,boundary:Mt,rootBoundary:Dt,altBoundary:Ot,padding:kt}),gn=Xr?wr?right:left:wr?bottom:top;Sr[Dr]>Er[Dr]&&(gn=getOppositePlacement(gn));var Pr=getOppositePlacement(gn),Gr=[];if(pt&&Gr.push(xn[Jr]<=0),st&&Gr.push(xn[gn]<=0,xn[Pr]<=0),Gr.every(function(Bn){return Bn})){Mr=dn,Lr=!1;break}Rr.set(dn,Gr)}if(Lr)for(var Or=qt?3:1,sn=function(Fn){var Nn=pr.find(function(Kn){var uo=Rr.get(Kn);if(uo)return uo.slice(0,Fn).every(function(vo){return vo})});if(Nn)return Mr=Nn,"break"},ln=Or;ln>0;ln--){var kn=sn(ln);if(kn==="break")break}_e.placement!==Mr&&(_e.modifiersData[at]._skip=!0,_e.placement=Mr,_e.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets($,_e,rt){return rt===void 0&&(rt={x:0,y:0}),{top:$.top-_e.height-rt.y,right:$.right-_e.width+rt.x,bottom:$.bottom-_e.height+rt.y,left:$.left-_e.width-rt.x}}function isAnySideFullyClipped($){return[top,right,bottom,left].some(function(_e){return $[_e]>=0})}function hide($){var _e=$.state,rt=$.name,at=_e.rects.reference,ht=_e.rects.popper,pt=_e.modifiersData.preventOverflow,wt=detectOverflow(_e,{elementContext:"reference"}),st=detectOverflow(_e,{altBoundary:!0}),Tt=getSideOffsets(wt,at),kt=getSideOffsets(st,ht,pt),Mt=isAnySideFullyClipped(Tt),Dt=isAnySideFullyClipped(kt);_e.modifiersData[rt]={referenceClippingOffsets:Tt,popperEscapeOffsets:kt,isReferenceHidden:Mt,hasPopperEscaped:Dt},_e.attributes.popper=Object.assign({},_e.attributes.popper,{"data-popper-reference-hidden":Mt,"data-popper-escaped":Dt})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY($,_e,rt){var at=getBasePlacement($),ht=[left,top].indexOf(at)>=0?-1:1,pt=typeof rt=="function"?rt(Object.assign({},_e,{placement:$})):rt,wt=pt[0],st=pt[1];return wt=wt||0,st=(st||0)*ht,[left,right].indexOf(at)>=0?{x:st,y:wt}:{x:wt,y:st}}function offset($){var _e=$.state,rt=$.options,at=$.name,ht=rt.offset,pt=ht===void 0?[0,0]:ht,wt=placements.reduce(function(Mt,Dt){return Mt[Dt]=distanceAndSkiddingToXY(Dt,_e.rects,pt),Mt},{}),st=wt[_e.placement],Tt=st.x,kt=st.y;_e.modifiersData.popperOffsets!=null&&(_e.modifiersData.popperOffsets.x+=Tt,_e.modifiersData.popperOffsets.y+=kt),_e.modifiersData[at]=wt}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets($){var _e=$.state,rt=$.name;_e.modifiersData[rt]=computeOffsets({reference:_e.rects.reference,element:_e.rects.popper,strategy:"absolute",placement:_e.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis($){return $==="x"?"y":"x"}function preventOverflow($){var _e=$.state,rt=$.options,at=$.name,ht=rt.mainAxis,pt=ht===void 0?!0:ht,wt=rt.altAxis,st=wt===void 0?!1:wt,Tt=rt.boundary,kt=rt.rootBoundary,Mt=rt.altBoundary,Dt=rt.padding,Ot=rt.tether,Ut=Ot===void 0?!0:Ot,qt=rt.tetherOffset,tr=qt===void 0?0:qt,ar=detectOverflow(_e,{boundary:Tt,rootBoundary:kt,padding:Dt,altBoundary:Mt}),Yt=getBasePlacement(_e.placement),Kt=getVariation(_e.placement),Jt=!Kt,pr=getMainAxisFromPlacement(Yt),Sr=getAltAxis(pr),Er=_e.modifiersData.popperOffsets,Rr=_e.rects.reference,Lr=_e.rects.popper,Mr=typeof tr=="function"?tr(Object.assign({},_e.rects,{placement:_e.placement})):tr,Zr=typeof Mr=="number"?{mainAxis:Mr,altAxis:Mr}:Object.assign({mainAxis:0,altAxis:0},Mr),dn=_e.modifiersData.offset?_e.modifiersData.offset[_e.placement]:null,Jr={x:0,y:0};if(Er){if(pt){var wr,Xr=pr==="y"?top:left,Dr=pr==="y"?bottom:right,xn=pr==="y"?"height":"width",gn=Er[pr],Pr=gn+ar[Xr],Gr=gn-ar[Dr],Or=Ut?-Lr[xn]/2:0,sn=Kt===start?Rr[xn]:Lr[xn],ln=Kt===start?-Lr[xn]:-Rr[xn],kn=_e.elements.arrow,Bn=Ut&&kn?getLayoutRect(kn):{width:0,height:0},Fn=_e.modifiersData["arrow#persistent"]?_e.modifiersData["arrow#persistent"].padding:getFreshSideObject(),Nn=Fn[Xr],Kn=Fn[Dr],uo=within(0,Rr[xn],Bn[xn]),vo=Jt?Rr[xn]/2-Or-uo-Nn-Zr.mainAxis:sn-uo-Nn-Zr.mainAxis,Ao=Jt?-Rr[xn]/2+Or+uo+Kn+Zr.mainAxis:ln+uo+Kn+Zr.mainAxis,Un=_e.elements.arrow&&getOffsetParent(_e.elements.arrow),so=Un?pr==="y"?Un.clientTop||0:Un.clientLeft||0:0,Qn=(wr=dn==null?void 0:dn[pr])!=null?wr:0,Vo=gn+vo-Qn-so,Hn=gn+Ao-Qn,Jo=within(Ut?min(Pr,Vo):Pr,gn,Ut?max(Gr,Hn):Gr);Er[pr]=Jo,Jr[pr]=Jo-gn}if(st){var js,Ds=pr==="x"?top:left,vs=pr==="x"?bottom:right,ks=Er[Sr],Ls=Sr==="y"?"height":"width",Vs=ks+ar[Ds],ws=ks-ar[vs],Ro=[top,left].indexOf(Yt)!==-1,Xo=(js=dn==null?void 0:dn[Sr])!=null?js:0,os=Ro?Vs:ks-Rr[Ls]-Lr[Ls]-Xo+Zr.altAxis,ko=Ro?ks+Rr[Ls]+Lr[Ls]-Xo-Zr.altAxis:ws,ys=Ut&&Ro?withinMaxClamp(os,ks,ko):within(Ut?os:Vs,ks,Ut?ko:ws);Er[Sr]=ys,Jr[Sr]=ys-ks}_e.modifiersData[at]=Jr}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll($){return{scrollLeft:$.scrollLeft,scrollTop:$.scrollTop}}function getNodeScroll($){return $===getWindow($)||!isHTMLElement($)?getWindowScroll($):getHTMLElementScroll($)}function isElementScaled($){var _e=$.getBoundingClientRect(),rt=round(_e.width)/$.offsetWidth||1,at=round(_e.height)/$.offsetHeight||1;return rt!==1||at!==1}function getCompositeRect($,_e,rt){rt===void 0&&(rt=!1);var at=isHTMLElement(_e),ht=isHTMLElement(_e)&&isElementScaled(_e),pt=getDocumentElement(_e),wt=getBoundingClientRect($,ht,rt),st={scrollLeft:0,scrollTop:0},Tt={x:0,y:0};return(at||!at&&!rt)&&((getNodeName(_e)!=="body"||isScrollParent(pt))&&(st=getNodeScroll(_e)),isHTMLElement(_e)?(Tt=getBoundingClientRect(_e,!0),Tt.x+=_e.clientLeft,Tt.y+=_e.clientTop):pt&&(Tt.x=getWindowScrollBarX(pt))),{x:wt.left+st.scrollLeft-Tt.x,y:wt.top+st.scrollTop-Tt.y,width:wt.width,height:wt.height}}function order($){var _e=new Map,rt=new Set,at=[];$.forEach(function(pt){_e.set(pt.name,pt)});function ht(pt){rt.add(pt.name);var wt=[].concat(pt.requires||[],pt.requiresIfExists||[]);wt.forEach(function(st){if(!rt.has(st)){var Tt=_e.get(st);Tt&&ht(Tt)}}),at.push(pt)}return $.forEach(function(pt){rt.has(pt.name)||ht(pt)}),at}function orderModifiers($){var _e=order($);return modifierPhases.reduce(function(rt,at){return rt.concat(_e.filter(function(ht){return ht.phase===at}))},[])}function debounce($){var _e;return function(){return _e||(_e=new Promise(function(rt){Promise.resolve().then(function(){_e=void 0,rt($())})})),_e}}function mergeByName($){var _e=$.reduce(function(rt,at){var ht=rt[at.name];return rt[at.name]=ht?Object.assign({},ht,at,{options:Object.assign({},ht.options,at.options),data:Object.assign({},ht.data,at.data)}):at,rt},{});return Object.keys(_e).map(function(rt){return _e[rt]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var $=arguments.length,_e=new Array($),rt=0;rt<$;rt++)_e[rt]=arguments[rt];return!_e.some(function(at){return!(at&&typeof at.getBoundingClientRect=="function")})}function popperGenerator($){$===void 0&&($={});var _e=$,rt=_e.defaultModifiers,at=rt===void 0?[]:rt,ht=_e.defaultOptions,pt=ht===void 0?DEFAULT_OPTIONS:ht;return function(st,Tt,kt){kt===void 0&&(kt=pt);var Mt={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,pt),modifiersData:{},elements:{reference:st,popper:Tt},attributes:{},styles:{}},Dt=[],Ot=!1,Ut={state:Mt,setOptions:function(Yt){var Kt=typeof Yt=="function"?Yt(Mt.options):Yt;tr(),Mt.options=Object.assign({},pt,Mt.options,Kt),Mt.scrollParents={reference:isElement(st)?listScrollParents(st):st.contextElement?listScrollParents(st.contextElement):[],popper:listScrollParents(Tt)};var Jt=orderModifiers(mergeByName([].concat(at,Mt.options.modifiers)));return Mt.orderedModifiers=Jt.filter(function(pr){return pr.enabled}),qt(),Ut.update()},forceUpdate:function(){if(!Ot){var Yt=Mt.elements,Kt=Yt.reference,Jt=Yt.popper;if(areValidElements(Kt,Jt)){Mt.rects={reference:getCompositeRect(Kt,getOffsetParent(Jt),Mt.options.strategy==="fixed"),popper:getLayoutRect(Jt)},Mt.reset=!1,Mt.placement=Mt.options.placement,Mt.orderedModifiers.forEach(function(Zr){return Mt.modifiersData[Zr.name]=Object.assign({},Zr.data)});for(var pr=0;pr<Mt.orderedModifiers.length;pr++){if(Mt.reset===!0){Mt.reset=!1,pr=-1;continue}var Sr=Mt.orderedModifiers[pr],Er=Sr.fn,Rr=Sr.options,Lr=Rr===void 0?{}:Rr,Mr=Sr.name;typeof Er=="function"&&(Mt=Er({state:Mt,options:Lr,name:Mr,instance:Ut})||Mt)}}}},update:debounce(function(){return new Promise(function(ar){Ut.forceUpdate(),ar(Mt)})}),destroy:function(){tr(),Ot=!0}};if(!areValidElements(st,Tt))return Ut;Ut.setOptions(kt).then(function(ar){!Ot&&kt.onFirstUpdate&&kt.onFirstUpdate(ar)});function qt(){Mt.orderedModifiers.forEach(function(ar){var Yt=ar.name,Kt=ar.options,Jt=Kt===void 0?{}:Kt,pr=ar.effect;if(typeof pr=="function"){var Sr=pr({state:Mt,name:Yt,instance:Ut,options:Jt}),Er=function(){};Dt.push(Sr||Er)}})}function tr(){Dt.forEach(function(ar){return ar()}),Dt=[]}return Ut}}const createPopper=popperGenerator({defaultModifiers:[hide$1,popperOffsets$1,computeStyles$1,eventListeners,offset$1,flip$1,preventOverflow$1,arrow$1]}),_excluded$4=["enabled","placement","strategy","modifiers"];function _objectWithoutPropertiesLoose$3($,_e){if($==null)return{};var rt={},at=Object.keys($),ht,pt;for(pt=0;pt<at.length;pt++)ht=at[pt],!(_e.indexOf(ht)>=0)&&(rt[ht]=$[ht]);return rt}const disabledApplyStylesModifier={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},ariaDescribedByModifier={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:$})=>()=>{const{reference:_e,popper:rt}=$.elements;if("removeAttribute"in _e){const at=(_e.getAttribute("aria-describedby")||"").split(",").filter(ht=>ht.trim()!==rt.id);at.length?_e.setAttribute("aria-describedby",at.join(",")):_e.removeAttribute("aria-describedby")}},fn:({state:$})=>{var _e;const{popper:rt,reference:at}=$.elements,ht=(_e=rt.getAttribute("role"))==null?void 0:_e.toLowerCase();if(rt.id&&ht==="tooltip"&&"setAttribute"in at){const pt=at.getAttribute("aria-describedby");if(pt&&pt.split(",").indexOf(rt.id)!==-1)return;at.setAttribute("aria-describedby",pt?`${pt},${rt.id}`:rt.id)}}},EMPTY_MODIFIERS=[];function usePopper($,_e,rt={}){let{enabled:at=!0,placement:ht="bottom",strategy:pt="absolute",modifiers:wt=EMPTY_MODIFIERS}=rt,st=_objectWithoutPropertiesLoose$3(rt,_excluded$4);const Tt=reactExports.useRef(wt),kt=reactExports.useRef(),Mt=reactExports.useCallback(()=>{var ar;(ar=kt.current)==null||ar.update()},[]),Dt=reactExports.useCallback(()=>{var ar;(ar=kt.current)==null||ar.forceUpdate()},[]),[Ot,Ut]=useSafeState(reactExports.useState({placement:ht,update:Mt,forceUpdate:Dt,attributes:{},styles:{popper:{},arrow:{}}})),qt=reactExports.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:ar})=>{const Yt={},Kt={};Object.keys(ar.elements).forEach(Jt=>{Yt[Jt]=ar.styles[Jt],Kt[Jt]=ar.attributes[Jt]}),Ut({state:ar,styles:Yt,attributes:Kt,update:Mt,forceUpdate:Dt,placement:ar.placement})}}),[Mt,Dt,Ut]),tr=reactExports.useMemo(()=>(dequal(Tt.current,wt)||(Tt.current=wt),Tt.current),[wt]);return reactExports.useEffect(()=>{!kt.current||!at||kt.current.setOptions({placement:ht,strategy:pt,modifiers:[...tr,qt,disabledApplyStylesModifier]})},[pt,ht,qt,at,tr]),reactExports.useEffect(()=>{if(!(!at||$==null||_e==null))return kt.current=createPopper($,_e,Object.assign({},st,{placement:ht,strategy:pt,modifiers:[...tr,ariaDescribedByModifier,qt]})),()=>{kt.current!=null&&(kt.current.destroy(),kt.current=void 0,Ut(ar=>Object.assign({},ar,{attributes:{},styles:{popper:{}}})))}},[at,$,_e]),Ot}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1),noop$5=()=>{};function isLeftClickEvent($){return $.button===0}function isModifiedEvent($){return!!($.metaKey||$.altKey||$.ctrlKey||$.shiftKey)}const getRefTarget=$=>$&&("current"in $?$.current:$),InitialTriggerEvents={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function useClickOutside($,_e=noop$5,{disabled:rt,clickTrigger:at="click"}={}){const ht=reactExports.useRef(!1),pt=reactExports.useRef(!1),wt=reactExports.useCallback(kt=>{const Mt=getRefTarget($);warning$1(!!Mt,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),ht.current=!Mt||isModifiedEvent(kt)||!isLeftClickEvent(kt)||!!contains$1(Mt,kt.target)||pt.current,pt.current=!1},[$]),st=useEventCallback(kt=>{const Mt=getRefTarget($);Mt&&contains$1(Mt,kt.target)&&(pt.current=!0)}),Tt=useEventCallback(kt=>{ht.current||_e(kt)});reactExports.useEffect(()=>{var kt,Mt;if(rt||$==null)return;const Dt=ownerDocument(getRefTarget($)),Ot=Dt.defaultView||window;let Ut=(kt=Ot.event)!=null?kt:(Mt=Ot.parent)==null?void 0:Mt.event,qt=null;InitialTriggerEvents[at]&&(qt=listen(Dt,InitialTriggerEvents[at],st,!0));const tr=listen(Dt,at,wt,!0),ar=listen(Dt,at,Kt=>{if(Kt===Ut){Ut=void 0;return}Tt(Kt)});let Yt=[];return"ontouchstart"in Dt.documentElement&&(Yt=[].slice.call(Dt.body.children).map(Kt=>listen(Kt,"mousemove",noop$5))),()=>{qt==null||qt(),tr(),ar(),Yt.forEach(Kt=>Kt())}},[$,rt,at,wt,st,Tt])}function toModifierMap($){const _e={};return Array.isArray($)?($==null||$.forEach(rt=>{_e[rt.name]=rt}),_e):$||_e}function toModifierArray($={}){return Array.isArray($)?$:Object.keys($).map(_e=>($[_e].name=_e,$[_e]))}function mergeOptionsWithPopperConfig({enabled:$,enableEvents:_e,placement:rt,flip:at,offset:ht,fixed:pt,containerPadding:wt,arrowElement:st,popperConfig:Tt={}}){var kt,Mt,Dt,Ot,Ut;const qt=toModifierMap(Tt.modifiers);return Object.assign({},Tt,{placement:rt,enabled:$,strategy:pt?"fixed":Tt.strategy,modifiers:toModifierArray(Object.assign({},qt,{eventListeners:{enabled:_e,options:(kt=qt.eventListeners)==null?void 0:kt.options},preventOverflow:Object.assign({},qt.preventOverflow,{options:wt?Object.assign({padding:wt},(Mt=qt.preventOverflow)==null?void 0:Mt.options):(Dt=qt.preventOverflow)==null?void 0:Dt.options}),offset:{options:Object.assign({offset:ht},(Ot=qt.offset)==null?void 0:Ot.options)},arrow:Object.assign({},qt.arrow,{enabled:!!st,options:Object.assign({},(Ut=qt.arrow)==null?void 0:Ut.options,{element:st})}),flip:Object.assign({enabled:!!at},qt.flip)}))})}const _excluded$3=["children"];function _objectWithoutPropertiesLoose$2($,_e){if($==null)return{};var rt={},at=Object.keys($),ht,pt;for(pt=0;pt<at.length;pt++)ht=at[pt],!(_e.indexOf(ht)>=0)&&(rt[ht]=$[ht]);return rt}const noop$4=()=>{};function useDropdownMenu($={}){const _e=reactExports.useContext(DropdownContext$3),[rt,at]=useCallbackRef(),ht=reactExports.useRef(!1),{flip:pt,offset:wt,rootCloseEvent:st,fixed:Tt=!1,placement:kt,popperConfig:Mt={},enableEventListeners:Dt=!0,usePopper:Ot=!!_e}=$,Ut=(_e==null?void 0:_e.show)==null?!!$.show:_e.show;Ut&&!ht.current&&(ht.current=!0);const qt=Er=>{_e==null||_e.toggle(!1,Er)},{placement:tr,setMenu:ar,menuElement:Yt,toggleElement:Kt}=_e||{},Jt=usePopper(Kt,Yt,mergeOptionsWithPopperConfig({placement:kt||tr||"bottom-start",enabled:Ot,enableEvents:Dt??Ut,offset:wt,flip:pt,fixed:Tt,arrowElement:rt,popperConfig:Mt})),pr=Object.assign({ref:ar||noop$4,"aria-labelledby":Kt==null?void 0:Kt.id},Jt.attributes.popper,{style:Jt.styles.popper}),Sr={show:Ut,placement:tr,hasShown:ht.current,toggle:_e==null?void 0:_e.toggle,popper:Ot?Jt:null,arrowProps:Ot?Object.assign({ref:at},Jt.attributes.arrow,{style:Jt.styles.arrow}):{}};return useClickOutside(Yt,qt,{clickTrigger:st,disabled:!Ut}),[pr,Sr]}const defaultProps={usePopper:!0};function DropdownMenu$2($){let{children:_e}=$,rt=_objectWithoutPropertiesLoose$2($,_excluded$3);const[at,ht]=useDropdownMenu(rt);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:_e(at,ht)})}DropdownMenu$2.displayName="DropdownMenu";DropdownMenu$2.defaultProps=defaultProps;const $b5e257d569688ac6$var$defaultContext={prefix:String(Math.round(Math.random()*1e10)),current:0},$b5e257d569688ac6$var$SSRContext=React.createContext($b5e257d569688ac6$var$defaultContext),$b5e257d569688ac6$var$IsSSRContext=React.createContext(!1);let $b5e257d569688ac6$var$canUseDOM=!!(typeof window<"u"&&window.document&&window.document.createElement),$b5e257d569688ac6$var$componentIds=new WeakMap;function $b5e257d569688ac6$var$useCounter($=!1){let _e=reactExports.useContext($b5e257d569688ac6$var$SSRContext),rt=reactExports.useRef(null);if(rt.current===null&&!$){var at,ht;let pt=(ht=React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||ht===void 0||(at=ht.ReactCurrentOwner)===null||at===void 0?void 0:at.current;if(pt){let wt=$b5e257d569688ac6$var$componentIds.get(pt);wt==null?$b5e257d569688ac6$var$componentIds.set(pt,{id:_e.current,state:pt.memoizedState}):pt.memoizedState!==wt.state&&(_e.current=wt.id,$b5e257d569688ac6$var$componentIds.delete(pt))}rt.current=++_e.current}return rt.current}function $b5e257d569688ac6$var$useLegacySSRSafeId($){let _e=reactExports.useContext($b5e257d569688ac6$var$SSRContext);_e===$b5e257d569688ac6$var$defaultContext&&!$b5e257d569688ac6$var$canUseDOM&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let rt=$b5e257d569688ac6$var$useCounter(!!$),at=`react-aria${_e.prefix}`;return $||`${at}-${rt}`}function $b5e257d569688ac6$var$useModernSSRSafeId($){let _e=React.useId(),[rt]=reactExports.useState($b5e257d569688ac6$export$535bd6ca7f90a273()),at=rt?"react-aria":`react-aria${$b5e257d569688ac6$var$defaultContext.prefix}`;return $||`${at}-${_e}`}const $b5e257d569688ac6$export$619500959fc48b26=typeof React.useId=="function"?$b5e257d569688ac6$var$useModernSSRSafeId:$b5e257d569688ac6$var$useLegacySSRSafeId;function $b5e257d569688ac6$var$getSnapshot(){return!1}function $b5e257d569688ac6$var$getServerSnapshot(){return!0}function $b5e257d569688ac6$var$subscribe($){return()=>{}}function $b5e257d569688ac6$export$535bd6ca7f90a273(){return typeof React.useSyncExternalStore=="function"?React.useSyncExternalStore($b5e257d569688ac6$var$subscribe,$b5e257d569688ac6$var$getSnapshot,$b5e257d569688ac6$var$getServerSnapshot):reactExports.useContext($b5e257d569688ac6$var$IsSSRContext)}const isRoleMenu=$=>{var _e;return((_e=$.getAttribute("role"))==null?void 0:_e.toLowerCase())==="menu"},noop$3=()=>{};function useDropdownToggle(){const $=$b5e257d569688ac6$export$619500959fc48b26(),{show:_e=!1,toggle:rt=noop$3,setToggle:at,menuElement:ht}=reactExports.useContext(DropdownContext$3)||{},pt=reactExports.useCallback(st=>{rt(!_e,st)},[_e,rt]),wt={id:$,ref:at||noop$3,onClick:pt,"aria-expanded":!!_e};return ht&&isRoleMenu(ht)&&(wt["aria-haspopup"]=!0),[wt,{show:_e,toggle:rt}]}function DropdownToggle$2({children:$}){const[_e,rt]=useDropdownToggle();return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:$(_e,rt)})}DropdownToggle$2.displayName="DropdownToggle";const _excluded$2=["eventKey","disabled","onClick","active","as"];function _objectWithoutPropertiesLoose$1($,_e){if($==null)return{};var rt={},at=Object.keys($),ht,pt;for(pt=0;pt<at.length;pt++)ht=at[pt],!(_e.indexOf(ht)>=0)&&(rt[ht]=$[ht]);return rt}function useDropdownItem({key:$,href:_e,active:rt,disabled:at,onClick:ht}){const pt=reactExports.useContext(SelectableContext),wt=reactExports.useContext(NavContext$1),{activeKey:st}=wt||{},Tt=makeEventKey($,_e),kt=rt==null&&$!=null?makeEventKey(st)===Tt:rt;return[{onClick:useEventCallback(Dt=>{at||(ht==null||ht(Dt),pt&&!Dt.isPropagationStopped()&&pt(Tt,Dt))}),"aria-disabled":at||void 0,"aria-selected":kt,[dataAttr("dropdown-item")]:""},{isActive:kt}]}const DropdownItem$2=reactExports.forwardRef(($,_e)=>{let{eventKey:rt,disabled:at,onClick:ht,active:pt,as:wt=Button$2}=$,st=_objectWithoutPropertiesLoose$1($,_excluded$2);const[Tt]=useDropdownItem({key:rt,href:st.href,disabled:at,onClick:ht,active:pt});return jsxRuntimeExports.jsx(wt,Object.assign({},st,{ref:_e},Tt))});DropdownItem$2.displayName="DropdownItem";function useRefWithUpdate(){const $=useForceUpdate(),_e=reactExports.useRef(null),rt=reactExports.useCallback(at=>{_e.current=at,$()},[$]);return[_e,rt]}function Dropdown$2({defaultShow:$,show:_e,onSelect:rt,onToggle:at,itemSelector:ht=`* [${dataAttr("dropdown-item")}]`,focusFirstItemOnShow:pt,placement:wt="bottom-start",children:st}){const Tt=useWindow(),[kt,Mt]=useUncontrolledProp(_e,$,at),[Dt,Ot]=useRefWithUpdate(),Ut=Dt.current,[qt,tr]=useRefWithUpdate(),ar=qt.current,Yt=usePrevious(kt),Kt=reactExports.useRef(null),Jt=reactExports.useRef(!1),pr=reactExports.useContext(SelectableContext),Sr=reactExports.useCallback((dn,Jr,wr=Jr==null?void 0:Jr.type)=>{Mt(dn,{originalEvent:Jr,source:wr})},[Mt]),Er=useEventCallback((dn,Jr)=>{rt==null||rt(dn,Jr),Sr(!1,Jr,"select"),Jr.isPropagationStopped()||pr==null||pr(dn,Jr)}),Rr=reactExports.useMemo(()=>({toggle:Sr,placement:wt,show:kt,menuElement:Ut,toggleElement:ar,setMenu:Ot,setToggle:tr}),[Sr,wt,kt,Ut,ar,Ot,tr]);Ut&&Yt&&!kt&&(Jt.current=Ut.contains(Ut.ownerDocument.activeElement));const Lr=useEventCallback(()=>{ar&&ar.focus&&ar.focus()}),Mr=useEventCallback(()=>{const dn=Kt.current;let Jr=pt;if(Jr==null&&(Jr=Dt.current&&isRoleMenu(Dt.current)?"keyboard":!1),Jr===!1||Jr==="keyboard"&&!/^key.+$/.test(dn))return;const wr=qsa(Dt.current,ht)[0];wr&&wr.focus&&wr.focus()});reactExports.useEffect(()=>{kt?Mr():Jt.current&&(Jt.current=!1,Lr())},[kt,Jt,Lr,Mr]),reactExports.useEffect(()=>{Kt.current=null});const Zr=(dn,Jr)=>{if(!Dt.current)return null;const wr=qsa(Dt.current,ht);let Xr=wr.indexOf(dn)+Jr;return Xr=Math.max(0,Math.min(Xr,wr.length)),wr[Xr]};return useEventListener(reactExports.useCallback(()=>Tt.document,[Tt]),"keydown",dn=>{var Jr,wr;const{key:Xr}=dn,Dr=dn.target,xn=(Jr=Dt.current)==null?void 0:Jr.contains(Dr),gn=(wr=qt.current)==null?void 0:wr.contains(Dr);if(/input|textarea/i.test(Dr.tagName)&&(Xr===" "||Xr!=="Escape"&&xn||Xr==="Escape"&&Dr.type==="search")||!xn&&!gn||Xr==="Tab"&&(!Dt.current||!kt))return;Kt.current=dn.type;const Gr={originalEvent:dn,source:dn.type};switch(Xr){case"ArrowUp":{const Or=Zr(Dr,-1);Or&&Or.focus&&Or.focus(),dn.preventDefault();return}case"ArrowDown":if(dn.preventDefault(),!kt)Mt(!0,Gr);else{const Or=Zr(Dr,1);Or&&Or.focus&&Or.focus()}return;case"Tab":addEventListener(Dr.ownerDocument,"keyup",Or=>{var sn;(Or.key==="Tab"&&!Or.target||!((sn=Dt.current)!=null&&sn.contains(Or.target)))&&Mt(!1,Gr)},{once:!0});break;case"Escape":Xr==="Escape"&&(dn.preventDefault(),dn.stopPropagation()),Mt(!1,Gr);break}}),jsxRuntimeExports.jsx(SelectableContext.Provider,{value:Er,children:jsxRuntimeExports.jsx(DropdownContext$3.Provider,{value:Rr,children:st})})}Dropdown$2.displayName="Dropdown";Dropdown$2.Menu=DropdownMenu$2;Dropdown$2.Toggle=DropdownToggle$2;Dropdown$2.Item=DropdownItem$2;const DropdownContext=reactExports.createContext({});DropdownContext.displayName="DropdownContext";const DropdownContext$1=DropdownContext,DropdownDivider=reactExports.forwardRef(({className:$,bsPrefix:_e,as:rt="hr",role:at="separator",...ht},pt)=>(_e=useBootstrapPrefix(_e,"dropdown-divider"),jsxRuntimeExports.jsx(rt,{ref:pt,className:classNames($,_e),role:at,...ht})));DropdownDivider.displayName="DropdownDivider";const DropdownDivider$1=DropdownDivider,DropdownHeader=reactExports.forwardRef(({className:$,bsPrefix:_e,as:rt="div",role:at="heading",...ht},pt)=>(_e=useBootstrapPrefix(_e,"dropdown-header"),jsxRuntimeExports.jsx(rt,{ref:pt,className:classNames($,_e),role:at,...ht})));DropdownHeader.displayName="DropdownHeader";const DropdownHeader$1=DropdownHeader,DropdownItem=reactExports.forwardRef(({bsPrefix:$,className:_e,eventKey:rt,disabled:at=!1,onClick:ht,active:pt,as:wt=Anchor$1,...st},Tt)=>{const kt=useBootstrapPrefix($,"dropdown-item"),[Mt,Dt]=useDropdownItem({key:rt,href:st.href,disabled:at,onClick:ht,active:pt});return jsxRuntimeExports.jsx(wt,{...st,...Mt,ref:Tt,className:classNames(_e,kt,Dt.isActive&&"active",at&&"disabled")})});DropdownItem.displayName="DropdownItem";const DropdownItem$1=DropdownItem,DropdownItemText=reactExports.forwardRef(({className:$,bsPrefix:_e,as:rt="span",...at},ht)=>(_e=useBootstrapPrefix(_e,"dropdown-item-text"),jsxRuntimeExports.jsx(rt,{ref:ht,className:classNames($,_e),...at})));DropdownItemText.displayName="DropdownItemText";const DropdownItemText$1=DropdownItemText,context$2=reactExports.createContext(null);context$2.displayName="InputGroupContext";const InputGroupContext=context$2;function useWrappedRefWithWarning($,_e){return $}function getDropdownMenuPlacement($,_e,rt){const at=rt?"top-end":"top-start",ht=rt?"top-start":"top-end",pt=rt?"bottom-end":"bottom-start",wt=rt?"bottom-start":"bottom-end",st=rt?"right-start":"left-start",Tt=rt?"right-end":"left-end",kt=rt?"left-start":"right-start",Mt=rt?"left-end":"right-end";let Dt=$?wt:pt;return _e==="up"?Dt=$?ht:at:_e==="end"?Dt=$?Mt:kt:_e==="start"?Dt=$?Tt:st:_e==="down-centered"?Dt="bottom":_e==="up-centered"&&(Dt="top"),Dt}const DropdownMenu=reactExports.forwardRef(({bsPrefix:$,className:_e,align:rt,rootCloseEvent:at,flip:ht=!0,show:pt,renderOnMount:wt,as:st="div",popperConfig:Tt,variant:kt,...Mt},Dt)=>{let Ot=!1;const Ut=reactExports.useContext(NavbarContext),qt=useBootstrapPrefix($,"dropdown-menu"),{align:tr,drop:ar,isRTL:Yt}=reactExports.useContext(DropdownContext$1);rt=rt||tr;const Kt=reactExports.useContext(InputGroupContext),Jt=[];if(rt)if(typeof rt=="object"){const dn=Object.keys(rt);if(dn.length){const Jr=dn[0],wr=rt[Jr];Ot=wr==="start",Jt.push(`${qt}-${Jr}-${wr}`)}}else rt==="end"&&(Ot=!0);const pr=getDropdownMenuPlacement(Ot,ar,Yt),[Sr,{hasShown:Er,popper:Rr,show:Lr,toggle:Mr}]=useDropdownMenu({flip:ht,rootCloseEvent:at,show:pt,usePopper:!Ut&&Jt.length===0,offset:[0,2],popperConfig:Tt,placement:pr});if(Sr.ref=useMergedRefs(useWrappedRefWithWarning(Dt),Sr.ref),useIsomorphicEffect(()=>{Lr&&(Rr==null||Rr.update())},[Lr]),!Er&&!wt&&!Kt)return null;typeof st!="string"&&(Sr.show=Lr,Sr.close=()=>Mr==null?void 0:Mr(!1),Sr.align=rt);let Zr=Mt.style;return Rr!=null&&Rr.placement&&(Zr={...Mt.style,...Sr.style},Mt["x-placement"]=Rr.placement),jsxRuntimeExports.jsx(st,{...Mt,...Sr,style:Zr,...(Jt.length||Ut)&&{"data-bs-popper":"static"},className:classNames(_e,qt,Lr&&"show",Ot&&`${qt}-end`,kt&&`${qt}-${kt}`,...Jt)})});DropdownMenu.displayName="DropdownMenu";const DropdownMenu$1=DropdownMenu,Button=reactExports.forwardRef(({as:$,bsPrefix:_e,variant:rt="primary",size:at,active:ht=!1,disabled:pt=!1,className:wt,...st},Tt)=>{const kt=useBootstrapPrefix(_e,"btn"),[Mt,{tagName:Dt}]=useButtonProps({tagName:$,disabled:pt,...st}),Ot=Dt;return jsxRuntimeExports.jsx(Ot,{...Mt,...st,ref:Tt,disabled:pt,className:classNames(wt,kt,ht&&"active",rt&&`${kt}-${rt}`,at&&`${kt}-${at}`,st.href&&pt&&"disabled")})});Button.displayName="Button";const Button$1=Button,DropdownToggle=reactExports.forwardRef(({bsPrefix:$,split:_e,className:rt,childBsPrefix:at,as:ht=Button$1,...pt},wt)=>{const st=useBootstrapPrefix($,"dropdown-toggle"),Tt=reactExports.useContext(DropdownContext$3);at!==void 0&&(pt.bsPrefix=at);const[kt]=useDropdownToggle();return kt.ref=useMergedRefs(kt.ref,useWrappedRefWithWarning(wt)),jsxRuntimeExports.jsx(ht,{className:classNames(rt,st,_e&&`${st}-split`,(Tt==null?void 0:Tt.show)&&"show"),...kt,...pt})});DropdownToggle.displayName="DropdownToggle";const DropdownToggle$1=DropdownToggle,Dropdown=reactExports.forwardRef(($,_e)=>{const{bsPrefix:rt,drop:at="down",show:ht,className:pt,align:wt="start",onSelect:st,onToggle:Tt,focusFirstItemOnShow:kt,as:Mt="div",navbar:Dt,autoClose:Ot=!0,...Ut}=useUncontrolled($,{show:"onToggle"}),qt=reactExports.useContext(InputGroupContext),tr=useBootstrapPrefix(rt,"dropdown"),ar=useIsRTL(),Yt=Rr=>Ot===!1?Rr==="click":Ot==="inside"?Rr!=="rootClose":Ot==="outside"?Rr!=="select":!0,Kt=useEventCallback((Rr,Lr)=>{Lr.originalEvent.currentTarget===document&&(Lr.source!=="keydown"||Lr.originalEvent.key==="Escape")&&(Lr.source="rootClose"),Yt(Lr.source)&&(Tt==null||Tt(Rr,Lr))}),pr=getDropdownMenuPlacement(wt==="end",at,ar),Sr=reactExports.useMemo(()=>({align:wt,drop:at,isRTL:ar}),[wt,at,ar]),Er={down:tr,"down-centered":`${tr}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return jsxRuntimeExports.jsx(DropdownContext$1.Provider,{value:Sr,children:jsxRuntimeExports.jsx(Dropdown$2,{placement:pr,show:ht,onSelect:st,onToggle:Kt,focusFirstItemOnShow:kt,itemSelector:`.${tr}-item:not(.disabled):not(:disabled)`,children:qt?Ut.children:jsxRuntimeExports.jsx(Mt,{...Ut,ref:_e,className:classNames(pt,ht&&"show",Er[at])})})})});Dropdown.displayName="Dropdown";const Dropdown$1=Object.assign(Dropdown,{Toggle:DropdownToggle$1,Menu:DropdownMenu$1,Item:DropdownItem$1,ItemText:DropdownItemText$1,Divider:DropdownDivider$1,Header:DropdownHeader$1}),NavDropdown=reactExports.forwardRef(({id:$,title:_e,children:rt,bsPrefix:at,className:ht,rootCloseEvent:pt,menuRole:wt,disabled:st,active:Tt,renderMenuOnMount:kt,menuVariant:Mt,...Dt},Ot)=>{const Ut=useBootstrapPrefix(void 0,"nav-item");return jsxRuntimeExports.jsxs(Dropdown$1,{ref:Ot,...Dt,className:classNames(ht,Ut),children:[jsxRuntimeExports.jsx(Dropdown$1.Toggle,{id:$,eventKey:null,active:Tt,disabled:st,childBsPrefix:at,as:NavLink$1,children:_e}),jsxRuntimeExports.jsx(Dropdown$1.Menu,{role:wt,renderOnMount:kt,rootCloseEvent:pt,variant:Mt,children:rt})]})});NavDropdown.displayName="NavDropdown";const NavDropdown$1=Object.assign(NavDropdown,{Item:Dropdown$1.Item,ItemText:Dropdown$1.ItemText,Divider:Dropdown$1.Divider,Header:Dropdown$1.Header});var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),__assign=globalThis&&globalThis.__assign||function(){return __assign=Object.assign||function($){for(var _e,rt=1,at=arguments.length;rt<at;rt++){_e=arguments[rt];for(var ht in _e)Object.prototype.hasOwnProperty.call(_e,ht)&&($[ht]=_e[ht])}return $},__assign.apply(this,arguments)},__rest=globalThis&&globalThis.__rest||function($,_e){var rt={};for(var at in $)Object.prototype.hasOwnProperty.call($,at)&&_e.indexOf(at)<0&&(rt[at]=$[at]);if($!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ht=0,at=Object.getOwnPropertySymbols($);ht<at.length;ht++)_e.indexOf(at[ht])<0&&Object.prototype.propertyIsEnumerable.call($,at[ht])&&(rt[at[ht]]=$[at[ht]]);return rt};function Tree2Element($){return $&&$.map(function(_e,rt){return React.createElement(_e.tag,__assign({key:rt},_e.attr),Tree2Element(_e.child))})}function GenIcon($){return function(_e){return React.createElement(IconBase,__assign({attr:__assign({},$.attr)},_e),Tree2Element($.child))}}function IconBase($){var _e=function(rt){var at=$.attr,ht=$.size,pt=$.title,wt=__rest($,["attr","size","title"]),st=ht||rt.size||"1em",Tt;return rt.className&&(Tt=rt.className),$.className&&(Tt=(Tt?Tt+" ":"")+$.className),React.createElement("svg",__assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},rt.attr,at,wt,{className:Tt,style:__assign(__assign({color:$.color||rt.color},rt.style),$.style),height:st,width:st,xmlns:"http://www.w3.org/2000/svg"}),pt&&React.createElement("title",null,pt),$.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,function(rt){return _e(rt)}):_e(DefaultContext)}function BsFillBagHeartFill($){return GenIcon({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.5 4v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5ZM8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1Zm0 6.993c1.664-1.711 5.825 1.283 0 5.132-5.825-3.85-1.664-6.843 0-5.132Z"}}]})($)}function MdMessage($){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"}}]})($)}const UserHeader$1="";function toVal($){var _e,rt,at="";if(typeof $=="string"||typeof $=="number")at+=$;else if(typeof $=="object")if(Array.isArray($))for(_e=0;_e<$.length;_e++)$[_e]&&(rt=toVal($[_e]))&&(at&&(at+=" "),at+=rt);else for(_e in $)$[_e]&&(at&&(at+=" "),at+=_e);return at}function m$3(){for(var $=0,_e,rt,at="";$<arguments.length;)(_e=arguments[$++])&&(rt=toVal(_e))&&(at&&(at+=" "),at+=rt);return at}(function(){try{if(typeof document<"u"){var $=document.createElement("style");$.appendChild(document.createTextNode(".dropdown-menu .active:not(.form-control){color:#16181b;background-color:#eee}.dropdown-menu [data-active=true] a.dropdown-item,.dropdown-menu .dropdown-item:focus,.dropdown-menu li:focus .dropdown-item :not(.disabled){color:#16181b;background-color:#eee}.dropdown-menu li:focus{outline:none}.dropdown-menu.dropdown-menu-dark [data-active=true] a.dropdown-item,.dropdown-menu.dropdown-menu-dark .dropdown-item:focus,.dropdown-menu.dropdown-menu-dark li:focus .dropdown-item{color:#fff;background-color:#1266f1}.btn-group.dropstart>.dropdown-menu{right:0!important}")),document.head.appendChild($)}}catch(_e){console.error("vite-plugin-css-injected-by-js",_e)}})();const nt=React.forwardRef(({breakpoint:$,fluid:_e,children:rt,className:at,tag:ht="div",...pt},wt)=>{const st=m$3(`${_e?"container-fluid":`container${$?"-"+$:""}`}`,at);return jsxRuntimeExports.jsx(ht,{className:st,...pt,ref:wt,children:rt})});React.forwardRef(({center:$,children:_e,className:rt,end:at,lg:ht,md:pt,offsetLg:wt,offsetMd:st,offsetSm:Tt,order:kt,size:Mt,sm:Dt,start:Ot,tag:Ut="div",xl:qt,xxl:tr,xs:ar,...Yt},Kt)=>{const Jt=m$3(Mt&&`col-${Mt}`,ar&&`col-xs-${ar}`,Dt&&`col-sm-${Dt}`,pt&&`col-md-${pt}`,ht&&`col-lg-${ht}`,qt&&`col-xl-${qt}`,tr&&`col-xxl-${tr}`,!Mt&&!ar&&!Dt&&!pt&&!ht&&!qt&&!tr?"col":"",kt&&`order-${kt}`,Ot&&"align-self-start",$&&"align-self-center",at&&"align-self-end",Tt&&`offset-sm-${Tt}`,st&&`offset-md-${st}`,wt&&`offset-lg-${wt}`,rt);return jsxRuntimeExports.jsx(Ut,{className:Jt,ref:Kt,...Yt,children:_e})});React.forwardRef(({className:$,color:_e="primary",pill:rt,light:at,dot:ht,tag:pt="span",children:wt,notification:st,...Tt},kt)=>{const Mt=m$3("badge",at?_e&&`badge-${_e}`:_e&&`bg-${_e}`,ht&&"badge-dot",rt&&"rounded-pill",st&&"badge-notification",$);return jsxRuntimeExports.jsx(pt,{className:Mt,ref:kt,...Tt,children:wt})});const Me=({...$})=>{const[_e,rt]=reactExports.useState(!1),at=m$3("ripple-wave",_e&&"active");return reactExports.useEffect(()=>{const ht=setTimeout(()=>{rt(!0)},50);return()=>{clearTimeout(ht)}},[]),jsxRuntimeExports.jsx("div",{className:at,...$})},$e=(...$)=>{const _e=React.useRef();return React.useEffect(()=>{$.forEach(rt=>{rt&&(typeof rt=="function"?rt(_e.current):rt.current=_e.current)})},[$]),_e},Re=React.forwardRef(({className:$,rippleTag:_e="div",rippleCentered:rt,rippleDuration:at=500,rippleUnbound:ht,rippleRadius:pt=0,rippleColor:wt="dark",children:st,onMouseDown:Tt,...kt},Mt)=>{const Dt=reactExports.useRef(null),Ot=$e(Mt,Dt),Ut="rgba({{color}}, 0.2) 0, rgba({{color}}, 0.3) 40%, rgba({{color}}, 0.4) 50%, rgba({{color}}, 0.5) 60%, rgba({{color}}, 0) 70%",qt=[0,0,0],tr=["primary","secondary","success","danger","warning","info","light","dark"],[ar,Yt]=reactExports.useState([]),[Kt,Jt]=reactExports.useState(!1),pr=m$3("ripple","ripple-surface",ht&&"ripple-surface-unbound",Kt&&`ripple-surface-${wt}`,$),Sr=()=>{if(tr.find(Zr=>Zr===(wt==null?void 0:wt.toLowerCase())))return Jt(!0);{const Zr=Er(wt).join(",");return`radial-gradient(circle, ${Ut.split("{{color}}").join(`${Zr}`)})`}},Er=Zr=>{const dn=Xr=>(Xr.length<7&&(Xr=`#${Xr[1]}${Xr[1]}${Xr[2]}${Xr[2]}${Xr[3]}${Xr[3]}`),[parseInt(Xr.substr(1,2),16),parseInt(Xr.substr(3,2),16),parseInt(Xr.substr(5,2),16)]),Jr=Xr=>{const Dr=document.body.appendChild(document.createElement("fictum")),xn="rgb(1, 2, 3)";return Dr.style.color=xn,Dr.style.color!==xn||(Dr.style.color=Xr,Dr.style.color===xn||Dr.style.color==="")?qt:(Xr=getComputedStyle(Dr).color,document.body.removeChild(Dr),Xr)},wr=Xr=>(Xr=Xr.match(/[.\d]+/g).map(Dr=>+Number(Dr)),Xr.length=3,Xr);return Zr.toLowerCase()==="transparent"?qt:Zr[0]==="#"?dn(Zr):(Zr.indexOf("rgb")===-1&&(Zr=Jr(Zr)),Zr.indexOf("rgb")===0?wr(Zr):qt)},Rr=Zr=>{const{offsetX:dn,offsetY:Jr,height:wr,width:Xr}=Zr,Dr=Jr<=wr/2,xn=dn<=Xr/2,gn=(ln,kn)=>Math.sqrt(ln**2+kn**2),Pr=Jr===wr/2&&dn===Xr/2,Gr={first:Dr===!0&&xn===!1,second:Dr===!0&&xn===!0,third:Dr===!1&&xn===!0,fourth:Dr===!1&&xn===!1},Or={topLeft:gn(dn,Jr),topRight:gn(Xr-dn,Jr),bottomLeft:gn(dn,wr-Jr),bottomRight:gn(Xr-dn,wr-Jr)};let sn=0;return Pr||Gr.fourth?sn=Or.topLeft:Gr.third?sn=Or.topRight:Gr.second?sn=Or.bottomRight:Gr.first&&(sn=Or.bottomLeft),sn*2},Lr=Zr=>{var dn;const Jr=(dn=Ot.current)==null?void 0:dn.getBoundingClientRect(),wr=Zr.clientX-Jr.left,Xr=Zr.clientY-Jr.top,Dr=Jr.height,xn=Jr.width,gn={offsetX:rt?Dr/2:wr,offsetY:rt?xn/2:Xr,height:Dr,width:xn},Pr={delay:at&&at*.5,duration:at&&at-at*.5},Gr=Rr(gn),Or=pt||Gr/2,sn={left:rt?`${xn/2-Or}px`:`${wr-Or}px`,top:rt?`${Dr/2-Or}px`:`${Xr-Or}px`,height:pt?`${pt*2}px`:`${Gr}px`,width:pt?`${pt*2}px`:`${Gr}px`,transitionDelay:`0s, ${Pr.delay}ms`,transitionDuration:`${at}ms, ${Pr.duration}ms`};return Kt?sn:{...sn,backgroundImage:`${Sr()}`}},Mr=Zr=>{const dn=Lr(Zr),Jr=ar.concat(dn);Yt(Jr),Tt&&Tt(Zr)};return reactExports.useEffect(()=>{const Zr=setTimeout(()=>{ar.length>0&&Yt(ar.splice(1,ar.length-1))},at);return()=>{clearTimeout(Zr)}},[at,ar]),jsxRuntimeExports.jsxs(_e,{className:pr,onMouseDown:Zr=>Mr(Zr),ref:Ot,...kt,children:[st,ar.map((Zr,dn)=>jsxRuntimeExports.jsx(Me,{style:Zr},dn))]})}),ue=React.forwardRef(({className:$,color:_e="primary",outline:rt,children:at,rounded:ht,disabled:pt,floating:wt,size:st,href:Tt,block:kt,active:Mt,toggle:Dt,noRipple:Ot,tag:Ut="button",role:qt="button",...tr},ar)=>{const[Yt,Kt]=reactExports.useState(Mt||!1);let Jt;const pr=_e&&["light","link"].includes(_e)||rt?"dark":"light";_e!=="none"?rt?_e?Jt=`btn-outline-${_e}`:Jt="btn-outline-primary":_e?Jt=`btn-${_e}`:Jt="btn-primary":Jt="";const Sr=m$3(_e!=="none"&&"btn",Jt,ht&&"btn-rounded",wt&&"btn-floating",st&&`btn-${st}`,`${(Tt||Ut!=="button")&&pt?"disabled":""}`,kt&&"btn-block",Yt&&"active",$);return Tt&&Ut!=="a"&&(Ut="a"),["hr","img","input"].includes(Ut)||Ot?jsxRuntimeExports.jsx(Ut,{className:Sr,onClick:Dt?()=>{Kt(!Yt)}:void 0,disabled:pt&&Ut==="button"?!0:void 0,href:Tt,ref:ar,role:qt,...tr,children:at}):jsxRuntimeExports.jsx(Re,{rippleTag:Ut,rippleColor:pr,className:Sr,onClick:Dt?()=>{Kt(!Yt)}:void 0,disabled:pt&&Ut==="button"?!0:void 0,href:Tt,ref:ar,role:qt,...tr,children:at})});React.forwardRef(({className:$,children:_e,shadow:rt,toolbar:at,size:ht,vertical:pt,tag:wt="div",role:st="group",...Tt},kt)=>{let Mt;at?Mt="btn-toolbar":pt?Mt="btn-group-vertical":Mt="btn-group";const Dt=m$3(Mt,rt&&`shadow-${rt}`,ht&&`btn-group-${ht}`,$);return jsxRuntimeExports.jsx(wt,{className:Dt,ref:kt,role:st,...Tt,children:_e})});React.forwardRef(({className:$,children:_e,tag:rt="div",color:at,grow:ht,size:pt,...wt},st)=>{const Tt=m$3(`${ht?"spinner-grow":"spinner-border"}`,at&&`text-${at}`,`${pt?ht?"spinner-grow-"+pt:"spinner-border-"+pt:""}`,$);return jsxRuntimeExports.jsx(rt,{className:Tt,ref:st,...wt,children:_e})});const lt=React.forwardRef(({className:$,children:_e,border:rt,background:at,tag:ht="div",shadow:pt,alignment:wt,...st},Tt)=>{const kt=m$3("card",rt&&`border border-${rt}`,at&&`bg-${at}`,pt&&`shadow-${pt}`,wt&&`text-${wt}`,$);return jsxRuntimeExports.jsx(ht,{className:kt,ref:Tt,...st,children:_e})});React.forwardRef(({className:$,children:_e,border:rt,background:at,tag:ht="div",...pt},wt)=>{const st=m$3("card-header",rt&&`border-${rt}`,at&&`bg-${at}`,$);return jsxRuntimeExports.jsx(ht,{className:st,...pt,ref:wt,children:_e})});React.forwardRef(({className:$,children:_e,tag:rt="p",...at},ht)=>{const pt=m$3("card-subtitle",$);return jsxRuntimeExports.jsx(rt,{className:pt,...at,ref:ht,children:_e})});React.forwardRef(({className:$,children:_e,tag:rt="h5",...at},ht)=>{const pt=m$3("card-title",$);return jsxRuntimeExports.jsx(rt,{className:pt,...at,ref:ht,children:_e})});React.forwardRef(({className:$,children:_e,tag:rt="p",...at},ht)=>{const pt=m$3("card-text",$);return jsxRuntimeExports.jsx(rt,{className:pt,...at,ref:ht,children:_e})});const mt=React.forwardRef(({className:$,children:_e,tag:rt="div",...at},ht)=>{const pt=m$3("card-body",$);return jsxRuntimeExports.jsx(rt,{className:pt,...at,ref:ht,children:_e})});React.forwardRef(({className:$,children:_e,border:rt,background:at,tag:ht="div",...pt},wt)=>{const st=m$3("card-footer",rt&&`border-${rt}`,at&&`bg-${at}`,$);return jsxRuntimeExports.jsx(ht,{className:st,...pt,ref:wt,children:_e})});React.forwardRef(({className:$,children:_e,tag:rt="div",...at},ht)=>{const pt=m$3("card-img-overlay",$);return jsxRuntimeExports.jsx(rt,{className:pt,...at,ref:ht,children:_e})});React.forwardRef(({className:$,children:_e,tag:rt="div",...at},ht)=>{const pt=m$3("card-group",$);return jsxRuntimeExports.jsx(rt,{className:pt,...at,ref:ht,children:_e})});React.forwardRef(({className:$,tag:_e="ul",horizontal:rt,horizontalSize:at,light:ht,numbered:pt,children:wt,small:st,...Tt},kt)=>{const Mt=m$3("list-group",rt&&(at?`list-group-horizontal-${at}`:"list-group-horizontal"),ht&&"list-group-light",pt&&"list-group-numbered",st&&"list-group-small",$);return jsxRuntimeExports.jsx(_e,{className:Mt,ref:kt,...Tt,children:wt})});React.forwardRef(({className:$,tag:_e="li",active:rt,disabled:at,action:ht,color:pt,children:wt,noBorders:st,...Tt},kt)=>{const Mt=_e==="button",Dt=m$3("list-group-item",rt&&"active",at&&!Mt&&"disabled",ht&&"list-group-item-action",pt&&`list-group-item-${pt}`,st&&"border-0",$);return jsxRuntimeExports.jsx(_e,{className:Dt,disabled:Mt&&at,ref:kt,...Tt,children:wt})});React.forwardRef(({around:$,between:_e,bottom:rt,center:at,children:ht,className:pt,evenly:wt,end:st,middle:Tt,start:kt,tag:Mt="div",top:Dt,...Ot},Ut)=>{const qt=m$3("row",$&&"justify-content-around",_e&&"justify-content-between",rt&&"align-self-end",at&&"justify-content-center",wt&&"justifty-content-evenly",st&&"justify-content-end",Tt&&"align-self-center",kt&&"justify-content-start",Dt&&"align-self-start",pt);return jsxRuntimeExports.jsx(Mt,{className:qt,...Ot,ref:Ut,children:ht})});React.forwardRef(({className:$,children:_e,tag:rt="p",variant:at,color:ht,blockquote:pt,note:wt,noteColor:st,listUnStyled:Tt,listInLine:kt,...Mt},Dt)=>{const Ot=m$3(at&&at,pt&&"blockquote",wt&&"note",ht&&`text-${ht}`,st&&`note-${st}`,Tt&&"list-unstyled",kt&&"list-inline",$);return pt&&(rt="blockquote"),(Tt||kt)&&(rt="ul"),jsxRuntimeExports.jsx(rt,{className:Ot,ref:Dt,...Mt,children:_e})});React.forwardRef(({className:$,color:_e,uppercase:rt,bold:at,children:ht,...pt},wt)=>{const st=m$3("breadcrumb",at&&"font-weight-bold",_e&&`text-${_e}`,rt&&"text-uppercase",$);return jsxRuntimeExports.jsx("nav",{"aria-label":"breadcrumb",children:jsxRuntimeExports.jsx("ol",{className:st,ref:wt,...pt,children:ht})})});React.forwardRef(({className:$,active:_e,current:rt="page",children:at,...ht},pt)=>{const wt=m$3("breadcrumb-item",_e&&"active",$);return jsxRuntimeExports.jsx("li",{className:wt,ref:pt,"aria-current":_e&&rt,...ht,children:at})});const Ee=$=>{if($!==!1)return`navbar-expand-${$}`};React.forwardRef(({className:$,children:_e,light:rt,dark:at,scrolling:ht,fixed:pt,sticky:wt,scrollingNavbarOffset:st,color:Tt,transparent:kt,expand:Mt,tag:Dt="nav",bgColor:Ot,...Ut},qt)=>{const[tr,ar]=reactExports.useState(!1),Yt=m$3({"navbar-light":rt,"navbar-dark":at,"scrolling-navbar":ht||st,"top-nav-collapse":tr,[`text-${Tt}`]:Tt&&kt?tr:Tt},pt&&`fixed-${pt}`,wt&&"sticky-top","navbar",Mt&&Ee(Mt),Ot&&`bg-${Ot}`,$),Kt=reactExports.useCallback(()=>{st&&window.pageYOffset>st?ar(!0):ar(!1)},[st]);return reactExports.useEffect(()=>((ht||st)&&window.addEventListener("scroll",Kt),()=>{window.removeEventListener("scroll",Kt)}),[Kt,ht,st]),jsxRuntimeExports.jsx(Dt,{className:Yt,role:"navigation",...Ut,ref:qt,children:_e})});React.forwardRef(({children:$,className:_e="",disabled:rt=!1,active:at=!1,tag:ht="a",...pt},wt)=>{const st=m$3("nav-link",rt?"disabled":at?"active":"",_e);return jsxRuntimeExports.jsx(ht,{"data-test":"nav-link",className:st,style:{cursor:"pointer"},ref:wt,...pt,children:$})});React.forwardRef(({className:$,children:_e,tag:rt="a",...at},ht)=>{const pt=m$3("navbar-brand",$);return jsxRuntimeExports.jsx(rt,{className:pt,ref:ht,...at,children:_e})});React.forwardRef(({children:$,className:_e,active:rt,text:at,tag:ht="li",...pt},wt)=>{const st=m$3("nav-item",rt&&"active",at&&"navbar-text",_e);return jsxRuntimeExports.jsx(ht,{...pt,className:st,ref:wt,children:$})});React.forwardRef(({children:$,className:_e,right:rt,fullWidth:at=!0,left:ht,tag:pt="ul",...wt},st)=>{const Tt=m$3("navbar-nav",at&&"w-100",rt&&"ms-auto",ht&&"me-auto",_e);return jsxRuntimeExports.jsx(pt,{className:Tt,ref:st,...wt,children:$})});React.forwardRef(({children:$,className:_e,tag:rt="button",...at},ht)=>{const pt=m$3("navbar-toggler",_e);return jsxRuntimeExports.jsx(rt,{...at,className:pt,ref:ht,children:$})});React.forwardRef(({children:$,bgColor:_e,color:rt,className:at,...ht},pt)=>{const wt=m$3(_e&&`bg-${_e}`,rt&&`text-${rt}`,at);return jsxRuntimeExports.jsx("footer",{className:wt,...ht,ref:pt,children:$})});React.forwardRef(({children:$,size:_e,circle:rt,center:at,end:ht,start:pt,className:wt,...st},Tt)=>{const kt=m$3("pagination",at&&"justify-content-center",rt&&"pagination-circle",ht&&"justify-content-end",_e&&`pagination-${_e}`,pt&&"justify-content-start",wt);return jsxRuntimeExports.jsx("ul",{className:kt,...st,ref:Tt,children:$})});React.forwardRef(({children:$,className:_e,tag:rt="a",...at},ht)=>{const pt=m$3("page-link",_e);return jsxRuntimeExports.jsx(rt,{className:pt,...at,ref:ht,children:$})});React.forwardRef(({children:$,className:_e,active:rt,disabled:at,...ht},pt)=>{const wt=m$3("page-item",rt&&"active",at&&"disabled",_e);return jsxRuntimeExports.jsx("li",{className:wt,...ht,ref:pt,children:$})});const Ce=React.forwardRef(({animated:$,children:_e,className:rt,style:at,tag:ht="div",valuenow:pt,valuemax:wt,striped:st,bgColor:Tt,valuemin:kt,width:Mt,...Dt},Ot)=>{const Ut=m$3("progress-bar",Tt&&`bg-${Tt}`,st&&"progress-bar-striped",$&&"progress-bar-animated",rt),qt={width:`${Mt}%`,...at};return jsxRuntimeExports.jsx(ht,{className:Ut,style:qt,ref:Ot,role:"progressbar",...Dt,"aria-valuenow":Number(Mt)??pt,"aria-valuemin":Number(kt),"aria-valuemax":Number(wt),children:_e})});React.forwardRef(({className:$,children:_e,tag:rt="div",height:at,style:ht,...pt},wt)=>{const st=m$3("progress",$),Tt={height:`${at}px`,...ht};return jsxRuntimeExports.jsx(rt,{className:st,ref:wt,style:Tt,...pt,children:React.Children.map(_e,kt=>{if(!React.isValidElement(kt)||kt.type!==Ce){console.error("Progress component only allows ProgressBar as child");return}else return kt})})});const Ie=$=>{const[_e,rt]=reactExports.useState(!1),at=reactExports.useMemo(()=>new IntersectionObserver(([ht])=>{rt(ht.isIntersecting)}),[]);return reactExports.useEffect(()=>{if($.current)return at.observe($.current),()=>at.disconnect()},[at,$]),_e},_t=React.forwardRef(({className:$,size:_e,contrast:rt,value:at,defaultValue:ht,id:pt,labelClass:wt,wrapperClass:st,wrapperStyle:Tt,wrapperTag:kt="div",label:Mt,onChange:Dt,children:Ot,labelRef:Ut,labelStyle:qt,type:tr,onBlur:ar,readonly:Yt=!1,...Kt},Jt)=>{var pr,Sr;const[Er,Rr]=reactExports.useState(at||ht),[Lr,Mr]=reactExports.useState(0),[Zr,dn]=reactExports.useState(!1),Jr=reactExports.useRef(null),wr=Ie(Jr);reactExports.useImperativeHandle(Jt,()=>Jr.current);const Xr=reactExports.useRef(null),Dr=Ut||Xr,xn=m$3("form-outline",rt&&"form-white",st),gn=m$3("form-control",Zr&&"active",tr==="date"&&"active",_e&&`form-control-${_e}`,$),Pr=m$3("form-label",wt);reactExports.useEffect(()=>{if(!Jr.current)return;const{value:ln}=Jr.current;ln!=""?dn(!0):dn(!1)},[(pr=Jr.current)==null?void 0:pr.value]),reactExports.useEffect(()=>{at!==void 0&&(at!=""?dn(!0):dn(!1))},[at]),reactExports.useEffect(()=>{ht!==void 0&&(ht!=""?dn(!0):dn(!1))},[ht]);const Gr=reactExports.useCallback(()=>{var ln;(ln=Dr.current)!=null&&ln.clientWidth&&Mr(Dr.current.clientWidth*.8+8)},[Dr]);reactExports.useEffect(()=>{Gr()},[(Sr=Dr.current)==null?void 0:Sr.clientWidth,Gr,wr]);const Or=ln=>{Rr(ln.target.value),Dt==null||Dt(ln)},sn=reactExports.useCallback(ln=>{Jr.current&&(Er!==void 0&&Er!=""||at!==void 0&&at!=""||Jr.current.value!=""?dn(!0):dn(!1),ar&&ar(ln))},[Er,at,ar]);return jsxRuntimeExports.jsxs(kt,{className:xn,style:Tt,children:[jsxRuntimeExports.jsx("input",{type:tr,readOnly:Yt,className:gn,onBlur:sn,onChange:Or,onFocus:Gr,value:at,defaultValue:ht,id:pt,ref:Jr,...Kt}),Mt&&jsxRuntimeExports.jsx("label",{className:Pr,style:qt,htmlFor:pt,ref:Dr,children:Mt}),jsxRuntimeExports.jsxs("div",{className:"form-notch",children:[jsxRuntimeExports.jsx("div",{className:"form-notch-leading"}),jsxRuntimeExports.jsx("div",{className:"form-notch-middle",style:{width:Lr}}),jsxRuntimeExports.jsx("div",{className:"form-notch-trailing"})]}),Ot]})}),xe=({className:$,children:_e,show:rt=!1,id:at,navbar:ht,tag:pt="div",collapseRef:wt,style:st,onShow:Tt,onHide:kt,...Mt})=>{const[Dt,Ot]=reactExports.useState(!1),[Ut,qt]=reactExports.useState(void 0),[tr,ar]=reactExports.useState(!1),Yt=m$3(tr?"collapsing":"collapse",!tr&&Dt&&"show",ht&&"navbar-collapse",$),Kt=reactExports.useRef(null),Jt=wt??Kt,pr=reactExports.useCallback(()=>{Dt&&qt(void 0)},[Dt]);return reactExports.useEffect(()=>{var Sr;Ut===void 0&&Dt&&qt((Sr=Jt==null?void 0:Jt.current)==null?void 0:Sr.scrollHeight)},[Ut,Dt,Jt]),reactExports.useEffect(()=>{Dt!==rt&&(rt?Tt==null||Tt():kt==null||kt(),Ot(rt)),Dt&&ar(!0);const Sr=setTimeout(()=>{ar(!1)},350);return()=>{clearTimeout(Sr)}},[rt,Dt,Tt,kt]),reactExports.useEffect(()=>{var Sr;qt(Dt?(Sr=Jt==null?void 0:Jt.current)==null?void 0:Sr.scrollHeight:0)},[Dt,Jt,_e]),reactExports.useEffect(()=>(window.addEventListener("resize",pr),()=>{window.removeEventListener("resize",pr)}),[pr]),jsxRuntimeExports.jsx(pt,{style:{height:Ut,...st},id:at,className:Yt,...Mt,ref:Jt,children:_e})};reactExports.createContext(null);const Zt=({animationDirection:$,appendToBody:_e,backdrop:rt=!0,children:at,className:ht,closeOnEsc:pt=!0,setShow:wt,leaveHiddenModal:st=!0,modalRef:Tt,onHide:kt,onHidePrevented:Mt,onShow:Dt,show:Ot,staticBackdrop:Ut,nonInvasive:qt=!1,tag:tr="div",...ar})=>{const[Yt,Kt]=reactExports.useState(Ot),[Jt,pr]=reactExports.useState(Ot),[Sr,Er]=reactExports.useState(Ot),[Rr,Lr]=reactExports.useState(!1),[Mr,Zr]=reactExports.useState(0),[dn,Jr]=reactExports.useState([]),wr=reactExports.useRef(null),Xr=Tt||wr,Dr=m$3("modal",Rr&&"modal-static",$,"fade",Jt&&"show",Yt&&qt&&"modal-non-invasive-show",ht),xn=m$3("modal-backdrop","fade",Yt&&"show"),gn=reactExports.useCallback(()=>{pr(ln=>(ln&&(kt==null||kt()),!1)),setTimeout(()=>{Kt(!1),wt==null||wt(!1)},150),setTimeout(()=>{Er(!1)},350)},[kt,wt]),Pr=reactExports.useCallback(ln=>{qt||Jt&&ln.target===Xr.current&&(Ut?(Lr(!0),Mt==null||Mt(),setTimeout(()=>{Lr(!1)},300)):gn())},[Jt,Xr,Ut,gn,Mt,qt]),Gr=reactExports.useCallback(ln=>{Jt&&ln.key==="Tab"&&(ln.preventDefault(),Zr(Mr+1)),pt&&Jt&&ln.key==="Escape"&&(Ut?(Lr(!0),Mt==null||Mt(),setTimeout(()=>{Lr(!1)},300)):gn())},[Jt,pt,Mr,Ut,gn,Mt]);reactExports.useEffect(()=>{var ln;const kn=(ln=Xr.current)==null?void 0:ln.querySelectorAll("button, a, input, select, textarea, [tabindex]"),Bn=Array.from(kn).filter(Fn=>Fn.tabIndex!==-1).sort((Fn,Nn)=>Fn.tabIndex===Nn.tabIndex?0:Nn.tabIndex===null?-1:Fn.tabIndex===null?1:Fn.tabIndex-Nn.tabIndex);Jr(Bn),Zr(Bn.length-1)},[Xr]),reactExports.useEffect(()=>{dn&&dn.length>0&&(Mr===dn.length?(dn[0].focus(),Zr(0)):dn[Mr].focus())},[Mr,dn]),reactExports.useEffect(()=>{const ln=()=>{const Bn=document.documentElement.clientWidth;return Math.abs(window.innerWidth-Bn)},kn=window.innerWidth>document.documentElement.clientWidth&&window.innerWidth>=576;if(Sr&&kn&&!qt){const Bn=ln();document.body.classList.add("modal-open"),document.body.style.overflow="hidden",document.body.style.paddingRight=`${Bn}px`}else document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight="";return()=>{document.body.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.paddingRight=""}},[Sr,qt]),reactExports.useEffect(()=>{Ot?(Dt==null||Dt(),Er(!0),setTimeout(()=>{Kt(!0)},0),setTimeout(()=>{pr(!0),wt==null||wt(!0)},150)):gn()},[Ot,gn,wt,Dt]),reactExports.useEffect(()=>{const ln=kn=>{kn.target.closest(".modal-dialog")||window.addEventListener("mouseup",Pr,{once:!0})};return window.addEventListener("mousedown",ln),window.addEventListener("keydown",Gr),()=>{window.removeEventListener("mousedown",ln),window.removeEventListener("keydown",Gr)}},[Gr,Pr]);const Or=jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:(st||Ot||Sr)&&ReactDOM.createPortal(jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(tr,{className:Dr,ref:Xr,style:{display:Sr||Ot?"block":"none",pointerEvents:qt?"none":"initial"},...ar,children:at}),ReactDOM.createPortal(rt&&Sr&&!qt&&jsxRuntimeExports.jsx("div",{className:xn}),document.body)]}),document.body)}),sn=jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:(st||Ot||Sr)&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(tr,{className:Dr,ref:Xr,style:{display:Sr||Ot?"block":"none",pointerEvents:qt?"none":"initial"},...ar,children:at}),ReactDOM.createPortal(rt&&Sr&&!qt&&jsxRuntimeExports.jsx("div",{onClick:gn,className:xn}),document.body)]})});return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:_e?Or:sn})},zt=React.forwardRef(({className:$,centered:_e,children:rt,size:at,scrollable:ht,tag:pt="div",...wt},st)=>{const Tt=m$3("modal-dialog",ht&&"modal-dialog-scrollable",_e&&"modal-dialog-centered",at&&`modal-${at}`,$);return jsxRuntimeExports.jsx(pt,{className:Tt,...wt,ref:st,children:rt})}),Ht=React.forwardRef(({className:$,children:_e,tag:rt="div",...at},ht)=>{const pt=m$3("modal-content",$);return jsxRuntimeExports.jsx(rt,{className:pt,...at,ref:ht,children:_e})}),es=React.forwardRef(({className:$,children:_e,tag:rt="div",...at},ht)=>{const pt=m$3("modal-header",$);return jsxRuntimeExports.jsx(rt,{className:pt,...at,ref:ht,children:_e})}),ts=React.forwardRef(({className:$,children:_e,tag:rt="h5",...at},ht)=>{const pt=m$3("modal-title",$);return jsxRuntimeExports.jsx(rt,{className:pt,...at,ref:ht,children:_e})}),ss=React.forwardRef(({className:$,children:_e,tag:rt="div",...at},ht)=>{const pt=m$3("modal-body",$);return jsxRuntimeExports.jsx(rt,{className:pt,...at,ref:ht,children:_e})});React.forwardRef(({className:$,children:_e,tag:rt="div",...at},ht)=>{const pt=m$3("modal-footer",$);return jsxRuntimeExports.jsx(rt,{className:pt,...at,ref:ht,children:_e})});React.createContext({activeElement:null,setTargets:null});React.forwardRef(({className:$,children:_e,noBorder:rt,textBefore:at,textAfter:ht,noWrap:pt,tag:wt="div",textTag:st="span",textClass:Tt,size:kt,textProps:Mt,...Dt},Ot)=>{const Ut=m$3("input-group",pt&&"flex-nowrap",kt&&`input-group-${kt}`,$),qt=m$3("input-group-text",rt&&"border-0",Tt),tr=ar=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ar&&Array.isArray(ar)?ar.map((Yt,Kt)=>jsxRuntimeExports.jsx(st,{className:qt,...Mt,children:Yt},Kt)):jsxRuntimeExports.jsx(st,{className:qt,...Mt,children:ar})});return jsxRuntimeExports.jsxs(wt,{className:Ut,ref:Ot,...Dt,children:[at&&tr(at),_e,ht&&tr(ht)]})});React.forwardRef(({className:$,children:_e,isValidated:rt=!1,onReset:at,onSubmit:ht,noValidate:pt=!0,...wt},st)=>{const[Tt,kt]=reactExports.useState(rt),Mt=m$3("needs-validation",Tt&&"was-validated",$),Dt=Ut=>{Ut.preventDefault(),kt(!0),ht&&ht(Ut)},Ot=Ut=>{Ut.preventDefault(),kt(!1),at&&at(Ut)};return reactExports.useEffect(()=>{kt(rt)},[rt]),jsxRuntimeExports.jsx("form",{className:Mt,onSubmit:Dt,onReset:Ot,ref:st,noValidate:pt,...wt,children:_e})});React.forwardRef(({className:$,fill:_e,pills:rt,justify:at,children:ht,...pt},wt)=>{const st=m$3("nav",rt?"nav-pills":"nav-tabs",_e&&"nav-fill",at&&"nav-justified",$);return jsxRuntimeExports.jsx("ul",{className:st,ref:wt,...pt,children:ht})});React.forwardRef(({className:$,children:_e,style:rt,tag:at="li",...ht},pt)=>{const wt=m$3("nav-item",$);return jsxRuntimeExports.jsx(at,{className:wt,style:{cursor:"pointer",...rt},role:"presentation",ref:pt,...ht,children:_e})});React.forwardRef(({className:$,color:_e,active:rt,onShow:at,onHide:ht,children:pt,...wt},st)=>{const Tt=m$3("nav-link",rt&&"active",_e&&`bg-${_e}`,$);return reactExports.useEffect(()=>{rt?at==null||at():ht==null||ht()},[rt]),jsxRuntimeExports.jsx("a",{className:Tt,ref:st,...wt,children:pt})});React.forwardRef(({className:$,tag:_e="div",children:rt,...at},ht)=>{const pt=m$3("tab-content",$);return jsxRuntimeExports.jsx(_e,{className:pt,ref:ht,...at,children:rt})});React.forwardRef(({className:$,tag:_e="div",show:rt,children:at,...ht},pt)=>{const[wt,st]=reactExports.useState(!1),Tt=m$3("tab-pane","fade",wt&&"show",rt&&"active",$);return reactExports.useEffect(()=>{let kt;return rt?kt=setTimeout(()=>{st(!0)},100):st(!1),()=>{clearTimeout(kt)}},[rt]),jsxRuntimeExports.jsx(_e,{className:Tt,role:"tabpanel",ref:pt,...ht,children:at})});reactExports.createContext({active:0});const Ne=React.createContext({activeItem:0,setActiveItem:null,alwaysOpen:!1,initialActive:0});React.forwardRef(({alwaysOpen:$,borderless:_e,className:rt,flush:at,active:ht,initialActive:pt=0,tag:wt="div",children:st,onChange:Tt,...kt},Mt)=>{const Dt=reactExports.useMemo(()=>typeof ht<"u",[ht]),Ot=m$3("accordion",at&&"accordion-flush",_e&&"accordion-borderless",rt),[Ut,qt]=reactExports.useState(pt);return jsxRuntimeExports.jsx(wt,{className:Ot,ref:Mt,...kt,children:jsxRuntimeExports.jsx(Ne.Provider,{value:{activeItem:Dt?ht:Ut,setActiveItem:qt,alwaysOpen:$,initialActive:pt,onChange:Tt},children:st})})});React.forwardRef(({className:$,bodyClassName:_e,bodyStyle:rt,headerClassName:at,collapseId:ht,headerTitle:pt,headerStyle:wt,btnClassName:st,tag:Tt="div",children:kt,...Mt},Dt)=>{const{activeItem:Ot,setActiveItem:Ut,alwaysOpen:qt,onChange:tr}=reactExports.useContext(Ne),ar=reactExports.useMemo(()=>Array.isArray(Ot)?Ot.includes(ht):Ot===ht,[Ot,ht]),Yt=m$3("accordion-item",$),Kt=m$3("accordion-header",at),Jt=m$3("accordion-body",_e),pr=m$3("accordion-button",!ar&&"collapsed",st),Sr=reactExports.useCallback(Er=>{let Rr=Er;Array.isArray(Ot)?Ot.includes(Er)?Rr=Ot.filter(Lr=>Lr!==Er):Rr=qt?[...Ot,Er]:[Er]:(Rr=Ot===Er?0:Er,qt&&(Rr=[Rr])),tr==null||tr(Rr),Ut(Rr)},[tr,Ot,Ut,qt]);return jsxRuntimeExports.jsxs(Tt,{className:Yt,ref:Dt,...Mt,children:[jsxRuntimeExports.jsx("h2",{className:Kt,style:wt,children:jsxRuntimeExports.jsx("button",{onClick:()=>Sr(ht),className:pr,type:"button",children:pt})}),jsxRuntimeExports.jsx(xe,{id:ht.toString(),show:ar,children:jsxRuntimeExports.jsx("div",{className:Jt,style:rt,children:kt})})]})});const auth_bg="/assets/auth-bg-254aad58.jpg";var shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e$1=reactExports;function h$3($,_e){return $===_e&&($!==0||1/$===1/_e)||$!==$&&_e!==_e}var k$2=typeof Object.is=="function"?Object.is:h$3,l$2=e$1.useState,m$2=e$1.useEffect,n$3=e$1.useLayoutEffect,p$3=e$1.useDebugValue;function q$3($,_e){var rt=_e(),at=l$2({inst:{value:rt,getSnapshot:_e}}),ht=at[0].inst,pt=at[1];return n$3(function(){ht.value=rt,ht.getSnapshot=_e,r$2(ht)&&pt({inst:ht})},[$,rt,_e]),m$2(function(){return r$2(ht)&&pt({inst:ht}),$(function(){r$2(ht)&&pt({inst:ht})})},[$]),p$3(rt),rt}function r$2($){var _e=$.getSnapshot;$=$.value;try{var rt=_e();return!k$2($,rt)}catch{return!0}}function t$3($,_e){return _e()}var u$3=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$3:q$3;useSyncExternalStoreShim_production_min.useSyncExternalStore=e$1.useSyncExternalStore!==void 0?e$1.useSyncExternalStore:u$3;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports,withSelector={exports:{}},withSelector_production_min={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h$2=reactExports,n$2=shimExports;function p$2($,_e){return $===_e&&($!==0||1/$===1/_e)||$!==$&&_e!==_e}var q$2=typeof Object.is=="function"?Object.is:p$2,r$1=n$2.useSyncExternalStore,t$2=h$2.useRef,u$2=h$2.useEffect,v$2=h$2.useMemo,w$1=h$2.useDebugValue;withSelector_production_min.useSyncExternalStoreWithSelector=function($,_e,rt,at,ht){var pt=t$2(null);if(pt.current===null){var wt={hasValue:!1,value:null};pt.current=wt}else wt=pt.current;pt=v$2(function(){function Tt(Ut){if(!kt){if(kt=!0,Mt=Ut,Ut=at(Ut),ht!==void 0&&wt.hasValue){var qt=wt.value;if(ht(qt,Ut))return Dt=qt}return Dt=Ut}if(qt=Dt,q$2(Mt,Ut))return qt;var tr=at(Ut);return ht!==void 0&&ht(qt,tr)?qt:(Mt=Ut,Dt=tr)}var kt=!1,Mt,Dt,Ot=rt===void 0?null:rt;return[function(){return Tt(_e())},Ot===null?void 0:function(){return Tt(Ot())}]},[_e,rt,at,ht]);var st=r$1($,pt[0],pt[1]);return u$2(function(){wt.hasValue=!0,wt.value=st},[st]),w$1(st),st};withSelector.exports=withSelector_production_min;var withSelectorExports=withSelector.exports;function defaultNoopBatch($){$()}let batch=defaultNoopBatch;const setBatch=$=>batch=$,getBatch=()=>batch,ContextKey=Symbol.for("react-redux-context"),gT=typeof globalThis<"u"?globalThis:{};function getContext(){var $;if(!reactExports.createContext)return{};const _e=($=gT[ContextKey])!=null?$:gT[ContextKey]=new Map;let rt=_e.get(reactExports.createContext);return rt||(rt=reactExports.createContext(null),_e.set(reactExports.createContext,rt)),rt}const ReactReduxContext=getContext();function createReduxContextHook($=ReactReduxContext){return function(){return reactExports.useContext($)}}const useReduxContext=createReduxContextHook(),notInitialized=()=>{throw new Error("uSES not initialized!")};let useSyncExternalStoreWithSelector=notInitialized;const initializeUseSelector=$=>{useSyncExternalStoreWithSelector=$},refEquality=($,_e)=>$===_e;function createSelectorHook($=ReactReduxContext){const _e=$===ReactReduxContext?useReduxContext:createReduxContextHook($);return function(at,ht={}){const{equalityFn:pt=refEquality,stabilityCheck:wt=void 0,noopCheck:st=void 0}=typeof ht=="function"?{equalityFn:ht}:ht,{store:Tt,subscription:kt,getServerState:Mt,stabilityCheck:Dt,noopCheck:Ot}=_e();reactExports.useRef(!0);const Ut=reactExports.useCallback({[at.name](tr){return at(tr)}}[at.name],[at,Dt,wt]),qt=useSyncExternalStoreWithSelector(kt.addNestedSub,Tt.getState,Mt||Tt.getState,Ut,pt);return reactExports.useDebugValue(qt),qt}}const useSelector=createSelectorHook();var reactIs={exports:{}},reactIs_production_min={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$1=Symbol.for("react.element"),c$1=Symbol.for("react.portal"),d$1=Symbol.for("react.fragment"),e=Symbol.for("react.strict_mode"),f$1=Symbol.for("react.profiler"),g$1=Symbol.for("react.provider"),h$1=Symbol.for("react.context"),k$1=Symbol.for("react.server_context"),l$1=Symbol.for("react.forward_ref"),m$1=Symbol.for("react.suspense"),n$1=Symbol.for("react.suspense_list"),p$1=Symbol.for("react.memo"),q$1=Symbol.for("react.lazy"),t$1=Symbol.for("react.offscreen"),u$1;u$1=Symbol.for("react.module.reference");function v$1($){if(typeof $=="object"&&$!==null){var _e=$.$$typeof;switch(_e){case b$1:switch($=$.type,$){case d$1:case f$1:case e:case m$1:case n$1:return $;default:switch($=$&&$.$$typeof,$){case k$1:case h$1:case l$1:case q$1:case p$1:case g$1:return $;default:return _e}}case c$1:return _e}}}reactIs_production_min.ContextConsumer=h$1;reactIs_production_min.ContextProvider=g$1;reactIs_production_min.Element=b$1;reactIs_production_min.ForwardRef=l$1;reactIs_production_min.Fragment=d$1;reactIs_production_min.Lazy=q$1;reactIs_production_min.Memo=p$1;reactIs_production_min.Portal=c$1;reactIs_production_min.Profiler=f$1;reactIs_production_min.StrictMode=e;reactIs_production_min.Suspense=m$1;reactIs_production_min.SuspenseList=n$1;reactIs_production_min.isAsyncMode=function(){return!1};reactIs_production_min.isConcurrentMode=function(){return!1};reactIs_production_min.isContextConsumer=function($){return v$1($)===h$1};reactIs_production_min.isContextProvider=function($){return v$1($)===g$1};reactIs_production_min.isElement=function($){return typeof $=="object"&&$!==null&&$.$$typeof===b$1};reactIs_production_min.isForwardRef=function($){return v$1($)===l$1};reactIs_production_min.isFragment=function($){return v$1($)===d$1};reactIs_production_min.isLazy=function($){return v$1($)===q$1};reactIs_production_min.isMemo=function($){return v$1($)===p$1};reactIs_production_min.isPortal=function($){return v$1($)===c$1};reactIs_production_min.isProfiler=function($){return v$1($)===f$1};reactIs_production_min.isStrictMode=function($){return v$1($)===e};reactIs_production_min.isSuspense=function($){return v$1($)===m$1};reactIs_production_min.isSuspenseList=function($){return v$1($)===n$1};reactIs_production_min.isValidElementType=function($){return typeof $=="string"||typeof $=="function"||$===d$1||$===f$1||$===e||$===m$1||$===n$1||$===t$1||typeof $=="object"&&$!==null&&($.$$typeof===q$1||$.$$typeof===p$1||$.$$typeof===g$1||$.$$typeof===h$1||$.$$typeof===l$1||$.$$typeof===u$1||$.getModuleId!==void 0)};reactIs_production_min.typeOf=v$1;reactIs.exports=reactIs_production_min;var reactIsExports=reactIs.exports;const _excluded$1=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function pureFinalPropsSelectorFactory($,_e,rt,at,{areStatesEqual:ht,areOwnPropsEqual:pt,areStatePropsEqual:wt}){let st=!1,Tt,kt,Mt,Dt,Ot;function Ut(Kt,Jt){return Tt=Kt,kt=Jt,Mt=$(Tt,kt),Dt=_e(at,kt),Ot=rt(Mt,Dt,kt),st=!0,Ot}function qt(){return Mt=$(Tt,kt),_e.dependsOnOwnProps&&(Dt=_e(at,kt)),Ot=rt(Mt,Dt,kt),Ot}function tr(){return $.dependsOnOwnProps&&(Mt=$(Tt,kt)),_e.dependsOnOwnProps&&(Dt=_e(at,kt)),Ot=rt(Mt,Dt,kt),Ot}function ar(){const Kt=$(Tt,kt),Jt=!wt(Kt,Mt);return Mt=Kt,Jt&&(Ot=rt(Mt,Dt,kt)),Ot}function Yt(Kt,Jt){const pr=!pt(Jt,kt),Sr=!ht(Kt,Tt,Jt,kt);return Tt=Kt,kt=Jt,pr&&Sr?qt():pr?tr():Sr?ar():Ot}return function(Jt,pr){return st?Yt(Jt,pr):Ut(Jt,pr)}}function finalPropsSelectorFactory($,_e){let{initMapStateToProps:rt,initMapDispatchToProps:at,initMergeProps:ht}=_e,pt=_objectWithoutPropertiesLoose$9(_e,_excluded$1);const wt=rt($,pt),st=at($,pt),Tt=ht($,pt);return pureFinalPropsSelectorFactory(wt,st,Tt,$,pt)}function bindActionCreators($,_e){const rt={};for(const at in $){const ht=$[at];typeof ht=="function"&&(rt[at]=(...pt)=>_e(ht(...pt)))}return rt}function wrapMapToPropsConstant($){return function(rt){const at=$(rt);function ht(){return at}return ht.dependsOnOwnProps=!1,ht}}function getDependsOnOwnProps($){return $.dependsOnOwnProps?!!$.dependsOnOwnProps:$.length!==1}function wrapMapToPropsFunc($,_e){return function(at,{displayName:ht}){const pt=function(st,Tt){return pt.dependsOnOwnProps?pt.mapToProps(st,Tt):pt.mapToProps(st,void 0)};return pt.dependsOnOwnProps=!0,pt.mapToProps=function(st,Tt){pt.mapToProps=$,pt.dependsOnOwnProps=getDependsOnOwnProps($);let kt=pt(st,Tt);return typeof kt=="function"&&(pt.mapToProps=kt,pt.dependsOnOwnProps=getDependsOnOwnProps(kt),kt=pt(st,Tt)),kt},pt}}function createInvalidArgFactory($,_e){return(rt,at)=>{throw new Error(`Invalid value of type ${typeof $} for ${_e} argument when connecting component ${at.wrappedComponentName}.`)}}function mapDispatchToPropsFactory($){return $&&typeof $=="object"?wrapMapToPropsConstant(_e=>bindActionCreators($,_e)):$?typeof $=="function"?wrapMapToPropsFunc($):createInvalidArgFactory($,"mapDispatchToProps"):wrapMapToPropsConstant(_e=>({dispatch:_e}))}function mapStateToPropsFactory($){return $?typeof $=="function"?wrapMapToPropsFunc($):createInvalidArgFactory($,"mapStateToProps"):wrapMapToPropsConstant(()=>({}))}function defaultMergeProps($,_e,rt){return _extends({},rt,$,_e)}function wrapMergePropsFunc($){return function(rt,{displayName:at,areMergedPropsEqual:ht}){let pt=!1,wt;return function(Tt,kt,Mt){const Dt=$(Tt,kt,Mt);return pt?ht(Dt,wt)||(wt=Dt):(pt=!0,wt=Dt),wt}}}function mergePropsFactory($){return $?typeof $=="function"?wrapMergePropsFunc($):createInvalidArgFactory($,"mergeProps"):()=>defaultMergeProps}function createListenerCollection(){const $=getBatch();let _e=null,rt=null;return{clear(){_e=null,rt=null},notify(){$(()=>{let at=_e;for(;at;)at.callback(),at=at.next})},get(){let at=[],ht=_e;for(;ht;)at.push(ht),ht=ht.next;return at},subscribe(at){let ht=!0,pt=rt={callback:at,next:null,prev:rt};return pt.prev?pt.prev.next=pt:_e=pt,function(){!ht||_e===null||(ht=!1,pt.next?pt.next.prev=pt.prev:rt=pt.prev,pt.prev?pt.prev.next=pt.next:_e=pt.next)}}}}const nullListeners={notify(){},get:()=>[]};function createSubscription($,_e){let rt,at=nullListeners,ht=0,pt=!1;function wt(tr){Mt();const ar=at.subscribe(tr);let Yt=!1;return()=>{Yt||(Yt=!0,ar(),Dt())}}function st(){at.notify()}function Tt(){qt.onStateChange&&qt.onStateChange()}function kt(){return pt}function Mt(){ht++,rt||(rt=_e?_e.addNestedSub(Tt):$.subscribe(Tt),at=createListenerCollection())}function Dt(){ht--,rt&&ht===0&&(rt(),rt=void 0,at.clear(),at=nullListeners)}function Ot(){pt||(pt=!0,Mt())}function Ut(){pt&&(pt=!1,Dt())}const qt={addNestedSub:wt,notifyNestedSubs:st,handleChangeWrapper:Tt,isSubscribed:kt,trySubscribe:Ot,tryUnsubscribe:Ut,getListeners:()=>at};return qt}const canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",useIsomorphicLayoutEffect=canUseDOM?reactExports.useLayoutEffect:reactExports.useEffect;function is($,_e){return $===_e?$!==0||_e!==0||1/$===1/_e:$!==$&&_e!==_e}function shallowEqual($,_e){if(is($,_e))return!0;if(typeof $!="object"||$===null||typeof _e!="object"||_e===null)return!1;const rt=Object.keys($),at=Object.keys(_e);if(rt.length!==at.length)return!1;for(let ht=0;ht<rt.length;ht++)if(!Object.prototype.hasOwnProperty.call(_e,rt[ht])||!is($[rt[ht]],_e[rt[ht]]))return!1;return!0}const _excluded=["reactReduxForwardedRef"];let useSyncExternalStore=notInitialized;const initializeConnect=$=>{useSyncExternalStore=$},NO_SUBSCRIPTION_ARRAY=[null,null];function useIsomorphicLayoutEffectWithArgs($,_e,rt){useIsomorphicLayoutEffect(()=>$(..._e),rt)}function captureWrapperProps($,_e,rt,at,ht,pt){$.current=at,rt.current=!1,ht.current&&(ht.current=null,pt())}function subscribeUpdates($,_e,rt,at,ht,pt,wt,st,Tt,kt,Mt){if(!$)return()=>{};let Dt=!1,Ot=null;const Ut=()=>{if(Dt||!st.current)return;const tr=_e.getState();let ar,Yt;try{ar=at(tr,ht.current)}catch(Kt){Yt=Kt,Ot=Kt}Yt||(Ot=null),ar===pt.current?wt.current||kt():(pt.current=ar,Tt.current=ar,wt.current=!0,Mt())};return rt.onStateChange=Ut,rt.trySubscribe(),Ut(),()=>{if(Dt=!0,rt.tryUnsubscribe(),rt.onStateChange=null,Ot)throw Ot}}function strictEqual($,_e){return $===_e}function connect($,_e,rt,{pure:at,areStatesEqual:ht=strictEqual,areOwnPropsEqual:pt=shallowEqual,areStatePropsEqual:wt=shallowEqual,areMergedPropsEqual:st=shallowEqual,forwardRef:Tt=!1,context:kt=ReactReduxContext}={}){const Mt=kt,Dt=mapStateToPropsFactory($),Ot=mapDispatchToPropsFactory(_e),Ut=mergePropsFactory(rt),qt=!!$;return ar=>{const Yt=ar.displayName||ar.name||"Component",Kt=`Connect(${Yt})`,Jt={shouldHandleStateChanges:qt,displayName:Kt,wrappedComponentName:Yt,WrappedComponent:ar,initMapStateToProps:Dt,initMapDispatchToProps:Ot,initMergeProps:Ut,areStatesEqual:ht,areStatePropsEqual:wt,areOwnPropsEqual:pt,areMergedPropsEqual:st};function pr(Rr){const[Lr,Mr,Zr]=reactExports.useMemo(()=>{const{reactReduxForwardedRef:so}=Rr,Qn=_objectWithoutPropertiesLoose$9(Rr,_excluded);return[Rr.context,so,Qn]},[Rr]),dn=reactExports.useMemo(()=>Lr&&Lr.Consumer&&reactIsExports.isContextConsumer(reactExports.createElement(Lr.Consumer,null))?Lr:Mt,[Lr,Mt]),Jr=reactExports.useContext(dn),wr=!!Rr.store&&!!Rr.store.getState&&!!Rr.store.dispatch,Xr=!!Jr&&!!Jr.store,Dr=wr?Rr.store:Jr.store,xn=Xr?Jr.getServerState:Dr.getState,gn=reactExports.useMemo(()=>finalPropsSelectorFactory(Dr.dispatch,Jt),[Dr]),[Pr,Gr]=reactExports.useMemo(()=>{if(!qt)return NO_SUBSCRIPTION_ARRAY;const so=createSubscription(Dr,wr?void 0:Jr.subscription),Qn=so.notifyNestedSubs.bind(so);return[so,Qn]},[Dr,wr,Jr]),Or=reactExports.useMemo(()=>wr?Jr:_extends({},Jr,{subscription:Pr}),[wr,Jr,Pr]),sn=reactExports.useRef(),ln=reactExports.useRef(Zr),kn=reactExports.useRef(),Bn=reactExports.useRef(!1);reactExports.useRef(!1);const Fn=reactExports.useRef(!1),Nn=reactExports.useRef();useIsomorphicLayoutEffect(()=>(Fn.current=!0,()=>{Fn.current=!1}),[]);const Kn=reactExports.useMemo(()=>()=>kn.current&&Zr===ln.current?kn.current:gn(Dr.getState(),Zr),[Dr,Zr]),uo=reactExports.useMemo(()=>Qn=>Pr?subscribeUpdates(qt,Dr,Pr,gn,ln,sn,Bn,Fn,kn,Gr,Qn):()=>{},[Pr]);useIsomorphicLayoutEffectWithArgs(captureWrapperProps,[ln,sn,Bn,Zr,kn,Gr]);let vo;try{vo=useSyncExternalStore(uo,Kn,xn?()=>gn(xn(),Zr):Kn)}catch(so){throw Nn.current&&(so.message+=`
The error may be correlated with this previous error:
${Nn.current.stack}

`),so}useIsomorphicLayoutEffect(()=>{Nn.current=void 0,kn.current=void 0,sn.current=vo});const Ao=reactExports.useMemo(()=>reactExports.createElement(ar,_extends({},vo,{ref:Mr})),[Mr,ar,vo]);return reactExports.useMemo(()=>qt?reactExports.createElement(dn.Provider,{value:Or},Ao):Ao,[dn,Ao,Or])}const Er=reactExports.memo(pr);if(Er.WrappedComponent=ar,Er.displayName=pr.displayName=Kt,Tt){const Lr=reactExports.forwardRef(function(Zr,dn){return reactExports.createElement(Er,_extends({},Zr,{reactReduxForwardedRef:dn}))});return Lr.displayName=Kt,Lr.WrappedComponent=ar,hoistStatics(Lr,ar)}return hoistStatics(Er,ar)}}function Provider({store:$,context:_e,children:rt,serverState:at,stabilityCheck:ht="once",noopCheck:pt="once"}){const wt=reactExports.useMemo(()=>{const kt=createSubscription($);return{store:$,subscription:kt,getServerState:at?()=>at:void 0,stabilityCheck:ht,noopCheck:pt}},[$,at,ht,pt]),st=reactExports.useMemo(()=>$.getState(),[$]);useIsomorphicLayoutEffect(()=>{const{subscription:kt}=wt;return kt.onStateChange=kt.notifyNestedSubs,kt.trySubscribe(),st!==$.getState()&&kt.notifyNestedSubs(),()=>{kt.tryUnsubscribe(),kt.onStateChange=void 0}},[wt,st]);const Tt=_e||ReactReduxContext;return reactExports.createElement(Tt.Provider,{value:wt},rt)}function createStoreHook($=ReactReduxContext){const _e=$===ReactReduxContext?useReduxContext:createReduxContextHook($);return function(){const{store:at}=_e();return at}}const useStore=createStoreHook();function createDispatchHook($=ReactReduxContext){const _e=$===ReactReduxContext?useStore:createStoreHook($);return function(){return _e().dispatch}}const useDispatch=createDispatchHook();initializeUseSelector(withSelectorExports.useSyncExternalStoreWithSelector);initializeConnect(shimExports.useSyncExternalStore);setBatch(reactDomExports.unstable_batchedUpdates);function n($){for(var _e=arguments.length,rt=Array(_e>1?_e-1:0),at=1;at<_e;at++)rt[at-1]=arguments[at];throw Error("[Immer] minified error nr: "+$+(rt.length?" "+rt.map(function(ht){return"'"+ht+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r($){return!!$&&!!$[Q]}function t($){var _e;return!!$&&(function(rt){if(!rt||typeof rt!="object")return!1;var at=Object.getPrototypeOf(rt);if(at===null)return!0;var ht=Object.hasOwnProperty.call(at,"constructor")&&at.constructor;return ht===Object||typeof ht=="function"&&Function.toString.call(ht)===Z}($)||Array.isArray($)||!!$[L]||!!(!((_e=$.constructor)===null||_e===void 0)&&_e[L])||s($)||v($))}function i($,_e,rt){rt===void 0&&(rt=!1),o($)===0?(rt?Object.keys:nn)($).forEach(function(at){rt&&typeof at=="symbol"||_e(at,$[at],$)}):$.forEach(function(at,ht){return _e(ht,at,$)})}function o($){var _e=$[Q];return _e?_e.i>3?_e.i-4:_e.i:Array.isArray($)?1:s($)?2:v($)?3:0}function u($,_e){return o($)===2?$.has(_e):Object.prototype.hasOwnProperty.call($,_e)}function a($,_e){return o($)===2?$.get(_e):$[_e]}function f($,_e,rt){var at=o($);at===2?$.set(_e,rt):at===3?$.add(rt):$[_e]=rt}function c($,_e){return $===_e?$!==0||1/$==1/_e:$!=$&&_e!=_e}function s($){return X&&$ instanceof Map}function v($){return q&&$ instanceof Set}function p($){return $.o||$.t}function l($){if(Array.isArray($))return Array.prototype.slice.call($);var _e=rn($);delete _e[Q];for(var rt=nn(_e),at=0;at<rt.length;at++){var ht=rt[at],pt=_e[ht];pt.writable===!1&&(pt.writable=!0,pt.configurable=!0),(pt.get||pt.set)&&(_e[ht]={configurable:!0,writable:!0,enumerable:pt.enumerable,value:$[ht]})}return Object.create(Object.getPrototypeOf($),_e)}function d($,_e){return _e===void 0&&(_e=!1),y($)||r($)||!t($)||(o($)>1&&($.set=$.add=$.clear=$.delete=h),Object.freeze($),_e&&i($,function(rt,at){return d(at,!0)},!0)),$}function h(){n(2)}function y($){return $==null||typeof $!="object"||Object.isFrozen($)}function b($){var _e=tn[$];return _e||n(18,$),_e}function m($,_e){tn[$]||(tn[$]=_e)}function _(){return U}function j($,_e){_e&&(b("Patches"),$.u=[],$.s=[],$.v=_e)}function g($){O($),$.p.forEach(S),$.p=null}function O($){$===U&&(U=$.l)}function w($){return U={p:[],l:U,h:$,m:!0,_:0}}function S($){var _e=$[Q];_e.i===0||_e.i===1?_e.j():_e.g=!0}function P($,_e){_e._=_e.p.length;var rt=_e.p[0],at=$!==void 0&&$!==rt;return _e.h.O||b("ES5").S(_e,$,at),at?(rt[Q].P&&(g(_e),n(4)),t($)&&($=M(_e,$),_e.l||x(_e,$)),_e.u&&b("Patches").M(rt[Q].t,$,_e.u,_e.s)):$=M(_e,rt,[]),g(_e),_e.u&&_e.v(_e.u,_e.s),$!==H?$:void 0}function M($,_e,rt){if(y(_e))return _e;var at=_e[Q];if(!at)return i(_e,function(st,Tt){return A($,at,_e,st,Tt,rt)},!0),_e;if(at.A!==$)return _e;if(!at.P)return x($,at.t,!0),at.t;if(!at.I){at.I=!0,at.A._--;var ht=at.i===4||at.i===5?at.o=l(at.k):at.o,pt=ht,wt=!1;at.i===3&&(pt=new Set(ht),ht.clear(),wt=!0),i(pt,function(st,Tt){return A($,at,ht,st,Tt,rt,wt)}),x($,ht,!1),rt&&$.u&&b("Patches").N(at,rt,$.u,$.s)}return at.o}function A($,_e,rt,at,ht,pt,wt){if(r(ht)){var st=M($,ht,pt&&_e&&_e.i!==3&&!u(_e.R,at)?pt.concat(at):void 0);if(f(rt,at,st),!r(st))return;$.m=!1}else wt&&rt.add(ht);if(t(ht)&&!y(ht)){if(!$.h.D&&$._<1)return;M($,ht),_e&&_e.A.l||x($,ht)}}function x($,_e,rt){rt===void 0&&(rt=!1),!$.l&&$.h.D&&$.m&&d(_e,rt)}function z($,_e){var rt=$[Q];return(rt?p(rt):$)[_e]}function I($,_e){if(_e in $)for(var rt=Object.getPrototypeOf($);rt;){var at=Object.getOwnPropertyDescriptor(rt,_e);if(at)return at;rt=Object.getPrototypeOf(rt)}}function k($){$.P||($.P=!0,$.l&&k($.l))}function E($){$.o||($.o=l($.t))}function N($,_e,rt){var at=s(_e)?b("MapSet").F(_e,rt):v(_e)?b("MapSet").T(_e,rt):$.O?function(ht,pt){var wt=Array.isArray(ht),st={i:wt?1:0,A:pt?pt.A:_(),P:!1,I:!1,R:{},l:pt,t:ht,k:null,o:null,j:null,C:!1},Tt=st,kt=en;wt&&(Tt=[st],kt=on);var Mt=Proxy.revocable(Tt,kt),Dt=Mt.revoke,Ot=Mt.proxy;return st.k=Ot,st.j=Dt,Ot}(_e,rt):b("ES5").J(_e,rt);return(rt?rt.A:_()).p.push(at),at}function R($){return r($)||n(22,$),function _e(rt){if(!t(rt))return rt;var at,ht=rt[Q],pt=o(rt);if(ht){if(!ht.P&&(ht.i<4||!b("ES5").K(ht)))return ht.t;ht.I=!0,at=D(rt,pt),ht.I=!1}else at=D(rt,pt);return i(at,function(wt,st){ht&&a(ht.t,wt)===st||f(at,wt,_e(st))}),pt===3?new Set(at):at}($)}function D($,_e){switch(_e){case 2:return new Map($);case 3:return Array.from($)}return l($)}function F(){function $(pt,wt){var st=ht[pt];return st?st.enumerable=wt:ht[pt]=st={configurable:!0,enumerable:wt,get:function(){var Tt=this[Q];return en.get(Tt,pt)},set:function(Tt){var kt=this[Q];en.set(kt,pt,Tt)}},st}function _e(pt){for(var wt=pt.length-1;wt>=0;wt--){var st=pt[wt][Q];if(!st.P)switch(st.i){case 5:at(st)&&k(st);break;case 4:rt(st)&&k(st)}}}function rt(pt){for(var wt=pt.t,st=pt.k,Tt=nn(st),kt=Tt.length-1;kt>=0;kt--){var Mt=Tt[kt];if(Mt!==Q){var Dt=wt[Mt];if(Dt===void 0&&!u(wt,Mt))return!0;var Ot=st[Mt],Ut=Ot&&Ot[Q];if(Ut?Ut.t!==Dt:!c(Ot,Dt))return!0}}var qt=!!wt[Q];return Tt.length!==nn(wt).length+(qt?0:1)}function at(pt){var wt=pt.k;if(wt.length!==pt.t.length)return!0;var st=Object.getOwnPropertyDescriptor(wt,wt.length-1);if(st&&!st.get)return!0;for(var Tt=0;Tt<wt.length;Tt++)if(!wt.hasOwnProperty(Tt))return!0;return!1}var ht={};m("ES5",{J:function(pt,wt){var st=Array.isArray(pt),Tt=function(Mt,Dt){if(Mt){for(var Ot=Array(Dt.length),Ut=0;Ut<Dt.length;Ut++)Object.defineProperty(Ot,""+Ut,$(Ut,!0));return Ot}var qt=rn(Dt);delete qt[Q];for(var tr=nn(qt),ar=0;ar<tr.length;ar++){var Yt=tr[ar];qt[Yt]=$(Yt,Mt||!!qt[Yt].enumerable)}return Object.create(Object.getPrototypeOf(Dt),qt)}(st,pt),kt={i:st?5:4,A:wt?wt.A:_(),P:!1,I:!1,R:{},l:wt,t:pt,k:Tt,o:null,g:!1,C:!1};return Object.defineProperty(Tt,Q,{value:kt,writable:!0}),Tt},S:function(pt,wt,st){st?r(wt)&&wt[Q].A===pt&&_e(pt.p):(pt.u&&function Tt(kt){if(kt&&typeof kt=="object"){var Mt=kt[Q];if(Mt){var Dt=Mt.t,Ot=Mt.k,Ut=Mt.R,qt=Mt.i;if(qt===4)i(Ot,function(Jt){Jt!==Q&&(Dt[Jt]!==void 0||u(Dt,Jt)?Ut[Jt]||Tt(Ot[Jt]):(Ut[Jt]=!0,k(Mt)))}),i(Dt,function(Jt){Ot[Jt]!==void 0||u(Ot,Jt)||(Ut[Jt]=!1,k(Mt))});else if(qt===5){if(at(Mt)&&(k(Mt),Ut.length=!0),Ot.length<Dt.length)for(var tr=Ot.length;tr<Dt.length;tr++)Ut[tr]=!1;else for(var ar=Dt.length;ar<Ot.length;ar++)Ut[ar]=!0;for(var Yt=Math.min(Ot.length,Dt.length),Kt=0;Kt<Yt;Kt++)Ot.hasOwnProperty(Kt)||(Ut[Kt]=!0),Ut[Kt]===void 0&&Tt(Ot[Kt])}}}}(pt.p[0]),_e(pt.p))},K:function(pt){return pt.i===4?rt(pt):at(pt)}})}var G,U,W=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",X=typeof Map<"u",q=typeof Set<"u",B=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",H=W?Symbol.for("immer-nothing"):((G={})["immer-nothing"]=!0,G),L=W?Symbol.for("immer-draftable"):"__$immer_draftable",Q=W?Symbol.for("immer-state"):"__$immer_state",Z=""+Object.prototype.constructor,nn=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function($){return Object.getOwnPropertyNames($).concat(Object.getOwnPropertySymbols($))}:Object.getOwnPropertyNames,rn=Object.getOwnPropertyDescriptors||function($){var _e={};return nn($).forEach(function(rt){_e[rt]=Object.getOwnPropertyDescriptor($,rt)}),_e},tn={},en={get:function($,_e){if(_e===Q)return $;var rt=p($);if(!u(rt,_e))return function(ht,pt,wt){var st,Tt=I(pt,wt);return Tt?"value"in Tt?Tt.value:(st=Tt.get)===null||st===void 0?void 0:st.call(ht.k):void 0}($,rt,_e);var at=rt[_e];return $.I||!t(at)?at:at===z($.t,_e)?(E($),$.o[_e]=N($.A.h,at,$)):at},has:function($,_e){return _e in p($)},ownKeys:function($){return Reflect.ownKeys(p($))},set:function($,_e,rt){var at=I(p($),_e);if(at!=null&&at.set)return at.set.call($.k,rt),!0;if(!$.P){var ht=z(p($),_e),pt=ht==null?void 0:ht[Q];if(pt&&pt.t===rt)return $.o[_e]=rt,$.R[_e]=!1,!0;if(c(rt,ht)&&(rt!==void 0||u($.t,_e)))return!0;E($),k($)}return $.o[_e]===rt&&(rt!==void 0||_e in $.o)||Number.isNaN(rt)&&Number.isNaN($.o[_e])||($.o[_e]=rt,$.R[_e]=!0),!0},deleteProperty:function($,_e){return z($.t,_e)!==void 0||_e in $.t?($.R[_e]=!1,E($),k($)):delete $.R[_e],$.o&&delete $.o[_e],!0},getOwnPropertyDescriptor:function($,_e){var rt=p($),at=Reflect.getOwnPropertyDescriptor(rt,_e);return at&&{writable:!0,configurable:$.i!==1||_e!=="length",enumerable:at.enumerable,value:rt[_e]}},defineProperty:function(){n(11)},getPrototypeOf:function($){return Object.getPrototypeOf($.t)},setPrototypeOf:function(){n(12)}},on={};i(en,function($,_e){on[$]=function(){return arguments[0]=arguments[0][0],_e.apply(this,arguments)}}),on.deleteProperty=function($,_e){return on.set.call(this,$,_e,void 0)},on.set=function($,_e,rt){return en.set.call(this,$[0],_e,rt,$[0])};var un=function(){function $(rt){var at=this;this.O=B,this.D=!0,this.produce=function(ht,pt,wt){if(typeof ht=="function"&&typeof pt!="function"){var st=pt;pt=ht;var Tt=at;return function(tr){var ar=this;tr===void 0&&(tr=st);for(var Yt=arguments.length,Kt=Array(Yt>1?Yt-1:0),Jt=1;Jt<Yt;Jt++)Kt[Jt-1]=arguments[Jt];return Tt.produce(tr,function(pr){var Sr;return(Sr=pt).call.apply(Sr,[ar,pr].concat(Kt))})}}var kt;if(typeof pt!="function"&&n(6),wt!==void 0&&typeof wt!="function"&&n(7),t(ht)){var Mt=w(at),Dt=N(at,ht,void 0),Ot=!0;try{kt=pt(Dt),Ot=!1}finally{Ot?g(Mt):O(Mt)}return typeof Promise<"u"&&kt instanceof Promise?kt.then(function(tr){return j(Mt,wt),P(tr,Mt)},function(tr){throw g(Mt),tr}):(j(Mt,wt),P(kt,Mt))}if(!ht||typeof ht!="object"){if((kt=pt(ht))===void 0&&(kt=ht),kt===H&&(kt=void 0),at.D&&d(kt,!0),wt){var Ut=[],qt=[];b("Patches").M(ht,kt,Ut,qt),wt(Ut,qt)}return kt}n(21,ht)},this.produceWithPatches=function(ht,pt){if(typeof ht=="function")return function(kt){for(var Mt=arguments.length,Dt=Array(Mt>1?Mt-1:0),Ot=1;Ot<Mt;Ot++)Dt[Ot-1]=arguments[Ot];return at.produceWithPatches(kt,function(Ut){return ht.apply(void 0,[Ut].concat(Dt))})};var wt,st,Tt=at.produce(ht,pt,function(kt,Mt){wt=kt,st=Mt});return typeof Promise<"u"&&Tt instanceof Promise?Tt.then(function(kt){return[kt,wt,st]}):[Tt,wt,st]},typeof(rt==null?void 0:rt.useProxies)=="boolean"&&this.setUseProxies(rt.useProxies),typeof(rt==null?void 0:rt.autoFreeze)=="boolean"&&this.setAutoFreeze(rt.autoFreeze)}var _e=$.prototype;return _e.createDraft=function(rt){t(rt)||n(8),r(rt)&&(rt=R(rt));var at=w(this),ht=N(this,rt,void 0);return ht[Q].C=!0,O(at),ht},_e.finishDraft=function(rt,at){var ht=rt&&rt[Q],pt=ht.A;return j(pt,at),P(void 0,pt)},_e.setAutoFreeze=function(rt){this.D=rt},_e.setUseProxies=function(rt){rt&&!B&&n(20),this.O=rt},_e.applyPatches=function(rt,at){var ht;for(ht=at.length-1;ht>=0;ht--){var pt=at[ht];if(pt.path.length===0&&pt.op==="replace"){rt=pt.value;break}}ht>-1&&(at=at.slice(ht+1));var wt=b("Patches").$;return r(rt)?wt(rt,at):this.produce(rt,function(st){return wt(st,at)})},$}(),an=new un,fn=an.produce;an.produceWithPatches.bind(an);an.setAutoFreeze.bind(an);an.setUseProxies.bind(an);an.applyPatches.bind(an);an.createDraft.bind(an);an.finishDraft.bind(an);function _typeof$3($){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_e){return typeof _e}:function(_e){return _e&&typeof Symbol=="function"&&_e.constructor===Symbol&&_e!==Symbol.prototype?"symbol":typeof _e},_typeof$3($)}function _toPrimitive($,_e){if(_typeof$3($)!=="object"||$===null)return $;var rt=$[Symbol.toPrimitive];if(rt!==void 0){var at=rt.call($,_e||"default");if(_typeof$3(at)!=="object")return at;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_e==="string"?String:Number)($)}function _toPropertyKey($){var _e=_toPrimitive($,"string");return _typeof$3(_e)==="symbol"?_e:String(_e)}function _defineProperty$4($,_e,rt){return _e=_toPropertyKey(_e),_e in $?Object.defineProperty($,_e,{value:rt,enumerable:!0,configurable:!0,writable:!0}):$[_e]=rt,$}function ownKeys$3($,_e){var rt=Object.keys($);if(Object.getOwnPropertySymbols){var at=Object.getOwnPropertySymbols($);_e&&(at=at.filter(function(ht){return Object.getOwnPropertyDescriptor($,ht).enumerable})),rt.push.apply(rt,at)}return rt}function _objectSpread2($){for(var _e=1;_e<arguments.length;_e++){var rt=arguments[_e]!=null?arguments[_e]:{};_e%2?ownKeys$3(Object(rt),!0).forEach(function(at){_defineProperty$4($,at,rt[at])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(rt)):ownKeys$3(Object(rt)).forEach(function(at){Object.defineProperty($,at,Object.getOwnPropertyDescriptor(rt,at))})}return $}function formatProdErrorMessage($){return"Minified Redux error #"+$+"; visit https://redux.js.org/Errors?code="+$+" for the full message or use the non-minified dev environment for full errors. "}var $$observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),randomString=function(){return Math.random().toString(36).substring(7).split("").join(".")},ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject$2($){if(typeof $!="object"||$===null)return!1;for(var _e=$;Object.getPrototypeOf(_e)!==null;)_e=Object.getPrototypeOf(_e);return Object.getPrototypeOf($)===_e}function createStore($,_e,rt){var at;if(typeof _e=="function"&&typeof rt=="function"||typeof rt=="function"&&typeof arguments[3]=="function")throw new Error(formatProdErrorMessage(0));if(typeof _e=="function"&&typeof rt>"u"&&(rt=_e,_e=void 0),typeof rt<"u"){if(typeof rt!="function")throw new Error(formatProdErrorMessage(1));return rt(createStore)($,_e)}if(typeof $!="function")throw new Error(formatProdErrorMessage(2));var ht=$,pt=_e,wt=[],st=wt,Tt=!1;function kt(){st===wt&&(st=wt.slice())}function Mt(){if(Tt)throw new Error(formatProdErrorMessage(3));return pt}function Dt(tr){if(typeof tr!="function")throw new Error(formatProdErrorMessage(4));if(Tt)throw new Error(formatProdErrorMessage(5));var ar=!0;return kt(),st.push(tr),function(){if(ar){if(Tt)throw new Error(formatProdErrorMessage(6));ar=!1,kt();var Kt=st.indexOf(tr);st.splice(Kt,1),wt=null}}}function Ot(tr){if(!isPlainObject$2(tr))throw new Error(formatProdErrorMessage(7));if(typeof tr.type>"u")throw new Error(formatProdErrorMessage(8));if(Tt)throw new Error(formatProdErrorMessage(9));try{Tt=!0,pt=ht(pt,tr)}finally{Tt=!1}for(var ar=wt=st,Yt=0;Yt<ar.length;Yt++){var Kt=ar[Yt];Kt()}return tr}function Ut(tr){if(typeof tr!="function")throw new Error(formatProdErrorMessage(10));ht=tr,Ot({type:ActionTypes.REPLACE})}function qt(){var tr,ar=Dt;return tr={subscribe:function(Kt){if(typeof Kt!="object"||Kt===null)throw new Error(formatProdErrorMessage(11));function Jt(){Kt.next&&Kt.next(Mt())}Jt();var pr=ar(Jt);return{unsubscribe:pr}}},tr[$$observable]=function(){return this},tr}return Ot({type:ActionTypes.INIT}),at={dispatch:Ot,subscribe:Dt,getState:Mt,replaceReducer:Ut},at[$$observable]=qt,at}function assertReducerShape($){Object.keys($).forEach(function(_e){var rt=$[_e],at=rt(void 0,{type:ActionTypes.INIT});if(typeof at>"u")throw new Error(formatProdErrorMessage(12));if(typeof rt(void 0,{type:ActionTypes.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(formatProdErrorMessage(13))})}function combineReducers($){for(var _e=Object.keys($),rt={},at=0;at<_e.length;at++){var ht=_e[at];typeof $[ht]=="function"&&(rt[ht]=$[ht])}var pt=Object.keys(rt),wt;try{assertReducerShape(rt)}catch(st){wt=st}return function(Tt,kt){if(Tt===void 0&&(Tt={}),wt)throw wt;for(var Mt=!1,Dt={},Ot=0;Ot<pt.length;Ot++){var Ut=pt[Ot],qt=rt[Ut],tr=Tt[Ut],ar=qt(tr,kt);if(typeof ar>"u")throw kt&&kt.type,new Error(formatProdErrorMessage(14));Dt[Ut]=ar,Mt=Mt||ar!==tr}return Mt=Mt||pt.length!==Object.keys(Tt).length,Mt?Dt:Tt}}function compose(){for(var $=arguments.length,_e=new Array($),rt=0;rt<$;rt++)_e[rt]=arguments[rt];return _e.length===0?function(at){return at}:_e.length===1?_e[0]:_e.reduce(function(at,ht){return function(){return at(ht.apply(void 0,arguments))}})}function applyMiddleware(){for(var $=arguments.length,_e=new Array($),rt=0;rt<$;rt++)_e[rt]=arguments[rt];return function(at){return function(){var ht=at.apply(void 0,arguments),pt=function(){throw new Error(formatProdErrorMessage(15))},wt={getState:ht.getState,dispatch:function(){return pt.apply(void 0,arguments)}},st=_e.map(function(Tt){return Tt(wt)});return pt=compose.apply(void 0,st)(ht.dispatch),_objectSpread2(_objectSpread2({},ht),{},{dispatch:pt})}}}function createThunkMiddleware($){var _e=function(at){var ht=at.dispatch,pt=at.getState;return function(wt){return function(st){return typeof st=="function"?st(ht,pt,$):wt(st)}}};return _e}var thunk=createThunkMiddleware();thunk.withExtraArgument=createThunkMiddleware;const thunkMiddleware=thunk;var __extends=globalThis&&globalThis.__extends||function(){var $=function(_e,rt){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(at,ht){at.__proto__=ht}||function(at,ht){for(var pt in ht)Object.prototype.hasOwnProperty.call(ht,pt)&&(at[pt]=ht[pt])},$(_e,rt)};return function(_e,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Class extends value "+String(rt)+" is not a constructor or null");$(_e,rt);function at(){this.constructor=_e}_e.prototype=rt===null?Object.create(rt):(at.prototype=rt.prototype,new at)}}(),__generator=globalThis&&globalThis.__generator||function($,_e){var rt={label:0,sent:function(){if(pt[0]&1)throw pt[1];return pt[1]},trys:[],ops:[]},at,ht,pt,wt;return wt={next:st(0),throw:st(1),return:st(2)},typeof Symbol=="function"&&(wt[Symbol.iterator]=function(){return this}),wt;function st(kt){return function(Mt){return Tt([kt,Mt])}}function Tt(kt){if(at)throw new TypeError("Generator is already executing.");for(;rt;)try{if(at=1,ht&&(pt=kt[0]&2?ht.return:kt[0]?ht.throw||((pt=ht.return)&&pt.call(ht),0):ht.next)&&!(pt=pt.call(ht,kt[1])).done)return pt;switch(ht=0,pt&&(kt=[kt[0]&2,pt.value]),kt[0]){case 0:case 1:pt=kt;break;case 4:return rt.label++,{value:kt[1],done:!1};case 5:rt.label++,ht=kt[1],kt=[0];continue;case 7:kt=rt.ops.pop(),rt.trys.pop();continue;default:if(pt=rt.trys,!(pt=pt.length>0&&pt[pt.length-1])&&(kt[0]===6||kt[0]===2)){rt=0;continue}if(kt[0]===3&&(!pt||kt[1]>pt[0]&&kt[1]<pt[3])){rt.label=kt[1];break}if(kt[0]===6&&rt.label<pt[1]){rt.label=pt[1],pt=kt;break}if(pt&&rt.label<pt[2]){rt.label=pt[2],rt.ops.push(kt);break}pt[2]&&rt.ops.pop(),rt.trys.pop();continue}kt=_e.call($,rt)}catch(Mt){kt=[6,Mt],ht=0}finally{at=pt=0}if(kt[0]&5)throw kt[1];return{value:kt[0]?kt[1]:void 0,done:!0}}},__spreadArray=globalThis&&globalThis.__spreadArray||function($,_e){for(var rt=0,at=_e.length,ht=$.length;rt<at;rt++,ht++)$[ht]=_e[rt];return $},__defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=function($,_e,rt){return _e in $?__defProp($,_e,{enumerable:!0,configurable:!0,writable:!0,value:rt}):$[_e]=rt},__spreadValues=function($,_e){for(var rt in _e||(_e={}))__hasOwnProp.call(_e,rt)&&__defNormalProp($,rt,_e[rt]);if(__getOwnPropSymbols)for(var at=0,ht=__getOwnPropSymbols(_e);at<ht.length;at++){var rt=ht[at];__propIsEnum.call(_e,rt)&&__defNormalProp($,rt,_e[rt])}return $},__spreadProps=function($,_e){return __defProps($,__getOwnPropDescs(_e))},__async=function($,_e,rt){return new Promise(function(at,ht){var pt=function(Tt){try{st(rt.next(Tt))}catch(kt){ht(kt)}},wt=function(Tt){try{st(rt.throw(Tt))}catch(kt){ht(kt)}},st=function(Tt){return Tt.done?at(Tt.value):Promise.resolve(Tt.value).then(pt,wt)};st((rt=rt.apply($,_e)).next())})},composeWithDevTools=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?compose:compose.apply(null,arguments)};function isPlainObject$1($){if(typeof $!="object"||$===null)return!1;var _e=Object.getPrototypeOf($);if(_e===null)return!0;for(var rt=_e;Object.getPrototypeOf(rt)!==null;)rt=Object.getPrototypeOf(rt);return _e===rt}function createAction($,_e){function rt(){for(var at=[],ht=0;ht<arguments.length;ht++)at[ht]=arguments[ht];if(_e){var pt=_e.apply(void 0,at);if(!pt)throw new Error("prepareAction did not return an object");return __spreadValues(__spreadValues({type:$,payload:pt.payload},"meta"in pt&&{meta:pt.meta}),"error"in pt&&{error:pt.error})}return{type:$,payload:at[0]}}return rt.toString=function(){return""+$},rt.type=$,rt.match=function(at){return at.type===$},rt}var MiddlewareArray=function($){__extends(_e,$);function _e(){for(var rt=[],at=0;at<arguments.length;at++)rt[at]=arguments[at];var ht=$.apply(this,rt)||this;return Object.setPrototypeOf(ht,_e.prototype),ht}return Object.defineProperty(_e,Symbol.species,{get:function(){return _e},enumerable:!1,configurable:!0}),_e.prototype.concat=function(){for(var rt=[],at=0;at<arguments.length;at++)rt[at]=arguments[at];return $.prototype.concat.apply(this,rt)},_e.prototype.prepend=function(){for(var rt=[],at=0;at<arguments.length;at++)rt[at]=arguments[at];return rt.length===1&&Array.isArray(rt[0])?new(_e.bind.apply(_e,__spreadArray([void 0],rt[0].concat(this)))):new(_e.bind.apply(_e,__spreadArray([void 0],rt.concat(this))))},_e}(Array),EnhancerArray=function($){__extends(_e,$);function _e(){for(var rt=[],at=0;at<arguments.length;at++)rt[at]=arguments[at];var ht=$.apply(this,rt)||this;return Object.setPrototypeOf(ht,_e.prototype),ht}return Object.defineProperty(_e,Symbol.species,{get:function(){return _e},enumerable:!1,configurable:!0}),_e.prototype.concat=function(){for(var rt=[],at=0;at<arguments.length;at++)rt[at]=arguments[at];return $.prototype.concat.apply(this,rt)},_e.prototype.prepend=function(){for(var rt=[],at=0;at<arguments.length;at++)rt[at]=arguments[at];return rt.length===1&&Array.isArray(rt[0])?new(_e.bind.apply(_e,__spreadArray([void 0],rt[0].concat(this)))):new(_e.bind.apply(_e,__spreadArray([void 0],rt.concat(this))))},_e}(Array);function freezeDraftable($){return t($)?fn($,function(){}):$}function isBoolean$1($){return typeof $=="boolean"}function curryGetDefaultMiddleware(){return function(_e){return getDefaultMiddleware(_e)}}function getDefaultMiddleware($){$===void 0&&($={});var _e=$.thunk,rt=_e===void 0?!0:_e;$.immutableCheck,$.serializableCheck,$.actionCreatorCheck;var at=new MiddlewareArray;return rt&&(isBoolean$1(rt)?at.push(thunkMiddleware):at.push(thunkMiddleware.withExtraArgument(rt.extraArgument))),at}var IS_PRODUCTION=!0;function configureStore($){var _e=curryGetDefaultMiddleware(),rt=$||{},at=rt.reducer,ht=at===void 0?void 0:at,pt=rt.middleware,wt=pt===void 0?_e():pt,st=rt.devTools,Tt=st===void 0?!0:st,kt=rt.preloadedState,Mt=kt===void 0?void 0:kt,Dt=rt.enhancers,Ot=Dt===void 0?void 0:Dt,Ut;if(typeof ht=="function")Ut=ht;else if(isPlainObject$1(ht))Ut=combineReducers(ht);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var qt=wt;typeof qt=="function"&&(qt=qt(_e));var tr=applyMiddleware.apply(void 0,qt),ar=compose;Tt&&(ar=composeWithDevTools(__spreadValues({trace:!IS_PRODUCTION},typeof Tt=="object"&&Tt)));var Yt=new EnhancerArray(tr),Kt=Yt;Array.isArray(Ot)?Kt=__spreadArray([tr],Ot):typeof Ot=="function"&&(Kt=Ot(Yt));var Jt=ar.apply(void 0,Kt);return createStore(Ut,Mt,Jt)}function executeReducerBuilderCallback($){var _e={},rt=[],at,ht={addCase:function(pt,wt){var st=typeof pt=="string"?pt:pt.type;if(!st)throw new Error("`builder.addCase` cannot be called with an empty action type");if(st in _e)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return _e[st]=wt,ht},addMatcher:function(pt,wt){return rt.push({matcher:pt,reducer:wt}),ht},addDefaultCase:function(pt){return at=pt,ht}};return $(ht),[_e,rt,at]}function isStateFunction($){return typeof $=="function"}function createReducer($,_e,rt,at){rt===void 0&&(rt=[]);var ht=typeof _e=="function"?executeReducerBuilderCallback(_e):[_e,rt,at],pt=ht[0],wt=ht[1],st=ht[2],Tt;if(isStateFunction($))Tt=function(){return freezeDraftable($())};else{var kt=freezeDraftable($);Tt=function(){return kt}}function Mt(Dt,Ot){Dt===void 0&&(Dt=Tt());var Ut=__spreadArray([pt[Ot.type]],wt.filter(function(qt){var tr=qt.matcher;return tr(Ot)}).map(function(qt){var tr=qt.reducer;return tr}));return Ut.filter(function(qt){return!!qt}).length===0&&(Ut=[st]),Ut.reduce(function(qt,tr){if(tr)if(r(qt)){var ar=qt,Yt=tr(ar,Ot);return Yt===void 0?qt:Yt}else{if(t(qt))return fn(qt,function(Kt){return tr(Kt,Ot)});var Yt=tr(qt,Ot);if(Yt===void 0){if(qt===null)return qt;throw Error("A case reducer on a non-draftable value must not return undefined")}return Yt}return qt},Dt)}return Mt.getInitialState=Tt,Mt}function getType2($,_e){return $+"/"+_e}function createSlice($){var _e=$.name;if(!_e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var rt=typeof $.initialState=="function"?$.initialState:freezeDraftable($.initialState),at=$.reducers||{},ht=Object.keys(at),pt={},wt={},st={};ht.forEach(function(Mt){var Dt=at[Mt],Ot=getType2(_e,Mt),Ut,qt;"reducer"in Dt?(Ut=Dt.reducer,qt=Dt.prepare):Ut=Dt,pt[Mt]=Ut,wt[Ot]=Ut,st[Mt]=qt?createAction(Ot,qt):createAction(Ot)});function Tt(){var Mt=typeof $.extraReducers=="function"?executeReducerBuilderCallback($.extraReducers):[$.extraReducers],Dt=Mt[0],Ot=Dt===void 0?{}:Dt,Ut=Mt[1],qt=Ut===void 0?[]:Ut,tr=Mt[2],ar=tr===void 0?void 0:tr,Yt=__spreadValues(__spreadValues({},Ot),wt);return createReducer(rt,function(Kt){for(var Jt in Yt)Kt.addCase(Jt,Yt[Jt]);for(var pr=0,Sr=qt;pr<Sr.length;pr++){var Er=Sr[pr];Kt.addMatcher(Er.matcher,Er.reducer)}ar&&Kt.addDefaultCase(ar)})}var kt;return{name:_e,reducer:function(Mt,Dt){return kt||(kt=Tt()),kt(Mt,Dt)},actions:st,caseReducers:pt,getInitialState:function(){return kt||(kt=Tt()),kt.getInitialState()}}}var urlAlphabet="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",nanoid=function($){$===void 0&&($=21);for(var _e="",rt=$;rt--;)_e+=urlAlphabet[Math.random()*64|0];return _e},commonProperties=["name","message","stack","code"],RejectWithValue=function(){function $(_e,rt){this.payload=_e,this.meta=rt}return $}(),FulfillWithMeta=function(){function $(_e,rt){this.payload=_e,this.meta=rt}return $}(),miniSerializeError=function($){if(typeof $=="object"&&$!==null){for(var _e={},rt=0,at=commonProperties;rt<at.length;rt++){var ht=at[rt];typeof $[ht]=="string"&&(_e[ht]=$[ht])}return _e}return{message:String($)}};(function(){function $(_e,rt,at){var ht=createAction(_e+"/fulfilled",function(kt,Mt,Dt,Ot){return{payload:kt,meta:__spreadProps(__spreadValues({},Ot||{}),{arg:Dt,requestId:Mt,requestStatus:"fulfilled"})}}),pt=createAction(_e+"/pending",function(kt,Mt,Dt){return{payload:void 0,meta:__spreadProps(__spreadValues({},Dt||{}),{arg:Mt,requestId:kt,requestStatus:"pending"})}}),wt=createAction(_e+"/rejected",function(kt,Mt,Dt,Ot,Ut){return{payload:Ot,error:(at&&at.serializeError||miniSerializeError)(kt||"Rejected"),meta:__spreadProps(__spreadValues({},Ut||{}),{arg:Dt,requestId:Mt,rejectedWithValue:!!Ot,requestStatus:"rejected",aborted:(kt==null?void 0:kt.name)==="AbortError",condition:(kt==null?void 0:kt.name)==="ConditionError"})}}),st=typeof AbortController<"u"?AbortController:function(){function kt(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return kt.prototype.abort=function(){},kt}();function Tt(kt){return function(Mt,Dt,Ot){var Ut=at!=null&&at.idGenerator?at.idGenerator(kt):nanoid(),qt=new st,tr;function ar(Kt){tr=Kt,qt.abort()}var Yt=function(){return __async(this,null,function(){var Kt,Jt,pr,Sr,Er,Rr,Lr;return __generator(this,function(Mr){switch(Mr.label){case 0:return Mr.trys.push([0,4,,5]),Sr=(Kt=at==null?void 0:at.condition)==null?void 0:Kt.call(at,kt,{getState:Dt,extra:Ot}),isThenable$1(Sr)?[4,Sr]:[3,2];case 1:Sr=Mr.sent(),Mr.label=2;case 2:if(Sr===!1||qt.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return Er=new Promise(function(Zr,dn){return qt.signal.addEventListener("abort",function(){return dn({name:"AbortError",message:tr||"Aborted"})})}),Mt(pt(Ut,kt,(Jt=at==null?void 0:at.getPendingMeta)==null?void 0:Jt.call(at,{requestId:Ut,arg:kt},{getState:Dt,extra:Ot}))),[4,Promise.race([Er,Promise.resolve(rt(kt,{dispatch:Mt,getState:Dt,extra:Ot,requestId:Ut,signal:qt.signal,abort:ar,rejectWithValue:function(Zr,dn){return new RejectWithValue(Zr,dn)},fulfillWithValue:function(Zr,dn){return new FulfillWithMeta(Zr,dn)}})).then(function(Zr){if(Zr instanceof RejectWithValue)throw Zr;return Zr instanceof FulfillWithMeta?ht(Zr.payload,Ut,kt,Zr.meta):ht(Zr,Ut,kt)})])];case 3:return pr=Mr.sent(),[3,5];case 4:return Rr=Mr.sent(),pr=Rr instanceof RejectWithValue?wt(null,Ut,kt,Rr.payload,Rr.meta):wt(Rr,Ut,kt),[3,5];case 5:return Lr=at&&!at.dispatchConditionRejection&&wt.match(pr)&&pr.meta.condition,Lr||Mt(pr),[2,pr]}})})}();return Object.assign(Yt,{abort:ar,requestId:Ut,arg:kt,unwrap:function(){return Yt.then(unwrapResult)}})}}return Object.assign(Tt,{pending:pt,rejected:wt,fulfilled:ht,typePrefix:_e})}return $.withTypes=function(){return $},$})();function unwrapResult($){if($.meta&&$.meta.rejectedWithValue)throw $.payload;if($.error)throw $.error;return $.payload}function isThenable$1($){return $!==null&&typeof $=="object"&&typeof $.then=="function"}var alm="listenerMiddleware";createAction(alm+"/add");createAction(alm+"/removeAll");createAction(alm+"/remove");var promise;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);F();const signinModalSlice=createSlice({name:"showSigninModal",initialState:{value:!1},reducers:{setShowSigninModal:($,_e)=>{$.value=_e.payload.showSigninModal}}}),{setShowSigninModal}=signinModalSlice.actions,signinReducer=signinModalSlice.reducer,signupModalSlice=createSlice({name:"showSignupModal",initialState:{value:!1},reducers:{setShowSignupModal:($,_e)=>{$.value=_e.payload.showSignupModal}}}),{setShowSignupModal}=signupModalSlice.actions,signupReducer=signupModalSlice.reducer;var googleLogin={exports:{}};(function($,_e){(function(rt,at){$.exports=at(reactExports)})(typeof self<"u"?self:commonjsGlobal$1,function(rt){return pt={},at.m=ht=[function(wt){wt.exports=rt},function(wt,st,Tt){wt.exports=Tt(2)()},function(wt,st,Tt){function kt(){}function Mt(){}var Dt=Tt(3);Mt.resetWarningCache=kt,wt.exports=function(){function Ot(tr,ar,Yt,Kt,Jt,pr){if(pr!==Dt){var Sr=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Sr.name="Invariant Violation",Sr}}function Ut(){return Ot}var qt={array:Ot.isRequired=Ot,bool:Ot,func:Ot,number:Ot,object:Ot,string:Ot,symbol:Ot,any:Ot,arrayOf:Ut,element:Ot,elementType:Ot,instanceOf:Ut,node:Ot,objectOf:Ut,oneOf:Ut,oneOfType:Ut,shape:Ut,exact:Ut,checkPropTypes:Mt,resetWarningCache:kt};return qt.PropTypes=qt}},function(wt){wt.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(wt,st,Tt){function kt(wr,Xr){return function(Dr){if(Array.isArray(Dr))return Dr}(wr)||function(Dr,xn){if(typeof Symbol<"u"&&Symbol.iterator in Object(Dr)){var gn=[],Pr=!0,Gr=!1,Or=void 0;try{for(var sn,ln=Dr[Symbol.iterator]();!(Pr=(sn=ln.next()).done)&&(gn.push(sn.value),!xn||gn.length!==xn);Pr=!0);}catch(kn){Gr=!0,Or=kn}finally{try{Pr||ln.return==null||ln.return()}finally{if(Gr)throw Or}}return gn}}(wr,Xr)||function(Dr,xn){if(Dr){if(typeof Dr=="string")return Mt(Dr,xn);var gn=Object.prototype.toString.call(Dr).slice(8,-1);return gn==="Object"&&Dr.constructor&&(gn=Dr.constructor.name),gn==="Map"||gn==="Set"?Array.from(gn):gn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(gn)?Mt(Dr,xn):void 0}}(wr,Xr)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Mt(wr,Xr){Xr!=null&&Xr<=wr.length||(Xr=wr.length);for(var Dr=0,xn=Array(Xr);Dr<Xr;Dr++)xn[Dr]=wr[Dr];return xn}function Dt(wr,Xr){return function(Dr){if(Array.isArray(Dr))return Dr}(wr)||function(Dr,xn){if(typeof Symbol<"u"&&Symbol.iterator in Object(Dr)){var gn=[],Pr=!0,Gr=!1,Or=void 0;try{for(var sn,ln=Dr[Symbol.iterator]();!(Pr=(sn=ln.next()).done)&&(gn.push(sn.value),!xn||gn.length!==xn);Pr=!0);}catch(kn){Gr=!0,Or=kn}finally{try{Pr||ln.return==null||ln.return()}finally{if(Gr)throw Or}}return gn}}(wr,Xr)||function(Dr,xn){if(Dr){if(typeof Dr=="string")return Ot(Dr,xn);var gn=Object.prototype.toString.call(Dr).slice(8,-1);return gn==="Object"&&Dr.constructor&&(gn=Dr.constructor.name),gn==="Map"||gn==="Set"?Array.from(gn):gn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(gn)?Ot(Dr,xn):void 0}}(wr,Xr)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ot(wr,Xr){Xr!=null&&Xr<=wr.length||(Xr=wr.length);for(var Dr=0,xn=Array(Xr);Dr<Xr;Dr++)xn[Dr]=wr[Dr];return xn}function Ut(wr,Xr){return function(Dr){if(Array.isArray(Dr))return Dr}(wr)||function(Dr,xn){if(typeof Symbol<"u"&&Symbol.iterator in Object(Dr)){var gn=[],Pr=!0,Gr=!1,Or=void 0;try{for(var sn,ln=Dr[Symbol.iterator]();!(Pr=(sn=ln.next()).done)&&(gn.push(sn.value),!xn||gn.length!==xn);Pr=!0);}catch(kn){Gr=!0,Or=kn}finally{try{Pr||ln.return==null||ln.return()}finally{if(Gr)throw Or}}return gn}}(wr,Xr)||function(Dr,xn){if(Dr){if(typeof Dr=="string")return qt(Dr,xn);var gn=Object.prototype.toString.call(Dr).slice(8,-1);return gn==="Object"&&Dr.constructor&&(gn=Dr.constructor.name),gn==="Map"||gn==="Set"?Array.from(gn):gn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(gn)?qt(Dr,xn):void 0}}(wr,Xr)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qt(wr,Xr){Xr!=null&&Xr<=wr.length||(Xr=wr.length);for(var Dr=0,xn=Array(Xr);Dr<Xr;Dr++)xn[Dr]=wr[Dr];return xn}function tr(wr,Xr){return function(Dr){if(Array.isArray(Dr))return Dr}(wr)||function(Dr,xn){if(typeof Symbol<"u"&&Symbol.iterator in Object(Dr)){var gn=[],Pr=!0,Gr=!1,Or=void 0;try{for(var sn,ln=Dr[Symbol.iterator]();!(Pr=(sn=ln.next()).done)&&(gn.push(sn.value),!xn||gn.length!==xn);Pr=!0);}catch(kn){Gr=!0,Or=kn}finally{try{Pr||ln.return==null||ln.return()}finally{if(Gr)throw Or}}return gn}}(wr,Xr)||function(Dr,xn){if(Dr){if(typeof Dr=="string")return ar(Dr,xn);var gn=Object.prototype.toString.call(Dr).slice(8,-1);return gn==="Object"&&Dr.constructor&&(gn=Dr.constructor.name),gn==="Map"||gn==="Set"?Array.from(gn):gn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(gn)?ar(Dr,xn):void 0}}(wr,Xr)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ar(wr,Xr){Xr!=null&&Xr<=wr.length||(Xr=wr.length);for(var Dr=0,xn=Array(Xr);Dr<Xr;Dr++)xn[Dr]=wr[Dr];return xn}function Yt(wr,Xr,Dr,xn,gn,Pr){var Gr=wr.getElementsByTagName(Xr)[0],Or=Gr,sn=Gr;(sn=wr.createElement(Xr)).id=Dr,sn.src=xn,Or&&Or.parentNode?Or.parentNode.insertBefore(sn,Or):wr.head.appendChild(sn),sn.onerror=Pr,sn.onload=gn}function Kt(wr,Xr){var Dr=wr.getElementById(Xr);Dr&&Dr.parentNode.removeChild(Dr)}function Jt(wr){return Rr.a.createElement("span",{style:{paddingRight:10,fontWeight:500,paddingLeft:wr.icon?0:10,paddingTop:10,paddingBottom:10}},wr.children)}function pr(wr){return Rr.a.createElement("div",{style:{marginRight:10,background:wr.active?"#eee":"#fff",padding:10,borderRadius:2}},Rr.a.createElement("svg",{width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg"},Rr.a.createElement("g",{fill:"#000",fillRule:"evenodd"},Rr.a.createElement("path",{d:"M9 3.48c1.69 0 2.83.73 3.48 1.34l2.54-2.48C13.46.89 11.43 0 9 0 5.48 0 2.44 2.02.96 4.96l2.91 2.26C4.6 5.05 6.62 3.48 9 3.48z",fill:"#EA4335"}),Rr.a.createElement("path",{d:"M17.64 9.2c0-.74-.06-1.28-.19-1.84H9v3.34h4.96c-.1.83-.64 2.08-1.84 2.92l2.84 2.2c1.7-1.57 2.68-3.88 2.68-6.62z",fill:"#4285F4"}),Rr.a.createElement("path",{d:"M3.88 10.78A5.54 5.54 0 0 1 3.58 9c0-.62.11-1.22.29-1.78L.96 4.96A9.008 9.008 0 0 0 0 9c0 1.45.35 2.82.96 4.04l2.92-2.26z",fill:"#FBBC05"}),Rr.a.createElement("path",{d:"M9 18c2.43 0 4.47-.8 5.96-2.18l-2.84-2.2c-.76.53-1.78.9-3.12.9-2.38 0-4.4-1.57-5.12-3.74L.97 13.04C2.45 15.98 5.48 18 9 18z",fill:"#34A853"}),Rr.a.createElement("path",{fill:"none",d:"M0 0h18v18H0z"}))))}function Sr(wr){var Xr=Dt(Object(Er.useState)(!1),2),Dr=Xr[0],xn=Xr[1],gn=Dt(Object(Er.useState)(!1),2),Pr=gn[0],Gr=gn[1],Or=wr.tag,sn=wr.type,ln=wr.className,kn=wr.disabledStyle,Bn=wr.buttonText,Fn=wr.children,Nn=wr.render,Kn=wr.theme,uo=wr.icon,vo=wr.disabled,Ao=Lr({onSuccess:wr.onSuccess,onAutoLoadFinished:wr.onAutoLoadFinished,onRequest:wr.onRequest,onFailure:wr.onFailure,onScriptLoadFailure:wr.onScriptLoadFailure,clientId:wr.clientId,cookiePolicy:wr.cookiePolicy,loginHint:wr.loginHint,hostedDomain:wr.hostedDomain,autoLoad:wr.autoLoad,isSignedIn:wr.isSignedIn,fetchBasicProfile:wr.fetchBasicProfile,redirectUri:wr.redirectUri,discoveryDocs:wr.discoveryDocs,uxMode:wr.uxMode,scope:wr.scope,accessType:wr.accessType,responseType:wr.responseType,jsSrc:wr.jsSrc,prompt:wr.prompt}),Un=Ao.signIn,so=vo||!Ao.loaded;if(Nn)return Nn({onClick:Un,disabled:so});var Qn={backgroundColor:Kn==="dark"?"rgb(66, 133, 244)":"#fff",display:"inline-flex",alignItems:"center",color:Kn==="dark"?"#fff":"rgba(0, 0, 0, .54)",boxShadow:"0 2px 2px 0 rgba(0, 0, 0, .24), 0 0 1px 0 rgba(0, 0, 0, .24)",padding:0,borderRadius:2,border:"1px solid transparent",fontSize:14,fontWeight:"500",fontFamily:"Roboto, sans-serif"},Vo={cursor:"pointer",backgroundColor:Kn==="dark"?"#3367D6":"#eee",color:Kn==="dark"?"#fff":"rgba(0, 0, 0, .54)",opacity:1},Hn=so?Object.assign({},Qn,kn):Pr?Object.assign({},Qn,Vo):Dr?Object.assign({},Qn,{cursor:"pointer",opacity:.9}):Qn;return Rr.a.createElement(Or,{onMouseEnter:function(){return xn(!0)},onMouseLeave:function(){xn(!1),Gr(!1)},onMouseDown:function(){return Gr(!0)},onMouseUp:function(){return Gr(!1)},onClick:Un,style:Hn,type:sn,disabled:so,className:ln},[uo&&Rr.a.createElement(pr,{key:1,active:Pr}),Rr.a.createElement(Jt,{icon:uo,key:2},Fn||Bn)])}Tt.r(st),Tt.d(st,"default",function(){return Zr}),Tt.d(st,"GoogleLogin",function(){return Zr}),Tt.d(st,"GoogleLogout",function(){return Jr}),Tt.d(st,"useGoogleLogin",function(){return Lr}),Tt.d(st,"useGoogleLogout",function(){return dn});var Er=Tt(0),Rr=Tt.n(Er),Lr=(Tt(1),function(wr){function Xr(Ro){var Xo=Ro.getBasicProfile(),os=Ro.getAuthResponse(!0);Ro.googleId=Xo.getId(),Ro.tokenObj=os,Ro.tokenId=os.id_token,Ro.accessToken=os.access_token,Ro.profileObj={googleId:Xo.getId(),imageUrl:Xo.getImageUrl(),email:Xo.getEmail(),name:Xo.getName(),givenName:Xo.getGivenName(),familyName:Xo.getFamilyName()},gn(Ro)}function Dr(Ro){if(Ro&&Ro.preventDefault(),Vs){var Xo=window.gapi.auth2.getAuthInstance(),os={prompt:ks};kn(),js==="code"?Xo.grantOfflineAccess(os).then(function(ko){return gn(ko)},function(ko){return sn(ko)}):Xo.signIn(os).then(function(ko){return Xr(ko)},function(ko){return sn(ko)})}}var xn=wr.onSuccess,gn=xn===void 0?function(){}:xn,Pr=wr.onAutoLoadFinished,Gr=Pr===void 0?function(){}:Pr,Or=wr.onFailure,sn=Or===void 0?function(){}:Or,ln=wr.onRequest,kn=ln===void 0?function(){}:ln,Bn=wr.onScriptLoadFailure,Fn=wr.clientId,Nn=wr.cookiePolicy,Kn=wr.loginHint,uo=wr.hostedDomain,vo=wr.autoLoad,Ao=wr.isSignedIn,Un=wr.fetchBasicProfile,so=wr.redirectUri,Qn=wr.discoveryDocs,Vo=wr.uxMode,Hn=wr.scope,Jo=wr.accessType,js=wr.responseType,Ds=wr.jsSrc,vs=Ds===void 0?"https://apis.google.com/js/api.js":Ds,ks=wr.prompt,Ls=kt(Object(Er.useState)(!1),2),Vs=Ls[0],ws=Ls[1];return Object(Er.useEffect)(function(){var Ro=!1,Xo=Bn||sn;return Yt(document,"script","google-login",vs,function(){var os={client_id:Fn,cookie_policy:Nn,login_hint:Kn,hosted_domain:uo,fetch_basic_profile:Un,discoveryDocs:Qn,ux_mode:Vo,redirect_uri:so,scope:Hn,access_type:Jo};js==="code"&&(os.access_type="offline"),window.gapi.load("auth2",function(){var ko=window.gapi.auth2.getAuthInstance();ko?ko.then(function(){Ro||(Ao&&ko.isSignedIn.get()?(ws(!0),Gr(!0),Xr(ko.currentUser.get())):(ws(!0),Gr(!1)))},function(ys){sn(ys)}):window.gapi.auth2.init(os).then(function(ys){if(!Ro){ws(!0);var Al=Ao&&ys.isSignedIn.get();Gr(Al),Al&&Xr(ys.currentUser.get())}},function(ys){ws(!0),Gr(!1),Xo(ys)})})},function(os){Xo(os)}),function(){Ro=!0,Kt(document,"google-login")}},[]),Object(Er.useEffect)(function(){vo&&Dr()},[Vs]),{signIn:Dr,loaded:Vs}});function Mr(wr){var Xr=tr(Object(Er.useState)(!1),2),Dr=Xr[0],xn=Xr[1],gn=tr(Object(Er.useState)(!1),2),Pr=gn[0],Gr=gn[1],Or=wr.tag,sn=wr.type,ln=wr.className,kn=wr.disabledStyle,Bn=wr.buttonText,Fn=wr.children,Nn=wr.render,Kn=wr.theme,uo=wr.icon,vo=wr.disabled,Ao=dn({jsSrc:wr.jsSrc,onFailure:wr.onFailure,onScriptLoadFailure:wr.onScriptLoadFailure,clientId:wr.clientId,cookiePolicy:wr.cookiePolicy,loginHint:wr.loginHint,hostedDomain:wr.hostedDomain,fetchBasicProfile:wr.fetchBasicProfile,discoveryDocs:wr.discoveryDocs,uxMode:wr.uxMode,redirectUri:wr.redirectUri,scope:wr.scope,accessType:wr.accessType,onLogoutSuccess:wr.onLogoutSuccess}),Un=Ao.signOut,so=vo||!Ao.loaded;if(Nn)return Nn({onClick:Un,disabled:so});var Qn={backgroundColor:Kn==="dark"?"rgb(66, 133, 244)":"#fff",display:"inline-flex",alignItems:"center",color:Kn==="dark"?"#fff":"rgba(0, 0, 0, .54)",boxShadow:"0 2px 2px 0 rgba(0, 0, 0, .24), 0 0 1px 0 rgba(0, 0, 0, .24)",padding:0,borderRadius:2,border:"1px solid transparent",fontSize:14,fontWeight:"500",fontFamily:"Roboto, sans-serif"},Vo={cursor:"pointer",backgroundColor:Kn==="dark"?"#3367D6":"#eee",color:Kn==="dark"?"#fff":"rgba(0, 0, 0, .54)",opacity:1},Hn=so?Object.assign({},Qn,kn):Pr?Object.assign({},Qn,Vo):Dr?Object.assign({},Qn,{cursor:"pointer",opacity:.9}):Qn;return Rr.a.createElement(Or,{onMouseEnter:function(){return xn(!0)},onMouseLeave:function(){xn(!1),Gr(!1)},onMouseDown:function(){return Gr(!0)},onMouseUp:function(){return Gr(!1)},onClick:Un,style:Hn,type:sn,disabled:so,className:ln},[uo&&Rr.a.createElement(pr,{key:1,active:Pr}),Rr.a.createElement(Jt,{icon:uo,key:2},Fn||Bn)])}Sr.defaultProps={type:"button",tag:"button",buttonText:"Sign in with Google",scope:"profile email",accessType:"online",prompt:"",cookiePolicy:"single_host_origin",fetchBasicProfile:!0,isSignedIn:!1,uxMode:"popup",disabledStyle:{opacity:.6},icon:!0,theme:"light",onRequest:function(){}};var Zr=Sr,dn=function(wr){var Xr=wr.jsSrc,Dr=Xr===void 0?"https://apis.google.com/js/api.js":Xr,xn=wr.onFailure,gn=wr.onScriptLoadFailure,Pr=wr.clientId,Gr=wr.cookiePolicy,Or=wr.loginHint,sn=wr.hostedDomain,ln=wr.fetchBasicProfile,kn=wr.discoveryDocs,Bn=wr.uxMode,Fn=wr.redirectUri,Nn=wr.scope,Kn=wr.accessType,uo=wr.onLogoutSuccess,vo=Ut(Object(Er.useState)(!1),2),Ao=vo[0],Un=vo[1],so=Object(Er.useCallback)(function(){if(window.gapi){var Qn=window.gapi.auth2.getAuthInstance();Qn!=null&&Qn.then(function(){Qn.signOut().then(function(){Qn.disconnect(),uo()})},function(Vo){return xn(Vo)})}},[uo]);return Object(Er.useEffect)(function(){var Qn=gn||xn;return Yt(document,"script","google-login",Dr,function(){var Vo={client_id:Pr,cookie_policy:Gr,login_hint:Or,hosted_domain:sn,fetch_basic_profile:ln,discoveryDocs:kn,ux_mode:Bn,redirect_uri:Fn,scope:Nn,access_type:Kn};window.gapi.load("auth2",function(){window.gapi.auth2.getAuthInstance()?Un(!0):window.gapi.auth2.init(Vo).then(function(){return Un(!0)},function(Hn){return Qn(Hn)})})},function(Vo){Qn(Vo)}),function(){Kt(document,"google-login")}},[]),{signOut:so,loaded:Ao}};Mr.defaultProps={type:"button",tag:"button",buttonText:"Logout of Google",disabledStyle:{opacity:.6},icon:!0,theme:"light",jsSrc:"https://apis.google.com/js/api.js"};var Jr=Mr}],at.c=pt,at.d=function(wt,st,Tt){at.o(wt,st)||Object.defineProperty(wt,st,{enumerable:!0,get:Tt})},at.r=function(wt){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(wt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(wt,"__esModule",{value:!0})},at.t=function(wt,st){if(1&st&&(wt=at(wt)),8&st||4&st&&typeof wt=="object"&&wt&&wt.__esModule)return wt;var Tt=Object.create(null);if(at.r(Tt),Object.defineProperty(Tt,"default",{enumerable:!0,value:wt}),2&st&&typeof wt!="string")for(var kt in wt)at.d(Tt,kt,(function(Mt){return wt[Mt]}).bind(null,kt));return Tt},at.n=function(wt){var st=wt&&wt.__esModule?function(){return wt.default}:function(){return wt};return at.d(st,"a",st),st},at.o=function(wt,st){return Object.prototype.hasOwnProperty.call(wt,st)},at.p="",at(at.s=4);function at(wt){if(pt[wt])return pt[wt].exports;var st=pt[wt]={i:wt,l:!1,exports:{}};return ht[wt].call(st.exports,st,st.exports,at),st.l=!0,st.exports}var ht,pt})})(googleLogin);var googleLoginExports=googleLogin.exports,gapi=window.gapi=window.gapi||{};gapi._bs=new Date().getTime();(function(){var aa=typeof Object.defineProperties=="function"?Object.defineProperty:function($,_e,rt){return $==Array.prototype||$==Object.prototype||($[_e]=rt.value),$},da=function($){$=[typeof globalThis=="object"&&globalThis,$,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var _e=0;_e<$.length;++_e){var rt=$[_e];if(rt&&rt.Math==Math)return rt}throw Error("Cannot find global object")},ea=da(this),fa=function($,_e){if(_e)e:{var rt=ea;$=$.split(".");for(var at=0;at<$.length-1;at++){var ht=$[at];if(!(ht in rt))break e;rt=rt[ht]}$=$[$.length-1],at=rt[$],_e=_e(at),_e!=at&&_e!=null&&aa(rt,$,{configurable:!0,writable:!0,value:_e})}},ha=function($){var _e=0;return function(){return _e<$.length?{done:!1,value:$[_e++]}:{done:!0}}};fa("Symbol",function($){if($)return $;var _e=function(ht,pt){this.ba=ht,aa(this,"description",{configurable:!0,writable:!0,value:pt})};_e.prototype.toString=function(){return this.ba};var rt=0,at=function(ht){if(this instanceof at)throw new TypeError("Symbol is not a constructor");return new _e("jscomp_symbol_"+(ht||"")+"_"+rt++,ht)};return at}),fa("Symbol.iterator",function($){if($)return $;$=Symbol("Symbol.iterator");for(var _e="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),rt=0;rt<_e.length;rt++){var at=ea[_e[rt]];typeof at=="function"&&typeof at.prototype[$]!="function"&&aa(at.prototype,$,{configurable:!0,writable:!0,value:function(){return ia(ha(this))}})}return $});var ia=function($){return $={next:$},$[Symbol.iterator]=function(){return this},$},ja=function($,_e){$ instanceof String&&($+="");var rt=0,at=!1,ht={next:function(){if(!at&&rt<$.length){var pt=rt++;return{value:_e(pt,$[pt]),done:!1}}return at=!0,{done:!0,value:void 0}}};return ht[Symbol.iterator]=function(){return ht},ht};fa("Array.prototype.keys",function($){return $||function(){return ja(this,function(_e){return _e})}});var m=this||self,ka=function($){var _e=typeof $;return _e!="object"?_e:$?Array.isArray($)?"array":_e:"null"},la=function($,_e,rt){return $.call.apply($.bind,arguments)},ma=function($,_e,rt){if(!$)throw Error();if(2<arguments.length){var at=Array.prototype.slice.call(arguments,2);return function(){var ht=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ht,at),$.apply(_e,ht)}}return function(){return $.apply(_e,arguments)}},na=function($,_e,rt){return na=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?la:ma,na.apply(null,arguments)},oa=function($,_e){function rt(){}rt.prototype=_e.prototype,$.ma=_e.prototype,$.prototype=new rt,$.prototype.constructor=$,$.A=function(at,ht,pt){for(var wt=Array(arguments.length-2),st=2;st<arguments.length;st++)wt[st-2]=arguments[st];return _e.prototype[ht].apply(at,wt)}},pa=function($){return $},qa=function($){var _e=null,rt=m.trustedTypes;if(!rt||!rt.createPolicy)return _e;try{_e=rt.createPolicy($,{createHTML:pa,createScript:pa,createScriptURL:pa})}catch(at){m.console&&m.console.error(at.message)}return _e};function q($){if(Error.captureStackTrace)Error.captureStackTrace(this,q);else{var _e=Error().stack;_e&&(this.stack=_e)}$&&(this.message=String($))}oa(q,Error),q.prototype.name="CustomError";var ra=function($,_e){$=$.split("%s");for(var rt="",at=$.length-1,ht=0;ht<at;ht++)rt+=$[ht]+(ht<_e.length?_e[ht]:"%s");q.call(this,rt+$[at])};oa(ra,q),ra.prototype.name="AssertionError";var sa=function($,_e,rt,at){var ht="Assertion failed";if(rt){ht+=": "+rt;var pt=at}else $&&(ht+=": "+$,pt=_e);throw new ra(""+ht,pt||[])},ta=function($,_e,rt){return $||sa("",null,_e,Array.prototype.slice.call(arguments,2)),$},ua=function($,_e){throw new ra("Failure"+($?": "+$:""),Array.prototype.slice.call(arguments,1))},va=function($,_e,rt){typeof $!="string"&&sa("Expected string but got %s: %s.",[ka($),$],_e,Array.prototype.slice.call(arguments,2))},xa=function($,_e){e:{try{var rt=$&&$.ownerDocument,at=rt&&(rt.defaultView||rt.parentWindow);if(at=at||m,at.Element&&at.Location){var ht=at;break e}}catch{}ht=null}if(ht&&typeof ht[_e]<"u"&&(!$||!($ instanceof ht[_e])&&($ instanceof ht.Location||$ instanceof ht.Element))){if(ht=typeof $,ht=="object"&&$!=null||ht=="function")try{var pt=$.constructor.displayName||$.constructor.name||Object.prototype.toString.call($)}catch{pt="<object could not be stringified>"}else pt=$===void 0?"undefined":$===null?"null":typeof $;ua("Argument is not a %s (or a non-Element, non-Location mock); got: %s",_e,pt)}return $},ya,t=function($,_e){this.P=$===za&&_e||"",this.ca=Aa};t.prototype.J=!0,t.prototype.H=function(){return this.P},t.prototype.toString=function(){return"Const{"+this.P+"}"};var Ba=function($){return $ instanceof t&&$.constructor===t&&$.ca===Aa?$.P:(ua("expected object of type Const, got '"+$+"'"),"type_error:Const")},Aa={},za={},v=function($,_e){this.N=_e===Ca?$:""};v.prototype.J=!0,v.prototype.H=function(){return this.N.toString()},v.prototype.toString=function(){return"SafeUrl{"+this.N+"}"};var Da=function($){return $ instanceof v&&$.constructor===v?$.N:(ua("expected object of type SafeUrl, got '"+$+"' of type "+ka($)),"type_error:SafeUrl")},Ea=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,Fa=function($){return $ instanceof v?$:($=typeof $=="object"&&$.J?$.H():String($),ta(Ea.test($),"%s does not match the safe URL pattern",$)||($="about:invalid#zClosurez"),new v($,Ca))},Ca={},w=function($,_e,rt){this.M=rt===Ga?$:""};w.prototype.J=!0,w.prototype.H=function(){return this.M.toString()},w.prototype.toString=function(){return"SafeHtml{"+this.M+"}"};var Ha=function($){return $ instanceof w&&$.constructor===w?$.M:(ua("expected object of type SafeHtml, got '"+$+"' of type "+ka($)),"type_error:SafeHtml")},Ga={},Ia=new w(m.trustedTypes&&m.trustedTypes.emptyHTML||"",0,Ga),Ja={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},Ka=function($){var _e=!1,rt;return function(){return _e||(rt=$(),_e=!0),rt}}(function(){if(typeof document>"u")return!1;var $=document.createElement("div"),_e=document.createElement("div");return _e.appendChild(document.createElement("div")),$.appendChild(_e),$.firstChild?(_e=$.firstChild.firstChild,$.innerHTML=Ha(Ia),!_e.parentElement):!1}),x=window,z=document,La=x.location,Ma=function(){},Na=/\[native code\]/,A=function($,_e,rt){return $[_e]=$[_e]||rt},Oa=function($){for(var _e=0;_e<this.length;_e++)if(this[_e]===$)return _e;return-1},Pa=function($){$=$.sort();for(var _e=[],rt=void 0,at=0;at<$.length;at++){var ht=$[at];ht!=rt&&_e.push(ht),rt=ht}return _e},Qa=/&/g,Ra=/</g,Sa=/>/g,Ua=/"/g,Va=/'/g,Wa=function($){return String($).replace(Qa,"&amp;").replace(Ra,"&lt;").replace(Sa,"&gt;").replace(Ua,"&quot;").replace(Va,"&#39;")},B=function(){var $;if(($=Object.create)&&Na.test($))$=$(null);else{$={};for(var _e in $)$[_e]=void 0}return $},C=function($,_e){return Object.prototype.hasOwnProperty.call($,_e)},Xa=function($){if(Na.test(Object.keys))return Object.keys($);var _e=[],rt;for(rt in $)C($,rt)&&_e.push(rt);return _e},D=function($,_e){$=$||{};for(var rt in $)C($,rt)&&(_e[rt]=$[rt])},Ya=function($){return function(){x.setTimeout($,0)}},E=function($,_e){if(!$)throw Error(_e||"")},F=A(x,"gapi",{}),H=function($,_e,rt){var at=new RegExp("([#].*&|[#])"+_e+"=([^&#]*)","g");if(_e=new RegExp("([?#].*&|[?#])"+_e+"=([^&#]*)","g"),$=$&&(at.exec($)||_e.exec($)))try{rt=decodeURIComponent($[2])}catch{}return rt},Za=new RegExp(/^/.source+/([a-zA-Z][-+.a-zA-Z0-9]*:)?/.source+/(\/\/[^\/?#]*)?/.source+/([^?#]*)?/.source+/(\?([^#]*))?/.source+/(#((#|[^#])*))?/.source+/$/.source),$a=/[\ud800-\udbff][\udc00-\udfff]|[^!-~]/g,ab=new RegExp(/(%([^0-9a-fA-F%]|[0-9a-fA-F]([^0-9a-fA-F%])?)?)*/.source+/%($|[^0-9a-fA-F]|[0-9a-fA-F]($|[^0-9a-fA-F]))/.source,"g"),bb=/%([a-f]|[0-9a-fA-F][a-f])/g,cb=/^(https?|ftp|file|chrome-extension):$/i,I=function($){$=String($),$=$.replace($a,function(ht){try{return encodeURIComponent(ht)}catch{return encodeURIComponent(ht.replace(/^[^%]+$/g,""))}}).replace(ab,function(ht){return ht.replace(/%/g,"%25")}).replace(bb,function(ht){return ht.toUpperCase()}),$=$.match(Za)||[];var _e=B(),rt=function(ht){return ht.replace(/\\/g,"%5C").replace(/\^/g,"%5E").replace(/`/g,"%60").replace(/\{/g,"%7B").replace(/\|/g,"%7C").replace(/\}/g,"%7D")},at=!!($[1]||"").match(cb);return _e.A=rt(($[1]||"")+($[2]||"")+($[3]||($[2]&&at?"/":""))),at=function(ht){return rt(ht.replace(/\?/g,"%3F").replace(/#/g,"%23"))},_e.query=$[5]?[at($[5])]:[],_e.g=$[7]?[at($[7])]:[],_e},db=function($){return $.A+(0<$.query.length?"?"+$.query.join("&"):"")+(0<$.g.length?"#"+$.g.join("&"):"")},eb=function($,_e){var rt=[];if($){for(var at in $)if(C($,at)&&$[at]!=null){var ht=_e?_e($[at]):$[at];rt.push(encodeURIComponent(at)+"="+encodeURIComponent(ht))}}return rt},fb=function($,_e,rt,at){return $=I($),$.query.push.apply($.query,eb(_e,at)),$.g.push.apply($.g,eb(rt,at)),db($)},gb=new RegExp(/\/?\??#?/.source+"("+/[\/?#]/i.source+"|"+/[\uD800-\uDBFF]/i.source+"|"+/%[c-f][0-9a-f](%[89ab][0-9a-f]){0,2}(%[89ab]?)?/i.source+"|"+/%[0-9a-f]?/i.source+")$","i"),hb=function($,_e){var rt=I(_e);_e=rt.A,rt.query.length&&(_e+="?"+rt.query.join("")),rt.g.length&&(_e+="#"+rt.g.join(""));var at="";2e3<_e.length&&(at=_e,_e=_e.substr(0,2e3),_e=_e.replace(gb,""),at=at.substr(_e.length));var ht=$.createElement("div");if($=$.createElement("a"),rt=I(_e),_e=rt.A,rt.query.length&&(_e+="?"+rt.query.join("")),rt.g.length&&(_e+="#"+rt.g.join("")),_e=new v(_e,Ca),xa($,"HTMLAnchorElement"),_e=_e instanceof v?_e:Fa(_e),$.href=Da(_e),ht.appendChild($),_e=ht.innerHTML,rt=new t(za,"Assignment to self."),va(Ba(rt),"must provide justification"),ta(!/^[\s\xa0]*$/.test(Ba(rt)),"must provide non-empty justification"),ya===void 0&&(ya=qa("gapi#html")),_e=(rt=ya)?rt.createHTML(_e):_e,_e=new w(_e,null,Ga),ht.tagName&&Ja[ht.tagName.toUpperCase()])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+ht.tagName+".");if(Ka())for(;ht.lastChild;)ht.removeChild(ht.lastChild);return ht.innerHTML=Ha(_e),_e=String(ht.firstChild.href),ht.parentNode&&ht.parentNode.removeChild(ht),rt=I(_e+at),at=rt.A,rt.query.length&&(at+="?"+rt.query.join("")),rt.g.length&&(at+="#"+rt.g.join("")),at},ib=/^https?:\/\/[^\/%\\?#\s]+\/[^\s]*$/i,jb=function($,_e,rt,at){x[rt+"EventListener"]?x[rt+"EventListener"]($,_e,!1):x[at+"tachEvent"]&&x[at+"tachEvent"]("on"+$,_e)},kb=function(){var $=z.readyState;return $==="complete"||$==="interactive"&&navigator.userAgent.indexOf("MSIE")==-1},nb=function($){var _e=lb;if(!kb())try{_e()}catch{}mb($)},mb=function($){if(kb())$();else{var _e=!1,rt=function(){if(!_e)return _e=!0,$.apply(this,arguments)};x.addEventListener?(x.addEventListener("load",rt,!1),x.addEventListener("DOMContentLoaded",rt,!1)):x.attachEvent&&(x.attachEvent("onreadystatechange",function(){kb()&&rt.apply(this,arguments)}),x.attachEvent("onload",rt))}},ob=function($){for(;$.firstChild;)$.removeChild($.firstChild)},pb={button:!0,div:!0,span:!0},K;K=A(x,"___jsl",B()),A(K,"I",0),A(K,"hel",10);var qb=function($){return K.dpo?K.h:H($,"jsh",K.h)},rb=function($){var _e=A(K,"sws",[]);_e.push.apply(_e,$)},sb=function($){return A(K,"watt",B())[$]},tb=function($){var _e=A(K,"PQ",[]);K.PQ=[];var rt=_e.length;if(rt===0)$();else for(var at=0,ht=function(){++at===rt&&$()},pt=0;pt<rt;pt++)_e[pt](ht)},ub=function($){return A(A(K,"H",B()),$,B())},vb=A(K,"perf",B()),wb=A(vb,"g",B()),xb=A(vb,"i",B());A(vb,"r",[]),B(),B();var yb=function($,_e,rt){var at=vb.r;typeof at=="function"?at($,_e,rt):at.push([$,_e,rt])},L=function($,_e,rt){wb[$]=!_e&&wb[$]||rt||new Date().getTime(),yb($)},Ab=function($,_e,rt){_e&&0<_e.length&&(_e=zb(_e),rt&&0<rt.length&&(_e+="___"+zb(rt)),28<_e.length&&(_e=_e.substr(0,28)+(_e.length-28)),rt=_e,_e=A(xb,"_p",B()),A(_e,rt,B())[$]=new Date().getTime(),yb($,"_p",rt))},zb=function($){return $.join("__").replace(/\./g,"_").replace(/\-/g,"_").replace(/,/g,"_")},Bb=B(),N=[],O=function($){throw Error("Bad hint"+($?": "+$:""))};N.push(["jsl",function($){for(var _e in $)if(C($,_e)){var rt=$[_e];typeof rt=="object"?K[_e]=A(K,_e,[]).concat(rt):A(K,_e,rt)}(_e=$.u)&&($=A(K,"us",[]),$.push(_e),(_e=/^https:(.*)$/.exec(_e))&&$.push("http:"+_e[1]))}]);var Cb=/^(\/[a-zA-Z0-9_\-]+)+$/,Db=[/\/amp\//,/\/amp$/,/^\/amp$/],Eb=/^[a-zA-Z0-9\-_\.,!]+$/,Fb=/^gapi\.loaded_[0-9]+$/,Gb=/^[a-zA-Z0-9,._-]+$/,Kb=function($,_e,rt,at){var ht=$.split(";"),pt=ht.shift(),wt=Bb[pt],st=null;return wt?st=wt(ht,_e,rt,at):O("no hint processor for: "+pt),st||O("failed to generate load url"),_e=st,rt=_e.match(Hb),(at=_e.match(Ib))&&at.length===1&&Jb.test(_e)&&rt&&rt.length===1||O("failed sanity: "+$),st},Nb=function($,_e,rt,at){$=Lb($),Fb.test(rt)||O("invalid_callback"),_e=Mb(_e),at=at&&at.length?Mb(at):null;var ht=function(pt){return encodeURIComponent(pt).replace(/%2C/g,",")};return[encodeURIComponent($.pathPrefix).replace(/%2C/g,",").replace(/%2F/g,"/"),"/k=",ht($.version),"/m=",ht(_e),at?"/exm="+ht(at):"","/rt=j/sv=1/d=1/ed=1",$.S?"/am="+ht($.S):"",$.Z?"/rs="+ht($.Z):"",$.aa?"/t="+ht($.aa):"","/cb=",ht(rt)].join("")},Lb=function($){$.charAt(0)!=="/"&&O("relative path");for(var _e=$.substring(1).split("/"),rt=[];_e.length;){if($=_e.shift(),!$.length||$.indexOf(".")==0)O("empty/relative directory");else if(0<$.indexOf("=")){_e.unshift($);break}rt.push($)}$={};for(var at=0,ht=_e.length;at<ht;++at){var pt=_e[at].split("="),wt=decodeURIComponent(pt[0]),st=decodeURIComponent(pt[1]);pt.length==2&&wt&&st&&($[wt]=$[wt]||st)}for(_e="/"+rt.join("/"),Cb.test(_e)||O("invalid_prefix"),rt=0,at=Db.length;rt<at;++rt)Db[rt].test(_e)&&O("invalid_prefix");return rt=Ob($,"k",!0),at=Ob($,"am"),ht=Ob($,"rs"),$=Ob($,"t"),{pathPrefix:_e,version:rt,S:at,Z:ht,aa:$}},Mb=function($){for(var _e=[],rt=0,at=$.length;rt<at;++rt){var ht=$[rt].replace(/\./g,"_").replace(/-/g,"_");Gb.test(ht)&&_e.push(ht)}return _e.join(",")},Ob=function($,_e,rt){if($=$[_e],!$&&rt&&O("missing: "+_e),$){if(Eb.test($))return $;O("invalid: "+_e)}return null},Jb=/^https?:\/\/[a-z0-9_.-]+\.google(rs)?\.com(:\d+)?\/[a-zA-Z0-9_.,!=\-\/]+$/,Ib=/\/cb=/g,Hb=/\/\//g,Pb=function(){var $=qb(La.href);if(!$)throw Error("Bad hint");return $};Bb.m=function($,_e,rt,at){return($=$[0])||O("missing_hint"),"https://apis.google.com"+Nb($,_e,rt,at)};var Qb=decodeURI("%73cript"),Rb=/^[-+_0-9\/A-Za-z]+={0,2}$/,Sb=function($,_e){for(var rt=[],at=0;at<$.length;++at){var ht=$[at];ht&&0>Oa.call(_e,ht)&&rt.push(ht)}return rt},Tb=function(){var $=K.nonce;return $!==void 0?$&&$===String($)&&$.match(Rb)?$:K.nonce=null:z.querySelector&&($=z.querySelector("script[nonce]"))?($=$.nonce||$.getAttribute("nonce")||"",$&&$===String($)&&$.match(Rb)?K.nonce=$:K.nonce=null):null},Wb=function($){if(z.readyState!="loading")Ub($);else{var _e=Tb(),rt="";_e!==null&&(rt=' nonce="'+_e+'"'),$="<"+Qb+' src="'+encodeURI($)+'"'+rt+"></"+Qb+">",z.write(Vb?Vb.createHTML($):$)}},Ub=function($){var _e=z.createElement(Qb);_e.setAttribute("src",Vb?Vb.createScriptURL($):$),$=Tb(),$!==null&&_e.setAttribute("nonce",$),_e.async="true",($=z.getElementsByTagName(Qb)[0])?$.parentNode.insertBefore(_e,$):(z.head||z.body||z.documentElement).appendChild(_e)},Xb=function($,_e){var rt=_e&&_e._c;if(rt)for(var at=0;at<N.length;at++){var ht=N[at][0],pt=N[at][1];pt&&C(rt,ht)&&pt(rt[ht],$,_e)}},Zb=function($,_e,rt){Yb(function(){var at=_e===qb(La.href)?A(F,"_",B()):B();at=A(ub(_e),"_",at),$(at)},rt)},ac=function($,_e){var rt=_e||{};typeof _e=="function"&&(rt={},rt.callback=_e),Xb($,rt),_e=$?$.split(":"):[];var at=rt.h||Pb(),ht=A(K,"ah",B());if(ht["::"]&&_e.length){$=[];for(var pt=null;pt=_e.shift();){var wt=pt.split(".");wt=ht[pt]||ht[wt[1]&&"ns:"+wt[0]||""]||at;var st=$.length&&$[$.length-1]||null,Tt=st;st&&st.hint==wt||(Tt={hint:wt,V:[]},$.push(Tt)),Tt.V.push(pt)}var kt=$.length;if(1<kt){var Mt=rt.callback;Mt&&(rt.callback=function(){--kt==0&&Mt()})}for(;_e=$.shift();)$b(_e.V,rt,_e.hint)}else $b(_e||[],rt,at)},$b=function($,_e,rt){$=Pa($)||[];var at=_e.callback,ht=_e.config,pt=_e.timeout,wt=_e.ontimeout,st=_e.onerror,Tt=void 0;typeof st=="function"&&(Tt=st);var kt=null,Mt=!1;if(pt&&!wt||!pt&&wt)throw"Timeout requires both the timeout parameter and ontimeout parameter to be set";st=A(ub(rt),"r",[]).sort();var Dt=A(ub(rt),"L",[]).sort(),Ot=[].concat(st),Ut=function(Kt,Jt){if(Mt)return 0;x.clearTimeout(kt),Dt.push.apply(Dt,qt);var pr=((F||{}).config||{}).update;if(pr?pr(ht):ht&&A(K,"cu",[]).push(ht),Jt){Ab("me0",Kt,Ot);try{Zb(Jt,rt,Tt)}finally{Ab("me1",Kt,Ot)}}return 1};0<pt&&(kt=x.setTimeout(function(){Mt=!0,wt()},pt));var qt=Sb($,Dt);if(qt.length){qt=Sb($,st);var tr=A(K,"CP",[]),ar=tr.length;if(tr[ar]=function(Kt){if(!Kt)return 0;Ab("ml1",qt,Ot);var Jt=function(Sr){tr[ar]=null,Ut(qt,Kt)&&tb(function(){at&&at(),Sr()})},pr=function(){var Sr=tr[ar+1];Sr&&Sr()};0<ar&&tr[ar-1]?tr[ar]=function(){Jt(pr)}:Jt(pr)},qt.length){var Yt="loaded_"+K.I++;F[Yt]=function(Kt){tr[ar](Kt),F[Yt]=null},$=Kb(rt,qt,"gapi."+Yt,st),st.push.apply(st,qt),Ab("ml0",qt,Ot),_e.sync||x.___gapisync?Wb($):Ub($)}else tr[ar](Ma)}else Ut(qt)&&at&&at()},Vb=qa("gapi#gapi"),Yb=function($,_e){if(K.hee&&0<K.hel)try{return $()}catch(rt){_e&&_e(rt),K.hel--,ac("debug_error",function(){try{window.___jsl.hefn(rt)}catch{throw rt}})}else try{return $()}catch(rt){throw _e&&_e(rt),rt}};F.load=function($,_e){return Yb(function(){return ac($,_e)})};var bc=function($){var _e=window.___jsl=window.___jsl||{};return _e[$]=_e[$]||[],_e[$]},cc=function($){var _e=window.___jsl=window.___jsl||{};return _e.cfg=!$&&_e.cfg||{},_e.cfg},dc=function($){return typeof $=="object"&&/\[native code\]/.test($.push)},P=function($,_e,rt){if(_e&&typeof _e=="object")for(var at in _e)!Object.prototype.hasOwnProperty.call(_e,at)||rt&&at==="___goc"&&typeof _e[at]>"u"||($[at]&&_e[at]&&typeof $[at]=="object"&&typeof _e[at]=="object"&&!dc($[at])&&!dc(_e[at])?P($[at],_e[at]):_e[at]&&typeof _e[at]=="object"?($[at]=dc(_e[at])?[]:{},P($[at],_e[at])):$[at]=_e[at])},ec=function($){if($&&!/^\s+$/.test($)){for(;$.charCodeAt($.length-1)==0;)$=$.substring(0,$.length-1);try{var _e=window.JSON.parse($)}catch{}if(typeof _e=="object")return _e;try{_e=new Function("return ("+$+`
)`)()}catch{}if(typeof _e=="object")return _e;try{_e=new Function("return ({"+$+`
})`)()}catch{}return typeof _e=="object"?_e:{}}},fc=function($,_e){var rt={___goc:void 0};$.length&&$[$.length-1]&&Object.hasOwnProperty.call($[$.length-1],"___goc")&&typeof $[$.length-1].___goc>"u"&&(rt=$.pop()),P(rt,_e),$.push(rt)},gc=function($){cc(!0);var _e=window.___gcfg,rt=bc("cu"),at=window.___gu;_e&&_e!==at&&(fc(rt,_e),window.___gu=_e),_e=bc("cu");var ht=document.scripts||document.getElementsByTagName("script")||[];at=[];var pt=[];pt.push.apply(pt,bc("us"));for(var wt=0;wt<ht.length;++wt)for(var st=ht[wt],Tt=0;Tt<pt.length;++Tt)st.src&&st.src.indexOf(pt[Tt])==0&&at.push(st);for(at.length==0&&0<ht.length&&ht[ht.length-1].src&&at.push(ht[ht.length-1]),ht=0;ht<at.length;++ht)at[ht].getAttribute("gapi_processed")||(at[ht].setAttribute("gapi_processed",!0),(pt=at[ht])?(wt=pt.nodeType,pt=wt==3||wt==4?pt.nodeValue:pt.textContent||pt.innerText||pt.innerHTML||""):pt=void 0,(pt=ec(pt))&&_e.push(pt));for($&&fc(rt,$),at=bc("cd"),$=0,_e=at.length;$<_e;++$)P(cc(),at[$],!0);for(at=bc("ci"),$=0,_e=at.length;$<_e;++$)P(cc(),at[$],!0);for($=0,_e=rt.length;$<_e;++$)P(cc(),rt[$],!0)},Q=function($){var _e=cc();if(!$)return _e;$=$.split("/");for(var rt=0,at=$.length;_e&&typeof _e=="object"&&rt<at;++rt)_e=_e[$[rt]];return rt===$.length&&_e!==void 0?_e:void 0},hc=function($,_e){var rt;if(typeof $=="string"){var at=rt={};$=$.split("/");for(var ht=0,pt=$.length;ht<pt-1;++ht){var wt={};at=at[$[ht]]=wt}at[$[ht]]=_e}else rt=$;gc(rt)},ic=function(){var $=window.__GOOGLEAPIS;$&&($.googleapis&&!$["googleapis.config"]&&($["googleapis.config"]=$.googleapis),A(K,"ci",[]).push($),window.__GOOGLEAPIS=void 0)},jc={callback:1,clientid:1,cookiepolicy:1,openidrealm:-1,includegrantedscopes:-1,requestvisibleactions:1,scope:1},kc=!1,lc=B(),mc=function(){if(!kc){for(var $=document.getElementsByTagName("meta"),_e=0;_e<$.length;++_e){var rt=$[_e].name.toLowerCase();if(rt.lastIndexOf("google-signin-",0)==0){rt=rt.substring(14);var at=$[_e].content;jc[rt]&&at&&(lc[rt]=at)}}if(window.self!==window.top){$=document.location.toString();for(var ht in jc)0<jc[ht]&&(_e=H($,ht,""))&&(lc[ht]=_e)}kc=!0}return ht=B(),D(lc,ht),ht},nc=function($){return!!($.clientid&&$.scope&&$.callback)},oc=window.console,pc=function($){oc&&oc.log&&oc.log($)},qc=function(){return!!K.oa},rc=function(){},R=A(K,"rw",B()),sc=function($){for(var _e in R)$(R[_e])},tc=function($,_e){($=R[$])&&$.state<_e&&($.state=_e)},vc=/^https?:\/\/(?:\w|[\-\.])+\.google\.(?:\w|[\-:\.])+(?:\/[^\?#]*)?\/u\/(\d)\//,wc=/^https?:\/\/(?:\w|[\-\.])+\.google\.(?:\w|[\-:\.])+(?:\/[^\?#]*)?\/b\/(\d{10,21})\//,xc=function($){var _e=Q("googleapis.config/sessionIndex");if(typeof _e=="string"&&254<_e.length&&(_e=null),_e==null&&(_e=window.__X_GOOG_AUTHUSER),typeof _e=="string"&&254<_e.length&&(_e=null),_e==null){var rt=window.google;rt&&(_e=rt.authuser)}return typeof _e=="string"&&254<_e.length&&(_e=null),_e==null&&($=$||window.location.href,_e=H($,"authuser")||null,_e==null&&(_e=(_e=$.match(vc))?_e[1]:null)),_e==null?null:(_e=String(_e),254<_e.length&&(_e=null),_e)},yc=function($){var _e=Q("googleapis.config/sessionDelegate");return typeof _e=="string"&&21<_e.length&&(_e=null),_e==null&&(_e=($=($||window.location.href).match(wc))?$[1]:null),_e==null?null:(_e=String(_e),21<_e.length&&(_e=null),_e)},zc,S,T=void 0,U=function($){try{return m.JSON.parse.call(m.JSON,$)}catch{return!1}},V=function($){return Object.prototype.toString.call($)},Ac=V(0),Bc=V(new Date(0)),Cc=V(!0),Dc=V(""),Ec=V({}),Fc=V([]),W=function($,_e){if(_e){for(var rt=0,at=_e.length;rt<at;++rt)if($===_e[rt])throw new TypeError("Converting circular structure to JSON")}if(at=typeof $,at!=="undefined"){rt=Array.prototype.slice.call(_e||[],0),rt[rt.length]=$,_e=[];var ht=V($);if($!=null&&typeof $.toJSON=="function"&&(Object.prototype.hasOwnProperty.call($,"toJSON")||(ht!==Fc||$.constructor!==Array&&$.constructor!==Object)&&(ht!==Ec||$.constructor!==Array&&$.constructor!==Object)&&ht!==Dc&&ht!==Ac&&ht!==Cc&&ht!==Bc))return W($.toJSON.call($),rt);if($==null)_e[_e.length]="null";else if(ht===Ac)$=Number($),isNaN($)||isNaN($-$)?$="null":$===-0&&0>1/$&&($="-0"),_e[_e.length]=String($);else if(ht===Cc)_e[_e.length]=String(!!Number($));else{if(ht===Bc)return W($.toISOString.call($),rt);if(ht===Fc&&V($.length)===Ac){_e[_e.length]="[";var pt=0;for(at=Number($.length)>>0;pt<at;++pt)pt&&(_e[_e.length]=","),_e[_e.length]=W($[pt],rt)||"null";_e[_e.length]="]"}else if(ht==Dc&&V($.length)===Ac){for(_e[_e.length]='"',pt=0,rt=Number($.length)>>0;pt<rt;++pt)at=String.prototype.charAt.call($,pt),ht=String.prototype.charCodeAt.call($,pt),_e[_e.length]=at==="\b"?"\\b":at==="\f"?"\\f":at===`
`?"\\n":at==="\r"?"\\r":at==="	"?"\\t":at==="\\"||at==='"'?"\\"+at:31>=ht?"\\u"+(ht+65536).toString(16).substr(1):32<=ht&&65535>=ht?at:"";_e[_e.length]='"'}else if(at==="object"){_e[_e.length]="{",at=0;for(pt in $)Object.prototype.hasOwnProperty.call($,pt)&&(ht=W($[pt],rt),ht!==void 0&&(at++&&(_e[_e.length]=","),_e[_e.length]=W(pt),_e[_e.length]=":",_e[_e.length]=ht));_e[_e.length]="}"}else return}return _e.join("")}},Gc=/[\0-\x07\x0b\x0e-\x1f]/,Hc=/^([^"]*"([^\\"]|\\.)*")*[^"]*"([^"\\]|\\.)*[\0-\x1f]/,Ic=/^([^"]*"([^\\"]|\\.)*")*[^"]*"([^"\\]|\\.)*\\[^\\\/"bfnrtu]/,Jc=/^([^"]*"([^\\"]|\\.)*")*[^"]*"([^"\\]|\\.)*\\u([0-9a-fA-F]{0,3}[^0-9a-fA-F])/,Kc=/"([^\0-\x1f\\"]|\\[\\\/"bfnrt]|\\u[0-9a-fA-F]{4})*"/g,Lc=/-?(0|[1-9][0-9]*)(\.[0-9]+)?([eE][-+]?[0-9]+)?/g,Mc=/[ \t\n\r]+/g,Nc=/[^"]:/,Oc=/""/g,Pc=/true|false|null/g,Qc=/00/,Rc=/[\{]([^0\}]|0[^:])/,Sc=/(^|\[)[,:]|[,:](\]|\}|[,:]|$)/,Tc=/[^\[,:][\[\{]/,Uc=/^(\{|\}|\[|\]|,|:|0)+/,Vc=/\u2028/g,Wc=/\u2029/g,Xc=function(a){if(a=String(a),Gc.test(a)||Hc.test(a)||Ic.test(a)||Jc.test(a))return!1;var b=a.replace(Kc,'""');if(b=b.replace(Lc,"0"),b=b.replace(Mc,""),Nc.test(b)||(b=b.replace(Oc,"0"),b=b.replace(Pc,"0"),Qc.test(b)||Rc.test(b)||Sc.test(b)||Tc.test(b)||!b||(b=b.replace(Uc,""))))return!1;a=a.replace(Vc,"\\u2028").replace(Wc,"\\u2029"),b=void 0;try{b=T?[U(a)]:eval(`(function (var_args) {
  return Array.prototype.slice.call(arguments, 0);
})(
`+a+`
)`)}catch($){return!1}return b&&b.length===1?b[0]:!1},Yc=function(){var $=((m.document||{}).scripts||[]).length;if((zc===void 0||T===void 0||S!==$)&&S!==-1){zc=T=!1,S=-1;try{try{T=!!m.JSON&&m.JSON.stringify.call(m.JSON,{a:[3,!0,new Date(0)],c:function(){}})==='{"a":[3,true,"1970-01-01T00:00:00.000Z"]}'&&U("true")===!0&&U('[{"a":3}]')[0].a===3}catch{}zc=T&&!U("[00]")&&!U('"\x07"')&&!U('"\\0"')&&!U('"\\v"')}finally{S=$}}},Zc=function($){return S===-1?!1:(Yc(),(zc?U:Xc)($))},$c=function($){if(S!==-1)return Yc(),T?m.JSON.stringify.call(m.JSON,$):W($)},ad=!Date.prototype.toISOString||typeof Date.prototype.toISOString!="function"||new Date(0).toISOString()!=="1970-01-01T00:00:00.000Z",bd=function(){var $=Date.prototype.getUTCFullYear.call(this);return[0>$?"-"+String(1e6-$).substr(1):9999>=$?String(1e4+$).substr(1):"+"+String(1e6+$).substr(1),"-",String(101+Date.prototype.getUTCMonth.call(this)).substr(1),"-",String(100+Date.prototype.getUTCDate.call(this)).substr(1),"T",String(100+Date.prototype.getUTCHours.call(this)).substr(1),":",String(100+Date.prototype.getUTCMinutes.call(this)).substr(1),":",String(100+Date.prototype.getUTCSeconds.call(this)).substr(1),".",String(1e3+Date.prototype.getUTCMilliseconds.call(this)).substr(1),"Z"].join("")};Date.prototype.toISOString=ad?bd:Date.prototype.toISOString;var cd=function(){this.j=-1},dd=function(){this.j=64,this.b=[],this.G=[],this.da=[],this.C=[],this.C[0]=128;for(var $=1;$<this.j;++$)this.C[$]=0;this.D=this.o=0,this.reset()};oa(dd,cd),dd.prototype.reset=function(){this.b[0]=1732584193,this.b[1]=4023233417,this.b[2]=2562383102,this.b[3]=271733878,this.b[4]=3285377520,this.D=this.o=0};var ed=function($,_e,rt){rt||(rt=0);var at=$.da;if(typeof _e=="string")for(var ht=0;16>ht;ht++)at[ht]=_e.charCodeAt(rt)<<24|_e.charCodeAt(rt+1)<<16|_e.charCodeAt(rt+2)<<8|_e.charCodeAt(rt+3),rt+=4;else for(ht=0;16>ht;ht++)at[ht]=_e[rt]<<24|_e[rt+1]<<16|_e[rt+2]<<8|_e[rt+3],rt+=4;for(ht=16;80>ht;ht++){var pt=at[ht-3]^at[ht-8]^at[ht-14]^at[ht-16];at[ht]=(pt<<1|pt>>>31)&4294967295}_e=$.b[0],rt=$.b[1];var wt=$.b[2],st=$.b[3],Tt=$.b[4];for(ht=0;80>ht;ht++){if(40>ht)if(20>ht){pt=st^rt&(wt^st);var kt=1518500249}else pt=rt^wt^st,kt=1859775393;else 60>ht?(pt=rt&wt|st&(rt|wt),kt=2400959708):(pt=rt^wt^st,kt=3395469782);pt=(_e<<5|_e>>>27)+pt+Tt+kt+at[ht]&4294967295,Tt=st,st=wt,wt=(rt<<30|rt>>>2)&4294967295,rt=_e,_e=pt}$.b[0]=$.b[0]+_e&4294967295,$.b[1]=$.b[1]+rt&4294967295,$.b[2]=$.b[2]+wt&4294967295,$.b[3]=$.b[3]+st&4294967295,$.b[4]=$.b[4]+Tt&4294967295};dd.prototype.update=function($,_e){if($!=null){_e===void 0&&(_e=$.length);for(var rt=_e-this.j,at=0,ht=this.G,pt=this.o;at<_e;){if(pt==0)for(;at<=rt;)ed(this,$,at),at+=this.j;if(typeof $=="string"){for(;at<_e;)if(ht[pt]=$.charCodeAt(at),++pt,++at,pt==this.j){ed(this,ht),pt=0;break}}else for(;at<_e;)if(ht[pt]=$[at],++pt,++at,pt==this.j){ed(this,ht),pt=0;break}}this.o=pt,this.D+=_e}},dd.prototype.digest=function(){var $=[],_e=8*this.D;56>this.o?this.update(this.C,56-this.o):this.update(this.C,this.j-(this.o-56));for(var rt=this.j-1;56<=rt;rt--)this.G[rt]=_e&255,_e/=256;for(ed(this,this.G),rt=_e=0;5>rt;rt++)for(var at=24;0<=at;at-=8)$[_e]=this.b[rt]>>at&255,++_e;return $};var fd=function(){this.O=new dd};fd.prototype.reset=function(){this.O.reset()};var gd=x.crypto,hd=!1,id=0,jd=0,kd=1,ld=0,md="",nd=function($){$=$||x.event;var _e=$.screenX+$.clientX<<16;_e+=$.screenY+$.clientY,_e*=new Date().getTime()%1e6,kd=kd*_e%ld,0<id&&++jd==id&&jb("mousemove",nd,"remove","de")},od=function($){var _e=new fd;$=unescape(encodeURIComponent($));for(var rt=[],at=0,ht=$.length;at<ht;++at)rt.push($.charCodeAt(at));for(_e.O.update(rt),_e=_e.O.digest(),$="",rt=0;rt<_e.length;rt++)$+="0123456789ABCDEF".charAt(Math.floor(_e[rt]/16))+"0123456789ABCDEF".charAt(_e[rt]%16);return $};hd=!!gd&&typeof gd.getRandomValues=="function",hd||(ld=1e6*(screen.width*screen.width+screen.height),md=od(z.cookie+"|"+z.location+"|"+new Date().getTime()+"|"+Math.random()),id=Q("random/maxObserveMousemove")||0,id!=0&&jb("mousemove",nd,"add","at"));var pd=function(){var $=kd;return $+=parseInt(md.substr(0,20),16),md=od(md),$/(ld+Math.pow(16,20))},qd=function(){var $=new x.Uint32Array(1);return gd.getRandomValues($),+("0."+$[0])},rd=function(){var $=K.onl;if(!$){$=B(),K.onl=$;var _e=B();$.e=function(rt){var at=_e[rt];at&&(delete _e[rt],at())},$.a=function(rt,at){_e[rt]=at},$.r=function(rt){delete _e[rt]}}return $},sd=function($,_e){return _e=_e.onload,typeof _e=="function"?(rd().a($,_e),_e):null},td=function($){return E(/^\w+$/.test($),"Unsupported id - "+$),rd(),'onload="window.___jsl.onl.e(&#34;'+$+'&#34;)"'},ud=function($){rd().r($)},vd={allowtransparency:"true",frameborder:"0",hspace:"0",marginheight:"0",marginwidth:"0",scrolling:"no",style:"",tabindex:"0",vspace:"0",width:"100%"},wd={allowtransparency:!0,onload:!0},xd=0,yd=function($){E(!$||ib.test($),"Illegal url for new iframe - "+$)},zd=function($,_e,rt,at,ht){yd(rt.src);var pt,wt=sd(at,rt),st=wt?td(at):"";try{document.all&&(pt=$.createElement('<iframe frameborder="'+Wa(String(rt.frameborder))+'" scrolling="'+Wa(String(rt.scrolling))+'" '+st+' name="'+Wa(String(rt.name))+'"/>'))}catch{}finally{pt||(pt=$.createElement("iframe"),wt&&(pt.onload=function(){pt.onload=null,wt.call(this)},ud(at)))}pt.setAttribute("ng-non-bindable","");for(var Tt in rt)$=rt[Tt],Tt==="style"&&typeof $=="object"?D($,pt.style):wd[Tt]||pt.setAttribute(Tt,String($));return(Tt=ht&&ht.beforeNode||null)||ht&&ht.dontclear||ob(_e),_e.insertBefore(pt,Tt),pt=Tt?Tt.previousSibling:_e.lastChild,rt.allowtransparency&&(pt.allowTransparency=!0),pt},Ad=/^:[\w]+$/,Bd=/:([a-zA-Z_]+):/g,Cd=function(){var $=xc()||"0",_e=yc(),rt=xc(void 0)||$,at=yc(void 0),ht="";rt&&(ht+="u/"+encodeURIComponent(String(rt))+"/"),at&&(ht+="b/"+encodeURIComponent(String(at))+"/"),rt=ht||null,(ht=(at=Q("isLoggedIn")===!1)?"_/im/":"")&&(rt="");var pt=Q("iframes/:socialhost:"),wt=Q("iframes/:im_socialhost:");return{socialhost:pt,ctx_socialhost:at?wt:pt,session_index:$,session_delegate:_e,session_prefix:rt,im_prefix:ht}},Dd=function($,_e){return Cd()[_e]||""},Ed=function($){return function(_e,rt){return $?Cd()[rt]||$[rt]||"":Cd()[rt]||""}},Fd=function($){var _e;return $.match(/^https?%3A/i)&&(_e=decodeURIComponent($)),hb(document,_e||$)},Gd=function($){$=$||"canonical";for(var _e=document.getElementsByTagName("link"),rt=0,at=_e.length;rt<at;rt++){var ht=_e[rt],pt=ht.getAttribute("rel");if(pt&&pt.toLowerCase()==$&&(ht=ht.getAttribute("href"))&&(ht=Fd(ht))&&ht.match(/^https?:\/\/[\w\-_\.]+/i)!=null)return ht}return window.location.href},Hd={se:"0"},Id={post:!0},Jd={style:"position:absolute;top:-10000px;width:450px;margin:0px;border-style:none"},Kd="onPlusOne _ready _close _open _resizeMe _renderstart oncircled drefresh erefresh".split(" "),Ld=A(K,"WI",B()),Md=function($,_e,rt){var at,ht={},pt=at=$;$=="plus"&&_e.action&&(at=$+"_"+_e.action,pt=$+"/"+_e.action),(at=Q("iframes/"+at+"/url"))||(at=":im_socialhost:/:session_prefix::im_prefix:_/widget/render/"+pt+"?usegapi=1");for(var wt in Hd)ht[wt]=wt+"/"+(_e[wt]||Hd[wt])+"/";if(ht=hb(z,at.replace(Bd,Ed(ht))),wt="iframes/"+$+"/params/",pt={},D(_e,pt),(at=Q("lang")||Q("gwidget/lang"))&&(pt.hl=at),Id[$]||(pt.origin=window.location.origin||window.location.protocol+"//"+window.location.host),pt.exp=Q(wt+"exp"),wt=Q(wt+"location"))for(at=0;at<wt.length;at++){var st=wt[at];pt[st]=x.location[st]}switch($){case"plus":case"follow":wt=pt.href,at=_e.action?void 0:"publisher",wt=(wt=typeof wt=="string"?wt:void 0)?Fd(wt):Gd(at),pt.url=wt,delete pt.href;break;case"plusone":wt=(wt=_e.href)?Fd(wt):Gd(),pt.url=wt,wt=_e.db,at=Q(),wt==null&&at&&(wt=at.db,wt==null&&(wt=at.gwidget&&at.gwidget.db)),pt.db=wt||void 0,wt=_e.ecp,at=Q(),wt==null&&at&&(wt=at.ecp,wt==null&&(wt=at.gwidget&&at.gwidget.ecp)),pt.ecp=wt||void 0,delete pt.href;break;case"signin":pt.url=Gd()}K.ILI&&(pt.iloader="1"),delete pt["data-onload"],delete pt.rd;for(var Tt in Hd)pt[Tt]&&delete pt[Tt];pt.gsrc=Q("iframes/:source:"),Tt=Q("inline/css"),typeof Tt<"u"&&0<rt&&Tt>=rt&&(pt.ic="1"),Tt=/^#|^fr-/,rt={};for(var kt in pt)C(pt,kt)&&Tt.test(kt)&&(rt[kt.replace(Tt,"")]=pt[kt],delete pt[kt]);kt=Q("iframes/"+$+"/params/si")=="q"?pt:rt,Tt=mc();for(var Mt in Tt)!C(Tt,Mt)||C(pt,Mt)||C(rt,Mt)||(kt[Mt]=Tt[Mt]);Mt=[].concat(Kd),(kt=Q("iframes/"+$+"/methods"))&&typeof kt=="object"&&Na.test(kt.push)&&(Mt=Mt.concat(kt));for(var Dt in _e)C(_e,Dt)&&/^on/.test(Dt)&&($!="plus"||Dt!="onconnect")&&(Mt.push(Dt),delete pt[Dt]);return delete pt.callback,rt._methods=Mt.join(","),fb(ht,pt,rt)},Nd=["style","data-gapiscan"],Pd=function($){for(var _e=B(),rt=$.nodeName.toLowerCase().indexOf("g:")!=0,at=0,ht=$.attributes.length;at<ht;at++){var pt=$.attributes[at],wt=pt.name,st=pt.value;0<=Oa.call(Nd,wt)||rt&&wt.indexOf("data-")!=0||st==="null"||"specified"in pt&&!pt.specified||(rt&&(wt=wt.substr(5)),_e[wt.toLowerCase()]=st)}return $=$.style,(rt=Od($&&$.height))&&(_e.height=String(rt)),($=Od($&&$.width))&&(_e.width=String($)),_e},Od=function($){var _e=void 0;return typeof $=="number"?_e=$:typeof $=="string"&&(_e=parseInt($,10)),_e},Rd=function(){var $=K.drw;sc(function(_e){if($!==_e.id&&_e.state!=4&&_e.type!="share"){var rt=_e.id,at=_e.type,ht=_e.url;_e=_e.userParams;var pt=z.getElementById(rt);if(pt){var wt=Md(at,_e,0);wt?(pt=pt.parentNode,ht.replace(/#.*/,"").replace(/(\?|&)ic=1/,"")!==wt.replace(/#.*/,"").replace(/(\?|&)ic=1/,"")&&(_e.dontclear=!0,_e.rd=!0,_e.ri=!0,_e.type=at,Qd(pt,_e),(at=R[pt.lastChild.id])&&(at.oid=rt),tc(rt,4))):delete R[rt]}else delete R[rt]}})},Sd,Td,X,Ud,Vd,Wd=/(?:^|\s)g-((\S)*)(?:$|\s)/,Xd={plusone:!0,autocomplete:!0,profile:!0,signin:!0,signin2:!0};Sd=A(K,"SW",B()),Td=A(K,"SA",B()),X=A(K,"SM",B()),Ud=A(K,"FW",[]),Vd=null;var Zd=function($,_e){Yd(void 0,!1,$,_e)},Yd=function($,_e,rt,at){L("ps0",!0),rt=(typeof rt=="string"?document.getElementById(rt):rt)||z;var ht=z.documentMode;if(rt.querySelectorAll&&(!ht||8<ht)){ht=at?[at]:Xa(Sd).concat(Xa(Td)).concat(Xa(X));for(var pt=[],wt=0;wt<ht.length;wt++){var st=ht[wt];pt.push(".g-"+st,"g\\:"+st)}ht=rt.querySelectorAll(pt.join(","))}else ht=rt.getElementsByTagName("*");for(rt=B(),pt=0;pt<ht.length;pt++){wt=ht[pt];var Tt=wt;st=at;var kt=Tt.nodeName.toLowerCase(),Mt=void 0;if(Tt.getAttribute("data-gapiscan"))st=null;else{var Dt=kt.indexOf("g:");Dt==0?Mt=kt.substr(2):(Dt=(Dt=String(Tt.className||Tt.getAttribute("class")))&&Wd.exec(Dt))&&(Mt=Dt[1]),st=!Mt||!(Sd[Mt]||Td[Mt]||X[Mt])||st&&Mt!==st?null:Mt}st&&(Xd[st]||wt.nodeName.toLowerCase().indexOf("g:")==0||Xa(Pd(wt)).length!=0)&&(wt.setAttribute("data-gapiscan",!0),A(rt,st,[]).push(wt))}if(_e)for(var Ot in rt)for(_e=rt[Ot],at=0;at<_e.length;at++)_e[at].setAttribute("data-onload",!0);for(var Ut in rt)Ud.push(Ut);if(L("ps1",!0),(Ot=Ud.join(":"))||$)try{F.load(Ot,$)}catch(tr){pc(tr);return}if($d(Vd||{}))for(var qt in rt){for($=rt[qt],Ut=0,_e=$.length;Ut<_e;Ut++)$[Ut].removeAttribute("data-gapiscan");ae(qt)}else{at=[];for(qt in rt)for($=rt[qt],Ut=0,_e=$.length;Ut<_e;Ut++)ht=$[Ut],be(qt,ht,Pd(ht),at,_e);ce(Ot,at)}},de=function($){var _e=A(F,$,{});_e.go||(_e.go=function(rt){return Zd(rt,$)},_e.render=function(rt,at){return at=at||{},at.type=$,Qd(rt,at)})},ee=function($){Sd[$]=!0},fe=function($){Td[$]=!0},ge=function($){X[$]=!0},ae=function($,_e){var rt=sb($);_e&&rt?(rt(_e),(rt=_e.iframeNode)&&rt.setAttribute("data-gapiattached",!0)):F.load($,function(){var at=sb($),ht=_e&&_e.iframeNode,pt=_e&&_e.userParams;ht&&at?(at(_e),ht.setAttribute("data-gapiattached",!0)):(at=F[$].go,$=="signin2"?at(ht,pt):at(ht&&ht.parentNode,pt))})},$d=function(){return!1},ce=function(){},be=function($,_e,rt,at,ht,pt,wt){switch(he(_e,$,pt)){case 0:$=X[$]?$+"_annotation":$,at={},at.iframeNode=_e,at.userParams=rt,ae($,at);break;case 1:if(_e.parentNode){for(var st in rt)if((pt=C(rt,st))&&(pt=rt[st],pt=!!pt&&typeof pt=="object"&&(!pt.toString||pt.toString===Object.prototype.toString||pt.toString===Array.prototype.toString)),pt)try{rt[st]=$c(rt[st])}catch{delete rt[st]}if(pt=!0,rt.dontclear&&(pt=!1),delete rt.dontclear,rc(),st=Md($,rt,ht),ht=wt||{},ht.allowPost=1,ht.attributes=Jd,ht.dontclear=!pt,wt={},wt.userParams=rt,wt.url=st,wt.type=$,rt.rd)var Tt=_e;else Tt=document.createElement("div"),_e.setAttribute("data-gapistub",!0),Tt.style.cssText="position:absolute;width:450px;left:-10000px;",_e.parentNode.insertBefore(Tt,_e);wt.siteElement=Tt,Tt.id||(_e=Tt,A(Ld,$,0),pt="___"+$+"_"+Ld[$]++,_e.id=pt),_e=B(),_e[">type"]=$,D(rt,_e),pt=st,rt=Tt,st=ht||{},_e=st.attributes||{},E(!(st.allowPost||st.forcePost)||!_e.onload,"onload is not supported by post iframe (allowPost or forcePost)"),ht=_e=pt,Ad.test(_e)&&(ht=Q("iframes/"+ht.substring(1)+"/url"),E(!!ht,"Unknown iframe url config for - "+_e)),pt=hb(z,ht.replace(Bd,Dd)),_e=rt.ownerDocument||z,Tt=0;do ht=st.id||["I",xd++,"_",new Date().getTime()].join("");while(_e.getElementById(ht)&&5>++Tt);E(5>Tt,"Error creating iframe id"),Tt={};var kt={};_e.documentMode&&9>_e.documentMode&&(Tt.hostiemode=_e.documentMode),D(st.queryParams||{},Tt),D(st.fragmentParams||{},kt);var Mt=st.pfname,Dt=B();Q("iframes/dropLegacyIdParam")||(Dt.id=ht),Dt._gfid=ht,Dt.parent=_e.location.protocol+"//"+_e.location.host;var Ot=H(_e.location.href,"parent");if(Mt=Mt||"",!Mt&&Ot&&(Ot=H(_e.location.href,"_gfid","")||H(_e.location.href,"id",""),Mt=H(_e.location.href,"pfname",""),Mt=Ot?Mt+"/"+Ot:""),Mt||(Ot=Zc(H(_e.location.href,"jcp","")))&&typeof Ot=="object"&&(Mt=(Mt=Ot.id)?Ot.pfname+"/"+Mt:""),Dt.pfname=Mt,st.connectWithJsonParam&&(Ot={},Ot.jcp=$c(Dt),Dt=Ot),Ot=H(pt,"rpctoken")||Tt.rpctoken||kt.rpctoken,Ot||(Ot=st.rpctoken||String(Math.round(1e8*(hd?qd():pd()))),Dt.rpctoken=Ot),st.rpctoken=Ot,D(Dt,st.connectWithQueryParams?Tt:kt),Ot=_e.location.href,Dt=B(),(Mt=H(Ot,"_bsh",K.bsh))&&(Dt._bsh=Mt),(Ot=qb(Ot))&&(Dt.jsh=Ot),st.hintInFragment?D(Dt,kt):D(Dt,Tt),pt=fb(pt,Tt,kt,st.paramsSerializer),kt=B(),D(vd,kt),D(st.attributes,kt),kt.name=kt.id=ht,kt.src=pt,st.eurl=pt,Tt=st||{},Dt=!!Tt.allowPost,Tt.forcePost||Dt&&2e3<pt.length){if(Tt=I(pt),kt.src="",st.dropDataPostorigin||(kt["data-postorigin"]=pt),pt=zd(_e,rt,kt,ht),navigator.userAgent.indexOf("WebKit")!=-1){var Ut=pt.contentWindow.document;Ut.open(),kt=Ut.createElement("div"),Dt={},Ot=ht+"_inner",Dt.name=Ot,Dt.src="",Dt.style="display:none",zd(_e,kt,Dt,Ot,st)}for(kt=(st=Tt.query[0])?st.split("&"):[],st=[],Dt=0;Dt<kt.length;Dt++)Ot=kt[Dt].split("=",2),st.push([decodeURIComponent(Ot[0]),decodeURIComponent(Ot[1])]);for(Tt.query=[],kt=db(Tt),E(ib.test(kt),"Invalid URL: "+kt),Tt=_e.createElement("form"),Tt.method="POST",Tt.target=ht,Tt.style.display="none",ht=kt instanceof v?kt:Fa(kt),xa(Tt,"HTMLFormElement").action=Da(ht),ht=0;ht<st.length;ht++)kt=_e.createElement("input"),kt.type="hidden",kt.name=st[ht][0],kt.value=st[ht][1],Tt.appendChild(kt);rt.appendChild(Tt),Tt.submit(),Tt.parentNode.removeChild(Tt),Ut&&Ut.close(),Ut=pt}else Ut=zd(_e,rt,kt,ht,st);wt.iframeNode=Ut,wt.id=Ut.getAttribute("id"),Ut=wt.id,rt=B(),rt.id=Ut,rt.userParams=wt.userParams,rt.url=wt.url,rt.type=wt.type,rt.state=1,R[Ut]=rt,Ut=wt}else Ut=null;Ut&&((wt=Ut.id)&&at.push(wt),ae($,Ut))}},he=function($,_e,rt){if($&&$.nodeType===1&&_e){if(rt)return 1;if(X[_e]){if(pb[$.nodeName.toLowerCase()])return($=$.innerHTML)&&$.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")?0:1}else{if(Td[_e])return 0;if(Sd[_e])return 1}}return null},Qd=function($,_e){var rt=_e.type;delete _e.type;var at=(typeof $=="string"?document.getElementById($):$)||void 0;if(at){$={};for(var ht in _e)C(_e,ht)&&($[ht.toLowerCase()]=_e[ht]);$.rd=1,(_e=!!$.ri)&&delete $.ri,ht=[],be(rt,at,$,ht,0,_e,void 0),ce(rt,ht)}else pc("gapi."+rt+".render: missing element "+typeof $=="string"?$:"")};A(F,"platform",{}).go=Zd,$d=function($){for(var _e=["_c","jsl","h"],rt=0;rt<_e.length&&$;rt++)$=$[_e[rt]];return _e=qb(La.href),!$||$.indexOf("n;")!=0&&_e.indexOf("n;")!=0&&$!==_e},ce=function($,_e){ie($,_e)};var lb=function($){Yd($,!0)},je=function($,_e){_e=_e||[];for(var rt=0;rt<_e.length;++rt)$(_e[rt]);for($=0;$<_e.length;$++)de(_e[$])};N.push(["platform",function($,_e,rt){if(Vd=rt,_e&&Ud.push(_e),je(ee,$),je(fe,rt._c.annotation),je(ge,rt._c.bimodal),ic(),gc(),Q("parsetags")!="explicit"){if(rb($),nc(mc())&&!Q("disableRealtimeCallback")&&rc(),rt&&($=rt.callback)){var at=Ya($);delete rt.callback}nb(function(){lb(at)})}}]),F._pl=!0;var ke=function($){if($=($=R[$])?$.oid:void 0,$){var _e=z.getElementById($);_e&&_e.parentNode.removeChild(_e),delete R[$],ke($)}},le=/^\{h:'/,me=/^!_/,ne="",ie=function($,_e){function rt(){jb("message",at,"remove","de")}function at(pt){var wt=pt.data,st=pt.origin;if(oe(wt,_e)){var Tt=ht;ht=!1,Tt&&L("rqe"),pe($,function(){Tt&&L("rqd"),rt();for(var kt=A(K,"RPMQ",[]),Mt=0;Mt<kt.length;Mt++)kt[Mt]({data:wt,origin:st})})}}if(_e.length!==0){ne=H(La.href,"pfname","");var ht=!0;jb("message",at,"add","at"),ac($,rt)}},oe=function($,_e){if($=String($),le.test($))return!0;var rt=!1;if(me.test($)&&(rt=!0,$=$.substr(2)),!/^\{/.test($))return!1;var at=Zc($);if(!at)return!1;if($=at.f,at.s&&$&&Oa.call(_e,$)!=-1){if((at.s==="_renderstart"||at.s===ne+"/"+$+"::_renderstart")&&(at=at.a&&at.a[rt?0:1],_e=z.getElementById($),tc($,2),at&&_e&&at.width&&at.height)){e:{if(rt=_e.parentNode,$=at||{},qc()){var ht=_e.id;if(ht){if(at=(at=R[ht])?at.state:void 0,at===1||at===4)break e;ke(ht)}}(at=rt.nextSibling)&&at.getAttribute&&at.getAttribute("data-gapistub")&&(rt.parentNode.removeChild(at),rt.style.cssText=""),at=$.width;var pt=$.height,wt=rt.style;wt.textIndent="0",wt.margin="0",wt.padding="0",wt.background="transparent",wt.borderStyle="none",wt.cssFloat="none",wt.styleFloat="none",wt.lineHeight="normal",wt.fontSize="1px",wt.verticalAlign="baseline",rt=rt.style,rt.display="inline-block",wt=_e.style,wt.position="static",wt.left="0",wt.top="0",wt.visibility="visible",at&&(rt.width=wt.width=at+"px"),pt&&(rt.height=wt.height=pt+"px"),$.verticalAlign&&(rt.verticalAlign=$.verticalAlign),ht&&tc(ht,3)}_e["data-csi-wdt"]=new Date().getTime()}return!0}return!1},pe=function($,_e){ac($,_e)},qe=function($,_e){this.L=$,$=_e||{},this.fa=Number($.maxAge)||0,this.U=$.domain,this.X=$.path,this.ga=!!$.secure};qe.prototype.read=function(){for(var $=this.L+"=",_e=document.cookie.split(/;\s*/),rt=0;rt<_e.length;++rt){var at=_e[rt];if(at.indexOf($)==0)return at.substr($.length)}},qe.prototype.write=function($,_e){if(!re.test(this.L))throw"Invalid cookie name";if(!se.test($))throw"Invalid cookie value";if($=this.L+"="+$,this.U&&($+=";domain="+this.U),this.X&&($+=";path="+this.X),_e=typeof _e=="number"?_e:this.fa,0<=_e){var rt=new Date;rt.setSeconds(rt.getSeconds()+_e),$+=";expires="+rt.toUTCString()}return this.ga&&($+=";secure"),document.cookie=$,!0},qe.prototype.clear=function(){this.write("",0)};var se=/^[-+/_=.:|%&a-zA-Z0-9@]*$/,re=/^[A-Z_][A-Z0-9_]{0,63}$/;qe.iterate=function($){for(var _e=document.cookie.split(/;\s*/),rt=0;rt<_e.length;++rt){var at=_e[rt].split("="),ht=at.shift();$(ht,at.join("="))}};var te=function($){this.B=$};te.prototype.read=function(){if(Y.hasOwnProperty(this.B))return Y[this.B]},te.prototype.write=function($){return Y[this.B]=$,!0},te.prototype.clear=function(){delete Y[this.B]};var Y={};te.iterate=function($){for(var _e in Y)Y.hasOwnProperty(_e)&&$(_e,Y[_e])};var ue=window.location.protocol==="https:",ve=ue||window.location.protocol==="http:"?qe:te,we=function($){var _e=$.substr(1),rt="",at=window.location.hostname;if(_e!==""){if(rt=parseInt(_e,10),isNaN(rt)||(_e=at.split("."),_e.length<rt-1))return null;_e.length==rt-1&&(at="."+at)}else at="";return{i:$.charAt(0)=="S",domain:at,l:rt}},xe=function(){var $,_e=null;return ve.iterate(function(rt,at){rt.indexOf("G_AUTHUSER_")===0&&(rt=we(rt.substring(11)),!$||rt.i&&!$.i||rt.i==$.i&&rt.l>$.l)&&($=rt,_e=at)}),{ea:$,F:_e}},ye=function($){if($.indexOf("GCSC")!==0)return null;var _e={W:!1};if($=$.substr(4),!$)return _e;var rt=$.charAt(0);$=$.substr(1);var at=$.lastIndexOf("_");if(at==-1)return _e;var ht=we($.substr(at+1));return ht==null||($=$.substring(0,at),$.charAt(0)!=="_")?_e:(at=rt==="E"&&ht.i,!at&&(rt!=="U"||ht.i)||at&&!ue?_e:{W:!0,i:at,ja:$.substr(1),domain:ht.domain,l:ht.l})},ze=function($){return $?($=$.split("="),$[1]?$[1].split("|"):[]):[]},Ae=function($){return $=$.split(":"),{clientId:$[0].split("=")[1],ia:ze($[1]),la:ze($[2]),ka:ze($[3])}},Be=function(){var $=xe(),_e=$.ea;if($=$.F,$!==null){var rt;if(ve.iterate(function(pt,wt){(pt=ye(pt))&&pt.W&&pt.i==_e.i&&pt.l==_e.l&&(rt=wt)}),rt){var at=Ae(rt),ht=at&&at.ia[Number($)];if(at=at&&at.clientId,ht)return{F:$,ha:ht,clientId:at}}}return null},Z=function(){this.T=Ce};Z.prototype.$=function(){this.K||(this.v=0,this.K=!0,this.Y())},Z.prototype.Y=function(){this.K&&(this.T()?this.v=this.R:this.v=Math.min(2*(this.v||this.R),120),window.setTimeout(na(this.Y,this),1e3*this.v))},Z.prototype.v=0,Z.prototype.R=2,Z.prototype.T=null,Z.prototype.K=!1;var Ee=null;qc=function(){return K.oa=!0},rc=function(){K.oa=!0;var $=Be();($=$&&$.F)&&hc("googleapis.config/sessionIndex",$),Ee||(Ee=A(K,"ss",new Z)),$=Ee,$.$&&$.$()};var Ce=function(){var $=Be(),_e=$&&$.ha||null,rt=$&&$.clientId;return ac("auth",{callback:function(){var at=x.gapi.auth,ht={client_id:rt,session_state:_e};at.checkSessionState(ht,function(pt){var wt=ht.session_state,st=Q("isLoggedIn");pt=Q("debug/forceIm")?!1:wt&&pt||!wt&&!pt,(st=st!=pt)&&(hc("isLoggedIn",pt),rc(),Rd(),pt||((pt=at.signOut)?pt():(pt=at.setToken)&&pt(null))),pt=mc();var Tt=Q("savedUserState");wt=at._guss(pt.cookiepolicy),Tt=Tt!=wt&&typeof Tt<"u",hc("savedUserState",wt),(st||Tt)&&nc(pt)&&!Q("disableRealtimeCallback")&&at._pimf(pt,!0)})}}),!0};L("bs0",!0,window.gapi._bs),L("bs1",!0),delete window.gapi._bs}).call(globalThis);gapi.load("",{callback:window.gapi_onload,_c:{jsl:{ci:{deviceType:"desktop","oauth-flow":{authUrl:"https://accounts.google.com/o/oauth2/auth",proxyUrl:"https://accounts.google.com/o/oauth2/postmessageRelay",disableOpt:!0,idpIframeUrl:"https://accounts.google.com/o/oauth2/iframe",usegapi:!1},debug:{reportExceptionRate:.05,forceIm:!1,rethrowException:!1,host:"https://apis.google.com"},enableMultilogin:!0,"googleapis.config":{auth:{useFirstPartyAuthV2:!0}},isPlusUser:!1,inline:{css:1},disableRealtimeCallback:!1,drive_share:{skipInitCommand:!0},csi:{rate:.01},client:{cors:!1},isLoggedIn:!0,signInDeprecation:{rate:0},include_granted_scopes:!0,llang:"pt",iframes:{youtube:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/youtube?usegapi=1",methods:["scroll","openwindow"]},ytsubscribe:{url:"https://www.youtube.com/subscribe_embed?usegapi=1"},plus_circle:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/plus/circle?usegapi=1"},plus_share:{params:{url:""},url:":socialhost:/:session_prefix::se:_/+1/sharebutton?plusShare=true&usegapi=1"},rbr_s:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/render/recobarsimplescroller"},":source:":"3p",playemm:{url:"https://play.google.com/work/embedded/search?usegapi=1&usegapi=1"},savetoandroidpay:{url:"https://pay.google.com/gp/v/widget/save"},blogger:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/blogger?usegapi=1",methods:["scroll","openwindow"]},evwidget:{params:{url:""},url:":socialhost:/:session_prefix:_/events/widget?usegapi=1"},partnersbadge:{url:"https://www.gstatic.com/partners/badge/templates/badge.html?usegapi=1"},dataconnector:{url:"https://dataconnector.corp.google.com/:session_prefix:ui/widgetview?usegapi=1"},surveyoptin:{url:"https://www.google.com/shopping/customerreviews/optin?usegapi=1"},":socialhost:":"https://apis.google.com",shortlists:{url:""},hangout:{url:"https://talkgadget.google.com/:session_prefix:talkgadget/_/widget"},plus_followers:{params:{url:""},url:":socialhost:/_/im/_/widget/render/plus/followers?usegapi=1"},post:{params:{url:""},url:":socialhost:/:session_prefix::im_prefix:_/widget/render/post?usegapi=1"},":gplus_url:":"https://plus.google.com",signin:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/signin?usegapi=1",methods:["onauth"]},rbr_i:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/render/recobarinvitation"},share:{url:":socialhost:/:session_prefix::im_prefix:_/widget/render/share?usegapi=1"},plusone:{params:{count:"",size:"",url:""},url:":socialhost:/:session_prefix::se:_/+1/fastbutton?usegapi=1"},comments:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/comments?usegapi=1",methods:["scroll","openwindow"]},":im_socialhost:":"https://plus.googleapis.com",backdrop:{url:"https://clients3.google.com/cast/chromecast/home/widget/backdrop?usegapi=1"},visibility:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/visibility?usegapi=1"},autocomplete:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/autocomplete"},additnow:{url:"https://apis.google.com/marketplace/button?usegapi=1",methods:["launchurl"]},":signuphost:":"https://plus.google.com",ratingbadge:{url:"https://www.google.com/shopping/customerreviews/badge?usegapi=1"},appcirclepicker:{url:":socialhost:/:session_prefix:_/widget/render/appcirclepicker"},follow:{url:":socialhost:/:session_prefix:_/widget/render/follow?usegapi=1"},community:{url:":ctx_socialhost:/:session_prefix::im_prefix:_/widget/render/community?usegapi=1"},sharetoclassroom:{url:"https://classroom.google.com/sharewidget?usegapi=1"},ytshare:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/ytshare?usegapi=1"},plus:{url:":socialhost:/:session_prefix:_/widget/render/badge?usegapi=1"},family_creation:{params:{url:""},url:"https://families.google.com/webcreation?usegapi=1&usegapi=1"},commentcount:{url:":socialhost:/:session_prefix:_/widget/render/commentcount?usegapi=1"},configurator:{url:":socialhost:/:session_prefix:_/plusbuttonconfigurator?usegapi=1"},zoomableimage:{url:"https://ssl.gstatic.com/microscope/embed/"},appfinder:{url:"https://workspace.google.com/:session_prefix:marketplace/appfinder?usegapi=1"},savetowallet:{url:"https://pay.google.com/gp/v/widget/save"},person:{url:":socialhost:/:session_prefix:_/widget/render/person?usegapi=1"},savetodrive:{url:"https://drive.google.com/savetodrivebutton?usegapi=1",methods:["save"]},page:{url:":socialhost:/:session_prefix:_/widget/render/page?usegapi=1"},card:{url:":socialhost:/:session_prefix:_/hovercard/card"}}},h:"m;/_/scs/apps-static/_/js/k=oz.gapi.pt_BR.l4Bv_WkVC6g.O/am=wQE/d=1/ct=zgms/rs=AGLTcCOuH5S2uqmF6E8zOW7n3yiqiwhzNQ/m=__features__",u:"https://apis.google.com/js/platform.js",hee:!0,fp:"821a251b140e4add32f87f4a7a08f044a59aa0e9",dpo:!1},platform:["additnow","backdrop","blogger","comments","commentcount","community","donation","family_creation","follow","hangout","health","page","partnersbadge","person","playemm","playreview","plus","plusone","post","ratingbadge","savetoandroidpay","savetodrive","savetowallet","sharetoclassroom","shortlists","signin2","surveyoptin","visibility","youtube","ytsubscribe","zoomableimage"],fp:"821a251b140e4add32f87f4a7a08f044a59aa0e9",annotation:["interactivepost","recobar","signin2","autocomplete","profile"],bimodal:["signin","share"]}});const isLoggedinSlice=createSlice({name:"showIsLoggedin",initialState:{value:!1,userId:"",username:""},reducers:{setShowIsLoggedin:($,_e)=>{$.value=_e.payload.showIsLoggedin},setUserId:($,_e)=>{$.userId=_e.payload.userId},setUsername:($,_e)=>{$.username=_e.payload.username},removeUserData:($,_e)=>{$.value=!1,$.userId=null,$.username=null}}}),{setShowIsLoggedin,setUserId,setUsername,removeUserData}=isLoggedinSlice.actions,LoggedinReducer=isLoggedinSlice.reducer,isGoogleLoggedinSlice=createSlice({name:"showIsGoogleLoggedin",initialState:{value:!1},reducers:{setShowIsGoogleLoggedin:($,_e)=>{$.value=_e.payload.showIsGoogleLoggedin}}}),{setShowIsGoogleLoggedin}=isGoogleLoggedinSlice.actions,GoogleLoggedinReducer=isGoogleLoggedinSlice.reducer,clientId$3="326905070026-tf2q1rkmteq5ft6ssg0155k7s3m8l5uf.apps.googleusercontent.com";function UserGoogleSignin(){const $=useDispatch(),_e=useSelector(wt=>wt.showIsLoggedin.value),rt=useSelector(wt=>wt.showIsGoogleLoggedin.value),at=wt=>{console.log("Login Success! Current user:",wt.profileObj),console.log("normal",_e,"google",rt),pt()},ht=wt=>{console.log("Login Failed! res:",wt)},pt=()=>{var wt=gapi.auth.getToken().access_token;console.log(wt),localStorage.setItem("accessToken",wt),$(setShowIsLoggedin({showIsLoggedin:!0})),$(setShowIsGoogleLoggedin({showIsGoogleLoggedin:!0})),console.log("normal",_e,"google",rt)};return jsxRuntimeExports.jsx("div",{id:"googleSignInButton",children:jsxRuntimeExports.jsx(googleLoginExports.GoogleLogin,{clientId:clientId$3,buttonText:"Continue with Google",onSuccess:at,onFailure:ht,cookiePolicy:"single_host_origin",isSignedIn:!0,className:"googlebutton"})})}const clientId$2="326905070026-tf2q1rkmteq5ft6ssg0155k7s3m8l5uf.apps.googleusercontent.com";function UserSideLogin(){const $=useDispatch(),_e=useSelector(Ut=>Ut.showSigninModal.value),rt=useSelector(Ut=>Ut.showSignupModal.value);useSelector(Ut=>Ut.showIsLoggedin.value);const[at,ht]=reactExports.useState(""),[pt,wt]=reactExports.useState(""),[st,Tt]=reactExports.useState(""),kt=()=>{$(setShowSigninModal({showSigninModal:!_e}))},Mt=Ut=>{Ut.preventDefault(),$(setShowSigninModal({showSigninModal:!1})),$(setShowSignupModal({showSignupModal:!0}))},Dt=async()=>{Tt("");try{const Ut=await fetch("http://127.0.0.1:8000/api/auth/login/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:at,password:pt})});if(Ut.ok){console.log(Ut);const qt=await Ut.json(),tr=qt.access;localStorage.setItem("accessToken",tr),$(setShowIsLoggedin({showIsLoggedin:!0})),$(setUserId({userId:qt.user.user_id})),$(setUsername({username:qt.user.username})),kt()}else Tt("Login failed. Please check your credentials")}catch{Tt("An error occured while tring to login")}console.log("signin:",rt,_e)};reactExports.useEffect(()=>{function Ut(){gapi.client.init({clientId:clientId$2,scope:""})}gapi.load("client:auth2",Ut)});const Ot=()=>{var Ut=gapi.auth.getToken().access_token;localStorage.setItem("accessToken",Ut),console.log(1,Ut)};return useHistory(),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Zt,{staticBackdrop:!0,tabIndex:"-1",show:_e,onHide:kt,children:jsxRuntimeExports.jsx(zt,{children:jsxRuntimeExports.jsx(Ht,{style:{backgroundImage:`url(${auth_bg})`,backgroundSize:"cover"},children:jsxRuntimeExports.jsxs("div",{style:{backdropFilter:"blur(2.5px)"},children:[jsxRuntimeExports.jsxs(es,{children:[jsxRuntimeExports.jsx(ts,{className:"h2 text-white",children:"Login"}),jsxRuntimeExports.jsx(ue,{className:"btn-close",color:"white",onClick:kt})]}),jsxRuntimeExports.jsx(ss,{children:jsxRuntimeExports.jsx(nt,{fluid:!0,className:"d-flex align-items-center justify-content-center",children:jsxRuntimeExports.jsxs(lt,{className:"m-5",style:{maxWidth:"450px",background:"none",border:"none"},children:[jsxRuntimeExports.jsxs(mt,{className:"px-1",children:[jsxRuntimeExports.jsx(_t,{placeholder:"Email",value:at,onChange:Ut=>ht(Ut.target.value),wrapperClass:"mb-4",size:"sm",id:"login-form1",type:"email"}),jsxRuntimeExports.jsx(_t,{placeholder:"Password",value:pt,onChange:Ut=>wt(Ut.target.value),wrapperClass:"mb-4",size:"sm",id:"login-form2",type:"password"}),st&&jsxRuntimeExports.jsx("div",{className:"text-danger",children:st}),jsxRuntimeExports.jsx("button",{className:"mb-4 h-7 rounded-md w-100 gradient-custom-4 bg-blue-200",onClick:Dt,size:"sm",children:"Login"}),jsxRuntimeExports.jsx(UserGoogleSignin,{onClick:Ot})]}),jsxRuntimeExports.jsx("p",{className:"text-white cursor-pointer",onClick:Mt,children:"Don't have an account? Sign up here."})]})})})]})})})})})}const clientId$1="326905070026-tf2q1rkmteq5ft6ssg0155k7s3m8l5uf.apps.googleusercontent.com";function UserGoogleSignout(){const $=useDispatch(),_e=useSelector(ht=>ht.showIsGoogleLoggedin.value),rt=useSelector(ht=>ht.showIsLoggedin.value),at=()=>{console.log("Log out successfull!"),localStorage.removeItem("accessToken"),$(setShowIsGoogleLoggedin({showIsGoogleLoggedin:!1})),$(setShowIsLoggedin({showIsLoggedin:!1})),console.log("normal",rt,"google",_e),window.location.href="/"};return jsxRuntimeExports.jsx("div",{id:"googleSignInButton",children:jsxRuntimeExports.jsx(googleLoginExports.GoogleLogout,{clientId:clientId$1,buttonText:"Logout",onLogoutSuccess:at,className:"googlebutton"})})}const clientId="326905070026-tf2q1rkmteq5ft6ssg0155k7s3m8l5uf.apps.googleusercontent.com";function UserSideSignup(){const $=useDispatch(),_e=useSelector(Yt=>Yt.showSignupModal.value),rt=useSelector(Yt=>Yt.showSigninModal.value),[at,ht]=reactExports.useState(null),[pt,wt]=reactExports.useState(null);let[st,Tt]=reactExports.useState(null);const[kt,Mt]=reactExports.useState(null),[Dt,Ot]=reactExports.useState(null),Ut=()=>{$(setShowSignupModal({showSignupModal:!_e}))},qt=async Yt=>{Yt.preventDefault(),st="+91"+st;const Kt={username:at,email:pt,phone_number:st,password:kt};if(console.log(Kt),kt!==Dt)return alert("enter a valid password");try{const Jt=await fetch("http://127.0.0.1:8000/api/auth/register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Kt)});if(Jt.ok)console.log("Sigup successful"),console.log(Jt),$(setShowSignupModal({showSignupModal:!1})),window.location.href="/";else{const pr=await Jt.text();alert("Signup failed",pr),console.error("Signup failed",pr)}}catch(Jt){alert("error in creating user",Jt),console.error("An error occured:",Jt.response)}},tr=()=>{$(setShowSignupModal({showSignupModal:!1})),$(setShowSigninModal({showSigninModal:!0})),console.log("signup:",_e,rt)};reactExports.useEffect(()=>{function Yt(){gapi.client.init({clientId,scope:""})}gapi.load("client:auth2",Yt)});const ar=()=>{var Yt=gapi.auth.getToken().access_token;console.log(Yt),localStorage.setItem("accessToken",Yt)};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Zt,{staticBackdrop:!0,tabIndex:"-1",show:_e,onHide:Ut,children:jsxRuntimeExports.jsx(zt,{children:jsxRuntimeExports.jsx(Ht,{style:{backgroundImage:`url(${auth_bg})`,backgroundSize:"cover"},children:jsxRuntimeExports.jsxs("div",{style:{backdropFilter:"blur(2.5px)"},children:[jsxRuntimeExports.jsxs(es,{children:[jsxRuntimeExports.jsx(ts,{className:"h2 text-white",children:"Signup"}),jsxRuntimeExports.jsx(ue,{className:"btn-close",color:"white",onClick:Ut})]}),jsxRuntimeExports.jsx(ss,{children:jsxRuntimeExports.jsx(nt,{fluid:!0,className:"d-flex align-items-center justify-content-center",children:jsxRuntimeExports.jsxs(lt,{className:"m-5",style:{maxWidth:"450px",background:"none",border:"none"},children:[jsxRuntimeExports.jsxs(mt,{className:"px-1",children:[jsxRuntimeExports.jsx(_t,{placeholder:"username",value:at,onChange:Yt=>ht(Yt.target.value),wrapperClass:"mb-4",size:"sm",id:"form1",type:"text"}),jsxRuntimeExports.jsx(_t,{placeholder:"email",value:pt,onChange:Yt=>wt(Yt.target.value),wrapperClass:"mb-4",size:"sm",id:"form2",type:"email"}),jsxRuntimeExports.jsx(_t,{placeholder:"phone number",value:st,onChange:Yt=>Tt(Yt.target.value),wrapperClass:"mb-4",size:"sm",id:"form3",type:"email"}),jsxRuntimeExports.jsx(_t,{placeholder:"password",value:kt,onChange:Yt=>Mt(Yt.target.value),wrapperClass:"mb-4",size:"sm",id:"form4",type:"password"}),jsxRuntimeExports.jsx(_t,{placeholder:"confirm password",value:Dt,onChange:Yt=>Ot(Yt.target.value),wrapperClass:"mb-4",size:"sm",id:"form5",type:"password"}),jsxRuntimeExports.jsx("button",{className:"mb-4 h-7 rounded-md w-100 gradient-custom-4 bg-blue-200",onClick:qt,size:"sm",children:"Register"}),jsxRuntimeExports.jsx(UserGoogleSignin,{onClick:ar})]}),jsxRuntimeExports.jsx("p",{className:"text-white cursor-pointer",onClick:tr,children:"Already user?"}),rt&&jsxRuntimeExports.jsx(UserSideLogin,{})]})})})]})})})})})}const initialState$3={transactionType:"",address:"",unit:"",city:"",state:"",pincode:null,coordinates:{lat:0,lng:0}},propertyAddressSlice=createSlice({name:"showPropertyAddress",initialState:initialState$3,reducers:{addAddress:($,_e)=>({...$,..._e.payload,coordinates:{lng:_e.payload.lng,lat:_e.payload.lat}}),resetPropertyAddress:$=>initialState$3,removePropertyElement:($,_e)=>{const{[_e.payload]:rt,...at}=$;return at}}}),{addAddress,resetPropertyAddress,removePropertyElement}=propertyAddressSlice.actions,propertyAddressReducer=propertyAddressSlice.reducer,initialState$2=null,propertiesListSlice=createSlice({name:"showPropertiesList",initialState:initialState$2,reducers:{addPropertiesList:($,_e)=>({...$,..._e.payload,properties:_e.payload.propertiesList})}}),{addPropertiesList}=propertiesListSlice.actions,propertiesListReducer=propertiesListSlice.reducer;function bind($,_e){return function(){return $.apply(_e,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=($=>_e=>{const rt=toString.call(_e);return $[rt]||($[rt]=rt.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=$=>($=$.toLowerCase(),_e=>kindOf(_e)===$),typeOfTest=$=>_e=>typeof _e===$,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer($){return $!==null&&!isUndefined($)&&$.constructor!==null&&!isUndefined($.constructor)&&isFunction($.constructor.isBuffer)&&$.constructor.isBuffer($)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView($){let _e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?_e=ArrayBuffer.isView($):_e=$&&$.buffer&&isArrayBuffer($.buffer),_e}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=$=>$!==null&&typeof $=="object",isBoolean=$=>$===!0||$===!1,isPlainObject=$=>{if(kindOf($)!=="object")return!1;const _e=getPrototypeOf($);return(_e===null||_e===Object.prototype||Object.getPrototypeOf(_e)===null)&&!(Symbol.toStringTag in $)&&!(Symbol.iterator in $)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=$=>isObject($)&&isFunction($.pipe),isFormData=$=>{let _e;return $&&(typeof FormData=="function"&&$ instanceof FormData||isFunction($.append)&&((_e=kindOf($))==="formdata"||_e==="object"&&isFunction($.toString)&&$.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim=$=>$.trim?$.trim():$.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach$1($,_e,{allOwnKeys:rt=!1}={}){if($===null||typeof $>"u")return;let at,ht;if(typeof $!="object"&&($=[$]),isArray($))for(at=0,ht=$.length;at<ht;at++)_e.call(null,$[at],at,$);else{const pt=rt?Object.getOwnPropertyNames($):Object.keys($),wt=pt.length;let st;for(at=0;at<wt;at++)st=pt[at],_e.call(null,$[st],st,$)}}function findKey($,_e){_e=_e.toLowerCase();const rt=Object.keys($);let at=rt.length,ht;for(;at-- >0;)if(ht=rt[at],_e===ht.toLowerCase())return ht;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=$=>!isUndefined($)&&$!==_global;function merge(){const{caseless:$}=isContextDefined(this)&&this||{},_e={},rt=(at,ht)=>{const pt=$&&findKey(_e,ht)||ht;isPlainObject(_e[pt])&&isPlainObject(at)?_e[pt]=merge(_e[pt],at):isPlainObject(at)?_e[pt]=merge({},at):isArray(at)?_e[pt]=at.slice():_e[pt]=at};for(let at=0,ht=arguments.length;at<ht;at++)arguments[at]&&forEach$1(arguments[at],rt);return _e}const extend=($,_e,rt,{allOwnKeys:at}={})=>(forEach$1(_e,(ht,pt)=>{rt&&isFunction(ht)?$[pt]=bind(ht,rt):$[pt]=ht},{allOwnKeys:at}),$),stripBOM=$=>($.charCodeAt(0)===65279&&($=$.slice(1)),$),inherits=($,_e,rt,at)=>{$.prototype=Object.create(_e.prototype,at),$.prototype.constructor=$,Object.defineProperty($,"super",{value:_e.prototype}),rt&&Object.assign($.prototype,rt)},toFlatObject=($,_e,rt,at)=>{let ht,pt,wt;const st={};if(_e=_e||{},$==null)return _e;do{for(ht=Object.getOwnPropertyNames($),pt=ht.length;pt-- >0;)wt=ht[pt],(!at||at(wt,$,_e))&&!st[wt]&&(_e[wt]=$[wt],st[wt]=!0);$=rt!==!1&&getPrototypeOf($)}while($&&(!rt||rt($,_e))&&$!==Object.prototype);return _e},endsWith=($,_e,rt)=>{$=String($),(rt===void 0||rt>$.length)&&(rt=$.length),rt-=_e.length;const at=$.indexOf(_e,rt);return at!==-1&&at===rt},toArray=$=>{if(!$)return null;if(isArray($))return $;let _e=$.length;if(!isNumber(_e))return null;const rt=new Array(_e);for(;_e-- >0;)rt[_e]=$[_e];return rt},isTypedArray=($=>_e=>$&&_e instanceof $)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=($,_e)=>{const at=($&&$[Symbol.iterator]).call($);let ht;for(;(ht=at.next())&&!ht.done;){const pt=ht.value;_e.call($,pt[0],pt[1])}},matchAll=($,_e)=>{let rt;const at=[];for(;(rt=$.exec(_e))!==null;)at.push(rt);return at},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=$=>$.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(rt,at,ht){return at.toUpperCase()+ht}),hasOwnProperty=(({hasOwnProperty:$})=>(_e,rt)=>$.call(_e,rt))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=($,_e)=>{const rt=Object.getOwnPropertyDescriptors($),at={};forEach$1(rt,(ht,pt)=>{let wt;(wt=_e(ht,pt,$))!==!1&&(at[pt]=wt||ht)}),Object.defineProperties($,at)},freezeMethods=$=>{reduceDescriptors($,(_e,rt)=>{if(isFunction($)&&["arguments","caller","callee"].indexOf(rt)!==-1)return!1;const at=$[rt];if(isFunction(at)){if(_e.enumerable=!1,"writable"in _e){_e.writable=!1;return}_e.set||(_e.set=()=>{throw Error("Can not rewrite read-only method '"+rt+"'")})}})},toObjectSet=($,_e)=>{const rt={},at=ht=>{ht.forEach(pt=>{rt[pt]=!0})};return isArray($)?at($):at(String($).split(_e)),rt},noop$2=()=>{},toFiniteNumber=($,_e)=>($=+$,Number.isFinite($)?$:_e),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=($=16,_e=ALPHABET.ALPHA_DIGIT)=>{let rt="";const{length:at}=_e;for(;$--;)rt+=_e[Math.random()*at|0];return rt};function isSpecCompliantForm($){return!!($&&isFunction($.append)&&$[Symbol.toStringTag]==="FormData"&&$[Symbol.iterator])}const toJSONObject=$=>{const _e=new Array(10),rt=(at,ht)=>{if(isObject(at)){if(_e.indexOf(at)>=0)return;if(!("toJSON"in at)){_e[ht]=at;const pt=isArray(at)?[]:{};return forEach$1(at,(wt,st)=>{const Tt=rt(wt,ht+1);!isUndefined(Tt)&&(pt[st]=Tt)}),_e[ht]=void 0,pt}}return at};return rt($,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=$=>$&&(isObject($)||isFunction($))&&isFunction($.then)&&isFunction($.catch),utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach:forEach$1,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$2,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError($,_e,rt,at,ht){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=$,this.name="AxiosError",_e&&(this.code=_e),rt&&(this.config=rt),at&&(this.request=at),ht&&(this.response=ht)}utils$1.inherits(AxiosError,Error,{toJSON:function $(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach($=>{descriptors[$]={value:$}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=($,_e,rt,at,ht,pt)=>{const wt=Object.create(prototype$1);return utils$1.toFlatObject($,wt,function(Tt){return Tt!==Error.prototype},st=>st!=="isAxiosError"),AxiosError.call(wt,$.message,_e,rt,at,ht),wt.cause=$,wt.name=$.name,pt&&Object.assign(wt,pt),wt};const httpAdapter=null;function isVisitable($){return utils$1.isPlainObject($)||utils$1.isArray($)}function removeBrackets($){return utils$1.endsWith($,"[]")?$.slice(0,-2):$}function renderKey($,_e,rt){return $?$.concat(_e).map(function(ht,pt){return ht=removeBrackets(ht),!rt&&pt?"["+ht+"]":ht}).join(rt?".":""):_e}function isFlatArray($){return utils$1.isArray($)&&!$.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function $(_e){return/^is[A-Z]/.test(_e)});function toFormData($,_e,rt){if(!utils$1.isObject($))throw new TypeError("target must be an object");_e=_e||new FormData,rt=utils$1.toFlatObject(rt,{metaTokens:!0,dots:!1,indexes:!1},!1,function(tr,ar){return!utils$1.isUndefined(ar[tr])});const at=rt.metaTokens,ht=rt.visitor||Mt,pt=rt.dots,wt=rt.indexes,Tt=(rt.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(_e);if(!utils$1.isFunction(ht))throw new TypeError("visitor must be a function");function kt(qt){if(qt===null)return"";if(utils$1.isDate(qt))return qt.toISOString();if(!Tt&&utils$1.isBlob(qt))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(qt)||utils$1.isTypedArray(qt)?Tt&&typeof Blob=="function"?new Blob([qt]):Buffer.from(qt):qt}function Mt(qt,tr,ar){let Yt=qt;if(qt&&!ar&&typeof qt=="object"){if(utils$1.endsWith(tr,"{}"))tr=at?tr:tr.slice(0,-2),qt=JSON.stringify(qt);else if(utils$1.isArray(qt)&&isFlatArray(qt)||(utils$1.isFileList(qt)||utils$1.endsWith(tr,"[]"))&&(Yt=utils$1.toArray(qt)))return tr=removeBrackets(tr),Yt.forEach(function(Jt,pr){!(utils$1.isUndefined(Jt)||Jt===null)&&_e.append(wt===!0?renderKey([tr],pr,pt):wt===null?tr:tr+"[]",kt(Jt))}),!1}return isVisitable(qt)?!0:(_e.append(renderKey(ar,tr,pt),kt(qt)),!1)}const Dt=[],Ot=Object.assign(predicates,{defaultVisitor:Mt,convertValue:kt,isVisitable});function Ut(qt,tr){if(!utils$1.isUndefined(qt)){if(Dt.indexOf(qt)!==-1)throw Error("Circular reference detected in "+tr.join("."));Dt.push(qt),utils$1.forEach(qt,function(Yt,Kt){(!(utils$1.isUndefined(Yt)||Yt===null)&&ht.call(_e,Yt,utils$1.isString(Kt)?Kt.trim():Kt,tr,Ot))===!0&&Ut(Yt,tr?tr.concat(Kt):[Kt])}),Dt.pop()}}if(!utils$1.isObject($))throw new TypeError("data must be an object");return Ut($),_e}function encode$1($){const _e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent($).replace(/[!'()~]|%20|%00/g,function(at){return _e[at]})}function AxiosURLSearchParams($,_e){this._pairs=[],$&&toFormData($,this,_e)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function $(_e,rt){this._pairs.push([_e,rt])};prototype.toString=function $(_e){const rt=_e?function(at){return _e.call(this,at,encode$1)}:encode$1;return this._pairs.map(function(ht){return rt(ht[0])+"="+rt(ht[1])},"").join("&")};function encode($){return encodeURIComponent($).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL($,_e,rt){if(!_e)return $;const at=rt&&rt.encode||encode,ht=rt&&rt.serialize;let pt;if(ht?pt=ht(_e,rt):pt=utils$1.isURLSearchParams(_e)?_e.toString():new AxiosURLSearchParams(_e,rt).toString(at),pt){const wt=$.indexOf("#");wt!==-1&&($=$.slice(0,wt)),$+=($.indexOf("?")===-1?"?":"&")+pt}return $}class InterceptorManager{constructor(){this.handlers=[]}use(_e,rt,at){return this.handlers.push({fulfilled:_e,rejected:rt,synchronous:at?at.synchronous:!1,runWhen:at?at.runWhen:null}),this.handlers.length-1}eject(_e){this.handlers[_e]&&(this.handlers[_e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(_e){utils$1.forEach(this.handlers,function(at){at!==null&&_e(at)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",hasStandardBrowserEnv=($=>hasBrowserEnv&&["ReactNative","NativeScript","NS"].indexOf($)<0)(typeof navigator<"u"&&navigator.product),hasStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm($,_e){return toFormData($,new platform.classes.URLSearchParams,Object.assign({visitor:function(rt,at,ht,pt){return platform.isNode&&utils$1.isBuffer(rt)?(this.append(at,rt.toString("base64")),!1):pt.defaultVisitor.apply(this,arguments)}},_e))}function parsePropPath($){return utils$1.matchAll(/\w+|\[(\w*)]/g,$).map(_e=>_e[0]==="[]"?"":_e[1]||_e[0])}function arrayToObject($){const _e={},rt=Object.keys($);let at;const ht=rt.length;let pt;for(at=0;at<ht;at++)pt=rt[at],_e[pt]=$[pt];return _e}function formDataToJSON($){function _e(rt,at,ht,pt){let wt=rt[pt++];const st=Number.isFinite(+wt),Tt=pt>=rt.length;return wt=!wt&&utils$1.isArray(ht)?ht.length:wt,Tt?(utils$1.hasOwnProp(ht,wt)?ht[wt]=[ht[wt],at]:ht[wt]=at,!st):((!ht[wt]||!utils$1.isObject(ht[wt]))&&(ht[wt]=[]),_e(rt,at,ht[wt],pt)&&utils$1.isArray(ht[wt])&&(ht[wt]=arrayToObject(ht[wt])),!st)}if(utils$1.isFormData($)&&utils$1.isFunction($.entries)){const rt={};return utils$1.forEachEntry($,(at,ht)=>{_e(parsePropPath(at),ht,rt,0)}),rt}return null}function stringifySafely($,_e,rt){if(utils$1.isString($))try{return(_e||JSON.parse)($),utils$1.trim($)}catch(at){if(at.name!=="SyntaxError")throw at}return(rt||JSON.stringify)($)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function $(_e,rt){const at=rt.getContentType()||"",ht=at.indexOf("application/json")>-1,pt=utils$1.isObject(_e);if(pt&&utils$1.isHTMLForm(_e)&&(_e=new FormData(_e)),utils$1.isFormData(_e))return ht&&ht?JSON.stringify(formDataToJSON(_e)):_e;if(utils$1.isArrayBuffer(_e)||utils$1.isBuffer(_e)||utils$1.isStream(_e)||utils$1.isFile(_e)||utils$1.isBlob(_e))return _e;if(utils$1.isArrayBufferView(_e))return _e.buffer;if(utils$1.isURLSearchParams(_e))return rt.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),_e.toString();let st;if(pt){if(at.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(_e,this.formSerializer).toString();if((st=utils$1.isFileList(_e))||at.indexOf("multipart/form-data")>-1){const Tt=this.env&&this.env.FormData;return toFormData(st?{"files[]":_e}:_e,Tt&&new Tt,this.formSerializer)}}return pt||ht?(rt.setContentType("application/json",!1),stringifySafely(_e)):_e}],transformResponse:[function $(_e){const rt=this.transitional||defaults.transitional,at=rt&&rt.forcedJSONParsing,ht=this.responseType==="json";if(_e&&utils$1.isString(_e)&&(at&&!this.responseType||ht)){const wt=!(rt&&rt.silentJSONParsing)&&ht;try{return JSON.parse(_e)}catch(st){if(wt)throw st.name==="SyntaxError"?AxiosError.from(st,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):st}}return _e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function $(_e){return _e>=200&&_e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],$=>{defaults.headers[$]={}});const defaults$1=defaults,ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=$=>{const _e={};let rt,at,ht;return $&&$.split(`
`).forEach(function(wt){ht=wt.indexOf(":"),rt=wt.substring(0,ht).trim().toLowerCase(),at=wt.substring(ht+1).trim(),!(!rt||_e[rt]&&ignoreDuplicateOf[rt])&&(rt==="set-cookie"?_e[rt]?_e[rt].push(at):_e[rt]=[at]:_e[rt]=_e[rt]?_e[rt]+", "+at:at)}),_e},$internals=Symbol("internals");function normalizeHeader($){return $&&String($).trim().toLowerCase()}function normalizeValue($){return $===!1||$==null?$:utils$1.isArray($)?$.map(normalizeValue):String($)}function parseTokens($){const _e=Object.create(null),rt=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let at;for(;at=rt.exec($);)_e[at[1]]=at[2];return _e}const isValidHeaderName=$=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test($.trim());function matchHeaderValue($,_e,rt,at,ht){if(utils$1.isFunction(at))return at.call(this,_e,rt);if(ht&&(_e=rt),!!utils$1.isString(_e)){if(utils$1.isString(at))return _e.indexOf(at)!==-1;if(utils$1.isRegExp(at))return at.test(_e)}}function formatHeader($){return $.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(_e,rt,at)=>rt.toUpperCase()+at)}function buildAccessors($,_e){const rt=utils$1.toCamelCase(" "+_e);["get","set","has"].forEach(at=>{Object.defineProperty($,at+rt,{value:function(ht,pt,wt){return this[at].call(this,_e,ht,pt,wt)},configurable:!0})})}class AxiosHeaders{constructor(_e){_e&&this.set(_e)}set(_e,rt,at){const ht=this;function pt(st,Tt,kt){const Mt=normalizeHeader(Tt);if(!Mt)throw new Error("header name must be a non-empty string");const Dt=utils$1.findKey(ht,Mt);(!Dt||ht[Dt]===void 0||kt===!0||kt===void 0&&ht[Dt]!==!1)&&(ht[Dt||Tt]=normalizeValue(st))}const wt=(st,Tt)=>utils$1.forEach(st,(kt,Mt)=>pt(kt,Mt,Tt));return utils$1.isPlainObject(_e)||_e instanceof this.constructor?wt(_e,rt):utils$1.isString(_e)&&(_e=_e.trim())&&!isValidHeaderName(_e)?wt(parseHeaders(_e),rt):_e!=null&&pt(rt,_e,at),this}get(_e,rt){if(_e=normalizeHeader(_e),_e){const at=utils$1.findKey(this,_e);if(at){const ht=this[at];if(!rt)return ht;if(rt===!0)return parseTokens(ht);if(utils$1.isFunction(rt))return rt.call(this,ht,at);if(utils$1.isRegExp(rt))return rt.exec(ht);throw new TypeError("parser must be boolean|regexp|function")}}}has(_e,rt){if(_e=normalizeHeader(_e),_e){const at=utils$1.findKey(this,_e);return!!(at&&this[at]!==void 0&&(!rt||matchHeaderValue(this,this[at],at,rt)))}return!1}delete(_e,rt){const at=this;let ht=!1;function pt(wt){if(wt=normalizeHeader(wt),wt){const st=utils$1.findKey(at,wt);st&&(!rt||matchHeaderValue(at,at[st],st,rt))&&(delete at[st],ht=!0)}}return utils$1.isArray(_e)?_e.forEach(pt):pt(_e),ht}clear(_e){const rt=Object.keys(this);let at=rt.length,ht=!1;for(;at--;){const pt=rt[at];(!_e||matchHeaderValue(this,this[pt],pt,_e,!0))&&(delete this[pt],ht=!0)}return ht}normalize(_e){const rt=this,at={};return utils$1.forEach(this,(ht,pt)=>{const wt=utils$1.findKey(at,pt);if(wt){rt[wt]=normalizeValue(ht),delete rt[pt];return}const st=_e?formatHeader(pt):String(pt).trim();st!==pt&&delete rt[pt],rt[st]=normalizeValue(ht),at[st]=!0}),this}concat(..._e){return this.constructor.concat(this,..._e)}toJSON(_e){const rt=Object.create(null);return utils$1.forEach(this,(at,ht)=>{at!=null&&at!==!1&&(rt[ht]=_e&&utils$1.isArray(at)?at.join(", "):at)}),rt}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([_e,rt])=>_e+": "+rt).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(_e){return _e instanceof this?_e:new this(_e)}static concat(_e,...rt){const at=new this(_e);return rt.forEach(ht=>at.set(ht)),at}static accessor(_e){const at=(this[$internals]=this[$internals]={accessors:{}}).accessors,ht=this.prototype;function pt(wt){const st=normalizeHeader(wt);at[st]||(buildAccessors(ht,wt),at[st]=!0)}return utils$1.isArray(_e)?_e.forEach(pt):pt(_e),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:$},_e)=>{let rt=_e[0].toUpperCase()+_e.slice(1);return{get:()=>$,set(at){this[rt]=at}}});utils$1.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData($,_e){const rt=this||defaults$1,at=_e||rt,ht=AxiosHeaders$1.from(at.headers);let pt=at.data;return utils$1.forEach($,function(st){pt=st.call(rt,pt,ht.normalize(),_e?_e.status:void 0)}),ht.normalize(),pt}function isCancel($){return!!($&&$.__CANCEL__)}function CanceledError($,_e,rt){AxiosError.call(this,$??"canceled",AxiosError.ERR_CANCELED,_e,rt),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle($,_e,rt){const at=rt.config.validateStatus;!rt.status||!at||at(rt.status)?$(rt):_e(new AxiosError("Request failed with status code "+rt.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(rt.status/100)-4],rt.config,rt.request,rt))}const cookies=platform.hasStandardBrowserEnv?{write($,_e,rt,at,ht,pt){const wt=[$+"="+encodeURIComponent(_e)];utils$1.isNumber(rt)&&wt.push("expires="+new Date(rt).toGMTString()),utils$1.isString(at)&&wt.push("path="+at),utils$1.isString(ht)&&wt.push("domain="+ht),pt===!0&&wt.push("secure"),document.cookie=wt.join("; ")},read($){const _e=document.cookie.match(new RegExp("(^|;\\s*)("+$+")=([^;]*)"));return _e?decodeURIComponent(_e[3]):null},remove($){this.write($,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL($){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test($)}function combineURLs($,_e){return _e?$.replace(/\/+$/,"")+"/"+_e.replace(/^\/+/,""):$}function buildFullPath($,_e){return $&&!isAbsoluteURL(_e)?combineURLs($,_e):_e}const isURLSameOrigin=platform.hasStandardBrowserEnv?function $(){const _e=/(msie|trident)/i.test(navigator.userAgent),rt=document.createElement("a");let at;function ht(pt){let wt=pt;return _e&&(rt.setAttribute("href",wt),wt=rt.href),rt.setAttribute("href",wt),{href:rt.href,protocol:rt.protocol?rt.protocol.replace(/:$/,""):"",host:rt.host,search:rt.search?rt.search.replace(/^\?/,""):"",hash:rt.hash?rt.hash.replace(/^#/,""):"",hostname:rt.hostname,port:rt.port,pathname:rt.pathname.charAt(0)==="/"?rt.pathname:"/"+rt.pathname}}return at=ht(window.location.href),function(wt){const st=utils$1.isString(wt)?ht(wt):wt;return st.protocol===at.protocol&&st.host===at.host}}():function $(){return function(){return!0}}();function parseProtocol($){const _e=/^([-+\w]{1,25})(:?\/\/|:)/.exec($);return _e&&_e[1]||""}function speedometer($,_e){$=$||10;const rt=new Array($),at=new Array($);let ht=0,pt=0,wt;return _e=_e!==void 0?_e:1e3,function(Tt){const kt=Date.now(),Mt=at[pt];wt||(wt=kt),rt[ht]=Tt,at[ht]=kt;let Dt=pt,Ot=0;for(;Dt!==ht;)Ot+=rt[Dt++],Dt=Dt%$;if(ht=(ht+1)%$,ht===pt&&(pt=(pt+1)%$),kt-wt<_e)return;const Ut=Mt&&kt-Mt;return Ut?Math.round(Ot*1e3/Ut):void 0}}function progressEventReducer($,_e){let rt=0;const at=speedometer(50,250);return ht=>{const pt=ht.loaded,wt=ht.lengthComputable?ht.total:void 0,st=pt-rt,Tt=at(st),kt=pt<=wt;rt=pt;const Mt={loaded:pt,total:wt,progress:wt?pt/wt:void 0,bytes:st,rate:Tt||void 0,estimated:Tt&&wt&&kt?(wt-pt)/Tt:void 0,event:ht};Mt[_e?"download":"upload"]=!0,$(Mt)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function($){return new Promise(function(rt,at){let ht=$.data;const pt=AxiosHeaders$1.from($.headers).normalize();let{responseType:wt,withXSRFToken:st}=$,Tt;function kt(){$.cancelToken&&$.cancelToken.unsubscribe(Tt),$.signal&&$.signal.removeEventListener("abort",Tt)}let Mt;if(utils$1.isFormData(ht)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)pt.setContentType(!1);else if((Mt=pt.getContentType())!==!1){const[tr,...ar]=Mt?Mt.split(";").map(Yt=>Yt.trim()).filter(Boolean):[];pt.setContentType([tr||"multipart/form-data",...ar].join("; "))}}let Dt=new XMLHttpRequest;if($.auth){const tr=$.auth.username||"",ar=$.auth.password?unescape(encodeURIComponent($.auth.password)):"";pt.set("Authorization","Basic "+btoa(tr+":"+ar))}const Ot=buildFullPath($.baseURL,$.url);Dt.open($.method.toUpperCase(),buildURL(Ot,$.params,$.paramsSerializer),!0),Dt.timeout=$.timeout;function Ut(){if(!Dt)return;const tr=AxiosHeaders$1.from("getAllResponseHeaders"in Dt&&Dt.getAllResponseHeaders()),Yt={data:!wt||wt==="text"||wt==="json"?Dt.responseText:Dt.response,status:Dt.status,statusText:Dt.statusText,headers:tr,config:$,request:Dt};settle(function(Jt){rt(Jt),kt()},function(Jt){at(Jt),kt()},Yt),Dt=null}if("onloadend"in Dt?Dt.onloadend=Ut:Dt.onreadystatechange=function(){!Dt||Dt.readyState!==4||Dt.status===0&&!(Dt.responseURL&&Dt.responseURL.indexOf("file:")===0)||setTimeout(Ut)},Dt.onabort=function(){Dt&&(at(new AxiosError("Request aborted",AxiosError.ECONNABORTED,$,Dt)),Dt=null)},Dt.onerror=function(){at(new AxiosError("Network Error",AxiosError.ERR_NETWORK,$,Dt)),Dt=null},Dt.ontimeout=function(){let ar=$.timeout?"timeout of "+$.timeout+"ms exceeded":"timeout exceeded";const Yt=$.transitional||transitionalDefaults;$.timeoutErrorMessage&&(ar=$.timeoutErrorMessage),at(new AxiosError(ar,Yt.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,$,Dt)),Dt=null},platform.hasStandardBrowserEnv&&(st&&utils$1.isFunction(st)&&(st=st($)),st||st!==!1&&isURLSameOrigin(Ot))){const tr=$.xsrfHeaderName&&$.xsrfCookieName&&cookies.read($.xsrfCookieName);tr&&pt.set($.xsrfHeaderName,tr)}ht===void 0&&pt.setContentType(null),"setRequestHeader"in Dt&&utils$1.forEach(pt.toJSON(),function(ar,Yt){Dt.setRequestHeader(Yt,ar)}),utils$1.isUndefined($.withCredentials)||(Dt.withCredentials=!!$.withCredentials),wt&&wt!=="json"&&(Dt.responseType=$.responseType),typeof $.onDownloadProgress=="function"&&Dt.addEventListener("progress",progressEventReducer($.onDownloadProgress,!0)),typeof $.onUploadProgress=="function"&&Dt.upload&&Dt.upload.addEventListener("progress",progressEventReducer($.onUploadProgress)),($.cancelToken||$.signal)&&(Tt=tr=>{Dt&&(at(!tr||tr.type?new CanceledError(null,$,Dt):tr),Dt.abort(),Dt=null)},$.cancelToken&&$.cancelToken.subscribe(Tt),$.signal&&($.signal.aborted?Tt():$.signal.addEventListener("abort",Tt)));const qt=parseProtocol(Ot);if(qt&&platform.protocols.indexOf(qt)===-1){at(new AxiosError("Unsupported protocol "+qt+":",AxiosError.ERR_BAD_REQUEST,$));return}Dt.send(ht||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils$1.forEach(knownAdapters,($,_e)=>{if($){try{Object.defineProperty($,"name",{value:_e})}catch{}Object.defineProperty($,"adapterName",{value:_e})}});const renderReason=$=>`- ${$}`,isResolvedHandle=$=>utils$1.isFunction($)||$===null||$===!1,adapters={getAdapter:$=>{$=utils$1.isArray($)?$:[$];const{length:_e}=$;let rt,at;const ht={};for(let pt=0;pt<_e;pt++){rt=$[pt];let wt;if(at=rt,!isResolvedHandle(rt)&&(at=knownAdapters[(wt=String(rt)).toLowerCase()],at===void 0))throw new AxiosError(`Unknown adapter '${wt}'`);if(at)break;ht[wt||"#"+pt]=at}if(!at){const pt=Object.entries(ht).map(([st,Tt])=>`adapter ${st} `+(Tt===!1?"is not supported by the environment":"is not available in the build"));let wt=_e?pt.length>1?`since :
`+pt.map(renderReason).join(`
`):" "+renderReason(pt[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+wt,"ERR_NOT_SUPPORT")}return at},adapters:knownAdapters};function throwIfCancellationRequested($){if($.cancelToken&&$.cancelToken.throwIfRequested(),$.signal&&$.signal.aborted)throw new CanceledError(null,$)}function dispatchRequest($){return throwIfCancellationRequested($),$.headers=AxiosHeaders$1.from($.headers),$.data=transformData.call($,$.transformRequest),["post","put","patch"].indexOf($.method)!==-1&&$.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter($.adapter||defaults$1.adapter)($).then(function(at){return throwIfCancellationRequested($),at.data=transformData.call($,$.transformResponse,at),at.headers=AxiosHeaders$1.from(at.headers),at},function(at){return isCancel(at)||(throwIfCancellationRequested($),at&&at.response&&(at.response.data=transformData.call($,$.transformResponse,at.response),at.response.headers=AxiosHeaders$1.from(at.response.headers))),Promise.reject(at)})}const headersToObject=$=>$ instanceof AxiosHeaders$1?$.toJSON():$;function mergeConfig($,_e){_e=_e||{};const rt={};function at(kt,Mt,Dt){return utils$1.isPlainObject(kt)&&utils$1.isPlainObject(Mt)?utils$1.merge.call({caseless:Dt},kt,Mt):utils$1.isPlainObject(Mt)?utils$1.merge({},Mt):utils$1.isArray(Mt)?Mt.slice():Mt}function ht(kt,Mt,Dt){if(utils$1.isUndefined(Mt)){if(!utils$1.isUndefined(kt))return at(void 0,kt,Dt)}else return at(kt,Mt,Dt)}function pt(kt,Mt){if(!utils$1.isUndefined(Mt))return at(void 0,Mt)}function wt(kt,Mt){if(utils$1.isUndefined(Mt)){if(!utils$1.isUndefined(kt))return at(void 0,kt)}else return at(void 0,Mt)}function st(kt,Mt,Dt){if(Dt in _e)return at(kt,Mt);if(Dt in $)return at(void 0,kt)}const Tt={url:pt,method:pt,data:pt,baseURL:wt,transformRequest:wt,transformResponse:wt,paramsSerializer:wt,timeout:wt,timeoutMessage:wt,withCredentials:wt,withXSRFToken:wt,adapter:wt,responseType:wt,xsrfCookieName:wt,xsrfHeaderName:wt,onUploadProgress:wt,onDownloadProgress:wt,decompress:wt,maxContentLength:wt,maxBodyLength:wt,beforeRedirect:wt,transport:wt,httpAgent:wt,httpsAgent:wt,cancelToken:wt,socketPath:wt,responseEncoding:wt,validateStatus:st,headers:(kt,Mt)=>ht(headersToObject(kt),headersToObject(Mt),!0)};return utils$1.forEach(Object.keys(Object.assign({},$,_e)),function(Mt){const Dt=Tt[Mt]||ht,Ot=Dt($[Mt],_e[Mt],Mt);utils$1.isUndefined(Ot)&&Dt!==st||(rt[Mt]=Ot)}),rt}const VERSION="1.6.2",validators$1={};["object","boolean","number","function","string","symbol"].forEach(($,_e)=>{validators$1[$]=function(at){return typeof at===$||"a"+(_e<1?"n ":" ")+$}});const deprecatedWarnings={};validators$1.transitional=function $(_e,rt,at){function ht(pt,wt){return"[Axios v"+VERSION+"] Transitional option '"+pt+"'"+wt+(at?". "+at:"")}return(pt,wt,st)=>{if(_e===!1)throw new AxiosError(ht(wt," has been removed"+(rt?" in "+rt:"")),AxiosError.ERR_DEPRECATED);return rt&&!deprecatedWarnings[wt]&&(deprecatedWarnings[wt]=!0,console.warn(ht(wt," has been deprecated since v"+rt+" and will be removed in the near future"))),_e?_e(pt,wt,st):!0}};function assertOptions($,_e,rt){if(typeof $!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const at=Object.keys($);let ht=at.length;for(;ht-- >0;){const pt=at[ht],wt=_e[pt];if(wt){const st=$[pt],Tt=st===void 0||wt(st,pt,$);if(Tt!==!0)throw new AxiosError("option "+pt+" must be "+Tt,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(rt!==!0)throw new AxiosError("Unknown option "+pt,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(_e){this.defaults=_e,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}request(_e,rt){typeof _e=="string"?(rt=rt||{},rt.url=_e):rt=_e||{},rt=mergeConfig(this.defaults,rt);const{transitional:at,paramsSerializer:ht,headers:pt}=rt;at!==void 0&&validator.assertOptions(at,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),ht!=null&&(utils$1.isFunction(ht)?rt.paramsSerializer={serialize:ht}:validator.assertOptions(ht,{encode:validators.function,serialize:validators.function},!0)),rt.method=(rt.method||this.defaults.method||"get").toLowerCase();let wt=pt&&utils$1.merge(pt.common,pt[rt.method]);pt&&utils$1.forEach(["delete","get","head","post","put","patch","common"],qt=>{delete pt[qt]}),rt.headers=AxiosHeaders$1.concat(wt,pt);const st=[];let Tt=!0;this.interceptors.request.forEach(function(tr){typeof tr.runWhen=="function"&&tr.runWhen(rt)===!1||(Tt=Tt&&tr.synchronous,st.unshift(tr.fulfilled,tr.rejected))});const kt=[];this.interceptors.response.forEach(function(tr){kt.push(tr.fulfilled,tr.rejected)});let Mt,Dt=0,Ot;if(!Tt){const qt=[dispatchRequest.bind(this),void 0];for(qt.unshift.apply(qt,st),qt.push.apply(qt,kt),Ot=qt.length,Mt=Promise.resolve(rt);Dt<Ot;)Mt=Mt.then(qt[Dt++],qt[Dt++]);return Mt}Ot=st.length;let Ut=rt;for(Dt=0;Dt<Ot;){const qt=st[Dt++],tr=st[Dt++];try{Ut=qt(Ut)}catch(ar){tr.call(this,ar);break}}try{Mt=dispatchRequest.call(this,Ut)}catch(qt){return Promise.reject(qt)}for(Dt=0,Ot=kt.length;Dt<Ot;)Mt=Mt.then(kt[Dt++],kt[Dt++]);return Mt}getUri(_e){_e=mergeConfig(this.defaults,_e);const rt=buildFullPath(_e.baseURL,_e.url);return buildURL(rt,_e.params,_e.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function $(_e){Axios.prototype[_e]=function(rt,at){return this.request(mergeConfig(at||{},{method:_e,url:rt,data:(at||{}).data}))}});utils$1.forEach(["post","put","patch"],function $(_e){function rt(at){return function(pt,wt,st){return this.request(mergeConfig(st||{},{method:_e,headers:at?{"Content-Type":"multipart/form-data"}:{},url:pt,data:wt}))}}Axios.prototype[_e]=rt(),Axios.prototype[_e+"Form"]=rt(!0)});const Axios$1=Axios;class CancelToken{constructor(_e){if(typeof _e!="function")throw new TypeError("executor must be a function.");let rt;this.promise=new Promise(function(pt){rt=pt});const at=this;this.promise.then(ht=>{if(!at._listeners)return;let pt=at._listeners.length;for(;pt-- >0;)at._listeners[pt](ht);at._listeners=null}),this.promise.then=ht=>{let pt;const wt=new Promise(st=>{at.subscribe(st),pt=st}).then(ht);return wt.cancel=function(){at.unsubscribe(pt)},wt},_e(function(pt,wt,st){at.reason||(at.reason=new CanceledError(pt,wt,st),rt(at.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(_e){if(this.reason){_e(this.reason);return}this._listeners?this._listeners.push(_e):this._listeners=[_e]}unsubscribe(_e){if(!this._listeners)return;const rt=this._listeners.indexOf(_e);rt!==-1&&this._listeners.splice(rt,1)}static source(){let _e;return{token:new CancelToken(function(ht){_e=ht}),cancel:_e}}}const CancelToken$1=CancelToken;function spread($){return function(rt){return $.apply(null,rt)}}function isAxiosError($){return utils$1.isObject($)&&$.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([$,_e])=>{HttpStatusCode[_e]=$});const HttpStatusCode$1=HttpStatusCode;function createInstance($){const _e=new Axios$1($),rt=bind(Axios$1.prototype.request,_e);return utils$1.extend(rt,Axios$1.prototype,_e,{allOwnKeys:!0}),utils$1.extend(rt,_e,null,{allOwnKeys:!0}),rt.create=function(ht){return createInstance(mergeConfig($,ht))},rt}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function $(_e){return Promise.all(_e)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=$=>formDataToJSON(utils$1.isHTMLForm($)?new FormData($):$);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios,Row=reactExports.forwardRef(({bsPrefix:$,className:_e,as:rt="div",...at},ht)=>{const pt=useBootstrapPrefix($,"row"),wt=useBootstrapBreakpoints(),st=useBootstrapMinBreakpoint(),Tt=`${pt}-cols`,kt=[];return wt.forEach(Mt=>{const Dt=at[Mt];delete at[Mt];let Ot;Dt!=null&&typeof Dt=="object"?{cols:Ot}=Dt:Ot=Dt;const Ut=Mt!==st?`-${Mt}`:"";Ot!=null&&kt.push(`${Tt}${Ut}-${Ot}`)}),jsxRuntimeExports.jsx(rt,{ref:ht,...at,className:classNames(_e,pt,...kt)})});Row.displayName="Row";const Row$1=Row;function useCol({as:$,bsPrefix:_e,className:rt,...at}){_e=useBootstrapPrefix(_e,"col");const ht=useBootstrapBreakpoints(),pt=useBootstrapMinBreakpoint(),wt=[],st=[];return ht.forEach(Tt=>{const kt=at[Tt];delete at[Tt];let Mt,Dt,Ot;typeof kt=="object"&&kt!=null?{span:Mt,offset:Dt,order:Ot}=kt:Mt=kt;const Ut=Tt!==pt?`-${Tt}`:"";Mt&&wt.push(Mt===!0?`${_e}${Ut}`:`${_e}${Ut}-${Mt}`),Ot!=null&&st.push(`order${Ut}-${Ot}`),Dt!=null&&st.push(`offset${Ut}-${Dt}`)}),[{...at,className:classNames(rt,...wt,...st)},{as:$,bsPrefix:_e,spans:wt}]}const Col=reactExports.forwardRef(($,_e)=>{const[{className:rt,...at},{as:ht="div",bsPrefix:pt,spans:wt}]=useCol($);return jsxRuntimeExports.jsx(ht,{...at,ref:_e,className:classNames(rt,!wt.length&&pt)})});Col.displayName="Col";const Col$1=Col,UserMessages$1="",API_PATH="ws://localhost:8000/ws/chat/",config={API_PATH},am=class am{constructor(){gs(this,"callbacks",{});this.socketRef=null}static getInstance(){return am.instance||(am.instance=new am),am.instance}connect(_e){console.log("connect data",_e);const rt=`${config.API_PATH}?current_user=${_e.currentUser}&property_id=${_e.propertyId}&property_user=${_e.propertyUser}`;this.socketRef=new WebSocket(rt),this.socketRef.onopen=()=>{console.log("WebSocket open")},this.socketRef.onmessage=at=>{console.log("onmessage",at.data),this.socketNewMessage(at.data)},this.socketRef.onerror=at=>{console.log(at.error.message)},this.socketRef.onclose=()=>{console.log("WebSocket closed let's reopen"),this.connect(_e)}}socketNewMessage(_e){const rt=JSON.parse(_e),at=rt.command;Object.keys(this.callbacks).length!==0&&(at==="messages"&&this.callbacks[at](rt.messages),at==="new_message"&&this.callbacks[at](rt.message),at==="all_client_messages"&&this.callbacks[at](rt.message))}initChatUser(_e){this.sendMessage({command:"init_chat",user_id:_e})}fetchMessages(_e){console.log(_e),this.sendMessage({command:"fetch_messages",current_user:_e.currentUser,receiver_id:_e.propertyUser,property_id:_e.propertyId})}fetchAllClients(_e){this.sendMessage({command:"fetch_all_clients",current_user:_e.currentUser,receiver_id:_e.propertyUser,property_id:_e.propertyId})}newChatMessage(_e){this.sendMessage({command:"new_message",from:_e.from,to:_e.to,text:_e.text,property:_e.property})}addCallbacks(_e,rt,at){this.callbacks.messages=_e,this.callbacks.new_message=rt,this.callbacks.all_client_messages=at}sendMessage(_e){try{this.socketRef&&this.socketRef.readyState===1?(console.log("sending",_e),this.socketRef.send(JSON.stringify({..._e}))):console.log("WebSocket connection not established.")}catch(rt){console.log("not sent"),console.log(rt.message)}}disconnect(){this.socketRef&&this.socketRef.close()}isConnected(){return this.socketRef&&this.socketRef.readyState===1}state(){return this.socketRef.readyState}waitForSocketConnection(_e){const rt=this.socketRef,at=this.waitForSocketConnection;setTimeout(function(){if(rt.readyState===1){console.log("Connection is made"),_e!=null&&_e();return}else console.log("wait for connection..."),at(_e)},1)}};gs(am,"instance",null);let WebSocketService=am;const webSocketInstance=WebSocketService.getInstance();class Chat extends reactExports.Component{constructor(rt){super(rt);gs(this,"handleResize",()=>{this.setState({isSmallScreen:window.innerWidth<=767})});gs(this,"toggleTooltip",()=>{this.setState(rt=>({isTooltipVisible:!rt.isTooltipVisible}))});gs(this,"showSchedulePrivateTour",()=>{this.setState(rt=>({schedulePrivateTour:!rt.schedulePrivateTour}))});gs(this,"setDate",rt=>{this.setState({date:rt.target.value})});gs(this,"scrollToBottom",()=>{if(this.messagesEnd.current){const rt=this.messagesEnd.current,at=rt.scrollHeight,ht=rt.clientHeight,pt=at-ht;rt.scrollTop=pt>0?pt:0}});gs(this,"addMessage",rt=>{this.setState(at=>({messages:[...at.messages,rt]}))});gs(this,"setMessages",rt=>{this.setState({messages:rt.reverse()},()=>{console.log(this.state.messages)})});gs(this,"setMessage",(rt,at)=>{console.log(rt),this.setState({message:rt},at)});gs(this,"setAllClients",rt=>{console.log(rt);const at=Array.isArray(rt)?rt:[rt];this.setState(()=>({allClients:[...at],subAllClients:[...at]}),()=>{console.log("Upload allClients:",this.state.allClients),this.componentDidUpdate()})});gs(this,"setSelectedClientData",rt=>{this.setState({selectedClientData:[rt]},()=>{console.log(this.state.selectedClientData),console.log(this.state.selectedClientData[0].property_owner_id,this.props.currentUser)})});gs(this,"setSubAllClients",(rt,at)=>{this.setState({subAllClients:rt},at)});gs(this,"messageChangeHandler",rt=>{this.setState({message:rt.target.value})});gs(this,"searchContentChangeHandler",rt=>{this.setState({searchContent:rt.target.value})});gs(this,"sendMessageHandler",()=>{var at,ht;const rt={from:this.props.currentUser,to:(at=this.state.selectedClientData[0])==null?void 0:at.author__id,text:this.state.message,property:(ht=this.state.selectedClientData[0])==null?void 0:ht.property__id};rt.text!==""&&(webSocketInstance.newChatMessage(rt),this.setState({message:""})),this.componentDidUpdate()});gs(this,"updateHistory",()=>{const rt=`/room/${this.props.propertyId}`;this.props.history.push(rt)});gs(this,"handleIndividualChat",rt=>{console.log("component update"),console.log(23223,rt);const at={propertyId:rt.property__id,propertyUser:rt.author__id,currentUser:this.props.currentUser};webSocketInstance.fetchMessages(at),this.setSelectedClientData(rt),this.componentDidUpdate()});gs(this,"handleSchedulePrivateTour",()=>{const rt=new Date(this.state.date),at=new Date(rt.getTime()+3*60*60*1e3),ht=rt.toLocaleString("en-US",{timeZone:"Asia/Kolkata"}),pt=at.toLocaleString("en-US",{timeZone:"Asia/Kolkata"}),wt=`schedule ${ht} expire ${pt}`;console.log("schedule",wt),this.setMessage(wt,()=>{var st,Tt;if(this.state.date){console.log(this.state.message);const kt={from:this.props.currentUser,to:(st=this.state.selectedClientData[0])==null?void 0:st.author__id,text:this.state.message,property:(Tt=this.state.selectedClientData[0])==null?void 0:Tt.property__id};console.log(kt),this.sendMessageHandler(),this.showSchedulePrivateTour()}}),this.componentDidUpdate()});gs(this,"handleSearchSubmit",rt=>{rt.preventDefault();let at=null;for(let ht=0;ht<this.state.allClients.length;ht++)if(this.state.searchContent&&this.state.allClients[ht].author__username.startsWith(this.state.searchContent)){at=this.state.allClients[ht];break}at?this.setSubAllClients([at],()=>{console.log(this.state.subAllClients)}):this.setSubAllClients(this.state.allClients,()=>{console.log(this.state.subAllClients)})});gs(this,"isMessageExpired",rt=>{const at=/^schedule (\d{1,2}\/\d{1,2}\/\d{4}, \d{1,2}:\d{2}:\d{2} (AM|PM)) expire (\d{1,2}\/\d{1,2}\/\d{4}, \d{1,2}:\d{2}:\d{2} (AM|PM))$/i.exec(rt);if(at){const ht=at[3],pt=new Date(ht),st=new Date().toLocaleString("en-US",{timeZone:"Asia/Kolkata"});return console.log(st,ht,pt),st>ht}return!1});gs(this,"renderMessages",()=>this.state.messages.map(rt=>jsxRuntimeExports.jsxs("li",{className:rt.author===this.props.currentUser?"me":"him",children:[jsxRuntimeExports.jsx("h4",{className:"author",children:rt.author}),jsxRuntimeExports.jsx("p",{children:rt.content})]},rt.id)));this.state={messages:[],message:"",allClients:[],subAllClients:[],selectedClientData:[],isSmallScreen:window.innerWidth<=767,isTooltipVisible:!1,schedulePrivateTour:!1,date:new Date().toISOString().slice(0,16),searchContent:"",searchFoundContent:null},this.messagesEnd=React.createRef()}componentDidMount(){if(this.props.isLoggedin&&!webSocketInstance.isConnected()){const rt={propertyId:this.props.propertyId?this.props.propertyId:"all",propertyUser:this.props.propertyUser?this.props.propertyUser:"all",currentUser:this.props.currentUser};webSocketInstance.connect(rt),this.waitForSocketConnection(()=>{console.log("Entered for connect"),webSocketInstance.initChatUser(this.props.currentUser),webSocketInstance.addCallbacks(this.setMessages,this.addMessage,this.setAllClients),webSocketInstance.fetchAllClients(rt),webSocketInstance.fetchMessages(rt)})}window.addEventListener("resize",this.handleResize)}componentDidUpdate(){this.scrollToBottom(),window.addEventListener("resize",this.handleResize)}componentWillUnmount(){this.setState({selectedClientData:"",searchContent:""}),window.removeEventListener("resize",this.handleResize),webSocketInstance.disconnect(),console.log("exit",this.state.allClients)}waitForSocketConnection(rt){const at=this;setTimeout(()=>{webSocketInstance.state()===1?(console.log("Connection is made"),rt()):(console.log("Wait for connection..."),at.waitForSocketConnection(rt))},100)}render(){var rt;return this.props.currentUser,this.state,jsxRuntimeExports.jsx(React.Fragment,{children:this.state.allClients&&this.state.allClients!=="No registered user"?jsxRuntimeExports.jsxs(Row$1,{children:[jsxRuntimeExports.jsxs(Col$1,{md:4,style:{height:"100%"},children:[jsxRuntimeExports.jsx("form",{onSubmit:at=>this.handleSearchSubmit(at),children:jsxRuntimeExports.jsx("div",{className:"flex",children:jsxRuntimeExports.jsxs("div",{className:"relative w-full",children:[jsxRuntimeExports.jsx("input",{onChange:at=>this.searchContentChangeHandler(at),value:this.state.searchContent,type:"search",id:"search-dropdown",className:"block p-2.5 w-full z-20 text-sm text-gray-900 bg-gray-50 rounded-e-lg border-s-gray-50 border-s-2 border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-s-gray-700  dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:border-blue-500",placeholder:"Search by property name",required:!0}),jsxRuntimeExports.jsxs("button",{type:"submit",className:"absolute top-0 end-0 p-2.5 text-sm font-medium h-full text-white bg-blue-700 rounded-e-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Search"})]})]})})}),jsxRuntimeExports.jsx("ul",{className:"max-w-md divide-y divide-gray-200 dark:divide-gray-700",children:this.state.subAllClients&&this.state.subAllClients.map((at,ht)=>jsxRuntimeExports.jsx("li",{className:"py-3 sm:py-4 mt-2 client-message-list",onClick:()=>this.handleIndividualChat(at),children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse p-2",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("img",{className:"w-8 h-8 rounded-full",src:"https://images.unsplash.com/photo-1633332755192-727a05c4013d?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8dXNlcnN8ZW58MHx8MHx8fDA%3D",alt:"Profile Image"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-sm d-flex justify-start font-medium overflow-hidden whitespace-nowrap text-overflow-ellipsis",style:{textTransform:"capitalize"},children:jsxRuntimeExports.jsx("b",{children:at.author__username})}),jsxRuntimeExports.jsxs("p",{className:"text-md d-flex justify-start overflow-hidden whitespace-nowrap text-overflow-ellipsis",children:["Property: ",at.property__property_name]})]}),jsxRuntimeExports.jsx("div",{className:"inline-flex items-center",children:jsxRuntimeExports.jsx("img",{className:"w-8 h-8",src:at.property_image,alt:"Property Image"})})]})},ht))})]}),jsxRuntimeExports.jsx(Col$1,{md:8,children:jsxRuntimeExports.jsxs("div",{style:{borderLeftWidth:"3px",borderLeftColor:"rgb(254 226 226)",paddingLeft:"13px"},children:[jsxRuntimeExports.jsxs("div",{className:"max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-1",children:[jsxRuntimeExports.jsx("a",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:jsxRuntimeExports.jsx("img",{src:"https://flowbite.com/docs/images/logo.svg",className:"h-8",alt:"Flowbite Logo"})}),jsxRuntimeExports.jsx("p",{className:"text-lg text-white",style:{textTransform:"capitalize"},children:(rt=this.state.selectedClientData[0])==null?void 0:rt.author__username}),jsxRuntimeExports.jsxs("div",{children:[this.state.selectedClientData[0]&&this.props.currentUser!==this.state.selectedClientData[0].property_owner_id&&jsxRuntimeExports.jsxs("button",{type:"button",onClick:this.showSchedulePrivateTour,"data-modal-target":"popup-modal","data-modal-toggle":"popup-modal",className:"text-white bg-[#1da1f2] hover:bg-[#1da1f2]/90 focus:ring-4 focus:outline-none focus:ring-[#1da1f2]/50 font-medium rounded-lg text-sm px-3 py-2.5 text-center inline-flex items-center dark:focus:ring-[#1da1f2]/55 me-2 mb-2",children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-camera-video mr-2",viewBox:"0 0 16 16",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M0 5a2 2 0 0 1 2-2h7.5a2 2 0 0 1 1.983 1.738l3.11-1.382A1 1 0 0 1 16 4.269v7.462a1 1 0 0 1-1.406.913l-3.111-1.382A2 2 0 0 1 9.5 13H2a2 2 0 0 1-2-2zm11.5 5.175 3.5 1.556V4.269l-3.5 1.556zM2 4a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h7.5a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1z"})}),"Request a private tour"]}),this.state.schedulePrivateTour&&jsxRuntimeExports.jsx("div",{id:"popup-modal",tabIndex:"-1",className:"flex visible overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-end items-center w-full md:inset-0 h-[calc(75%-1rem)] max-h-full",children:jsxRuntimeExports.jsx("div",{className:"relative p-4 w-3/4 max-w-md max-h-full",children:jsxRuntimeExports.jsxs("div",{className:"relative bg-black rounded-lg shadow dark:bg-gray-700",children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:this.showSchedulePrivateTour,className:"absolute top-3 end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"popup-modal",children:[jsxRuntimeExports.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:jsxRuntimeExports.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Close modal"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 md:p-5 text-center",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-3",children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",fill:"white",class:"bi bi-calendar-check",viewBox:"0 0 16 16",children:[jsxRuntimeExports.jsx("path",{d:"M10.854 7.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708 0z"}),jsxRuntimeExports.jsx("path",{d:"M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z"})]})}),jsxRuntimeExports.jsxs("h3",{className:"mb-2 text-center text-lg font-normal text-white",children:["Schedule Your Private Tour with ",this.state.selectedClientData[0].property__property_name]}),jsxRuntimeExports.jsx("input",{className:"mb-3",onChange:at=>this.setDate(at),value:this.state.date,type:"datetime-local",min:new Date().toISOString().slice(0,16)}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("small",{className:"text-sm text-gray-700",children:"The link will expire in 2 hours"}),jsxRuntimeExports.jsx("h3",{className:"mb-2 text-sm font-normal text-gray-500 dark:text-gray-400",children:"Are you sure you want to sent the request?"}),jsxRuntimeExports.jsx("button",{onClick:this.handleSchedulePrivateTour,"data-modal-hide":"popup-modal",type:"button",className:"text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-3 py-2 text-center me-2",children:"Yes, I'm sure"}),jsxRuntimeExports.jsx("button",{onClick:this.showSchedulePrivateTour,"data-modal-hide":"popup-modal",type:"button",className:"text-black bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg border border-gray-200 text-sm font-medium px-3 py-2 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600",children:"No, cancel"})]})]})})})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-3 mb-5",children:this.state.selectedClientData&&this.state.messages.map((at,ht)=>jsxRuntimeExports.jsxs("div",{className:`flex items-center justify-${at.author!==this.props.username?"start":"end"} mb-2`,children:[at.author!==this.props.username&&jsxRuntimeExports.jsx("a",{href:"#",children:jsxRuntimeExports.jsx("img",{className:"w-8 h-8 rounded-full",src:"https://images.unsplash.com/photo-1633332755192-727a05c4013d?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8dXNlcnxlbnwwfHwwfHx8MA%3D%3D",alt:"Sender Image"})}),jsxRuntimeExports.jsx("div",{className:`${at.author!==this.props.username?"pl":"pr"}-1`,children:jsxRuntimeExports.jsx("div",{className:`text-${at.author!==this.props.username?"left":"right"} p-2 ${at.author===this.props.username?"bg-green-100":"bg-red-100"}`,style:{borderRadius:"10px",maxWidth:"28vw"},children:/^schedule (\d{1,2}\/\d{1,2}\/\d{4}, \d{1,2}:\d{2}:\d{2} (AM|PM)) expire (\d{1,2}\/\d{1,2}\/\d{4}, \d{1,2}:\d{2}:\d{2} (AM|PM))$/i.test(at.content)?jsxRuntimeExports.jsxs("div",{class:`max-w-sm pl-6 pr-6 pt-3 pb-3 bg-gray-800 border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700 ${this.isMessageExpired(at.content)?"cursor-not-allowed opacity-80":""}`,children:[jsxRuntimeExports.jsx("h5",{class:"mb-2 text-lg font-bold tracking-tight text-gray-900 dark:text-white",children:"Request for Private home tour"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsxs("p",{className:`mb-3 font-normal text-gray-700 dark:text-white ${this.state.selectedClientData[0].property__property_name.length>6?"truncate":""}`,children:["Property: ",this.state.selectedClientData[0].property__property_name]}),jsxRuntimeExports.jsxs("p",{class:"mb-3 font-normal text-gray-700 dark:text-green-500",children:["Issued: ",RegExp.$1]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsxs("p",{class:"mb-3 font-normal text-gray-700 dark:text-white",children:[this.state.selectedClientData[0].author__username," - ",this.props.username]}),jsxRuntimeExports.jsxs("p",{class:"mb-3 font-normal text-gray-700 dark:text-red-500",children:["Expire: ",RegExp.$3]})]}),!this.isMessageExpired(at.content)&&jsxRuntimeExports.jsxs("a",{onClick:this.updateHistory,class:"inline-flex items-center px-3 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 cursor-pointer",children:["Connect",jsxRuntimeExports.jsx("svg",{class:"rtl:rotate-180 w-3.5 h-3.5 ms-2","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 10",children:jsxRuntimeExports.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 5h12m0 0L9 1m4 4L9 9"})})]})]}):at.content})}),at.author===this.props.username&&jsxRuntimeExports.jsx("a",{href:"#",children:jsxRuntimeExports.jsx("img",{className:"w-8 h-8 rounded-full",src:"https://images.unsplash.com/photo-1560250097-0b93528c311a?q=80&w=1374&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"sender image"})})]},ht))}),jsxRuntimeExports.jsx("div",{className:"fixed z-50 ml-9 w-full sm:w-1/2 h-12 max-w-sm -translate-x-2/2 bg-white border-4 border-gray-200 rounded-full bottom-4 left-2/2 dark:bg-gray-700 dark:border-gray-600",children:jsxRuntimeExports.jsxs("div",{className:"d-flex h-full max-w-lg justify-between mx-auto",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",children:jsxRuntimeExports.jsxs("button",{"data-tooltip-target":"tooltip-new",type:"button",onClick:this.toggleTooltip,className:"inline-flex items-center justify-center w-10 h-10 font-medium bg-blue-900 rounded-full hover:bg-blue-950 group focus:ring-4 focus:ring-blue-300 focus:outline-none dark:focus:ring-blue-800",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:jsxRuntimeExports.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"New item"})]})}),this.state.isTooltipVisible&&jsxRuntimeExports.jsxs("div",{id:"tooltip-new",role:"tooltip",className:"m-5 absolute z-10 visible inline-block px-3 py-2 text-sm font-medium text-white transition-opacity duration-300 bg-gray-900 rounded-lg shadow-sm opacity-100 tooltip dark:bg-gray-700",style:{top:"-100%",transform:"translateY(-100%)"},children:[jsxRuntimeExports.jsxs("div",{className:"w-48 text-gray-900 bg-black border border-gray-200 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[jsxRuntimeExports.jsxs("button",{type:"button",className:"relative inline-flex items-center w-full px-4 py-2 text-sm font-medium border-b border-gray-200 rounded-t-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:border-gray-600 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:ring-gray-500 dark:focus:text-white",children:[jsxRuntimeExports.jsx("svg",{className:"w-3 h-3 me-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{d:"M10 0a10 10 0 1 0 10 10A10.011 10.011 0 0 0 10 0Zm0 5a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm0 13a8.949 8.949 0 0 1-4.951-1.488A3.987 3.987 0 0 1 9 13h2a3.987 3.987 0 0 1 3.951 3.512A8.949 8.949 0 0 1 10 18Z"})}),"Profile"]}),jsxRuntimeExports.jsxs("button",{type:"button",className:"relative inline-flex items-center w-full px-4 py-2 text-sm font-medium border-b border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:border-gray-600 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:ring-gray-500 dark:focus:text-white",children:[jsxRuntimeExports.jsx("svg",{className:"w-3 h-3 me-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7.75 4H19M7.75 4a2.25 2.25 0 0 1-4.5 0m4.5 0a2.25 2.25 0 0 0-4.5 0M1 4h2.25m13.5 6H19m-2.25 0a2.25 2.25 0 0 1-4.5 0m4.5 0a2.25 2.25 0 0 0-4.5 0M1 10h11.25m-4.5 6H19M7.75 16a2.25 2.25 0 0 1-4.5 0m4.5 0a2.25 2.25 0 0 0-4.5 0M1 16h2.25"})}),"Settings"]}),jsxRuntimeExports.jsxs("button",{type:"button",className:"relative inline-flex items-center w-full px-4 py-2 text-sm font-medium border-b border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:border-gray-600 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:ring-gray-500 dark:focus:text-white",children:[jsxRuntimeExports.jsxs("svg",{className:"w-3 h-3 me-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 18",fill:"currentColor",children:[jsxRuntimeExports.jsx("path",{d:"M18 4H16V9C16 10.0609 15.5786 11.0783 14.8284 11.8284C14.0783 12.5786 13.0609 13 12 13H9L6.846 14.615C7.17993 14.8628 7.58418 14.9977 8 15H11.667L15.4 17.8C15.5731 17.9298 15.7836 18 16 18C16.2652 18 16.5196 17.8946 16.7071 17.7071C16.8946 17.5196 17 17.2652 17 17V15H18C18.5304 15 19.0391 14.7893 19.4142 14.4142C19.7893 14.0391 20 13.5304 20 13V6C20 5.46957 19.7893 4.96086 19.4142 4.58579C19.0391 4.21071 18.5304 4 18 4Z",fill:"currentColor"}),jsxRuntimeExports.jsx("path",{d:"M12 0H2C1.46957 0 0.960859 0.210714 0.585786 0.585786C0.210714 0.960859 0 1.46957 0 2V9C0 9.53043 0.210714 10.0391 0.585786 10.4142C0.960859 10.7893 1.46957 11 2 11H3V13C3 13.1857 3.05171 13.3678 3.14935 13.5257C3.24698 13.6837 3.38668 13.8114 3.55279 13.8944C3.71889 13.9775 3.90484 14.0126 4.08981 13.996C4.27477 13.9793 4.45143 13.9114 4.6 13.8L8.333 11H12C12.5304 11 13.0391 10.7893 13.4142 10.4142C13.7893 10.0391 14 9.53043 14 9V2C14 1.46957 13.7893 0.960859 13.4142 0.585786C13.0391 0.210714 12.5304 0 12 0Z",fill:"currentColor"})]}),"Messages"]}),jsxRuntimeExports.jsxs("button",{type:"button",className:"relative inline-flex items-center w-full px-4 py-2 text-sm font-medium rounded-b-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:border-gray-600 dark:hover:bg-gray-600 dark:hover:text-white dark:focus:ring-gray-500 dark:focus:text-white",children:[jsxRuntimeExports.jsxs("svg",{className:"w-3 h-3 me-2.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:[jsxRuntimeExports.jsx("path",{d:"M14.707 7.793a1 1 0 0 0-1.414 0L11 10.086V1.5a1 1 0 0 0-2 0v8.586L6.707 7.793a1 1 0 1 0-1.414 1.414l4 4a1 1 0 0 0 1.416 0l4-4a1 1 0 0 0-.002-1.414Z"}),jsxRuntimeExports.jsx("path",{d:"M18 12h-2.55l-2.975 2.975a3.5 3.5 0 0 1-4.95 0L4.55 12H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2Zm-3 5a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"})]}),"Download"]})]}),jsxRuntimeExports.jsx("div",{className:"tooltip-arrow","data-popper-arrow":!0})]}),jsxRuntimeExports.jsx("div",{className:"w-100",children:jsxRuntimeExports.jsx("input",{className:"w-100 pl-5 h-10",value:this.state.message,onChange:this.messageChangeHandler,type:"text",placeholder:"Type here..."})}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",children:jsxRuntimeExports.jsxs("button",{onClick:this.sendMessageHandler,"data-tooltip-target":"tooltip-sent-message",type:"button",className:"inline-flex items-center justify-center w-10 h-10 font-medium bg-blue-900 rounded-full hover:bg-blue-950 group focus:ring-4 focus:ring-blue-300 focus:outline-none dark:focus:ring-blue-800",children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"white",class:"bi bi-arrow-right",viewBox:"0 0 16 16",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8"})}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Sent Message"})]})}),jsxRuntimeExports.jsxs("div",{id:"tooltip-sent-message",role:"tooltip",className:"absolute z-10 invisible inline-block px-3 py-2 text-sm font-medium text-white transition-opacity duration-300 bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip dark:bg-gray-700",children:["Sent message",jsxRuntimeExports.jsx("div",{className:"tooltip-arrow","data-popper-arrow":!0})]})]})})]})})]}):jsxRuntimeExports.jsx(UserSideLogin,{})})}}const mapStateToProps=$=>({currentUser:$.showIsLoggedin.userId,username:$.showIsLoggedin.username,isLoggedin:$.showIsLoggedin.value}),UserMessages=withRouter(connect(mapStateToProps)(Chat));function UserHeader(){const $=useSelector(Ot=>Ot.showSignupModal.value),_e=useSelector(Ot=>Ot.showSigninModal.value),rt=useSelector(Ot=>Ot.showIsLoggedin.value),at=useSelector(Ot=>Ot.showIsGoogleLoggedin.value),ht=useSelector(Ot=>Ot.showIsLoggedin.userId),pt=useHistory(),wt=useDispatch(),st=useSelector(Ot=>Ot.showIsLoggedin.userId),Tt=localStorage.getItem("accessToken"),kt=Ot=>{Ot.preventDefault(),wt(resetPropertyAddress()),wt(setShowIsLoggedin({showIsLoggedin:!1})),console.log("Data exists. Resetting the data..."),localStorage.removeItem("accessToken"),wt(removeUserData()),window.location.href="/"},Mt=reactExports.useCallback(Ot=>{Ot==="signup"?wt(setShowSignupModal({showSignupModal:!0}),setShowSigninModal({showSigninModal:!1})):Ot==="signin"&&wt(setShowSigninModal({showSigninModal:!0}),setShowSignupModal({showSignupModal:!1}))},[wt]),Dt=async()=>{try{const Ot=await axios$1.get("http://127.0.0.1:8000/api/property/myproperty/",{params:{user_id:st},headers:{Authorization:`Bearer ${Tt}`}});if(Ot.status===200)console.log("success"),console.log(Ot.data),wt(addPropertiesList({showPropertiesList:Ot.data})),pt.push("/usermyproperty");else{console.log("failed"),console.log(Ot.data);const Ut=await Ot.text();console.log("Error Details:",Ut),console.log("Status",Ot.status),console.log("Response",Ot)}}catch(Ot){Ot.response.status===401&&(console.log("nope"),alert("Please login")),console.log("failed to sent the request",Ot.response)}};return reactExports.useEffect(()=>{wt(setShowIsLoggedin({showIsLoggedin:!!Tt})),console.log(rt,!!Tt)},[wt]),jsxRuntimeExports.jsxs(React.Fragment,{children:[jsxRuntimeExports.jsx(Navbar$1,{collapseOnSelect:!0,expand:"lg",className:"bg-home-blue",children:jsxRuntimeExports.jsxs(Container$1,{width:"100vw",children:[jsxRuntimeExports.jsx(Navbar$1.Toggle,{"aria-controls":"basic-navbar-nav",className:"bg-white"}),jsxRuntimeExports.jsx(Navbar$1.Collapse,{id:"basic-navbar-nav",className:"row",children:jsxRuntimeExports.jsxs(Nav$1,{className:"inline-flex justify-around columns-auto",children:[jsxRuntimeExports.jsx(Nav$1.Link,{href:"#features",className:"text-white columns-1",children:"BUY"}),ht?jsxRuntimeExports.jsx(Link,{to:"/sellproperty",className:"text-white columns-1 mt-2",children:"SELL"}):jsxRuntimeExports.jsx(Link,{to:"#",className:"text-white columns-1 mt-2",onClick:()=>Mt("signin"),children:"SELL"}),jsxRuntimeExports.jsx(Link,{to:"/",style:{letterSpacing:"12px",fontFamily:"Koulen",fontSize:"20px",paddingBottom:"0rem",paddingTop:"0.2rem"},className:"text-white mx-4",children:"RYKERZ REAL ESTATES"}),rt?at?jsxRuntimeExports.jsx(UserGoogleSignout,{}):jsxRuntimeExports.jsx(Link,{to:"#",className:"text-white columns-1 mt-2",onClick:kt,children:"LOGOUT"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[$&&jsxRuntimeExports.jsx(UserSideSignup,{}),jsxRuntimeExports.jsx(Link,{to:"#",className:"text-white columns-1 mt-2",onClick:()=>Mt("signin"),children:"LOG IN"}),_e&&jsxRuntimeExports.jsx(UserSideLogin,{})]}),jsxRuntimeExports.jsxs(NavDropdown$1,{title:"MANAGE",id:"basic-nav-dropdown",className:"manage-text",children:[jsxRuntimeExports.jsx(NavDropdown$1.Item,{href:"#action/3.1",className:"main-bg",onClick:()=>Dt(),children:"MY LISTING"}),jsxRuntimeExports.jsx(NavDropdown$1.Item,{href:"#action/3.2",className:"main-bg",children:"MESSAGES"}),jsxRuntimeExports.jsx(NavDropdown$1.Item,{href:"#action/3.3",className:"main-bg",children:"HISTORY"}),jsxRuntimeExports.jsx(NavDropdown$1.Item,{href:"#action/3.4",className:"main-bg",children:"PAYMENT"}),jsxRuntimeExports.jsx(NavDropdown$1.Item,{href:"#action/3.5",className:"main-bg",children:"PROFILE"})]}),jsxRuntimeExports.jsx(Nav$1.Link,{href:"#deets",className:"text-white columns-1",children:jsxRuntimeExports.jsx(BsFillBagHeartFill,{style:{width:"1.2rem",height:"1.2rem"}})}),jsxRuntimeExports.jsx(Nav$1.Link,{href:"",className:"text-white columns-1","data-drawer-target":"drawer-right-card-list","data-drawer-show":"drawer-right-card-list","data-drawer-placement":"right","aria-controls":"drawer-right-card-list",children:jsxRuntimeExports.jsx(MdMessage,{style:{width:"1.4rem",height:"1.4rem",paddingTop:"0.1rem"}})})]})})]})}),jsxRuntimeExports.jsxs("div",{id:"drawer-right-card-list",className:"fixed top-0 right-0 z-40 h-screen p-4 overflow-y-auto transition-transform translate-x-full bg-black w-50 md:w-75 dark:bg-gray-800",tabIndex:"-1","aria-labelledby":"drawer-right-label",children:[jsxRuntimeExports.jsxs("button",{type:"button","data-drawer-hide":"drawer-right-card-list","aria-controls":"drawer-right-card-list",className:"pb-3 text-gray-400 bg-transparent hover:bg-black hover:text-gray-900 rounded-lg text-sm w-8 h-8 absolute top-2.5 end-2.5 inline-flex items-center justify-center dark:hover:bg-gray-600 dark:hover:text-white",children:[jsxRuntimeExports.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:jsxRuntimeExports.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Close menu"})]}),jsxRuntimeExports.jsx(UserMessages,{})]})]})}const UserHomeBanner$1="",myImage="/assets/bg-home-b74ae827.jpg",mapboxGl$1="";var mapboxGl={exports:{}};(function($,_e){(function(rt,at){$.exports=at()})(commonjsGlobal$1,function(){var rt,at,ht;function pt(st,Tt){if(!rt)rt=Tt;else if(!at)at=Tt;else{var kt="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+rt+")(sharedChunk); ("+at+")(sharedChunk); self.onerror = null;",Mt={};rt(Mt),ht=Tt(Mt),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(ht.workerUrl=window.URL.createObjectURL(new Blob([kt],{type:"text/javascript"})))}}pt(["exports"],function(st){var Tt=typeof self<"u"?self:{},kt="2.15.0";let Mt;const Dt={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(Mt==null){const tt=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Mt={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):tt}catch{Mt=tt}}return Mt},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!Dt.API_URL)return null;try{const tt=new URL(Dt.API_URL);return tt.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":tt.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Ot={supported:!1,testSupport:function(tt){!tr&&qt&&(ar?Yt(tt):Ut=tt)}};let Ut,qt,tr=!1,ar=!1;function Yt(tt){const et=tt.createTexture();tt.bindTexture(tt.TEXTURE_2D,et);try{if(tt.texImage2D(tt.TEXTURE_2D,0,tt.RGBA,tt.RGBA,tt.UNSIGNED_BYTE,qt),tt.isContextLost())return;Ot.supported=!0}catch{}tt.deleteTexture(et),tr=!0}Tt.document&&(qt=Tt.document.createElement("img"),qt.onload=function(){Ut&&Yt(Ut),Ut=null,ar=!0},qt.onerror=function(){tr=!0,Ut=null},qt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Kt="01";function Jt(tt){return tt&&tt.__esModule&&Object.prototype.hasOwnProperty.call(tt,"default")?tt.default:tt}var pr=Sr;function Sr(tt,et,it,ct){this.cx=3*tt,this.bx=3*(it-tt)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*et,this.by=3*(ct-et)-this.cy,this.ay=1-this.cy-this.by,this.p1x=tt,this.p1y=et,this.p2x=it,this.p2y=ct}Sr.prototype={sampleCurveX:function(tt){return((this.ax*tt+this.bx)*tt+this.cx)*tt},sampleCurveY:function(tt){return((this.ay*tt+this.by)*tt+this.cy)*tt},sampleCurveDerivativeX:function(tt){return(3*this.ax*tt+2*this.bx)*tt+this.cx},solveCurveX:function(tt,et){if(et===void 0&&(et=1e-6),tt<0)return 0;if(tt>1)return 1;for(var it=tt,ct=0;ct<8;ct++){var dt=this.sampleCurveX(it)-tt;if(Math.abs(dt)<et)return it;var gt=this.sampleCurveDerivativeX(it);if(Math.abs(gt)<1e-6)break;it-=dt/gt}var xt=0,bt=1;for(it=tt,ct=0;ct<20&&(dt=this.sampleCurveX(it),!(Math.abs(dt-tt)<et));ct++)tt>dt?xt=it:bt=it,it=.5*(bt-xt)+xt;return it},solve:function(tt,et){return this.sampleCurveY(this.solveCurveX(tt,et))}};var Er=Jt(pr),Rr=Lr;function Lr(tt,et){this.x=tt,this.y=et}Lr.prototype={clone:function(){return new Lr(this.x,this.y)},add:function(tt){return this.clone()._add(tt)},sub:function(tt){return this.clone()._sub(tt)},multByPoint:function(tt){return this.clone()._multByPoint(tt)},divByPoint:function(tt){return this.clone()._divByPoint(tt)},mult:function(tt){return this.clone()._mult(tt)},div:function(tt){return this.clone()._div(tt)},rotate:function(tt){return this.clone()._rotate(tt)},rotateAround:function(tt,et){return this.clone()._rotateAround(tt,et)},matMult:function(tt){return this.clone()._matMult(tt)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(tt){return this.x===tt.x&&this.y===tt.y},dist:function(tt){return Math.sqrt(this.distSqr(tt))},distSqr:function(tt){var et=tt.x-this.x,it=tt.y-this.y;return et*et+it*it},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(tt){return Math.atan2(this.y-tt.y,this.x-tt.x)},angleWith:function(tt){return this.angleWithSep(tt.x,tt.y)},angleWithSep:function(tt,et){return Math.atan2(this.x*et-this.y*tt,this.x*tt+this.y*et)},_matMult:function(tt){var et=tt[2]*this.x+tt[3]*this.y;return this.x=tt[0]*this.x+tt[1]*this.y,this.y=et,this},_add:function(tt){return this.x+=tt.x,this.y+=tt.y,this},_sub:function(tt){return this.x-=tt.x,this.y-=tt.y,this},_mult:function(tt){return this.x*=tt,this.y*=tt,this},_div:function(tt){return this.x/=tt,this.y/=tt,this},_multByPoint:function(tt){return this.x*=tt.x,this.y*=tt.y,this},_divByPoint:function(tt){return this.x/=tt.x,this.y/=tt.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var tt=this.y;return this.y=this.x,this.x=-tt,this},_rotate:function(tt){var et=Math.cos(tt),it=Math.sin(tt),ct=it*this.x+et*this.y;return this.x=et*this.x-it*this.y,this.y=ct,this},_rotateAround:function(tt,et){var it=Math.cos(tt),ct=Math.sin(tt),dt=et.y+ct*(this.x-et.x)+it*(this.y-et.y);return this.x=et.x+it*(this.x-et.x)-ct*(this.y-et.y),this.y=dt,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Lr.convert=function(tt){return tt instanceof Lr?tt:Array.isArray(tt)?new Lr(tt[0],tt[1]):tt};var Mr=Jt(Rr);const Zr=Math.PI/180,dn=180/Math.PI;function Jr(tt){return tt*Zr}function wr(tt){return tt*dn}const Xr=[[0,0],[1,0],[1,1],[0,1]];function Dr(tt){if(tt<=0)return 0;if(tt>=1)return 1;const et=tt*tt,it=et*tt;return 4*(tt<.5?it:3*(tt-et)+it-.75)}function xn(tt,et,it,ct){const dt=new Er(tt,et,it,ct);return function(gt){return dt.solve(gt)}}const gn=xn(.25,.1,.25,1);function Pr(tt,et,it){return Math.min(it,Math.max(et,tt))}function Gr(tt,et,it){return(it=Pr((it-tt)/(et-tt),0,1))*it*(3-2*it)}function Or(tt,et,it){const ct=it-et,dt=((tt-et)%ct+ct)%ct+et;return dt===et?it:dt}function sn(tt,et,it){if(!tt.length)return it(null,[]);let ct=tt.length;const dt=new Array(tt.length);let gt=null;tt.forEach((xt,bt)=>{et(xt,(St,Ct)=>{St&&(gt=St),dt[bt]=Ct,--ct==0&&it(gt,dt)})})}function ln(tt){const et=[];for(const it in tt)et.push(tt[it]);return et}function kn(tt,...et){for(const it of et)for(const ct in it)tt[ct]=it[ct];return tt}let Bn=1;function Fn(){return Bn++}function Nn(){return function tt(et){return et?(et^Math.random()*(16>>et/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,tt)}()}function Kn(tt){return tt<=1?1:Math.pow(2,Math.ceil(Math.log(tt)/Math.LN2))}function uo(tt){return!!tt&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(tt)}function vo(tt,et){tt.forEach(it=>{et[it]&&(et[it]=et[it].bind(et))})}function Ao(tt,et){return tt.indexOf(et,tt.length-et.length)!==-1}function Un(tt,et,it){const ct={};for(const dt in tt)ct[dt]=et.call(it||this,tt[dt],dt,tt);return ct}function so(tt,et,it){const ct={};for(const dt in tt)et.call(it||this,tt[dt],dt,tt)&&(ct[dt]=tt[dt]);return ct}function Qn(tt){return Array.isArray(tt)?tt.map(Qn):typeof tt=="object"&&tt?Un(tt,Qn):tt}const Vo={};function Hn(tt){Vo[tt]||(typeof console<"u"&&console.warn(tt),Vo[tt]=!0)}function Jo(tt,et,it){return(it.y-tt.y)*(et.x-tt.x)>(et.y-tt.y)*(it.x-tt.x)}function js(tt){let et=0;for(let it,ct,dt=0,gt=tt.length,xt=gt-1;dt<gt;xt=dt++)it=tt[dt],ct=tt[xt],et+=(ct.x-it.x)*(it.y+ct.y);return et}function Ds(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function vs(tt){const et={};if(tt.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(it,ct,dt,gt)=>{const xt=dt||gt;return et[ct]=!xt||xt.toLowerCase(),""}),et["max-age"]){const it=parseInt(et["max-age"],10);isNaN(it)?delete et["max-age"]:et["max-age"]=it}return et}let ks=null;function Ls(tt){if(ks==null){const et=tt.navigator?tt.navigator.userAgent:null;ks=!!tt.safari||!(!et||!(/\b(iPad|iPhone|iPod)\b/.test(et)||et.match("Safari")&&!et.match("Chrome")))}return ks}function Vs(tt){try{const et=Tt[tt];return et.setItem("_mapbox_test_",1),et.removeItem("_mapbox_test_"),!0}catch{return!1}}function ws(tt,et){return[tt[4*et],tt[4*et+1],tt[4*et+2],tt[4*et+3]]}const Ro="mapbox-tiles";let Xo=500,os=50,ko,ys;function Al(){try{return Tt.caches}catch{}}function Pl(){Al()&&!ko&&(ko=Tt.caches.open(Ro))}function Kl(tt){const et=tt.indexOf("?");if(et<0)return tt;const it=function(dt){const gt=dt.indexOf("?");return gt>0?dt.slice(gt+1).split("&"):[]}(tt),ct=it.filter(dt=>{const gt=dt.split("=");return gt[0]==="language"||gt[0]==="worldview"});return ct.length?`${tt.slice(0,et)}?${ct.join("&")}`:tt.slice(0,et)}let Jn=1/0;const Eo={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Eo);class bs extends Error{constructor(et,it,ct){it===401&&zr(ct)&&(et+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(et),this.status=it,this.url=ct}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Qs=Ds()?()=>self.worker&&self.worker.referrer:()=>(Tt.location.protocol==="blob:"?Tt.parent:Tt).location.href,Yl=function(tt,et){if(!(/^file:/.test(it=tt.url)||/^file:/.test(Qs())&&!/^\w+:/.test(it))){if(Tt.fetch&&Tt.Request&&Tt.AbortController&&Tt.Request.prototype.hasOwnProperty("signal"))return function(ct,dt){const gt=new Tt.AbortController,xt=new Tt.Request(ct.url,{method:ct.method||"GET",body:ct.body,credentials:ct.credentials,headers:ct.headers,referrer:Qs(),referrerPolicy:ct.referrerPolicy,signal:gt.signal});let bt=!1,St=!1;const Ct=(Pt=xt.url).indexOf("sku=")>0&&zr(Pt);var Pt;ct.type==="json"&&xt.headers.set("Accept","application/json");const jt=(Bt,Ft,Wt)=>{if(St)return;if(Bt&&Bt.message!=="SecurityError"&&Hn(Bt.toString()),Ft&&Wt)return Lt(Ft);const rr=Date.now();Tt.fetch(xt).then(cr=>{if(cr.ok){const yr=Ct?cr.clone():null;return Lt(cr,yr,rr)}return dt(new bs(cr.statusText,cr.status,ct.url))}).catch(cr=>{cr.name!=="AbortError"&&dt(new Error(`${cr.message} ${ct.url}`))})},Lt=(Bt,Ft,Wt)=>{(ct.type==="arrayBuffer"?Bt.arrayBuffer():ct.type==="json"?Bt.json():Bt.text()).then(rr=>{St||(Ft&&Wt&&function(cr,yr,ur){if(Pl(),!ko)return;const mr={status:yr.status,statusText:yr.statusText,headers:new Tt.Headers};yr.headers.forEach((Vr,Br)=>mr.headers.set(Br,Vr));const xr=vs(yr.headers.get("Cache-Control")||"");if(xr["no-store"])return;xr["max-age"]&&mr.headers.set("Expires",new Date(ur+1e3*xr["max-age"]).toUTCString());const _r=mr.headers.get("Expires");_r&&(new Date(_r).getTime()-ur<42e4||function(Vr,Br){if(ys===void 0)try{new Response(new ReadableStream),ys=!0}catch{ys=!1}ys?Br(Vr.body):Vr.blob().then(Br)}(yr,Vr=>{const Br=new Tt.Response(Vr,mr);Pl(),ko&&ko.then(Qr=>Qr.put(Kl(cr.url),Br)).catch(Qr=>Hn(Qr.message))}))}(xt,Ft,Wt),bt=!0,dt(null,rr,Bt.headers.get("Cache-Control"),Bt.headers.get("Expires")))}).catch(rr=>{St||dt(new Error(rr.message))})};return Ct?function(Bt,Ft){if(Pl(),!ko)return Ft(null);const Wt=Kl(Bt.url);ko.then(rr=>{rr.match(Wt).then(cr=>{const yr=function(ur){if(!ur)return!1;const mr=new Date(ur.headers.get("Expires")||0),xr=vs(ur.headers.get("Cache-Control")||"");return mr>Date.now()&&!xr["no-cache"]}(cr);rr.delete(Wt),yr&&rr.put(Wt,cr.clone()),Ft(null,cr,yr)}).catch(Ft)}).catch(Ft)}(xt,jt):jt(null,null),{cancel:()=>{St=!0,bt||gt.abort()}}}(tt,et);if(Ds()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",tt,et,void 0,!0)}var it;return function(ct,dt){const gt=new Tt.XMLHttpRequest;gt.open(ct.method||"GET",ct.url,!0),ct.type==="arrayBuffer"&&(gt.responseType="arraybuffer");for(const xt in ct.headers)gt.setRequestHeader(xt,ct.headers[xt]);return ct.type==="json"&&(gt.responseType="text",gt.setRequestHeader("Accept","application/json")),gt.withCredentials=ct.credentials==="include",gt.onerror=()=>{dt(new Error(gt.statusText))},gt.onload=()=>{if((gt.status>=200&&gt.status<300||gt.status===0)&&gt.response!==null){let xt=gt.response;if(ct.type==="json")try{xt=JSON.parse(gt.response)}catch(bt){return dt(bt)}dt(null,xt,gt.getResponseHeader("Cache-Control"),gt.getResponseHeader("Expires"))}else dt(new bs(gt.statusText,gt.status,ct.url))},gt.send(ct.body),{cancel:()=>gt.abort()}}(tt,et)},Wu=function(tt,et){return Yl(kn(tt,{type:"arrayBuffer"}),et)};function lm(tt){const et=Tt.document.createElement("a");return et.href=tt,et.protocol===Tt.document.location.protocol&&et.host===Tt.document.location.host}const gr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Xt,Qt;Xt=[],Qt=0;const fr=function(tt,et){if(Ot.supported&&(tt.headers||(tt.headers={}),tt.headers.accept="image/webp,*/*"),Qt>=Dt.MAX_PARALLEL_IMAGE_REQUESTS){const gt={requestParameters:tt,callback:et,cancelled:!1,cancel(){this.cancelled=!0}};return Xt.push(gt),gt}Qt++;let it=!1;const ct=()=>{if(!it)for(it=!0,Qt--;Xt.length&&Qt<Dt.MAX_PARALLEL_IMAGE_REQUESTS;){const gt=Xt.shift(),{requestParameters:xt,callback:bt,cancelled:St}=gt;St||(gt.cancel=fr(xt,bt).cancel)}},dt=Wu(tt,(gt,xt,bt,St)=>{ct(),gt?et(gt):xt&&(Tt.createImageBitmap?function(Ct,Pt){const jt=new Tt.Blob([new Uint8Array(Ct)],{type:"image/png"});Tt.createImageBitmap(jt).then(Lt=>{Pt(null,Lt)}).catch(Lt=>{Pt(new Error(`Could not load image because of ${Lt.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(xt,(Ct,Pt)=>et(Ct,Pt,bt,St)):function(Ct,Pt){const jt=new Tt.Image,Lt=Tt.URL;jt.onload=()=>{Pt(null,jt),Lt.revokeObjectURL(jt.src),jt.onload=null,Tt.requestAnimationFrame(()=>{jt.src=gr})},jt.onerror=()=>Pt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Bt=new Tt.Blob([new Uint8Array(Ct)],{type:"image/png"});jt.src=Ct.byteLength?Lt.createObjectURL(Bt):gr}(xt,(Ct,Pt)=>et(Ct,Pt,bt,St)))});return{cancel:()=>{dt.cancel(),ct()}}},vr="NO_ACCESS_TOKEN";function kr(tt){return tt.indexOf("mapbox:")===0}function zr(tt){return Dt.API_URL_REGEX.test(tt)}function $r(tt){return Dt.API_CDN_URL_REGEX.test(tt)}function Ar(tt){return Dt.API_STYLE_REGEX.test(tt)&&!qr(tt)}function qr(tt){return Dt.API_SPRITE_REGEX.test(tt)}const An=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Pn(tt){const et=tt.match(An);if(!et)throw new Error("Unable to parse URL object");return{protocol:et[1],authority:et[2],path:et[3]||"/",params:et[4]?et[4].split("&"):[]}}function Tn(tt){const et=tt.params.length?`?${tt.params.join("&")}`:"";return`${tt.protocol}://${tt.authority}${tt.path}${et}`}const ro="mapbox.eventData";function ao(tt){if(!tt)return null;const et=tt.split(".");if(!et||et.length!==3)return null;try{return JSON.parse(decodeURIComponent(Tt.atob(et[1]).split("").map(it=>"%"+("00"+it.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class no{constructor(et){this.type=et,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(et){const it=ao(Dt.ACCESS_TOKEN);let ct="";return ct=it&&it.u?Tt.btoa(encodeURIComponent(it.u).replace(/%([0-9A-F]{2})/g,(dt,gt)=>String.fromCharCode(+("0x"+gt)))):Dt.ACCESS_TOKEN||"",et?`${ro}.${et}:${ct}`:`${ro}:${ct}`}fetchEventData(){const et=Vs("localStorage"),it=this.getStorageKey(),ct=this.getStorageKey("uuid");if(et)try{const dt=Tt.localStorage.getItem(it);dt&&(this.eventData=JSON.parse(dt));const gt=Tt.localStorage.getItem(ct);gt&&(this.anonId=gt)}catch{Hn("Unable to read from LocalStorage")}}saveEventData(){const et=Vs("localStorage"),it=this.getStorageKey(),ct=this.getStorageKey("uuid");if(et)try{Tt.localStorage.setItem(ct,this.anonId),Object.keys(this.eventData).length>=1&&Tt.localStorage.setItem(it,JSON.stringify(this.eventData))}catch{Hn("Unable to write to LocalStorage")}}processRequests(et){}postEvent(et,it,ct,dt){if(!Dt.EVENTS_URL)return;const gt=Pn(Dt.EVENTS_URL);gt.params.push(`access_token=${dt||Dt.ACCESS_TOKEN||""}`);const xt={event:this.type,created:new Date(et).toISOString()},bt=it?kn(xt,it):xt,St={url:Tn(gt),headers:{"Content-Type":"text/plain"},body:JSON.stringify([bt])};this.pendingRequest=function(Ct,Pt){return Yl(kn(Ct,{method:"POST"}),Pt)}(St,Ct=>{this.pendingRequest=null,ct(Ct),this.saveEventData(),this.processRequests(dt)})}queueRequest(et,it){this.queue.push(et),this.processRequests(it)}}const lo=new class extends no{constructor(tt){super("appUserTurnstile"),this._customAccessToken=tt}postTurnstileEvent(tt,et){Dt.EVENTS_URL&&Dt.ACCESS_TOKEN&&Array.isArray(tt)&&tt.some(it=>kr(it)||zr(it))&&this.queueRequest(Date.now(),et)}processRequests(tt){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const et=ao(Dt.ACCESS_TOKEN),it=et?et.u:Dt.ACCESS_TOKEN;let ct=it!==this.eventData.tokenU;uo(this.anonId)||(this.anonId=Nn(),ct=!0);const dt=this.queue.shift();if(this.eventData.lastSuccess){const gt=new Date(this.eventData.lastSuccess),xt=new Date(dt),bt=(dt-this.eventData.lastSuccess)/864e5;ct=ct||bt>=1||bt<-1||gt.getDate()!==xt.getDate()}else ct=!0;ct?this.postEvent(dt,{sdkIdentifier:"mapbox-gl-js",sdkVersion:kt,skuId:Kt,"enabled.telemetry":!1,userId:this.anonId},gt=>{gt||(this.eventData.lastSuccess=dt,this.eventData.tokenU=it)},tt):this.processRequests()}},go=lo.postTurnstileEvent.bind(lo),qo=new class extends no{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(tt,et,it,ct){this.skuToken=et,this.errorCb=ct,Dt.EVENTS_URL&&(it||Dt.ACCESS_TOKEN?this.queueRequest({id:tt,timestamp:Date.now()},it):this.errorCb(new Error(vr)))}processRequests(tt){if(this.pendingRequest||this.queue.length===0)return;const{id:et,timestamp:it}=this.queue.shift();et&&this.success[et]||(this.anonId||this.fetchEventData(),uo(this.anonId)||(this.anonId=Nn()),this.postEvent(it,{sdkIdentifier:"mapbox-gl-js",sdkVersion:kt,skuId:Kt,skuToken:this.skuToken,userId:this.anonId},ct=>{ct?this.errorCb(ct):et&&(this.success[et]=!0)},tt))}},as=qo.postMapLoadEvent.bind(qo),$s=new class extends no{constructor(){super("gljs.performance")}postPerformanceEvent(tt,et){Dt.EVENTS_URL&&(tt||Dt.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:et},tt)}processRequests(tt){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:et,performanceData:it}=this.queue.shift(),ct=function(dt){const gt=Tt.performance.getEntriesByType("resource"),xt=Tt.performance.getEntriesByType("mark"),bt=function(Lt){const Bt={};if(Lt){for(const Ft in Lt)if(Ft!=="other")for(const Wt of Lt[Ft]){const rr=`${Ft}ResolveRangeMin`,cr=`${Ft}ResolveRangeMax`,yr=`${Ft}RequestCount`,ur=`${Ft}RequestCachedCount`;Bt[rr]=Math.min(Bt[rr]||1/0,Wt.startTime),Bt[cr]=Math.max(Bt[cr]||-1/0,Wt.responseEnd);const mr=xr=>{Bt[xr]===void 0&&(Bt[xr]=0),++Bt[xr]};Wt.transferSize!==void 0&&Wt.transferSize===0&&mr(ur),mr(yr)}}return Bt}(function(Lt,Bt){const Ft={};if(Lt)for(const Wt of Lt){const rr=Bt(Wt);Ft[rr]===void 0&&(Ft[rr]=[]),Ft[rr].push(Wt)}return Ft}(gt,$_)),St=Tt.devicePixelRatio,Ct=Tt.navigator.connection||Tt.navigator.mozConnection||Tt.navigator.webkitConnection,Pt={counters:[],metadata:[],attributes:[]},jt=(Lt,Bt,Ft)=>{Ft!=null&&Lt.push({name:Bt,value:Ft.toString()})};for(const Lt in bt)jt(Pt.counters,Lt,bt[Lt]);if(dt.interactionRange[0]!==1/0&&dt.interactionRange[1]!==-1/0&&(jt(Pt.counters,"interactionRangeMin",dt.interactionRange[0]),jt(Pt.counters,"interactionRangeMax",dt.interactionRange[1])),xt)for(const Lt of Object.keys(qu)){const Bt=qu[Lt],Ft=xt.find(Wt=>Wt.name===Bt);Ft&&jt(Pt.counters,Bt,Ft.startTime)}return jt(Pt.counters,"visibilityHidden",dt.visibilityHidden),jt(Pt.attributes,"style",function(Lt){if(Lt)for(const Bt of Lt){const Ft=Bt.name.split("?")[0];if(Ar(Ft)){const Wt=Ft.split("/").slice(-2);if(Wt.length===2)return`mapbox://styles/${Wt[0]}/${Wt[1]}`}}}(gt)),jt(Pt.attributes,"terrainEnabled",dt.terrainEnabled?"true":"false"),jt(Pt.attributes,"fogEnabled",dt.fogEnabled?"true":"false"),jt(Pt.attributes,"projection",dt.projection),jt(Pt.attributes,"zoom",dt.zoom),jt(Pt.metadata,"devicePixelRatio",St),jt(Pt.metadata,"connectionEffectiveType",Ct?Ct.effectiveType:void 0),jt(Pt.metadata,"navigatorUserAgent",Tt.navigator.userAgent),jt(Pt.metadata,"screenWidth",Tt.screen.width),jt(Pt.metadata,"screenHeight",Tt.screen.height),jt(Pt.metadata,"windowWidth",Tt.innerWidth),jt(Pt.metadata,"windowHeight",Tt.innerHeight),jt(Pt.metadata,"mapWidth",dt.width/St),jt(Pt.metadata,"mapHeight",dt.height/St),jt(Pt.metadata,"webglRenderer",dt.renderer),jt(Pt.metadata,"webglVendor",dt.vendor),jt(Pt.metadata,"sdkVersion",kt),jt(Pt.metadata,"sdkIdentifier","mapbox-gl-js"),Pt}(it);for(const dt of ct.metadata);for(const dt of ct.counters);for(const dt of ct.attributes);this.postEvent(et,ct,()=>{},tt)}},_s=$s.postPerformanceEvent.bind($s),zl=new class extends no{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(tt,et,it,ct){if(!Dt.API_URL||!Dt.SESSION_PATH)return;const dt=Pn(Dt.API_URL+Dt.SESSION_PATH);dt.params.push(`sku=${et||""}`),dt.params.push(`access_token=${ct||Dt.ACCESS_TOKEN||""}`);const gt={url:Tn(dt),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(xt,bt){return Yl(kn(xt,{method:"GET"}),bt)}(gt,xt=>{this.pendingRequest=null,it(xt),this.saveEventData(),this.processRequests(ct)})}getSessionAPI(tt,et,it,ct){this.skuToken=et,this.errorCb=ct,Dt.SESSION_PATH&&Dt.API_URL&&(it||Dt.ACCESS_TOKEN?this.queueRequest({id:tt,timestamp:Date.now()},it):this.errorCb(new Error(vr)))}processRequests(tt){if(this.pendingRequest||this.queue.length===0)return;const{id:et,timestamp:it}=this.queue.shift();et&&this.success[et]||this.getSession(it,this.skuToken,ct=>{ct?this.errorCb(ct):et&&(this.success[et]=!0)},tt)}},Es=zl.getSessionAPI.bind(zl),Fs=new Set,qu={create:"create",load:"load",fullLoad:"fullLoad"},av={mark(tt){Tt.performance.mark(tt)},measure(tt,et,it){Tt.performance.measure(tt,et,it)}};function $_(tt){const et=tt.name.split("?")[0];return $r(et)&&et.includes("mapbox-gl.js")?"javascript":$r(et)&&et.includes("mapbox-gl.css")?"css":function(it){return Dt.API_FONTS_REGEX.test(it)}(et)?"fontRange":qr(et)?"sprite":Ar(et)?"style":function(it){return Dt.API_TILEJSON_REGEX.test(it)}(et)?"tilejson":"other"}const So=Tt.performance;function oy(tt){const et=tt?tt.url.toString():void 0;return So.getEntriesByName(et)}let wp,sy,cm,Nl;const Ql={now:()=>cm!==void 0?cm:Tt.performance.now(),setNow(tt){cm=tt},restoreNow(){cm=void 0},frame(tt){const et=Tt.requestAnimationFrame(tt);return{cancel:()=>Tt.cancelAnimationFrame(et)}},getImageData(tt,et=0){const{width:it,height:ct}=tt;Nl||(Nl=Tt.document.createElement("canvas"));const dt=Nl.getContext("2d",{willReadFrequently:!0});if(!dt)throw new Error("failed to create canvas 2d context");return(it>Nl.width||ct>Nl.height)&&(Nl.width=it,Nl.height=ct),dt.clearRect(-et,-et,it+2*et,ct+2*et),dt.drawImage(tt,0,0,it,ct),dt.getImageData(-et,-et,it+2*et,ct+2*et)},resolveURL:tt=>(wp||(wp=Tt.document.createElement("a")),wp.href=tt,wp.href),get devicePixelRatio(){return Tt.devicePixelRatio},get prefersReducedMotion(){return!!Tt.matchMedia&&(sy==null&&(sy=Tt.matchMedia("(prefers-reduced-motion: reduce)")),sy.matches)}};function ay(tt,et,it){it[tt]&&it[tt].indexOf(et)!==-1||(it[tt]=it[tt]||[],it[tt].push(et))}function ly(tt,et,it){if(it&&it[tt]){const ct=it[tt].indexOf(et);ct!==-1&&it[tt].splice(ct,1)}}class Au{constructor(et,it={}){kn(this,it),this.type=et}}class Jl extends Au{constructor(et,it={}){super("error",kn({error:et},it))}}class bp{on(et,it){return this._listeners=this._listeners||{},ay(et,it,this._listeners),this}off(et,it){return ly(et,it,this._listeners),ly(et,it,this._oneTimeListeners),this}once(et,it){return it?(this._oneTimeListeners=this._oneTimeListeners||{},ay(et,it,this._oneTimeListeners),this):new Promise(ct=>this.once(et,ct))}fire(et,it){typeof et=="string"&&(et=new Au(et,it||{}));const ct=et.type;if(this.listens(ct)){et.target=this;const dt=this._listeners&&this._listeners[ct]?this._listeners[ct].slice():[];for(const bt of dt)bt.call(this,et);const gt=this._oneTimeListeners&&this._oneTimeListeners[ct]?this._oneTimeListeners[ct].slice():[];for(const bt of gt)ly(ct,bt,this._oneTimeListeners),bt.call(this,et);const xt=this._eventedParent;xt&&(kn(et,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),xt.fire(et))}else et instanceof Jl&&console.error(et.error);return this}listens(et){return!!(this._listeners&&this._listeners[et]&&this._listeners[et].length>0||this._oneTimeListeners&&this._oneTimeListeners[et]&&this._oneTimeListeners[et].length>0||this._eventedParent&&this._eventedParent.listens(et))}setEventedParent(et,it){return this._eventedParent=et,this._eventedParentData=it,this}}var Yr=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function _c(tt,...et){for(const it of et)for(const ct in it)tt[ct]=it[ct];return tt}function ls(tt){return tt instanceof Number||tt instanceof String||tt instanceof Boolean?tt.valueOf():tt}function Ss(tt){if(Array.isArray(tt))return tt.map(Ss);if(tt instanceof Object&&!(tt instanceof Number||tt instanceof String||tt instanceof Boolean)){const et={};for(const it in tt)et[it]=Ss(tt[it]);return et}return ls(tt)}class O_ extends Error{constructor(et,it){super(it),this.message=it,this.key=et}}var Bl=O_;class cy{constructor(et,it=[]){this.parent=et,this.bindings={};for(const[ct,dt]of it)this.bindings[ct]=dt}concat(et){return new cy(this,et)}get(et){if(this.bindings[et])return this.bindings[et];if(this.parent)return this.parent.get(et);throw new Error(`${et} not found in scope.`)}has(et){return!!this.bindings[et]||!!this.parent&&this.parent.has(et)}}var z_=cy;const Zu={kind:"null"},Dn={kind:"number"},mo={kind:"string"},ho={kind:"boolean"},Js={kind:"color"},Il={kind:"object"},po={kind:"value"},ga={kind:"collator"},Ep={kind:"formatted"},ku={kind:"resolvedImage"};function ba(tt,et){return{kind:"array",itemType:tt,N:et}}function Ho(tt){if(tt.kind==="array"){const et=Ho(tt.itemType);return typeof tt.N=="number"?`array<${et}, ${tt.N}>`:tt.itemType.kind==="value"?"array":`array<${et}>`}return tt.kind}const N_=[Zu,Dn,mo,ho,Js,Ep,Il,ba(po),ku];function eu(tt,et){if(et.kind==="error")return null;if(tt.kind==="array"){if(et.kind==="array"&&(et.N===0&&et.itemType.kind==="value"||!eu(tt.itemType,et.itemType))&&(typeof tt.N!="number"||tt.N===et.N))return null}else{if(tt.kind===et.kind)return null;if(tt.kind==="value"){for(const it of N_)if(!eu(it,et))return null}}return`Expected ${Ho(tt)} but found ${Ho(et)} instead.`}function Sp(tt,et){return et.some(it=>it.kind===tt.kind)}function Tp(tt,et){return et.some(it=>it==="null"?tt===null:it==="array"?Array.isArray(tt):it==="object"?tt&&!Array.isArray(tt)&&typeof tt=="object":it===typeof tt)}var uy,B_={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Cp(tt){return(tt=Math.round(tt))<0?0:tt>255?255:tt}function Rp(tt){return Cp(tt[tt.length-1]==="%"?parseFloat(tt)/100*255:parseInt(tt))}function um(tt){return(et=tt[tt.length-1]==="%"?parseFloat(tt)/100:parseFloat(tt))<0?0:et>1?1:et;var et}function Xu(tt,et,it){return it<0?it+=1:it>1&&(it-=1),6*it<1?tt+(et-tt)*it*6:2*it<1?et:3*it<2?tt+(et-tt)*(2/3-it)*6:tt}try{uy={}.parseCSSColor=function(tt){var et,it=tt.replace(/ /g,"").toLowerCase();if(it in B_)return B_[it].slice();if(it[0]==="#")return it.length===4?(et=parseInt(it.substr(1),16))>=0&&et<=4095?[(3840&et)>>4|(3840&et)>>8,240&et|(240&et)>>4,15&et|(15&et)<<4,1]:null:it.length===7&&(et=parseInt(it.substr(1),16))>=0&&et<=16777215?[(16711680&et)>>16,(65280&et)>>8,255&et,1]:null;var ct=it.indexOf("("),dt=it.indexOf(")");if(ct!==-1&&dt+1===it.length){var gt=it.substr(0,ct),xt=it.substr(ct+1,dt-(ct+1)).split(","),bt=1;switch(gt){case"rgba":if(xt.length!==4)return null;bt=um(xt.pop());case"rgb":return xt.length!==3?null:[Rp(xt[0]),Rp(xt[1]),Rp(xt[2]),bt];case"hsla":if(xt.length!==4)return null;bt=um(xt.pop());case"hsl":if(xt.length!==3)return null;var St=(parseFloat(xt[0])%360+360)%360/360,Ct=um(xt[1]),Pt=um(xt[2]),jt=Pt<=.5?Pt*(Ct+1):Pt+Ct-Pt*Ct,Lt=2*Pt-jt;return[Cp(255*Xu(Lt,jt,St+1/3)),Cp(255*Xu(Lt,jt,St)),Cp(255*Xu(Lt,jt,St-1/3)),bt];default:return null}}return null}}catch{}class Gs{constructor(et,it,ct,dt=1){this.r=et,this.g=it,this.b=ct,this.a=dt}static parse(et){if(!et)return;if(et instanceof Gs)return et;if(typeof et!="string")return;const it=uy(et);return it?new Gs(it[0]/255*it[3],it[1]/255*it[3],it[2]/255*it[3],it[3]):void 0}toString(){const[et,it,ct,dt]=this.toArray();return`rgba(${Math.round(et)},${Math.round(it)},${Math.round(ct)},${dt})`}toArray(){const{r:et,g:it,b:ct,a:dt}=this;return dt===0?[0,0,0,0]:[255*et/dt,255*it/dt,255*ct/dt,dt]}toArray01(){const{r:et,g:it,b:ct,a:dt}=this;return dt===0?[0,0,0,0]:[et/dt,it/dt,ct/dt,dt]}toArray01PremultipliedAlpha(){const{r:et,g:it,b:ct,a:dt}=this;return[et,it,ct,dt]}}Gs.black=new Gs(0,0,0,1),Gs.white=new Gs(1,1,1,1),Gs.transparent=new Gs(0,0,0,0),Gs.red=new Gs(1,0,0,1),Gs.blue=new Gs(0,0,1,1);var rs=Gs;class hy{constructor(et,it,ct){this.sensitivity=et?it?"variant":"case":it?"accent":"base",this.locale=ct,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(et,it){return this.collator.compare(et,it)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class dy{constructor(et,it,ct,dt,gt){this.text=et.normalize?et.normalize():et,this.image=it,this.scale=ct,this.fontStack=dt,this.textColor=gt}}class Hs{constructor(et){this.sections=et}static fromString(et){return new Hs([new dy(et,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(et=>et.text.length!==0||et.image&&et.image.name.length!==0)}static factory(et){return et instanceof Hs?et:Hs.fromString(et)}toString(){return this.sections.length===0?"":this.sections.map(et=>et.text).join("")}serialize(){const et=["format"];for(const it of this.sections){if(it.image){et.push(["image",it.image.name]);continue}et.push(it.text);const ct={};it.fontStack&&(ct["text-font"]=["literal",it.fontStack.split(",")]),it.scale&&(ct["font-scale"]=it.scale),it.textColor&&(ct["text-color"]=["rgba"].concat(it.textColor.toArray())),et.push(ct)}return et}}class yl{constructor(et){this.name=et.name,this.available=et.available}toString(){return this.name}static fromString(et){return et?new yl({name:et,available:!1}):null}serialize(){return["image",this.name]}}function F_(tt,et,it,ct){return typeof tt=="number"&&tt>=0&&tt<=255&&typeof et=="number"&&et>=0&&et<=255&&typeof it=="number"&&it>=0&&it<=255?ct===void 0||typeof ct=="number"&&ct>=0&&ct<=1?null:`Invalid rgba value [${[tt,et,it,ct].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof ct=="number"?[tt,et,it,ct]:[tt,et,it]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ap(tt){if(tt===null||typeof tt=="string"||typeof tt=="boolean"||typeof tt=="number"||tt instanceof rs||tt instanceof hy||tt instanceof Hs||tt instanceof yl)return!0;if(Array.isArray(tt)){for(const et of tt)if(!Ap(et))return!1;return!0}if(typeof tt=="object"){for(const et in tt)if(!Ap(tt[et]))return!1;return!0}return!1}function Yo(tt){if(tt===null)return Zu;if(typeof tt=="string")return mo;if(typeof tt=="boolean")return ho;if(typeof tt=="number")return Dn;if(tt instanceof rs)return Js;if(tt instanceof hy)return ga;if(tt instanceof Hs)return Ep;if(tt instanceof yl)return ku;if(Array.isArray(tt)){const et=tt.length;let it;for(const ct of tt){const dt=Yo(ct);if(it){if(it===dt)continue;it=po;break}it=dt}return ba(it||po,et)}return Il}function kp(tt){const et=typeof tt;return tt===null?"":et==="string"||et==="number"||et==="boolean"?String(tt):tt instanceof rs||tt instanceof Hs||tt instanceof yl?tt.toString():JSON.stringify(tt)}class py{constructor(et,it){this.type=et,this.value=it}static parse(et,it){if(et.length!==2)return it.error(`'literal' expression requires exactly one argument, but found ${et.length-1} instead.`);if(!Ap(et[1]))return it.error("invalid value");const ct=et[1];let dt=Yo(ct);const gt=it.expectedType;return dt.kind!=="array"||dt.N!==0||!gt||gt.kind!=="array"||typeof gt.N=="number"&&gt.N!==0||(dt=gt),new py(dt,ct)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof rs?["rgba"].concat(this.value.toArray()):this.value instanceof Hs?this.value.serialize():this.value}}var Pu=py,Ps=class{constructor(tt){this.name="ExpressionEvaluationError",this.message=tt}toJSON(){return this.message}};const fy={string:mo,number:Dn,boolean:ho,object:Il};class my{constructor(et,it){this.type=et,this.args=it}static parse(et,it){if(et.length<2)return it.error("Expected at least one argument.");let ct,dt=1;const gt=et[0];if(gt==="array"){let bt,St;if(et.length>2){const Ct=et[1];if(typeof Ct!="string"||!(Ct in fy)||Ct==="object")return it.error('The item type argument of "array" must be one of string, number, boolean',1);bt=fy[Ct],dt++}else bt=po;if(et.length>3){if(et[2]!==null&&(typeof et[2]!="number"||et[2]<0||et[2]!==Math.floor(et[2])))return it.error('The length argument to "array" must be a positive integer literal',2);St=et[2],dt++}ct=ba(bt,St)}else ct=fy[gt];const xt=[];for(;dt<et.length;dt++){const bt=it.parse(et[dt],dt,po);if(!bt)return null;xt.push(bt)}return new my(ct,xt)}evaluate(et){for(let it=0;it<this.args.length;it++){const ct=this.args[it].evaluate(et);if(!eu(this.type,Yo(ct)))return ct;if(it===this.args.length-1)throw new Ps(`Expected value to be of type ${Ho(this.type)}, but found ${Ho(Yo(ct))} instead.`)}return null}eachChild(et){this.args.forEach(et)}outputDefined(){return this.args.every(et=>et.outputDefined())}serialize(){const et=this.type,it=[et.kind];if(et.kind==="array"){const ct=et.itemType;if(ct.kind==="string"||ct.kind==="number"||ct.kind==="boolean"){it.push(ct.kind);const dt=et.N;(typeof dt=="number"||this.args.length>1)&&it.push(dt)}}return it.concat(this.args.map(ct=>ct.serialize()))}}var tu=my;class yu{constructor(et){this.type=Ep,this.sections=et}static parse(et,it){if(et.length<2)return it.error("Expected at least one argument.");const ct=et[1];if(!Array.isArray(ct)&&typeof ct=="object")return it.error("First argument must be an image or text section.");const dt=[];let gt=!1;for(let xt=1;xt<=et.length-1;++xt){const bt=et[xt];if(gt&&typeof bt=="object"&&!Array.isArray(bt)){gt=!1;let St=null;if(bt["font-scale"]&&(St=it.parse(bt["font-scale"],1,Dn),!St))return null;let Ct=null;if(bt["text-font"]&&(Ct=it.parse(bt["text-font"],1,ba(mo)),!Ct))return null;let Pt=null;if(bt["text-color"]&&(Pt=it.parse(bt["text-color"],1,Js),!Pt))return null;const jt=dt[dt.length-1];jt.scale=St,jt.font=Ct,jt.textColor=Pt}else{const St=it.parse(et[xt],1,po);if(!St)return null;const Ct=St.type.kind;if(Ct!=="string"&&Ct!=="value"&&Ct!=="null"&&Ct!=="resolvedImage")return it.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");gt=!0,dt.push({content:St,scale:null,font:null,textColor:null})}}return new yu(dt)}evaluate(et){return new Hs(this.sections.map(it=>{const ct=it.content.evaluate(et);return Yo(ct)===ku?new dy("",ct,null,null,null):new dy(kp(ct),null,it.scale?it.scale.evaluate(et):null,it.font?it.font.evaluate(et).join(","):null,it.textColor?it.textColor.evaluate(et):null)}))}eachChild(et){for(const it of this.sections)et(it.content),it.scale&&et(it.scale),it.font&&et(it.font),it.textColor&&et(it.textColor)}outputDefined(){return!1}serialize(){const et=["format"];for(const it of this.sections){et.push(it.content.serialize());const ct={};it.scale&&(ct["font-scale"]=it.scale.serialize()),it.font&&(ct["text-font"]=it.font.serialize()),it.textColor&&(ct["text-color"]=it.textColor.serialize()),et.push(ct)}return et}}class hm{constructor(et){this.type=ku,this.input=et}static parse(et,it){if(et.length!==2)return it.error("Expected two arguments.");const ct=it.parse(et[1],1,mo);return ct?new hm(ct):it.error("No image name provided.")}evaluate(et){const it=this.input.evaluate(et),ct=yl.fromString(it);return ct&&et.availableImages&&(ct.available=et.availableImages.indexOf(it)>-1),ct}eachChild(et){et(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const lv={"to-boolean":ho,"to-color":Js,"to-number":Dn,"to-string":mo};class gy{constructor(et,it){this.type=et,this.args=it}static parse(et,it){if(et.length<2)return it.error("Expected at least one argument.");const ct=et[0];if((ct==="to-boolean"||ct==="to-string")&&et.length!==2)return it.error("Expected one argument.");const dt=lv[ct],gt=[];for(let xt=1;xt<et.length;xt++){const bt=it.parse(et[xt],xt,po);if(!bt)return null;gt.push(bt)}return new gy(dt,gt)}evaluate(et){if(this.type.kind==="boolean")return!!this.args[0].evaluate(et);if(this.type.kind==="color"){let it,ct;for(const dt of this.args){if(it=dt.evaluate(et),ct=null,it instanceof rs)return it;if(typeof it=="string"){const gt=et.parseColor(it);if(gt)return gt}else if(Array.isArray(it)&&(ct=it.length<3||it.length>4?`Invalid rbga value ${JSON.stringify(it)}: expected an array containing either three or four numeric values.`:F_(it[0],it[1],it[2],it[3]),!ct))return new rs(it[0]/255,it[1]/255,it[2]/255,it[3])}throw new Ps(ct||`Could not parse color from value '${typeof it=="string"?it:String(JSON.stringify(it))}'`)}if(this.type.kind==="number"){let it=null;for(const ct of this.args){if(it=ct.evaluate(et),it===null)return 0;const dt=Number(it);if(!isNaN(dt))return dt}throw new Ps(`Could not convert ${JSON.stringify(it)} to number.`)}return this.type.kind==="formatted"?Hs.fromString(kp(this.args[0].evaluate(et))):this.type.kind==="resolvedImage"?yl.fromString(kp(this.args[0].evaluate(et))):kp(this.args[0].evaluate(et))}eachChild(et){this.args.forEach(et)}outputDefined(){return this.args.every(et=>et.outputDefined())}serialize(){if(this.type.kind==="formatted")return new yu([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new hm(this.args[0]).serialize();const et=[`to-${this.type.kind}`];return this.eachChild(it=>{et.push(it.serialize())}),et}}var Ku=gy;const Fl=["Unknown","Point","LineString","Polygon"];var yy=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Fl[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const tt=this.featureDistanceData.center,et=this.featureDistanceData.scale,{x:it,y:ct}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(it*et-tt[0])+this.featureDistanceData.bearing[1]*(ct*et-tt[1])}return 0}parseColor(tt){let et=this._parseColorCache[tt];return et||(et=this._parseColorCache[tt]=rs.parse(tt)),et}};class Iu{constructor(et,it,ct,dt){this.name=et,this.type=it,this._evaluate=ct,this.args=dt}evaluate(et){return this._evaluate(et,this.args)}eachChild(et){this.args.forEach(et)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(et=>et.serialize()))}static parse(et,it){const ct=et[0],dt=Iu.definitions[ct];if(!dt)return it.error(`Unknown expression "${ct}". If you wanted a literal array, use ["literal", [...]].`,0);const gt=Array.isArray(dt)?dt[0]:dt.type,xt=Array.isArray(dt)?[[dt[1],dt[2]]]:dt.overloads,bt=xt.filter(([Ct])=>!Array.isArray(Ct)||Ct.length===et.length-1);let St=null;for(const[Ct,Pt]of bt){St=new Ey(it.registry,it.path,null,it.scope);const jt=[];let Lt=!1;for(let Bt=1;Bt<et.length;Bt++){const Ft=et[Bt],Wt=Array.isArray(Ct)?Ct[Bt-1]:Ct.type,rr=St.parse(Ft,1+jt.length,Wt);if(!rr){Lt=!0;break}jt.push(rr)}if(!Lt)if(Array.isArray(Ct)&&Ct.length!==jt.length)St.error(`Expected ${Ct.length} arguments, but found ${jt.length} instead.`);else{for(let Bt=0;Bt<jt.length;Bt++){const Ft=Array.isArray(Ct)?Ct[Bt]:Ct.type,Wt=jt[Bt];St.concat(Bt+1).checkSubtype(Ft,Wt.type)}if(St.errors.length===0)return new Iu(ct,gt,Pt,jt)}}if(bt.length===1)it.errors.push(...St.errors);else{const Ct=(bt.length?bt:xt).map(([jt])=>{return Lt=jt,Array.isArray(Lt)?`(${Lt.map(Ho).join(", ")})`:`(${Ho(Lt.type)}...)`;var Lt}).join(" | "),Pt=[];for(let jt=1;jt<et.length;jt++){const Lt=it.parse(et[jt],1+Pt.length);if(!Lt)return null;Pt.push(Ho(Lt.type))}it.error(`Expected arguments of type ${Ct}, but found (${Pt.join(", ")}) instead.`)}return null}static register(et,it){Iu.definitions=it;for(const ct in it)et[ct]=Iu}}var ru=Iu;class Pp{constructor(et,it,ct){this.type=ga,this.locale=ct,this.caseSensitive=et,this.diacriticSensitive=it}static parse(et,it){if(et.length!==2)return it.error("Expected one argument.");const ct=et[1];if(typeof ct!="object"||Array.isArray(ct))return it.error("Collator options argument must be an object.");const dt=it.parse(ct["case-sensitive"]!==void 0&&ct["case-sensitive"],1,ho);if(!dt)return null;const gt=it.parse(ct["diacritic-sensitive"]!==void 0&&ct["diacritic-sensitive"],1,ho);if(!gt)return null;let xt=null;return ct.locale&&(xt=it.parse(ct.locale,1,mo),!xt)?null:new Pp(dt,gt,xt)}evaluate(et){return new hy(this.caseSensitive.evaluate(et),this.diacriticSensitive.evaluate(et),this.locale?this.locale.evaluate(et):null)}eachChild(et){et(this.caseSensitive),et(this.diacriticSensitive),this.locale&&et(this.locale)}outputDefined(){return!1}serialize(){const et={};return et["case-sensitive"]=this.caseSensitive.serialize(),et["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(et.locale=this.locale.serialize()),["collator",et]}}const nu=8192;function dm(tt,et){tt[0]=Math.min(tt[0],et[0]),tt[1]=Math.min(tt[1],et[1]),tt[2]=Math.max(tt[2],et[0]),tt[3]=Math.max(tt[3],et[1])}function Yu(tt,et){return!(tt[0]<=et[0]||tt[2]>=et[2]||tt[1]<=et[1]||tt[3]>=et[3])}function Ip(tt,et){const it=(180+tt[0])/360,ct=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+tt[1]*Math.PI/360)))/360,dt=Math.pow(2,et.z);return[Math.round(it*dt*nu),Math.round(ct*dt*nu)]}function U_(tt,et,it){const ct=tt[0]-et[0],dt=tt[1]-et[1],gt=tt[0]-it[0],xt=tt[1]-it[1];return ct*xt-gt*dt==0&&ct*gt<=0&&dt*xt<=0}function pm(tt,et){let it=!1;for(let xt=0,bt=et.length;xt<bt;xt++){const St=et[xt];for(let Ct=0,Pt=St.length;Ct<Pt-1;Ct++){if(U_(tt,St[Ct],St[Ct+1]))return!1;(dt=St[Ct])[1]>(ct=tt)[1]!=(gt=St[Ct+1])[1]>ct[1]&&ct[0]<(gt[0]-dt[0])*(ct[1]-dt[1])/(gt[1]-dt[1])+dt[0]&&(it=!it)}}var ct,dt,gt;return it}function _y(tt,et){for(let it=0;it<et.length;it++)if(pm(tt,et[it]))return!0;return!1}function xy(tt,et,it,ct){const dt=ct[0]-it[0],gt=ct[1]-it[1],xt=(tt[0]-it[0])*gt-dt*(tt[1]-it[1]),bt=(et[0]-it[0])*gt-dt*(et[1]-it[1]);return xt>0&&bt<0||xt<0&&bt>0}function Qu(tt,et,it){for(const Ct of it)for(let Pt=0;Pt<Ct.length-1;++Pt)if((bt=[(xt=Ct[Pt+1])[0]-(gt=Ct[Pt])[0],xt[1]-gt[1]])[0]*(St=[(dt=et)[0]-(ct=tt)[0],dt[1]-ct[1]])[1]-bt[1]*St[0]!=0&&xy(ct,dt,gt,xt)&&xy(gt,xt,ct,dt))return!0;var ct,dt,gt,xt,bt,St;return!1}function To(tt,et){for(let it=0;it<tt.length;++it)if(!pm(tt[it],et))return!1;for(let it=0;it<tt.length-1;++it)if(Qu(tt[it],tt[it+1],et))return!1;return!0}function cv(tt,et){for(let it=0;it<et.length;it++)if(To(tt,et[it]))return!0;return!1}function vy(tt,et,it){const ct=[];for(let dt=0;dt<tt.length;dt++){const gt=[];for(let xt=0;xt<tt[dt].length;xt++){const bt=Ip(tt[dt][xt],it);dm(et,bt),gt.push(bt)}ct.push(gt)}return ct}function V_(tt,et,it){const ct=[];for(let dt=0;dt<tt.length;dt++){const gt=vy(tt[dt],et,it);ct.push(gt)}return ct}function wy(tt,et,it,ct){if(tt[0]<it[0]||tt[0]>it[2]){const dt=.5*ct;let gt=tt[0]-it[0]>dt?-ct:it[0]-tt[0]>dt?ct:0;gt===0&&(gt=tt[0]-it[2]>dt?-ct:it[2]-tt[0]>dt?ct:0),tt[0]+=gt}dm(et,tt)}function G_(tt,et,it,ct){const dt=Math.pow(2,ct.z)*nu,gt=[ct.x*nu,ct.y*nu],xt=[];if(!tt)return xt;for(const bt of tt)for(const St of bt){const Ct=[St.x+gt[0],St.y+gt[1]];wy(Ct,et,it,dt),xt.push(Ct)}return xt}function by(tt,et,it,ct){const dt=Math.pow(2,ct.z)*nu,gt=[ct.x*nu,ct.y*nu],xt=[];if(!tt)return xt;for(const St of tt){const Ct=[];for(const Pt of St){const jt=[Pt.x+gt[0],Pt.y+gt[1]];dm(et,jt),Ct.push(jt)}xt.push(Ct)}if(et[2]-et[0]<=dt/2){(bt=et)[0]=bt[1]=1/0,bt[2]=bt[3]=-1/0;for(const St of xt)for(const Ct of St)wy(Ct,et,it,dt)}var bt;return xt}class Ju{constructor(et,it){this.type=ho,this.geojson=et,this.geometries=it}static parse(et,it){if(et.length!==2)return it.error(`'within' expression requires exactly one argument, but found ${et.length-1} instead.`);if(Ap(et[1])){const ct=et[1];if(ct.type==="FeatureCollection")for(let dt=0;dt<ct.features.length;++dt){const gt=ct.features[dt].geometry.type;if(gt==="Polygon"||gt==="MultiPolygon")return new Ju(ct,ct.features[dt].geometry)}else if(ct.type==="Feature"){const dt=ct.geometry.type;if(dt==="Polygon"||dt==="MultiPolygon")return new Ju(ct,ct.geometry)}else if(ct.type==="Polygon"||ct.type==="MultiPolygon")return new Ju(ct,ct)}return it.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(et){if(et.geometry()!=null&&et.canonicalID()!=null){if(et.geometryType()==="Point")return function(it,ct){const dt=[1/0,1/0,-1/0,-1/0],gt=[1/0,1/0,-1/0,-1/0],xt=it.canonicalID();if(!xt)return!1;if(ct.type==="Polygon"){const bt=vy(ct.coordinates,gt,xt),St=G_(it.geometry(),dt,gt,xt);if(!Yu(dt,gt))return!1;for(const Ct of St)if(!pm(Ct,bt))return!1}if(ct.type==="MultiPolygon"){const bt=V_(ct.coordinates,gt,xt),St=G_(it.geometry(),dt,gt,xt);if(!Yu(dt,gt))return!1;for(const Ct of St)if(!_y(Ct,bt))return!1}return!0}(et,this.geometries);if(et.geometryType()==="LineString")return function(it,ct){const dt=[1/0,1/0,-1/0,-1/0],gt=[1/0,1/0,-1/0,-1/0],xt=it.canonicalID();if(!xt)return!1;if(ct.type==="Polygon"){const bt=vy(ct.coordinates,gt,xt),St=by(it.geometry(),dt,gt,xt);if(!Yu(dt,gt))return!1;for(const Ct of St)if(!To(Ct,bt))return!1}if(ct.type==="MultiPolygon"){const bt=V_(ct.coordinates,gt,xt),St=by(it.geometry(),dt,gt,xt);if(!Yu(dt,gt))return!1;for(const Ct of St)if(!cv(Ct,bt))return!1}return!0}(et,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var fm=Ju;function _h(tt){if(tt instanceof ru&&(tt.name==="get"&&tt.args.length===1||tt.name==="feature-state"||tt.name==="has"&&tt.args.length===1||tt.name==="properties"||tt.name==="geometry-type"||tt.name==="id"||/^filter-/.test(tt.name))||tt instanceof fm)return!1;let et=!0;return tt.eachChild(it=>{et&&!_h(it)&&(et=!1)}),et}function iu(tt){if(tt instanceof ru&&tt.name==="feature-state")return!1;let et=!0;return tt.eachChild(it=>{et&&!iu(it)&&(et=!1)}),et}function Mu(tt,et){if(tt instanceof ru&&et.indexOf(tt.name)>=0)return!1;let it=!0;return tt.eachChild(ct=>{it&&!Mu(ct,et)&&(it=!1)}),it}class mm{constructor(et,it){this.type=it.type,this.name=et,this.boundExpression=it}static parse(et,it){if(et.length!==2||typeof et[1]!="string")return it.error("'var' expression requires exactly one string literal argument.");const ct=et[1];return it.scope.has(ct)?new mm(ct,it.scope.get(ct)):it.error(`Unknown variable "${ct}". Make sure "${ct}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(et){return this.boundExpression.evaluate(et)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var H_=mm;class Mp{constructor(et,it=[],ct,dt=new z_,gt=[]){this.registry=et,this.path=it,this.key=it.map(xt=>`[${xt}]`).join(""),this.scope=dt,this.errors=gt,this.expectedType=ct}parse(et,it,ct,dt,gt={}){return it?this.concat(it,ct,dt)._parse(et,gt):this._parse(et,gt)}_parse(et,it){function ct(dt,gt,xt){return xt==="assert"?new tu(gt,[dt]):xt==="coerce"?new Ku(gt,[dt]):dt}if(et!==null&&typeof et!="string"&&typeof et!="boolean"&&typeof et!="number"||(et=["literal",et]),Array.isArray(et)){if(et.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const dt=et[0];if(typeof dt!="string")return this.error(`Expression name must be a string, but found ${typeof dt} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const gt=this.registry[dt];if(gt){let xt=gt.parse(et,this);if(!xt)return null;if(this.expectedType){const bt=this.expectedType,St=xt.type;if(bt.kind!=="string"&&bt.kind!=="number"&&bt.kind!=="boolean"&&bt.kind!=="object"&&bt.kind!=="array"||St.kind!=="value")if(bt.kind!=="color"&&bt.kind!=="formatted"&&bt.kind!=="resolvedImage"||St.kind!=="value"&&St.kind!=="string"){if(this.checkSubtype(bt,St))return null}else xt=ct(xt,bt,it.typeAnnotation||"coerce");else xt=ct(xt,bt,it.typeAnnotation||"assert")}if(!(xt instanceof Pu)&&xt.type.kind!=="resolvedImage"&&Sy(xt)){const bt=new yy;try{xt=new Pu(xt.type,xt.evaluate(bt))}catch(St){return this.error(St.message),null}}return xt}return this.error(`Unknown expression "${dt}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(et===void 0?"'undefined' value invalid. Use null instead.":typeof et=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof et} instead.`)}concat(et,it,ct){const dt=typeof et=="number"?this.path.concat(et):this.path,gt=ct?this.scope.concat(ct):this.scope;return new Mp(this.registry,dt,it||null,gt,this.errors)}error(et,...it){const ct=`${this.key}${it.map(dt=>`[${dt}]`).join("")}`;this.errors.push(new Bl(ct,et))}checkSubtype(et,it){const ct=eu(et,it);return ct&&this.error(ct),ct}}var Ey=Mp;function Sy(tt){if(tt instanceof H_)return Sy(tt.boundExpression);if(tt instanceof ru&&tt.name==="error"||tt instanceof Pp||tt instanceof fm)return!1;const et=tt instanceof Ku||tt instanceof tu;let it=!0;return tt.eachChild(ct=>{it=et?it&&Sy(ct):it&&ct instanceof Pu}),!!it&&_h(tt)&&Mu(tt,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function gm(tt,et){const it=tt.length-1;let ct,dt,gt=0,xt=it,bt=0;for(;gt<=xt;)if(bt=Math.floor((gt+xt)/2),ct=tt[bt],dt=tt[bt+1],ct<=et){if(bt===it||et<dt)return bt;gt=bt+1}else{if(!(ct>et))throw new Ps("Input is not a number.");xt=bt-1}return 0}class ym{constructor(et,it,ct){this.type=et,this.input=it,this.labels=[],this.outputs=[];for(const[dt,gt]of ct)this.labels.push(dt),this.outputs.push(gt)}static parse(et,it){if(et.length-1<4)return it.error(`Expected at least 4 arguments, but found only ${et.length-1}.`);if((et.length-1)%2!=0)return it.error("Expected an even number of arguments.");const ct=it.parse(et[1],1,Dn);if(!ct)return null;const dt=[];let gt=null;it.expectedType&&it.expectedType.kind!=="value"&&(gt=it.expectedType);for(let xt=1;xt<et.length;xt+=2){const bt=xt===1?-1/0:et[xt],St=et[xt+1],Ct=xt,Pt=xt+1;if(typeof bt!="number")return it.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ct);if(dt.length&&dt[dt.length-1][0]>=bt)return it.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Ct);const jt=it.parse(St,Pt,gt);if(!jt)return null;gt=gt||jt.type,dt.push([bt,jt])}return new ym(gt,ct,dt)}evaluate(et){const it=this.labels,ct=this.outputs;if(it.length===1)return ct[0].evaluate(et);const dt=this.input.evaluate(et);if(dt<=it[0])return ct[0].evaluate(et);const gt=it.length;return dt>=it[gt-1]?ct[gt-1].evaluate(et):ct[gm(it,dt)].evaluate(et)}eachChild(et){et(this.input);for(const it of this.outputs)et(it)}outputDefined(){return this.outputs.every(et=>et.outputDefined())}serialize(){const et=["step",this.input.serialize()];for(let it=0;it<this.labels.length;it++)it>0&&et.push(this.labels[it]),et.push(this.outputs[it].serialize());return et}}var Ty=ym;function yo(tt,et,it){return tt*(1-it)+et*it}var jp=Object.freeze({__proto__:null,array:function(tt,et,it){return tt.map((ct,dt)=>yo(ct,et[dt],it))},color:function(tt,et,it){return new rs(yo(tt.r,et.r,it),yo(tt.g,et.g,it),yo(tt.b,et.b,it),yo(tt.a,et.a,it))},number:yo});const W_=.95047,Cy=1.08883,q_=4/29,ju=6/29,Ry=3*ju*ju,uv=ju*ju*ju,hv=Math.PI/180,dv=180/Math.PI;function Ay(tt){return tt>uv?Math.pow(tt,1/3):tt/Ry+q_}function ky(tt){return tt>ju?tt*tt*tt:Ry*(tt-q_)}function Py(tt){return 255*(tt<=.0031308?12.92*tt:1.055*Math.pow(tt,1/2.4)-.055)}function _m(tt){return(tt/=255)<=.04045?tt/12.92:Math.pow((tt+.055)/1.055,2.4)}function Z_(tt){const et=_m(tt.r),it=_m(tt.g),ct=_m(tt.b),dt=Ay((.4124564*et+.3575761*it+.1804375*ct)/W_),gt=Ay((.2126729*et+.7151522*it+.072175*ct)/1);return{l:116*gt-16,a:500*(dt-gt),b:200*(gt-Ay((.0193339*et+.119192*it+.9503041*ct)/Cy)),alpha:tt.a}}function X_(tt){let et=(tt.l+16)/116,it=isNaN(tt.a)?et:et+tt.a/500,ct=isNaN(tt.b)?et:et-tt.b/200;return et=1*ky(et),it=W_*ky(it),ct=Cy*ky(ct),new rs(Py(3.2404542*it-1.5371385*et-.4985314*ct),Py(-.969266*it+1.8760108*et+.041556*ct),Py(.0556434*it-.2040259*et+1.0572252*ct),tt.alpha)}function pv(tt,et,it){const ct=et-tt;return tt+it*(ct>180||ct<-180?ct-360*Math.round(ct/360):ct)}const Dp={forward:Z_,reverse:X_,interpolate:function(tt,et,it){return{l:yo(tt.l,et.l,it),a:yo(tt.a,et.a,it),b:yo(tt.b,et.b,it),alpha:yo(tt.alpha,et.alpha,it)}}},_d={forward:function(tt){const{l:et,a:it,b:ct}=Z_(tt),dt=Math.atan2(ct,it)*dv;return{h:dt<0?dt+360:dt,c:Math.sqrt(it*it+ct*ct),l:et,alpha:tt.a}},reverse:function(tt){const et=tt.h*hv,it=tt.c;return X_({l:tt.l,a:Math.cos(et)*it,b:Math.sin(et)*it,alpha:tt.alpha})},interpolate:function(tt,et,it){return{h:pv(tt.h,et.h,it),c:yo(tt.c,et.c,it),l:yo(tt.l,et.l,it),alpha:yo(tt.alpha,et.alpha,it)}}};var Iy=Object.freeze({__proto__:null,hcl:_d,lab:Dp});class Lp{constructor(et,it,ct,dt,gt){this.type=et,this.operator=it,this.interpolation=ct,this.input=dt,this.labels=[],this.outputs=[];for(const[xt,bt]of gt)this.labels.push(xt),this.outputs.push(bt)}static interpolationFactor(et,it,ct,dt){let gt=0;if(et.name==="exponential")gt=My(it,et.base,ct,dt);else if(et.name==="linear")gt=My(it,1,ct,dt);else if(et.name==="cubic-bezier"){const xt=et.controlPoints;gt=new Er(xt[0],xt[1],xt[2],xt[3]).solve(My(it,1,ct,dt))}return gt}static parse(et,it){let[ct,dt,gt,...xt]=et;if(!Array.isArray(dt)||dt.length===0)return it.error("Expected an interpolation type expression.",1);if(dt[0]==="linear")dt={name:"linear"};else if(dt[0]==="exponential"){const Ct=dt[1];if(typeof Ct!="number")return it.error("Exponential interpolation requires a numeric base.",1,1);dt={name:"exponential",base:Ct}}else{if(dt[0]!=="cubic-bezier")return it.error(`Unknown interpolation type ${String(dt[0])}`,1,0);{const Ct=dt.slice(1);if(Ct.length!==4||Ct.some(Pt=>typeof Pt!="number"||Pt<0||Pt>1))return it.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);dt={name:"cubic-bezier",controlPoints:Ct}}}if(et.length-1<4)return it.error(`Expected at least 4 arguments, but found only ${et.length-1}.`);if((et.length-1)%2!=0)return it.error("Expected an even number of arguments.");if(gt=it.parse(gt,2,Dn),!gt)return null;const bt=[];let St=null;ct==="interpolate-hcl"||ct==="interpolate-lab"?St=Js:it.expectedType&&it.expectedType.kind!=="value"&&(St=it.expectedType);for(let Ct=0;Ct<xt.length;Ct+=2){const Pt=xt[Ct],jt=xt[Ct+1],Lt=Ct+3,Bt=Ct+4;if(typeof Pt!="number")return it.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Lt);if(bt.length&&bt[bt.length-1][0]>=Pt)return it.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Lt);const Ft=it.parse(jt,Bt,St);if(!Ft)return null;St=St||Ft.type,bt.push([Pt,Ft])}return St.kind==="number"||St.kind==="color"||St.kind==="array"&&St.itemType.kind==="number"&&typeof St.N=="number"?new Lp(St,ct,dt,gt,bt):it.error(`Type ${Ho(St)} is not interpolatable.`)}evaluate(et){const it=this.labels,ct=this.outputs;if(it.length===1)return ct[0].evaluate(et);const dt=this.input.evaluate(et);if(dt<=it[0])return ct[0].evaluate(et);const gt=it.length;if(dt>=it[gt-1])return ct[gt-1].evaluate(et);const xt=gm(it,dt),bt=Lp.interpolationFactor(this.interpolation,dt,it[xt],it[xt+1]),St=ct[xt].evaluate(et),Ct=ct[xt+1].evaluate(et);return this.operator==="interpolate"?jp[this.type.kind.toLowerCase()](St,Ct,bt):this.operator==="interpolate-hcl"?_d.reverse(_d.interpolate(_d.forward(St),_d.forward(Ct),bt)):Dp.reverse(Dp.interpolate(Dp.forward(St),Dp.forward(Ct),bt))}eachChild(et){et(this.input);for(const it of this.outputs)et(it)}outputDefined(){return this.outputs.every(et=>et.outputDefined())}serialize(){let et;et=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const it=[this.operator,et,this.input.serialize()];for(let ct=0;ct<this.labels.length;ct++)it.push(this.labels[ct],this.outputs[ct].serialize());return it}}function My(tt,et,it,ct){const dt=ct-it,gt=tt-it;return dt===0?0:et===1?gt/dt:(Math.pow(et,gt)-1)/(Math.pow(et,dt)-1)}var Ul=Lp;class xm{constructor(et,it){this.type=et,this.args=it}static parse(et,it){if(et.length<2)return it.error("Expectected at least one argument.");let ct=null;const dt=it.expectedType;dt&&dt.kind!=="value"&&(ct=dt);const gt=[];for(const bt of et.slice(1)){const St=it.parse(bt,1+gt.length,ct,void 0,{typeAnnotation:"omit"});if(!St)return null;ct=ct||St.type,gt.push(St)}const xt=dt&&gt.some(bt=>eu(dt,bt.type));return new xm(xt?po:ct,gt)}evaluate(et){let it,ct=null,dt=0;for(const gt of this.args){if(dt++,ct=gt.evaluate(et),ct&&ct instanceof yl&&!ct.available&&(it||(it=ct),ct=null,dt===this.args.length))return it;if(ct!==null)break}return ct}eachChild(et){this.args.forEach(et)}outputDefined(){return this.args.every(et=>et.outputDefined())}serialize(){const et=["coalesce"];return this.eachChild(it=>{et.push(it.serialize())}),et}}var jy=xm;class vm{constructor(et,it){this.type=it.type,this.bindings=[].concat(et),this.result=it}evaluate(et){return this.result.evaluate(et)}eachChild(et){for(const it of this.bindings)et(it[1]);et(this.result)}static parse(et,it){if(et.length<4)return it.error(`Expected at least 3 arguments, but found ${et.length-1} instead.`);const ct=[];for(let gt=1;gt<et.length-1;gt+=2){const xt=et[gt];if(typeof xt!="string")return it.error(`Expected string, but found ${typeof xt} instead.`,gt);if(/[^a-zA-Z0-9_]/.test(xt))return it.error("Variable names must contain only alphanumeric characters or '_'.",gt);const bt=it.parse(et[gt+1],gt+1);if(!bt)return null;ct.push([xt,bt])}const dt=it.parse(et[et.length-1],et.length-1,it.expectedType,ct);return dt?new vm(ct,dt):null}outputDefined(){return this.result.outputDefined()}serialize(){const et=["let"];for(const[it,ct]of this.bindings)et.push(it,ct.serialize());return et.push(this.result.serialize()),et}}var K_=vm;class Dy{constructor(et,it,ct){this.type=et,this.index=it,this.input=ct}static parse(et,it){if(et.length!==3)return it.error(`Expected 2 arguments, but found ${et.length-1} instead.`);const ct=it.parse(et[1],1,Dn),dt=it.parse(et[2],2,ba(it.expectedType||po));return ct&&dt?new Dy(dt.type.itemType,ct,dt):null}evaluate(et){const it=this.index.evaluate(et),ct=this.input.evaluate(et);if(it<0)throw new Ps(`Array index out of bounds: ${it} < 0.`);if(it>=ct.length)throw new Ps(`Array index out of bounds: ${it} > ${ct.length-1}.`);if(it!==Math.floor(it))throw new Ps(`Array index must be an integer, but found ${it} instead.`);return ct[it]}eachChild(et){et(this.index),et(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var fv=Dy;class Ly{constructor(et,it){this.type=ho,this.needle=et,this.haystack=it}static parse(et,it){if(et.length!==3)return it.error(`Expected 2 arguments, but found ${et.length-1} instead.`);const ct=it.parse(et[1],1,po),dt=it.parse(et[2],2,po);return ct&&dt?Sp(ct.type,[ho,mo,Dn,Zu,po])?new Ly(ct,dt):it.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ho(ct.type)} instead`):null}evaluate(et){const it=this.needle.evaluate(et),ct=this.haystack.evaluate(et);if(ct==null)return!1;if(!Tp(it,["boolean","string","number","null"]))throw new Ps(`Expected first argument to be of type boolean, string, number or null, but found ${Ho(Yo(it))} instead.`);if(!Tp(ct,["string","array"]))throw new Ps(`Expected second argument to be of type array or string, but found ${Ho(Yo(ct))} instead.`);return ct.indexOf(it)>=0}eachChild(et){et(this.needle),et(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var wm=Ly;class $p{constructor(et,it,ct){this.type=Dn,this.needle=et,this.haystack=it,this.fromIndex=ct}static parse(et,it){if(et.length<=2||et.length>=5)return it.error(`Expected 3 or 4 arguments, but found ${et.length-1} instead.`);const ct=it.parse(et[1],1,po),dt=it.parse(et[2],2,po);if(!ct||!dt)return null;if(!Sp(ct.type,[ho,mo,Dn,Zu,po]))return it.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ho(ct.type)} instead`);if(et.length===4){const gt=it.parse(et[3],3,Dn);return gt?new $p(ct,dt,gt):null}return new $p(ct,dt)}evaluate(et){const it=this.needle.evaluate(et),ct=this.haystack.evaluate(et);if(!Tp(it,["boolean","string","number","null"]))throw new Ps(`Expected first argument to be of type boolean, string, number or null, but found ${Ho(Yo(it))} instead.`);if(!Tp(ct,["string","array"]))throw new Ps(`Expected second argument to be of type array or string, but found ${Ho(Yo(ct))} instead.`);if(this.fromIndex){const dt=this.fromIndex.evaluate(et);return ct.indexOf(it,dt)}return ct.indexOf(it)}eachChild(et){et(this.needle),et(this.haystack),this.fromIndex&&et(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const et=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),et]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Y_=$p;class $y{constructor(et,it,ct,dt,gt,xt){this.inputType=et,this.type=it,this.input=ct,this.cases=dt,this.outputs=gt,this.otherwise=xt}static parse(et,it){if(et.length<5)return it.error(`Expected at least 4 arguments, but found only ${et.length-1}.`);if(et.length%2!=1)return it.error("Expected an even number of arguments.");let ct,dt;it.expectedType&&it.expectedType.kind!=="value"&&(dt=it.expectedType);const gt={},xt=[];for(let Ct=2;Ct<et.length-1;Ct+=2){let Pt=et[Ct];const jt=et[Ct+1];Array.isArray(Pt)||(Pt=[Pt]);const Lt=it.concat(Ct);if(Pt.length===0)return Lt.error("Expected at least one branch label.");for(const Ft of Pt){if(typeof Ft!="number"&&typeof Ft!="string")return Lt.error("Branch labels must be numbers or strings.");if(typeof Ft=="number"&&Math.abs(Ft)>Number.MAX_SAFE_INTEGER)return Lt.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ft=="number"&&Math.floor(Ft)!==Ft)return Lt.error("Numeric branch labels must be integer values.");if(ct){if(Lt.checkSubtype(ct,Yo(Ft)))return null}else ct=Yo(Ft);if(gt[String(Ft)]!==void 0)return Lt.error("Branch labels must be unique.");gt[String(Ft)]=xt.length}const Bt=it.parse(jt,Ct,dt);if(!Bt)return null;dt=dt||Bt.type,xt.push(Bt)}const bt=it.parse(et[1],1,po);if(!bt)return null;const St=it.parse(et[et.length-1],et.length-1,dt);return St?bt.type.kind!=="value"&&it.concat(1).checkSubtype(ct,bt.type)?null:new $y(ct,dt,bt,gt,xt,St):null}evaluate(et){const it=this.input.evaluate(et);return(Yo(it)===this.inputType&&this.outputs[this.cases[it]]||this.otherwise).evaluate(et)}eachChild(et){et(this.input),this.outputs.forEach(et),et(this.otherwise)}outputDefined(){return this.outputs.every(et=>et.outputDefined())&&this.otherwise.outputDefined()}serialize(){const et=["match",this.input.serialize()],it=Object.keys(this.cases).sort(),ct=[],dt={};for(const xt of it){const bt=dt[this.cases[xt]];bt===void 0?(dt[this.cases[xt]]=ct.length,ct.push([this.cases[xt],[xt]])):ct[bt][1].push(xt)}const gt=xt=>this.inputType.kind==="number"?Number(xt):xt;for(const[xt,bt]of ct)et.push(bt.length===1?gt(bt[0]):bt.map(gt)),et.push(this.outputs[xt].serialize());return et.push(this.otherwise.serialize()),et}}var mv=$y;class Oy{constructor(et,it,ct){this.type=et,this.branches=it,this.otherwise=ct}static parse(et,it){if(et.length<4)return it.error(`Expected at least 3 arguments, but found only ${et.length-1}.`);if(et.length%2!=0)return it.error("Expected an odd number of arguments.");let ct;it.expectedType&&it.expectedType.kind!=="value"&&(ct=it.expectedType);const dt=[];for(let xt=1;xt<et.length-1;xt+=2){const bt=it.parse(et[xt],xt,ho);if(!bt)return null;const St=it.parse(et[xt+1],xt+1,ct);if(!St)return null;dt.push([bt,St]),ct=ct||St.type}const gt=it.parse(et[et.length-1],et.length-1,ct);return gt?new Oy(ct,dt,gt):null}evaluate(et){for(const[it,ct]of this.branches)if(it.evaluate(et))return ct.evaluate(et);return this.otherwise.evaluate(et)}eachChild(et){for(const[it,ct]of this.branches)et(it),et(ct);et(this.otherwise)}outputDefined(){return this.branches.every(([et,it])=>it.outputDefined())&&this.otherwise.outputDefined()}serialize(){const et=["case"];return this.eachChild(it=>{et.push(it.serialize())}),et}}var Q_=Oy;class Op{constructor(et,it,ct,dt){this.type=et,this.input=it,this.beginIndex=ct,this.endIndex=dt}static parse(et,it){if(et.length<=2||et.length>=5)return it.error(`Expected 3 or 4 arguments, but found ${et.length-1} instead.`);const ct=it.parse(et[1],1,po),dt=it.parse(et[2],2,Dn);if(!ct||!dt)return null;if(!Sp(ct.type,[ba(po),mo,po]))return it.error(`Expected first argument to be of type array or string, but found ${Ho(ct.type)} instead`);if(et.length===4){const gt=it.parse(et[3],3,Dn);return gt?new Op(ct.type,ct,dt,gt):null}return new Op(ct.type,ct,dt)}evaluate(et){const it=this.input.evaluate(et),ct=this.beginIndex.evaluate(et);if(!Tp(it,["string","array"]))throw new Ps(`Expected first argument to be of type array or string, but found ${Ho(Yo(it))} instead.`);if(this.endIndex){const dt=this.endIndex.evaluate(et);return it.slice(ct,dt)}return it.slice(ct)}eachChild(et){et(this.input),et(this.beginIndex),this.endIndex&&et(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const et=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),et]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var J_=Op;function bm(tt,et){return tt==="=="||tt==="!="?et.kind==="boolean"||et.kind==="string"||et.kind==="number"||et.kind==="null"||et.kind==="value":et.kind==="string"||et.kind==="number"||et.kind==="value"}function ex(tt,et,it,ct){return ct.compare(et,it)===0}function ep(tt,et,it){const ct=tt!=="=="&&tt!=="!=";return class mE{constructor(gt,xt,bt){this.type=ho,this.lhs=gt,this.rhs=xt,this.collator=bt,this.hasUntypedArgument=gt.type.kind==="value"||xt.type.kind==="value"}static parse(gt,xt){if(gt.length!==3&&gt.length!==4)return xt.error("Expected two or three arguments.");const bt=gt[0];let St=xt.parse(gt[1],1,po);if(!St)return null;if(!bm(bt,St.type))return xt.concat(1).error(`"${bt}" comparisons are not supported for type '${Ho(St.type)}'.`);let Ct=xt.parse(gt[2],2,po);if(!Ct)return null;if(!bm(bt,Ct.type))return xt.concat(2).error(`"${bt}" comparisons are not supported for type '${Ho(Ct.type)}'.`);if(St.type.kind!==Ct.type.kind&&St.type.kind!=="value"&&Ct.type.kind!=="value")return xt.error(`Cannot compare types '${Ho(St.type)}' and '${Ho(Ct.type)}'.`);ct&&(St.type.kind==="value"&&Ct.type.kind!=="value"?St=new tu(Ct.type,[St]):St.type.kind!=="value"&&Ct.type.kind==="value"&&(Ct=new tu(St.type,[Ct])));let Pt=null;if(gt.length===4){if(St.type.kind!=="string"&&Ct.type.kind!=="string"&&St.type.kind!=="value"&&Ct.type.kind!=="value")return xt.error("Cannot use collator to compare non-string types.");if(Pt=xt.parse(gt[3],3,ga),!Pt)return null}return new mE(St,Ct,Pt)}evaluate(gt){const xt=this.lhs.evaluate(gt),bt=this.rhs.evaluate(gt);if(ct&&this.hasUntypedArgument){const St=Yo(xt),Ct=Yo(bt);if(St.kind!==Ct.kind||St.kind!=="string"&&St.kind!=="number")throw new Ps(`Expected arguments for "${tt}" to be (string, string) or (number, number), but found (${St.kind}, ${Ct.kind}) instead.`)}if(this.collator&&!ct&&this.hasUntypedArgument){const St=Yo(xt),Ct=Yo(bt);if(St.kind!=="string"||Ct.kind!=="string")return et(gt,xt,bt)}return this.collator?it(gt,xt,bt,this.collator.evaluate(gt)):et(gt,xt,bt)}eachChild(gt){gt(this.lhs),gt(this.rhs),this.collator&&gt(this.collator)}outputDefined(){return!0}serialize(){const gt=[tt];return this.eachChild(xt=>{gt.push(xt.serialize())}),gt}}}const gv=ep("==",function(tt,et,it){return et===it},ex),yv=ep("!=",function(tt,et,it){return et!==it},function(tt,et,it,ct){return!ex(0,et,it,ct)}),_v=ep("<",function(tt,et,it){return et<it},function(tt,et,it,ct){return ct.compare(et,it)<0}),xv=ep(">",function(tt,et,it){return et>it},function(tt,et,it,ct){return ct.compare(et,it)>0}),vv=ep("<=",function(tt,et,it){return et<=it},function(tt,et,it,ct){return ct.compare(et,it)<=0}),tx=ep(">=",function(tt,et,it){return et>=it},function(tt,et,it,ct){return ct.compare(et,it)>=0});class Em{constructor(et,it,ct,dt,gt,xt){this.type=mo,this.number=et,this.locale=it,this.currency=ct,this.unit=dt,this.minFractionDigits=gt,this.maxFractionDigits=xt}static parse(et,it){if(et.length!==3)return it.error("Expected two arguments.");const ct=it.parse(et[1],1,Dn);if(!ct)return null;const dt=et[2];if(typeof dt!="object"||Array.isArray(dt))return it.error("NumberFormat options argument must be an object.");let gt=null;if(dt.locale&&(gt=it.parse(dt.locale,1,mo),!gt))return null;let xt=null;if(dt.currency&&(xt=it.parse(dt.currency,1,mo),!xt))return null;let bt=null;if(dt.unit&&(bt=it.parse(dt.unit,1,mo),!bt))return null;let St=null;if(dt["min-fraction-digits"]&&(St=it.parse(dt["min-fraction-digits"],1,Dn),!St))return null;let Ct=null;return dt["max-fraction-digits"]&&(Ct=it.parse(dt["max-fraction-digits"],1,Dn),!Ct)?null:new Em(ct,gt,xt,bt,St,Ct)}evaluate(et){return new Intl.NumberFormat(this.locale?this.locale.evaluate(et):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(et):void 0,unit:this.unit?this.unit.evaluate(et):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(et):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(et):void 0}).format(this.number.evaluate(et))}eachChild(et){et(this.number),this.locale&&et(this.locale),this.currency&&et(this.currency),this.unit&&et(this.unit),this.minFractionDigits&&et(this.minFractionDigits),this.maxFractionDigits&&et(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const et={};return this.locale&&(et.locale=this.locale.serialize()),this.currency&&(et.currency=this.currency.serialize()),this.unit&&(et.unit=this.unit.serialize()),this.minFractionDigits&&(et["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(et["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),et]}}class tp{constructor(et){this.type=Dn,this.input=et}static parse(et,it){if(et.length!==2)return it.error(`Expected 1 argument, but found ${et.length-1} instead.`);const ct=it.parse(et[1],1);return ct?ct.type.kind!=="array"&&ct.type.kind!=="string"&&ct.type.kind!=="value"?it.error(`Expected argument of type string or array, but found ${Ho(ct.type)} instead.`):new tp(ct):null}evaluate(et){const it=this.input.evaluate(et);if(typeof it=="string"||Array.isArray(it))return it.length;throw new Ps(`Expected value to be of type string or array, but found ${Ho(Yo(it))} instead.`)}eachChild(et){et(this.input)}outputDefined(){return!1}serialize(){const et=["length"];return this.eachChild(it=>{et.push(it.serialize())}),et}}const rx={"==":gv,"!=":yv,">":xv,"<":_v,">=":tx,"<=":vv,array:tu,at:fv,boolean:tu,case:Q_,coalesce:jy,collator:Pp,format:yu,image:hm,in:wm,"index-of":Y_,interpolate:Ul,"interpolate-hcl":Ul,"interpolate-lab":Ul,length:tp,let:K_,literal:Pu,match:mv,number:tu,"number-format":Em,object:tu,slice:J_,step:Ty,string:tu,"to-boolean":Ku,"to-color":Ku,"to-number":Ku,"to-string":Ku,var:H_,within:fm};function nx(tt,[et,it,ct,dt]){et=et.evaluate(tt),it=it.evaluate(tt),ct=ct.evaluate(tt);const gt=dt?dt.evaluate(tt):1,xt=F_(et,it,ct,gt);if(xt)throw new Ps(xt);return new rs(et/255*gt,it/255*gt,ct/255*gt,gt)}function ou(tt,et){return tt in et}function Sm(tt,et){const it=et[tt];return it===void 0?null:it}function _l(tt){return{type:tt}}ru.register(rx,{error:[{kind:"error"},[mo],(tt,[et])=>{throw new Ps(et.evaluate(tt))}],typeof:[mo,[po],(tt,[et])=>Ho(Yo(et.evaluate(tt)))],"to-rgba":[ba(Dn,4),[Js],(tt,[et])=>et.evaluate(tt).toArray()],rgb:[Js,[Dn,Dn,Dn],nx],rgba:[Js,[Dn,Dn,Dn,Dn],nx],has:{type:ho,overloads:[[[mo],(tt,[et])=>ou(et.evaluate(tt),tt.properties())],[[mo,Il],(tt,[et,it])=>ou(et.evaluate(tt),it.evaluate(tt))]]},get:{type:po,overloads:[[[mo],(tt,[et])=>Sm(et.evaluate(tt),tt.properties())],[[mo,Il],(tt,[et,it])=>Sm(et.evaluate(tt),it.evaluate(tt))]]},"feature-state":[po,[mo],(tt,[et])=>Sm(et.evaluate(tt),tt.featureState||{})],properties:[Il,[],tt=>tt.properties()],"geometry-type":[mo,[],tt=>tt.geometryType()],id:[po,[],tt=>tt.id()],zoom:[Dn,[],tt=>tt.globals.zoom],pitch:[Dn,[],tt=>tt.globals.pitch||0],"distance-from-center":[Dn,[],tt=>tt.distanceFromCenter()],"heatmap-density":[Dn,[],tt=>tt.globals.heatmapDensity||0],"line-progress":[Dn,[],tt=>tt.globals.lineProgress||0],"sky-radial-progress":[Dn,[],tt=>tt.globals.skyRadialProgress||0],accumulated:[po,[],tt=>tt.globals.accumulated===void 0?null:tt.globals.accumulated],"+":[Dn,_l(Dn),(tt,et)=>{let it=0;for(const ct of et)it+=ct.evaluate(tt);return it}],"*":[Dn,_l(Dn),(tt,et)=>{let it=1;for(const ct of et)it*=ct.evaluate(tt);return it}],"-":{type:Dn,overloads:[[[Dn,Dn],(tt,[et,it])=>et.evaluate(tt)-it.evaluate(tt)],[[Dn],(tt,[et])=>-et.evaluate(tt)]]},"/":[Dn,[Dn,Dn],(tt,[et,it])=>et.evaluate(tt)/it.evaluate(tt)],"%":[Dn,[Dn,Dn],(tt,[et,it])=>et.evaluate(tt)%it.evaluate(tt)],ln2:[Dn,[],()=>Math.LN2],pi:[Dn,[],()=>Math.PI],e:[Dn,[],()=>Math.E],"^":[Dn,[Dn,Dn],(tt,[et,it])=>Math.pow(et.evaluate(tt),it.evaluate(tt))],sqrt:[Dn,[Dn],(tt,[et])=>Math.sqrt(et.evaluate(tt))],log10:[Dn,[Dn],(tt,[et])=>Math.log(et.evaluate(tt))/Math.LN10],ln:[Dn,[Dn],(tt,[et])=>Math.log(et.evaluate(tt))],log2:[Dn,[Dn],(tt,[et])=>Math.log(et.evaluate(tt))/Math.LN2],sin:[Dn,[Dn],(tt,[et])=>Math.sin(et.evaluate(tt))],cos:[Dn,[Dn],(tt,[et])=>Math.cos(et.evaluate(tt))],tan:[Dn,[Dn],(tt,[et])=>Math.tan(et.evaluate(tt))],asin:[Dn,[Dn],(tt,[et])=>Math.asin(et.evaluate(tt))],acos:[Dn,[Dn],(tt,[et])=>Math.acos(et.evaluate(tt))],atan:[Dn,[Dn],(tt,[et])=>Math.atan(et.evaluate(tt))],min:[Dn,_l(Dn),(tt,et)=>Math.min(...et.map(it=>it.evaluate(tt)))],max:[Dn,_l(Dn),(tt,et)=>Math.max(...et.map(it=>it.evaluate(tt)))],abs:[Dn,[Dn],(tt,[et])=>Math.abs(et.evaluate(tt))],round:[Dn,[Dn],(tt,[et])=>{const it=et.evaluate(tt);return it<0?-Math.round(-it):Math.round(it)}],floor:[Dn,[Dn],(tt,[et])=>Math.floor(et.evaluate(tt))],ceil:[Dn,[Dn],(tt,[et])=>Math.ceil(et.evaluate(tt))],"filter-==":[ho,[mo,po],(tt,[et,it])=>tt.properties()[et.value]===it.value],"filter-id-==":[ho,[po],(tt,[et])=>tt.id()===et.value],"filter-type-==":[ho,[mo],(tt,[et])=>tt.geometryType()===et.value],"filter-<":[ho,[mo,po],(tt,[et,it])=>{const ct=tt.properties()[et.value],dt=it.value;return typeof ct==typeof dt&&ct<dt}],"filter-id-<":[ho,[po],(tt,[et])=>{const it=tt.id(),ct=et.value;return typeof it==typeof ct&&it<ct}],"filter->":[ho,[mo,po],(tt,[et,it])=>{const ct=tt.properties()[et.value],dt=it.value;return typeof ct==typeof dt&&ct>dt}],"filter-id->":[ho,[po],(tt,[et])=>{const it=tt.id(),ct=et.value;return typeof it==typeof ct&&it>ct}],"filter-<=":[ho,[mo,po],(tt,[et,it])=>{const ct=tt.properties()[et.value],dt=it.value;return typeof ct==typeof dt&&ct<=dt}],"filter-id-<=":[ho,[po],(tt,[et])=>{const it=tt.id(),ct=et.value;return typeof it==typeof ct&&it<=ct}],"filter->=":[ho,[mo,po],(tt,[et,it])=>{const ct=tt.properties()[et.value],dt=it.value;return typeof ct==typeof dt&&ct>=dt}],"filter-id->=":[ho,[po],(tt,[et])=>{const it=tt.id(),ct=et.value;return typeof it==typeof ct&&it>=ct}],"filter-has":[ho,[po],(tt,[et])=>et.value in tt.properties()],"filter-has-id":[ho,[],tt=>tt.id()!==null&&tt.id()!==void 0],"filter-type-in":[ho,[ba(mo)],(tt,[et])=>et.value.indexOf(tt.geometryType())>=0],"filter-id-in":[ho,[ba(po)],(tt,[et])=>et.value.indexOf(tt.id())>=0],"filter-in-small":[ho,[mo,ba(po)],(tt,[et,it])=>it.value.indexOf(tt.properties()[et.value])>=0],"filter-in-large":[ho,[mo,ba(po)],(tt,[et,it])=>function(ct,dt,gt,xt){for(;gt<=xt;){const bt=gt+xt>>1;if(dt[bt]===ct)return!0;dt[bt]>ct?xt=bt-1:gt=bt+1}return!1}(tt.properties()[et.value],it.value,0,it.value.length-1)],all:{type:ho,overloads:[[[ho,ho],(tt,[et,it])=>et.evaluate(tt)&&it.evaluate(tt)],[_l(ho),(tt,et)=>{for(const it of et)if(!it.evaluate(tt))return!1;return!0}]]},any:{type:ho,overloads:[[[ho,ho],(tt,[et,it])=>et.evaluate(tt)||it.evaluate(tt)],[_l(ho),(tt,et)=>{for(const it of et)if(it.evaluate(tt))return!0;return!1}]]},"!":[ho,[ho],(tt,[et])=>!et.evaluate(tt)],"is-supported-script":[ho,[mo],(tt,[et])=>{const it=tt.globals&&tt.globals.isSupportedScript;return!it||it(et.evaluate(tt))}],upcase:[mo,[mo],(tt,[et])=>et.evaluate(tt).toUpperCase()],downcase:[mo,[mo],(tt,[et])=>et.evaluate(tt).toLowerCase()],concat:[mo,_l(po),(tt,et)=>et.map(it=>kp(it.evaluate(tt))).join("")],"resolved-locale":[mo,[ga],(tt,[et])=>et.evaluate(tt).resolvedLocale()]});var zp=rx;function ix(tt){return{result:"success",value:tt}}function Du(tt){return{result:"error",value:tt}}function rp(tt){return tt["property-type"]==="data-driven"}function Tm(tt){return!!tt.expression&&tt.expression.parameters.indexOf("zoom")>-1}function Cm(tt){return!!tt.expression&&tt.expression.interpolated}function _o(tt){return tt instanceof Number?"number":tt instanceof String?"string":tt instanceof Boolean?"boolean":Array.isArray(tt)?"array":tt===null?"null":typeof tt}function Np(tt){return typeof tt=="object"&&tt!==null&&!Array.isArray(tt)}function ox(tt){return tt}function Rm(tt,et){const it=et.type==="color",ct=tt.stops&&typeof tt.stops[0][0]=="object",dt=ct||!(ct||tt.property!==void 0),gt=tt.type||(Cm(et)?"exponential":"interval");if(it&&((tt=_c({},tt)).stops&&(tt.stops=tt.stops.map(Ct=>[Ct[0],rs.parse(Ct[1])])),tt.default=rs.parse(tt.default?tt.default:et.default)),tt.colorSpace&&tt.colorSpace!=="rgb"&&!Iy[tt.colorSpace])throw new Error(`Unknown color space: ${tt.colorSpace}`);let xt,bt,St;if(gt==="exponential")xt=su;else if(gt==="interval")xt=Am;else if(gt==="categorical"){xt=sx,bt=Object.create(null);for(const Ct of tt.stops)bt[Ct[0]]=Ct[1];St=typeof tt.stops[0][0]}else{if(gt!=="identity")throw new Error(`Unknown function type "${gt}"`);xt=ax}if(ct){const Ct={},Pt=[];for(let Bt=0;Bt<tt.stops.length;Bt++){const Ft=tt.stops[Bt],Wt=Ft[0].zoom;Ct[Wt]===void 0&&(Ct[Wt]={zoom:Wt,type:tt.type,property:tt.property,default:tt.default,stops:[]},Pt.push(Wt)),Ct[Wt].stops.push([Ft[0].value,Ft[1]])}const jt=[];for(const Bt of Pt)jt.push([Ct[Bt].zoom,Rm(Ct[Bt],et)]);const Lt={name:"linear"};return{kind:"composite",interpolationType:Lt,interpolationFactor:Ul.interpolationFactor.bind(void 0,Lt),zoomStops:jt.map(Bt=>Bt[0]),evaluate:({zoom:Bt},Ft)=>su({stops:jt,base:tt.base},et,Bt).evaluate(Bt,Ft)}}if(dt){const Ct=gt==="exponential"?{name:"exponential",base:tt.base!==void 0?tt.base:1}:null;return{kind:"camera",interpolationType:Ct,interpolationFactor:Ul.interpolationFactor.bind(void 0,Ct),zoomStops:tt.stops.map(Pt=>Pt[0]),evaluate:({zoom:Pt})=>xt(tt,et,Pt,bt,St)}}return{kind:"source",evaluate(Ct,Pt){const jt=Pt&&Pt.properties?Pt.properties[tt.property]:void 0;return jt===void 0?np(tt.default,et.default):xt(tt,et,jt,bt,St)}}}function np(tt,et,it){return tt!==void 0?tt:et!==void 0?et:it!==void 0?it:void 0}function sx(tt,et,it,ct,dt){return np(typeof it===dt?ct[it]:void 0,tt.default,et.default)}function Am(tt,et,it){if(_o(it)!=="number")return np(tt.default,et.default);const ct=tt.stops.length;if(ct===1||it<=tt.stops[0][0])return tt.stops[0][1];if(it>=tt.stops[ct-1][0])return tt.stops[ct-1][1];const dt=gm(tt.stops.map(gt=>gt[0]),it);return tt.stops[dt][1]}function su(tt,et,it){const ct=tt.base!==void 0?tt.base:1;if(_o(it)!=="number")return np(tt.default,et.default);const dt=tt.stops.length;if(dt===1||it<=tt.stops[0][0])return tt.stops[0][1];if(it>=tt.stops[dt-1][0])return tt.stops[dt-1][1];const gt=gm(tt.stops.map(Pt=>Pt[0]),it),xt=function(Pt,jt,Lt,Bt){const Ft=Bt-Lt,Wt=Pt-Lt;return Ft===0?0:jt===1?Wt/Ft:(Math.pow(jt,Wt)-1)/(Math.pow(jt,Ft)-1)}(it,ct,tt.stops[gt][0],tt.stops[gt+1][0]),bt=tt.stops[gt][1],St=tt.stops[gt+1][1];let Ct=jp[et.type]||ox;if(tt.colorSpace&&tt.colorSpace!=="rgb"){const Pt=Iy[tt.colorSpace];Ct=(jt,Lt)=>Pt.reverse(Pt.interpolate(Pt.forward(jt),Pt.forward(Lt),xt))}return typeof bt.evaluate=="function"?{evaluate(...Pt){const jt=bt.evaluate.apply(void 0,Pt),Lt=St.evaluate.apply(void 0,Pt);if(jt!==void 0&&Lt!==void 0)return Ct(jt,Lt,xt)}}:Ct(bt,St,xt)}function ax(tt,et,it){return et.type==="color"?it=rs.parse(it):et.type==="formatted"?it=Hs.fromString(it.toString()):et.type==="resolvedImage"?it=yl.fromString(it.toString()):_o(it)===et.type||et.type==="enum"&&et.values[it]||(it=void 0),np(it,tt.default,et.default)}class km{constructor(et,it){this.expression=et,this._warningHistory={},this._evaluator=new yy,this._defaultValue=it?function(ct){return ct.type==="color"&&(Np(ct.default)||Array.isArray(ct.default))?new rs(0,0,0,0):ct.type==="color"?rs.parse(ct.default)||null:ct.default===void 0?null:ct.default}(it):null,this._enumValues=it&&it.type==="enum"?it.values:null}evaluateWithoutErrorHandling(et,it,ct,dt,gt,xt,bt,St){return this._evaluator.globals=et,this._evaluator.feature=it,this._evaluator.featureState=ct,this._evaluator.canonical=dt||null,this._evaluator.availableImages=gt||null,this._evaluator.formattedSection=xt,this._evaluator.featureTileCoord=bt||null,this._evaluator.featureDistanceData=St||null,this.expression.evaluate(this._evaluator)}evaluate(et,it,ct,dt,gt,xt,bt,St){this._evaluator.globals=et,this._evaluator.feature=it||null,this._evaluator.featureState=ct||null,this._evaluator.canonical=dt||null,this._evaluator.availableImages=gt||null,this._evaluator.formattedSection=xt||null,this._evaluator.featureTileCoord=bt||null,this._evaluator.featureDistanceData=St||null;try{const Ct=this.expression.evaluate(this._evaluator);if(Ct==null||typeof Ct=="number"&&Ct!=Ct)return this._defaultValue;if(this._enumValues&&!(Ct in this._enumValues))throw new Ps(`Expected value to be one of ${Object.keys(this._enumValues).map(Pt=>JSON.stringify(Pt)).join(", ")}, but found ${JSON.stringify(Ct)} instead.`);return Ct}catch(Ct){return this._warningHistory[Ct.message]||(this._warningHistory[Ct.message]=!0,typeof console<"u"&&console.warn(Ct.message)),this._defaultValue}}}function ip(tt){return Array.isArray(tt)&&tt.length>0&&typeof tt[0]=="string"&&tt[0]in zp}function op(tt,et){const it=new Ey(zp,[],et?function(dt){const gt={color:Js,string:mo,number:Dn,enum:mo,boolean:ho,formatted:Ep,resolvedImage:ku};return dt.type==="array"?ba(gt[dt.value]||po,dt.length):gt[dt.type]}(et):void 0),ct=it.parse(tt,void 0,void 0,void 0,et&&et.type==="string"?{typeAnnotation:"coerce"}:void 0);return ct?ix(new km(ct,et)):Du(it.errors)}class zy{constructor(et,it){this.kind=et,this._styleExpression=it,this.isStateDependent=et!=="constant"&&!iu(it.expression)}evaluateWithoutErrorHandling(et,it,ct,dt,gt,xt){return this._styleExpression.evaluateWithoutErrorHandling(et,it,ct,dt,gt,xt)}evaluate(et,it,ct,dt,gt,xt){return this._styleExpression.evaluate(et,it,ct,dt,gt,xt)}}class Bp{constructor(et,it,ct,dt){this.kind=et,this.zoomStops=ct,this._styleExpression=it,this.isStateDependent=et!=="camera"&&!iu(it.expression),this.interpolationType=dt}evaluateWithoutErrorHandling(et,it,ct,dt,gt,xt){return this._styleExpression.evaluateWithoutErrorHandling(et,it,ct,dt,gt,xt)}evaluate(et,it,ct,dt,gt,xt){return this._styleExpression.evaluate(et,it,ct,dt,gt,xt)}interpolationFactor(et,it,ct){return this.interpolationType?Ul.interpolationFactor(this.interpolationType,et,it,ct):0}}function Fp(tt,et){if((tt=op(tt,et)).result==="error")return tt;const it=tt.value.expression,ct=_h(it);if(!ct&&!rp(et))return Du([new Bl("","data expressions not supported")]);const dt=Mu(it,["zoom","pitch","distance-from-center"]);if(!dt&&!Tm(et))return Du([new Bl("","zoom expressions not supported")]);const gt=Im(it);return gt||dt?gt instanceof Bl?Du([gt]):gt instanceof Ul&&!Cm(et)?Du([new Bl("",'"interpolate" expressions cannot be used with this property')]):ix(gt?new Bp(ct?"camera":"composite",tt.value,gt.labels,gt instanceof Ul?gt.interpolation:void 0):new zy(ct?"constant":"source",tt.value)):Du([new Bl("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Pm{constructor(et,it){this._parameters=et,this._specification=it,_c(this,Rm(this._parameters,this._specification))}static deserialize(et){return new Pm(et._parameters,et._specification)}static serialize(et){return{_parameters:et._parameters,_specification:et._specification}}}function Im(tt){let et=null;if(tt instanceof K_)et=Im(tt.result);else if(tt instanceof jy){for(const it of tt.args)if(et=Im(it),et)break}else(tt instanceof Ty||tt instanceof Ul)&&tt.input instanceof ru&&tt.input.name==="zoom"&&(et=tt);return et instanceof Bl||tt.eachChild(it=>{const ct=Im(it);ct instanceof Bl?et=ct:!et&&ct?et=new Bl("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):et&&ct&&et!==ct&&(et=new Bl("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),et}class Ln{constructor(et,it,ct,dt){this.message=(et?`${et}: `:"")+ct,dt&&(this.identifier=dt),it!=null&&it.__line__&&(this.line=it.__line__)}}function Ml(tt){const et=tt.key,it=tt.value,ct=tt.valueSpec||{},dt=tt.objectElementValidators||{},gt=tt.style,xt=tt.styleSpec;let bt=[];const St=_o(it);if(St!=="object")return[new Ln(et,it,`object expected, ${St} found`)];for(const Ct in it){const Pt=Ct.split(".")[0];let jt;dt[Pt]?jt=dt[Pt]:ct[Pt]?jt=Os:dt["*"]?jt=dt["*"]:ct["*"]&&(jt=Os),jt?bt=bt.concat(jt({key:(et&&`${et}.`)+Ct,value:it[Ct],valueSpec:ct[Pt]||ct["*"],style:gt,styleSpec:xt,object:it,objectKey:Ct},it)):bt.push(new Ln(et,it[Ct],`unknown property "${Ct}"`))}for(const Ct in ct)dt[Ct]||ct[Ct].required&&ct[Ct].default===void 0&&it[Ct]===void 0&&bt.push(new Ln(et,it,`missing required property "${Ct}"`));return bt}function lx(tt){const et=tt.value,it=tt.valueSpec,ct=tt.style,dt=tt.styleSpec,gt=tt.key,xt=tt.arrayElementValidator||Os;if(_o(et)!=="array")return[new Ln(gt,et,`array expected, ${_o(et)} found`)];if(it.length&&et.length!==it.length)return[new Ln(gt,et,`array length ${it.length} expected, length ${et.length} found`)];if(it["min-length"]&&et.length<it["min-length"])return[new Ln(gt,et,`array length at least ${it["min-length"]} expected, length ${et.length} found`)];let bt={type:it.value,values:it.values,minimum:it.minimum,maximum:it.maximum,function:void 0};dt.$version<7&&(bt.function=it.function),_o(it.value)==="object"&&(bt=it.value);let St=[];for(let Ct=0;Ct<et.length;Ct++)St=St.concat(xt({array:et,arrayIndex:Ct,value:et[Ct],valueSpec:bt,style:ct,styleSpec:dt,key:`${gt}[${Ct}]`}));return St}function Up(tt){const et=tt.key,it=tt.value,ct=tt.valueSpec;let dt=_o(it);if(dt==="number"&&it!=it&&(dt="NaN"),dt!=="number")return[new Ln(et,it,`number expected, ${dt} found`)];if("minimum"in ct){let gt=ct.minimum;if(_o(ct.minimum)==="array"&&(gt=ct.minimum[tt.arrayIndex]),it<gt)return[new Ln(et,it,`${it} is less than the minimum value ${gt}`)]}if("maximum"in ct){let gt=ct.maximum;if(_o(ct.maximum)==="array"&&(gt=ct.maximum[tt.arrayIndex]),it>gt)return[new Ln(et,it,`${it} is greater than the maximum value ${gt}`)]}return[]}function Vp(tt){const et=tt.valueSpec,it=ls(tt.value.type);let ct,dt,gt,xt={};const bt=it!=="categorical"&&tt.value.property===void 0,St=!bt,Ct=_o(tt.value.stops)==="array"&&_o(tt.value.stops[0])==="array"&&_o(tt.value.stops[0][0])==="object",Pt=Ml({key:tt.key,value:tt.value,valueSpec:tt.styleSpec.function,style:tt.style,styleSpec:tt.styleSpec,objectElementValidators:{stops:function(Bt){if(it==="identity")return[new Ln(Bt.key,Bt.value,'identity function may not have a "stops" property')];let Ft=[];const Wt=Bt.value;return Ft=Ft.concat(lx({key:Bt.key,value:Wt,valueSpec:Bt.valueSpec,style:Bt.style,styleSpec:Bt.styleSpec,arrayElementValidator:jt})),_o(Wt)==="array"&&Wt.length===0&&Ft.push(new Ln(Bt.key,Wt,"array must have at least one stop")),Ft},default:function(Bt){return Os({key:Bt.key,value:Bt.value,valueSpec:et,style:Bt.style,styleSpec:Bt.styleSpec})}}});return it==="identity"&&bt&&Pt.push(new Ln(tt.key,tt.value,'missing required property "property"')),it==="identity"||tt.value.stops||Pt.push(new Ln(tt.key,tt.value,'missing required property "stops"')),it==="exponential"&&tt.valueSpec.expression&&!Cm(tt.valueSpec)&&Pt.push(new Ln(tt.key,tt.value,"exponential functions not supported")),tt.styleSpec.$version>=8&&(St&&!rp(tt.valueSpec)?Pt.push(new Ln(tt.key,tt.value,"property functions not supported")):bt&&!Tm(tt.valueSpec)&&Pt.push(new Ln(tt.key,tt.value,"zoom functions not supported"))),it!=="categorical"&&!Ct||tt.value.property!==void 0||Pt.push(new Ln(tt.key,tt.value,'"property" property is required')),Pt;function jt(Bt){let Ft=[];const Wt=Bt.value,rr=Bt.key;if(_o(Wt)!=="array")return[new Ln(rr,Wt,`array expected, ${_o(Wt)} found`)];if(Wt.length!==2)return[new Ln(rr,Wt,`array length 2 expected, length ${Wt.length} found`)];if(Ct){if(_o(Wt[0])!=="object")return[new Ln(rr,Wt,`object expected, ${_o(Wt[0])} found`)];if(Wt[0].zoom===void 0)return[new Ln(rr,Wt,"object stop key must have zoom")];if(Wt[0].value===void 0)return[new Ln(rr,Wt,"object stop key must have value")];const cr=ls(Wt[0].zoom);if(typeof cr!="number")return[new Ln(rr,Wt[0].zoom,"stop zoom values must be numbers")];if(gt&&gt>cr)return[new Ln(rr,Wt[0].zoom,"stop zoom values must appear in ascending order")];cr!==gt&&(gt=cr,dt=void 0,xt={}),Ft=Ft.concat(Ml({key:`${rr}[0]`,value:Wt[0],valueSpec:{zoom:{}},style:Bt.style,styleSpec:Bt.styleSpec,objectElementValidators:{zoom:Up,value:Lt}}))}else Ft=Ft.concat(Lt({key:`${rr}[0]`,value:Wt[0],valueSpec:{},style:Bt.style,styleSpec:Bt.styleSpec},Wt));return ip(Ss(Wt[1]))?Ft.concat([new Ln(`${rr}[1]`,Wt[1],"expressions are not allowed in function stops.")]):Ft.concat(Os({key:`${rr}[1]`,value:Wt[1],valueSpec:et,style:Bt.style,styleSpec:Bt.styleSpec}))}function Lt(Bt,Ft){const Wt=_o(Bt.value),rr=ls(Bt.value),cr=Bt.value!==null?Bt.value:Ft;if(ct){if(Wt!==ct)return[new Ln(Bt.key,cr,`${Wt} stop domain type must match previous stop domain type ${ct}`)]}else ct=Wt;if(Wt!=="number"&&Wt!=="string"&&Wt!=="boolean"&&typeof rr!="number"&&typeof rr!="string"&&typeof rr!="boolean")return[new Ln(Bt.key,cr,"stop domain value must be a number, string, or boolean")];if(Wt!=="number"&&it!=="categorical"){let yr=`number expected, ${Wt} found`;return rp(et)&&it===void 0&&(yr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ln(Bt.key,cr,yr)]}return it!=="categorical"||Wt!=="number"||typeof rr=="number"&&isFinite(rr)&&Math.floor(rr)===rr?it!=="categorical"&&Wt==="number"&&typeof rr=="number"&&typeof dt=="number"&&dt!==void 0&&rr<dt?[new Ln(Bt.key,cr,"stop domain values must appear in ascending order")]:(dt=rr,it==="categorical"&&rr in xt?[new Ln(Bt.key,cr,"stop domain values must be unique")]:(xt[rr]=!0,[])):[new Ln(Bt.key,cr,`integer expected, found ${String(rr)}`)]}}function Ts(tt){const et=(tt.expressionContext==="property"?Fp:op)(Ss(tt.value),tt.valueSpec);if(et.result==="error")return et.value.map(ct=>new Ln(`${tt.key}${ct.key}`,tt.value,ct.message));const it=et.value.expression||et.value._styleExpression.expression;if(tt.expressionContext==="property"&&tt.propertyKey==="text-font"&&!it.outputDefined())return[new Ln(tt.key,tt.value,`Invalid data expression for "${tt.propertyKey}". Output values must be contained as literals within the expression.`)];if(tt.expressionContext==="property"&&tt.propertyType==="layout"&&!iu(it))return[new Ln(tt.key,tt.value,'"feature-state" data expressions are not supported with layout properties.')];if(tt.expressionContext==="filter")return Gp(it,tt);if(tt.expressionContext&&tt.expressionContext.indexOf("cluster")===0){if(!Mu(it,["zoom","feature-state"]))return[new Ln(tt.key,tt.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(tt.expressionContext==="cluster-initial"&&!_h(it))return[new Ln(tt.key,tt.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Gp(tt,et){const it=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(et.valueSpec&&et.valueSpec.expression)for(const dt of et.valueSpec.expression.parameters)it.delete(dt);if(it.size===0)return[];const ct=[];return tt instanceof ru&&it.has(tt.name)?[new Ln(et.key,et.value,`["${tt.name}"] expression is not supported in a filter for a ${et.object.type} layer with id: ${et.object.id}`)]:(tt.eachChild(dt=>{ct.push(...Gp(dt,et))}),ct)}function Mm(tt){const et=tt.key,it=tt.value,ct=tt.valueSpec,dt=[];return Array.isArray(ct.values)?ct.values.indexOf(ls(it))===-1&&dt.push(new Ln(et,it,`expected one of [${ct.values.join(", ")}], ${JSON.stringify(it)} found`)):Object.keys(ct.values).indexOf(ls(it))===-1&&dt.push(new Ln(et,it,`expected one of [${Object.keys(ct.values).join(", ")}], ${JSON.stringify(it)} found`)),dt}function Ny(tt){if(tt===!0||tt===!1)return!0;if(!Array.isArray(tt)||tt.length===0)return!1;switch(tt[0]){case"has":return tt.length>=2&&tt[1]!=="$id"&&tt[1]!=="$type";case"in":return tt.length>=3&&(typeof tt[1]!="string"||Array.isArray(tt[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return tt.length!==3||Array.isArray(tt[1])||Array.isArray(tt[2]);case"any":case"all":for(const et of tt.slice(1))if(!Ny(et)&&typeof et!="boolean")return!1;return!0;default:return!0}}function jm(tt,et="fill"){if(tt==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Ny(tt)||(tt=ap(tt));const it=tt;let ct=!0;try{ct=function(Ct){if(!sp(Ct))return Ct;let Pt=Ss(Ct);return Dm(Pt),Pt=cx(Pt),Pt}(it)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(it,null,2)}
        `)}const dt=Yr[`filter_${et}`],gt=op(ct,dt);let xt=null;if(gt.result==="error")throw new Error(gt.value.map(Ct=>`${Ct.key}: ${Ct.message}`).join(", "));xt=(Ct,Pt,jt)=>gt.value.evaluate(Ct,Pt,{},jt);let bt=null,St=null;if(ct!==it){const Ct=op(it,dt);if(Ct.result==="error")throw new Error(Ct.value.map(Pt=>`${Pt.key}: ${Pt.message}`).join(", "));bt=(Pt,jt,Lt,Bt,Ft)=>Ct.value.evaluate(Pt,jt,{},Lt,void 0,void 0,Bt,Ft),St=!_h(Ct.value.expression)}return{filter:xt,dynamicFilter:bt||void 0,needGeometry:ux(ct),needFeature:!!St}}function cx(tt){if(!Array.isArray(tt))return tt;const et=function(it){if(By.has(it[0])){for(let ct=1;ct<it.length;ct++)if(sp(it[ct]))return!0}return it}(tt);return et===!0?et:et.map(it=>cx(it))}function Dm(tt){let et=!1;const it=[];if(tt[0]==="case"){for(let ct=1;ct<tt.length-1;ct+=2)et=et||sp(tt[ct]),it.push(tt[ct+1]);it.push(tt[tt.length-1])}else if(tt[0]==="match"){et=et||sp(tt[1]);for(let ct=2;ct<tt.length-1;ct+=2)it.push(tt[ct+1]);it.push(tt[tt.length-1])}else if(tt[0]==="step"){et=et||sp(tt[1]);for(let ct=1;ct<tt.length-1;ct+=2)it.push(tt[ct+1])}et&&(tt.length=0,tt.push("any",...it));for(let ct=1;ct<tt.length;ct++)Dm(tt[ct])}function sp(tt){if(!Array.isArray(tt))return!1;if((et=tt[0])==="pitch"||et==="distance-from-center")return!0;var et;for(let it=1;it<tt.length;it++)if(sp(tt[it]))return!0;return!1}const By=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function wv(tt,et){return tt<et?-1:tt>et?1:0}function ux(tt){if(!Array.isArray(tt))return!1;if(tt[0]==="within")return!0;for(let et=1;et<tt.length;et++)if(ux(tt[et]))return!0;return!1}function ap(tt){if(!tt)return!0;const et=tt[0];return tt.length<=1?et!=="any":et==="=="?Fy(tt[1],tt[2],"=="):et==="!="?Lm(Fy(tt[1],tt[2],"==")):et==="<"||et===">"||et==="<="||et===">="?Fy(tt[1],tt[2],et):et==="any"?(it=tt.slice(1),["any"].concat(it.map(ap))):et==="all"?["all"].concat(tt.slice(1).map(ap)):et==="none"?["all"].concat(tt.slice(1).map(ap).map(Lm)):et==="in"?Uy(tt[1],tt.slice(2)):et==="!in"?Lm(Uy(tt[1],tt.slice(2))):et==="has"?Vy(tt[1]):et==="!has"?Lm(Vy(tt[1])):et!=="within"||tt;var it}function Fy(tt,et,it){switch(tt){case"$type":return[`filter-type-${it}`,et];case"$id":return[`filter-id-${it}`,et];default:return[`filter-${it}`,tt,et]}}function Uy(tt,et){if(et.length===0)return!1;switch(tt){case"$type":return["filter-type-in",["literal",et]];case"$id":return["filter-id-in",["literal",et]];default:return et.length>200&&!et.some(it=>typeof it!=typeof et[0])?["filter-in-large",tt,["literal",et.sort(wv)]]:["filter-in-small",tt,["literal",et]]}}function Vy(tt){switch(tt){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",tt]}}function Lm(tt){return["!",tt]}function Hp(tt){return Ny(Ss(tt.value))?Ts(_c({},tt,{expressionContext:"filter",valueSpec:tt.styleSpec[`filter_${tt.layerType||"fill"}`]})):Wp(tt)}function Wp(tt){const et=tt.value,it=tt.key;if(_o(et)!=="array")return[new Ln(it,et,`array expected, ${_o(et)} found`)];const ct=tt.styleSpec;let dt,gt=[];if(et.length<1)return[new Ln(it,et,"filter array must have at least 1 element")];switch(gt=gt.concat(Mm({key:`${it}[0]`,value:et[0],valueSpec:ct.filter_operator,style:tt.style,styleSpec:tt.styleSpec})),ls(et[0])){case"<":case"<=":case">":case">=":et.length>=2&&ls(et[1])==="$type"&&gt.push(new Ln(it,et,`"$type" cannot be use with operator "${et[0]}"`));case"==":case"!=":et.length!==3&&gt.push(new Ln(it,et,`filter array for operator "${et[0]}" must have 3 elements`));case"in":case"!in":et.length>=2&&(dt=_o(et[1]),dt!=="string"&&gt.push(new Ln(`${it}[1]`,et[1],`string expected, ${dt} found`)));for(let xt=2;xt<et.length;xt++)dt=_o(et[xt]),ls(et[1])==="$type"?gt=gt.concat(Mm({key:`${it}[${xt}]`,value:et[xt],valueSpec:ct.geometry_type,style:tt.style,styleSpec:tt.styleSpec})):dt!=="string"&&dt!=="number"&&dt!=="boolean"&&gt.push(new Ln(`${it}[${xt}]`,et[xt],`string, number, or boolean expected, ${dt} found`));break;case"any":case"all":case"none":for(let xt=1;xt<et.length;xt++)gt=gt.concat(Wp({key:`${it}[${xt}]`,value:et[xt],style:tt.style,styleSpec:tt.styleSpec}));break;case"has":case"!has":dt=_o(et[1]),et.length!==2?gt.push(new Ln(it,et,`filter array for "${et[0]}" operator must have 2 elements`)):dt!=="string"&&gt.push(new Ln(`${it}[1]`,et[1],`string expected, ${dt} found`));break;case"within":dt=_o(et[1]),et.length!==2?gt.push(new Ln(it,et,`filter array for "${et[0]}" operator must have 2 elements`)):dt!=="object"&&gt.push(new Ln(`${it}[1]`,et[1],`object expected, ${dt} found`))}return gt}function Gy(tt,et){const it=tt.key,ct=tt.style,dt=tt.styleSpec,gt=tt.value,xt=tt.objectKey,bt=dt[`${et}_${tt.layerType}`];if(!bt)return[];const St=xt.match(/^(.*)-transition$/);if(et==="paint"&&St&&bt[St[1]]&&bt[St[1]].transition)return Os({key:it,value:gt,valueSpec:dt.transition,style:ct,styleSpec:dt});const Ct=tt.valueSpec||bt[xt];if(!Ct)return[new Ln(it,gt,`unknown property "${xt}"`)];let Pt;if(_o(gt)==="string"&&rp(Ct)&&!Ct.tokens&&(Pt=/^{([^}]+)}$/.exec(gt))){const Lt=`\`{ "type": "identity", "property": ${Pt?JSON.stringify(Pt[1]):'"_"'} }\``;return[new Ln(it,gt,`"${xt}" does not support interpolation syntax
Use an identity property function instead: ${Lt}.`)]}const jt=[];return tt.layerType==="symbol"&&(xt==="text-field"&&ct&&!ct.glyphs&&jt.push(new Ln(it,gt,'use of "text-field" requires a style "glyphs" property')),xt==="text-font"&&Np(Ss(gt))&&ls(gt.type)==="identity"&&jt.push(new Ln(it,gt,'"text-font" does not support identity functions'))),jt.concat(Os({key:tt.key,value:gt,valueSpec:Ct,style:ct,styleSpec:dt,expressionContext:"property",propertyType:et,propertyKey:xt}))}function hx(tt){return Gy(tt,"paint")}function Hy(tt){return Gy(tt,"layout")}function dx(tt){let et=[];const it=tt.value,ct=tt.key,dt=tt.style,gt=tt.styleSpec;it.type||it.ref||et.push(new Ln(ct,it,'either "type" or "ref" is required'));let xt=ls(it.type);const bt=ls(it.ref);if(it.id){const St=ls(it.id);for(let Ct=0;Ct<tt.arrayIndex;Ct++){const Pt=dt.layers[Ct];ls(Pt.id)===St&&et.push(new Ln(ct,it.id,`duplicate layer id "${it.id}", previously used at line ${Pt.id.__line__}`))}}if("ref"in it){let St;["type","source","source-layer","filter","layout"].forEach(Ct=>{Ct in it&&et.push(new Ln(ct,it[Ct],`"${Ct}" is prohibited for ref layers`))}),dt.layers.forEach(Ct=>{ls(Ct.id)===bt&&(St=Ct)}),St?St.ref?et.push(new Ln(ct,it.ref,"ref cannot reference another ref layer")):xt=ls(St.type):typeof bt=="string"&&et.push(new Ln(ct,it.ref,`ref layer "${bt}" not found`))}else if(xt!=="background"&&xt!=="sky")if(it.source){const St=dt.sources&&dt.sources[it.source],Ct=St&&ls(St.type);St?Ct==="vector"&&xt==="raster"?et.push(new Ln(ct,it.source,`layer "${it.id}" requires a raster source`)):Ct==="raster"&&xt!=="raster"?et.push(new Ln(ct,it.source,`layer "${it.id}" requires a vector source`)):Ct!=="vector"||it["source-layer"]?Ct==="raster-dem"&&xt!=="hillshade"?et.push(new Ln(ct,it.source,"raster-dem source can only be used with layer type 'hillshade'.")):xt!=="line"||!it.paint||!it.paint["line-gradient"]&&!it.paint["line-trim-offset"]||Ct==="geojson"&&St.lineMetrics||et.push(new Ln(ct,it,`layer "${it.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):et.push(new Ln(ct,it,`layer "${it.id}" must specify a "source-layer"`)):et.push(new Ln(ct,it.source,`source "${it.source}" not found`))}else et.push(new Ln(ct,it,'missing required property "source"'));return et=et.concat(Ml({key:ct,value:it,valueSpec:gt.layer,style:tt.style,styleSpec:tt.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Os({key:`${ct}.type`,value:it.type,valueSpec:gt.layer.type,style:tt.style,styleSpec:tt.styleSpec,object:it,objectKey:"type"}),filter:St=>Hp(_c({layerType:xt},St)),layout:St=>Ml({layer:it,key:St.key,value:St.value,valueSpec:{},style:St.style,styleSpec:St.styleSpec,objectElementValidators:{"*":Ct=>Hy(_c({layerType:xt},Ct))}}),paint:St=>Ml({layer:it,key:St.key,value:St.value,valueSpec:{},style:St.style,styleSpec:St.styleSpec,objectElementValidators:{"*":Ct=>hx(_c({layerType:xt},Ct))}})}})),et}function _u(tt){const et=tt.value,it=tt.key,ct=_o(et);return ct!=="string"?[new Ln(it,et,`string expected, ${ct} found`)]:[]}const px={promoteId:function({key:tt,value:et}){if(_o(et)==="string")return _u({key:tt,value:et});{const it=[];for(const ct in et)it.push(..._u({key:`${tt}.${ct}`,value:et[ct]}));return it}}};function fx(tt){const et=tt.value,it=tt.key,ct=tt.styleSpec,dt=tt.style;if(!et.type)return[new Ln(it,et,'"type" is required')];const gt=ls(et.type);let xt;switch(gt){case"vector":case"raster":case"raster-dem":return xt=Ml({key:it,value:et,valueSpec:ct[`source_${gt.replace("-","_")}`],style:tt.style,styleSpec:ct,objectElementValidators:px}),xt;case"geojson":if(xt=Ml({key:it,value:et,valueSpec:ct.source_geojson,style:dt,styleSpec:ct,objectElementValidators:px}),et.cluster)for(const bt in et.clusterProperties){const[St,Ct]=et.clusterProperties[bt],Pt=typeof St=="string"?[St,["accumulated"],["get",bt]]:St;xt.push(...Ts({key:`${it}.${bt}.map`,value:Ct,expressionContext:"cluster-map"})),xt.push(...Ts({key:`${it}.${bt}.reduce`,value:Pt,expressionContext:"cluster-reduce"}))}return xt;case"video":return Ml({key:it,value:et,valueSpec:ct.source_video,style:dt,styleSpec:ct});case"image":return Ml({key:it,value:et,valueSpec:ct.source_image,style:dt,styleSpec:ct});case"canvas":return[new Ln(it,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Mm({key:`${it}.type`,value:et.type,valueSpec:{values:bv(ct)},style:dt,styleSpec:ct})}}function bv(tt){return tt.source.reduce((et,it)=>{const ct=tt[it];return ct.type.type==="enum"&&(et=et.concat(Object.keys(ct.type.values))),et},[])}function mx(tt){const et=tt.value,it=tt.styleSpec,ct=it.light,dt=tt.style;let gt=[];const xt=_o(et);if(et===void 0)return gt;if(xt!=="object")return gt=gt.concat([new Ln("light",et,`object expected, ${xt} found`)]),gt;for(const bt in et){const St=bt.match(/^(.*)-transition$/);gt=gt.concat(St&&ct[St[1]]&&ct[St[1]].transition?Os({key:bt,value:et[bt],valueSpec:it.transition,style:dt,styleSpec:it}):ct[bt]?Os({key:bt,value:et[bt],valueSpec:ct[bt],style:dt,styleSpec:it}):[new Ln(bt,et[bt],`unknown property "${bt}"`)])}return gt}function Wy(tt){const et=tt.value,it=tt.key,ct=tt.style,dt=tt.styleSpec,gt=dt.terrain;let xt=[];const bt=_o(et);if(et===void 0)return xt;if(bt!=="object")return xt=xt.concat([new Ln("terrain",et,`object expected, ${bt} found`)]),xt;for(const St in et){const Ct=St.match(/^(.*)-transition$/);xt=xt.concat(Ct&&gt[Ct[1]]&&gt[Ct[1]].transition?Os({key:St,value:et[St],valueSpec:dt.transition,style:ct,styleSpec:dt}):gt[St]?Os({key:St,value:et[St],valueSpec:gt[St],style:ct,styleSpec:dt}):[new Ln(St,et[St],`unknown property "${St}"`)])}if(et.source){const St=ct.sources&&ct.sources[et.source],Ct=St&&ls(St.type);St?Ct!=="raster-dem"&&xt.push(new Ln(it,et.source,`terrain cannot be used with a source of type ${String(Ct)}, it only be used with a "raster-dem" source type`)):xt.push(new Ln(it,et.source,`source "${et.source}" not found`))}else xt.push(new Ln(it,et,'terrain is missing required property "source"'));return xt}function gx(tt){const et=tt.value,it=tt.style,ct=tt.styleSpec,dt=ct.fog;let gt=[];const xt=_o(et);if(et===void 0)return gt;if(xt!=="object")return gt=gt.concat([new Ln("fog",et,`object expected, ${xt} found`)]),gt;for(const bt in et){const St=bt.match(/^(.*)-transition$/);gt=gt.concat(St&&dt[St[1]]&&dt[St[1]].transition?Os({key:bt,value:et[bt],valueSpec:ct.transition,style:it,styleSpec:ct}):dt[bt]?Os({key:bt,value:et[bt],valueSpec:dt[bt],style:it,styleSpec:ct}):[new Ln(bt,et[bt],`unknown property "${bt}"`)])}return gt}const yx={"*":()=>[],array:lx,boolean:function(tt){const et=tt.value,it=tt.key,ct=_o(et);return ct!=="boolean"?[new Ln(it,et,`boolean expected, ${ct} found`)]:[]},number:Up,color:function(tt){const et=tt.key,it=tt.value,ct=_o(it);return ct!=="string"?[new Ln(et,it,`color expected, ${ct} found`)]:uy(it)===null?[new Ln(et,it,`color expected, "${it}" found`)]:[]},enum:Mm,filter:Hp,function:Vp,layer:dx,object:Ml,source:fx,light:mx,terrain:Wy,fog:gx,string:_u,formatted:function(tt){return _u(tt).length===0?[]:Ts(tt)},resolvedImage:function(tt){return _u(tt).length===0?[]:Ts(tt)},projection:function(tt){const et=tt.value,it=tt.styleSpec,ct=it.projection,dt=tt.style;let gt=[];const xt=_o(et);if(xt==="object")for(const bt in et)gt=gt.concat(Os({key:bt,value:et[bt],valueSpec:ct[bt],style:dt,styleSpec:it}));else xt!=="string"&&(gt=gt.concat([new Ln("projection",et,`object or string expected, ${xt} found`)]));return gt}};function Os(tt){const et=tt.value,it=tt.valueSpec,ct=tt.styleSpec;return it.expression&&Np(ls(et))?Vp(tt):it.expression&&ip(Ss(et))?Ts(tt):it.type&&yx[it.type]?yx[it.type](tt):Ml(_c({},tt,{valueSpec:it.type?ct[it.type]:it}))}function Ev(tt){const et=tt.value,it=tt.key,ct=_u(tt);return ct.length||(et.indexOf("{fontstack}")===-1&&ct.push(new Ln(it,et,'"glyphs" url must include a "{fontstack}" token')),et.indexOf("{range}")===-1&&ct.push(new Ln(it,et,'"glyphs" url must include a "{range}" token'))),ct}function _x(tt,et=Yr){return xl(Os({key:"",value:tt,valueSpec:et.$root,styleSpec:et,style:tt,objectElementValidators:{glyphs:Ev,"*":()=>[]}}))}const Sv=tt=>xl(hx(tt)),Tv=tt=>xl(Hy(tt));function xl(tt){return tt.slice().sort((et,it)=>et.line&&it.line?et.line-it.line:0)}function xx(tt,et){let it=!1;if(et&&et.length)for(const ct of et)tt.fire(new Jl(new Error(ct.message))),it=!0;return it}var Cv=Vl,Dl=3;function Vl(tt,et,it){var ct=this.cells=[];if(tt instanceof ArrayBuffer){this.arrayBuffer=tt;var dt=new Int32Array(this.arrayBuffer);tt=dt[0],this.d=(et=dt[1])+2*(it=dt[2]);for(var gt=0;gt<this.d*this.d;gt++){var xt=dt[Dl+gt],bt=dt[Dl+gt+1];ct.push(xt===bt?null:dt.subarray(xt,bt))}var St=dt[Dl+ct.length+1];this.keys=dt.subarray(dt[Dl+ct.length],St),this.bboxes=dt.subarray(St),this.insert=this._insertReadonly}else{this.d=et+2*it;for(var Ct=0;Ct<this.d*this.d;Ct++)ct.push([]);this.keys=[],this.bboxes=[]}this.n=et,this.extent=tt,this.padding=it,this.scale=et/tt,this.uid=0;var Pt=it/et*tt;this.min=-Pt,this.max=tt+Pt}Vl.prototype.insert=function(tt,et,it,ct,dt){this._forEachCell(et,it,ct,dt,this._insertCell,this.uid++),this.keys.push(tt),this.bboxes.push(et),this.bboxes.push(it),this.bboxes.push(ct),this.bboxes.push(dt)},Vl.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Vl.prototype._insertCell=function(tt,et,it,ct,dt,gt){this.cells[dt].push(gt)},Vl.prototype.query=function(tt,et,it,ct,dt){var gt=this.min,xt=this.max;if(tt<=gt&&et<=gt&&xt<=it&&xt<=ct&&!dt)return Array.prototype.slice.call(this.keys);var bt=[];return this._forEachCell(tt,et,it,ct,this._queryCell,bt,{},dt),bt},Vl.prototype._queryCell=function(tt,et,it,ct,dt,gt,xt,bt){var St=this.cells[dt];if(St!==null)for(var Ct=this.keys,Pt=this.bboxes,jt=0;jt<St.length;jt++){var Lt=St[jt];if(xt[Lt]===void 0){var Bt=4*Lt;(bt?bt(Pt[Bt+0],Pt[Bt+1],Pt[Bt+2],Pt[Bt+3]):tt<=Pt[Bt+2]&&et<=Pt[Bt+3]&&it>=Pt[Bt+0]&&ct>=Pt[Bt+1])?(xt[Lt]=!0,gt.push(Ct[Lt])):xt[Lt]=!1}}},Vl.prototype._forEachCell=function(tt,et,it,ct,dt,gt,xt,bt){for(var St=this._convertToCellCoord(tt),Ct=this._convertToCellCoord(et),Pt=this._convertToCellCoord(it),jt=this._convertToCellCoord(ct),Lt=St;Lt<=Pt;Lt++)for(var Bt=Ct;Bt<=jt;Bt++){var Ft=this.d*Bt+Lt;if((!bt||bt(this._convertFromCellCoord(Lt),this._convertFromCellCoord(Bt),this._convertFromCellCoord(Lt+1),this._convertFromCellCoord(Bt+1)))&&dt.call(this,tt,et,it,ct,Ft,gt,xt,bt))return}},Vl.prototype._convertFromCellCoord=function(tt){return(tt-this.padding)/this.scale},Vl.prototype._convertToCellCoord=function(tt){return Math.max(0,Math.min(this.d-1,Math.floor(tt*this.scale)+this.padding))},Vl.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var tt=this.cells,et=Dl+this.cells.length+1+1,it=0,ct=0;ct<this.cells.length;ct++)it+=this.cells[ct].length;var dt=new Int32Array(et+it+this.keys.length+this.bboxes.length);dt[0]=this.extent,dt[1]=this.n,dt[2]=this.padding;for(var gt=et,xt=0;xt<tt.length;xt++){var bt=tt[xt];dt[Dl+xt]=gt,dt.set(bt,gt),gt+=bt.length}return dt[Dl+tt.length]=gt,dt.set(this.keys,gt),dt[Dl+tt.length+1]=gt+=this.keys.length,dt.set(this.bboxes,gt),gt+=this.bboxes.length,dt.buffer};var Lu=Jt(Cv);const $m={};function $n(tt,et,it={}){Object.defineProperty(tt,"_classRegistryKey",{value:et,writeable:!1}),$m[et]={klass:tt,omit:it.omit||[]}}$n(Object,"Object"),Lu.serialize=function(tt,et){const it=tt.toArrayBuffer();return et&&et.push(it),{buffer:it}},Lu.deserialize=function(tt){return new Lu(tt.buffer)},Object.defineProperty(Lu,"name",{value:"Grid"}),$n(Lu,"Grid"),$n(rs,"Color"),$n(Error,"Error"),$n(bs,"AJAXError"),$n(yl,"ResolvedImage"),$n(Pm,"StylePropertyFunction"),$n(km,"StyleExpression",{omit:["_evaluator"]}),$n(Bp,"ZoomDependentExpression"),$n(zy,"ZoomConstantExpression"),$n(ru,"CompoundExpression",{omit:["_evaluate"]});for(const tt in zp)$m[zp[tt]._classRegistryKey]||$n(zp[tt],`Expression${tt}`);function qy(tt){return tt&&typeof ArrayBuffer<"u"&&(tt instanceof ArrayBuffer||tt.constructor&&tt.constructor.name==="ArrayBuffer")}function Zy(tt){return Tt.ImageBitmap&&tt instanceof Tt.ImageBitmap}function lp(tt,et){if(tt==null||typeof tt=="boolean"||typeof tt=="number"||typeof tt=="string"||tt instanceof Boolean||tt instanceof Number||tt instanceof String||tt instanceof Date||tt instanceof RegExp)return tt;if(qy(tt)||Zy(tt))return et&&et.push(tt),tt;if(ArrayBuffer.isView(tt)){const it=tt;return et&&et.push(it.buffer),it}if(tt instanceof Tt.ImageData)return et&&et.push(tt.data.buffer),tt;if(Array.isArray(tt)){const it=[];for(const ct of tt)it.push(lp(ct,et));return it}if(typeof tt=="object"){const it=tt.constructor,ct=it._classRegistryKey;if(!ct)throw new Error(`can't serialize object of unregistered class ${ct}`);const dt=it.serialize?it.serialize(tt,et):{};if(!it.serialize){for(const gt in tt)tt.hasOwnProperty(gt)&&($m[ct].omit.indexOf(gt)>=0||(dt[gt]=lp(tt[gt],et)));tt instanceof Error&&(dt.message=tt.message)}if(dt.$name)throw new Error("$name property is reserved for worker serialization logic.");return ct!=="Object"&&(dt.$name=ct),dt}throw new Error("can't serialize object of type "+typeof tt)}function $u(tt){if(tt==null||typeof tt=="boolean"||typeof tt=="number"||typeof tt=="string"||tt instanceof Boolean||tt instanceof Number||tt instanceof String||tt instanceof Date||tt instanceof RegExp||qy(tt)||Zy(tt)||ArrayBuffer.isView(tt)||tt instanceof Tt.ImageData)return tt;if(Array.isArray(tt))return tt.map($u);if(typeof tt=="object"){const et=tt.$name||"Object",{klass:it}=$m[et];if(!it)throw new Error(`can't deserialize unregistered class ${et}`);if(it.deserialize)return it.deserialize(tt);const ct=Object.create(it.prototype);for(const dt of Object.keys(tt))dt!=="$name"&&(ct[dt]=$u(tt[dt]));return ct}throw new Error("can't deserialize object of type "+typeof tt)}const jn={"Latin-1 Supplement":tt=>tt>=128&&tt<=255,Arabic:tt=>tt>=1536&&tt<=1791,"Arabic Supplement":tt=>tt>=1872&&tt<=1919,"Arabic Extended-A":tt=>tt>=2208&&tt<=2303,"Hangul Jamo":tt=>tt>=4352&&tt<=4607,"Unified Canadian Aboriginal Syllabics":tt=>tt>=5120&&tt<=5759,Khmer:tt=>tt>=6016&&tt<=6143,"Unified Canadian Aboriginal Syllabics Extended":tt=>tt>=6320&&tt<=6399,"General Punctuation":tt=>tt>=8192&&tt<=8303,"Letterlike Symbols":tt=>tt>=8448&&tt<=8527,"Number Forms":tt=>tt>=8528&&tt<=8591,"Miscellaneous Technical":tt=>tt>=8960&&tt<=9215,"Control Pictures":tt=>tt>=9216&&tt<=9279,"Optical Character Recognition":tt=>tt>=9280&&tt<=9311,"Enclosed Alphanumerics":tt=>tt>=9312&&tt<=9471,"Geometric Shapes":tt=>tt>=9632&&tt<=9727,"Miscellaneous Symbols":tt=>tt>=9728&&tt<=9983,"Miscellaneous Symbols and Arrows":tt=>tt>=11008&&tt<=11263,"CJK Radicals Supplement":tt=>tt>=11904&&tt<=12031,"Kangxi Radicals":tt=>tt>=12032&&tt<=12255,"Ideographic Description Characters":tt=>tt>=12272&&tt<=12287,"CJK Symbols and Punctuation":tt=>tt>=12288&&tt<=12351,Hiragana:tt=>tt>=12352&&tt<=12447,Katakana:tt=>tt>=12448&&tt<=12543,Bopomofo:tt=>tt>=12544&&tt<=12591,"Hangul Compatibility Jamo":tt=>tt>=12592&&tt<=12687,Kanbun:tt=>tt>=12688&&tt<=12703,"Bopomofo Extended":tt=>tt>=12704&&tt<=12735,"CJK Strokes":tt=>tt>=12736&&tt<=12783,"Katakana Phonetic Extensions":tt=>tt>=12784&&tt<=12799,"Enclosed CJK Letters and Months":tt=>tt>=12800&&tt<=13055,"CJK Compatibility":tt=>tt>=13056&&tt<=13311,"CJK Unified Ideographs Extension A":tt=>tt>=13312&&tt<=19903,"Yijing Hexagram Symbols":tt=>tt>=19904&&tt<=19967,"CJK Unified Ideographs":tt=>tt>=19968&&tt<=40959,"Yi Syllables":tt=>tt>=40960&&tt<=42127,"Yi Radicals":tt=>tt>=42128&&tt<=42191,"Hangul Jamo Extended-A":tt=>tt>=43360&&tt<=43391,"Hangul Syllables":tt=>tt>=44032&&tt<=55215,"Hangul Jamo Extended-B":tt=>tt>=55216&&tt<=55295,"Private Use Area":tt=>tt>=57344&&tt<=63743,"CJK Compatibility Ideographs":tt=>tt>=63744&&tt<=64255,"Arabic Presentation Forms-A":tt=>tt>=64336&&tt<=65023,"Vertical Forms":tt=>tt>=65040&&tt<=65055,"CJK Compatibility Forms":tt=>tt>=65072&&tt<=65103,"Small Form Variants":tt=>tt>=65104&&tt<=65135,"Arabic Presentation Forms-B":tt=>tt>=65136&&tt<=65279,"Halfwidth and Fullwidth Forms":tt=>tt>=65280&&tt<=65519};function Xy(tt){for(const et of tt)if(Ky(et.charCodeAt(0)))return!0;return!1}function Rv(tt){for(const et of tt)if(!vx(et.charCodeAt(0)))return!1;return!0}function vx(tt){return!(jn.Arabic(tt)||jn["Arabic Supplement"](tt)||jn["Arabic Extended-A"](tt)||jn["Arabic Presentation Forms-A"](tt)||jn["Arabic Presentation Forms-B"](tt))}function Ky(tt){return!(tt!==746&&tt!==747&&(tt<4352||!(jn["Bopomofo Extended"](tt)||jn.Bopomofo(tt)||jn["CJK Compatibility Forms"](tt)&&!(tt>=65097&&tt<=65103)||jn["CJK Compatibility Ideographs"](tt)||jn["CJK Compatibility"](tt)||jn["CJK Radicals Supplement"](tt)||jn["CJK Strokes"](tt)||!(!jn["CJK Symbols and Punctuation"](tt)||tt>=12296&&tt<=12305||tt>=12308&&tt<=12319||tt===12336)||jn["CJK Unified Ideographs Extension A"](tt)||jn["CJK Unified Ideographs"](tt)||jn["Enclosed CJK Letters and Months"](tt)||jn["Hangul Compatibility Jamo"](tt)||jn["Hangul Jamo Extended-A"](tt)||jn["Hangul Jamo Extended-B"](tt)||jn["Hangul Jamo"](tt)||jn["Hangul Syllables"](tt)||jn.Hiragana(tt)||jn["Ideographic Description Characters"](tt)||jn.Kanbun(tt)||jn["Kangxi Radicals"](tt)||jn["Katakana Phonetic Extensions"](tt)||jn.Katakana(tt)&&tt!==12540||!(!jn["Halfwidth and Fullwidth Forms"](tt)||tt===65288||tt===65289||tt===65293||tt>=65306&&tt<=65310||tt===65339||tt===65341||tt===65343||tt>=65371&&tt<=65503||tt===65507||tt>=65512&&tt<=65519)||!(!jn["Small Form Variants"](tt)||tt>=65112&&tt<=65118||tt>=65123&&tt<=65126)||jn["Unified Canadian Aboriginal Syllabics"](tt)||jn["Unified Canadian Aboriginal Syllabics Extended"](tt)||jn["Vertical Forms"](tt)||jn["Yijing Hexagram Symbols"](tt)||jn["Yi Syllables"](tt)||jn["Yi Radicals"](tt))))}function wx(tt){return!(Ky(tt)||function(et){return!!(jn["Latin-1 Supplement"](et)&&(et===167||et===169||et===174||et===177||et===188||et===189||et===190||et===215||et===247)||jn["General Punctuation"](et)&&(et===8214||et===8224||et===8225||et===8240||et===8241||et===8251||et===8252||et===8258||et===8263||et===8264||et===8265||et===8273)||jn["Letterlike Symbols"](et)||jn["Number Forms"](et)||jn["Miscellaneous Technical"](et)&&(et>=8960&&et<=8967||et>=8972&&et<=8991||et>=8996&&et<=9e3||et===9003||et>=9085&&et<=9114||et>=9150&&et<=9165||et===9167||et>=9169&&et<=9179||et>=9186&&et<=9215)||jn["Control Pictures"](et)&&et!==9251||jn["Optical Character Recognition"](et)||jn["Enclosed Alphanumerics"](et)||jn["Geometric Shapes"](et)||jn["Miscellaneous Symbols"](et)&&!(et>=9754&&et<=9759)||jn["Miscellaneous Symbols and Arrows"](et)&&(et>=11026&&et<=11055||et>=11088&&et<=11097||et>=11192&&et<=11243)||jn["CJK Symbols and Punctuation"](et)||jn.Katakana(et)||jn["Private Use Area"](et)||jn["CJK Compatibility Forms"](et)||jn["Small Form Variants"](et)||jn["Halfwidth and Fullwidth Forms"](et)||et===8734||et===8756||et===8757||et>=9984&&et<=10087||et>=10102&&et<=10131||et===65532||et===65533)}(tt))}function bx(tt){return tt>=1424&&tt<=2303||jn["Arabic Presentation Forms-A"](tt)||jn["Arabic Presentation Forms-B"](tt)}function Av(tt,et){return!(!et&&bx(tt)||tt>=2304&&tt<=3583||tt>=3840&&tt<=4255||jn.Khmer(tt))}function kv(tt){for(const et of tt)if(bx(et.charCodeAt(0)))return!0;return!1}const Yy="deferred",Qy="loading",Jy="loaded";let cp=null,ft="unavailable",ot=null;const ut=function(tt){tt&&typeof tt=="string"&&tt.indexOf("NetworkError")>-1&&(ft="error"),cp&&cp(tt)};function yt(){vt.fire(new Au("pluginStateChange",{pluginStatus:ft,pluginURL:ot}))}const vt=new bp,Et=function(){return ft},Rt=function(){if(ft!==Yy||!ot)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ft=Qy,yt(),ot&&Wu({url:ot},tt=>{tt?ut(tt):(ft=Jy,yt())})},At={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ft===Jy||At.applyArabicShaping!=null,isLoading:()=>ft===Qy,setState(tt){ft=tt.pluginStatus,ot=tt.pluginURL},isParsed:()=>At.applyArabicShaping!=null&&At.processBidirectionalText!=null&&At.processStyledBidirectionalText!=null,getPluginURL:()=>ot};class It{constructor(et,it){this.zoom=et,it?(this.now=it.now,this.fadeDuration=it.fadeDuration,this.transition=it.transition,this.pitch=it.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(et){return function(it,ct){for(const dt of it)if(!Av(dt.charCodeAt(0),ct))return!1;return!0}(et,At.isLoaded())}}class Nt{constructor(et,it){this.property=et,this.value=it,this.expression=function(ct,dt){if(Np(ct))return new Pm(ct,dt);if(ip(ct)){const gt=Fp(ct,dt);if(gt.result==="error")throw new Error(gt.value.map(xt=>`${xt.key}: ${xt.message}`).join(", "));return gt.value}{let gt=ct;return typeof ct=="string"&&dt.type==="color"&&(gt=rs.parse(ct)),{kind:"constant",evaluate:()=>gt}}}(it===void 0?et.specification.default:it,et.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(et,it,ct){return this.property.possiblyEvaluate(this,et,it,ct)}}class $t{constructor(et){this.property=et,this.value=new Nt(et,void 0)}transitioned(et,it){return new er(this.property,this.value,it,kn({},et.transition,this.transition),et.now)}untransitioned(){return new er(this.property,this.value,null,{},0)}}class Vt{constructor(et){this._properties=et,this._values=Object.create(et.defaultTransitionablePropertyValues)}getValue(et){return Qn(this._values[et].value.value)}setValue(et,it){this._values.hasOwnProperty(et)||(this._values[et]=new $t(this._values[et].property)),this._values[et].value=new Nt(this._values[et].property,it===null?void 0:Qn(it))}getTransition(et){return Qn(this._values[et].transition)}setTransition(et,it){this._values.hasOwnProperty(et)||(this._values[et]=new $t(this._values[et].property)),this._values[et].transition=Qn(it)||void 0}serialize(){const et={};for(const it of Object.keys(this._values)){const ct=this.getValue(it);ct!==void 0&&(et[it]=ct);const dt=this.getTransition(it);dt!==void 0&&(et[`${it}-transition`]=dt)}return et}transitioned(et,it){const ct=new ir(this._properties);for(const dt of Object.keys(this._values))ct._values[dt]=this._values[dt].transitioned(et,it._values[dt]);return ct}untransitioned(){const et=new ir(this._properties);for(const it of Object.keys(this._values))et._values[it]=this._values[it].untransitioned();return et}}class er{constructor(et,it,ct,dt,gt){const xt=dt.delay||0,bt=dt.duration||0;gt=gt||0,this.property=et,this.value=it,this.begin=gt+xt,this.end=this.begin+bt,et.specification.transition&&(dt.delay||dt.duration)&&(this.prior=ct)}possiblyEvaluate(et,it,ct){const dt=et.now||0,gt=this.value.possiblyEvaluate(et,it,ct),xt=this.prior;if(xt){if(dt>this.end)return this.prior=null,gt;if(this.value.isDataDriven())return this.prior=null,gt;if(dt<this.begin)return xt.possiblyEvaluate(et,it,ct);{const bt=(dt-this.begin)/(this.end-this.begin);return this.property.interpolate(xt.possiblyEvaluate(et,it,ct),gt,Dr(bt))}}return gt}}class ir{constructor(et){this._properties=et,this._values=Object.create(et.defaultTransitioningPropertyValues)}possiblyEvaluate(et,it,ct){const dt=new lr(this._properties);for(const gt of Object.keys(this._values))dt._values[gt]=this._values[gt].possiblyEvaluate(et,it,ct);return dt}hasTransition(){for(const et of Object.keys(this._values))if(this._values[et].prior)return!0;return!1}}class sr{constructor(et){this._properties=et,this._values=Object.create(et.defaultPropertyValues)}getValue(et){return Qn(this._values[et].value)}setValue(et,it){this._values[et]=new Nt(this._values[et].property,it===null?void 0:Qn(it))}serialize(){const et={};for(const it of Object.keys(this._values)){const ct=this.getValue(it);ct!==void 0&&(et[it]=ct)}return et}possiblyEvaluate(et,it,ct){const dt=new lr(this._properties);for(const gt of Object.keys(this._values))dt._values[gt]=this._values[gt].possiblyEvaluate(et,it,ct);return dt}}class or{constructor(et,it,ct){this.property=et,this.value=it,this.parameters=ct}isConstant(){return this.value.kind==="constant"}constantOr(et){return this.value.kind==="constant"?this.value.value:et}evaluate(et,it,ct,dt){return this.property.evaluate(this.value,this.parameters,et,it,ct,dt)}}class lr{constructor(et){this._properties=et,this._values=Object.create(et.defaultPossiblyEvaluatedValues)}get(et){return this._values[et]}}class Gt{constructor(et){this.specification=et}possiblyEvaluate(et,it){return et.expression.evaluate(it)}interpolate(et,it,ct){const dt=jp[this.specification.type];return dt?dt(et,it,ct):et}}class nr{constructor(et,it){this.specification=et,this.overrides=it}possiblyEvaluate(et,it,ct,dt){return new or(this,et.expression.kind==="constant"||et.expression.kind==="camera"?{kind:"constant",value:et.expression.evaluate(it,null,{},ct,dt)}:et.expression,it)}interpolate(et,it,ct){if(et.value.kind!=="constant"||it.value.kind!=="constant")return et;if(et.value.value===void 0||it.value.value===void 0)return new or(this,{kind:"constant",value:void 0},et.parameters);const dt=jp[this.specification.type];return dt?new or(this,{kind:"constant",value:dt(et.value.value,it.value.value,ct)},et.parameters):et}evaluate(et,it,ct,dt,gt,xt){return et.kind==="constant"?et.value:et.evaluate(it,ct,dt,gt,xt)}}class hr{constructor(et){this.specification=et}possiblyEvaluate(et,it,ct,dt){return!!et.expression.evaluate(it,null,{},ct,dt)}interpolate(){return!1}}class dr{constructor(et){this.properties=et,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const it=new It(0,{});for(const ct in et){const dt=et[ct];dt.specification.overridable&&this.overridableProperties.push(ct);const gt=this.defaultPropertyValues[ct]=new Nt(dt,void 0),xt=this.defaultTransitionablePropertyValues[ct]=new $t(dt);this.defaultTransitioningPropertyValues[ct]=xt.untransitioned(),this.defaultPossiblyEvaluatedValues[ct]=gt.possiblyEvaluate(it)}}}function br(tt,et){return 256*(tt=Pr(Math.floor(tt),0,255))+Pr(Math.floor(et),0,255)}$n(nr,"DataDrivenProperty"),$n(Gt,"DataConstantProperty"),$n(hr,"ColorRampProperty");const Cr={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Tr{constructor(et,it){this._structArray=et,this._pos1=it*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class jr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(et,it){return et._trim(),it&&(et.isTransferred=!0,it.push(et.arrayBuffer)),{length:et.length,arrayBuffer:et.arrayBuffer}}static deserialize(et){const it=Object.create(this.prototype);return it.arrayBuffer=et.arrayBuffer,it.length=et.length,it.capacity=et.arrayBuffer.byteLength/it.bytesPerElement,it._refreshViews(),it}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(et){this.reserve(et),this.length=et}reserve(et){if(et>this.capacity){this.capacity=Math.max(et,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const it=this.uint8;this._refreshViews(),it&&this.uint8.set(it)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Ir(tt,et=1){let it=0,ct=0;return{members:tt.map(dt=>{const gt=Cr[dt.type].BYTES_PER_ELEMENT,xt=it=Ur(it,Math.max(et,gt)),bt=dt.components||1;return ct=Math.max(ct,gt),it+=gt*bt,{name:dt.name,type:dt.type,components:bt,offset:xt}}),size:Ur(it,Math.max(ct,et)),alignment:et}}function Ur(tt,et){return Math.ceil(tt/et)*et}class wn extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(et,it){const ct=this.length;return this.resize(ct+1),this.emplace(ct,et,it)}emplace(et,it,ct){const dt=2*et;return this.int16[dt+0]=it,this.int16[dt+1]=ct,et}}wn.prototype.bytesPerElement=4,$n(wn,"StructArrayLayout2i4");class Nr extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(et,it,ct){const dt=this.length;return this.resize(dt+1),this.emplace(dt,et,it,ct)}emplace(et,it,ct,dt){const gt=3*et;return this.int16[gt+0]=it,this.int16[gt+1]=ct,this.int16[gt+2]=dt,et}}Nr.prototype.bytesPerElement=6,$n(Nr,"StructArrayLayout3i6");class hn extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(et,it,ct,dt){const gt=this.length;return this.resize(gt+1),this.emplace(gt,et,it,ct,dt)}emplace(et,it,ct,dt,gt){const xt=4*et;return this.int16[xt+0]=it,this.int16[xt+1]=ct,this.int16[xt+2]=dt,this.int16[xt+3]=gt,et}}hn.prototype.bytesPerElement=8,$n(hn,"StructArrayLayout4i8");class Hr extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(et,it,ct,dt,gt,xt,bt){const St=this.length;return this.resize(St+1),this.emplace(St,et,it,ct,dt,gt,xt,bt)}emplace(et,it,ct,dt,gt,xt,bt,St){const Ct=6*et,Pt=12*et,jt=3*et;return this.int16[Ct+0]=it,this.int16[Ct+1]=ct,this.uint8[Pt+4]=dt,this.uint8[Pt+5]=gt,this.uint8[Pt+6]=xt,this.uint8[Pt+7]=bt,this.float32[jt+2]=St,et}}Hr.prototype.bytesPerElement=12,$n(Hr,"StructArrayLayout2i4ub1f12");class vn extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(et,it,ct,dt){const gt=this.length;return this.resize(gt+1),this.emplace(gt,et,it,ct,dt)}emplace(et,it,ct,dt,gt){const xt=4*et;return this.float32[xt+0]=it,this.float32[xt+1]=ct,this.float32[xt+2]=dt,this.float32[xt+3]=gt,et}}vn.prototype.bytesPerElement=16,$n(vn,"StructArrayLayout4f16");class Fr extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(et,it,ct,dt,gt){const xt=this.length;return this.resize(xt+1),this.emplace(xt,et,it,ct,dt,gt)}emplace(et,it,ct,dt,gt,xt){const bt=6*et,St=3*et;return this.uint16[bt+0]=it,this.uint16[bt+1]=ct,this.uint16[bt+2]=dt,this.uint16[bt+3]=gt,this.float32[St+2]=xt,et}}Fr.prototype.bytesPerElement=12,$n(Fr,"StructArrayLayout4ui1f12");class cn extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(et,it,ct,dt){const gt=this.length;return this.resize(gt+1),this.emplace(gt,et,it,ct,dt)}emplace(et,it,ct,dt,gt){const xt=4*et;return this.uint16[xt+0]=it,this.uint16[xt+1]=ct,this.uint16[xt+2]=dt,this.uint16[xt+3]=gt,et}}cn.prototype.bytesPerElement=8,$n(cn,"StructArrayLayout4ui8");class En extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(et,it,ct,dt,gt,xt){const bt=this.length;return this.resize(bt+1),this.emplace(bt,et,it,ct,dt,gt,xt)}emplace(et,it,ct,dt,gt,xt,bt){const St=6*et;return this.int16[St+0]=it,this.int16[St+1]=ct,this.int16[St+2]=dt,this.int16[St+3]=gt,this.int16[St+4]=xt,this.int16[St+5]=bt,et}}En.prototype.bytesPerElement=12,$n(En,"StructArrayLayout6i12");class yn extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(et,it,ct,dt,gt,xt,bt,St,Ct,Pt,jt,Lt){const Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,et,it,ct,dt,gt,xt,bt,St,Ct,Pt,jt,Lt)}emplace(et,it,ct,dt,gt,xt,bt,St,Ct,Pt,jt,Lt,Bt){const Ft=12*et;return this.int16[Ft+0]=it,this.int16[Ft+1]=ct,this.int16[Ft+2]=dt,this.int16[Ft+3]=gt,this.uint16[Ft+4]=xt,this.uint16[Ft+5]=bt,this.uint16[Ft+6]=St,this.uint16[Ft+7]=Ct,this.int16[Ft+8]=Pt,this.int16[Ft+9]=jt,this.int16[Ft+10]=Lt,this.int16[Ft+11]=Bt,et}}yn.prototype.bytesPerElement=24,$n(yn,"StructArrayLayout4i4ui4i24");class Sn extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(et,it,ct,dt,gt,xt){const bt=this.length;return this.resize(bt+1),this.emplace(bt,et,it,ct,dt,gt,xt)}emplace(et,it,ct,dt,gt,xt,bt){const St=10*et,Ct=5*et;return this.int16[St+0]=it,this.int16[St+1]=ct,this.int16[St+2]=dt,this.float32[Ct+2]=gt,this.float32[Ct+3]=xt,this.float32[Ct+4]=bt,et}}Sn.prototype.bytesPerElement=20,$n(Sn,"StructArrayLayout3i3f20");class Gn extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(et){const it=this.length;return this.resize(it+1),this.emplace(it,et)}emplace(et,it){return this.uint32[1*et+0]=it,et}}Gn.prototype.bytesPerElement=4,$n(Gn,"StructArrayLayout1ul4");class Yn extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(et,it,ct,dt,gt,xt,bt,St,Ct,Pt,jt,Lt,Bt){const Ft=this.length;return this.resize(Ft+1),this.emplace(Ft,et,it,ct,dt,gt,xt,bt,St,Ct,Pt,jt,Lt,Bt)}emplace(et,it,ct,dt,gt,xt,bt,St,Ct,Pt,jt,Lt,Bt,Ft){const Wt=20*et,rr=10*et;return this.int16[Wt+0]=it,this.int16[Wt+1]=ct,this.int16[Wt+2]=dt,this.int16[Wt+3]=gt,this.int16[Wt+4]=xt,this.float32[rr+3]=bt,this.float32[rr+4]=St,this.float32[rr+5]=Ct,this.float32[rr+6]=Pt,this.int16[Wt+14]=jt,this.uint32[rr+8]=Lt,this.uint16[Wt+18]=Bt,this.uint16[Wt+19]=Ft,et}}Yn.prototype.bytesPerElement=40,$n(Yn,"StructArrayLayout5i4f1i1ul2ui40");class On extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(et,it,ct,dt,gt,xt,bt){const St=this.length;return this.resize(St+1),this.emplace(St,et,it,ct,dt,gt,xt,bt)}emplace(et,it,ct,dt,gt,xt,bt,St){const Ct=8*et;return this.int16[Ct+0]=it,this.int16[Ct+1]=ct,this.int16[Ct+2]=dt,this.int16[Ct+4]=gt,this.int16[Ct+5]=xt,this.int16[Ct+6]=bt,this.int16[Ct+7]=St,et}}On.prototype.bytesPerElement=16,$n(On,"StructArrayLayout3i2i2i16");class Zn extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(et,it,ct,dt,gt){const xt=this.length;return this.resize(xt+1),this.emplace(xt,et,it,ct,dt,gt)}emplace(et,it,ct,dt,gt,xt){const bt=4*et,St=8*et;return this.float32[bt+0]=it,this.float32[bt+1]=ct,this.float32[bt+2]=dt,this.int16[St+6]=gt,this.int16[St+7]=xt,et}}Zn.prototype.bytesPerElement=16,$n(Zn,"StructArrayLayout2f1f2i16");class fo extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(et,it,ct,dt){const gt=this.length;return this.resize(gt+1),this.emplace(gt,et,it,ct,dt)}emplace(et,it,ct,dt,gt){const xt=12*et,bt=3*et;return this.uint8[xt+0]=it,this.uint8[xt+1]=ct,this.float32[bt+1]=dt,this.float32[bt+2]=gt,et}}fo.prototype.bytesPerElement=12,$n(fo,"StructArrayLayout2ub2f12");class co extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(et,it,ct){const dt=this.length;return this.resize(dt+1),this.emplace(dt,et,it,ct)}emplace(et,it,ct,dt){const gt=3*et;return this.float32[gt+0]=it,this.float32[gt+1]=ct,this.float32[gt+2]=dt,et}}co.prototype.bytesPerElement=12,$n(co,"StructArrayLayout3f12");class Vn extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(et,it,ct){const dt=this.length;return this.resize(dt+1),this.emplace(dt,et,it,ct)}emplace(et,it,ct,dt){const gt=3*et;return this.uint16[gt+0]=it,this.uint16[gt+1]=ct,this.uint16[gt+2]=dt,et}}Vn.prototype.bytesPerElement=6,$n(Vn,"StructArrayLayout3ui6");class Co extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(et,it,ct,dt,gt,xt,bt,St,Ct,Pt,jt,Lt,Bt,Ft,Wt,rr,cr,yr,ur,mr,xr){const _r=this.length;return this.resize(_r+1),this.emplace(_r,et,it,ct,dt,gt,xt,bt,St,Ct,Pt,jt,Lt,Bt,Ft,Wt,rr,cr,yr,ur,mr,xr)}emplace(et,it,ct,dt,gt,xt,bt,St,Ct,Pt,jt,Lt,Bt,Ft,Wt,rr,cr,yr,ur,mr,xr,_r){const Vr=30*et,Br=15*et,Qr=60*et;return this.int16[Vr+0]=it,this.int16[Vr+1]=ct,this.int16[Vr+2]=dt,this.float32[Br+2]=gt,this.float32[Br+3]=xt,this.uint16[Vr+8]=bt,this.uint16[Vr+9]=St,this.uint32[Br+5]=Ct,this.uint32[Br+6]=Pt,this.uint32[Br+7]=jt,this.uint16[Vr+16]=Lt,this.uint16[Vr+17]=Bt,this.uint16[Vr+18]=Ft,this.float32[Br+10]=Wt,this.float32[Br+11]=rr,this.uint8[Qr+48]=cr,this.uint8[Qr+49]=yr,this.uint8[Qr+50]=ur,this.uint32[Br+13]=mr,this.int16[Vr+28]=xr,this.uint8[Qr+58]=_r,et}}Co.prototype.bytesPerElement=60,$n(Co,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Po extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(et,it,ct,dt,gt,xt,bt,St,Ct,Pt,jt,Lt,Bt,Ft,Wt,rr,cr,yr,ur,mr,xr,_r,Vr,Br,Qr,bn,Wr,pn,mn,_n){const Cn=this.length;return this.resize(Cn+1),this.emplace(Cn,et,it,ct,dt,gt,xt,bt,St,Ct,Pt,jt,Lt,Bt,Ft,Wt,rr,cr,yr,ur,mr,xr,_r,Vr,Br,Qr,bn,Wr,pn,mn,_n)}emplace(et,it,ct,dt,gt,xt,bt,St,Ct,Pt,jt,Lt,Bt,Ft,Wt,rr,cr,yr,ur,mr,xr,_r,Vr,Br,Qr,bn,Wr,pn,mn,_n,Cn){const Kr=38*et,In=19*et;return this.int16[Kr+0]=it,this.int16[Kr+1]=ct,this.int16[Kr+2]=dt,this.float32[In+2]=gt,this.float32[In+3]=xt,this.int16[Kr+8]=bt,this.int16[Kr+9]=St,this.int16[Kr+10]=Ct,this.int16[Kr+11]=Pt,this.int16[Kr+12]=jt,this.int16[Kr+13]=Lt,this.uint16[Kr+14]=Bt,this.uint16[Kr+15]=Ft,this.uint16[Kr+16]=Wt,this.uint16[Kr+17]=rr,this.uint16[Kr+18]=cr,this.uint16[Kr+19]=yr,this.uint16[Kr+20]=ur,this.uint16[Kr+21]=mr,this.uint16[Kr+22]=xr,this.uint16[Kr+23]=_r,this.uint16[Kr+24]=Vr,this.uint16[Kr+25]=Br,this.uint16[Kr+26]=Qr,this.uint16[Kr+27]=bn,this.uint16[Kr+28]=Wr,this.uint32[In+15]=pn,this.float32[In+16]=mn,this.float32[In+17]=_n,this.float32[In+18]=Cn,et}}Po.prototype.bytesPerElement=76,$n(Po,"StructArrayLayout3i2f6i15ui1ul3f76");class Io extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(et){const it=this.length;return this.resize(it+1),this.emplace(it,et)}emplace(et,it){return this.float32[1*et+0]=it,et}}Io.prototype.bytesPerElement=4,$n(Io,"StructArrayLayout1f4");class Mo extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(et,it,ct,dt,gt){const xt=this.length;return this.resize(xt+1),this.emplace(xt,et,it,ct,dt,gt)}emplace(et,it,ct,dt,gt,xt){const bt=5*et;return this.float32[bt+0]=it,this.float32[bt+1]=ct,this.float32[bt+2]=dt,this.float32[bt+3]=gt,this.float32[bt+4]=xt,et}}Mo.prototype.bytesPerElement=20,$n(Mo,"StructArrayLayout5f20");class zs extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(et,it,ct,dt){const gt=this.length;return this.resize(gt+1),this.emplace(gt,et,it,ct,dt)}emplace(et,it,ct,dt,gt){const xt=6*et;return this.uint32[3*et+0]=it,this.uint16[xt+2]=ct,this.uint16[xt+3]=dt,this.uint16[xt+4]=gt,et}}zs.prototype.bytesPerElement=12,$n(zs,"StructArrayLayout1ul3ui12");class Cs extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(et,it){const ct=this.length;return this.resize(ct+1),this.emplace(ct,et,it)}emplace(et,it,ct){const dt=2*et;return this.uint16[dt+0]=it,this.uint16[dt+1]=ct,et}}Cs.prototype.bytesPerElement=4,$n(Cs,"StructArrayLayout2ui4");class El extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(et){const it=this.length;return this.resize(it+1),this.emplace(it,et)}emplace(et,it){return this.uint16[1*et+0]=it,et}}El.prototype.bytesPerElement=2,$n(El,"StructArrayLayout1ui2");class Gl extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(et,it){const ct=this.length;return this.resize(ct+1),this.emplace(ct,et,it)}emplace(et,it,ct){const dt=2*et;return this.float32[dt+0]=it,this.float32[dt+1]=ct,et}}Gl.prototype.bytesPerElement=8,$n(Gl,"StructArrayLayout2f8");class Wo extends Tr{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Wo.prototype.size=40;class jo extends Yn{get(et){return new Wo(this,et)}}$n(jo,"CollisionBoxArray");class wo extends Tr{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(et){this._structArray.uint8[this._pos1+49]=et}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(et){this._structArray.uint8[this._pos1+50]=et}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(et){this._structArray.uint32[this._pos4+13]=et}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(et){this._structArray.uint8[this._pos1+58]=et}}wo.prototype.size=60;class cs extends Co{get(et){return new wo(this,et)}}$n(cs,"PlacedSymbolArray");class Us extends Tr{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(et){this._structArray.uint32[this._pos4+15]=et}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Us.prototype.size=76;class Go extends Po{get(et){return new Us(this,et)}}$n(Go,"SymbolInstanceArray");class Ws extends Io{getoffsetX(et){return this.float32[1*et+0]}}$n(Ws,"GlyphOffsetArray");class Om extends wn{getx(et){return this.int16[2*et+0]}gety(et){return this.int16[2*et+1]}}$n(Om,"SymbolLineVertexArray");class Ou extends Tr{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Ou.prototype.size=12;class qp extends zs{get(et){return new Ou(this,et)}}$n(qp,"FeatureIndexArray");class au extends Cs{geta_centroid_pos0(et){return this.uint16[2*et+0]}geta_centroid_pos1(et){return this.uint16[2*et+1]}}$n(au,"FillExtrusionCentroidArray");const xu=Ir([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),zu=Ir([{name:"a_dash",components:4,type:"Uint16"}]);var zm={exports:{}},Zp={exports:{}};Zp.exports=function(tt,et){var it,ct,dt,gt,xt,bt,St,Ct;for(ct=tt.length-(it=3&tt.length),dt=et,xt=3432918353,bt=461845907,Ct=0;Ct<ct;)St=255&tt.charCodeAt(Ct)|(255&tt.charCodeAt(++Ct))<<8|(255&tt.charCodeAt(++Ct))<<16|(255&tt.charCodeAt(++Ct))<<24,++Ct,dt=27492+(65535&(gt=5*(65535&(dt=(dt^=St=(65535&(St=(St=(65535&St)*xt+(((St>>>16)*xt&65535)<<16)&4294967295)<<15|St>>>17))*bt+(((St>>>16)*bt&65535)<<16)&4294967295)<<13|dt>>>19))+((5*(dt>>>16)&65535)<<16)&4294967295))+((58964+(gt>>>16)&65535)<<16);switch(St=0,it){case 3:St^=(255&tt.charCodeAt(Ct+2))<<16;case 2:St^=(255&tt.charCodeAt(Ct+1))<<8;case 1:dt^=St=(65535&(St=(St=(65535&(St^=255&tt.charCodeAt(Ct)))*xt+(((St>>>16)*xt&65535)<<16)&4294967295)<<15|St>>>17))*bt+(((St>>>16)*bt&65535)<<16)&4294967295}return dt^=tt.length,dt=2246822507*(65535&(dt^=dt>>>16))+((2246822507*(dt>>>16)&65535)<<16)&4294967295,dt=3266489909*(65535&(dt^=dt>>>13))+((3266489909*(dt>>>16)&65535)<<16)&4294967295,(dt^=dt>>>16)>>>0};var e_=Zp.exports,B0={exports:{}};B0.exports=function(tt,et){for(var it,ct=tt.length,dt=et^ct,gt=0;ct>=4;)it=1540483477*(65535&(it=255&tt.charCodeAt(gt)|(255&tt.charCodeAt(++gt))<<8|(255&tt.charCodeAt(++gt))<<16|(255&tt.charCodeAt(++gt))<<24))+((1540483477*(it>>>16)&65535)<<16),dt=1540483477*(65535&dt)+((1540483477*(dt>>>16)&65535)<<16)^(it=1540483477*(65535&(it^=it>>>24))+((1540483477*(it>>>16)&65535)<<16)),ct-=4,++gt;switch(ct){case 3:dt^=(255&tt.charCodeAt(gt+2))<<16;case 2:dt^=(255&tt.charCodeAt(gt+1))<<8;case 1:dt=1540483477*(65535&(dt^=255&tt.charCodeAt(gt)))+((1540483477*(dt>>>16)&65535)<<16)}return dt=1540483477*(65535&(dt^=dt>>>13))+((1540483477*(dt>>>16)&65535)<<16),(dt^=dt>>>15)>>>0};var F0=e_,gE=B0.exports;zm.exports=F0,zm.exports.murmur3=F0,zm.exports.murmur2=gE;var Pv=Jt(zm.exports);class Ex{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(et,it,ct,dt){this.ids.push(U0(et)),this.positions.push(it,ct,dt)}getPositions(et){const it=U0(et);let ct=0,dt=this.ids.length-1;for(;ct<dt;){const xt=ct+dt>>1;this.ids[xt]>=it?dt=xt:ct=xt+1}const gt=[];for(;this.ids[ct]===it;)gt.push({index:this.positions[3*ct],start:this.positions[3*ct+1],end:this.positions[3*ct+2]}),ct++;return gt}static serialize(et,it){const ct=new Float64Array(et.ids),dt=new Uint32Array(et.positions);return Iv(ct,dt,0,ct.length-1),it&&it.push(ct.buffer,dt.buffer),{ids:ct,positions:dt}}static deserialize(et){const it=new Ex;return it.ids=et.ids,it.positions=et.positions,it.indexed=!0,it}}function U0(tt){const et=+tt;return!isNaN(et)&&Number.MIN_SAFE_INTEGER<=et&&et<=Number.MAX_SAFE_INTEGER?et:Pv(String(tt))}function Iv(tt,et,it,ct){for(;it<ct;){const dt=tt[it+ct>>1];let gt=it-1,xt=ct+1;for(;;){do gt++;while(tt[gt]<dt);do xt--;while(tt[xt]>dt);if(gt>=xt)break;Sx(tt,gt,xt),Sx(et,3*gt,3*xt),Sx(et,3*gt+1,3*xt+1),Sx(et,3*gt+2,3*xt+2)}xt-it<ct-xt?(Iv(tt,et,it,xt),it=xt+1):(Iv(tt,et,xt+1,ct),ct=xt)}}function Sx(tt,et,it){const ct=tt[et];tt[et]=tt[it],tt[it]=ct}$n(Ex,"FeaturePositionMap");class Nu{constructor(et){this.gl=et.gl,this.initialized=!1}fetchUniformLocation(et,it){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(et,it),this.initialized=!0),!!this.location}}class Tx extends Nu{constructor(et){super(et),this.current=0}set(et,it,ct){this.fetchUniformLocation(et,it)&&this.current!==ct&&(this.current=ct,this.gl.uniform1f(this.location,ct))}}class V0 extends Nu{constructor(et){super(et),this.current=[0,0,0,0]}set(et,it,ct){this.fetchUniformLocation(et,it)&&(ct[0]===this.current[0]&&ct[1]===this.current[1]&&ct[2]===this.current[2]&&ct[3]===this.current[3]||(this.current=ct,this.gl.uniform4f(this.location,ct[0],ct[1],ct[2],ct[3])))}}class G0 extends Nu{constructor(et){super(et),this.current=rs.transparent}set(et,it,ct){this.fetchUniformLocation(et,it)&&(ct.r===this.current.r&&ct.g===this.current.g&&ct.b===this.current.b&&ct.a===this.current.a||(this.current=ct,this.gl.uniform4f(this.location,ct.r,ct.g,ct.b,ct.a)))}}const yE=new Float32Array(16),_E=new Float32Array(9),xE=new Float32Array(4);function Mv(tt){return[br(255*tt.r,255*tt.g),br(255*tt.b,255*tt.a)]}class t_{constructor(et,it,ct){this.value=et,this.uniformNames=it.map(dt=>`u_${dt}`),this.type=ct}setUniform(et,it,ct,dt,gt){it.set(et,gt,dt.constantOr(this.value))}getBinding(et,it){return this.type==="color"?new G0(et):new Tx(et)}}class Nm{constructor(et,it){this.uniformNames=it.map(ct=>`u_${ct}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(et){this.pixelRatio=et.pixelRatio||1,this.pattern=et.tl.concat(et.br)}setUniform(et,it,ct,dt,gt){const xt=gt==="u_pattern"||gt==="u_dash"?this.pattern:gt==="u_pixel_ratio"?this.pixelRatio:null;xt&&it.set(et,gt,xt)}getBinding(et,it){return it==="u_pattern"||it==="u_dash"?new V0(et):new Tx(et)}}class Bu{constructor(et,it,ct,dt){this.expression=et,this.type=ct,this.maxValue=0,this.paintVertexAttributes=it.map(gt=>({name:`a_${gt}`,type:"Float32",components:ct==="color"?2:1,offset:0})),this.paintVertexArray=new dt}populatePaintArray(et,it,ct,dt,gt,xt){const bt=this.paintVertexArray.length,St=this.expression.evaluate(new It(0),it,{},gt,dt,xt);this.paintVertexArray.resize(et),this._setPaintValue(bt,et,St)}updatePaintArray(et,it,ct,dt,gt){const xt=this.expression.evaluate({zoom:0},ct,dt,void 0,gt);this._setPaintValue(et,it,xt)}_setPaintValue(et,it,ct){if(this.type==="color"){const dt=Mv(ct);for(let gt=et;gt<it;gt++)this.paintVertexArray.emplace(gt,dt[0],dt[1])}else{for(let dt=et;dt<it;dt++)this.paintVertexArray.emplace(dt,ct);this.maxValue=Math.max(this.maxValue,Math.abs(ct))}}upload(et){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=et.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class lu{constructor(et,it,ct,dt,gt,xt){this.expression=et,this.uniformNames=it.map(bt=>`u_${bt}_t`),this.type=ct,this.useIntegerZoom=dt,this.zoom=gt,this.maxValue=0,this.paintVertexAttributes=it.map(bt=>({name:`a_${bt}`,type:"Float32",components:ct==="color"?4:2,offset:0})),this.paintVertexArray=new xt}populatePaintArray(et,it,ct,dt,gt,xt){const bt=this.expression.evaluate(new It(this.zoom),it,{},gt,dt,xt),St=this.expression.evaluate(new It(this.zoom+1),it,{},gt,dt,xt),Ct=this.paintVertexArray.length;this.paintVertexArray.resize(et),this._setPaintValue(Ct,et,bt,St)}updatePaintArray(et,it,ct,dt,gt){const xt=this.expression.evaluate({zoom:this.zoom},ct,dt,void 0,gt),bt=this.expression.evaluate({zoom:this.zoom+1},ct,dt,void 0,gt);this._setPaintValue(et,it,xt,bt)}_setPaintValue(et,it,ct,dt){if(this.type==="color"){const gt=Mv(ct),xt=Mv(dt);for(let bt=et;bt<it;bt++)this.paintVertexArray.emplace(bt,gt[0],gt[1],xt[0],xt[1])}else{for(let gt=et;gt<it;gt++)this.paintVertexArray.emplace(gt,ct,dt);this.maxValue=Math.max(this.maxValue,Math.abs(ct),Math.abs(dt))}}upload(et){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=et.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(et,it,ct,dt,gt){const xt=this.useIntegerZoom?Math.floor(ct.zoom):ct.zoom,bt=Pr(this.expression.interpolationFactor(xt,this.zoom,this.zoom+1),0,1);it.set(et,gt,bt)}getBinding(et,it){return new Tx(et)}}class up{constructor(et,it,ct,dt,gt){this.expression=et,this.layerId=gt,this.paintVertexAttributes=(ct==="array"?zu:xu).members;for(let xt=0;xt<it.length;++xt);this.paintVertexArray=new dt}populatePaintArray(et,it,ct){const dt=this.paintVertexArray.length;this.paintVertexArray.resize(et),this._setPaintValues(dt,et,it.patterns&&it.patterns[this.layerId],ct)}updatePaintArray(et,it,ct,dt,gt,xt){this._setPaintValues(et,it,ct.patterns&&ct.patterns[this.layerId],xt)}_setPaintValues(et,it,ct,dt){if(!dt||!ct)return;const gt=dt[ct];if(!gt)return;const{tl:xt,br:bt,pixelRatio:St}=gt;for(let Ct=et;Ct<it;Ct++)this.paintVertexArray.emplace(Ct,xt[0],xt[1],bt[0],bt[1],St)}upload(et){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=et.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class hp{constructor(et,it,ct=()=>!0){this.binders={},this._buffers=[];const dt=[];for(const gt in et.paint._values){if(!ct(gt))continue;const xt=et.paint.get(gt);if(!(xt instanceof or&&rp(xt.property.specification)))continue;const bt=wE(gt,et.type),St=xt.value,Ct=xt.property.specification.type,Pt=!!xt.property.useIntegerZoom,jt=gt==="line-dasharray"||gt.endsWith("pattern"),Lt=gt==="line-dasharray"&&et.layout.get("line-cap").value.kind!=="constant";if(St.kind!=="constant"||Lt)if(St.kind==="source"||Lt||jt){const Bt=H0(gt,Ct,"source");this.binders[gt]=jt?new up(St,bt,Ct,Bt,et.id):new Bu(St,bt,Ct,Bt),dt.push(`/a_${gt}`)}else{const Bt=H0(gt,Ct,"composite");this.binders[gt]=new lu(St,bt,Ct,Pt,it,Bt),dt.push(`/z_${gt}`)}else this.binders[gt]=jt?new Nm(St.value,bt):new t_(St.value,bt,Ct),dt.push(`/u_${gt}`)}this.cacheKey=dt.sort().join("")}getMaxValue(et){const it=this.binders[et];return it instanceof Bu||it instanceof lu?it.maxValue:0}populatePaintArrays(et,it,ct,dt,gt,xt){for(const bt in this.binders){const St=this.binders[bt];(St instanceof Bu||St instanceof lu||St instanceof up)&&St.populatePaintArray(et,it,ct,dt,gt,xt)}}setConstantPatternPositions(et){for(const it in this.binders){const ct=this.binders[it];ct instanceof Nm&&ct.setConstantPatternPositions(et)}}updatePaintArrays(et,it,ct,dt,gt,xt){let bt=!1;for(const St in et){const Ct=it.getPositions(St);for(const Pt of Ct){const jt=ct.feature(Pt.index);for(const Lt in this.binders){const Bt=this.binders[Lt];if((Bt instanceof Bu||Bt instanceof lu||Bt instanceof up)&&Bt.expression.isStateDependent===!0){const Ft=dt.paint.get(Lt);Bt.expression=Ft.value,Bt.updatePaintArray(Pt.start,Pt.end,jt,et[St],gt,xt),bt=!0}}}}return bt}defines(){const et=[];for(const it in this.binders){const ct=this.binders[it];(ct instanceof t_||ct instanceof Nm)&&et.push(...ct.uniformNames.map(dt=>`#define HAS_UNIFORM_${dt}`))}return et}getBinderAttributes(){const et=[];for(const it in this.binders){const ct=this.binders[it];if(ct instanceof Bu||ct instanceof lu||ct instanceof up)for(let dt=0;dt<ct.paintVertexAttributes.length;dt++)et.push(ct.paintVertexAttributes[dt].name)}return et}getBinderUniforms(){const et=[];for(const it in this.binders){const ct=this.binders[it];if(ct instanceof t_||ct instanceof Nm||ct instanceof lu)for(const dt of ct.uniformNames)et.push(dt)}return et}getPaintVertexBuffers(){return this._buffers}getUniforms(et){const it=[];for(const ct in this.binders){const dt=this.binders[ct];if(dt instanceof t_||dt instanceof Nm||dt instanceof lu)for(const gt of dt.uniformNames)it.push({name:gt,property:ct,binding:dt.getBinding(et,gt)})}return it}setUniforms(et,it,ct,dt,gt){for(const{name:xt,property:bt,binding:St}of ct)this.binders[bt].setUniform(et,St,gt,dt.get(bt),xt)}updatePaintBuffers(){this._buffers=[];for(const et in this.binders){const it=this.binders[et];(it instanceof Bu||it instanceof lu||it instanceof up)&&it.paintVertexBuffer&&this._buffers.push(it.paintVertexBuffer)}}upload(et){for(const it in this.binders){const ct=this.binders[it];(ct instanceof Bu||ct instanceof lu||ct instanceof up)&&ct.upload(et)}this.updatePaintBuffers()}destroy(){for(const et in this.binders){const it=this.binders[et];(it instanceof Bu||it instanceof lu||it instanceof up)&&it.destroy()}}}class Xp{constructor(et,it,ct=()=>!0){this.programConfigurations={};for(const dt of et)this.programConfigurations[dt.id]=new hp(dt,it,ct);this.needsUpload=!1,this._featureMap=new Ex,this._bufferOffset=0}populatePaintArrays(et,it,ct,dt,gt,xt,bt){for(const St in this.programConfigurations)this.programConfigurations[St].populatePaintArrays(et,it,dt,gt,xt,bt);it.id!==void 0&&this._featureMap.add(it.id,ct,this._bufferOffset,et),this._bufferOffset=et,this.needsUpload=!0}updatePaintArrays(et,it,ct,dt,gt){for(const xt of ct)this.needsUpload=this.programConfigurations[xt.id].updatePaintArrays(et,this._featureMap,it,xt,dt,gt)||this.needsUpload}get(et){return this.programConfigurations[et]}upload(et){if(this.needsUpload){for(const it in this.programConfigurations)this.programConfigurations[it].upload(et);this.needsUpload=!1}}destroy(){for(const et in this.programConfigurations)this.programConfigurations[et].destroy()}}const vE={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function wE(tt,et){return vE[tt]||[tt.replace(`${et}-`,"").replace(/-/g,"_")]}const bE={"line-pattern":{source:Fr,composite:Fr},"fill-pattern":{source:Fr,composite:Fr},"fill-extrusion-pattern":{source:Fr,composite:Fr},"line-dasharray":{source:cn,composite:cn}},EE={color:{source:Gl,composite:vn},number:{source:Io,composite:Gl}};function H0(tt,et,it){const ct=bE[tt];return ct&&ct[it]||EE[et][it]}$n(t_,"ConstantBinder"),$n(Nm,"PatternConstantBinder"),$n(Bu,"SourceExpressionBinder"),$n(up,"PatternCompositeBinder"),$n(lu,"CompositeExpressionBinder"),$n(hp,"ProgramConfiguration",{omit:["_buffers"]}),$n(Xp,"ProgramConfigurationSet");const W0="-transition";class cu extends bp{constructor(et,it){if(super(),this.id=et.id,this.type=et.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,et.type!=="custom"&&(this.metadata=et.metadata,this.minzoom=et.minzoom,this.maxzoom=et.maxzoom,et.type!=="background"&&et.type!=="sky"&&(this.source=et.source,this.sourceLayer=et["source-layer"],this.filter=et.filter),it.layout&&(this._unevaluatedLayout=new sr(it.layout)),it.paint)){this._transitionablePaint=new Vt(it.paint);for(const ct in et.paint)this.setPaintProperty(ct,et.paint[ct],{validate:!1});for(const ct in et.layout)this.setLayoutProperty(ct,et.layout[ct],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new lr(it.paint)}}getLayoutProperty(et){return et==="visibility"?this.visibility:this._unevaluatedLayout.getValue(et)}setLayoutProperty(et,it,ct={}){it!=null&&this._validate(Tv,`layers.${this.id}.layout.${et}`,et,it,ct)||(et!=="visibility"?this._unevaluatedLayout.setValue(et,it):this.visibility=it)}getPaintProperty(et){return Ao(et,W0)?this._transitionablePaint.getTransition(et.slice(0,-11)):this._transitionablePaint.getValue(et)}setPaintProperty(et,it,ct={}){if(it!=null&&this._validate(Sv,`layers.${this.id}.paint.${et}`,et,it,ct))return!1;if(Ao(et,W0))return this._transitionablePaint.setTransition(et.slice(0,-11),it||void 0),!1;{const dt=this._transitionablePaint._values[et],gt=dt.value.isDataDriven(),xt=dt.value;this._transitionablePaint.setValue(et,it),this._handleSpecialPaintPropertyUpdate(et);const bt=this._transitionablePaint._values[et].value,St=bt.isDataDriven(),Ct=Ao(et,"pattern")||et==="line-dasharray";return St||gt||Ct||this._handleOverridablePaintPropertyUpdate(et,xt,bt)}}_handleSpecialPaintPropertyUpdate(et){}getProgramIds(){return null}getProgramConfiguration(et){return null}_handleOverridablePaintPropertyUpdate(et,it,ct){return!1}isHidden(et){return!!(this.minzoom&&et<this.minzoom)||!!(this.maxzoom&&et>=this.maxzoom)||this.visibility==="none"}updateTransitions(et){this._transitioningPaint=this._transitionablePaint.transitioned(et,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(et,it){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(et,void 0,it)),this.paint=this._transitioningPaint.possiblyEvaluate(et,void 0,it)}serialize(){const et={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(et.layout=et.layout||{},et.layout.visibility=this.visibility),so(et,(it,ct)=>!(it===void 0||ct==="layout"&&!Object.keys(it).length||ct==="paint"&&!Object.keys(it).length))}_validate(et,it,ct,dt,gt={}){return(!gt||gt.validate!==!1)&&xx(this,et.call(_x,{key:it,layerType:this.type,objectKey:ct,value:dt,styleSpec:Yr,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const et in this.paint._values){const it=this.paint.get(et);if(it instanceof or&&rp(it.property.specification)&&(it.value.kind==="source"||it.value.kind==="composite")&&it.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=jm(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const SE=Ir([{name:"a_pos",components:2,type:"Int16"}],4),TE=Ir([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class us{constructor(et=[]){this.segments=et}prepareSegment(et,it,ct,dt){let gt=this.segments[this.segments.length-1];return et>us.MAX_VERTEX_ARRAY_LENGTH&&Hn(`Max vertices per segment is ${us.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${et}`),(!gt||gt.vertexLength+et>us.MAX_VERTEX_ARRAY_LENGTH||gt.sortKey!==dt)&&(gt={vertexOffset:it.length,primitiveOffset:ct.length,vertexLength:0,primitiveLength:0},dt!==void 0&&(gt.sortKey=dt),this.segments.push(gt)),gt}get(){return this.segments}destroy(){for(const et of this.segments)for(const it in et.vaos)et.vaos[it].destroy()}static simpleSegment(et,it,ct,dt){return new us([{vertexOffset:et,primitiveOffset:it,vertexLength:ct,primitiveLength:dt,vaos:{},sortKey:0}])}}us.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,$n(us,"SegmentVector");var qn=8192;class dp{constructor(et,it){et&&(it?this.setSouthWest(et).setNorthEast(it):et.length===4?this.setSouthWest([et[0],et[1]]).setNorthEast([et[2],et[3]]):this.setSouthWest(et[0]).setNorthEast(et[1]))}setNorthEast(et){return this._ne=et instanceof Do?new Do(et.lng,et.lat):Do.convert(et),this}setSouthWest(et){return this._sw=et instanceof Do?new Do(et.lng,et.lat):Do.convert(et),this}extend(et){const it=this._sw,ct=this._ne;let dt,gt;if(et instanceof Do)dt=et,gt=et;else{if(!(et instanceof dp))return Array.isArray(et)?et.length===4||et.every(Array.isArray)?this.extend(dp.convert(et)):this.extend(Do.convert(et)):typeof et=="object"&&et!==null&&et.hasOwnProperty("lat")&&(et.hasOwnProperty("lon")||et.hasOwnProperty("lng"))?this.extend(Do.convert(et)):this;if(dt=et._sw,gt=et._ne,!dt||!gt)return this}return it||ct?(it.lng=Math.min(dt.lng,it.lng),it.lat=Math.min(dt.lat,it.lat),ct.lng=Math.max(gt.lng,ct.lng),ct.lat=Math.max(gt.lat,ct.lat)):(this._sw=new Do(dt.lng,dt.lat),this._ne=new Do(gt.lng,gt.lat)),this}getCenter(){return new Do((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Do(this.getWest(),this.getNorth())}getSouthEast(){return new Do(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(et){const{lng:it,lat:ct}=Do.convert(et);let dt=this._sw.lng<=it&&it<=this._ne.lng;return this._sw.lng>this._ne.lng&&(dt=this._sw.lng>=it&&it>=this._ne.lng),this._sw.lat<=ct&&ct<=this._ne.lat&&dt}static convert(et){return!et||et instanceof dp?et:new dp(et)}}var Cx=1e-6,Sl=typeof Float32Array<"u"?Float32Array:Array;function q0(){var tt=new Sl(9);return Sl!=Float32Array&&(tt[1]=0,tt[2]=0,tt[3]=0,tt[5]=0,tt[6]=0,tt[7]=0),tt[0]=1,tt[4]=1,tt[8]=1,tt}function Z0(tt,et,it){var ct=et[0],dt=et[1],gt=et[2],xt=et[3],bt=et[4],St=et[5],Ct=et[6],Pt=et[7],jt=et[8],Lt=it[0],Bt=it[1],Ft=it[2],Wt=it[3],rr=it[4],cr=it[5],yr=it[6],ur=it[7],mr=it[8];return tt[0]=Lt*ct+Bt*xt+Ft*Ct,tt[1]=Lt*dt+Bt*bt+Ft*Pt,tt[2]=Lt*gt+Bt*St+Ft*jt,tt[3]=Wt*ct+rr*xt+cr*Ct,tt[4]=Wt*dt+rr*bt+cr*Pt,tt[5]=Wt*gt+rr*St+cr*jt,tt[6]=yr*ct+ur*xt+mr*Ct,tt[7]=yr*dt+ur*bt+mr*Pt,tt[8]=yr*gt+ur*St+mr*jt,tt}function uu(tt){return tt[0]=1,tt[1]=0,tt[2]=0,tt[3]=0,tt[4]=0,tt[5]=1,tt[6]=0,tt[7]=0,tt[8]=0,tt[9]=0,tt[10]=1,tt[11]=0,tt[12]=0,tt[13]=0,tt[14]=0,tt[15]=1,tt}function jv(tt,et){var it=et[0],ct=et[1],dt=et[2],gt=et[3],xt=et[4],bt=et[5],St=et[6],Ct=et[7],Pt=et[8],jt=et[9],Lt=et[10],Bt=et[11],Ft=et[12],Wt=et[13],rr=et[14],cr=et[15],yr=it*bt-ct*xt,ur=it*St-dt*xt,mr=it*Ct-gt*xt,xr=ct*St-dt*bt,_r=ct*Ct-gt*bt,Vr=dt*Ct-gt*St,Br=Pt*Wt-jt*Ft,Qr=Pt*rr-Lt*Ft,bn=Pt*cr-Bt*Ft,Wr=jt*rr-Lt*Wt,pn=jt*cr-Bt*Wt,mn=Lt*cr-Bt*rr,_n=yr*mn-ur*pn+mr*Wr+xr*bn-_r*Qr+Vr*Br;return _n?(tt[0]=(bt*mn-St*pn+Ct*Wr)*(_n=1/_n),tt[1]=(dt*pn-ct*mn-gt*Wr)*_n,tt[2]=(Wt*Vr-rr*_r+cr*xr)*_n,tt[3]=(Lt*_r-jt*Vr-Bt*xr)*_n,tt[4]=(St*bn-xt*mn-Ct*Qr)*_n,tt[5]=(it*mn-dt*bn+gt*Qr)*_n,tt[6]=(rr*mr-Ft*Vr-cr*ur)*_n,tt[7]=(Pt*Vr-Lt*mr+Bt*ur)*_n,tt[8]=(xt*pn-bt*bn+Ct*Br)*_n,tt[9]=(ct*bn-it*pn-gt*Br)*_n,tt[10]=(Ft*_r-Wt*mr+cr*yr)*_n,tt[11]=(jt*mr-Pt*_r-Bt*yr)*_n,tt[12]=(bt*Qr-xt*Wr-St*Br)*_n,tt[13]=(it*Wr-ct*Qr+dt*Br)*_n,tt[14]=(Wt*ur-Ft*xr-rr*yr)*_n,tt[15]=(Pt*xr-jt*ur+Lt*yr)*_n,tt):null}function Kp(tt,et,it){var ct=et[0],dt=et[1],gt=et[2],xt=et[3],bt=et[4],St=et[5],Ct=et[6],Pt=et[7],jt=et[8],Lt=et[9],Bt=et[10],Ft=et[11],Wt=et[12],rr=et[13],cr=et[14],yr=et[15],ur=it[0],mr=it[1],xr=it[2],_r=it[3];return tt[0]=ur*ct+mr*bt+xr*jt+_r*Wt,tt[1]=ur*dt+mr*St+xr*Lt+_r*rr,tt[2]=ur*gt+mr*Ct+xr*Bt+_r*cr,tt[3]=ur*xt+mr*Pt+xr*Ft+_r*yr,tt[4]=(ur=it[4])*ct+(mr=it[5])*bt+(xr=it[6])*jt+(_r=it[7])*Wt,tt[5]=ur*dt+mr*St+xr*Lt+_r*rr,tt[6]=ur*gt+mr*Ct+xr*Bt+_r*cr,tt[7]=ur*xt+mr*Pt+xr*Ft+_r*yr,tt[8]=(ur=it[8])*ct+(mr=it[9])*bt+(xr=it[10])*jt+(_r=it[11])*Wt,tt[9]=ur*dt+mr*St+xr*Lt+_r*rr,tt[10]=ur*gt+mr*Ct+xr*Bt+_r*cr,tt[11]=ur*xt+mr*Pt+xr*Ft+_r*yr,tt[12]=(ur=it[12])*ct+(mr=it[13])*bt+(xr=it[14])*jt+(_r=it[15])*Wt,tt[13]=ur*dt+mr*St+xr*Lt+_r*rr,tt[14]=ur*gt+mr*Ct+xr*Bt+_r*cr,tt[15]=ur*xt+mr*Pt+xr*Ft+_r*yr,tt}function r_(tt,et,it){var ct,dt,gt,xt,bt,St,Ct,Pt,jt,Lt,Bt,Ft,Wt=it[0],rr=it[1],cr=it[2];return et===tt?(tt[12]=et[0]*Wt+et[4]*rr+et[8]*cr+et[12],tt[13]=et[1]*Wt+et[5]*rr+et[9]*cr+et[13],tt[14]=et[2]*Wt+et[6]*rr+et[10]*cr+et[14],tt[15]=et[3]*Wt+et[7]*rr+et[11]*cr+et[15]):(dt=et[1],gt=et[2],xt=et[3],bt=et[4],St=et[5],Ct=et[6],Pt=et[7],jt=et[8],Lt=et[9],Bt=et[10],Ft=et[11],tt[0]=ct=et[0],tt[1]=dt,tt[2]=gt,tt[3]=xt,tt[4]=bt,tt[5]=St,tt[6]=Ct,tt[7]=Pt,tt[8]=jt,tt[9]=Lt,tt[10]=Bt,tt[11]=Ft,tt[12]=ct*Wt+bt*rr+jt*cr+et[12],tt[13]=dt*Wt+St*rr+Lt*cr+et[13],tt[14]=gt*Wt+Ct*rr+Bt*cr+et[14],tt[15]=xt*Wt+Pt*rr+Ft*cr+et[15]),tt}function Yp(tt,et,it){var ct=it[0],dt=it[1],gt=it[2];return tt[0]=et[0]*ct,tt[1]=et[1]*ct,tt[2]=et[2]*ct,tt[3]=et[3]*ct,tt[4]=et[4]*dt,tt[5]=et[5]*dt,tt[6]=et[6]*dt,tt[7]=et[7]*dt,tt[8]=et[8]*gt,tt[9]=et[9]*gt,tt[10]=et[10]*gt,tt[11]=et[11]*gt,tt[12]=et[12],tt[13]=et[13],tt[14]=et[14],tt[15]=et[15],tt}function Dv(tt,et,it){var ct=Math.sin(it),dt=Math.cos(it),gt=et[4],xt=et[5],bt=et[6],St=et[7],Ct=et[8],Pt=et[9],jt=et[10],Lt=et[11];return et!==tt&&(tt[0]=et[0],tt[1]=et[1],tt[2]=et[2],tt[3]=et[3],tt[12]=et[12],tt[13]=et[13],tt[14]=et[14],tt[15]=et[15]),tt[4]=gt*dt+Ct*ct,tt[5]=xt*dt+Pt*ct,tt[6]=bt*dt+jt*ct,tt[7]=St*dt+Lt*ct,tt[8]=Ct*dt-gt*ct,tt[9]=Pt*dt-xt*ct,tt[10]=jt*dt-bt*ct,tt[11]=Lt*dt-St*ct,tt}function Rx(tt,et,it){var ct=Math.sin(it),dt=Math.cos(it),gt=et[0],xt=et[1],bt=et[2],St=et[3],Ct=et[8],Pt=et[9],jt=et[10],Lt=et[11];return et!==tt&&(tt[4]=et[4],tt[5]=et[5],tt[6]=et[6],tt[7]=et[7],tt[12]=et[12],tt[13]=et[13],tt[14]=et[14],tt[15]=et[15]),tt[0]=gt*dt-Ct*ct,tt[1]=xt*dt-Pt*ct,tt[2]=bt*dt-jt*ct,tt[3]=St*dt-Lt*ct,tt[8]=gt*ct+Ct*dt,tt[9]=xt*ct+Pt*dt,tt[10]=bt*ct+jt*dt,tt[11]=St*ct+Lt*dt,tt}function X0(tt,et){return tt[0]=et[0],tt[1]=0,tt[2]=0,tt[3]=0,tt[4]=0,tt[5]=et[1],tt[6]=0,tt[7]=0,tt[8]=0,tt[9]=0,tt[10]=et[2],tt[11]=0,tt[12]=0,tt[13]=0,tt[14]=0,tt[15]=1,tt}function K0(tt,et,it){var ct,dt,gt,xt=it[0],bt=it[1],St=it[2],Ct=Math.hypot(xt,bt,St);return Ct<Cx?null:(xt*=Ct=1/Ct,bt*=Ct,St*=Ct,ct=Math.sin(et),dt=Math.cos(et),tt[0]=xt*xt*(gt=1-dt)+dt,tt[1]=bt*xt*gt+St*ct,tt[2]=St*xt*gt-bt*ct,tt[3]=0,tt[4]=xt*bt*gt-St*ct,tt[5]=bt*bt*gt+dt,tt[6]=St*bt*gt+xt*ct,tt[7]=0,tt[8]=xt*St*gt+bt*ct,tt[9]=bt*St*gt-xt*ct,tt[10]=St*St*gt+dt,tt[11]=0,tt[12]=0,tt[13]=0,tt[14]=0,tt[15]=1,tt)}Math.hypot||(Math.hypot=function(){for(var tt=0,et=arguments.length;et--;)tt+=arguments[et]*arguments[et];return Math.sqrt(tt)});var CE=Kp;function Lv(){var tt=new Sl(3);return Sl!=Float32Array&&(tt[0]=0,tt[1]=0,tt[2]=0),tt}function Y0(tt){var et=new Sl(3);return et[0]=tt[0],et[1]=tt[1],et[2]=tt[2],et}function n_(tt){return Math.hypot(tt[0],tt[1],tt[2])}function Bm(tt,et,it){var ct=new Sl(3);return ct[0]=tt,ct[1]=et,ct[2]=it,ct}function Fu(tt,et,it){return tt[0]=et[0]+it[0],tt[1]=et[1]+it[1],tt[2]=et[2]+it[2],tt}function $v(tt,et,it){return tt[0]=et[0]-it[0],tt[1]=et[1]-it[1],tt[2]=et[2]-it[2],tt}function Q0(tt,et,it){return tt[0]=et[0]*it[0],tt[1]=et[1]*it[1],tt[2]=et[2]*it[2],tt}function i_(tt,et,it){return tt[0]=Math.min(et[0],it[0]),tt[1]=Math.min(et[1],it[1]),tt[2]=Math.min(et[2],it[2]),tt}function o_(tt,et,it){return tt[0]=Math.max(et[0],it[0]),tt[1]=Math.max(et[1],it[1]),tt[2]=Math.max(et[2],it[2]),tt}function Ll(tt,et,it){return tt[0]=et[0]*it,tt[1]=et[1]*it,tt[2]=et[2]*it,tt}function s_(tt,et,it,ct){return tt[0]=et[0]+it[0]*ct,tt[1]=et[1]+it[1]*ct,tt[2]=et[2]+it[2]*ct,tt}function qs(tt,et){var it=et[0],ct=et[1],dt=et[2],gt=it*it+ct*ct+dt*dt;return gt>0&&(gt=1/Math.sqrt(gt)),tt[0]=et[0]*gt,tt[1]=et[1]*gt,tt[2]=et[2]*gt,tt}function Hl(tt,et){return tt[0]*et[0]+tt[1]*et[1]+tt[2]*et[2]}function Ov(tt,et,it){var ct=et[0],dt=et[1],gt=et[2],xt=it[0],bt=it[1],St=it[2];return tt[0]=dt*St-gt*bt,tt[1]=gt*xt-ct*St,tt[2]=ct*bt-dt*xt,tt}function ns(tt,et,it){var ct=et[0],dt=et[1],gt=et[2],xt=it[3]*ct+it[7]*dt+it[11]*gt+it[15];return tt[0]=(it[0]*ct+it[4]*dt+it[8]*gt+it[12])/(xt=xt||1),tt[1]=(it[1]*ct+it[5]*dt+it[9]*gt+it[13])/xt,tt[2]=(it[2]*ct+it[6]*dt+it[10]*gt+it[14])/xt,tt}function J0(tt,et,it){var ct=it[0],dt=it[1],gt=it[2],xt=et[0],bt=et[1],St=et[2],Ct=dt*St-gt*bt,Pt=gt*xt-ct*St,jt=ct*bt-dt*xt,Lt=dt*jt-gt*Pt,Bt=gt*Ct-ct*jt,Ft=ct*Pt-dt*Ct,Wt=2*it[3];return Pt*=Wt,jt*=Wt,Bt*=2,Ft*=2,tt[0]=xt+(Ct*=Wt)+(Lt*=2),tt[1]=bt+Pt+Bt,tt[2]=St+jt+Ft,tt}var a_,hu=$v,RE=Q0,AE=n_;function e1(tt,et,it){return tt[0]=et[0]*it,tt[1]=et[1]*it,tt[2]=et[2]*it,tt[3]=et[3]*it,tt}function t1(tt,et){var it=et[0],ct=et[1],dt=et[2],gt=et[3],xt=it*it+ct*ct+dt*dt+gt*gt;return xt>0&&(xt=1/Math.sqrt(xt)),tt[0]=it*xt,tt[1]=ct*xt,tt[2]=dt*xt,tt[3]=gt*xt,tt}function Qp(tt,et,it){var ct=et[0],dt=et[1],gt=et[2],xt=et[3];return tt[0]=it[0]*ct+it[4]*dt+it[8]*gt+it[12]*xt,tt[1]=it[1]*ct+it[5]*dt+it[9]*gt+it[13]*xt,tt[2]=it[2]*ct+it[6]*dt+it[10]*gt+it[14]*xt,tt[3]=it[3]*ct+it[7]*dt+it[11]*gt+it[15]*xt,tt}function r1(){var tt=new Sl(4);return Sl!=Float32Array&&(tt[0]=0,tt[1]=0,tt[2]=0),tt[3]=1,tt}function n1(tt){return tt[0]=0,tt[1]=0,tt[2]=0,tt[3]=1,tt}function i1(tt,et,it){it*=.5;var ct=et[0],dt=et[1],gt=et[2],xt=et[3],bt=Math.sin(it),St=Math.cos(it);return tt[0]=ct*St+xt*bt,tt[1]=dt*St+gt*bt,tt[2]=gt*St-dt*bt,tt[3]=xt*St-ct*bt,tt}function o1(tt,et,it){it*=.5;var ct=et[0],dt=et[1],gt=et[2],xt=et[3],bt=Math.sin(it),St=Math.cos(it);return tt[0]=ct*St-gt*bt,tt[1]=dt*St+xt*bt,tt[2]=gt*St+ct*bt,tt[3]=xt*St-dt*bt,tt}Lv(),a_=new Sl(4),Sl!=Float32Array&&(a_[0]=0,a_[1]=0,a_[2]=0,a_[3]=0);var kE=t1;Lv(),Bm(1,0,0),Bm(0,1,0),r1(),r1(),q0();const PE=Ir([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:s1}=PE,a1=Ir([{name:"a_pos_3",components:3,type:"Int16"}]);var l_=Ir([{name:"a_pos",type:"Int16",components:2}]);class zv{constructor(et,it){this.pos=et,this.dir=it}intersectsPlane(et,it,ct){const dt=Hl(it,this.dir);if(Math.abs(dt)<1e-6)return!1;const gt=((et[0]-this.pos[0])*it[0]+(et[1]-this.pos[1])*it[1]+(et[2]-this.pos[2])*it[2])/dt;return ct[0]=this.pos[0]+this.dir[0]*gt,ct[1]=this.pos[1]+this.dir[1]*gt,ct[2]=this.pos[2]+this.dir[2]*gt,!0}closestPointOnSphere(et,it,ct){if(function(Bt,Ft){var Wt=Bt[0],rr=Bt[1],cr=Bt[2],yr=Ft[0],ur=Ft[1],mr=Ft[2];return Math.abs(Wt-yr)<=Cx*Math.max(1,Math.abs(Wt),Math.abs(yr))&&Math.abs(rr-ur)<=Cx*Math.max(1,Math.abs(rr),Math.abs(ur))&&Math.abs(cr-mr)<=Cx*Math.max(1,Math.abs(cr),Math.abs(mr))}(this.pos,et)||it===0)return ct[0]=ct[1]=ct[2]=0,!1;const[dt,gt,xt]=this.dir,bt=this.pos[0]-et[0],St=this.pos[1]-et[1],Ct=this.pos[2]-et[2],Pt=dt*dt+gt*gt+xt*xt,jt=2*(bt*dt+St*gt+Ct*xt),Lt=jt*jt-4*Pt*(bt*bt+St*St+Ct*Ct-it*it);if(Lt<0){const Bt=Math.max(-jt/2,0),Ft=bt+dt*Bt,Wt=St+gt*Bt,rr=Ct+xt*Bt,cr=Math.hypot(Ft,Wt,rr);return ct[0]=Ft*it/cr,ct[1]=Wt*it/cr,ct[2]=rr*it/cr,!1}{const Bt=(-jt-Math.sqrt(Lt))/(2*Pt);if(Bt<0){const Ft=Math.hypot(bt,St,Ct);return ct[0]=bt*it/Ft,ct[1]=St*it/Ft,ct[2]=Ct*it/Ft,!1}return ct[0]=bt+dt*Bt,ct[1]=St+gt*Bt,ct[2]=Ct+xt*Bt,!0}}}class Nv{constructor(et,it,ct,dt,gt){this.TL=et,this.TR=it,this.BR=ct,this.BL=dt,this.horizon=gt}static fromInvProjectionMatrix(et,it,ct){const dt=[-1,1,1],gt=[1,1,1],xt=[1,-1,1],bt=[-1,-1,1],St=ns(dt,dt,et),Ct=ns(gt,gt,et),Pt=ns(xt,xt,et),jt=ns(bt,bt,et);return new Nv(St,Ct,Pt,jt,it/ct)}}class Bv{constructor(et,it){this.points=et,this.planes=it}static fromInvProjectionMatrix(et,it,ct,dt){const gt=Math.pow(2,ct),xt=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(St=>{const Ct=Qp([],St,et),Pt=1/Ct[3]/it*gt;return function(jt,Lt,Bt){return jt[0]=Lt[0]*Bt[0],jt[1]=Lt[1]*Bt[1],jt[2]=Lt[2]*Bt[2],jt[3]=Lt[3]*Bt[3],jt}(Ct,Ct,[Pt,Pt,dt?1/Ct[3]:Pt,Pt])}),bt=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(St=>{const Ct=qs([],Ov([],hu([],xt[St[0]],xt[St[1]]),hu([],xt[St[2]],xt[St[1]]))),Pt=-Hl(Ct,xt[St[1]]);return Ct.concat(Pt)});return new Bv(xt,bt)}}class Zs{static fromPoints(et){const it=[1/0,1/0,1/0],ct=[-1/0,-1/0,-1/0];for(const dt of et)i_(it,it,dt),o_(ct,ct,dt);return new Zs(it,ct)}static applyTransform(et,it){const ct=et.getCorners();for(let dt=0;dt<ct.length;++dt)ns(ct[dt],ct[dt],it);return Zs.fromPoints(ct)}constructor(et,it){this.min=et,this.max=it,this.center=Ll([],Fu([],this.min,this.max),.5)}quadrant(et){const it=[et%2==0,et<2],ct=Y0(this.min),dt=Y0(this.max);for(let gt=0;gt<it.length;gt++)ct[gt]=it[gt]?this.min[gt]:this.center[gt],dt[gt]=it[gt]?this.center[gt]:this.max[gt];return dt[2]=this.max[2],new Zs(ct,dt)}distanceX(et){return Math.max(Math.min(this.max[0],et[0]),this.min[0])-et[0]}distanceY(et){return Math.max(Math.min(this.max[1],et[1]),this.min[1])-et[1]}distanceZ(et){return Math.max(Math.min(this.max[2],et[2]),this.min[2])-et[2]}getCorners(){const et=this.min,it=this.max;return[[et[0],et[1],et[2]],[it[0],et[1],et[2]],[it[0],it[1],et[2]],[et[0],it[1],et[2]],[et[0],et[1],it[2]],[it[0],et[1],it[2]],[it[0],it[1],it[2]],[et[0],it[1],it[2]]]}intersects(et){const it=this.getCorners();let ct=!0;for(let dt=0;dt<et.planes.length;dt++){const gt=et.planes[dt];let xt=0;for(let bt=0;bt<it.length;bt++)xt+=Hl(gt,it[bt])+gt[3]>=0;if(xt===0)return 0;xt!==it.length&&(ct=!1)}if(ct)return 2;for(let dt=0;dt<3;dt++){let gt=Number.MAX_VALUE,xt=-Number.MAX_VALUE;for(let bt=0;bt<et.points.length;bt++){const St=et.points[bt][dt]-this.min[dt];gt=Math.min(gt,St),xt=Math.max(xt,St)}if(xt<0||gt>this.max[dt]-this.min[dt])return 0}return 1}}const Fv=5,l1=6,vu=qn/Math.PI/2,IE=16383,Jp=64,c_=[Jp,32,16],Wl=-vu,Zl=vu,ME=[new Zs([Wl,Wl,Wl],[Zl,Zl,Zl]),new Zs([Wl,Wl,Wl],[0,0,Zl]),new Zs([0,Wl,Wl],[Zl,0,Zl]),new Zs([Wl,0,Wl],[0,Zl,Zl]),new Zs([0,0,Wl],[Zl,Zl,Zl])];function Ax(tt){return tt*vu/d_}function c1(tt,et,it,ct=!0){const dt=Ll([],tt._camera.position,tt.worldSize),gt=[et,it,1,1];Qp(gt,gt,tt.pixelMatrixInverse),e1(gt,gt,1/gt[3]);const xt=qs([],hu([],gt,dt)),bt=tt.globeMatrix,St=[bt[12],bt[13],bt[14]],Ct=hu([],St,dt),Pt=n_(Ct),jt=qs([],Ct),Lt=tt.worldSize/(2*Math.PI),Bt=Hl(jt,xt),Ft=Math.asin(Lt/Pt);if(Ft<Math.acos(Bt)){if(!ct)return null;const bn=[],Wr=[];Ll(bn,xt,Pt/Bt),qs(Wr,hu(Wr,bn,Ct)),qs(xt,Fu(xt,Ct,Ll(xt,Wr,Math.tan(Ft)*Pt)))}const Wt=[];new zv(dt,xt).closestPointOnSphere(St,Lt,Wt);const rr=qs([],ws(bt,0)),cr=qs([],ws(bt,1)),yr=qs([],ws(bt,2)),ur=Hl(rr,Wt),mr=Hl(cr,Wt),xr=Hl(yr,Wt),_r=wr(Math.asin(-mr/Lt));let Vr=wr(Math.atan2(ur,xr));Vr=tt.center.lng+function(bn,Wr){const pn=(Wr-bn+180)%360-180;return pn<-180?pn+360:pn}(tt.center.lng,Vr);const Br=bu(Vr),Qr=Pr(Eu(_r),0,1);return new Gm(Br,Qr)}class jE{constructor(et,it,ct){this.a=hu([],et,ct),this.b=hu([],it,ct),this.center=ct;const dt=qs([],this.a),gt=qs([],this.b);this.angle=Math.acos(Hl(dt,gt))}}function Uv(tt,et){if(tt.angle===0)return null;let it;return it=tt.a[et]===0?1/tt.angle*.5*Math.PI:1/tt.angle*Math.atan(tt.b[et]/tt.a[et]/Math.sin(tt.angle)-1/Math.tan(tt.angle)),it<0||it>1?null:function(ct,dt,gt,xt){const bt=Math.sin(gt);return ct*(Math.sin((1-xt)*gt)/bt)+dt*(Math.sin(xt*gt)/bt)}(tt.a[et],tt.b[et],tt.angle,Pr(it,0,1))+tt.center[et]}function wu(tt){if(tt.z<=1)return ME[tt.z+2*tt.y+tt.x];const et=Vv(kx(tt));return Zs.fromPoints(et)}function _f(tt,et,it){return Ll(tt,tt,1-it),s_(tt,tt,et,it)}function u1(tt,et){const it=Vm(et.zoom);if(it===0)return wu(tt);const ct=kx(tt),dt=Vv(ct),gt=bu(ct.getWest())*et.worldSize,xt=bu(ct.getEast())*et.worldSize,bt=Eu(ct.getNorth())*et.worldSize,St=Eu(ct.getSouth())*et.worldSize,Ct=[gt,bt,0],Pt=[xt,bt,0],jt=[gt,St,0],Lt=[xt,St,0],Bt=jv([],et.globeMatrix);return ns(Ct,Ct,Bt),ns(Pt,Pt,Bt),ns(jt,jt,Bt),ns(Lt,Lt,Bt),dt[0]=_f(dt[0],jt,it),dt[1]=_f(dt[1],Lt,it),dt[2]=_f(dt[2],Pt,it),dt[3]=_f(dt[3],Ct,it),Zs.fromPoints(dt)}function h1(tt,et,it){for(const ct of tt)ns(ct,ct,et),Ll(ct,ct,it)}function DE(tt,et,it){const ct=et/tt.worldSize,dt=tt.globeMatrix;if(it.z<=1){const Br=wu(it).getCorners();return h1(Br,dt,ct),Zs.fromPoints(Br)}const gt=kx(it),xt=Vv(gt);h1(xt,dt,ct);const bt=Number.MAX_VALUE,St=[-bt,-bt,-bt],Ct=[bt,bt,bt];if(gt.contains(tt.center)){for(const bn of xt)i_(Ct,Ct,bn),o_(St,St,bn);St[2]=0;const Br=tt.point,Qr=[Br.x*ct,Br.y*ct,0];return i_(Ct,Ct,Qr),o_(St,St,Qr),new Zs(Ct,St)}const Pt=[dt[12]*ct,dt[13]*ct,dt[14]*ct],jt=gt.getCenter(),Lt=Pr(tt.center.lat,-Bs,Bs),Bt=Pr(jt.lat,-Bs,Bs),Ft=bu(tt.center.lng),Wt=Eu(Lt);let rr=Ft-bu(jt.lng);const cr=Wt-Eu(Bt);rr>.5?rr-=1:rr<-.5&&(rr+=1);let yr=0;Math.abs(rr)>Math.abs(cr)?yr=rr>=0?1:3:(yr=cr>=0?0:2,s_(Pt,Pt,[dt[4]*ct,dt[5]*ct,dt[6]*ct],-Math.sin(Jr(cr>=0?gt.getSouth():gt.getNorth()))*vu));const ur=xt[yr],mr=xt[(yr+1)%4],xr=new jE(ur,mr,Pt),_r=[Uv(xr,0)||ur[0],Uv(xr,1)||ur[1],Uv(xr,2)||ur[2]],Vr=Vm(tt.zoom);if(Vr>0){const Br=function({x:bn,y:Wr,z:pn},mn,_n,Cn,Kr){const In=1/(1<<pn);let zn=bn*In,Mn=zn+In,_i=Wr*In,Rn=_i+In,Wn=0;const eo=(zn+Mn)/2-Cn;return eo>.5?Wn=-1:eo<-.5&&(Wn=1),zn=((zn+Wn)*mn-(Cn*=mn))*_n+Cn,Mn=((Mn+Wn)*mn-Cn)*_n+Cn,_i=(_i*mn-(Kr*=mn))*_n+Kr,Rn=(Rn*mn-Kr)*_n+Kr,[[zn,Rn,0],[Mn,Rn,0],[Mn,_i,0],[zn,_i,0]]}(it,et,tt._pixelsPerMercatorPixel,Ft,Wt);for(let bn=0;bn<xt.length;bn++)_f(xt[bn],Br[bn],Vr);const Qr=Fu([],Br[yr],Br[(yr+1)%4]);Ll(Qr,Qr,.5),_f(_r,Qr,Vr)}for(const Br of xt)i_(Ct,Ct,Br),o_(St,St,Br);return Ct[2]=Math.min(ur[2],mr[2]),i_(Ct,Ct,_r),o_(St,St,_r),new Zs(Ct,St)}function kx({x:tt,y:et,z:it}){const ct=1/(1<<it),dt=new Do($l(tt*ct),Ns((et+1)*ct)),gt=new Do($l((tt+1)*ct),Ns(et*ct));return new dp(dt,gt)}function Vv(tt){const et=Jr(tt.getNorth()),it=Jr(tt.getSouth()),ct=Math.cos(et),dt=Math.cos(it),gt=Math.sin(et),xt=Math.sin(it),bt=tt.getWest(),St=tt.getEast();return[Fm(dt,xt,bt),Fm(dt,xt,St),Fm(ct,gt,St),Fm(ct,gt,bt)]}function Fm(tt,et,it,ct=vu){return it=Jr(it),[tt*Math.sin(it)*ct,-et*ct,tt*Math.cos(it)*ct]}function Um(tt,et,it){return Fm(Math.cos(Jr(tt)),Math.sin(Jr(tt)),et,it)}function u_(tt,et,it,ct){const dt=1<<it.z,gt=(tt/qn+it.x)/dt;return Um(Ns((et/qn+it.y)/dt),$l(gt),ct)}function Px({min:tt,max:et}){return IE/Math.max(et[0]-tt[0],et[1]-tt[1],et[2]-tt[2])}const d1=new Float64Array(16);function h_(tt){const et=Px(tt),it=X0(d1,[et,et,et]);return r_(it,it,((ct=[])[0]=-(dt=tt.min)[0],ct[1]=-dt[1],ct[2]=-dt[2],ct));var ct,dt}function Gv(tt){const et=(ct=tt.min,(it=d1)[0]=1,it[1]=0,it[2]=0,it[3]=0,it[4]=0,it[5]=1,it[6]=0,it[7]=0,it[8]=0,it[9]=0,it[10]=1,it[11]=0,it[12]=ct[0],it[13]=ct[1],it[14]=ct[2],it[15]=1,it);var it,ct;const dt=1/Px(tt);return Yp(et,et,[dt,dt,dt])}function p1(tt,et,it,ct,dt){const gt=function(St){const Ct=qn/(2*Math.PI);return St/(2*Math.PI)/Ct}(it),xt=[tt,et,-it/(2*Math.PI)],bt=uu(new Float64Array(16));return r_(bt,bt,xt),Yp(bt,bt,[gt,gt,gt]),Dv(bt,bt,Jr(-dt)),Rx(bt,bt,Jr(-ct)),bt}function Vm(tt){return Gr(Fv,l1,tt)}function f1(tt,et){const it=Um(et.lat,et.lng),ct=function(Ft){const Wt=Um(Ft._center.lat,Ft._center.lng);let rr=Ov([],Bm(0,1,0),Wt);const cr=K0([],-Ft.angle,Wt);rr=ns(rr,rr,cr),K0(cr,-Ft._pitch,rr);const yr=qs([],Wt);return Ll(yr,yr,Ax(Ft.cameraToCenterDistance/Ft.pixelsPerMeter)),ns(yr,yr,cr),Fu([],Wt,yr)}(tt);return xt=(dt=$v([],ct,it))[0],bt=dt[1],St=dt[2],Ct=(gt=it)[0],Pt=gt[1],jt=gt[2],Bt=(Lt=Math.sqrt(xt*xt+bt*bt+St*St)*Math.sqrt(Ct*Ct+Pt*Pt+jt*jt))&&Hl(dt,gt)/Lt,Math.acos(Math.min(Math.max(Bt,-1),1));var dt,gt,xt,bt,St,Ct,Pt,jt,Lt,Bt}function Hv(tt,et){return f1(tt,et)>Math.PI/2*1.01}const m1=Jr(85),LE=Math.cos(m1),$E=Math.sin(m1),d_=63710088e-1,g1=2*Math.PI*d_;class pp{constructor(et,it){if(isNaN(et)||isNaN(it))throw new Error(`Invalid LngLat object: (${et}, ${it})`);if(this.lng=+et,this.lat=+it,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new pp(Or(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(et){const it=Math.PI/180,ct=this.lat*it,dt=et.lat*it,gt=Math.sin(ct)*Math.sin(dt)+Math.cos(ct)*Math.cos(dt)*Math.cos((et.lng-this.lng)*it);return d_*Math.acos(Math.min(gt,1))}toBounds(et=0){const it=360*et/40075017,ct=it/Math.cos(Math.PI/180*this.lat);return new dp(new pp(this.lng-ct,this.lat-it),new pp(this.lng+ct,this.lat+it))}toEcef(et){const it=Ax(et);return Um(this.lat,this.lng,vu+it)}static convert(et){if(et instanceof pp)return et;if(Array.isArray(et)&&(et.length===2||et.length===3))return new pp(Number(et[0]),Number(et[1]));if(!Array.isArray(et)&&typeof et=="object"&&et!==null)return new pp(Number("lng"in et?et.lng:et.lon),Number(et.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var Do=pp;function Wv(tt){return g1*Math.cos(tt*Math.PI/180)}function bu(tt){return(180+tt)/360}function Eu(tt){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+tt*Math.PI/360)))/360}function du(tt,et){return tt/Wv(et)}function $l(tt){return 360*tt-180}function Ns(tt){return 360/Math.PI*Math.atan(Math.exp((180-360*tt)*Math.PI/180))-90}function y1(tt,et){return tt*Wv(Ns(et))}const Bs=85.051129;function _1(tt){return 1/Math.cos(tt*Math.PI/180)}class Gm{constructor(et,it,ct=0){this.x=+et,this.y=+it,this.z=+ct}static fromLngLat(et,it=0){const ct=Do.convert(et);return new Gm(bu(ct.lng),Eu(ct.lat),du(it,ct.lat))}toLngLat(){return new Do($l(this.x),Ns(this.y))}toAltitude(){return y1(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/g1*_1(Ns(this.y))}}function qv(tt,et,it,ct,dt,gt,xt,bt,St){const Ct=(et+ct)/2,Pt=(it+dt)/2,jt=new Mr(Ct,Pt);bt(jt),function(Lt,Bt,Ft,Wt,rr,cr){const yr=Ft-rr,ur=Wt-cr;return Math.abs((Wt-Bt)*yr-(Ft-Lt)*ur)/Math.hypot(yr,ur)}(jt.x,jt.y,gt.x,gt.y,xt.x,xt.y)>=St?(qv(tt,et,it,Ct,Pt,gt,jt,bt,St),qv(tt,Ct,Pt,ct,dt,jt,xt,bt,St)):tt.push(xt)}function x1(tt,et,it){let ct=tt[0],dt=ct.x,gt=ct.y;et(ct);const xt=[ct];for(let bt=1;bt<tt.length;bt++){const St=tt[bt],{x:Ct,y:Pt}=St;et(St),qv(xt,dt,gt,Ct,Pt,ct,St,et,it),dt=Ct,gt=Pt,ct=St}return xt}function Zv(tt,et,it,ct){if(ct(et,it)){const dt=et.add(it)._mult(.5);Zv(tt,et,dt,ct),Zv(tt,dt,it,ct)}else tt.push(it)}function OE(tt,et){let it=tt[0];const ct=[it];for(let dt=1;dt<tt.length;dt++){const gt=tt[dt];Zv(ct,it,gt,et),it=gt}return ct}const Xv=Math.pow(2,14)-1,v1=-Xv-1;function zE(tt,et){const it=Math.round(tt.x*et),ct=Math.round(tt.y*et);return tt.x=Pr(it,v1,Xv),tt.y=Pr(ct,v1,Xv),(it<tt.x||it>tt.x+1||ct<tt.y||ct>tt.y+1)&&Hn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),tt}function Uu(tt,et,it){const ct=tt.loadGeometry(),dt=tt.extent,gt=qn/dt;if(et&&it&&it.projection.isReprojectedInTileSpace){const xt=1<<et.z,{scale:bt,x:St,y:Ct,projection:Pt}=it,jt=Lt=>{const Bt=$l((et.x+Lt.x/dt)/xt),Ft=Ns((et.y+Lt.y/dt)/xt),Wt=Pt.project(Bt,Ft);Lt.x=(Wt.x*bt-St)*dt,Lt.y=(Wt.y*bt-Ct)*dt};for(let Lt=0;Lt<ct.length;Lt++)if(tt.type!==1)ct[Lt]=x1(ct[Lt],jt,1);else{const Bt=[];for(const Ft of ct[Lt])Ft.x<0||Ft.x>=dt||Ft.y<0||Ft.y>=dt||(jt(Ft),Bt.push(Ft));ct[Lt]=Bt}}for(const xt of ct)for(const bt of xt)zE(bt,gt);return ct}function em(tt,et){return{type:tt.type,id:tt.id,properties:tt.properties,geometry:et?Uu(tt):[]}}function Ix(tt,et,it,ct,dt){tt.emplaceBack(2*et+(ct+1)/2,2*it+(dt+1)/2)}function Mx(tt,et,it){tt.emplaceBack(et.x,et.y,et.z,it[0]*16384,it[1]*16384,it[2]*16384)}class Kv{constructor(et){this.zoom=et.zoom,this.overscaling=et.overscaling,this.layers=et.layers,this.layerIds=this.layers.map(it=>it.id),this.index=et.index,this.hasPattern=!1,this.projection=et.projection,this.layoutVertexArray=new wn,this.indexArray=new Vn,this.segments=new us,this.programConfigurations=new Xp(et.layers,et.zoom),this.stateDependentLayerIds=this.layers.filter(it=>it.isStateDependent()).map(it=>it.id)}populate(et,it,ct,dt){const gt=this.layers[0],xt=[];let bt=null;gt.type==="circle"&&(bt=gt.layout.get("circle-sort-key"));for(const{feature:Ct,id:Pt,index:jt,sourceLayerIndex:Lt}of et){const Bt=this.layers[0]._featureFilter.needGeometry,Ft=em(Ct,Bt);if(!this.layers[0]._featureFilter.filter(new It(this.zoom),Ft,ct))continue;const Wt=bt?bt.evaluate(Ft,{},ct):void 0,rr={id:Pt,properties:Ct.properties,type:Ct.type,sourceLayerIndex:Lt,index:jt,geometry:Bt?Ft.geometry:Uu(Ct,ct,dt),patterns:{},sortKey:Wt};xt.push(rr)}bt&&xt.sort((Ct,Pt)=>Ct.sortKey-Pt.sortKey);let St=null;dt.projection.name==="globe"&&(this.globeExtVertexArray=new En,St=dt.projection);for(const Ct of xt){const{geometry:Pt,index:jt,sourceLayerIndex:Lt}=Ct,Bt=et[jt].feature;this.addFeature(Ct,Pt,jt,it.availableImages,ct,St),it.featureIndex.insert(Bt,Pt,jt,Lt,this.index)}}update(et,it,ct,dt){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(et,it,this.stateDependentLayers,ct,dt)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(et){this.uploaded||(this.layoutVertexBuffer=et.createVertexBuffer(this.layoutVertexArray,SE.members),this.indexBuffer=et.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=et.createVertexBuffer(this.globeExtVertexArray,TE.members))),this.programConfigurations.upload(et),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(et,it,ct,dt,gt,xt){for(const bt of it)for(const St of bt){const Ct=St.x,Pt=St.y;if(Ct<0||Ct>=qn||Pt<0||Pt>=qn)continue;if(xt){const Bt=xt.projectTilePoint(Ct,Pt,gt),Ft=xt.upVector(gt,Ct,Pt),Wt=this.globeExtVertexArray;Mx(Wt,Bt,Ft),Mx(Wt,Bt,Ft),Mx(Wt,Bt,Ft),Mx(Wt,Bt,Ft)}const jt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,et.sortKey),Lt=jt.vertexLength;Ix(this.layoutVertexArray,Ct,Pt,-1,-1),Ix(this.layoutVertexArray,Ct,Pt,1,-1),Ix(this.layoutVertexArray,Ct,Pt,1,1),Ix(this.layoutVertexArray,Ct,Pt,-1,1),this.indexArray.emplaceBack(Lt,Lt+1,Lt+2),this.indexArray.emplaceBack(Lt,Lt+2,Lt+3),jt.vertexLength+=4,jt.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,et,ct,{},dt,gt)}}function w1(tt,et){for(let it=0;it<tt.length;it++)if(tm(et,tt[it]))return!0;for(let it=0;it<et.length;it++)if(tm(tt,et[it]))return!0;return!!Yv(tt,et)}function NE(tt,et,it){return!!tm(tt,et)||!!Qv(et,tt,it)}function b1(tt,et){if(tt.length===1)return S1(et,tt[0]);for(let it=0;it<et.length;it++){const ct=et[it];for(let dt=0;dt<ct.length;dt++)if(tm(tt,ct[dt]))return!0}for(let it=0;it<tt.length;it++)if(S1(et,tt[it]))return!0;for(let it=0;it<et.length;it++)if(Yv(tt,et[it]))return!0;return!1}function BE(tt,et,it){if(tt.length>1){if(Yv(tt,et))return!0;for(let ct=0;ct<et.length;ct++)if(Qv(et[ct],tt,it))return!0}for(let ct=0;ct<tt.length;ct++)if(Qv(tt[ct],et,it))return!0;return!1}function Yv(tt,et){if(tt.length===0||et.length===0)return!1;for(let it=0;it<tt.length-1;it++){const ct=tt[it],dt=tt[it+1];for(let gt=0;gt<et.length-1;gt++)if(FE(ct,dt,et[gt],et[gt+1]))return!0}return!1}function FE(tt,et,it,ct){return Jo(tt,it,ct)!==Jo(et,it,ct)&&Jo(tt,et,it)!==Jo(tt,et,ct)}function Qv(tt,et,it){const ct=it*it;if(et.length===1)return tt.distSqr(et[0])<ct;for(let dt=1;dt<et.length;dt++)if(E1(tt,et[dt-1],et[dt])<ct)return!0;return!1}function E1(tt,et,it){const ct=et.distSqr(it);if(ct===0)return tt.distSqr(et);const dt=((tt.x-et.x)*(it.x-et.x)+(tt.y-et.y)*(it.y-et.y))/ct;return tt.distSqr(dt<0?et:dt>1?it:it.sub(et)._mult(dt)._add(et))}function S1(tt,et){let it,ct,dt,gt=!1;for(let xt=0;xt<tt.length;xt++){it=tt[xt];for(let bt=0,St=it.length-1;bt<it.length;St=bt++)ct=it[bt],dt=it[St],ct.y>et.y!=dt.y>et.y&&et.x<(dt.x-ct.x)*(et.y-ct.y)/(dt.y-ct.y)+ct.x&&(gt=!gt)}return gt}function tm(tt,et){let it=!1;for(let ct=0,dt=tt.length-1;ct<tt.length;dt=ct++){const gt=tt[ct],xt=tt[dt];gt.y>et.y!=xt.y>et.y&&et.x<(xt.x-gt.x)*(et.y-gt.y)/(xt.y-gt.y)+gt.x&&(it=!it)}return it}function T1(tt,et,it,ct,dt){for(const xt of tt)if(et<=xt.x&&it<=xt.y&&ct>=xt.x&&dt>=xt.y)return!0;const gt=[new Mr(et,it),new Mr(et,dt),new Mr(ct,dt),new Mr(ct,it)];if(tt.length>2){for(const xt of gt)if(tm(tt,xt))return!0}for(let xt=0;xt<tt.length-1;xt++)if(UE(tt[xt],tt[xt+1],gt))return!0;return!1}function UE(tt,et,it){const ct=it[0],dt=it[2];if(tt.x<ct.x&&et.x<ct.x||tt.x>dt.x&&et.x>dt.x||tt.y<ct.y&&et.y<ct.y||tt.y>dt.y&&et.y>dt.y)return!1;const gt=Jo(tt,et,it[0]);return gt!==Jo(tt,et,it[1])||gt!==Jo(tt,et,it[2])||gt!==Jo(tt,et,it[3])}function Hm(tt,et,it){const ct=et.paint.get(tt).value;return ct.kind==="constant"?ct.value:it.programConfigurations.get(et.id).getMaxValue(tt)}function jx(tt){return Math.sqrt(tt[0]*tt[0]+tt[1]*tt[1])}function C1(tt,et,it,ct,dt){if(!et[0]&&!et[1])return tt;const gt=Mr.convert(et)._mult(dt);it==="viewport"&&gt._rotate(-ct);const xt=[];for(let bt=0;bt<tt.length;bt++)xt.push(tt[bt].sub(gt));return xt}function R1(tt,et,it,ct){const dt=Mr.convert(tt)._mult(ct);return et==="viewport"&&dt._rotate(-it),dt}$n(Kv,"CircleBucket",{omit:["layers"]});const VE=new dr({"circle-sort-key":new nr(Yr.layout_circle["circle-sort-key"])});var GE={paint:new dr({"circle-radius":new nr(Yr.paint_circle["circle-radius"]),"circle-color":new nr(Yr.paint_circle["circle-color"]),"circle-blur":new nr(Yr.paint_circle["circle-blur"]),"circle-opacity":new nr(Yr.paint_circle["circle-opacity"]),"circle-translate":new Gt(Yr.paint_circle["circle-translate"]),"circle-translate-anchor":new Gt(Yr.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Gt(Yr.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Gt(Yr.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new nr(Yr.paint_circle["circle-stroke-width"]),"circle-stroke-color":new nr(Yr.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new nr(Yr.paint_circle["circle-stroke-opacity"])}),layout:VE};function A1(tt,et,it,ct,dt,gt,xt,bt,St){if(gt&&tt.queryGeometry.isAboveHorizon)return!1;gt&&(St*=tt.pixelToTileUnitsFactor);const Ct=tt.tileID.canonical,Pt=it.projection.upVectorScale(Ct,it.center.lat,it.worldSize).metersToTile;for(const jt of et)for(const Lt of jt){const Bt=Lt.add(bt),Ft=dt&&it.elevation?it.elevation.exaggeration()*dt.getElevationAt(Bt.x,Bt.y,!0):0,Wt=it.projection.projectTilePoint(Bt.x,Bt.y,Ct);if(Ft>0){const ur=it.projection.upVector(Ct,Bt.x,Bt.y);Wt.x+=ur[0]*Pt*Ft,Wt.y+=ur[1]*Pt*Ft,Wt.z+=ur[2]*Pt*Ft}const rr=gt?Bt:HE(Wt.x,Wt.y,Wt.z,ct),cr=gt?tt.tilespaceRays.map(ur=>qE(ur,Ft)):tt.queryGeometry.screenGeometry,yr=Qp([],[Wt.x,Wt.y,Wt.z,1],ct);if(!xt&&gt?St*=yr[3]/it.cameraToCenterDistance:xt&&!gt&&(St*=it.cameraToCenterDistance/yr[3]),gt){const ur=Ns((Lt.y/qn+Ct.y)/(1<<Ct.z));St/=it.projection.pixelsPerMeter(ur,1)/du(1,ur)}if(NE(cr,rr,St))return!0}return!1}function HE(tt,et,it,ct){const dt=Qp([],[tt,et,it,1],ct);return new Mr(dt[0]/dt[3],dt[1]/dt[3])}const k1=Bm(0,0,0),WE=Bm(0,0,1);function qE(tt,et){const it=Lv();return k1[2]=et,tt.intersectsPlane(k1,WE,it),new Mr(it[0],it[1])}class P1 extends Kv{}function I1(tt,{width:et,height:it},ct,dt){if(dt){if(dt instanceof Uint8ClampedArray)dt=new Uint8Array(dt.buffer);else if(dt.length!==et*it*ct)throw new RangeError("mismatched image size")}else dt=new Uint8Array(et*it*ct);return tt.width=et,tt.height=it,tt.data=dt,tt}function M1(tt,et,it){const{width:ct,height:dt}=et;ct===tt.width&&dt===tt.height||(Jv(tt,et,{x:0,y:0},{x:0,y:0},{width:Math.min(tt.width,ct),height:Math.min(tt.height,dt)},it),tt.width=ct,tt.height=dt,tt.data=et.data)}function Jv(tt,et,it,ct,dt,gt){if(dt.width===0||dt.height===0)return et;if(dt.width>tt.width||dt.height>tt.height||it.x>tt.width-dt.width||it.y>tt.height-dt.height)throw new RangeError("out of range source coordinates for image copy");if(dt.width>et.width||dt.height>et.height||ct.x>et.width-dt.width||ct.y>et.height-dt.height)throw new RangeError("out of range destination coordinates for image copy");const xt=tt.data,bt=et.data;for(let St=0;St<dt.height;St++){const Ct=((it.y+St)*tt.width+it.x)*gt,Pt=((ct.y+St)*et.width+ct.x)*gt;for(let jt=0;jt<dt.width*gt;jt++)bt[Pt+jt]=xt[Ct+jt]}return et}$n(P1,"HeatmapBucket",{omit:["layers"]});class Vu{constructor(et,it){I1(this,et,1,it)}resize(et){M1(this,new Vu(et),1)}clone(){return new Vu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(et,it,ct,dt,gt){Jv(et,it,ct,dt,gt,1)}}class Tl{constructor(et,it){I1(this,et,4,it)}resize(et){M1(this,new Tl(et),4)}replace(et,it){it?this.data.set(et):this.data=et instanceof Uint8ClampedArray?new Uint8Array(et.buffer):et}clone(){return new Tl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(et,it,ct,dt,gt){Jv(et,it,ct,dt,gt,4)}}$n(Vu,"AlphaImage"),$n(Tl,"RGBAImage");var ZE={paint:new dr({"heatmap-radius":new nr(Yr.paint_heatmap["heatmap-radius"]),"heatmap-weight":new nr(Yr.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Gt(Yr.paint_heatmap["heatmap-intensity"]),"heatmap-color":new hr(Yr.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Gt(Yr.paint_heatmap["heatmap-opacity"])})};function e0(tt){const et={},it=tt.resolution||256,ct=tt.clips?tt.clips.length:1,dt=tt.image||new Tl({width:it,height:ct}),gt=(xt,bt,St)=>{et[tt.evaluationKey]=St;const Ct=tt.expression.evaluate(et);dt.data[xt+bt+0]=Math.floor(255*Ct.r/Ct.a),dt.data[xt+bt+1]=Math.floor(255*Ct.g/Ct.a),dt.data[xt+bt+2]=Math.floor(255*Ct.b/Ct.a),dt.data[xt+bt+3]=Math.floor(255*Ct.a)};if(tt.clips)for(let xt=0,bt=0;xt<ct;++xt,bt+=4*it)for(let St=0,Ct=0;St<it;St++,Ct+=4){const Pt=St/(it-1),{start:jt,end:Lt}=tt.clips[xt];gt(bt,Ct,jt*(1-Pt)+Lt*Pt)}else for(let xt=0,bt=0;xt<it;xt++,bt+=4)gt(0,bt,xt/(it-1));return dt}var XE={paint:new dr({"hillshade-illumination-direction":new Gt(Yr.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Gt(Yr.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Gt(Yr.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Gt(Yr.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Gt(Yr.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Gt(Yr.paint_hillshade["hillshade-accent-color"])})};const KE=Ir([{name:"a_pos",components:2,type:"Int16"}],4),{members:YE}=KE;var t0={exports:{}};function Dx(tt,et,it){it=it||2;var ct,dt,gt,xt,bt,St,Ct,Pt=et&&et.length,jt=Pt?et[0]*it:tt.length,Lt=j1(tt,0,jt,it,!0),Bt=[];if(!Lt||Lt.next===Lt.prev)return Bt;if(Pt&&(Lt=function(Wt,rr,cr,yr){var ur,mr,xr,_r=[];for(ur=0,mr=rr.length;ur<mr;ur++)(xr=j1(Wt,rr[ur]*yr,ur<mr-1?rr[ur+1]*yr:Wt.length,yr,!1))===xr.next&&(xr.steiner=!0),_r.push(o2(xr));for(_r.sort(r2),ur=0;ur<_r.length;ur++)cr=n2(_r[ur],cr);return cr}(tt,et,Lt,it)),tt.length>80*it){ct=gt=tt[0],dt=xt=tt[1];for(var Ft=it;Ft<jt;Ft+=it)(bt=tt[Ft])<ct&&(ct=bt),(St=tt[Ft+1])<dt&&(dt=St),bt>gt&&(gt=bt),St>xt&&(xt=St);Ct=(Ct=Math.max(gt-ct,xt-dt))!==0?32767/Ct:0}return p_(Lt,Bt,it,ct,dt,Ct,0),Bt}function j1(tt,et,it,ct,dt){var gt,xt;if(dt===i0(tt,et,it,ct)>0)for(gt=et;gt<it;gt+=ct)xt=$1(gt,tt[gt],tt[gt+1],xt);else for(gt=it-ct;gt>=et;gt-=ct)xt=$1(gt,tt[gt],tt[gt+1],xt);return xt&&Lx(xt,xt.next)&&(m_(xt),xt=xt.next),xt}function rm(tt,et){if(!tt)return tt;et||(et=tt);var it,ct=tt;do if(it=!1,ct.steiner||!Lx(ct,ct.next)&&hs(ct.prev,ct,ct.next)!==0)ct=ct.next;else{if(m_(ct),(ct=et=ct.prev)===ct.next)break;it=!0}while(it||ct!==et);return et}function p_(tt,et,it,ct,dt,gt,xt){if(tt){!xt&&gt&&function(Pt,jt,Lt,Bt){var Ft=Pt;do Ft.z===0&&(Ft.z=r0(Ft.x,Ft.y,jt,Lt,Bt)),Ft.prevZ=Ft.prev,Ft.nextZ=Ft.next,Ft=Ft.next;while(Ft!==Pt);Ft.prevZ.nextZ=null,Ft.prevZ=null,function(Wt){var rr,cr,yr,ur,mr,xr,_r,Vr,Br=1;do{for(cr=Wt,Wt=null,mr=null,xr=0;cr;){for(xr++,yr=cr,_r=0,rr=0;rr<Br&&(_r++,yr=yr.nextZ);rr++);for(Vr=Br;_r>0||Vr>0&&yr;)_r!==0&&(Vr===0||!yr||cr.z<=yr.z)?(ur=cr,cr=cr.nextZ,_r--):(ur=yr,yr=yr.nextZ,Vr--),mr?mr.nextZ=ur:Wt=ur,ur.prevZ=mr,mr=ur;cr=yr}mr.nextZ=null,Br*=2}while(xr>1)}(Ft)}(tt,ct,dt,gt);for(var bt,St,Ct=tt;tt.prev!==tt.next;)if(bt=tt.prev,St=tt.next,gt?JE(tt,ct,dt,gt):QE(tt))et.push(bt.i/it|0),et.push(tt.i/it|0),et.push(St.i/it|0),m_(tt),tt=St.next,Ct=St.next;else if((tt=St)===Ct){xt?xt===1?p_(tt=e2(rm(tt),et,it),et,it,ct,dt,gt,2):xt===2&&t2(tt,et,it,ct,dt,gt):p_(rm(tt),et,it,ct,dt,gt,1);break}}}function QE(tt){var et=tt.prev,it=tt,ct=tt.next;if(hs(et,it,ct)>=0)return!1;for(var dt=et.x,gt=it.x,xt=ct.x,bt=et.y,St=it.y,Ct=ct.y,Pt=dt<gt?dt<xt?dt:xt:gt<xt?gt:xt,jt=bt<St?bt<Ct?bt:Ct:St<Ct?St:Ct,Lt=dt>gt?dt>xt?dt:xt:gt>xt?gt:xt,Bt=bt>St?bt>Ct?bt:Ct:St>Ct?St:Ct,Ft=ct.next;Ft!==et;){if(Ft.x>=Pt&&Ft.x<=Lt&&Ft.y>=jt&&Ft.y<=Bt&&Wm(dt,bt,gt,St,xt,Ct,Ft.x,Ft.y)&&hs(Ft.prev,Ft,Ft.next)>=0)return!1;Ft=Ft.next}return!0}function JE(tt,et,it,ct){var dt=tt.prev,gt=tt,xt=tt.next;if(hs(dt,gt,xt)>=0)return!1;for(var bt=dt.x,St=gt.x,Ct=xt.x,Pt=dt.y,jt=gt.y,Lt=xt.y,Bt=bt<St?bt<Ct?bt:Ct:St<Ct?St:Ct,Ft=Pt<jt?Pt<Lt?Pt:Lt:jt<Lt?jt:Lt,Wt=bt>St?bt>Ct?bt:Ct:St>Ct?St:Ct,rr=Pt>jt?Pt>Lt?Pt:Lt:jt>Lt?jt:Lt,cr=r0(Bt,Ft,et,it,ct),yr=r0(Wt,rr,et,it,ct),ur=tt.prevZ,mr=tt.nextZ;ur&&ur.z>=cr&&mr&&mr.z<=yr;){if(ur.x>=Bt&&ur.x<=Wt&&ur.y>=Ft&&ur.y<=rr&&ur!==dt&&ur!==xt&&Wm(bt,Pt,St,jt,Ct,Lt,ur.x,ur.y)&&hs(ur.prev,ur,ur.next)>=0||(ur=ur.prevZ,mr.x>=Bt&&mr.x<=Wt&&mr.y>=Ft&&mr.y<=rr&&mr!==dt&&mr!==xt&&Wm(bt,Pt,St,jt,Ct,Lt,mr.x,mr.y)&&hs(mr.prev,mr,mr.next)>=0))return!1;mr=mr.nextZ}for(;ur&&ur.z>=cr;){if(ur.x>=Bt&&ur.x<=Wt&&ur.y>=Ft&&ur.y<=rr&&ur!==dt&&ur!==xt&&Wm(bt,Pt,St,jt,Ct,Lt,ur.x,ur.y)&&hs(ur.prev,ur,ur.next)>=0)return!1;ur=ur.prevZ}for(;mr&&mr.z<=yr;){if(mr.x>=Bt&&mr.x<=Wt&&mr.y>=Ft&&mr.y<=rr&&mr!==dt&&mr!==xt&&Wm(bt,Pt,St,jt,Ct,Lt,mr.x,mr.y)&&hs(mr.prev,mr,mr.next)>=0)return!1;mr=mr.nextZ}return!0}function e2(tt,et,it){var ct=tt;do{var dt=ct.prev,gt=ct.next.next;!Lx(dt,gt)&&D1(dt,ct,ct.next,gt)&&f_(dt,gt)&&f_(gt,dt)&&(et.push(dt.i/it|0),et.push(ct.i/it|0),et.push(gt.i/it|0),m_(ct),m_(ct.next),ct=tt=gt),ct=ct.next}while(ct!==tt);return rm(ct)}function t2(tt,et,it,ct,dt,gt){var xt=tt;do{for(var bt=xt.next.next;bt!==xt.prev;){if(xt.i!==bt.i&&s2(xt,bt)){var St=L1(xt,bt);return xt=rm(xt,xt.next),St=rm(St,St.next),p_(xt,et,it,ct,dt,gt,0),void p_(St,et,it,ct,dt,gt,0)}bt=bt.next}xt=xt.next}while(xt!==tt)}function r2(tt,et){return tt.x-et.x}function n2(tt,et){var it=function(dt,gt){var xt,bt=gt,St=dt.x,Ct=dt.y,Pt=-1/0;do{if(Ct<=bt.y&&Ct>=bt.next.y&&bt.next.y!==bt.y){var jt=bt.x+(Ct-bt.y)*(bt.next.x-bt.x)/(bt.next.y-bt.y);if(jt<=St&&jt>Pt&&(Pt=jt,xt=bt.x<bt.next.x?bt:bt.next,jt===St))return xt}bt=bt.next}while(bt!==gt);if(!xt)return null;var Lt,Bt=xt,Ft=xt.x,Wt=xt.y,rr=1/0;bt=xt;do St>=bt.x&&bt.x>=Ft&&St!==bt.x&&Wm(Ct<Wt?St:Pt,Ct,Ft,Wt,Ct<Wt?Pt:St,Ct,bt.x,bt.y)&&(Lt=Math.abs(Ct-bt.y)/(St-bt.x),f_(bt,dt)&&(Lt<rr||Lt===rr&&(bt.x>xt.x||bt.x===xt.x&&i2(xt,bt)))&&(xt=bt,rr=Lt)),bt=bt.next;while(bt!==Bt);return xt}(tt,et);if(!it)return et;var ct=L1(it,tt);return rm(ct,ct.next),rm(it,it.next)}function i2(tt,et){return hs(tt.prev,tt,et.prev)<0&&hs(et.next,tt,tt.next)<0}function r0(tt,et,it,ct,dt){return(tt=1431655765&((tt=858993459&((tt=252645135&((tt=16711935&((tt=(tt-it)*dt|0)|tt<<8))|tt<<4))|tt<<2))|tt<<1))|(et=1431655765&((et=858993459&((et=252645135&((et=16711935&((et=(et-ct)*dt|0)|et<<8))|et<<4))|et<<2))|et<<1))<<1}function o2(tt){var et=tt,it=tt;do(et.x<it.x||et.x===it.x&&et.y<it.y)&&(it=et),et=et.next;while(et!==tt);return it}function Wm(tt,et,it,ct,dt,gt,xt,bt){return(dt-xt)*(et-bt)>=(tt-xt)*(gt-bt)&&(tt-xt)*(ct-bt)>=(it-xt)*(et-bt)&&(it-xt)*(gt-bt)>=(dt-xt)*(ct-bt)}function s2(tt,et){return tt.next.i!==et.i&&tt.prev.i!==et.i&&!function(it,ct){var dt=it;do{if(dt.i!==it.i&&dt.next.i!==it.i&&dt.i!==ct.i&&dt.next.i!==ct.i&&D1(dt,dt.next,it,ct))return!0;dt=dt.next}while(dt!==it);return!1}(tt,et)&&(f_(tt,et)&&f_(et,tt)&&function(it,ct){var dt=it,gt=!1,xt=(it.x+ct.x)/2,bt=(it.y+ct.y)/2;do dt.y>bt!=dt.next.y>bt&&dt.next.y!==dt.y&&xt<(dt.next.x-dt.x)*(bt-dt.y)/(dt.next.y-dt.y)+dt.x&&(gt=!gt),dt=dt.next;while(dt!==it);return gt}(tt,et)&&(hs(tt.prev,tt,et.prev)||hs(tt,et.prev,et))||Lx(tt,et)&&hs(tt.prev,tt,tt.next)>0&&hs(et.prev,et,et.next)>0)}function hs(tt,et,it){return(et.y-tt.y)*(it.x-et.x)-(et.x-tt.x)*(it.y-et.y)}function Lx(tt,et){return tt.x===et.x&&tt.y===et.y}function D1(tt,et,it,ct){var dt=Ox(hs(tt,et,it)),gt=Ox(hs(tt,et,ct)),xt=Ox(hs(it,ct,tt)),bt=Ox(hs(it,ct,et));return dt!==gt&&xt!==bt||!(dt!==0||!$x(tt,it,et))||!(gt!==0||!$x(tt,ct,et))||!(xt!==0||!$x(it,tt,ct))||!(bt!==0||!$x(it,et,ct))}function $x(tt,et,it){return et.x<=Math.max(tt.x,it.x)&&et.x>=Math.min(tt.x,it.x)&&et.y<=Math.max(tt.y,it.y)&&et.y>=Math.min(tt.y,it.y)}function Ox(tt){return tt>0?1:tt<0?-1:0}function f_(tt,et){return hs(tt.prev,tt,tt.next)<0?hs(tt,et,tt.next)>=0&&hs(tt,tt.prev,et)>=0:hs(tt,et,tt.prev)<0||hs(tt,tt.next,et)<0}function L1(tt,et){var it=new n0(tt.i,tt.x,tt.y),ct=new n0(et.i,et.x,et.y),dt=tt.next,gt=et.prev;return tt.next=et,et.prev=tt,it.next=dt,dt.prev=it,ct.next=it,it.prev=ct,gt.next=ct,ct.prev=gt,ct}function $1(tt,et,it,ct){var dt=new n0(tt,et,it);return ct?(dt.next=ct.next,dt.prev=ct,ct.next.prev=dt,ct.next=dt):(dt.prev=dt,dt.next=dt),dt}function m_(tt){tt.next.prev=tt.prev,tt.prev.next=tt.next,tt.prevZ&&(tt.prevZ.nextZ=tt.nextZ),tt.nextZ&&(tt.nextZ.prevZ=tt.prevZ)}function n0(tt,et,it){this.i=tt,this.x=et,this.y=it,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function i0(tt,et,it,ct){for(var dt=0,gt=et,xt=it-ct;gt<it;gt+=ct)dt+=(tt[xt]-tt[gt])*(tt[gt+1]+tt[xt+1]),xt=gt;return dt}t0.exports=Dx,t0.exports.default=Dx,Dx.deviation=function(tt,et,it,ct){var dt=et&&et.length,gt=Math.abs(i0(tt,0,dt?et[0]*it:tt.length,it));if(dt)for(var xt=0,bt=et.length;xt<bt;xt++)gt-=Math.abs(i0(tt,et[xt]*it,xt<bt-1?et[xt+1]*it:tt.length,it));var St=0;for(xt=0;xt<ct.length;xt+=3){var Ct=ct[xt]*it,Pt=ct[xt+1]*it,jt=ct[xt+2]*it;St+=Math.abs((tt[Ct]-tt[jt])*(tt[Pt+1]-tt[Ct+1])-(tt[Ct]-tt[Pt])*(tt[jt+1]-tt[Ct+1]))}return gt===0&&St===0?0:Math.abs((St-gt)/gt)},Dx.flatten=function(tt){for(var et=tt[0][0].length,it={vertices:[],holes:[],dimensions:et},ct=0,dt=0;dt<tt.length;dt++){for(var gt=0;gt<tt[dt].length;gt++)for(var xt=0;xt<et;xt++)it.vertices.push(tt[dt][gt][xt]);dt>0&&it.holes.push(ct+=tt[dt-1].length)}return it};var o0=Jt(t0.exports);function a2(tt,et,it,ct,dt){O1(tt,et,it||0,ct||tt.length-1,dt||l2)}function O1(tt,et,it,ct,dt){for(;ct>it;){if(ct-it>600){var gt=ct-it+1,xt=et-it+1,bt=Math.log(gt),St=.5*Math.exp(2*bt/3),Ct=.5*Math.sqrt(bt*St*(gt-St)/gt)*(xt-gt/2<0?-1:1);O1(tt,et,Math.max(it,Math.floor(et-xt*St/gt+Ct)),Math.min(ct,Math.floor(et+(gt-xt)*St/gt+Ct)),dt)}var Pt=tt[et],jt=it,Lt=ct;for(g_(tt,it,et),dt(tt[ct],Pt)>0&&g_(tt,it,ct);jt<Lt;){for(g_(tt,jt,Lt),jt++,Lt--;dt(tt[jt],Pt)<0;)jt++;for(;dt(tt[Lt],Pt)>0;)Lt--}dt(tt[it],Pt)===0?g_(tt,it,Lt):g_(tt,++Lt,ct),Lt<=et&&(it=Lt+1),et<=Lt&&(ct=Lt-1)}}function g_(tt,et,it){var ct=tt[et];tt[et]=tt[it],tt[it]=ct}function l2(tt,et){return tt<et?-1:tt>et?1:0}function s0(tt,et){const it=tt.length;if(it<=1)return[tt];const ct=[];let dt,gt;for(let xt=0;xt<it;xt++){const bt=js(tt[xt]);bt!==0&&(tt[xt].area=Math.abs(bt),gt===void 0&&(gt=bt<0),gt===bt<0?(dt&&ct.push(dt),dt=[tt[xt]]):dt.push(tt[xt]))}if(dt&&ct.push(dt),et>1)for(let xt=0;xt<ct.length;xt++)ct[xt].length<=et||(a2(ct[xt],et,1,ct[xt].length-1,c2),ct[xt]=ct[xt].slice(0,et));return ct}function c2(tt,et){return et.area-tt.area}function a0(tt,et,it){const ct=it.patternDependencies;let dt=!1;for(const gt of et){const xt=gt.paint.get(`${tt}-pattern`);xt.isConstant()||(dt=!0);const bt=xt.constantOr(null);bt&&(dt=!0,ct[bt]=!0)}return dt}function l0(tt,et,it,ct,dt){const gt=dt.patternDependencies;for(const xt of et){const bt=xt.paint.get(`${tt}-pattern`).value;if(bt.kind!=="constant"){let St=bt.evaluate({zoom:ct},it,{},dt.availableImages);St=St&&St.name?St.name:St,gt[St]=!0,it.patterns[xt.id]=St}}return it}class zx{constructor(et){this.zoom=et.zoom,this.overscaling=et.overscaling,this.layers=et.layers,this.layerIds=this.layers.map(it=>it.id),this.index=et.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new wn,this.indexArray=new Vn,this.indexArray2=new Cs,this.programConfigurations=new Xp(et.layers,et.zoom),this.segments=new us,this.segments2=new us,this.stateDependentLayerIds=this.layers.filter(it=>it.isStateDependent()).map(it=>it.id),this.projection=et.projection}populate(et,it,ct,dt){this.hasPattern=a0("fill",this.layers,it);const gt=this.layers[0].layout.get("fill-sort-key"),xt=[];for(const{feature:bt,id:St,index:Ct,sourceLayerIndex:Pt}of et){const jt=this.layers[0]._featureFilter.needGeometry,Lt=em(bt,jt);if(!this.layers[0]._featureFilter.filter(new It(this.zoom),Lt,ct))continue;const Bt=gt?gt.evaluate(Lt,{},ct,it.availableImages):void 0,Ft={id:St,properties:bt.properties,type:bt.type,sourceLayerIndex:Pt,index:Ct,geometry:jt?Lt.geometry:Uu(bt,ct,dt),patterns:{},sortKey:Bt};xt.push(Ft)}gt&&xt.sort((bt,St)=>bt.sortKey-St.sortKey);for(const bt of xt){const{geometry:St,index:Ct,sourceLayerIndex:Pt}=bt;if(this.hasPattern){const jt=l0("fill",this.layers,bt,this.zoom,it);this.patternFeatures.push(jt)}else this.addFeature(bt,St,Ct,ct,{},it.availableImages);it.featureIndex.insert(et[Ct].feature,St,Ct,Pt,this.index)}}update(et,it,ct,dt){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(et,it,this.stateDependentLayers,ct,dt)}addFeatures(et,it,ct,dt,gt){for(const xt of this.patternFeatures)this.addFeature(xt,xt.geometry,xt.index,it,ct,dt)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(et){this.uploaded||(this.layoutVertexBuffer=et.createVertexBuffer(this.layoutVertexArray,YE),this.indexBuffer=et.createIndexBuffer(this.indexArray),this.indexBuffer2=et.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(et),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(et,it,ct,dt,gt,xt=[]){for(const bt of s0(it,500)){let St=0;for(const Ft of bt)St+=Ft.length;const Ct=this.segments.prepareSegment(St,this.layoutVertexArray,this.indexArray),Pt=Ct.vertexLength,jt=[],Lt=[];for(const Ft of bt){if(Ft.length===0)continue;Ft!==bt[0]&&Lt.push(jt.length/2);const Wt=this.segments2.prepareSegment(Ft.length,this.layoutVertexArray,this.indexArray2),rr=Wt.vertexLength;this.layoutVertexArray.emplaceBack(Ft[0].x,Ft[0].y),this.indexArray2.emplaceBack(rr+Ft.length-1,rr),jt.push(Ft[0].x),jt.push(Ft[0].y);for(let cr=1;cr<Ft.length;cr++)this.layoutVertexArray.emplaceBack(Ft[cr].x,Ft[cr].y),this.indexArray2.emplaceBack(rr+cr-1,rr+cr),jt.push(Ft[cr].x),jt.push(Ft[cr].y);Wt.vertexLength+=Ft.length,Wt.primitiveLength+=Ft.length}const Bt=o0(jt,Lt);for(let Ft=0;Ft<Bt.length;Ft+=3)this.indexArray.emplaceBack(Pt+Bt[Ft],Pt+Bt[Ft+1],Pt+Bt[Ft+2]);Ct.vertexLength+=St,Ct.primitiveLength+=Bt.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,et,ct,gt,xt,dt)}}$n(zx,"FillBucket",{omit:["layers","patternFeatures"]});const u2=new dr({"fill-sort-key":new nr(Yr.layout_fill["fill-sort-key"])});var h2={paint:new dr({"fill-antialias":new Gt(Yr.paint_fill["fill-antialias"]),"fill-opacity":new nr(Yr.paint_fill["fill-opacity"]),"fill-color":new nr(Yr.paint_fill["fill-color"]),"fill-outline-color":new nr(Yr.paint_fill["fill-outline-color"]),"fill-translate":new Gt(Yr.paint_fill["fill-translate"]),"fill-translate-anchor":new Gt(Yr.paint_fill["fill-translate-anchor"]),"fill-pattern":new nr(Yr.paint_fill["fill-pattern"])}),layout:u2};const d2=Ir([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),p2=Ir([{name:"a_centroid_pos",components:2,type:"Uint16"}]),f2=Ir([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:m2}=d2;var Nx={},g2=Rr,z1=qm;function qm(tt,et,it,ct,dt){this.properties={},this.extent=it,this.type=0,this._pbf=tt,this._geometry=-1,this._keys=ct,this._values=dt,tt.readFields(y2,this,et)}function y2(tt,et,it){tt==1?et.id=it.readVarint():tt==2?function(ct,dt){for(var gt=ct.readVarint()+ct.pos;ct.pos<gt;){var xt=dt._keys[ct.readVarint()],bt=dt._values[ct.readVarint()];dt.properties[xt]=bt}}(it,et):tt==3?et.type=it.readVarint():tt==4&&(et._geometry=it.pos)}function _2(tt){for(var et,it,ct=0,dt=0,gt=tt.length,xt=gt-1;dt<gt;xt=dt++)ct+=((it=tt[xt]).x-(et=tt[dt]).x)*(et.y+it.y);return ct}qm.types=["Unknown","Point","LineString","Polygon"],qm.prototype.loadGeometry=function(){var tt=this._pbf;tt.pos=this._geometry;for(var et,it=tt.readVarint()+tt.pos,ct=1,dt=0,gt=0,xt=0,bt=[];tt.pos<it;){if(dt<=0){var St=tt.readVarint();ct=7&St,dt=St>>3}if(dt--,ct===1||ct===2)gt+=tt.readSVarint(),xt+=tt.readSVarint(),ct===1&&(et&&bt.push(et),et=[]),et.push(new g2(gt,xt));else{if(ct!==7)throw new Error("unknown command "+ct);et&&et.push(et[0].clone())}}return et&&bt.push(et),bt},qm.prototype.bbox=function(){var tt=this._pbf;tt.pos=this._geometry;for(var et=tt.readVarint()+tt.pos,it=1,ct=0,dt=0,gt=0,xt=1/0,bt=-1/0,St=1/0,Ct=-1/0;tt.pos<et;){if(ct<=0){var Pt=tt.readVarint();it=7&Pt,ct=Pt>>3}if(ct--,it===1||it===2)(dt+=tt.readSVarint())<xt&&(xt=dt),dt>bt&&(bt=dt),(gt+=tt.readSVarint())<St&&(St=gt),gt>Ct&&(Ct=gt);else if(it!==7)throw new Error("unknown command "+it)}return[xt,St,bt,Ct]},qm.prototype.toGeoJSON=function(tt,et,it){var ct,dt,gt=this.extent*Math.pow(2,it),xt=this.extent*tt,bt=this.extent*et,St=this.loadGeometry(),Ct=qm.types[this.type];function Pt(Bt){for(var Ft=0;Ft<Bt.length;Ft++){var Wt=Bt[Ft];Bt[Ft]=[360*(Wt.x+xt)/gt-180,360/Math.PI*Math.atan(Math.exp((180-360*(Wt.y+bt)/gt)*Math.PI/180))-90]}}switch(this.type){case 1:var jt=[];for(ct=0;ct<St.length;ct++)jt[ct]=St[ct][0];Pt(St=jt);break;case 2:for(ct=0;ct<St.length;ct++)Pt(St[ct]);break;case 3:for(St=function(Bt){var Ft=Bt.length;if(Ft<=1)return[Bt];for(var Wt,rr,cr=[],yr=0;yr<Ft;yr++){var ur=_2(Bt[yr]);ur!==0&&(rr===void 0&&(rr=ur<0),rr===ur<0?(Wt&&cr.push(Wt),Wt=[Bt[yr]]):Wt.push(Bt[yr]))}return Wt&&cr.push(Wt),cr}(St),ct=0;ct<St.length;ct++)for(dt=0;dt<St[ct].length;dt++)Pt(St[ct][dt])}St.length===1?St=St[0]:Ct="Multi"+Ct;var Lt={type:"Feature",geometry:{type:Ct,coordinates:St},properties:this.properties};return"id"in this&&(Lt.id=this.id),Lt};var x2=z1,N1=B1;function B1(tt,et){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=tt,this._keys=[],this._values=[],this._features=[],tt.readFields(v2,this,et),this.length=this._features.length}function v2(tt,et,it){tt===15?et.version=it.readVarint():tt===1?et.name=it.readString():tt===5?et.extent=it.readVarint():tt===2?et._features.push(it.pos):tt===3?et._keys.push(it.readString()):tt===4&&et._values.push(function(ct){for(var dt=null,gt=ct.readVarint()+ct.pos;ct.pos<gt;){var xt=ct.readVarint()>>3;dt=xt===1?ct.readString():xt===2?ct.readFloat():xt===3?ct.readDouble():xt===4?ct.readVarint64():xt===5?ct.readVarint():xt===6?ct.readSVarint():xt===7?ct.readBoolean():null}return dt}(it))}B1.prototype.feature=function(tt){if(tt<0||tt>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[tt];var et=this._pbf.readVarint()+this._pbf.pos;return new x2(this._pbf,et,this.extent,this._keys,this._values)};var w2=N1;function b2(tt,et,it){if(tt===3){var ct=new w2(it,it.readVarint()+it.pos);ct.length&&(et[ct.name]=ct)}}var c0=Nx.VectorTile=function(tt,et){this.layers=tt.readFields(b2,{},et)},Bx=Nx.VectorTileFeature=z1;function Fx(tt,et,it,ct){const dt=[],gt=ct===0?(xt,bt,St,Ct,Pt,jt)=>{xt.push(new Mr(jt,St+(jt-bt)/(Ct-bt)*(Pt-St)))}:(xt,bt,St,Ct,Pt,jt)=>{xt.push(new Mr(bt+(jt-St)/(Pt-St)*(Ct-bt),jt))};for(const xt of tt){const bt=[];for(const St of xt){if(St.length<=2)continue;const Ct=[];for(let Lt=0;Lt<St.length-1;Lt++){const Bt=St[Lt].x,Ft=St[Lt].y,Wt=St[Lt+1].x,rr=St[Lt+1].y,cr=ct===0?Bt:Ft,yr=ct===0?Wt:rr;cr<et?yr>et&&gt(Ct,Bt,Ft,Wt,rr,et):cr>it?yr<it&&gt(Ct,Bt,Ft,Wt,rr,it):Ct.push(St[Lt]),yr<et&&cr>=et&&gt(Ct,Bt,Ft,Wt,rr,et),yr>it&&cr<=it&&gt(Ct,Bt,Ft,Wt,rr,it)}let Pt=St[St.length-1];const jt=ct===0?Pt.x:Pt.y;jt>=et&&jt<=it&&Ct.push(Pt),Ct.length&&(Pt=Ct[Ct.length-1],Ct[0].x===Pt.x&&Ct[0].y===Pt.y||Ct.push(Ct[0]),bt.push(Ct))}bt.length&&dt.push(bt)}return dt}Nx.VectorTileLayer=N1;const E2=Bx.types,S2=Math.pow(2,13);function y_(tt,et,it,ct,dt,gt,xt,bt){tt.emplaceBack((et<<1)+xt,(it<<1)+gt,(Math.floor(ct*S2)<<1)+dt,Math.round(bt))}function __(tt,et,it){tt.emplaceBack(et.x,et.y,et.z,it[0]*16384,it[1]*16384,it[2]*16384)}class F1{constructor(){this.acc=new Mr(0,0),this.polyCount=[]}startRing(et){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new Mr(et.x,et.y),this.max=new Mr(et.x,et.y))}append(et,it){this.currentPolyCount.edges++,this.acc._add(et);const ct=this.min,dt=this.max;et.x<ct.x?ct.x=et.x:et.x>dt.x&&(dt.x=et.x),et.y<ct.y?ct.y=et.y:et.y>dt.y&&(dt.y=et.y),((et.x===0||et.x===qn)&&et.x===it.x)!=((et.y===0||et.y===qn)&&et.y===it.y)&&this.processBorderOverlap(et,it),it.x<0!=et.x<0&&this.addBorderIntersection(0,yo(it.y,et.y,(0-it.x)/(et.x-it.x))),it.x>qn!=et.x>qn&&this.addBorderIntersection(1,yo(it.y,et.y,(qn-it.x)/(et.x-it.x))),it.y<0!=et.y<0&&this.addBorderIntersection(2,yo(it.x,et.x,(0-it.y)/(et.y-it.y))),it.y>qn!=et.y>qn&&this.addBorderIntersection(3,yo(it.x,et.x,(qn-it.y)/(et.y-it.y)))}addBorderIntersection(et,it){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const ct=this.borders[et];it<ct[0]&&(ct[0]=it),it>ct[1]&&(ct[1]=it)}processBorderOverlap(et,it){if(et.x===it.x){if(et.y===it.y)return;const ct=et.x===0?0:1;this.addBorderIntersection(ct,it.y),this.addBorderIntersection(ct,et.y)}else{const ct=et.y===0?2:3;this.addBorderIntersection(ct,it.x),this.addBorderIntersection(ct,et.x)}}centroid(){const et=this.polyCount.reduce((it,ct)=>it+ct.edges,0);return et!==0?this.acc.div(et)._round():new Mr(0,0)}span(){return new Mr(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((et,it)=>et+ +(it[0]!==Number.MAX_VALUE),0)}}class x_{constructor(et){this.zoom=et.zoom,this.canonical=et.canonical,this.overscaling=et.overscaling,this.layers=et.layers,this.layerIds=this.layers.map(it=>it.id),this.index=et.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=et.projection,this.layoutVertexArray=new hn,this.centroidVertexArray=new au,this.indexArray=new Vn,this.programConfigurations=new Xp(et.layers,et.zoom),this.segments=new us,this.stateDependentLayerIds=this.layers.filter(it=>it.isStateDependent()).map(it=>it.id),this.enableTerrain=et.enableTerrain}populate(et,it,ct,dt){this.features=[],this.hasPattern=a0("fill-extrusion",this.layers,it),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(gt){const xt=Math.exp(Math.PI*(1-gt.y/(1<<gt.z)*2));return 80150034*xt/(xt*xt+1)/qn/(1<<gt.z)}(ct),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:gt,id:xt,index:bt,sourceLayerIndex:St}of et){const Ct=this.layers[0]._featureFilter.needGeometry,Pt=em(gt,Ct);if(!this.layers[0]._featureFilter.filter(new It(this.zoom),Pt,ct))continue;const jt={id:xt,sourceLayerIndex:St,index:bt,geometry:Ct?Pt.geometry:Uu(gt,ct,dt),properties:gt.properties,type:gt.type,patterns:{}},Lt=this.layoutVertexArray.length;this.hasPattern?this.features.push(l0("fill-extrusion",this.layers,jt,this.zoom,it)):this.addFeature(jt,jt.geometry,bt,ct,{},it.availableImages,dt),it.featureIndex.insert(gt,jt.geometry,bt,St,this.index,Lt)}this.sortBorders()}addFeatures(et,it,ct,dt,gt){for(const xt of this.features){const{geometry:bt}=xt;this.addFeature(xt,bt,xt.index,it,ct,dt,gt)}this.sortBorders()}update(et,it,ct,dt){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(et,it,this.stateDependentLayers,ct,dt)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(et){this.uploaded||(this.layoutVertexBuffer=et.createVertexBuffer(this.layoutVertexArray,m2),this.indexBuffer=et.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=et.createVertexBuffer(this.layoutVertexExtArray,f2.members,!0))),this.programConfigurations.upload(et),this.uploaded=!0}uploadCentroid(et){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=et.createVertexBuffer(this.centroidVertexArray,p2.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(et,it,ct,dt,gt,xt,bt){const St=[new Mr(0,0),new Mr(qn,qn)],Ct=bt.projection,Pt=Ct.name==="globe",jt=this.enableTerrain&&!Pt?new F1:null,Lt=E2[et.type]==="Polygon";Pt&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new En);const Bt=s0(it,500);for(let cr=Bt.length-1;cr>=0;cr--){const yr=Bt[cr];(yr.length===0||(Ft=yr[0]).every(ur=>ur.x<=0)||Ft.every(ur=>ur.x>=qn)||Ft.every(ur=>ur.y<=0)||Ft.every(ur=>ur.y>=qn))&&Bt.splice(cr,1)}var Ft;let Wt;if(Pt)Wt=Z1(Bt,St,dt);else{Wt=[];for(const cr of Bt)Wt.push({polygon:cr,bounds:St})}const rr=Lt?this.edgeRadius:0;for(const{polygon:cr,bounds:yr}of Wt){let ur=0,mr=0;for(const _r of cr)Lt&&!_r[0].equals(_r[_r.length-1])&&_r.push(_r[0]),mr+=Lt?_r.length-1:_r.length;const xr=this.segments.prepareSegment((Lt?5:4)*mr,this.layoutVertexArray,this.indexArray);if(Lt){const _r=[],Vr=[];ur=xr.vertexLength;for(const Qr of cr){let bn,Wr;Qr.length&&Qr!==cr[0]&&Vr.push(_r.length/2),bn=Qr[1].sub(Qr[0])._perp()._unit();for(let pn=1;pn<Qr.length;pn++){const mn=Qr[pn],_n=Qr[pn===Qr.length-1?1:pn+1];let{x:Cn,y:Kr}=mn;if(rr){Wr=_n.sub(mn)._perp()._unit();const In=bn.add(Wr)._unit(),zn=rr*Math.min(4,1/(bn.x*In.x+bn.y*In.y));Cn+=zn*In.x,Kr+=zn*In.y,bn=Wr}y_(this.layoutVertexArray,Cn,Kr,0,0,1,1,0),xr.vertexLength++,_r.push(mn.x,mn.y),Pt&&__(this.layoutVertexExtArray,Ct.projectTilePoint(Cn,Kr,dt),Ct.upVector(dt,Cn,Kr))}}const Br=o0(_r,Vr);for(let Qr=0;Qr<Br.length;Qr+=3)this.indexArray.emplaceBack(ur+Br[Qr],ur+Br[Qr+2],ur+Br[Qr+1]),xr.primitiveLength++}for(const _r of cr){jt&&_r.length&&jt.startRing(_r[0]);let Vr,Br,Qr,bn=_r.length>4&&H1(_r[_r.length-2],_r[0],_r[1]),Wr=rr?T2(_r[_r.length-2],_r[0],_r[1],rr):0;Br=_r[1].sub(_r[0])._perp()._unit();let pn=!0;for(let mn=1,_n=0;mn<_r.length;mn++){let Cn=_r[mn-1],Kr=_r[mn];const In=_r[mn===_r.length-1?1:mn+1];if(jt&&Lt&&jt.currentPolyCount.top++,G1(Kr,Cn,yr)){rr&&(Br=In.sub(Kr)._perp()._unit(),pn=!pn);continue}jt&&jt.append(Kr,Cn);const zn=Kr.sub(Cn)._perp(),Mn=zn.x/(Math.abs(zn.x)+Math.abs(zn.y)),_i=zn.y>0?1:0,Rn=Cn.dist(Kr);if(_n+Rn>32768&&(_n=0),rr){Qr=In.sub(Kr)._perp()._unit();let to=V1(Cn,Kr,In,U1(Br,Qr),rr);isNaN(to)&&(to=0);const Xn=Kr.sub(Cn)._unit();Cn=Cn.add(Xn.mult(Wr))._round(),Kr=Kr.add(Xn.mult(-to))._round(),Wr=to,Br=Qr}const Wn=xr.vertexLength,eo=_r.length>4&&H1(Cn,Kr,In);let xo=W1(_n,bn,pn);if(y_(this.layoutVertexArray,Cn.x,Cn.y,Mn,_i,0,0,xo),y_(this.layoutVertexArray,Cn.x,Cn.y,Mn,_i,0,1,xo),_n+=Rn,xo=W1(_n,eo,!pn),bn=eo,y_(this.layoutVertexArray,Kr.x,Kr.y,Mn,_i,0,0,xo),y_(this.layoutVertexArray,Kr.x,Kr.y,Mn,_i,0,1,xo),xr.vertexLength+=4,this.indexArray.emplaceBack(Wn+0,Wn+1,Wn+2),this.indexArray.emplaceBack(Wn+1,Wn+3,Wn+2),xr.primitiveLength+=2,rr){const to=ur+(mn===1?_r.length-2:mn-2),Xn=mn===1?ur:to+1;if(this.indexArray.emplaceBack(Wn+1,to,Wn+3),this.indexArray.emplaceBack(to,Xn,Wn+3),xr.primitiveLength+=2,Vr===void 0&&(Vr=Wn),!G1(In,_r[mn],yr)){const Uo=mn===_r.length-1?Vr:xr.vertexLength;this.indexArray.emplaceBack(Wn+2,Wn+3,Uo),this.indexArray.emplaceBack(Wn+3,Uo+1,Uo),this.indexArray.emplaceBack(Wn+3,Xn,Uo+1),xr.primitiveLength+=3}pn=!pn}if(Pt){const to=this.layoutVertexExtArray,Xn=Ct.projectTilePoint(Cn.x,Cn.y,dt),Uo=Ct.projectTilePoint(Kr.x,Kr.y,dt),io=Ct.upVector(dt,Cn.x,Cn.y),oo=Ct.upVector(dt,Kr.x,Kr.y);__(to,Xn,io),__(to,Xn,io),__(to,Uo,oo),__(to,Uo,oo)}}Lt&&(ur+=_r.length-1)}}if(jt&&jt.polyCount.length>0){if(jt.borders){jt.vertexArrayOffset=this.centroidVertexArray.length;const cr=jt.borders,yr=this.featuresOnBorder.push(jt)-1;for(let ur=0;ur<4;ur++)cr[ur][0]!==Number.MAX_VALUE&&this.borders[ur].push(yr)}this.encodeCentroid(jt.borders?void 0:jt.centroid(),jt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,et,ct,gt,xt,dt)}sortBorders(){for(let et=0;et<4;et++)this.borders[et].sort((it,ct)=>this.featuresOnBorder[it].borders[et][0]-this.featuresOnBorder[ct].borders[et][0])}encodeCentroid(et,it,ct=!0){let dt,gt;if(et)if(et.y!==0){const bt=it.span()._mult(this.tileToMeter);dt=(Math.max(et.x,1)<<3)+Math.min(7,Math.round(bt.x/10)),gt=(Math.max(et.y,1)<<3)+Math.min(7,Math.round(bt.y/10))}else dt=Math.ceil(7*(et.x+450)),gt=0;else dt=0,gt=+ct;let xt=ct?this.centroidVertexArray.length:it.vertexArrayOffset;for(const bt of it.polyCount){ct&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*bt.edges+bt.top);for(let St=0;St<bt.top;St++)this.centroidVertexArray.emplace(xt++,dt,gt);for(let St=0;St<2*bt.edges;St++)this.centroidVertexArray.emplace(xt++,0,gt),this.centroidVertexArray.emplace(xt++,dt,gt)}}}function U1(tt,et){const it=tt.add(et)._unit();return tt.x*it.x+tt.y*it.y}function T2(tt,et,it,ct){const dt=et.sub(tt)._perp()._unit(),gt=it.sub(et)._perp()._unit();return V1(tt,et,it,U1(dt,gt),ct)}function V1(tt,et,it,ct,dt){const gt=Math.sqrt(1-ct*ct);return Math.min(tt.dist(et)/3,et.dist(it)/3,dt*gt/ct)}function G1(tt,et,it){return tt.x<it[0].x&&et.x<it[0].x||tt.x>it[1].x&&et.x>it[1].x||tt.y<it[0].y&&et.y<it[0].y||tt.y>it[1].y&&et.y>it[1].y}function H1(tt,et,it){if(tt.x<0||tt.x>=qn||et.x<0||et.x>=qn||it.x<0||it.x>=qn)return!1;const ct=it.sub(et),dt=ct.perp(),gt=tt.sub(et);return(ct.x*gt.x+ct.y*gt.y)/Math.sqrt((ct.x*ct.x+ct.y*ct.y)*(gt.x*gt.x+gt.y*gt.y))>-.866&&dt.x*gt.x+dt.y*gt.y<0}function W1(tt,et,it){const ct=et?2|tt:-3&tt;return it?1|ct:-2&ct}function q1(){const tt=Math.PI/32,et=Math.tan(tt),it=d_;return it*Math.sqrt(1+2*et*et)-it}function Z1(tt,et,it){const ct=1<<it.z,dt=$l(it.x/ct),gt=$l((it.x+1)/ct),xt=Ns(it.y/ct),bt=Ns((it.y+1)/ct);return function(St,Ct,Pt,jt,Lt=0,Bt){const Ft=[];if(!St.length||!Pt||!jt)return Ft;const Wt=(_r,Vr)=>{for(const Br of _r)Ft.push({polygon:Br,bounds:Vr})},rr=Math.ceil(Math.log2(Pt)),cr=Math.ceil(Math.log2(jt)),yr=rr-cr,ur=[];for(let _r=0;_r<Math.abs(yr);_r++)ur.push(yr>0?0:1);for(let _r=0;_r<Math.min(rr,cr);_r++)ur.push(0),ur.push(1);let mr=St;if(mr=Fx(mr,Ct[0].y-Lt,Ct[1].y+Lt,1),mr=Fx(mr,Ct[0].x-Lt,Ct[1].x+Lt,0),!mr.length)return Ft;const xr=[];for(ur.length?xr.push({polygons:mr,bounds:Ct,depth:0}):Wt(mr,Ct);xr.length;){const _r=xr.pop(),Vr=_r.depth,Br=ur[Vr],Qr=_r.bounds[0],bn=_r.bounds[1],Wr=Br===0?Qr.x:Qr.y,pn=Br===0?bn.x:bn.y,mn=Bt?Bt(Br,Wr,pn):.5*(Wr+pn),_n=Fx(_r.polygons,Wr-Lt,mn+Lt,Br),Cn=Fx(_r.polygons,mn-Lt,pn+Lt,Br);if(_n.length){const Kr=[Qr,new Mr(Br===0?mn:bn.x,Br===1?mn:bn.y)];ur.length>Vr+1?xr.push({polygons:_n,bounds:Kr,depth:Vr+1}):Wt(_n,Kr)}if(Cn.length){const Kr=[new Mr(Br===0?mn:Qr.x,Br===1?mn:Qr.y),bn];ur.length>Vr+1?xr.push({polygons:Cn,bounds:Kr,depth:Vr+1}):Wt(Cn,Kr)}}return Ft}(tt,et,Math.ceil((gt-dt)/11.25),Math.ceil((xt-bt)/11.25),1,(St,Ct,Pt)=>{if(St===0)return .5*(Ct+Pt);{const jt=Ns((it.y+Ct/qn)/ct);return(Eu(.5*(Ns((it.y+Pt/qn)/ct)+jt))*ct-it.y)*qn}})}$n(x_,"FillExtrusionBucket",{omit:["layers","features"]}),$n(F1,"PartMetadata");const C2=new dr({"fill-extrusion-edge-radius":new Gt(Yr["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var R2={paint:new dr({"fill-extrusion-opacity":new Gt(Yr["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new nr(Yr["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Gt(Yr["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Gt(Yr["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new nr(Yr["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new nr(Yr["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new nr(Yr["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Gt(Yr["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Gt(Yr["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Gt(Yr["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Gt(Yr["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:C2};function X1(tt,et,it){var ct=2*Math.PI*6378137/256/Math.pow(2,it);return[tt*ct-2*Math.PI*6378137/2,et*ct-2*Math.PI*6378137/2]}class Ux{constructor(et,it,ct){this.z=et,this.x=it,this.y=ct,this.key=v_(0,et,et,it,ct)}equals(et){return this.z===et.z&&this.x===et.x&&this.y===et.y}url(et,it){const ct=function(gt,xt,bt){var St=X1(256*gt,256*(xt=Math.pow(2,bt)-xt-1),bt),Ct=X1(256*(gt+1),256*(xt+1),bt);return St[0]+","+St[1]+","+Ct[0]+","+Ct[1]}(this.x,this.y,this.z),dt=function(gt,xt,bt){let St,Ct="";for(let Pt=gt;Pt>0;Pt--)St=1<<Pt-1,Ct+=(xt&St?1:0)+(bt&St?2:0);return Ct}(this.z,this.x,this.y);return et[(this.x+this.y)%et.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(it==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",dt).replace("{bbox-epsg-3857}",ct)}toString(){return`${this.z}/${this.x}/${this.y}`}}class K1{constructor(et,it){this.wrap=et,this.canonical=it,this.key=v_(et,it.z,it.z,it.x,it.y)}}class Xs{constructor(et,it,ct,dt,gt){this.overscaledZ=et,this.wrap=it,this.canonical=new Ux(ct,+dt,+gt),this.key=it===0&&et===ct?this.canonical.key:v_(it,et,ct,dt,gt)}equals(et){return this.overscaledZ===et.overscaledZ&&this.wrap===et.wrap&&this.canonical.equals(et.canonical)}scaledTo(et){const it=this.canonical.z-et;return et>this.canonical.z?new Xs(et,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Xs(et,this.wrap,et,this.canonical.x>>it,this.canonical.y>>it)}calculateScaledKey(et,it=!0){if(this.overscaledZ===et&&it)return this.key;if(et>this.canonical.z)return v_(this.wrap*+it,et,this.canonical.z,this.canonical.x,this.canonical.y);{const ct=this.canonical.z-et;return v_(this.wrap*+it,et,et,this.canonical.x>>ct,this.canonical.y>>ct)}}isChildOf(et){if(et.wrap!==this.wrap)return!1;const it=this.canonical.z-et.canonical.z;return et.overscaledZ===0||et.overscaledZ<this.overscaledZ&&et.canonical.x===this.canonical.x>>it&&et.canonical.y===this.canonical.y>>it}children(et){if(this.overscaledZ>=et)return[new Xs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const it=this.canonical.z+1,ct=2*this.canonical.x,dt=2*this.canonical.y;return[new Xs(it,this.wrap,it,ct,dt),new Xs(it,this.wrap,it,ct+1,dt),new Xs(it,this.wrap,it,ct,dt+1),new Xs(it,this.wrap,it,ct+1,dt+1)]}isLessThan(et){return this.wrap<et.wrap||!(this.wrap>et.wrap)&&(this.overscaledZ<et.overscaledZ||!(this.overscaledZ>et.overscaledZ)&&(this.canonical.x<et.canonical.x||!(this.canonical.x>et.canonical.x)&&this.canonical.y<et.canonical.y))}wrapped(){return new Xs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(et){return new Xs(this.overscaledZ,et,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new K1(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function v_(tt,et,it,ct,dt){const gt=1<<Math.min(it,22);let xt=gt*(dt%gt)+ct%gt;return tt&&it<22&&(xt+=gt*gt*((tt<0?-2*tt-1:2*tt)%(1<<2*(22-it)))),16*(32*xt+it)+(et-it)}$n(Ux,"CanonicalTileID"),$n(Xs,"OverscaledTileID",{omit:["projMatrix"]});class Zm extends Mr{constructor(et,it,ct){super(et,it),this.z=ct}}function w_(tt,et){return tt.x*et.x+tt.y*et.y}function Y1(tt,et){if(tt.length===1){let it=0;const ct=et[it++];let dt;for(;!dt||ct.equals(dt);)if(dt=et[it++],!dt)return 1/0;for(;it<et.length;it++){const gt=et[it],xt=tt[0],bt=dt.sub(ct),St=gt.sub(ct),Ct=xt.sub(ct),Pt=w_(bt,bt),jt=w_(bt,St),Lt=w_(St,St),Bt=w_(Ct,bt),Ft=w_(Ct,St),Wt=Pt*Lt-jt*jt,rr=(Lt*Bt-jt*Ft)/Wt,cr=(Pt*Ft-jt*Bt)/Wt,yr=ct.z*(1-rr-cr)+dt.z*rr+gt.z*cr;if(isFinite(yr))return yr}return 1/0}{let it=1/0;for(const ct of et)it=Math.min(it,ct.z);return it}}function Q1(tt,et,it,ct,dt,gt,xt,bt){const St=xt*dt.getElevationAt(tt,et,!0,!0),Ct=gt[0]!==0,Pt=Ct?gt[1]===0?xt*(gt[0]/7-450):xt*function(jt,Lt,Bt){const Ft=Math.floor(Lt[0]/8),Wt=Math.floor(Lt[1]/8),rr=10*(Lt[0]-8*Ft),cr=10*(Lt[1]-8*Wt),yr=jt.getElevationAt(Ft,Wt,!0,!0),ur=jt.getMeterToDEM(Bt),mr=Math.floor(.5*(rr*ur-1)),xr=Math.floor(.5*(cr*ur-1)),_r=jt.tileCoordToPixel(Ft,Wt),Vr=2*mr+1,Br=2*xr+1,Qr=function(Cn,Kr,In,zn,Mn){return[Cn.getElevationAtPixel(Kr,In,!0),Cn.getElevationAtPixel(Kr+Mn,In,!0),Cn.getElevationAtPixel(Kr,In+Mn,!0),Cn.getElevationAtPixel(Kr+zn,In+Mn,!0)]}(jt,_r.x-mr,_r.y-xr,Vr,Br),bn=Math.abs(Qr[0]-Qr[1]),Wr=Math.abs(Qr[2]-Qr[3]),pn=Math.abs(Qr[0]-Qr[2])+Math.abs(Qr[1]-Qr[3]),mn=Math.min(.25,.5*ur*(bn+Wr)/Vr),_n=Math.min(.25,.5*ur*pn/Br);return yr+Math.max(mn*rr,_n*cr)}(dt,gt,bt):St;return{base:St+(it===0)?-1:it,top:Ct?Math.max(Pt+ct,St+it+2):St+ct}}const A2=Ir([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:k2}=A2,P2=Ir([{name:"a_packed",components:4,type:"Float32"}]),{members:I2}=P2,M2=Bx.types,j2=Math.cos(Math.PI/180*37.5);class Vx{constructor(et){this.zoom=et.zoom,this.overscaling=et.overscaling,this.layers=et.layers,this.layerIds=this.layers.map(it=>it.id),this.index=et.index,this.projection=et.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(it=>{this.gradients[it.id]={}}),this.layoutVertexArray=new Hr,this.layoutVertexArray2=new vn,this.indexArray=new Vn,this.programConfigurations=new Xp(et.layers,et.zoom),this.segments=new us,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(it=>it.isStateDependent()).map(it=>it.id)}populate(et,it,ct,dt){this.hasPattern=a0("line",this.layers,it);const gt=this.layers[0].layout.get("line-sort-key"),xt=[];for(const{feature:Pt,id:jt,index:Lt,sourceLayerIndex:Bt}of et){const Ft=this.layers[0]._featureFilter.needGeometry,Wt=em(Pt,Ft);if(!this.layers[0]._featureFilter.filter(new It(this.zoom),Wt,ct))continue;const rr=gt?gt.evaluate(Wt,{},ct):void 0,cr={id:jt,properties:Pt.properties,type:Pt.type,sourceLayerIndex:Bt,index:Lt,geometry:Ft?Wt.geometry:Uu(Pt,ct,dt),patterns:{},sortKey:rr};xt.push(cr)}gt&&xt.sort((Pt,jt)=>Pt.sortKey-jt.sortKey);const{lineAtlas:bt,featureIndex:St}=it,Ct=this.addConstantDashes(bt);for(const Pt of xt){const{geometry:jt,index:Lt,sourceLayerIndex:Bt}=Pt;if(Ct&&this.addFeatureDashes(Pt,bt),this.hasPattern){const Ft=l0("line",this.layers,Pt,this.zoom,it);this.patternFeatures.push(Ft)}else this.addFeature(Pt,jt,Lt,ct,bt.positions,it.availableImages);St.insert(et[Lt].feature,jt,Lt,Bt,this.index)}}addConstantDashes(et){let it=!1;for(const ct of this.layers){const dt=ct.paint.get("line-dasharray").value,gt=ct.layout.get("line-cap").value;if(dt.kind!=="constant"||gt.kind!=="constant")it=!0;else{const xt=gt.value,bt=dt.value;if(!bt)continue;et.addDash(bt,xt)}}return it}addFeatureDashes(et,it){const ct=this.zoom;for(const dt of this.layers){const gt=dt.paint.get("line-dasharray").value,xt=dt.layout.get("line-cap").value;if(gt.kind==="constant"&&xt.kind==="constant")continue;let bt,St;if(gt.kind==="constant"){if(bt=gt.value,!bt)continue}else bt=gt.evaluate({zoom:ct},et);St=xt.kind==="constant"?xt.value:xt.evaluate({zoom:ct},et),it.addDash(bt,St),et.patterns[dt.id]=it.getKey(bt,St)}}update(et,it,ct,dt){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(et,it,this.stateDependentLayers,ct,dt)}addFeatures(et,it,ct,dt,gt){for(const xt of this.patternFeatures)this.addFeature(xt,xt.geometry,xt.index,it,ct,dt)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(et){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=et.createVertexBuffer(this.layoutVertexArray2,I2)),this.layoutVertexBuffer=et.createVertexBuffer(this.layoutVertexArray,k2),this.indexBuffer=et.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(et),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(et){if(et.properties&&et.properties.hasOwnProperty("mapbox_clip_start")&&et.properties.hasOwnProperty("mapbox_clip_end"))return{start:+et.properties.mapbox_clip_start,end:+et.properties.mapbox_clip_end}}addFeature(et,it,ct,dt,gt,xt){const bt=this.layers[0].layout,St=bt.get("line-join").evaluate(et,{}),Ct=bt.get("line-cap").evaluate(et,{}),Pt=bt.get("line-miter-limit"),jt=bt.get("line-round-limit");this.lineClips=this.lineFeatureClips(et);for(const Lt of it)this.addLine(Lt,et,St,Ct,Pt,jt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,et,ct,gt,xt,dt)}addLine(et,it,ct,dt,gt,xt){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let cr=0;cr<et.length-1;cr++)this.totalDistance+=et[cr].dist(et[cr+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const bt=M2[it.type]==="Polygon";let St=et.length;for(;St>=2&&et[St-1].equals(et[St-2]);)St--;let Ct=0;for(;Ct<St-1&&et[Ct].equals(et[Ct+1]);)Ct++;if(St<(bt?3:2))return;ct==="bevel"&&(gt=1.05);const Pt=this.overscaling<=16?15*qn/(512*this.overscaling):0,jt=this.segments.prepareSegment(10*St,this.layoutVertexArray,this.indexArray);let Lt,Bt,Ft,Wt,rr;this.e1=this.e2=-1,bt&&(Lt=et[St-2],rr=et[Ct].sub(Lt)._unit()._perp());for(let cr=Ct;cr<St;cr++){if(Ft=cr===St-1?bt?et[Ct+1]:void 0:et[cr+1],Ft&&et[cr].equals(Ft))continue;rr&&(Wt=rr),Lt&&(Bt=Lt),Lt=et[cr],rr=Ft?Ft.sub(Lt)._unit()._perp():Wt,Wt=Wt||rr;let yr=Wt.add(rr);yr.x===0&&yr.y===0||yr._unit();const ur=Wt.x*rr.x+Wt.y*rr.y,mr=yr.x*rr.x+yr.y*rr.y,xr=mr!==0?1/mr:1/0,_r=2*Math.sqrt(2-2*mr),Vr=mr<j2&&Bt&&Ft,Br=Wt.x*rr.y-Wt.y*rr.x>0;if(Vr&&cr>Ct){const Wr=Lt.dist(Bt);if(Wr>2*Pt){const pn=Lt.sub(Lt.sub(Bt)._mult(Pt/Wr)._round());this.updateDistance(Bt,pn),this.addCurrentVertex(pn,Wt,0,0,jt),Bt=pn}}const Qr=Bt&&Ft;let bn=Qr?ct:bt?"butt":dt;if(Qr&&bn==="round"&&(xr<xt?bn="miter":xr<=2&&(bn="fakeround")),bn==="miter"&&xr>gt&&(bn="bevel"),bn==="bevel"&&(xr>2&&(bn="flipbevel"),xr<gt&&(bn="miter")),Bt&&this.updateDistance(Bt,Lt),bn==="miter")yr._mult(xr),this.addCurrentVertex(Lt,yr,0,0,jt);else if(bn==="flipbevel"){if(xr>100)yr=rr.mult(-1);else{const Wr=xr*Wt.add(rr).mag()/Wt.sub(rr).mag();yr._perp()._mult(Wr*(Br?-1:1))}this.addCurrentVertex(Lt,yr,0,0,jt),this.addCurrentVertex(Lt,yr.mult(-1),0,0,jt)}else if(bn==="bevel"||bn==="fakeround"){const Wr=-Math.sqrt(xr*xr-1),pn=Br?Wr:0,mn=Br?0:Wr;if(Bt&&this.addCurrentVertex(Lt,Wt,pn,mn,jt),bn==="fakeround"){const _n=Math.round(180*_r/Math.PI/20);for(let Cn=1;Cn<_n;Cn++){let Kr=Cn/_n;if(Kr!==.5){const zn=Kr-.5;Kr+=Kr*zn*(Kr-1)*((1.0904+ur*(ur*(3.55645-1.43519*ur)-3.2452))*zn*zn+(.848013+ur*(.215638*ur-1.06021)))}const In=rr.sub(Wt)._mult(Kr)._add(Wt)._unit()._mult(Br?-1:1);this.addHalfVertex(Lt,In.x,In.y,!1,Br,0,jt)}}Ft&&this.addCurrentVertex(Lt,rr,-pn,-mn,jt)}else if(bn==="butt")this.addCurrentVertex(Lt,yr,0,0,jt);else if(bn==="square"){const Wr=Bt?1:-1;Bt||this.addCurrentVertex(Lt,yr,Wr,Wr,jt),this.addCurrentVertex(Lt,yr,0,0,jt),Bt&&this.addCurrentVertex(Lt,yr,Wr,Wr,jt)}else bn==="round"&&(Bt&&(this.addCurrentVertex(Lt,Wt,0,0,jt),this.addCurrentVertex(Lt,Wt,1,1,jt,!0)),Ft&&(this.addCurrentVertex(Lt,rr,-1,-1,jt,!0),this.addCurrentVertex(Lt,rr,0,0,jt)));if(Vr&&cr<St-1){const Wr=Lt.dist(Ft);if(Wr>2*Pt){const pn=Lt.add(Ft.sub(Lt)._mult(Pt/Wr)._round());this.updateDistance(Lt,pn),this.addCurrentVertex(pn,rr,0,0,jt),Lt=pn}}}}addCurrentVertex(et,it,ct,dt,gt,xt=!1){const bt=it.y*dt-it.x,St=-it.y-it.x*dt;this.addHalfVertex(et,it.x+it.y*ct,it.y-it.x*ct,xt,!1,ct,gt),this.addHalfVertex(et,bt,St,xt,!0,-dt,gt)}addHalfVertex({x:et,y:it},ct,dt,gt,xt,bt,St){this.layoutVertexArray.emplaceBack((et<<1)+(gt?1:0),(it<<1)+(xt?1:0),Math.round(63*ct)+128,Math.round(63*dt)+128,1+(bt===0?0:bt<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const Ct=St.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Ct),St.primitiveLength++),xt?this.e2=Ct:this.e1=Ct}updateScaledDistance(){if(this.lineClips){const et=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=et*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(et,it){this.distance+=et.dist(it),this.updateScaledDistance()}}$n(Vx,"LineBucket",{omit:["layers","patternFeatures"]});const D2=new dr({"line-cap":new nr(Yr.layout_line["line-cap"]),"line-join":new nr(Yr.layout_line["line-join"]),"line-miter-limit":new Gt(Yr.layout_line["line-miter-limit"]),"line-round-limit":new Gt(Yr.layout_line["line-round-limit"]),"line-sort-key":new nr(Yr.layout_line["line-sort-key"])});var J1={paint:new dr({"line-opacity":new nr(Yr.paint_line["line-opacity"]),"line-color":new nr(Yr.paint_line["line-color"]),"line-translate":new Gt(Yr.paint_line["line-translate"]),"line-translate-anchor":new Gt(Yr.paint_line["line-translate-anchor"]),"line-width":new nr(Yr.paint_line["line-width"]),"line-gap-width":new nr(Yr.paint_line["line-gap-width"]),"line-offset":new nr(Yr.paint_line["line-offset"]),"line-blur":new nr(Yr.paint_line["line-blur"]),"line-dasharray":new nr(Yr.paint_line["line-dasharray"]),"line-pattern":new nr(Yr.paint_line["line-pattern"]),"line-gradient":new hr(Yr.paint_line["line-gradient"]),"line-trim-offset":new Gt(Yr.paint_line["line-trim-offset"])}),layout:D2};const ew=new class extends nr{possiblyEvaluate(tt,et){return et=new It(Math.floor(et.zoom),{now:et.now,fadeDuration:et.fadeDuration,transition:et.transition}),super.possiblyEvaluate(tt,et)}evaluate(tt,et,it,ct){return et=kn({},et,{zoom:Math.floor(et.zoom)}),super.evaluate(tt,et,it,ct)}}(J1.paint.properties["line-width"].specification);function tw(tt,et){return et>0?et+2*tt:tt}ew.useIntegerZoom=!0;const L2=Ir([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),$2=Ir([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),O2=Ir([{name:"a_projected_pos",components:4,type:"Float32"}],4);Ir([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const z2=Ir([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),N2=Ir([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Ir([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const rw=Ir([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),B2=Ir([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Ir([{name:"triangle",components:3,type:"Uint16"}]),Ir([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Ir([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ir([{type:"Float32",name:"offsetX"}]),Ir([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Is=24;const pu=128;function u0(tt,et){const{expression:it}=et;if(it.kind==="constant")return{kind:"constant",layoutSize:it.evaluate(new It(tt+1))};if(it.kind==="source")return{kind:"source"};{const{zoomStops:ct,interpolationType:dt}=it;let gt=0;for(;gt<ct.length&&ct[gt]<=tt;)gt++;gt=Math.max(0,gt-1);let xt=gt;for(;xt<ct.length&&ct[xt]<tt+1;)xt++;xt=Math.min(ct.length-1,xt);const bt=ct[gt],St=ct[xt];return it.kind==="composite"?{kind:"composite",minZoom:bt,maxZoom:St,interpolationType:dt}:{kind:"camera",minZoom:bt,maxZoom:St,minSize:it.evaluate(new It(bt)),maxSize:it.evaluate(new It(St)),interpolationType:dt}}}function Gx(tt,{uSize:et,uSizeT:it},{lowerSize:ct,upperSize:dt}){return tt.kind==="source"?ct/pu:tt.kind==="composite"?yo(ct/pu,dt/pu,it):et}function Xm(tt,et){let it=0,ct=0;if(tt.kind==="constant")ct=tt.layoutSize;else if(tt.kind!=="source"){const{interpolationType:dt,minZoom:gt,maxZoom:xt}=tt,bt=dt?Pr(Ul.interpolationFactor(dt,et,gt,xt),0,1):0;tt.kind==="camera"?ct=yo(tt.minSize,tt.maxSize,bt):it=bt}return{uSizeT:it,uSize:ct}}var F2=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:pu,evaluateSizeForFeature:Gx,evaluateSizeForZoom:Xm,getSizeData:u0});function U2(tt,et,it){return tt.sections.forEach(ct=>{ct.text=function(dt,gt,xt){const bt=gt.layout.get("text-transform").evaluate(xt,{});return bt==="uppercase"?dt=dt.toLocaleUpperCase():bt==="lowercase"&&(dt=dt.toLocaleLowerCase()),At.applyArabicShaping&&(dt=At.applyArabicShaping(dt)),dt}(ct.text,et,it)}),tt}const b_={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function V2(tt){return tt===""||tt===""||tt===""||tt===""||tt===""||tt===""||tt===""||tt===""||tt===""||tt===""||tt===""||tt===""||tt===""||tt===""||tt===""||tt===""||tt===""}function G2(tt){return tt===""||tt===""||tt===""||tt===""||tt===""||tt===""||tt===""||tt===""||tt===""||tt===""}var nw=zo,iw=function(tt,et,it,ct,dt){var gt,xt,bt=8*dt-ct-1,St=(1<<bt)-1,Ct=St>>1,Pt=-7,jt=it?dt-1:0,Lt=it?-1:1,Bt=tt[et+jt];for(jt+=Lt,gt=Bt&(1<<-Pt)-1,Bt>>=-Pt,Pt+=bt;Pt>0;gt=256*gt+tt[et+jt],jt+=Lt,Pt-=8);for(xt=gt&(1<<-Pt)-1,gt>>=-Pt,Pt+=ct;Pt>0;xt=256*xt+tt[et+jt],jt+=Lt,Pt-=8);if(gt===0)gt=1-Ct;else{if(gt===St)return xt?NaN:1/0*(Bt?-1:1);xt+=Math.pow(2,ct),gt-=Ct}return(Bt?-1:1)*xt*Math.pow(2,gt-ct)},ow=function(tt,et,it,ct,dt,gt){var xt,bt,St,Ct=8*gt-dt-1,Pt=(1<<Ct)-1,jt=Pt>>1,Lt=dt===23?Math.pow(2,-24)-Math.pow(2,-77):0,Bt=ct?0:gt-1,Ft=ct?1:-1,Wt=et<0||et===0&&1/et<0?1:0;for(et=Math.abs(et),isNaN(et)||et===1/0?(bt=isNaN(et)?1:0,xt=Pt):(xt=Math.floor(Math.log(et)/Math.LN2),et*(St=Math.pow(2,-xt))<1&&(xt--,St*=2),(et+=xt+jt>=1?Lt/St:Lt*Math.pow(2,1-jt))*St>=2&&(xt++,St/=2),xt+jt>=Pt?(bt=0,xt=Pt):xt+jt>=1?(bt=(et*St-1)*Math.pow(2,dt),xt+=jt):(bt=et*Math.pow(2,jt-1)*Math.pow(2,dt),xt=0));dt>=8;tt[it+Bt]=255&bt,Bt+=Ft,bt/=256,dt-=8);for(xt=xt<<dt|bt,Ct+=dt;Ct>0;tt[it+Bt]=255&xt,Bt+=Ft,xt/=256,Ct-=8);tt[it+Bt-Ft]|=128*Wt};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function zo(tt){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(tt)?tt:new Uint8Array(tt||0),this.pos=0,this.type=0,this.length=this.buf.length}zo.Varint=0,zo.Fixed64=1,zo.Bytes=2,zo.Fixed32=5;var h0=4294967296,sw=1/h0,aw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Gu(tt){return tt.type===zo.Bytes?tt.readVarint()+tt.pos:tt.pos+1}function Km(tt,et,it){return it?4294967296*et+(tt>>>0):4294967296*(et>>>0)+(tt>>>0)}function lw(tt,et,it){var ct=et<=16383?1:et<=2097151?2:et<=268435455?3:Math.floor(Math.log(et)/(7*Math.LN2));it.realloc(ct);for(var dt=it.pos-1;dt>=tt;dt--)it.buf[dt+ct]=it.buf[dt]}function H2(tt,et){for(var it=0;it<tt.length;it++)et.writeVarint(tt[it])}function W2(tt,et){for(var it=0;it<tt.length;it++)et.writeSVarint(tt[it])}function q2(tt,et){for(var it=0;it<tt.length;it++)et.writeFloat(tt[it])}function Z2(tt,et){for(var it=0;it<tt.length;it++)et.writeDouble(tt[it])}function X2(tt,et){for(var it=0;it<tt.length;it++)et.writeBoolean(tt[it])}function K2(tt,et){for(var it=0;it<tt.length;it++)et.writeFixed32(tt[it])}function Y2(tt,et){for(var it=0;it<tt.length;it++)et.writeSFixed32(tt[it])}function Q2(tt,et){for(var it=0;it<tt.length;it++)et.writeFixed64(tt[it])}function J2(tt,et){for(var it=0;it<tt.length;it++)et.writeSFixed64(tt[it])}function Hx(tt,et){return(tt[et]|tt[et+1]<<8|tt[et+2]<<16)+16777216*tt[et+3]}function Ym(tt,et,it){tt[it]=et,tt[it+1]=et>>>8,tt[it+2]=et>>>16,tt[it+3]=et>>>24}function cw(tt,et){return(tt[et]|tt[et+1]<<8|tt[et+2]<<16)+(tt[et+3]<<24)}zo.prototype={destroy:function(){this.buf=null},readFields:function(tt,et,it){for(it=it||this.length;this.pos<it;){var ct=this.readVarint(),dt=ct>>3,gt=this.pos;this.type=7&ct,tt(dt,et,this),this.pos===gt&&this.skip(ct)}return et},readMessage:function(tt,et){return this.readFields(tt,et,this.readVarint()+this.pos)},readFixed32:function(){var tt=Hx(this.buf,this.pos);return this.pos+=4,tt},readSFixed32:function(){var tt=cw(this.buf,this.pos);return this.pos+=4,tt},readFixed64:function(){var tt=Hx(this.buf,this.pos)+Hx(this.buf,this.pos+4)*h0;return this.pos+=8,tt},readSFixed64:function(){var tt=Hx(this.buf,this.pos)+cw(this.buf,this.pos+4)*h0;return this.pos+=8,tt},readFloat:function(){var tt=iw(this.buf,this.pos,!0,23,4);return this.pos+=4,tt},readDouble:function(){var tt=iw(this.buf,this.pos,!0,52,8);return this.pos+=8,tt},readVarint:function(tt){var et,it,ct=this.buf;return et=127&(it=ct[this.pos++]),it<128?et:(et|=(127&(it=ct[this.pos++]))<<7,it<128?et:(et|=(127&(it=ct[this.pos++]))<<14,it<128?et:(et|=(127&(it=ct[this.pos++]))<<21,it<128?et:function(dt,gt,xt){var bt,St,Ct=xt.buf;if(bt=(112&(St=Ct[xt.pos++]))>>4,St<128||(bt|=(127&(St=Ct[xt.pos++]))<<3,St<128)||(bt|=(127&(St=Ct[xt.pos++]))<<10,St<128)||(bt|=(127&(St=Ct[xt.pos++]))<<17,St<128)||(bt|=(127&(St=Ct[xt.pos++]))<<24,St<128)||(bt|=(1&(St=Ct[xt.pos++]))<<31,St<128))return Km(dt,bt,gt);throw new Error("Expected varint not more than 10 bytes")}(et|=(15&(it=ct[this.pos]))<<28,tt,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var tt=this.readVarint();return tt%2==1?(tt+1)/-2:tt/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var tt=this.readVarint()+this.pos,et=this.pos;return this.pos=tt,tt-et>=12&&aw?function(it,ct,dt){return aw.decode(it.subarray(ct,dt))}(this.buf,et,tt):function(it,ct,dt){for(var gt="",xt=ct;xt<dt;){var bt,St,Ct,Pt=it[xt],jt=null,Lt=Pt>239?4:Pt>223?3:Pt>191?2:1;if(xt+Lt>dt)break;Lt===1?Pt<128&&(jt=Pt):Lt===2?(192&(bt=it[xt+1]))==128&&(jt=(31&Pt)<<6|63&bt)<=127&&(jt=null):Lt===3?(St=it[xt+2],(192&(bt=it[xt+1]))==128&&(192&St)==128&&((jt=(15&Pt)<<12|(63&bt)<<6|63&St)<=2047||jt>=55296&&jt<=57343)&&(jt=null)):Lt===4&&(St=it[xt+2],Ct=it[xt+3],(192&(bt=it[xt+1]))==128&&(192&St)==128&&(192&Ct)==128&&((jt=(15&Pt)<<18|(63&bt)<<12|(63&St)<<6|63&Ct)<=65535||jt>=1114112)&&(jt=null)),jt===null?(jt=65533,Lt=1):jt>65535&&(jt-=65536,gt+=String.fromCharCode(jt>>>10&1023|55296),jt=56320|1023&jt),gt+=String.fromCharCode(jt),xt+=Lt}return gt}(this.buf,et,tt)},readBytes:function(){var tt=this.readVarint()+this.pos,et=this.buf.subarray(this.pos,tt);return this.pos=tt,et},readPackedVarint:function(tt,et){if(this.type!==zo.Bytes)return tt.push(this.readVarint(et));var it=Gu(this);for(tt=tt||[];this.pos<it;)tt.push(this.readVarint(et));return tt},readPackedSVarint:function(tt){if(this.type!==zo.Bytes)return tt.push(this.readSVarint());var et=Gu(this);for(tt=tt||[];this.pos<et;)tt.push(this.readSVarint());return tt},readPackedBoolean:function(tt){if(this.type!==zo.Bytes)return tt.push(this.readBoolean());var et=Gu(this);for(tt=tt||[];this.pos<et;)tt.push(this.readBoolean());return tt},readPackedFloat:function(tt){if(this.type!==zo.Bytes)return tt.push(this.readFloat());var et=Gu(this);for(tt=tt||[];this.pos<et;)tt.push(this.readFloat());return tt},readPackedDouble:function(tt){if(this.type!==zo.Bytes)return tt.push(this.readDouble());var et=Gu(this);for(tt=tt||[];this.pos<et;)tt.push(this.readDouble());return tt},readPackedFixed32:function(tt){if(this.type!==zo.Bytes)return tt.push(this.readFixed32());var et=Gu(this);for(tt=tt||[];this.pos<et;)tt.push(this.readFixed32());return tt},readPackedSFixed32:function(tt){if(this.type!==zo.Bytes)return tt.push(this.readSFixed32());var et=Gu(this);for(tt=tt||[];this.pos<et;)tt.push(this.readSFixed32());return tt},readPackedFixed64:function(tt){if(this.type!==zo.Bytes)return tt.push(this.readFixed64());var et=Gu(this);for(tt=tt||[];this.pos<et;)tt.push(this.readFixed64());return tt},readPackedSFixed64:function(tt){if(this.type!==zo.Bytes)return tt.push(this.readSFixed64());var et=Gu(this);for(tt=tt||[];this.pos<et;)tt.push(this.readSFixed64());return tt},skip:function(tt){var et=7&tt;if(et===zo.Varint)for(;this.buf[this.pos++]>127;);else if(et===zo.Bytes)this.pos=this.readVarint()+this.pos;else if(et===zo.Fixed32)this.pos+=4;else{if(et!==zo.Fixed64)throw new Error("Unimplemented type: "+et);this.pos+=8}},writeTag:function(tt,et){this.writeVarint(tt<<3|et)},realloc:function(tt){for(var et=this.length||16;et<this.pos+tt;)et*=2;if(et!==this.length){var it=new Uint8Array(et);it.set(this.buf),this.buf=it,this.length=et}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(tt){this.realloc(4),Ym(this.buf,tt,this.pos),this.pos+=4},writeSFixed32:function(tt){this.realloc(4),Ym(this.buf,tt,this.pos),this.pos+=4},writeFixed64:function(tt){this.realloc(8),Ym(this.buf,-1&tt,this.pos),Ym(this.buf,Math.floor(tt*sw),this.pos+4),this.pos+=8},writeSFixed64:function(tt){this.realloc(8),Ym(this.buf,-1&tt,this.pos),Ym(this.buf,Math.floor(tt*sw),this.pos+4),this.pos+=8},writeVarint:function(tt){(tt=+tt||0)>268435455||tt<0?function(et,it){var ct,dt;if(et>=0?(ct=et%4294967296|0,dt=et/4294967296|0):(dt=~(-et/4294967296),4294967295^(ct=~(-et%4294967296))?ct=ct+1|0:(ct=0,dt=dt+1|0)),et>=18446744073709552e3||et<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");it.realloc(10),function(gt,xt,bt){bt.buf[bt.pos++]=127&gt|128,gt>>>=7,bt.buf[bt.pos++]=127&gt|128,gt>>>=7,bt.buf[bt.pos++]=127&gt|128,gt>>>=7,bt.buf[bt.pos++]=127&gt|128,bt.buf[bt.pos]=127&(gt>>>=7)}(ct,0,it),function(gt,xt){var bt=(7&gt)<<4;xt.buf[xt.pos++]|=bt|((gt>>>=3)?128:0),gt&&(xt.buf[xt.pos++]=127&gt|((gt>>>=7)?128:0),gt&&(xt.buf[xt.pos++]=127&gt|((gt>>>=7)?128:0),gt&&(xt.buf[xt.pos++]=127&gt|((gt>>>=7)?128:0),gt&&(xt.buf[xt.pos++]=127&gt|((gt>>>=7)?128:0),gt&&(xt.buf[xt.pos++]=127&gt)))))}(dt,it)}(tt,this):(this.realloc(4),this.buf[this.pos++]=127&tt|(tt>127?128:0),tt<=127||(this.buf[this.pos++]=127&(tt>>>=7)|(tt>127?128:0),tt<=127||(this.buf[this.pos++]=127&(tt>>>=7)|(tt>127?128:0),tt<=127||(this.buf[this.pos++]=tt>>>7&127))))},writeSVarint:function(tt){this.writeVarint(tt<0?2*-tt-1:2*tt)},writeBoolean:function(tt){this.writeVarint(!!tt)},writeString:function(tt){tt=String(tt),this.realloc(4*tt.length),this.pos++;var et=this.pos;this.pos=function(ct,dt,gt){for(var xt,bt,St=0;St<dt.length;St++){if((xt=dt.charCodeAt(St))>55295&&xt<57344){if(!bt){xt>56319||St+1===dt.length?(ct[gt++]=239,ct[gt++]=191,ct[gt++]=189):bt=xt;continue}if(xt<56320){ct[gt++]=239,ct[gt++]=191,ct[gt++]=189,bt=xt;continue}xt=bt-55296<<10|xt-56320|65536,bt=null}else bt&&(ct[gt++]=239,ct[gt++]=191,ct[gt++]=189,bt=null);xt<128?ct[gt++]=xt:(xt<2048?ct[gt++]=xt>>6|192:(xt<65536?ct[gt++]=xt>>12|224:(ct[gt++]=xt>>18|240,ct[gt++]=xt>>12&63|128),ct[gt++]=xt>>6&63|128),ct[gt++]=63&xt|128)}return gt}(this.buf,tt,this.pos);var it=this.pos-et;it>=128&&lw(et,it,this),this.pos=et-1,this.writeVarint(it),this.pos+=it},writeFloat:function(tt){this.realloc(4),ow(this.buf,tt,this.pos,!0,23,4),this.pos+=4},writeDouble:function(tt){this.realloc(8),ow(this.buf,tt,this.pos,!0,52,8),this.pos+=8},writeBytes:function(tt){var et=tt.length;this.writeVarint(et),this.realloc(et);for(var it=0;it<et;it++)this.buf[this.pos++]=tt[it]},writeRawMessage:function(tt,et){this.pos++;var it=this.pos;tt(et,this);var ct=this.pos-it;ct>=128&&lw(it,ct,this),this.pos=it-1,this.writeVarint(ct),this.pos+=ct},writeMessage:function(tt,et,it){this.writeTag(tt,zo.Bytes),this.writeRawMessage(et,it)},writePackedVarint:function(tt,et){et.length&&this.writeMessage(tt,H2,et)},writePackedSVarint:function(tt,et){et.length&&this.writeMessage(tt,W2,et)},writePackedBoolean:function(tt,et){et.length&&this.writeMessage(tt,X2,et)},writePackedFloat:function(tt,et){et.length&&this.writeMessage(tt,q2,et)},writePackedDouble:function(tt,et){et.length&&this.writeMessage(tt,Z2,et)},writePackedFixed32:function(tt,et){et.length&&this.writeMessage(tt,K2,et)},writePackedSFixed32:function(tt,et){et.length&&this.writeMessage(tt,Y2,et)},writePackedFixed64:function(tt,et){et.length&&this.writeMessage(tt,Q2,et)},writePackedSFixed64:function(tt,et){et.length&&this.writeMessage(tt,J2,et)},writeBytesField:function(tt,et){this.writeTag(tt,zo.Bytes),this.writeBytes(et)},writeFixed32Field:function(tt,et){this.writeTag(tt,zo.Fixed32),this.writeFixed32(et)},writeSFixed32Field:function(tt,et){this.writeTag(tt,zo.Fixed32),this.writeSFixed32(et)},writeFixed64Field:function(tt,et){this.writeTag(tt,zo.Fixed64),this.writeFixed64(et)},writeSFixed64Field:function(tt,et){this.writeTag(tt,zo.Fixed64),this.writeSFixed64(et)},writeVarintField:function(tt,et){this.writeTag(tt,zo.Varint),this.writeVarint(et)},writeSVarintField:function(tt,et){this.writeTag(tt,zo.Varint),this.writeSVarint(et)},writeStringField:function(tt,et){this.writeTag(tt,zo.Bytes),this.writeString(et)},writeFloatField:function(tt,et){this.writeTag(tt,zo.Fixed32),this.writeFloat(et)},writeDoubleField:function(tt,et){this.writeTag(tt,zo.Fixed64),this.writeDouble(et)},writeBooleanField:function(tt,et){this.writeVarintField(tt,!!et)}};var Wx=Jt(nw);const d0=3;function eS(tt,et,it){et.glyphs=[],tt===1&&it.readMessage(tS,et)}function tS(tt,et,it){if(tt===3){const{id:ct,bitmap:dt,width:gt,height:xt,left:bt,top:St,advance:Ct}=it.readMessage(rS,{});et.glyphs.push({id:ct,bitmap:new Vu({width:gt+2*d0,height:xt+2*d0},dt),metrics:{width:gt,height:xt,left:bt,top:St,advance:Ct}})}else tt===4?et.ascender=it.readSVarint():tt===5&&(et.descender=it.readSVarint())}function rS(tt,et,it){tt===1?et.id=it.readVarint():tt===2?et.bitmap=it.readBytes():tt===3?et.width=it.readVarint():tt===4?et.height=it.readVarint():tt===5?et.left=it.readSVarint():tt===6?et.top=it.readSVarint():tt===7&&(et.advance=it.readVarint())}const uw=d0;function p0(tt){let et=0,it=0;for(const xt of tt)et+=xt.w*xt.h,it=Math.max(it,xt.w);tt.sort((xt,bt)=>bt.h-xt.h);const ct=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(et/.95)),it),h:1/0}];let dt=0,gt=0;for(const xt of tt)for(let bt=ct.length-1;bt>=0;bt--){const St=ct[bt];if(!(xt.w>St.w||xt.h>St.h)){if(xt.x=St.x,xt.y=St.y,gt=Math.max(gt,xt.y+xt.h),dt=Math.max(dt,xt.x+xt.w),xt.w===St.w&&xt.h===St.h){const Ct=ct.pop();bt<ct.length&&(ct[bt]=Ct)}else xt.h===St.h?(St.x+=xt.w,St.w-=xt.w):xt.w===St.w?(St.y+=xt.h,St.h-=xt.h):(ct.push({x:St.x+xt.w,y:St.y,w:St.w-xt.w,h:xt.h}),St.y+=xt.h,St.h-=xt.h);break}}return{w:dt,h:gt,fill:et/(dt*gt)||0}}const _a=1;class f0{constructor(et,{pixelRatio:it,version:ct,stretchX:dt,stretchY:gt,content:xt}){this.paddedRect=et,this.pixelRatio=it,this.stretchX=dt,this.stretchY=gt,this.content=xt,this.version=ct}get tl(){return[this.paddedRect.x+_a,this.paddedRect.y+_a]}get br(){return[this.paddedRect.x+this.paddedRect.w-_a,this.paddedRect.y+this.paddedRect.h-_a]}get displaySize(){return[(this.paddedRect.w-2*_a)/this.pixelRatio,(this.paddedRect.h-2*_a)/this.pixelRatio]}}class hw{constructor(et,it){const ct={},dt={};this.haveRenderCallbacks=[];const gt=[];this.addImages(et,ct,gt),this.addImages(it,dt,gt);const{w:xt,h:bt}=p0(gt),St=new Tl({width:xt||1,height:bt||1});for(const Ct in et){const Pt=et[Ct],jt=ct[Ct].paddedRect;Tl.copy(Pt.data,St,{x:0,y:0},{x:jt.x+_a,y:jt.y+_a},Pt.data)}for(const Ct in it){const Pt=it[Ct],jt=dt[Ct].paddedRect,Lt=jt.x+_a,Bt=jt.y+_a,Ft=Pt.data.width,Wt=Pt.data.height;Tl.copy(Pt.data,St,{x:0,y:0},{x:Lt,y:Bt},Pt.data),Tl.copy(Pt.data,St,{x:0,y:Wt-1},{x:Lt,y:Bt-1},{width:Ft,height:1}),Tl.copy(Pt.data,St,{x:0,y:0},{x:Lt,y:Bt+Wt},{width:Ft,height:1}),Tl.copy(Pt.data,St,{x:Ft-1,y:0},{x:Lt-1,y:Bt},{width:1,height:Wt}),Tl.copy(Pt.data,St,{x:0,y:0},{x:Lt+Ft,y:Bt},{width:1,height:Wt})}this.image=St,this.iconPositions=ct,this.patternPositions=dt}addImages(et,it,ct){for(const dt in et){const gt=et[dt],xt={x:0,y:0,w:gt.data.width+2*_a,h:gt.data.height+2*_a};ct.push(xt),it[dt]=new f0(xt,gt),gt.hasRenderCallback&&this.haveRenderCallbacks.push(dt)}}patchUpdatedImages(et,it){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(ct=>et.hasImage(ct)),et.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const ct in et.updatedImages)this.patchUpdatedImage(this.iconPositions[ct],et.getImage(ct),it),this.patchUpdatedImage(this.patternPositions[ct],et.getImage(ct),it)}patchUpdatedImage(et,it,ct){if(!et||!it||et.version===it.version)return;et.version=it.version;const[dt,gt]=et.tl;ct.update(it.data,void 0,{x:dt,y:gt})}}$n(f0,"ImagePosition"),$n(hw,"ImageAtlas");const Ol={horizontal:1,vertical:2,horizontalOnly:3},dw=-17;class E_{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(et,it){const ct=new E_;return ct.scale=et||1,ct.fontStack=it,ct}static forImage(et){const it=new E_;return it.imageName=et,it}}class Qm{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(et,it){const ct=new Qm;for(let dt=0;dt<et.sections.length;dt++){const gt=et.sections[dt];gt.image?ct.addImageSection(gt):ct.addTextSection(gt,it)}return ct}length(){return this.text.length}getSection(et){return this.sections[this.sectionIndex[et]]}getSections(){return this.sections}getSectionIndex(et){return this.sectionIndex[et]}getCharCode(et){return this.text.charCodeAt(et)}verticalizePunctuation(et){this.text=function(it,ct){let dt="";for(let gt=0;gt<it.length;gt++){const xt=it.charCodeAt(gt+1)||null,bt=it.charCodeAt(gt-1)||null;dt+=!ct&&(xt&&wx(xt)&&!b_[it[gt+1]]||bt&&wx(bt)&&!b_[it[gt-1]])||!b_[it[gt]]?it[gt]:b_[it[gt]]}return dt}(this.text,et)}trim(){let et=0;for(let ct=0;ct<this.text.length&&qx[this.text.charCodeAt(ct)];ct++)et++;let it=this.text.length;for(let ct=this.text.length-1;ct>=0&&ct>=et&&qx[this.text.charCodeAt(ct)];ct--)it--;this.text=this.text.substring(et,it),this.sectionIndex=this.sectionIndex.slice(et,it)}substring(et,it){const ct=new Qm;return ct.text=this.text.substring(et,it),ct.sectionIndex=this.sectionIndex.slice(et,it),ct.sections=this.sections,ct}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((et,it)=>Math.max(et,this.sections[it].scale),0)}addTextSection(et,it){this.text+=et.text,this.sections.push(E_.forText(et.scale,et.fontStack||it));const ct=this.sections.length-1;for(let dt=0;dt<et.text.length;++dt)this.sectionIndex.push(ct)}addImageSection(et){const it=et.image?et.image.name:"";if(it.length===0)return void Hn("Can't add FormattedSection with an empty image.");const ct=this.getNextImageSectionCharCode();ct?(this.text+=String.fromCharCode(ct),this.sections.push(E_.forImage(it)),this.sectionIndex.push(this.sections.length-1)):Hn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function m0(tt,et,it,ct,dt,gt,xt,bt,St,Ct,Pt,jt,Lt,Bt,Ft){const Wt=Qm.fromFeature(tt,dt);jt===Ol.vertical&&Wt.verticalizePunctuation(Lt);let rr=[];const cr=function(_r,Vr,Br,Qr,bn,Wr){if(!_r)return[];const pn=[],mn=function(In,zn,Mn,_i,Rn,Wn){let eo=0;for(let xo=0;xo<In.length();xo++){const to=In.getSection(xo);eo+=pw(In.getCharCode(xo),to,_i,Rn,zn,Wn)}return eo/Math.max(1,Math.ceil(eo/Mn))}(_r,Vr,Br,Qr,bn,Wr),_n=_r.text.indexOf("")>=0;let Cn=0;for(let In=0;In<_r.length();In++){const zn=_r.getSection(In),Mn=_r.getCharCode(In);if(qx[Mn]||(Cn+=pw(Mn,zn,Qr,bn,Vr,Wr)),In<_r.length()-1){const _i=!((Kr=Mn)<11904||!(jn["Bopomofo Extended"](Kr)||jn.Bopomofo(Kr)||jn["CJK Compatibility Forms"](Kr)||jn["CJK Compatibility Ideographs"](Kr)||jn["CJK Compatibility"](Kr)||jn["CJK Radicals Supplement"](Kr)||jn["CJK Strokes"](Kr)||jn["CJK Symbols and Punctuation"](Kr)||jn["CJK Unified Ideographs Extension A"](Kr)||jn["CJK Unified Ideographs"](Kr)||jn["Enclosed CJK Letters and Months"](Kr)||jn["Halfwidth and Fullwidth Forms"](Kr)||jn.Hiragana(Kr)||jn["Ideographic Description Characters"](Kr)||jn["Kangxi Radicals"](Kr)||jn["Katakana Phonetic Extensions"](Kr)||jn.Katakana(Kr)||jn["Vertical Forms"](Kr)||jn["Yi Radicals"](Kr)||jn["Yi Syllables"](Kr)));(nS[Mn]||_i||zn.imageName)&&pn.push(mw(In+1,Cn,mn,pn,iS(Mn,_r.getCharCode(In+1),_i&&_n),!1))}}var Kr;return gw(mw(_r.length(),Cn,mn,pn,0,!0))}(Wt,Ct,gt,et,ct,Bt),{processBidirectionalText:yr,processStyledBidirectionalText:ur}=At;if(yr&&Wt.sections.length===1){const _r=yr(Wt.toString(),cr);for(const Vr of _r){const Br=new Qm;Br.text=Vr,Br.sections=Wt.sections;for(let Qr=0;Qr<Vr.length;Qr++)Br.sectionIndex.push(0);rr.push(Br)}}else if(ur){const _r=ur(Wt.text,Wt.sectionIndex,cr);for(const Vr of _r){const Br=new Qm;Br.text=Vr[0],Br.sectionIndex=Vr[1],Br.sections=Wt.sections,rr.push(Br)}}else rr=function(_r,Vr){const Br=[],Qr=_r.text;let bn=0;for(const Wr of Vr)Br.push(_r.substring(bn,Wr)),bn=Wr;return bn<Qr.length&&Br.push(_r.substring(bn,Qr.length)),Br}(Wt,cr);const mr=[],xr={positionedLines:mr,text:Wt.toString(),top:Pt[1],bottom:Pt[1],left:Pt[0],right:Pt[0],writingMode:jt,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(_r,Vr,Br,Qr,bn,Wr,pn,mn,_n,Cn,Kr,In){let zn=0,Mn=0,_i=0;const Rn=mn==="right"?1:mn==="left"?0:.5;let Wn=!1;for(const io of bn){const oo=io.getSections();for(const Lo of oo){if(Lo.imageName)continue;const No=Vr[Lo.fontStack];if(No&&(Wn=No.ascender!==void 0&&No.descender!==void 0,!Wn))break}if(!Wn)break}let eo=0;for(const io of bn){io.trim();const oo=io.getMaxScale(),Lo=(oo-1)*Is,No={positionedGlyphs:[],lineOffset:0};_r.positionedLines[eo]=No;const Bo=No.positionedGlyphs;let $o=0;if(!io.length()){Mn+=Wr,++eo;continue}let Zo=0,Qo=0;for(let Oo=0;Oo<io.length();Oo++){const xs=io.getSection(Oo),ps=io.getSectionIndex(Oo),Ko=io.getCharCode(Oo);let bo=xs.scale,fs=null,Fo=null,Ks=null,ms=Is,Ms=0;const Rs=!(_n===Ol.horizontal||!Kr&&!Ky(Ko)||Kr&&(qx[Ko]||(xo=Ko,jn.Arabic(xo)||jn["Arabic Supplement"](xo)||jn["Arabic Extended-A"](xo)||jn["Arabic Presentation Forms-A"](xo)||jn["Arabic Presentation Forms-B"](xo))));if(xs.imageName){const Ys=Qr[xs.imageName];if(!Ys)continue;Ks=xs.imageName,_r.iconsInText=_r.iconsInText||!0,Fo=Ys.paddedRect;const As=Ys.displaySize;bo=bo*Is/In,fs={width:As[0],height:As[1],left:_a,top:-uw,advance:Rs?As[1]:As[0],localGlyph:!1},Ms=Wn?-fs.height*bo:dw+oo*Is-As[1]*bo,ms=fs.advance;const gu=(Rs?As[0]:As[1])*bo-Is*oo;gu>0&&gu>$o&&($o=gu)}else{const Ys=Br[xs.fontStack];if(!Ys)continue;Ys[Ko]&&(Fo=Ys[Ko]);const As=Vr[xs.fontStack];if(!As)continue;const gu=As.glyphs[Ko];if(!gu)continue;if(fs=gu.metrics,ms=Ko!==8203?Is:0,Wn){const iy=As.ascender!==void 0?Math.abs(As.ascender):0,j_=As.descender!==void 0?Math.abs(As.descender):0,D_=(iy+j_)*bo;Zo<D_&&(Zo=D_,Qo=(iy-j_)/2*bo),Ms=-iy*bo}else Ms=dw+(oo-bo)*Is}Rs?(_r.verticalizable=!0,Bo.push({glyph:Ko,imageName:Ks,x:zn,y:Mn+Ms,vertical:Rs,scale:bo,localGlyph:fs.localGlyph,fontStack:xs.fontStack,sectionIndex:ps,metrics:fs,rect:Fo}),zn+=ms*bo+Cn):(Bo.push({glyph:Ko,imageName:Ks,x:zn,y:Mn+Ms,vertical:Rs,scale:bo,localGlyph:fs.localGlyph,fontStack:xs.fontStack,sectionIndex:ps,metrics:fs,rect:Fo}),zn+=fs.advance*bo+Cn)}Bo.length!==0&&(_i=Math.max(zn-Cn,_i),Wn?yw(Bo,Rn,$o,Qo,Wr*oo/2):yw(Bo,Rn,$o,0,Wr/2)),zn=0;const ds=Wr*oo+$o;No.lineOffset=Math.max($o,Lo),Mn+=ds,++eo}var xo;const to=Mn,{horizontalAlign:Xn,verticalAlign:Uo}=g0(pn);(function(io,oo,Lo,No,Bo,$o){const Zo=(oo-Lo)*Bo,Qo=-$o*No;for(const ds of io)for(const Oo of ds.positionedGlyphs)Oo.x+=Zo,Oo.y+=Qo})(_r.positionedLines,Rn,Xn,Uo,_i,to),_r.top+=-Uo*to,_r.bottom=_r.top+to,_r.left+=-Xn*_i,_r.right=_r.left+_i,_r.hasBaseline=Wn}(xr,et,it,ct,rr,xt,bt,St,jt,Ct,Lt,Ft),!function(_r){for(const Vr of _r)if(Vr.positionedGlyphs.length!==0)return!1;return!0}(mr)&&xr}const qx={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},nS={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function pw(tt,et,it,ct,dt,gt){if(et.imageName){const xt=ct[et.imageName];return xt?xt.displaySize[0]*et.scale*Is/gt+dt:0}{const xt=it[et.fontStack],bt=xt&&xt.glyphs[tt];return bt?bt.metrics.advance*et.scale+dt:0}}function fw(tt,et,it,ct){const dt=Math.pow(tt-et,2);return ct?tt<et?dt/2:2*dt:dt+Math.abs(it)*it}function iS(tt,et,it){let ct=0;return tt===10&&(ct-=1e4),it&&(ct+=150),tt!==40&&tt!==65288||(ct+=50),et!==41&&et!==65289||(ct+=50),ct}function mw(tt,et,it,ct,dt,gt){let xt=null,bt=fw(et,it,dt,gt);for(const St of ct){const Ct=fw(et-St.x,it,dt,gt)+St.badness;Ct<=bt&&(xt=St,bt=Ct)}return{index:tt,x:et,priorBreak:xt,badness:bt}}function gw(tt){return tt?gw(tt.priorBreak).concat(tt.index):[]}function g0(tt){let et=.5,it=.5;switch(tt){case"right":case"top-right":case"bottom-right":et=1;break;case"left":case"top-left":case"bottom-left":et=0}switch(tt){case"bottom":case"bottom-right":case"bottom-left":it=1;break;case"top":case"top-right":case"top-left":it=0}return{horizontalAlign:et,verticalAlign:it}}function yw(tt,et,it,ct,dt){if(!(et||it||ct||dt))return;const gt=tt.length-1,xt=tt[gt],bt=(xt.x+xt.metrics.advance*xt.scale)*et;for(let St=0;St<=gt;St++)tt[St].x-=bt,tt[St].y+=it+ct+dt}function oS(tt,et,it){const{horizontalAlign:ct,verticalAlign:dt}=g0(it),gt=et[0]-tt.displaySize[0]*ct,xt=et[1]-tt.displaySize[1]*dt;return{image:tt,top:xt,bottom:xt+tt.displaySize[1],left:gt,right:gt+tt.displaySize[0]}}function _w(tt,et,it,ct,dt,gt){const xt=tt.image;let bt;if(xt.content){const rr=xt.content,cr=xt.pixelRatio||1;bt=[rr[0]/cr,rr[1]/cr,xt.displaySize[0]-rr[2]/cr,xt.displaySize[1]-rr[3]/cr]}const St=et.left*gt,Ct=et.right*gt;let Pt,jt,Lt,Bt;it==="width"||it==="both"?(Bt=dt[0]+St-ct[3],jt=dt[0]+Ct+ct[1]):(Bt=dt[0]+(St+Ct-xt.displaySize[0])/2,jt=Bt+xt.displaySize[0]);const Ft=et.top*gt,Wt=et.bottom*gt;return it==="height"||it==="both"?(Pt=dt[1]+Ft-ct[0],Lt=dt[1]+Wt+ct[2]):(Pt=dt[1]+(Ft+Wt-xt.displaySize[1])/2,Lt=Pt+xt.displaySize[1]),{image:xt,top:Pt,right:jt,bottom:Lt,left:Bt,collisionPadding:bt}}class Hu extends Mr{constructor(et,it,ct,dt,gt){super(et,it),this.angle=dt,this.z=ct,gt!==void 0&&(this.segment=gt)}clone(){return new Hu(this.x,this.y,this.z,this.angle,this.segment)}}function xw(tt,et,it,ct,dt){if(et.segment===void 0)return!0;let gt=et,xt=et.segment+1,bt=0;for(;bt>-it/2;){if(xt--,xt<0)return!1;bt-=tt[xt].dist(gt),gt=tt[xt]}bt+=tt[xt].dist(tt[xt+1]),xt++;const St=[];let Ct=0;for(;bt<it/2;){const Pt=tt[xt],jt=tt[xt+1];if(!jt)return!1;let Lt=tt[xt-1].angleTo(Pt)-Pt.angleTo(jt);for(Lt=Math.abs((Lt+3*Math.PI)%(2*Math.PI)-Math.PI),St.push({distance:bt,angleDelta:Lt}),Ct+=Lt;bt-St[0].distance>ct;)Ct-=St.shift().angleDelta;if(Ct>dt)return!1;xt++,bt+=Pt.dist(jt)}return!0}function vw(tt){let et=0;for(let it=0;it<tt.length-1;it++)et+=tt[it].dist(tt[it+1]);return et}function ww(tt,et,it){return tt?.6*et*it:0}function bw(tt,et){return Math.max(tt?tt.right-tt.left:0,et?et.right-et.left:0)}function sS(tt,et,it,ct,dt,gt){const xt=ww(it,dt,gt),bt=bw(it,ct)*gt;let St=0;const Ct=vw(tt)/2;for(let Pt=0;Pt<tt.length-1;Pt++){const jt=tt[Pt],Lt=tt[Pt+1],Bt=jt.dist(Lt);if(St+Bt>Ct){const Ft=(Ct-St)/Bt,Wt=yo(jt.x,Lt.x,Ft),rr=yo(jt.y,Lt.y,Ft),cr=new Hu(Wt,rr,0,Lt.angleTo(jt),Pt);return!xt||xw(tt,cr,bt,xt,et)?cr:void 0}St+=Bt}}function aS(tt,et,it,ct,dt,gt,xt,bt,St){const Ct=ww(ct,gt,xt),Pt=bw(ct,dt),jt=Pt*xt,Lt=tt[0].x===0||tt[0].x===St||tt[0].y===0||tt[0].y===St;return et-jt<et/4&&(et=jt+et/4),Ew(tt,Lt?et/2*bt%et:(Pt/2+2*gt)*xt*bt%et,et,Ct,it,jt,Lt,!1,St)}function Ew(tt,et,it,ct,dt,gt,xt,bt,St){const Ct=gt/2,Pt=vw(tt);let jt=0,Lt=et-it,Bt=[];for(let Ft=0;Ft<tt.length-1;Ft++){const Wt=tt[Ft],rr=tt[Ft+1],cr=Wt.dist(rr),yr=rr.angleTo(Wt);for(;Lt+it<jt+cr;){Lt+=it;const ur=(Lt-jt)/cr,mr=yo(Wt.x,rr.x,ur),xr=yo(Wt.y,rr.y,ur);if(mr>=0&&mr<St&&xr>=0&&xr<St&&Lt-Ct>=0&&Lt+Ct<=Pt){const _r=new Hu(mr,xr,0,yr,Ft);_r._round(),ct&&!xw(tt,_r,gt,ct,dt)||Bt.push(_r)}}jt+=cr}return bt||Bt.length||xt||(Bt=Ew(tt,jt/2,it,ct,dt,gt,xt,!0,St)),Bt}function Sw(tt,et,it,ct,dt){const gt=[];for(let xt=0;xt<tt.length;xt++){const bt=tt[xt];let St;for(let Ct=0;Ct<bt.length-1;Ct++){let Pt=bt[Ct],jt=bt[Ct+1];Pt.x<et&&jt.x<et||(Pt.x<et?Pt=new Mr(et,Pt.y+(et-Pt.x)/(jt.x-Pt.x)*(jt.y-Pt.y))._round():jt.x<et&&(jt=new Mr(et,Pt.y+(et-Pt.x)/(jt.x-Pt.x)*(jt.y-Pt.y))._round()),Pt.y<it&&jt.y<it||(Pt.y<it?Pt=new Mr(Pt.x+(it-Pt.y)/(jt.y-Pt.y)*(jt.x-Pt.x),it)._round():jt.y<it&&(jt=new Mr(Pt.x+(it-Pt.y)/(jt.y-Pt.y)*(jt.x-Pt.x),it)._round()),Pt.x>=ct&&jt.x>=ct||(Pt.x>=ct?Pt=new Mr(ct,Pt.y+(ct-Pt.x)/(jt.x-Pt.x)*(jt.y-Pt.y))._round():jt.x>=ct&&(jt=new Mr(ct,Pt.y+(ct-Pt.x)/(jt.x-Pt.x)*(jt.y-Pt.y))._round()),Pt.y>=dt&&jt.y>=dt||(Pt.y>=dt?Pt=new Mr(Pt.x+(dt-Pt.y)/(jt.y-Pt.y)*(jt.x-Pt.x),dt)._round():jt.y>=dt&&(jt=new Mr(Pt.x+(dt-Pt.y)/(jt.y-Pt.y)*(jt.x-Pt.x),dt)._round()),St&&Pt.equals(St[St.length-1])||(St=[Pt],gt.push(St)),St.push(jt)))))}}return gt}$n(Hu,"Anchor");const S_=1e20;function Tw(tt,et,it,ct,dt,gt,xt,bt,St){for(let Ct=et;Ct<et+ct;Ct++)Cw(tt,it*gt+Ct,gt,dt,xt,bt,St);for(let Ct=it;Ct<it+dt;Ct++)Cw(tt,Ct*gt+et,1,ct,xt,bt,St)}function Cw(tt,et,it,ct,dt,gt,xt){gt[0]=0,xt[0]=-S_,xt[1]=S_,dt[0]=tt[et];for(let bt=1,St=0,Ct=0;bt<ct;bt++){dt[bt]=tt[et+bt*it];const Pt=bt*bt;do{const jt=gt[St];Ct=(dt[bt]-dt[jt]+Pt-jt*jt)/(bt-jt)/2}while(Ct<=xt[St]&&--St>-1);St++,gt[St]=bt,xt[St]=Ct,xt[St+1]=S_}for(let bt=0,St=0;bt<ct;bt++){for(;xt[St+1]<bt;)St++;const Ct=gt[St],Pt=bt-Ct;tt[et+bt*it]=dt[Ct]+Pt*Pt}}const fu=2,y0={none:0,ideographs:1,all:2};class Jm{constructor(et,it,ct){this.requestManager=et,this.localGlyphMode=it,this.localFontFamily=ct,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(et){this.url=et}getGlyphs(et,it){const ct=[];for(const dt in et)for(const gt of et[dt])ct.push({stack:dt,id:gt});sn(ct,({stack:dt,id:gt},xt)=>{let bt=this.entries[dt];bt||(bt=this.entries[dt]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let St=bt.glyphs[gt];if(St!==void 0)return void xt(null,{stack:dt,id:gt,glyph:St});if(St=this._tinySDF(bt,dt,gt),St)return bt.glyphs[gt]=St,void xt(null,{stack:dt,id:gt,glyph:St});const Ct=Math.floor(gt/256);if(256*Ct>65535)return void xt(new Error("glyphs > 65535 not supported"));if(bt.ranges[Ct])return void xt(null,{stack:dt,id:gt,glyph:St});let Pt=bt.requests[Ct];Pt||(Pt=bt.requests[Ct]=[],Jm.loadGlyphRange(dt,Ct,this.url,this.requestManager,(jt,Lt)=>{if(Lt){bt.ascender=Lt.ascender,bt.descender=Lt.descender;for(const Bt in Lt.glyphs)this._doesCharSupportLocalGlyph(+Bt)||(bt.glyphs[+Bt]=Lt.glyphs[+Bt]);bt.ranges[Ct]=!0}for(const Bt of Pt)Bt(jt,Lt);delete bt.requests[Ct]})),Pt.push((jt,Lt)=>{jt?xt(jt):Lt&&xt(null,{stack:dt,id:gt,glyph:Lt.glyphs[gt]||null})})},(dt,gt)=>{if(dt)it(dt);else if(gt){const xt={};for(const{stack:bt,id:St,glyph:Ct}of gt)xt[bt]===void 0&&(xt[bt]={}),xt[bt].glyphs===void 0&&(xt[bt].glyphs={}),xt[bt].glyphs[St]=Ct&&{id:Ct.id,bitmap:Ct.bitmap.clone(),metrics:Ct.metrics},xt[bt].ascender=this.entries[bt].ascender,xt[bt].descender=this.entries[bt].descender;it(null,xt)}})}_doesCharSupportLocalGlyph(et){return this.localGlyphMode!==y0.none&&(this.localGlyphMode===y0.all?!!this.localFontFamily:!!this.localFontFamily&&(jn["CJK Unified Ideographs"](et)||jn["Hangul Syllables"](et)||jn.Hiragana(et)||jn.Katakana(et)||jn["CJK Symbols and Punctuation"](et)))}_tinySDF(et,it,ct){const dt=this.localFontFamily;if(!dt||!this._doesCharSupportLocalGlyph(ct))return;let gt=et.tinySDF;if(!gt){let Wt="400";/bold/i.test(it)?Wt="900":/medium/i.test(it)?Wt="500":/light/i.test(it)&&(Wt="200"),gt=et.tinySDF=new Jm.TinySDF({fontFamily:dt,fontWeight:Wt,fontSize:24*fu,buffer:3*fu,radius:8*fu}),gt.fontWeight=Wt}if(this.localGlyphs[gt.fontWeight][ct])return this.localGlyphs[gt.fontWeight][ct];const xt=String.fromCharCode(ct),{data:bt,width:St,height:Ct,glyphWidth:Pt,glyphHeight:jt,glyphLeft:Lt,glyphTop:Bt,glyphAdvance:Ft}=gt.draw(xt);return this.localGlyphs[gt.fontWeight][ct]={id:ct,bitmap:new Vu({width:St,height:Ct},bt),metrics:{width:Pt/fu,height:jt/fu,left:Lt/fu,top:Bt/fu-27,advance:Ft/fu,localGlyph:!0}}}}Jm.loadGlyphRange=function(tt,et,it,ct,dt){const gt=256*et,xt=gt+255,bt=ct.transformRequest(ct.normalizeGlyphsURL(it).replace("{fontstack}",tt).replace("{range}",`${gt}-${xt}`),Eo.Glyphs);Wu(bt,(St,Ct)=>{if(St)dt(St);else if(Ct){const Pt={},jt=function(Lt){return new Wx(Lt).readFields(eS,{})}(Ct);for(const Lt of jt.glyphs)Pt[Lt.id]=Lt;dt(null,{glyphs:Pt,ascender:jt.ascender,descender:jt.descender})}})},Jm.TinySDF=class{constructor({fontSize:tt=24,buffer:et=3,radius:it=8,cutoff:ct=.25,fontFamily:dt="sans-serif",fontWeight:gt="normal",fontStyle:xt="normal"}={}){this.buffer=et,this.cutoff=ct,this.radius=it;const bt=this.size=tt+4*et,St=this._createCanvas(bt),Ct=this.ctx=St.getContext("2d",{willReadFrequently:!0});Ct.font=`${xt} ${gt} ${tt}px ${dt}`,Ct.textBaseline="alphabetic",Ct.textAlign="left",Ct.fillStyle="black",this.gridOuter=new Float64Array(bt*bt),this.gridInner=new Float64Array(bt*bt),this.f=new Float64Array(bt),this.z=new Float64Array(bt+1),this.v=new Uint16Array(bt)}_createCanvas(tt){const et=document.createElement("canvas");return et.width=et.height=tt,et}draw(tt){const{width:et,actualBoundingBoxAscent:it,actualBoundingBoxDescent:ct,actualBoundingBoxLeft:dt,actualBoundingBoxRight:gt}=this.ctx.measureText(tt),xt=Math.ceil(it),bt=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(gt-dt))),St=Math.min(this.size-this.buffer,xt+Math.ceil(ct)),Ct=bt+2*this.buffer,Pt=St+2*this.buffer,jt=Math.max(Ct*Pt,0),Lt=new Uint8ClampedArray(jt),Bt={data:Lt,width:Ct,height:Pt,glyphWidth:bt,glyphHeight:St,glyphTop:xt,glyphLeft:0,glyphAdvance:et};if(bt===0||St===0)return Bt;const{ctx:Ft,buffer:Wt,gridInner:rr,gridOuter:cr}=this;Ft.clearRect(Wt,Wt,bt,St),Ft.fillText(tt,Wt,Wt+xt);const yr=Ft.getImageData(Wt,Wt,bt,St);cr.fill(S_,0,jt),rr.fill(0,0,jt);for(let ur=0;ur<St;ur++)for(let mr=0;mr<bt;mr++){const xr=yr.data[4*(ur*bt+mr)+3]/255;if(xr===0)continue;const _r=(ur+Wt)*Ct+mr+Wt;if(xr===1)cr[_r]=0,rr[_r]=S_;else{const Vr=.5-xr;cr[_r]=Vr>0?Vr*Vr:0,rr[_r]=Vr<0?Vr*Vr:0}}Tw(cr,0,0,Ct,Pt,Ct,this.f,this.v,this.z),Tw(rr,Wt,Wt,bt,St,Ct,this.f,this.v,this.z);for(let ur=0;ur<jt;ur++){const mr=Math.sqrt(cr[ur])-Math.sqrt(rr[ur]);Lt[ur]=Math.round(255-255*(mr/this.radius+this.cutoff))}return Bt}};const _g=_a;function Rw(tt,et,it,ct){const dt=[],gt=tt.image,xt=gt.pixelRatio,bt=gt.paddedRect.w-2*_g,St=gt.paddedRect.h-2*_g,Ct=tt.right-tt.left,Pt=tt.bottom-tt.top,jt=gt.stretchX||[[0,bt]],Lt=gt.stretchY||[[0,St]],Bt=(Wr,pn)=>Wr+pn[1]-pn[0],Ft=jt.reduce(Bt,0),Wt=Lt.reduce(Bt,0),rr=bt-Ft,cr=St-Wt;let yr=0,ur=Ft,mr=0,xr=Wt,_r=0,Vr=rr,Br=0,Qr=cr;if(gt.content&&ct){const Wr=gt.content;yr=Zx(jt,0,Wr[0]),mr=Zx(Lt,0,Wr[1]),ur=Zx(jt,Wr[0],Wr[2]),xr=Zx(Lt,Wr[1],Wr[3]),_r=Wr[0]-yr,Br=Wr[1]-mr,Vr=Wr[2]-Wr[0]-ur,Qr=Wr[3]-Wr[1]-xr}const bn=(Wr,pn,mn,_n)=>{const Cn=Xx(Wr.stretch-yr,ur,Ct,tt.left),Kr=Kx(Wr.fixed-_r,Vr,Wr.stretch,Ft),In=Xx(pn.stretch-mr,xr,Pt,tt.top),zn=Kx(pn.fixed-Br,Qr,pn.stretch,Wt),Mn=Xx(mn.stretch-yr,ur,Ct,tt.left),_i=Kx(mn.fixed-_r,Vr,mn.stretch,Ft),Rn=Xx(_n.stretch-mr,xr,Pt,tt.top),Wn=Kx(_n.fixed-Br,Qr,_n.stretch,Wt),eo=new Mr(Cn,In),xo=new Mr(Mn,In),to=new Mr(Mn,Rn),Xn=new Mr(Cn,Rn),Uo=new Mr(Kr/xt,zn/xt),io=new Mr(_i/xt,Wn/xt),oo=et*Math.PI/180;if(oo){const Bo=Math.sin(oo),$o=Math.cos(oo),Zo=[$o,-Bo,Bo,$o];eo._matMult(Zo),xo._matMult(Zo),Xn._matMult(Zo),to._matMult(Zo)}const Lo=Wr.stretch+Wr.fixed,No=pn.stretch+pn.fixed;return{tl:eo,tr:xo,bl:Xn,br:to,tex:{x:gt.paddedRect.x+_g+Lo,y:gt.paddedRect.y+_g+No,w:mn.stretch+mn.fixed-Lo,h:_n.stretch+_n.fixed-No},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Uo,pixelOffsetBR:io,minFontScaleX:Vr/xt/Ct,minFontScaleY:Qr/xt/Pt,isSDF:it}};if(ct&&(gt.stretchX||gt.stretchY)){const Wr=Aw(jt,rr,Ft),pn=Aw(Lt,cr,Wt);for(let mn=0;mn<Wr.length-1;mn++){const _n=Wr[mn],Cn=Wr[mn+1];for(let Kr=0;Kr<pn.length-1;Kr++)dt.push(bn(_n,pn[Kr],Cn,pn[Kr+1]))}}else dt.push(bn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:bt+1},{fixed:0,stretch:St+1}));return dt}function Zx(tt,et,it){let ct=0;for(const dt of tt)ct+=Math.max(et,Math.min(it,dt[1]))-Math.max(et,Math.min(it,dt[0]));return ct}function Aw(tt,et,it){const ct=[{fixed:-_g,stretch:0}];for(const[dt,gt]of tt){const xt=ct[ct.length-1];ct.push({fixed:dt-xt.stretch,stretch:xt.stretch}),ct.push({fixed:dt-xt.stretch,stretch:xt.stretch+(gt-dt)})}return ct.push({fixed:et+_g,stretch:it}),ct}function Xx(tt,et,it,ct){return tt/et*it+ct}function Kx(tt,et,it,ct){return tt-et*it/ct}function lS(tt,et,it,ct){const dt=et+tt.positionedLines[ct].lineOffset;return ct===0?it+dt/2:it+(dt+(et+tt.positionedLines[ct-1].lineOffset))/2}class cS{constructor(et=[],it=uS){if(this.data=et,this.length=this.data.length,this.compare=it,this.length>0)for(let ct=(this.length>>1)-1;ct>=0;ct--)this._down(ct)}push(et){this.data.push(et),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const et=this.data[0],it=this.data.pop();return this.length--,this.length>0&&(this.data[0]=it,this._down(0)),et}peek(){return this.data[0]}_up(et){const{data:it,compare:ct}=this,dt=it[et];for(;et>0;){const gt=et-1>>1,xt=it[gt];if(ct(dt,xt)>=0)break;it[et]=xt,et=gt}it[et]=dt}_down(et){const{data:it,compare:ct}=this,dt=this.length>>1,gt=it[et];for(;et<dt;){let xt=1+(et<<1),bt=it[xt];const St=xt+1;if(St<this.length&&ct(it[St],bt)<0&&(xt=St,bt=it[St]),ct(bt,gt)>=0)break;it[et]=bt,et=xt}it[et]=gt}}function uS(tt,et){return tt<et?-1:tt>et?1:0}function hS(tt,et=1,it=!1){let ct=1/0,dt=1/0,gt=-1/0,xt=-1/0;const bt=tt[0];for(let Bt=0;Bt<bt.length;Bt++){const Ft=bt[Bt];(!Bt||Ft.x<ct)&&(ct=Ft.x),(!Bt||Ft.y<dt)&&(dt=Ft.y),(!Bt||Ft.x>gt)&&(gt=Ft.x),(!Bt||Ft.y>xt)&&(xt=Ft.y)}const St=Math.min(gt-ct,xt-dt);let Ct=St/2;const Pt=new cS([],dS);if(St===0)return new Mr(ct,dt);for(let Bt=ct;Bt<gt;Bt+=St)for(let Ft=dt;Ft<xt;Ft+=St)Pt.push(new ey(Bt+Ct,Ft+Ct,Ct,tt));let jt=function(Bt){let Ft=0,Wt=0,rr=0;const cr=Bt[0];for(let yr=0,ur=cr.length,mr=ur-1;yr<ur;mr=yr++){const xr=cr[yr],_r=cr[mr],Vr=xr.x*_r.y-_r.x*xr.y;Wt+=(xr.x+_r.x)*Vr,rr+=(xr.y+_r.y)*Vr,Ft+=3*Vr}return new ey(Wt/Ft,rr/Ft,0,Bt)}(tt),Lt=Pt.length;for(;Pt.length;){const Bt=Pt.pop();(Bt.d>jt.d||!jt.d)&&(jt=Bt,it&&console.log("found best %d after %d probes",Math.round(1e4*Bt.d)/1e4,Lt)),Bt.max-jt.d<=et||(Ct=Bt.h/2,Pt.push(new ey(Bt.p.x-Ct,Bt.p.y-Ct,Ct,tt)),Pt.push(new ey(Bt.p.x+Ct,Bt.p.y-Ct,Ct,tt)),Pt.push(new ey(Bt.p.x-Ct,Bt.p.y+Ct,Ct,tt)),Pt.push(new ey(Bt.p.x+Ct,Bt.p.y+Ct,Ct,tt)),Lt+=4)}return it&&(console.log(`num probes: ${Lt}`),console.log(`best distance: ${jt.d}`)),jt.p}function dS(tt,et){return et.max-tt.max}class ey{constructor(et,it,ct,dt){this.p=new Mr(et,it),this.h=ct,this.d=function(gt,xt){let bt=!1,St=1/0;for(let Ct=0;Ct<xt.length;Ct++){const Pt=xt[Ct];for(let jt=0,Lt=Pt.length,Bt=Lt-1;jt<Lt;Bt=jt++){const Ft=Pt[jt],Wt=Pt[Bt];Ft.y>gt.y!=Wt.y>gt.y&&gt.x<(Wt.x-Ft.x)*(gt.y-Ft.y)/(Wt.y-Ft.y)+Ft.x&&(bt=!bt),St=Math.min(St,E1(gt,Ft,Wt))}}return(bt?1:-1)*Math.sqrt(St)}(this.p,dt),this.max=this.d+this.h*Math.SQRT2}}const ty=7,_0=Number.POSITIVE_INFINITY,pS=Math.sqrt(2);function kw(tt,[et,it]){let ct=0,dt=0;if(it===_0){et<0&&(et=0);const gt=et/pS;switch(tt){case"top-right":case"top-left":dt=gt-ty;break;case"bottom-right":case"bottom-left":dt=-gt+ty;break;case"bottom":dt=-et+ty;break;case"top":dt=et-ty}switch(tt){case"top-right":case"bottom-right":ct=-gt;break;case"top-left":case"bottom-left":ct=gt;break;case"left":ct=et;break;case"right":ct=-et}}else{switch(et=Math.abs(et),it=Math.abs(it),tt){case"top-right":case"top-left":case"top":dt=it-ty;break;case"bottom-right":case"bottom-left":case"bottom":dt=-it+ty}switch(tt){case"top-right":case"bottom-right":case"right":ct=-et;break;case"top-left":case"bottom-left":case"left":ct=et}}return[ct,dt]}function fS(tt,et,it,ct,dt,gt,xt,bt,St,Ct){tt.createArrays(),tt.tilePixelRatio=qn/(512*tt.overscaling),tt.compareText={},tt.iconsNeedLinear=!1;const Pt=tt.layers[0].layout,jt=tt.layers[0]._unevaluatedLayout._values,Lt={};if(tt.textSizeData.kind==="composite"){const{minZoom:Wt,maxZoom:rr}=tt.textSizeData;Lt.compositeTextSizes=[jt["text-size"].possiblyEvaluate(new It(Wt),bt),jt["text-size"].possiblyEvaluate(new It(rr),bt)]}if(tt.iconSizeData.kind==="composite"){const{minZoom:Wt,maxZoom:rr}=tt.iconSizeData;Lt.compositeIconSizes=[jt["icon-size"].possiblyEvaluate(new It(Wt),bt),jt["icon-size"].possiblyEvaluate(new It(rr),bt)]}Lt.layoutTextSize=jt["text-size"].possiblyEvaluate(new It(St+1),bt),Lt.layoutIconSize=jt["icon-size"].possiblyEvaluate(new It(St+1),bt),Lt.textMaxSize=jt["text-size"].possiblyEvaluate(new It(18),bt);const Bt=Pt.get("text-rotation-alignment")==="map"&&Pt.get("symbol-placement")!=="point",Ft=Pt.get("text-size");for(const Wt of tt.features){const rr=Pt.get("text-font").evaluate(Wt,{},bt).join(","),cr=Ft.evaluate(Wt,{},bt),yr=Lt.layoutTextSize.evaluate(Wt,{},bt),ur=(Lt.layoutIconSize.evaluate(Wt,{},bt),{horizontal:{},vertical:void 0}),mr=Wt.text;let xr,_r=[0,0];if(mr){const Qr=mr.toString(),bn=Pt.get("text-letter-spacing").evaluate(Wt,{},bt)*Is,Wr=Pt.get("text-line-height").evaluate(Wt,{},bt)*Is,pn=Rv(Qr)?bn:0,mn=Pt.get("text-anchor").evaluate(Wt,{},bt),_n=Pt.get("text-variable-anchor");if(!_n){const Mn=Pt.get("text-radial-offset").evaluate(Wt,{},bt);_r=Mn?kw(mn,[Mn*Is,_0]):Pt.get("text-offset").evaluate(Wt,{},bt).map(_i=>_i*Is)}let Cn=Bt?"center":Pt.get("text-justify").evaluate(Wt,{},bt);const Kr=Pt.get("symbol-placement")==="point",In=Kr?Pt.get("text-max-width").evaluate(Wt,{},bt)*Is:1/0,zn=Mn=>{tt.allowVerticalPlacement&&Xy(Qr)&&(ur.vertical=m0(mr,et,it,dt,rr,In,Wr,mn,Mn,pn,_r,Ol.vertical,!0,yr,cr))};if(!Bt&&_n){const Mn=Cn==="auto"?_n.map(Rn=>x0(Rn)):[Cn];let _i=!1;for(let Rn=0;Rn<Mn.length;Rn++){const Wn=Mn[Rn];if(!ur.horizontal[Wn])if(_i)ur.horizontal[Wn]=ur.horizontal[0];else{const eo=m0(mr,et,it,dt,rr,In,Wr,"center",Wn,pn,_r,Ol.horizontal,!1,yr,cr);eo&&(ur.horizontal[Wn]=eo,_i=eo.positionedLines.length===1)}}zn("left")}else{if(Cn==="auto"&&(Cn=x0(mn)),Kr||Pt.get("text-writing-mode").indexOf("horizontal")>=0||!Xy(Qr)){const Mn=m0(mr,et,it,dt,rr,In,Wr,mn,Cn,pn,_r,Ol.horizontal,!1,yr,cr);Mn&&(ur.horizontal[Cn]=Mn)}zn(Kr?"left":Cn)}}let Vr=!1;if(Wt.icon&&Wt.icon.name){const Qr=ct[Wt.icon.name];Qr&&(xr=oS(dt[Wt.icon.name],Pt.get("icon-offset").evaluate(Wt,{},bt),Pt.get("icon-anchor").evaluate(Wt,{},bt)),Vr=Qr.sdf,tt.sdfIcons===void 0?tt.sdfIcons=Qr.sdf:tt.sdfIcons!==Qr.sdf&&Hn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Qr.pixelRatio!==tt.pixelRatio||Pt.get("icon-rotate").constantOr(1)!==0)&&(tt.iconsNeedLinear=!0))}const Br=Iw(ur.horizontal)||ur.vertical;tt.iconsInText||(tt.iconsInText=!!Br&&Br.iconsInText),(Br||xr)&&mS(tt,Wt,ur,xr,ct,Lt,yr,0,_r,Vr,xt,bt,Ct)}gt&&tt.generateCollisionDebugBuffers(St,tt.collisionBoxArray)}function x0(tt){switch(tt){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function mS(tt,et,it,ct,dt,gt,xt,bt,St,Ct,Pt,jt,Lt){let Bt=gt.textMaxSize.evaluate(et,{},jt);Bt===void 0&&(Bt=xt);const Ft=tt.layers[0].layout,Wt=Ft.get("icon-offset").evaluate(et,{},jt),rr=Iw(it.horizontal)||it.vertical,cr=Lt.name==="globe",yr=Is,ur=xt/yr,mr=tt.tilePixelRatio*Bt/yr,xr=(mn=tt.overscaling,tt.zoom>18&&mn>2&&(mn>>=1),Math.max(qn/(512*mn),1)*Ft.get("symbol-spacing")),_r=Ft.get("text-padding")*tt.tilePixelRatio,Vr=Ft.get("icon-padding")*tt.tilePixelRatio,Br=Jr(Ft.get("text-max-angle")),Qr=Ft.get("text-rotation-alignment")==="map"&&Ft.get("symbol-placement")!=="point",bn=Ft.get("icon-rotation-alignment")==="map"&&Ft.get("symbol-placement")!=="point",Wr=Ft.get("symbol-placement"),pn=xr/2;var mn;const _n=Ft.get("icon-text-fit");let Cn;ct&&_n!=="none"&&(tt.allowVerticalPlacement&&it.vertical&&(Cn=_w(ct,it.vertical,_n,Ft.get("icon-text-fit-padding"),Wt,ur)),rr&&(ct=_w(ct,rr,_n,Ft.get("icon-text-fit-padding"),Wt,ur)));const Kr=(In,zn,Mn)=>{if(zn.x<0||zn.x>=qn||zn.y<0||zn.y>=qn)return;let _i=null;if(cr){const{x:Rn,y:Wn,z:eo}=Lt.projectTilePoint(zn.x,zn.y,Mn);_i={anchor:new Hu(Rn,Wn,eo,0,void 0),up:Lt.upVector(Mn,zn.x,zn.y)}}(function(Rn,Wn,eo,xo,to,Xn,Uo,io,oo,Lo,No,Bo,$o,Zo,Qo,ds,Oo,xs,ps,Ko,bo,fs,Fo,Ks,ms){const Ms=Rn.addToLineVertexArray(Wn,xo);let Rs,Ys,As,gu,iy,j_,D_,cE=0,uE=0,hE=0,dE=0,D0=-1,L0=-1;const Ru={};let pE=Pv("");const om=eo?eo.anchor:Wn;let $0=0,O0=0;if(oo._unevaluatedLayout.getValue("text-radial-offset")===void 0?[$0,O0]=oo.layout.get("text-offset").evaluate(bo,{},ms).map(Cl=>Cl*Is):($0=oo.layout.get("text-radial-offset").evaluate(bo,{},ms)*Is,O0=_0),Rn.allowVerticalPlacement&&to.vertical){const Cl=to.vertical;if(Qo)j_=v0(Cl),io&&(D_=v0(io));else{const Rl=oo.layout.get("text-rotate").evaluate(bo,{},ms)+90;As=Yx(Lo,om,Wn,No,Bo,$o,Cl,Zo,Rl,ds),io&&(gu=Yx(Lo,om,Wn,No,Bo,$o,io,xs,Rl))}}if(Xn){const Cl=oo.layout.get("icon-rotate").evaluate(bo,{},ms),Rl=oo.layout.get("icon-text-fit")!=="none",L_=Rw(Xn,Cl,Fo,Rl),N0=io?Rw(io,Cl,Fo,Rl):void 0;Ys=Yx(Lo,om,Wn,No,Bo,$o,Xn,xs,Cl),cE=4*L_.length;const fE=Rn.iconSizeData;let sm=null;fE.kind==="source"?(sm=[pu*oo.layout.get("icon-size").evaluate(bo,{},ms)],sm[0]>fp&&Hn(`${Rn.layerIds[0]}: Value for "icon-size" is >= ${T_}. Reduce your "icon-size".`)):fE.kind==="composite"&&(sm=[pu*fs.compositeIconSizes[0].evaluate(bo,{},ms),pu*fs.compositeIconSizes[1].evaluate(bo,{},ms)],(sm[0]>fp||sm[1]>fp)&&Hn(`${Rn.layerIds[0]}: Value for "icon-size" is >= ${T_}. Reduce your "icon-size".`)),Rn.addSymbols(Rn.icon,L_,sm,Ko,ps,bo,!1,eo,Wn,Ms.lineStartIndex,Ms.lineLength,-1,Ks,ms),D0=Rn.icon.placedSymbolArray.length-1,N0&&(uE=4*N0.length,Rn.addSymbols(Rn.icon,N0,sm,Ko,ps,bo,Ol.vertical,eo,Wn,Ms.lineStartIndex,Ms.lineLength,-1,Ks,ms),L0=Rn.icon.placedSymbolArray.length-1)}for(const Cl in to.horizontal){const Rl=to.horizontal[Cl];Rs||(pE=Pv(Rl.text),Qo?iy=v0(Rl):Rs=Yx(Lo,om,Wn,No,Bo,$o,Rl,Zo,oo.layout.get("text-rotate").evaluate(bo,{},ms),ds));const L_=Rl.positionedLines.length===1;if(hE+=Pw(Rn,eo,Wn,Rl,Uo,oo,Qo,bo,ds,Ms,to.vertical?Ol.horizontal:Ol.horizontalOnly,L_?Object.keys(to.horizontal):[Cl],Ru,D0,fs,Ks,ms),L_)break}to.vertical&&(dE+=Pw(Rn,eo,Wn,to.vertical,Uo,oo,Qo,bo,ds,Ms,Ol.vertical,["vertical"],Ru,L0,fs,Ks,ms));let vp=-1;const z0=(Cl,Rl)=>Cl?Math.max(Cl,Rl):Rl;vp=z0(iy,vp),vp=z0(j_,vp),vp=z0(D_,vp);const VS=vp>-1?1:0;Rn.glyphOffsetArray.length>=gp.MAX_GLYPHS&&Hn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),bo.sortKey!==void 0&&Rn.addToSortKeyRanges(Rn.symbolInstances.length,bo.sortKey),Rn.symbolInstances.emplaceBack(om.x,om.y,om.z,Wn.x,Wn.y,Ru.right>=0?Ru.right:-1,Ru.center>=0?Ru.center:-1,Ru.left>=0?Ru.left:-1,Ru.vertical>=0?Ru.vertical:-1,D0,L0,pE,Rs!==void 0?Rs:Rn.collisionBoxArray.length,Rs!==void 0?Rs+1:Rn.collisionBoxArray.length,As!==void 0?As:Rn.collisionBoxArray.length,As!==void 0?As+1:Rn.collisionBoxArray.length,Ys!==void 0?Ys:Rn.collisionBoxArray.length,Ys!==void 0?Ys+1:Rn.collisionBoxArray.length,gu||Rn.collisionBoxArray.length,gu?gu+1:Rn.collisionBoxArray.length,No,hE,dE,cE,uE,VS,0,$0,O0,vp)})(tt,zn,_i,In,it,ct,dt,Cn,tt.layers[0],tt.collisionBoxArray,et.index,et.sourceLayerIndex,tt.index,_r,Qr,St,0,Vr,bn,Wt,et,gt,Ct,Pt,jt)};if(Wr==="line")for(const In of Sw(et.geometry,0,0,qn,qn)){const zn=aS(In,xr,Br,it.vertical||rr,ct,yr,mr,tt.overscaling,qn);for(const Mn of zn)rr&&gS(tt,rr.text,pn,Mn)||Kr(In,Mn,jt)}else if(Wr==="line-center"){for(const In of et.geometry)if(In.length>1){const zn=sS(In,Br,it.vertical||rr,ct,yr,mr);zn&&Kr(In,zn,jt)}}else if(et.type==="Polygon")for(const In of s0(et.geometry,0)){const zn=hS(In,16);Kr(In[0],new Hu(zn.x,zn.y,0,0,void 0),jt)}else if(et.type==="LineString")for(const In of et.geometry)Kr(In,new Hu(In[0].x,In[0].y,0,0,void 0),jt);else if(et.type==="Point")for(const In of et.geometry)for(const zn of In)Kr([zn],new Hu(zn.x,zn.y,0,0,void 0),jt)}const T_=255,fp=T_*pu;function Pw(tt,et,it,ct,dt,gt,xt,bt,St,Ct,Pt,jt,Lt,Bt,Ft,Wt,rr){const cr=function(mr,xr,_r,Vr,Br,Qr,bn,Wr){const pn=[];if(xr.positionedLines.length===0)return pn;const mn=Vr.layout.get("text-rotate").evaluate(Qr,{})*Math.PI/180,_n=function(Mn){const _i=Mn[0],Rn=Mn[1],Wn=_i*Rn;return Wn>0?[_i,-Rn]:Wn<0?[-_i,Rn]:_i===0?[Rn,_i]:[Rn,-_i]}(_r);let Cn=Math.abs(xr.top-xr.bottom);for(const Mn of xr.positionedLines)Cn-=Mn.lineOffset;const Kr=xr.positionedLines.length,In=Cn/Kr;let zn=xr.top-_r[1];for(let Mn=0;Mn<Kr;++Mn){const _i=xr.positionedLines[Mn];zn=lS(xr,In,zn,Mn);for(const Rn of _i.positionedGlyphs){if(!Rn.rect)continue;const Wn=Rn.rect||{};let eo=uw+1,xo=!0,to=1,Xn=0;if(Rn.imageName){const Fo=bn[Rn.imageName];if(!Fo)continue;if(Fo.sdf){Hn("SDF images are not supported in formatted text and will be ignored.");continue}xo=!1,to=Fo.pixelRatio,eo=_a/to}const Uo=(Br||Wr)&&Rn.vertical,io=Rn.metrics.advance*Rn.scale/2,oo=Rn.metrics,Lo=Rn.rect;if(Lo===null)continue;Wr&&xr.verticalizable&&(Xn=Rn.imageName?io-Rn.metrics.width*Rn.scale/2:0);const No=Br?[Rn.x+io,Rn.y]:[0,0];let Bo=[0,0],$o=[0,0],Zo=!1;Br||(Uo?($o=[Rn.x+io+_n[0],Rn.y+_n[1]-Xn],Zo=!0):Bo=[Rn.x+io+_r[0],Rn.y+_r[1]-Xn]);const Qo=Lo.w*Rn.scale/(to*(Rn.localGlyph?fu:1)),ds=Lo.h*Rn.scale/(to*(Rn.localGlyph?fu:1));let Oo,xs,ps,Ko;if(Uo){const Fo=Rn.y-zn,Ks=new Mr(-io,io-Fo),ms=-Math.PI/2,Ms=new Mr(...$o);Oo=new Mr(-io+Bo[0],Bo[1]),Oo._rotateAround(ms,Ks)._add(Ms),Oo.x+=-Fo+io,Oo.y-=(oo.left-eo)*Rn.scale;const Rs=Rn.imageName?oo.advance*Rn.scale:Is*Rn.scale,Ys=String.fromCharCode(Rn.glyph);V2(Ys)?Oo.x+=(1-eo)*Rn.scale:G2(Ys)?Oo.x+=Rs-oo.height*Rn.scale+(-eo-1)*Rn.scale:Oo.x+=Rn.imageName||oo.width+2*eo===Lo.w&&oo.height+2*eo===Lo.h?(Rs-ds)/2:(Rs-(oo.height+2*eo)*Rn.scale)/2,xs=new Mr(Oo.x,Oo.y-Qo),ps=new Mr(Oo.x+ds,Oo.y),Ko=new Mr(Oo.x+ds,Oo.y-Qo)}else{const Fo=(oo.left-eo)*Rn.scale-io+Bo[0],Ks=(-oo.top-eo)*Rn.scale+Bo[1],ms=Fo+Qo,Ms=Ks+ds;Oo=new Mr(Fo,Ks),xs=new Mr(ms,Ks),ps=new Mr(Fo,Ms),Ko=new Mr(ms,Ms)}if(mn){let Fo;Fo=Br?new Mr(0,0):Zo?new Mr(_n[0],_n[1]):new Mr(_r[0],_r[1]),Oo._rotateAround(mn,Fo),xs._rotateAround(mn,Fo),ps._rotateAround(mn,Fo),Ko._rotateAround(mn,Fo)}const bo=new Mr(0,0),fs=new Mr(0,0);pn.push({tl:Oo,tr:xs,bl:ps,br:Ko,tex:Wn,writingMode:xr.writingMode,glyphOffset:No,sectionIndex:Rn.sectionIndex,isSDF:xo,pixelOffsetTL:bo,pixelOffsetBR:fs,minFontScaleX:0,minFontScaleY:0})}}return pn}(0,ct,St,gt,xt,bt,dt,tt.allowVerticalPlacement),yr=tt.textSizeData;let ur=null;yr.kind==="source"?(ur=[pu*gt.layout.get("text-size").evaluate(bt,{},rr)],ur[0]>fp&&Hn(`${tt.layerIds[0]}: Value for "text-size" is >= ${T_}. Reduce your "text-size".`)):yr.kind==="composite"&&(ur=[pu*Ft.compositeTextSizes[0].evaluate(bt,{},rr),pu*Ft.compositeTextSizes[1].evaluate(bt,{},rr)],(ur[0]>fp||ur[1]>fp)&&Hn(`${tt.layerIds[0]}: Value for "text-size" is >= ${T_}. Reduce your "text-size".`)),tt.addSymbols(tt.text,cr,ur,St,xt,bt,Pt,et,it,Ct.lineStartIndex,Ct.lineLength,Bt,Wt,rr);for(const mr of jt)Lt[mr]=tt.text.placedSymbolArray.length-1;return 4*cr.length}function Iw(tt){for(const et in tt)return tt[et];return null}function Yx(tt,et,it,ct,dt,gt,xt,bt,St,Ct){let Pt=xt.top,jt=xt.bottom,Lt=xt.left,Bt=xt.right;const Ft=xt.collisionPadding;if(Ft&&(Lt-=Ft[0],Pt-=Ft[1],Bt+=Ft[2],jt+=Ft[3]),St){const Wt=new Mr(Lt,Pt),rr=new Mr(Bt,Pt),cr=new Mr(Lt,jt),yr=new Mr(Bt,jt),ur=Jr(St);let mr=new Mr(0,0);Ct&&(mr=new Mr(Ct[0],Ct[1])),Wt._rotateAround(ur,mr),rr._rotateAround(ur,mr),cr._rotateAround(ur,mr),yr._rotateAround(ur,mr),Lt=Math.min(Wt.x,rr.x,cr.x,yr.x),Bt=Math.max(Wt.x,rr.x,cr.x,yr.x),Pt=Math.min(Wt.y,rr.y,cr.y,yr.y),jt=Math.max(Wt.y,rr.y,cr.y,yr.y)}return tt.emplaceBack(et.x,et.y,et.z,it.x,it.y,Lt,Pt,Bt,jt,bt,ct,dt,gt),tt.length-1}function v0(tt){tt.collisionPadding&&(tt.top-=tt.collisionPadding[1],tt.bottom+=tt.collisionPadding[3]);const et=tt.bottom-tt.top;return et>0?Math.max(10,et):null}function gS(tt,et,it,ct){const dt=tt.compareText;if(et in dt){const gt=dt[et];for(let xt=gt.length-1;xt>=0;xt--)if(ct.dist(gt[xt])<it)return!0}else dt[et]=[];return dt[et].push(ct),!1}function Mw(tt,et){const it=tt.fovAboveCenter,ct=tt.elevation?tt.elevation.getMinElevationBelowMSL()*et:0,dt=(tt._camera.position[2]*tt.worldSize-ct)/Math.cos(tt._pitch),gt=Math.sin(it)*dt/Math.sin(Math.max(Math.PI/2-tt._pitch-it,.01)),xt=Math.sin(tt._pitch)*gt+dt;return Math.min(1.01*xt,dt*(1/tt._horizonShift))}function nm(tt,et){if(!et.isReprojectedInTileSpace)return{scale:1<<tt.z,x:tt.x,y:tt.y,x2:tt.x+1,y2:tt.y+1,projection:et};const it=Math.pow(2,-tt.z),ct=tt.x*it,dt=(tt.x+1)*it,gt=tt.y*it,xt=(tt.y+1)*it,bt=$l(ct),St=$l(dt),Ct=Ns(gt),Pt=Ns(xt),jt=et.project(bt,Ct),Lt=et.project(St,Ct),Bt=et.project(St,Pt),Ft=et.project(bt,Pt);let Wt=Math.min(jt.x,Lt.x,Bt.x,Ft.x),rr=Math.min(jt.y,Lt.y,Bt.y,Ft.y),cr=Math.max(jt.x,Lt.x,Bt.x,Ft.x),yr=Math.max(jt.y,Lt.y,Bt.y,Ft.y);const ur=it/16;function mr(_r,Vr,Br,Qr,bn,Wr){const pn=(Br+bn)/2,mn=(Qr+Wr)/2,_n=et.project($l(pn),Ns(mn)),Cn=Math.max(0,Wt-_n.x,rr-_n.y,_n.x-cr,_n.y-yr);Wt=Math.min(Wt,_n.x),cr=Math.max(cr,_n.x),rr=Math.min(rr,_n.y),yr=Math.max(yr,_n.y),Cn>ur&&(mr(_r,_n,Br,Qr,pn,mn),mr(_n,Vr,pn,mn,bn,Wr))}mr(jt,Lt,ct,gt,dt,gt),mr(Lt,Bt,dt,gt,dt,xt),mr(Bt,Ft,dt,xt,ct,xt),mr(Ft,jt,ct,xt,ct,gt),Wt-=ur,rr-=ur,cr+=ur,yr+=ur;const xr=1/Math.max(cr-Wt,yr-rr);return{scale:xr,x:Wt*xr,y:rr*xr,x2:cr*xr,y2:yr*xr,projection:et}}const yS=uu(new Float32Array(16));class mp{constructor(et){this.spec=et,this.name=et.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(et,it){return{x:0,y:0,z:0}}unproject(et,it){return new Do(0,0)}projectTilePoint(et,it,ct){return{x:et,y:it,z:0}}locationPoint(et,it,ct=!0){return et._coordinatePoint(et.locationCoordinate(it),ct)}pixelsPerMeter(et,it){return du(1,et)*it}pixelSpaceConversion(et,it,ct){return 1}farthestPixelDistance(et){return Mw(et,et.pixelsPerMeter)}pointCoordinate(et,it,ct,dt){const gt=et.horizonLineFromTop(!1),xt=new Mr(it,Math.max(gt,ct));return et.rayIntersectionCoordinate(et.pointRayIntersection(xt,dt))}pointCoordinate3D(et,it,ct){const dt=new Mr(it,ct);if(et.elevation)return et.elevation.pointCoordinate(dt);{const gt=this.pointCoordinate(et,dt.x,dt.y,0);return[gt.x,gt.y,gt.z]}}isPointAboveHorizon(et,it){if(et.elevation)return!this.pointCoordinate3D(et,it.x,it.y);const ct=et.horizonLineFromTop();return it.y<ct}createInversionMatrix(et,it){return yS}createTileMatrix(et,it,ct){let dt,gt,xt;const bt=ct.canonical,St=uu(new Float64Array(16));if(this.isReprojectedInTileSpace){const Ct=nm(bt,this);dt=1,gt=Ct.x+ct.wrap*Ct.scale,xt=Ct.y,Yp(St,St,[dt/Ct.scale,dt/Ct.scale,et.pixelsPerMeter/it])}else dt=it/et.zoomScale(bt.z),gt=(bt.x+Math.pow(2,bt.z)*ct.wrap)*dt,xt=bt.y*dt;return r_(St,St,[gt,xt,0]),Yp(St,St,[dt/qn,dt/qn,1]),St}upVector(et,it,ct){return[0,0,1]}upVectorScale(et,it,ct){return{metersToTile:1}}}class _S extends mp{constructor(et){super(et),this.range=[4,7],this.center=et.center||[-96,37.5];const[it,ct]=this.parallels=et.parallels||[29.5,45.5],dt=Math.sin(Jr(it));this.n=(dt+Math.sin(Jr(ct)))/2,this.c=1+dt*(2*this.n-dt),this.r0=Math.sqrt(this.c)/this.n}project(et,it){const{n:ct,c:dt,r0:gt}=this,xt=Jr(et-this.center[0]),bt=Jr(it),St=Math.sqrt(dt-2*ct*Math.sin(bt))/ct;return{x:St*Math.sin(xt*ct),y:St*Math.cos(xt*ct)-gt,z:0}}unproject(et,it){const{n:ct,c:dt,r0:gt}=this,xt=gt+it;let bt=Math.atan2(et,Math.abs(xt))*Math.sign(xt);xt*ct<0&&(bt-=Math.PI*Math.sign(et)*Math.sign(xt));const St=Jr(this.center[0])*ct;bt=Or(bt,-Math.PI-St,Math.PI-St);const Ct=Pr(wr(bt/ct)+this.center[0],-180,180),Pt=Math.asin(Pr((dt-(et*et+xt*xt)*ct*ct)/(2*ct),-1,1)),jt=Pr(wr(Pt),-Bs,Bs);return new Do(Ct,jt)}}const C_=1.340264,R_=-.081106,A_=893e-6,k_=.003796,Qx=Math.sqrt(3)/2;class xS extends mp{project(et,it){it=it/180*Math.PI,et=et/180*Math.PI;const ct=Math.asin(Qx*Math.sin(it)),dt=ct*ct,gt=dt*dt*dt;return{x:.5*(et*Math.cos(ct)/(Qx*(C_+3*R_*dt+gt*(7*A_+9*k_*dt)))/Math.PI+.5),y:1-.5*(ct*(C_+R_*dt+gt*(A_+k_*dt))/Math.PI+1),z:0}}unproject(et,it){et=(2*et-.5)*Math.PI;let ct=it=(2*(1-it)-1)*Math.PI,dt=ct*ct,gt=dt*dt*dt;for(let Pt,jt,Lt,Bt=0;Bt<12&&(jt=ct*(C_+R_*dt+gt*(A_+k_*dt))-it,Lt=C_+3*R_*dt+gt*(7*A_+9*k_*dt),Pt=jt/Lt,ct=Pr(ct-Pt,-Math.PI/3,Math.PI/3),dt=ct*ct,gt=dt*dt*dt,!(Math.abs(Pt)<1e-12));++Bt);const xt=Qx*et*(C_+3*R_*dt+gt*(7*A_+9*k_*dt))/Math.cos(ct),bt=Math.asin(Math.sin(ct)/Qx),St=Pr(180*xt/Math.PI,-180,180),Ct=Pr(180*bt/Math.PI,-Bs,Bs);return new Do(St,Ct)}}class vS extends mp{constructor(et){super(et),this.wrap=!0,this.supportsWorldCopies=!0}project(et,it){return{x:.5+et/360,y:.5-it/360,z:0}}unproject(et,it){const ct=360*(et-.5),dt=Pr(360*(.5-it),-Bs,Bs);return new Do(ct,dt)}}const ry=Math.PI/2;function Jx(tt){return Math.tan((ry+tt)/2)}class wS extends mp{constructor(et){super(et),this.center=et.center||[0,30];const[it,ct]=this.parallels=et.parallels||[30,30];let dt=Jr(it),gt=Jr(ct);this.southernCenter=dt+gt<0,this.southernCenter&&(dt=-dt,gt=-gt);const xt=Math.cos(dt),bt=Jx(dt);this.n=dt===gt?Math.sin(dt):Math.log(xt/Math.cos(gt))/Math.log(Jx(gt)/bt),this.f=xt*Math.pow(Jx(dt),this.n)/this.n}project(et,it){it=Jr(it),this.southernCenter&&(it=-it),et=Jr(et-this.center[0]);const ct=1e-6,{n:dt,f:gt}=this;gt>0?it<-ry+ct&&(it=-ry+ct):it>ry-ct&&(it=ry-ct);const xt=gt/Math.pow(Jx(it),dt);let bt=xt*Math.sin(dt*et),St=gt-xt*Math.cos(dt*et);return bt=.5*(bt/Math.PI+.5),St=.5*(St/Math.PI+.5),{x:bt,y:this.southernCenter?St:1-St,z:0}}unproject(et,it){et=(2*et-.5)*Math.PI,this.southernCenter&&(it=1-it),it=(2*(1-it)-.5)*Math.PI;const{n:ct,f:dt}=this,gt=dt-it,xt=Math.sign(gt),bt=Math.sign(ct)*Math.sqrt(et*et+gt*gt);let St=Math.atan2(et,Math.abs(gt))*xt;gt*ct<0&&(St-=Math.PI*Math.sign(et)*xt);const Ct=Pr(wr(St/ct)+this.center[0],-180,180),Pt=Pr(wr(2*Math.atan(Math.pow(dt/bt,1/ct))-ry),-Bs,Bs);return new Do(Ct,this.southernCenter?-Pt:Pt)}}class jw extends mp{constructor(et){super(et),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(et,it){return{x:bu(et),y:Eu(it),z:0}}unproject(et,it){const ct=$l(et),dt=Ns(it);return new Do(ct,dt)}}const Dw=Jr(Bs);class bS extends mp{project(et,it){const ct=(it=Jr(it))*it,dt=ct*ct;return{x:.5*((et=Jr(et))*(.8707-.131979*ct+dt*(dt*(.003971*ct-.001529*dt)-.013791))/Math.PI+.5),y:1-.5*(it*(1.007226+ct*(.015085+dt*(.028874*ct-.044475-.005916*dt)))/Math.PI+1),z:0}}unproject(et,it){et=(2*et-.5)*Math.PI;let ct=it=(2*(1-it)-1)*Math.PI,dt=25,gt=0,xt=ct*ct;do{xt=ct*ct;const Ct=xt*xt;gt=(ct*(1.007226+xt*(.015085+Ct*(.028874*xt-.044475-.005916*Ct)))-it)/(1.007226+xt*(.045255+Ct*(.259866*xt-.311325-.005916*11*Ct))),ct=Pr(ct-gt,-Dw,Dw)}while(Math.abs(gt)>1e-6&&--dt>0);xt=ct*ct;const bt=Pr(wr(et/(.8707+xt*(xt*(xt*xt*xt*(.003971-.001529*xt)-.013791)-.131979))),-180,180),St=wr(ct);return new Do(bt,St)}}const Lw=Jr(Bs);class ES extends mp{project(et,it){it=Jr(it),et=Jr(et);const ct=Math.cos(it),dt=2/Math.PI,gt=Math.acos(ct*Math.cos(et/2)),xt=Math.sin(gt)/gt,bt=.5*(et*dt+2*ct*Math.sin(et/2)/xt)||0,St=.5*(it+Math.sin(it)/xt)||0;return{x:.5*(bt/Math.PI+.5),y:1-.5*(St/Math.PI+1),z:0}}unproject(et,it){let ct=et=(2*et-.5)*Math.PI,dt=it=(2*(1-it)-1)*Math.PI,gt=25;const xt=1e-6;let bt=0,St=0;do{const Ct=Math.cos(dt),Pt=Math.sin(dt),jt=2*Pt*Ct,Lt=Pt*Pt,Bt=Ct*Ct,Ft=Math.cos(ct/2),Wt=Math.sin(ct/2),rr=2*Ft*Wt,cr=Wt*Wt,yr=1-Bt*Ft*Ft,ur=yr?1/yr:0,mr=yr?Math.acos(Ct*Ft)*Math.sqrt(1/yr):0,xr=.5*(2*mr*Ct*Wt+2*ct/Math.PI)-et,_r=.5*(mr*Pt+dt)-it,Vr=.5*ur*(Bt*cr+mr*Ct*Ft*Lt)+1/Math.PI,Br=ur*(rr*jt/4-mr*Pt*Wt),Qr=.125*ur*(jt*Wt-mr*Pt*Bt*rr),bn=.5*ur*(Lt*Ft+mr*cr*Ct)+.5,Wr=Br*Qr-bn*Vr;bt=(_r*Br-xr*bn)/Wr,St=(xr*Qr-_r*Vr)/Wr,ct=Pr(ct-bt,-Math.PI,Math.PI),dt=Pr(dt-St,-Lw,Lw)}while((Math.abs(bt)>xt||Math.abs(St)>xt)&&--gt>0);return new Do(wr(ct),wr(dt))}}class $w extends mp{constructor(et){super(et),this.center=et.center||[0,0],this.parallels=et.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Jr(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(et,it){const{scale:ct,cosPhi:dt}=this;return{x:Jr(et)*dt*ct+.5,y:-Math.sin(Jr(it))/dt*ct+.5,z:0}}unproject(et,it){const{scale:ct,cosPhi:dt}=this,gt=-(it-.5)/ct,xt=Pr(wr((et-.5)/ct)/dt,-180,180),bt=Math.asin(Pr(gt*dt,-1,1)),St=Pr(wr(bt),-Bs,Bs);return new Do(xt,St)}}class SS extends jw{constructor(et){super(et),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(et,it,ct){const dt=u_(et,it,ct);return ns(dt,dt,h_(wu(ct))),{x:dt[0],y:dt[1],z:dt[2]}}locationPoint(et,it){const ct=Um(it.lat,it.lng),dt=qs([],ct),gt=et.elevation?et.elevation.getAtPointOrZero(et.locationCoordinate(it),et._centerAltitude):et._centerAltitude;s_(ct,ct,dt,du(1,0)*qn*gt);const xt=uu(new Float64Array(16));return Kp(xt,et.pixelMatrix,et.globeMatrix),ns(ct,ct,xt),new Mr(ct[0],ct[1])}pixelsPerMeter(et,it){return du(1,0)*it}pixelSpaceConversion(et,it,ct){const dt=du(1,et)*it,gt=yo(du(1,45)*it,dt,ct);return this.pixelsPerMeter(et,it)/gt}createTileMatrix(et,it,ct){const dt=Gv(wu(ct.canonical));return Kp(new Float64Array(16),et.globeMatrix,dt)}createInversionMatrix(et,it){const{center:ct}=et,dt=h_(wu(it));return Rx(dt,dt,Jr(ct.lng)),Dv(dt,dt,Jr(ct.lat)),Yp(dt,dt,[et._pixelsPerMercatorPixel,et._pixelsPerMercatorPixel,1]),Float32Array.from(dt)}pointCoordinate(et,it,ct,dt){return c1(et,it,ct,!0)||new Gm(0,0)}pointCoordinate3D(et,it,ct){const dt=this.pointCoordinate(et,it,ct,0);return[dt.x,dt.y,dt.z]}isPointAboveHorizon(et,it){return!c1(et,it.x,it.y,!1)}farthestPixelDistance(et){const it=function(dt,gt){const xt=dt.cameraToCenterDistance,bt=dt._centerAltitude*gt,St=dt._camera,Ct=dt._camera.forward(),Pt=Fu([],Ll([],Ct,-xt),[0,0,bt]),jt=dt.worldSize/(2*Math.PI),Lt=[0,0,-jt],Bt=dt.width/dt.height,Ft=Math.tan(dt.fovAboveCenter),Wt=Ll([],St.up(),Ft),rr=Ll([],St.right(),Ft*Bt),cr=qs([],Fu([],Fu([],Ct,Wt),rr)),yr=[];let ur;if(new zv(Pt,cr).closestPointOnSphere(Lt,jt,yr)){const mr=Fu([],yr,Lt),xr=hu([],mr,Pt);ur=Math.cos(dt.fovAboveCenter)*n_(xr)}else{const mr=hu([],Pt,Lt),xr=hu([],Lt,Pt);qs(xr,xr);const _r=n_(mr)-jt;ur=Math.sqrt(_r*(_r+2*jt));const Vr=Math.acos(ur/(jt+_r))-Math.acos(Hl(Ct,xr));ur*=Math.cos(Vr)}return 1.01*ur}(et,this.pixelsPerMeter(et.center.lat,et.worldSize)),ct=Vm(et.zoom);if(ct>0){const dt=Mw(et,du(1,et.center.lat)*et.worldSize),gt=et.worldSize/(2*Math.PI),xt=Math.max(et.width,et.height)/et.worldSize*Math.PI;return yo(it,dt+gt*(1-Math.cos(xt)),Math.pow(ct,10))}return it}upVector(et,it,ct){return u_(it,ct,et,1)}upVectorScale(et){return{metersToTile:Ax(Px(wu(et)))}}}function Ow(tt){const et=tt.parallels,it=!!et&&Math.abs(et[0]+et[1])<.01;switch(tt.name){case"mercator":return new jw(tt);case"equirectangular":return new vS(tt);case"naturalEarth":return new bS(tt);case"equalEarth":return new xS(tt);case"winkelTripel":return new ES(tt);case"albers":return it?new $w(tt):new _S(tt);case"lambertConformalConic":return it?new $w(tt):new wS(tt);case"globe":return new SS(tt)}throw new Error(`Invalid projection name: ${tt.name}`)}const TS=Bx.types,CS=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ev(tt,et,it,ct,dt,gt,xt,bt,St,Ct,Pt,jt,Lt){const Bt=bt?Math.min(fp,Math.round(bt[0])):0,Ft=bt?Math.min(fp,Math.round(bt[1])):0;tt.emplaceBack(et,it,Math.round(32*ct),Math.round(32*dt),gt,xt,(Bt<<1)+(St?1:0),Ft,16*Ct,16*Pt,256*jt,256*Lt)}function tv(tt,et,it,ct,dt,gt,xt){tt.emplaceBack(et,it,ct,dt,gt,xt)}function rv(tt,et,it,ct,dt){tt.emplaceBack(et,it,ct,dt),tt.emplaceBack(et,it,ct,dt),tt.emplaceBack(et,it,ct,dt),tt.emplaceBack(et,it,ct,dt)}function RS(tt){for(const et of tt.sections)if(kv(et.text))return!0;return!1}class w0{constructor(et){this.layoutVertexArray=new yn,this.indexArray=new Vn,this.programConfigurations=et,this.segments=new us,this.dynamicLayoutVertexArray=new vn,this.opacityVertexArray=new Gn,this.placedSymbolArray=new cs,this.globeExtVertexArray=new Sn}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(et,it,ct,dt){this.isEmpty()||(ct&&(this.layoutVertexBuffer=et.createVertexBuffer(this.layoutVertexArray,L2.members),this.indexBuffer=et.createIndexBuffer(this.indexArray,it),this.dynamicLayoutVertexBuffer=et.createVertexBuffer(this.dynamicLayoutVertexArray,O2.members,!0),this.opacityVertexBuffer=et.createVertexBuffer(this.opacityVertexArray,CS,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=et.createVertexBuffer(this.globeExtVertexArray,$2.members,!0)),this.opacityVertexBuffer.itemSize=1),(ct||dt)&&this.programConfigurations.upload(et))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}$n(w0,"SymbolBuffers");class b0{constructor(et,it,ct){this.layoutVertexArray=new et,this.layoutAttributes=it,this.indexArray=new ct,this.segments=new us,this.collisionVertexArray=new fo,this.collisionVertexArrayExt=new co}upload(et){this.layoutVertexBuffer=et.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=et.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=et.createVertexBuffer(this.collisionVertexArray,z2.members,!0),this.collisionVertexBufferExt=et.createVertexBuffer(this.collisionVertexArrayExt,N2.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}$n(b0,"CollisionBuffers");class gp{constructor(et){this.collisionBoxArray=et.collisionBoxArray,this.zoom=et.zoom,this.overscaling=et.overscaling,this.layers=et.layers,this.layerIds=this.layers.map(xt=>xt.id),this.index=et.index,this.pixelRatio=et.pixelRatio,this.sourceLayerIndex=et.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=uu([]),this.placementViewportMatrix=uu([]);const it=this.layers[0]._unevaluatedLayout._values;this.textSizeData=u0(this.zoom,it["text-size"]),this.iconSizeData=u0(this.zoom,it["icon-size"]);const ct=this.layers[0].layout,dt=ct.get("symbol-sort-key"),gt=ct.get("symbol-z-order");this.canOverlap=ct.get("text-allow-overlap")||ct.get("icon-allow-overlap")||ct.get("text-ignore-placement")||ct.get("icon-ignore-placement"),this.sortFeaturesByKey=gt!=="viewport-y"&&dt.constantOr(1)!==void 0,this.sortFeaturesByY=(gt==="viewport-y"||gt==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=ct.get("text-writing-mode").map(xt=>Ol[xt]),this.stateDependentLayerIds=this.layers.filter(xt=>xt.isStateDependent()).map(xt=>xt.id),this.sourceID=et.sourceID,this.projection=et.projection}createArrays(){this.text=new w0(new Xp(this.layers,this.zoom,et=>/^text/.test(et))),this.icon=new w0(new Xp(this.layers,this.zoom,et=>/^icon/.test(et))),this.glyphOffsetArray=new Ws,this.lineVertexArray=new Om,this.symbolInstances=new Go}calculateGlyphDependencies(et,it,ct,dt,gt){for(let xt=0;xt<et.length;xt++)if(it[et.charCodeAt(xt)]=!0,dt&&gt){const bt=b_[et.charAt(xt)];bt&&(it[bt.charCodeAt(0)]=!0)}}populate(et,it,ct,dt){const gt=this.layers[0],xt=gt.layout,bt=this.projection.name==="globe",St=xt.get("text-font"),Ct=xt.get("text-field"),Pt=xt.get("icon-image"),jt=(Ct.value.kind!=="constant"||Ct.value.value instanceof Hs&&!Ct.value.value.isEmpty()||Ct.value.value.toString().length>0)&&(St.value.kind!=="constant"||St.value.value.length>0),Lt=Pt.value.kind!=="constant"||!!Pt.value.value||Object.keys(Pt.parameters).length>0,Bt=xt.get("symbol-sort-key");if(this.features=[],!jt&&!Lt)return;const Ft=it.iconDependencies,Wt=it.glyphDependencies,rr=it.availableImages,cr=new It(this.zoom);for(const{feature:yr,id:ur,index:mr,sourceLayerIndex:xr}of et){const _r=gt._featureFilter.needGeometry,Vr=em(yr,_r);if(!gt._featureFilter.filter(cr,Vr,ct))continue;if(_r||(Vr.geometry=Uu(yr,ct,dt)),bt&&yr.type!==1&&ct.z<=5){const Wr=Vr.geometry,pn=.98078528056,mn=(_n,Cn)=>Hl(u_(_n.x,_n.y,ct,1),u_(Cn.x,Cn.y,ct,1))<pn;for(let _n=0;_n<Wr.length;_n++)Wr[_n]=OE(Wr[_n],mn)}let Br,Qr;if(jt){const Wr=gt.getValueAndResolveTokens("text-field",Vr,ct,rr),pn=Hs.factory(Wr);RS(pn)&&(this.hasRTLText=!0),(!this.hasRTLText||Et()==="unavailable"||this.hasRTLText&&At.isParsed())&&(Br=U2(pn,gt,Vr))}if(Lt){const Wr=gt.getValueAndResolveTokens("icon-image",Vr,ct,rr);Qr=Wr instanceof yl?Wr:yl.fromString(Wr)}if(!Br&&!Qr)continue;const bn=this.sortFeaturesByKey?Bt.evaluate(Vr,{},ct):void 0;if(this.features.push({id:ur,text:Br,icon:Qr,index:mr,sourceLayerIndex:xr,geometry:Vr.geometry,properties:yr.properties,type:TS[yr.type],sortKey:bn}),Qr&&(Ft[Qr.name]=!0),Br){const Wr=St.evaluate(Vr,{},ct).join(","),pn=xt.get("text-rotation-alignment")==="map"&&xt.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ol.vertical)>=0;for(const mn of Br.sections)if(mn.image)Ft[mn.image.name]=!0;else{const _n=Xy(Br.toString()),Cn=mn.fontStack||Wr,Kr=Wt[Cn]=Wt[Cn]||{};this.calculateGlyphDependencies(mn.text,Kr,pn,this.allowVerticalPlacement,_n)}}}xt.get("symbol-placement")==="line"&&(this.features=function(yr){const ur={},mr={},xr=[];let _r=0;function Vr(Wr){xr.push(yr[Wr]),_r++}function Br(Wr,pn,mn){const _n=mr[Wr];return delete mr[Wr],mr[pn]=_n,xr[_n].geometry[0].pop(),xr[_n].geometry[0]=xr[_n].geometry[0].concat(mn[0]),_n}function Qr(Wr,pn,mn){const _n=ur[pn];return delete ur[pn],ur[Wr]=_n,xr[_n].geometry[0].shift(),xr[_n].geometry[0]=mn[0].concat(xr[_n].geometry[0]),_n}function bn(Wr,pn,mn){const _n=mn?pn[0][pn[0].length-1]:pn[0][0];return`${Wr}:${_n.x}:${_n.y}`}for(let Wr=0;Wr<yr.length;Wr++){const pn=yr[Wr],mn=pn.geometry,_n=pn.text?pn.text.toString():null;if(!_n){Vr(Wr);continue}const Cn=bn(_n,mn),Kr=bn(_n,mn,!0);if(Cn in mr&&Kr in ur&&mr[Cn]!==ur[Kr]){const In=Qr(Cn,Kr,mn),zn=Br(Cn,Kr,xr[In].geometry);delete ur[Cn],delete mr[Kr],mr[bn(_n,xr[zn].geometry,!0)]=zn,xr[In].geometry=null}else Cn in mr?Br(Cn,Kr,mn):Kr in ur?Qr(Cn,Kr,mn):(Vr(Wr),ur[Cn]=_r-1,mr[Kr]=_r-1)}return xr.filter(Wr=>Wr.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((yr,ur)=>yr.sortKey-ur.sortKey)}update(et,it,ct,dt){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(et,it,this.layers,ct,dt),this.icon.programConfigurations.updatePaintArrays(et,it,this.layers,ct,dt))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(et){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(et),this.iconCollisionBox.upload(et)),this.text.upload(et,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(et,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=Ow(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(et,it){const ct=this.lineVertexArray.length;if(et.segment!==void 0)for(const{x:dt,y:gt}of it)this.lineVertexArray.emplaceBack(dt,gt);return{lineStartIndex:ct,lineLength:this.lineVertexArray.length-ct}}addSymbols(et,it,ct,dt,gt,xt,bt,St,Ct,Pt,jt,Lt,Bt,Ft){const Wt=et.indexArray,rr=et.layoutVertexArray,cr=et.globeExtVertexArray,yr=et.segments.prepareSegment(4*it.length,rr,Wt,this.canOverlap?xt.sortKey:void 0),ur=this.glyphOffsetArray.length,mr=yr.vertexLength,xr=this.allowVerticalPlacement&&bt===Ol.vertical?Math.PI/2:0,_r=xt.text&&xt.text.sections;for(let Br=0;Br<it.length;Br++){const{tl:Qr,tr:bn,bl:Wr,br:pn,tex:mn,pixelOffsetTL:_n,pixelOffsetBR:Cn,minFontScaleX:Kr,minFontScaleY:In,glyphOffset:zn,isSDF:Mn,sectionIndex:_i}=it[Br],Rn=yr.vertexLength,Wn=zn[1];if(ev(rr,Ct.x,Ct.y,Qr.x,Wn+Qr.y,mn.x,mn.y,ct,Mn,_n.x,_n.y,Kr,In),ev(rr,Ct.x,Ct.y,bn.x,Wn+bn.y,mn.x+mn.w,mn.y,ct,Mn,Cn.x,_n.y,Kr,In),ev(rr,Ct.x,Ct.y,Wr.x,Wn+Wr.y,mn.x,mn.y+mn.h,ct,Mn,_n.x,Cn.y,Kr,In),ev(rr,Ct.x,Ct.y,pn.x,Wn+pn.y,mn.x+mn.w,mn.y+mn.h,ct,Mn,Cn.x,Cn.y,Kr,In),St){const{x:eo,y:xo,z:to}=St.anchor,[Xn,Uo,io]=St.up;tv(cr,eo,xo,to,Xn,Uo,io),tv(cr,eo,xo,to,Xn,Uo,io),tv(cr,eo,xo,to,Xn,Uo,io),tv(cr,eo,xo,to,Xn,Uo,io),rv(et.dynamicLayoutVertexArray,eo,xo,to,xr)}else rv(et.dynamicLayoutVertexArray,Ct.x,Ct.y,Ct.z,xr);Wt.emplaceBack(Rn,Rn+1,Rn+2),Wt.emplaceBack(Rn+1,Rn+2,Rn+3),yr.vertexLength+=4,yr.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(zn[0]),Br!==it.length-1&&_i===it[Br+1].sectionIndex||et.programConfigurations.populatePaintArrays(rr.length,xt,xt.index,{},Bt,Ft,_r&&_r[_i])}const Vr=St?St.anchor:Ct;et.placedSymbolArray.emplaceBack(Vr.x,Vr.y,Vr.z,Ct.x,Ct.y,ur,this.glyphOffsetArray.length-ur,mr,Pt,jt,Ct.segment,ct?ct[0]:0,ct?ct[1]:0,dt[0],dt[1],bt,0,!1,0,Lt,0)}_commitLayoutVertex(et,it,ct,dt,gt,xt,bt){et.emplaceBack(it,ct,dt,gt,xt,Math.round(bt.x),Math.round(bt.y))}_addCollisionDebugVertices(et,it,ct,dt,gt,xt,bt){const St=ct.segments.prepareSegment(4,ct.layoutVertexArray,ct.indexArray),Ct=St.vertexLength,Pt=bt.tileAnchorX,jt=bt.tileAnchorY;for(let Bt=0;Bt<4;Bt++)ct.collisionVertexArray.emplaceBack(0,0,0,0);ct.collisionVertexArrayExt.emplaceBack(it,-et.padding,-et.padding),ct.collisionVertexArrayExt.emplaceBack(it,et.padding,-et.padding),ct.collisionVertexArrayExt.emplaceBack(it,et.padding,et.padding),ct.collisionVertexArrayExt.emplaceBack(it,-et.padding,et.padding),this._commitLayoutVertex(ct.layoutVertexArray,dt,gt,xt,Pt,jt,new Mr(et.x1,et.y1)),this._commitLayoutVertex(ct.layoutVertexArray,dt,gt,xt,Pt,jt,new Mr(et.x2,et.y1)),this._commitLayoutVertex(ct.layoutVertexArray,dt,gt,xt,Pt,jt,new Mr(et.x2,et.y2)),this._commitLayoutVertex(ct.layoutVertexArray,dt,gt,xt,Pt,jt,new Mr(et.x1,et.y2)),St.vertexLength+=4;const Lt=ct.indexArray;Lt.emplaceBack(Ct,Ct+1),Lt.emplaceBack(Ct+1,Ct+2),Lt.emplaceBack(Ct+2,Ct+3),Lt.emplaceBack(Ct+3,Ct),St.primitiveLength+=4}_addTextDebugCollisionBoxes(et,it,ct,dt,gt,xt){for(let bt=dt;bt<gt;bt++){const St=ct.get(bt),Ct=this.getSymbolInstanceTextSize(et,xt,it,bt);this._addCollisionDebugVertices(St,Ct,this.textCollisionBox,St.projectedAnchorX,St.projectedAnchorY,St.projectedAnchorZ,xt)}}_addIconDebugCollisionBoxes(et,it,ct,dt,gt,xt){for(let bt=dt;bt<gt;bt++){const St=ct.get(bt),Ct=this.getSymbolInstanceIconSize(et,it,xt.placedIconSymbolIndex);this._addCollisionDebugVertices(St,Ct,this.iconCollisionBox,St.projectedAnchorX,St.projectedAnchorY,St.projectedAnchorZ,xt)}}generateCollisionDebugBuffers(et,it){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new b0(On,rw.members,Cs),this.iconCollisionBox=new b0(On,rw.members,Cs);const ct=Xm(this.iconSizeData,et),dt=Xm(this.textSizeData,et);for(let gt=0;gt<this.symbolInstances.length;gt++){const xt=this.symbolInstances.get(gt);this._addTextDebugCollisionBoxes(dt,et,it,xt.textBoxStartIndex,xt.textBoxEndIndex,xt),this._addTextDebugCollisionBoxes(dt,et,it,xt.verticalTextBoxStartIndex,xt.verticalTextBoxEndIndex,xt),this._addIconDebugCollisionBoxes(ct,et,it,xt.iconBoxStartIndex,xt.iconBoxEndIndex,xt),this._addIconDebugCollisionBoxes(ct,et,it,xt.verticalIconBoxStartIndex,xt.verticalIconBoxEndIndex,xt)}}getSymbolInstanceTextSize(et,it,ct,dt){const gt=this.text.placedSymbolArray.get(it.rightJustifiedTextSymbolIndex>=0?it.rightJustifiedTextSymbolIndex:it.centerJustifiedTextSymbolIndex>=0?it.centerJustifiedTextSymbolIndex:it.leftJustifiedTextSymbolIndex>=0?it.leftJustifiedTextSymbolIndex:it.verticalPlacedTextSymbolIndex>=0?it.verticalPlacedTextSymbolIndex:dt),xt=Gx(this.textSizeData,et,gt)/Is;return this.tilePixelRatio*xt}getSymbolInstanceIconSize(et,it,ct){const dt=this.icon.placedSymbolArray.get(ct),gt=Gx(this.iconSizeData,et,dt);return this.tilePixelRatio*gt}_commitDebugCollisionVertexUpdate(et,it,ct){et.emplaceBack(it,-ct,-ct),et.emplaceBack(it,ct,-ct),et.emplaceBack(it,ct,ct),et.emplaceBack(it,-ct,ct)}_updateTextDebugCollisionBoxes(et,it,ct,dt,gt,xt){for(let bt=dt;bt<gt;bt++){const St=ct.get(bt),Ct=this.getSymbolInstanceTextSize(et,xt,it,bt);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,Ct,St.padding)}}_updateIconDebugCollisionBoxes(et,it,ct,dt,gt,xt){for(let bt=dt;bt<gt;bt++){const St=ct.get(bt),Ct=this.getSymbolInstanceIconSize(et,it,xt);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,Ct,St.padding)}}updateCollisionDebugBuffers(et,it){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const ct=Xm(this.iconSizeData,et),dt=Xm(this.textSizeData,et);for(let gt=0;gt<this.symbolInstances.length;gt++){const xt=this.symbolInstances.get(gt);this._updateTextDebugCollisionBoxes(dt,et,it,xt.textBoxStartIndex,xt.textBoxEndIndex,xt),this._updateTextDebugCollisionBoxes(dt,et,it,xt.verticalTextBoxStartIndex,xt.verticalTextBoxEndIndex,xt),this._updateIconDebugCollisionBoxes(ct,et,it,xt.iconBoxStartIndex,xt.iconBoxEndIndex,xt.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(ct,et,it,xt.verticalIconBoxStartIndex,xt.verticalIconBoxEndIndex,xt.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(et,it,ct,dt,gt,xt,bt,St,Ct){const Pt={};if(it<ct){const{x1:jt,y1:Lt,x2:Bt,y2:Ft,padding:Wt,projectedAnchorX:rr,projectedAnchorY:cr,projectedAnchorZ:yr,tileAnchorX:ur,tileAnchorY:mr,featureIndex:xr}=et.get(it);Pt.textBox={x1:jt,y1:Lt,x2:Bt,y2:Ft,padding:Wt,projectedAnchorX:rr,projectedAnchorY:cr,projectedAnchorZ:yr,tileAnchorX:ur,tileAnchorY:mr},Pt.textFeatureIndex=xr}if(dt<gt){const{x1:jt,y1:Lt,x2:Bt,y2:Ft,padding:Wt,projectedAnchorX:rr,projectedAnchorY:cr,projectedAnchorZ:yr,tileAnchorX:ur,tileAnchorY:mr,featureIndex:xr}=et.get(dt);Pt.verticalTextBox={x1:jt,y1:Lt,x2:Bt,y2:Ft,padding:Wt,projectedAnchorX:rr,projectedAnchorY:cr,projectedAnchorZ:yr,tileAnchorX:ur,tileAnchorY:mr},Pt.verticalTextFeatureIndex=xr}if(xt<bt){const{x1:jt,y1:Lt,x2:Bt,y2:Ft,padding:Wt,projectedAnchorX:rr,projectedAnchorY:cr,projectedAnchorZ:yr,tileAnchorX:ur,tileAnchorY:mr,featureIndex:xr}=et.get(xt);Pt.iconBox={x1:jt,y1:Lt,x2:Bt,y2:Ft,padding:Wt,projectedAnchorX:rr,projectedAnchorY:cr,projectedAnchorZ:yr,tileAnchorX:ur,tileAnchorY:mr},Pt.iconFeatureIndex=xr}if(St<Ct){const{x1:jt,y1:Lt,x2:Bt,y2:Ft,padding:Wt,projectedAnchorX:rr,projectedAnchorY:cr,projectedAnchorZ:yr,tileAnchorX:ur,tileAnchorY:mr,featureIndex:xr}=et.get(St);Pt.verticalIconBox={x1:jt,y1:Lt,x2:Bt,y2:Ft,padding:Wt,projectedAnchorX:rr,projectedAnchorY:cr,projectedAnchorZ:yr,tileAnchorX:ur,tileAnchorY:mr},Pt.verticalIconFeatureIndex=xr}return Pt}deserializeCollisionBoxes(et){this.collisionArrays=[];for(let it=0;it<this.symbolInstances.length;it++){const ct=this.symbolInstances.get(it);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(et,ct.textBoxStartIndex,ct.textBoxEndIndex,ct.verticalTextBoxStartIndex,ct.verticalTextBoxEndIndex,ct.iconBoxStartIndex,ct.iconBoxEndIndex,ct.verticalIconBoxStartIndex,ct.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(et,it){const ct=et.placedSymbolArray.get(it),dt=ct.vertexStartIndex+4*ct.numGlyphs;for(let gt=ct.vertexStartIndex;gt<dt;gt+=4)et.indexArray.emplaceBack(gt,gt+1,gt+2),et.indexArray.emplaceBack(gt+1,gt+2,gt+3)}getSortedSymbolIndexes(et){if(this.sortedAngle===et&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const it=Math.sin(et),ct=Math.cos(et),dt=[],gt=[],xt=[];for(let bt=0;bt<this.symbolInstances.length;++bt){xt.push(bt);const St=this.symbolInstances.get(bt);dt.push(0|Math.round(it*St.tileAnchorX+ct*St.tileAnchorY)),gt.push(St.featureIndex)}return xt.sort((bt,St)=>dt[bt]-dt[St]||gt[St]-gt[bt]),xt}addToSortKeyRanges(et,it){const ct=this.sortKeyRanges[this.sortKeyRanges.length-1];ct&&ct.sortKey===it?ct.symbolInstanceEnd=et+1:this.sortKeyRanges.push({sortKey:it,symbolInstanceStart:et,symbolInstanceEnd:et+1})}sortFeatures(et){if(this.sortFeaturesByY&&this.sortedAngle!==et&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(et),this.sortedAngle=et,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const it of this.symbolInstanceIndexes){const ct=this.symbolInstances.get(it);this.featureSortOrder.push(ct.featureIndex);const{rightJustifiedTextSymbolIndex:dt,centerJustifiedTextSymbolIndex:gt,leftJustifiedTextSymbolIndex:xt,verticalPlacedTextSymbolIndex:bt,placedIconSymbolIndex:St,verticalPlacedIconSymbolIndex:Ct}=ct;dt>=0&&this.addIndicesForPlacedSymbol(this.text,dt),gt>=0&&gt!==dt&&this.addIndicesForPlacedSymbol(this.text,gt),xt>=0&&xt!==gt&&xt!==dt&&this.addIndicesForPlacedSymbol(this.text,xt),bt>=0&&this.addIndicesForPlacedSymbol(this.text,bt),St>=0&&this.addIndicesForPlacedSymbol(this.icon,St),Ct>=0&&this.addIndicesForPlacedSymbol(this.icon,Ct)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}$n(gp,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),gp.MAX_GLYPHS=65535,gp.addDynamicAttributes=rv;const AS=new dr({"symbol-placement":new Gt(Yr.layout_symbol["symbol-placement"]),"symbol-spacing":new Gt(Yr.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Gt(Yr.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new nr(Yr.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Gt(Yr.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Gt(Yr.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Gt(Yr.layout_symbol["icon-ignore-placement"]),"icon-optional":new Gt(Yr.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Gt(Yr.layout_symbol["icon-rotation-alignment"]),"icon-size":new nr(Yr.layout_symbol["icon-size"]),"icon-text-fit":new Gt(Yr.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Gt(Yr.layout_symbol["icon-text-fit-padding"]),"icon-image":new nr(Yr.layout_symbol["icon-image"]),"icon-rotate":new nr(Yr.layout_symbol["icon-rotate"]),"icon-padding":new Gt(Yr.layout_symbol["icon-padding"]),"icon-keep-upright":new Gt(Yr.layout_symbol["icon-keep-upright"]),"icon-offset":new nr(Yr.layout_symbol["icon-offset"]),"icon-anchor":new nr(Yr.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Gt(Yr.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Gt(Yr.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Gt(Yr.layout_symbol["text-rotation-alignment"]),"text-field":new nr(Yr.layout_symbol["text-field"]),"text-font":new nr(Yr.layout_symbol["text-font"]),"text-size":new nr(Yr.layout_symbol["text-size"]),"text-max-width":new nr(Yr.layout_symbol["text-max-width"]),"text-line-height":new nr(Yr.layout_symbol["text-line-height"]),"text-letter-spacing":new nr(Yr.layout_symbol["text-letter-spacing"]),"text-justify":new nr(Yr.layout_symbol["text-justify"]),"text-radial-offset":new nr(Yr.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Gt(Yr.layout_symbol["text-variable-anchor"]),"text-anchor":new nr(Yr.layout_symbol["text-anchor"]),"text-max-angle":new Gt(Yr.layout_symbol["text-max-angle"]),"text-writing-mode":new Gt(Yr.layout_symbol["text-writing-mode"]),"text-rotate":new nr(Yr.layout_symbol["text-rotate"]),"text-padding":new Gt(Yr.layout_symbol["text-padding"]),"text-keep-upright":new Gt(Yr.layout_symbol["text-keep-upright"]),"text-transform":new nr(Yr.layout_symbol["text-transform"]),"text-offset":new nr(Yr.layout_symbol["text-offset"]),"text-allow-overlap":new Gt(Yr.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Gt(Yr.layout_symbol["text-ignore-placement"]),"text-optional":new Gt(Yr.layout_symbol["text-optional"])});var E0={paint:new dr({"icon-opacity":new nr(Yr.paint_symbol["icon-opacity"]),"icon-color":new nr(Yr.paint_symbol["icon-color"]),"icon-halo-color":new nr(Yr.paint_symbol["icon-halo-color"]),"icon-halo-width":new nr(Yr.paint_symbol["icon-halo-width"]),"icon-halo-blur":new nr(Yr.paint_symbol["icon-halo-blur"]),"icon-translate":new Gt(Yr.paint_symbol["icon-translate"]),"icon-translate-anchor":new Gt(Yr.paint_symbol["icon-translate-anchor"]),"text-opacity":new nr(Yr.paint_symbol["text-opacity"]),"text-color":new nr(Yr.paint_symbol["text-color"],{runtimeType:Js,getOverride:tt=>tt.textColor,hasOverride:tt=>!!tt.textColor}),"text-halo-color":new nr(Yr.paint_symbol["text-halo-color"]),"text-halo-width":new nr(Yr.paint_symbol["text-halo-width"]),"text-halo-blur":new nr(Yr.paint_symbol["text-halo-blur"]),"text-translate":new Gt(Yr.paint_symbol["text-translate"]),"text-translate-anchor":new Gt(Yr.paint_symbol["text-translate-anchor"])}),layout:AS};class zw{constructor(et){this.type=et.property.overrides?et.property.overrides.runtimeType:Zu,this.defaultValue=et}evaluate(et){if(et.formattedSection){const it=this.defaultValue.property.overrides;if(it&&it.hasOverride(et.formattedSection))return it.getOverride(et.formattedSection)}return et.feature&&et.featureState?this.defaultValue.evaluate(et.feature,et.featureState):this.defaultValue.property.specification.default}eachChild(et){this.defaultValue.isConstant()||et(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}$n(zw,"FormatSectionOverride",{omit:["defaultValue"]});class nv extends cu{constructor(et){super(et,E0)}recalculate(et,it){super.recalculate(et,it),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const ct=this.layout.get("text-writing-mode");if(ct){const dt=[];for(const gt of ct)dt.indexOf(gt)<0&&dt.push(gt);this.layout._values["text-writing-mode"]=dt}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(et,it,ct,dt){const gt=this.layout.get(et).evaluate(it,{},ct,dt),xt=this._unevaluatedLayout._values[et];return xt.isDataDriven()||ip(xt.value)||!gt?gt:function(bt,St){return St.replace(/{([^{}]+)}/g,(Ct,Pt)=>Pt in bt?String(bt[Pt]):"")}(it.properties,gt)}createBucket(et){return new gp(et)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const et of E0.paint.overridableProperties){if(!nv.hasPaintOverride(this.layout,et))continue;const it=this.paint.get(et),ct=new zw(it),dt=new km(ct,it.property.specification);let gt=null;gt=it.value.kind==="constant"||it.value.kind==="source"?new zy("source",dt):new Bp("composite",dt,it.value.zoomStops,it.value._interpolationType),this.paint._values[et]=new or(it.property,gt,it.parameters)}}_handleOverridablePaintPropertyUpdate(et,it,ct){return!(!this.layout||it.isDataDriven()||ct.isDataDriven())&&nv.hasPaintOverride(this.layout,et)}static hasPaintOverride(et,it){const ct=et.get("text-field"),dt=E0.paint.properties[it];let gt=!1;const xt=bt=>{for(const St of bt)if(dt.overrides&&dt.overrides.hasOverride(St))return void(gt=!0)};if(ct.value.kind==="constant"&&ct.value.value instanceof Hs)xt(ct.value.value.sections);else if(ct.value.kind==="source"){const bt=Ct=>{gt||(Ct instanceof Pu&&Yo(Ct.value)===Ep?xt(Ct.value.sections):Ct instanceof yu?xt(Ct.sections):Ct.eachChild(bt))},St=ct.value;St._styleExpression&&bt(St._styleExpression.expression)}return gt}getProgramConfiguration(et){return new hp(this,et)}}var kS={paint:new dr({"background-color":new Gt(Yr.paint_background["background-color"]),"background-pattern":new Gt(Yr.paint_background["background-pattern"]),"background-opacity":new Gt(Yr.paint_background["background-opacity"])})},PS={paint:new dr({"raster-opacity":new Gt(Yr.paint_raster["raster-opacity"]),"raster-hue-rotate":new Gt(Yr.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Gt(Yr.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Gt(Yr.paint_raster["raster-brightness-max"]),"raster-saturation":new Gt(Yr.paint_raster["raster-saturation"]),"raster-contrast":new Gt(Yr.paint_raster["raster-contrast"]),"raster-resampling":new Gt(Yr.paint_raster["raster-resampling"]),"raster-fade-duration":new Gt(Yr.paint_raster["raster-fade-duration"])})};class IS extends cu{constructor(et){super(et,{}),this.implementation=et}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(et){this.implementation.onAdd&&this.implementation.onAdd(et,et.painter.context.gl)}onRemove(et){this.implementation.onRemove&&this.implementation.onRemove(et,et.painter.context.gl)}}var MS={paint:new dr({"sky-type":new Gt(Yr.paint_sky["sky-type"]),"sky-atmosphere-sun":new Gt(Yr.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Gt(Yr.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Gt(Yr.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Gt(Yr.paint_sky["sky-gradient-radius"]),"sky-gradient":new hr(Yr.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Gt(Yr.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Gt(Yr.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Gt(Yr.paint_sky["sky-opacity"])})};function S0(tt,et,it){const ct=[0,0,1],dt=n1([]);return o1(dt,dt,it?-Jr(tt)+Math.PI:Jr(tt)),i1(dt,dt,-Jr(et)),J0(ct,ct,dt),qs(ct,ct)}const jS={circle:class extends cu{constructor(tt){super(tt,GE)}createBucket(tt){return new Kv(tt)}queryRadius(tt){const et=tt;return Hm("circle-radius",this,et)+Hm("circle-stroke-width",this,et)+jx(this.paint.get("circle-translate"))}queryIntersectsFeature(tt,et,it,ct,dt,gt,xt,bt){const St=R1(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),gt.angle,tt.pixelToTileUnitsFactor),Ct=this.paint.get("circle-radius").evaluate(et,it)+this.paint.get("circle-stroke-width").evaluate(et,it);return A1(tt,ct,gt,xt,bt,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",St,Ct)}getProgramIds(){return["circle"]}getProgramConfiguration(tt){return new hp(this,tt)}},heatmap:class extends cu{createBucket(tt){return new P1(tt)}constructor(tt){super(tt,ZE),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(tt){tt==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=e0({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(tt){return Hm("heatmap-radius",this,tt)}queryIntersectsFeature(tt,et,it,ct,dt,gt,xt,bt){const St=this.paint.get("heatmap-radius").evaluate(et,it);return A1(tt,ct,gt,xt,bt,!0,!0,new Mr(0,0),St)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(tt){return new hp(this,tt)}},hillshade:class extends cu{constructor(tt){super(tt,XE)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends cu{constructor(tt){super(tt,h2)}getProgramIds(){const tt=this.paint.get("fill-pattern"),et=tt&&tt.constantOr(1),it=[et?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&it.push(et&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),it}getProgramConfiguration(tt){return new hp(this,tt)}recalculate(tt,et){super.recalculate(tt,et);const it=this.paint._values["fill-outline-color"];it.value.kind==="constant"&&it.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(tt){return new zx(tt)}queryRadius(){return jx(this.paint.get("fill-translate"))}queryIntersectsFeature(tt,et,it,ct,dt,gt){return!tt.queryGeometry.isAboveHorizon&&b1(C1(tt.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),gt.angle,tt.pixelToTileUnitsFactor),ct)}isTileClipped(){return!0}},"fill-extrusion":class extends cu{constructor(tt){super(tt,R2)}createBucket(tt){return new x_(tt)}queryRadius(){return jx(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(tt){return new hp(this,tt)}queryIntersectsFeature(tt,et,it,ct,dt,gt,xt,bt,St){const Ct=R1(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),gt.angle,tt.pixelToTileUnitsFactor),Pt=this.paint.get("fill-extrusion-height").evaluate(et,it),jt=this.paint.get("fill-extrusion-base").evaluate(et,it),Lt=[0,0],Bt=bt&&gt.elevation,Ft=gt.elevation?gt.elevation.exaggeration():1,Wt=tt.tile.getBucket(this);if(Bt&&Wt instanceof x_){const mr=Wt.centroidVertexArray,xr=St+1;xr<mr.length&&(Lt[0]=mr.geta_centroid_pos0(xr),Lt[1]=mr.geta_centroid_pos1(xr))}if(Lt[0]===0&&Lt[1]===1)return!1;gt.projection.name==="globe"&&(ct=Z1([ct],[new Mr(0,0),new Mr(qn,qn)],tt.tileID.canonical).map(mr=>mr.polygon).flat());const rr=Bt?bt:null,[cr,yr]=function(mr,xr,_r,Vr,Br,Qr,bn,Wr,pn,mn,_n){return mr.projection.name==="globe"?function(Cn,Kr,In,zn,Mn,_i,Rn,Wn,eo,xo,to){const Xn=[],Uo=[],io=Cn.projection.upVectorScale(to,Cn.center.lat,Cn.worldSize).metersToTile,oo=[0,0,0,1],Lo=[0,0,0,1],No=($o,Zo,Qo,ds)=>{$o[0]=Zo,$o[1]=Qo,$o[2]=ds,$o[3]=1},Bo=q1();In>0&&(In+=Bo),zn+=Bo;for(const $o of Kr){const Zo=[],Qo=[];for(const ds of $o){const Oo=ds.x+Mn.x,xs=ds.y+Mn.y,ps=Cn.projection.projectTilePoint(Oo,xs,to),Ko=Cn.projection.upVector(to,ds.x,ds.y);let bo=In,fs=zn;if(Rn){const Fo=Q1(Oo,xs,In,zn,Rn,Wn,eo,xo);bo+=Fo.base,fs+=Fo.top}In!==0?No(oo,ps.x+Ko[0]*io*bo,ps.y+Ko[1]*io*bo,ps.z+Ko[2]*io*bo):No(oo,ps.x,ps.y,ps.z),No(Lo,ps.x+Ko[0]*io*fs,ps.y+Ko[1]*io*fs,ps.z+Ko[2]*io*fs),ns(oo,oo,_i),ns(Lo,Lo,_i),Zo.push(new Zm(oo[0],oo[1],oo[2])),Qo.push(new Zm(Lo[0],Lo[1],Lo[2]))}Xn.push(Zo),Uo.push(Qo)}return[Xn,Uo]}(mr,xr,_r,Vr,Br,Qr,bn,Wr,pn,mn,_n):bn?function(Cn,Kr,In,zn,Mn,_i,Rn,Wn,eo){const xo=[],to=[],Xn=[0,0,0,1];for(const Uo of Cn){const io=[],oo=[];for(const Lo of Uo){const No=Lo.x+zn.x,Bo=Lo.y+zn.y,$o=Q1(No,Bo,Kr,In,_i,Rn,Wn,eo);Xn[0]=No,Xn[1]=Bo,Xn[2]=$o.base,Xn[3]=1,Qp(Xn,Xn,Mn),Xn[3]=Math.max(Xn[3],1e-5);const Zo=new Zm(Xn[0]/Xn[3],Xn[1]/Xn[3],Xn[2]/Xn[3]);Xn[0]=No,Xn[1]=Bo,Xn[2]=$o.top,Xn[3]=1,Qp(Xn,Xn,Mn),Xn[3]=Math.max(Xn[3],1e-5);const Qo=new Zm(Xn[0]/Xn[3],Xn[1]/Xn[3],Xn[2]/Xn[3]);io.push(Zo),oo.push(Qo)}xo.push(io),to.push(oo)}return[xo,to]}(xr,_r,Vr,Br,Qr,bn,Wr,pn,mn):function(Cn,Kr,In,zn,Mn){const _i=[],Rn=[],Wn=Mn[8]*Kr,eo=Mn[9]*Kr,xo=Mn[10]*Kr,to=Mn[11]*Kr,Xn=Mn[8]*In,Uo=Mn[9]*In,io=Mn[10]*In,oo=Mn[11]*In;for(const Lo of Cn){const No=[],Bo=[];for(const $o of Lo){const Zo=$o.x+zn.x,Qo=$o.y+zn.y,ds=Mn[0]*Zo+Mn[4]*Qo+Mn[12],Oo=Mn[1]*Zo+Mn[5]*Qo+Mn[13],xs=Mn[2]*Zo+Mn[6]*Qo+Mn[14],ps=Mn[3]*Zo+Mn[7]*Qo+Mn[15],Ko=ds+Wn,bo=Oo+eo,fs=xs+xo,Fo=Math.max(ps+to,1e-5),Ks=ds+Xn,ms=Oo+Uo,Ms=xs+io,Rs=Math.max(ps+oo,1e-5);No.push(new Zm(Ko/Fo,bo/Fo,fs/Fo)),Bo.push(new Zm(Ks/Rs,ms/Rs,Ms/Rs))}_i.push(No),Rn.push(Bo)}return[_i,Rn]}(xr,_r,Vr,Br,Qr)}(gt,ct,jt,Pt,Ct,xt,rr,Lt,Ft,gt.center.lat,tt.tileID.canonical),ur=tt.queryGeometry;return function(mr,xr,_r){let Vr=1/0;b1(_r,xr)&&(Vr=Y1(_r,xr[0]));for(let Br=0;Br<xr.length;Br++){const Qr=xr[Br],bn=mr[Br];for(let Wr=0;Wr<Qr.length-1;Wr++){const pn=Qr[Wr],mn=[pn,Qr[Wr+1],bn[Wr+1],bn[Wr],pn];w1(_r,mn)&&(Vr=Math.min(Vr,Y1(_r,mn)))}}return Vr!==1/0&&Vr}(cr,yr,ur.isPointQuery()?ur.screenBounds:ur.screenGeometry)}},line:class extends cu{constructor(tt){super(tt,J1),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(tt){if(tt==="line-gradient"){const et=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=et._styleExpression&&et._styleExpression.expression instanceof Ty,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(tt,et){super.recalculate(tt,et),this.paint._values["line-floorwidth"]=ew.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,tt)}createBucket(tt){return new Vx(tt)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(tt){return new hp(this,tt)}queryRadius(tt){const et=tt,it=tw(Hm("line-width",this,et),Hm("line-gap-width",this,et)),ct=Hm("line-offset",this,et);return it/2+Math.abs(ct)+jx(this.paint.get("line-translate"))}queryIntersectsFeature(tt,et,it,ct,dt,gt){if(tt.queryGeometry.isAboveHorizon)return!1;const xt=C1(tt.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),gt.angle,tt.pixelToTileUnitsFactor),bt=tt.pixelToTileUnitsFactor/2*tw(this.paint.get("line-width").evaluate(et,it),this.paint.get("line-gap-width").evaluate(et,it)),St=this.paint.get("line-offset").evaluate(et,it);return St&&(ct=function(Ct,Pt){const jt=[],Lt=new Mr(0,0);for(let Bt=0;Bt<Ct.length;Bt++){const Ft=Ct[Bt],Wt=[];for(let rr=0;rr<Ft.length;rr++){const cr=Ft[rr],yr=Ft[rr+1],ur=rr===0?Lt:cr.sub(Ft[rr-1])._unit()._perp(),mr=rr===Ft.length-1?Lt:yr.sub(cr)._unit()._perp(),xr=ur._add(mr)._unit();xr._mult(1/(xr.x*mr.x+xr.y*mr.y)),Wt.push(xr._mult(Pt)._add(cr))}jt.push(Wt)}return jt}(ct,St*tt.pixelToTileUnitsFactor)),function(Ct,Pt,jt){for(let Lt=0;Lt<Pt.length;Lt++){const Bt=Pt[Lt];if(Ct.length>=3){for(let Ft=0;Ft<Bt.length;Ft++)if(tm(Ct,Bt[Ft]))return!0}if(BE(Ct,Bt,jt))return!0}return!1}(xt,ct,bt)}isTileClipped(){return!0}},symbol:nv,background:class extends cu{constructor(tt){super(tt,kS)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends cu{constructor(tt){super(tt,PS)}getProgramIds(){return["raster"]}},sky:class extends cu{constructor(tt){super(tt,MS),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(tt){tt==="sky-gradient"?this._updateColorRamp():tt!=="sky-atmosphere-sun"&&tt!=="sky-atmosphere-halo-color"&&tt!=="sky-atmosphere-color"&&tt!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=e0({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(tt){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const et=tt.style.light.properties.get("position");return this._lightPosition.azimuthal!==et.azimuthal||this._lightPosition.polar!==et.polar}return!1}getCenter(tt,et){if(this.paint.get("sky-type")==="atmosphere"){const ct=this.paint.get("sky-atmosphere-sun"),dt=!ct,gt=tt.style.light,xt=gt.properties.get("position");return dt&&gt.properties.get("anchor")==="viewport"&&Hn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),dt?S0(xt.azimuthal,90-xt.polar,et):S0(ct[0],90-ct[1],et)}const it=this.paint.get("sky-gradient-center");return S0(it[0],90-it[1],et)}is3D(){return!1}isSky(){return!0}markSkyboxValid(tt){this._skyboxInvalidated=!1,this._lightPosition=tt.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const tt=this.paint.get("sky-type");return tt==="atmosphere"?["skyboxCapture","skybox"]:tt==="gradient"?["skyboxGradient"]:null}}};class P_{constructor(et,it,ct,dt){this.context=et,this.format=ct,this.texture=et.gl.createTexture(),this.update(it,dt)}update(et,it,ct){const{width:dt,height:gt}=et,{context:xt}=this,{gl:bt}=xt,{HTMLImageElement:St,HTMLCanvasElement:Ct,HTMLVideoElement:Pt,ImageData:jt,ImageBitmap:Lt}=Tt;if(bt.bindTexture(bt.TEXTURE_2D,this.texture),xt.pixelStoreUnpackFlipY.set(!1),xt.pixelStoreUnpack.set(1),xt.pixelStoreUnpackPremultiplyAlpha.set(this.format===bt.RGBA&&(!it||it.premultiply!==!1)),ct||this.size&&this.size[0]===dt&&this.size[1]===gt){const{x:Bt,y:Ft}=ct||{x:0,y:0};et instanceof St||et instanceof Ct||et instanceof Pt||et instanceof jt||Lt&&et instanceof Lt?bt.texSubImage2D(bt.TEXTURE_2D,0,Bt,Ft,bt.RGBA,bt.UNSIGNED_BYTE,et):bt.texSubImage2D(bt.TEXTURE_2D,0,Bt,Ft,dt,gt,bt.RGBA,bt.UNSIGNED_BYTE,et.data)}else this.size=[dt,gt],et instanceof St||et instanceof Ct||et instanceof Pt||et instanceof jt||Lt&&et instanceof Lt?bt.texImage2D(bt.TEXTURE_2D,0,this.format,this.format,bt.UNSIGNED_BYTE,et):bt.texImage2D(bt.TEXTURE_2D,0,this.format,dt,gt,0,this.format,bt.UNSIGNED_BYTE,et.data);this.useMipmap=!!(it&&it.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&bt.generateMipmap(bt.TEXTURE_2D)}bind(et,it){const{context:ct}=this,{gl:dt}=ct;dt.bindTexture(dt.TEXTURE_2D,this.texture),et!==this.filter&&(dt.texParameteri(dt.TEXTURE_2D,dt.TEXTURE_MAG_FILTER,et),dt.texParameteri(dt.TEXTURE_2D,dt.TEXTURE_MIN_FILTER,this.useMipmap?et===dt.NEAREST?dt.NEAREST_MIPMAP_NEAREST:dt.LINEAR_MIPMAP_NEAREST:et),this.filter=et),it!==this.wrap&&(dt.texParameteri(dt.TEXTURE_2D,dt.TEXTURE_WRAP_S,it),dt.texParameteri(dt.TEXTURE_2D,dt.TEXTURE_WRAP_T,it),this.wrap=it)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:et}=this.context;et.deleteTexture(this.texture),this.texture=null}}class DS{constructor(et){this._callback=et,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class LS{constructor(){this.tasks={},this.taskQueue=[],vo(["process"],this),this.invoker=new DS(this.process),this.nextId=0}add(et,it){const ct=this.nextId++,dt=function({type:gt,isSymbolTile:xt,zoom:bt}){return bt=bt||0,gt==="message"?0:gt!=="maybePrepare"||xt?gt!=="parseTile"||xt?gt==="parseTile"&&xt?300-bt:gt==="maybePrepare"&&xt?400-bt:500:200-bt:100-bt}(it);if(dt===0){Ds();try{et()}finally{}return{cancel:()=>{}}}return this.tasks[ct]={fn:et,metadata:it,priority:dt,id:ct},this.taskQueue.push(ct),this.invoker.trigger(),{cancel:()=>{delete this.tasks[ct]}}}process(){Ds();try{if(this.taskQueue=this.taskQueue.filter(ct=>!!this.tasks[ct]),!this.taskQueue.length)return;const et=this.pick();if(et===null)return;const it=this.tasks[et];if(delete this.tasks[et],this.taskQueue.length&&this.invoker.trigger(),!it)return;it.fn()}finally{}}pick(){let et=null,it=1/0;for(let dt=0;dt<this.taskQueue.length;dt++){const gt=this.tasks[this.taskQueue[dt]];gt.priority<it&&(it=gt.priority,et=dt)}if(et===null)return null;const ct=this.taskQueue[et];return this.taskQueue.splice(et,1),ct}remove(){this.invoker.remove()}}class Nw{constructor(et){this._stringToNumber={},this._numberToString=[];for(let it=0;it<et.length;it++){const ct=et[it];this._stringToNumber[ct]=it,this._numberToString[it]=ct}}encode(et){return this._stringToNumber[et]}decode(et){return this._numberToString[et]}}const $S=["tile","layer","source","sourceLayer","state"];class Bw{constructor(et,it,ct,dt,gt){this.type="Feature",this._vectorTileFeature=et,this._z=it,this._x=ct,this._y=dt,this.properties=et.properties,this.id=gt}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(et){this._geometry=et}toJSON(){const et={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(et.id=this.id);for(const it of $S)this[it]!==void 0&&(et[it]=this[it]);return et}}const Xl=32,Su=33,yp=new Uint16Array(8184);for(let tt=0;tt<2046;tt++){let et=tt+2,it=0,ct=0,dt=0,gt=0,xt=0,bt=0;for(1&et?dt=gt=xt=Xl:it=ct=bt=Xl;(et>>=1)>1;){const Ct=it+dt>>1,Pt=ct+gt>>1;1&et?(dt=it,gt=ct,it=xt,ct=bt):(it=dt,ct=gt,dt=xt,gt=bt),xt=Ct,bt=Pt}const St=4*tt;yp[St+0]=it,yp[St+1]=ct,yp[St+2]=dt,yp[St+3]=gt}const Tu=new Uint16Array(2178),_p=new Uint8Array(1089),iv=new Uint16Array(1089);function Fw(tt){return tt===0?-.03125:tt===32?.03125:0}var Uw=Ir([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Vw={type:2,extent:qn,loadGeometry:()=>[[new Mr(0,0),new Mr(qn+1,0),new Mr(qn+1,qn+1),new Mr(0,qn+1),new Mr(0,0)]]};class T0{constructor(et,it,ct,dt,gt){this.tileID=et,this.uid=Fn(),this.uses=0,this.tileSize=it,this.tileZoom=ct,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=gt,this.expiredRequestCount=0,this.state="loading",dt&&dt.transform&&(this.projection=dt.transform.projection)}registerFadeDuration(et){const it=et+this.timeAdded;it<Ql.now()||this.fadeEndTime&&it<this.fadeEndTime||(this.fadeEndTime=it)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=nm(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(et,it,ct){if(this.unloadVectorData(),this.state="loaded",et){et.featureIndex&&(this.latestFeatureIndex=et.featureIndex,et.rawTileData?(this.latestRawTileData=et.rawTileData,this.latestFeatureIndex.rawTileData=et.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=et.collisionBoxArray,this.buckets=function(dt,gt){const xt={};if(!gt)return xt;for(const bt of dt){const St=bt.layerIds.map(Ct=>gt.getLayer(Ct)).filter(Boolean);if(St.length!==0){bt.layers=St,bt.stateDependentLayerIds&&(bt.stateDependentLayers=bt.stateDependentLayerIds.map(Ct=>St.filter(Pt=>Pt.id===Ct)[0]));for(const Ct of St)xt[Ct.id]=bt}}return xt}(et.buckets,it.style),this.hasSymbolBuckets=!1;for(const dt in this.buckets){const gt=this.buckets[dt];if(gt instanceof gp){if(this.hasSymbolBuckets=!0,!ct)break;gt.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const dt in this.buckets){const gt=this.buckets[dt];if(gt instanceof gp&&gt.hasRTLText){this.hasRTLText=!0,At.isLoading()||At.isLoaded()||Et()!=="deferred"||Rt();break}}this.queryPadding=0;for(const dt in this.buckets){const gt=this.buckets[dt];this.queryPadding=Math.max(this.queryPadding,it.style.getLayer(dt).queryRadius(gt))}et.imageAtlas&&(this.imageAtlas=et.imageAtlas),et.glyphAtlasImage&&(this.glyphAtlasImage=et.glyphAtlasImage),et.lineAtlas&&(this.lineAtlas=et.lineAtlas)}else this.collisionBoxArray=new jo}unloadVectorData(){if(this.hasData()){for(const et in this.buckets)this.buckets[et].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(et){return this.buckets[et.id]}upload(et){for(const ct in this.buckets){const dt=this.buckets[ct];dt.uploadPending()&&dt.upload(et)}const it=et.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new P_(et,this.imageAtlas.image,it.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new P_(et,this.glyphAtlasImage,it.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new P_(et,this.lineAtlas.image,it.ALPHA),this.lineAtlas.uploaded=!0)}prepare(et){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(et,this.imageAtlasTexture)}queryRenderedFeatures(et,it,ct,dt,gt,xt,bt,St){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:dt,pixelPosMatrix:bt,transform:xt,params:gt,tileTransform:this.tileTransform},et,it,ct):{}}querySourceFeatures(et,it){const ct=this.latestFeatureIndex;if(!ct||!ct.rawTileData)return;const dt=ct.loadVTLayers(),gt=it?it.sourceLayer:"",xt=dt._geojsonTileLayer||dt[gt];if(!xt)return;const bt=jm(it&&it.filter),{z:St,x:Ct,y:Pt}=this.tileID.canonical,jt={z:St,x:Ct,y:Pt};for(let Lt=0;Lt<xt.length;Lt++){const Bt=xt.feature(Lt);if(bt.needGeometry){const rr=em(Bt,!0);if(!bt.filter(new It(this.tileID.overscaledZ),rr,this.tileID.canonical))continue}else if(!bt.filter(new It(this.tileID.overscaledZ),Bt))continue;const Ft=ct.getId(Bt,gt),Wt=new Bw(Bt,St,Ct,Pt,Ft);Wt.tile=jt,et.push(Wt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(et){const it=this.expirationTime;if(et.cacheControl){const ct=vs(et.cacheControl);ct["max-age"]&&(this.expirationTime=Date.now()+1e3*ct["max-age"])}else et.expires&&(this.expirationTime=new Date(et.expires).getTime());if(this.expirationTime){const ct=Date.now();let dt=!1;if(this.expirationTime>ct)dt=!1;else if(it)if(this.expirationTime<it)dt=!0;else{const gt=this.expirationTime-it;gt?this.expirationTime=ct+Math.max(gt,3e4):dt=!0}else dt=!0;dt?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(et,it){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(et).length===0||!it)return;const ct=this.latestFeatureIndex.loadVTLayers(),dt=it.style.listImages();for(const gt in this.buckets){if(!it.style.hasLayer(gt))continue;const xt=this.buckets[gt],bt=xt.layers[0].sourceLayer||"_geojsonTileLayer",St=ct[bt],Ct=et[bt];if(!St||!Ct||Object.keys(Ct).length===0)continue;if(xt.update(Ct,St,dt,this.imageAtlas&&this.imageAtlas.patternPositions||{}),xt instanceof Vx||xt instanceof zx){const jt=it.style._getSourceCache(xt.layers[0].source);it._terrain&&it._terrain.enabled&&jt&&xt.programConfigurations.needsUpload&&it._terrain._clearRenderCacheForTile(jt.id,this.tileID)}const Pt=it&&it.style&&it.style.getLayer(gt);Pt&&(this.queryPadding=Math.max(this.queryPadding,Pt.queryRadius(xt)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ql.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(et){this.symbolFadeHoldUntil=Ql.now()+et}setTexture(et,it){const ct=it.context,dt=ct.gl;this.texture=this.texture||it.getTileTexture(et.width),this.texture?this.texture.update(et,{useMipmap:!0}):(this.texture=new P_(ct,et,dt.RGBA,{useMipmap:!0}),this.texture.bind(dt.LINEAR,dt.CLAMP_TO_EDGE))}setDependencies(et,it){const ct={};for(const dt of it)ct[dt]=!0;this.dependencies[et]=ct}hasDependency(et,it){for(const ct of et){const dt=this.dependencies[ct];if(dt){for(const gt of it)if(dt[gt])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(et,it){if(!it||it.name==="mercator"||this._tileDebugBuffer)return;const ct=Uu(Vw,this.tileID.canonical,this.tileTransform)[0],dt=new wn,gt=new El;for(let xt=0;xt<ct.length;xt++){const{x:bt,y:St}=ct[xt];dt.emplaceBack(bt,St),gt.emplaceBack(xt)}gt.emplaceBack(0),this._tileDebugIndexBuffer=et.createIndexBuffer(gt),this._tileDebugBuffer=et.createVertexBuffer(dt,l_.members),this._tileDebugSegments=us.simpleSegment(0,0,dt.length,gt.length)}_makeTileBoundsBuffers(et,it){if(this._tileBoundsBuffer||!it||it.name==="mercator")return;const ct=Uu(Vw,this.tileID.canonical,this.tileTransform)[0];let dt,gt;if(this.isRaster){const xt=function(bt,St){const Ct=nm(bt,St),Pt=Math.pow(2,bt.z);for(let rr=0;rr<Su;rr++)for(let cr=0;cr<Su;cr++){const yr=$l((bt.x+(cr+Fw(cr))/Xl)/Pt),ur=Ns((bt.y+(rr+Fw(rr))/Xl)/Pt),mr=St.project(yr,ur),xr=rr*Su+cr;Tu[2*xr+0]=Math.round((mr.x*Ct.scale-Ct.x)*qn),Tu[2*xr+1]=Math.round((mr.y*Ct.scale-Ct.y)*qn)}_p.fill(0),iv.fill(0);for(let rr=2045;rr>=0;rr--){const cr=4*rr,yr=yp[cr+0],ur=yp[cr+1],mr=yp[cr+2],xr=yp[cr+3],_r=yr+mr>>1,Vr=ur+xr>>1,Br=_r+Vr-ur,Qr=Vr+yr-_r,bn=ur*Su+yr,Wr=xr*Su+mr,pn=Vr*Su+_r,mn=Math.hypot((Tu[2*bn+0]+Tu[2*Wr+0])/2-Tu[2*pn+0],(Tu[2*bn+1]+Tu[2*Wr+1])/2-Tu[2*pn+1])>=16;_p[pn]=_p[pn]||(mn?1:0),rr<1022&&(_p[pn]=_p[pn]||_p[(ur+Qr>>1)*Su+(yr+Br>>1)]||_p[(xr+Qr>>1)*Su+(mr+Br>>1)])}const jt=new hn,Lt=new Vn;let Bt=0;function Ft(rr,cr){const yr=cr*Su+rr;return iv[yr]===0&&(jt.emplaceBack(Tu[2*yr+0],Tu[2*yr+1],rr*qn/Xl,cr*qn/Xl),iv[yr]=++Bt),iv[yr]-1}function Wt(rr,cr,yr,ur,mr,xr){const _r=rr+yr>>1,Vr=cr+ur>>1;if(Math.abs(rr-mr)+Math.abs(cr-xr)>1&&_p[Vr*Su+_r])Wt(mr,xr,rr,cr,_r,Vr),Wt(yr,ur,mr,xr,_r,Vr);else{const Br=Ft(rr,cr),Qr=Ft(yr,ur),bn=Ft(mr,xr);Lt.emplaceBack(Br,Qr,bn)}}return Wt(0,0,Xl,Xl,Xl,0),Wt(Xl,Xl,0,0,0,Xl),{vertices:jt,indices:Lt}}(this.tileID.canonical,it);dt=xt.vertices,gt=xt.indices}else{dt=new hn,gt=new Vn;for(const{x:bt,y:St}of ct)dt.emplaceBack(bt,St,0,0);const xt=o0(dt.int16,void 0,4);for(let bt=0;bt<xt.length;bt+=3)gt.emplaceBack(xt[bt],xt[bt+1],xt[bt+2])}this._tileBoundsBuffer=et.createVertexBuffer(dt,Uw.members),this._tileBoundsIndexBuffer=et.createIndexBuffer(gt),this._tileBoundsSegments=us.simpleSegment(0,0,dt.length,gt.length)}_makeGlobeTileDebugBuffers(et,it){const ct=it.projection;if(!ct||ct.name!=="globe"||it.freezeTileCoverage)return;const dt=this.tileID.canonical,gt=h_(u1(dt,it)),xt=Vm(it.zoom);let bt;xt>0&&(bt=jv(new Float64Array(16),it.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(et,dt,it,gt,bt,xt),this._makeGlobeTileDebugTextBuffer(et,dt,it,gt,bt,xt)}_globePoint(et,it,ct,dt,gt,xt,bt){let St=u_(et,it,ct);if(xt){const Ct=1<<ct.z,Pt=bu(dt.center.lng),jt=Eu(dt.center.lat),Lt=(ct.x+.5)/Ct-Pt;let Bt=0;Lt>.5?Bt=-1:Lt<-.5&&(Bt=1);let Ft=(et/qn+ct.x)/Ct+Bt,Wt=(it/qn+ct.y)/Ct;Ft=(Ft-Pt)*dt._pixelsPerMercatorPixel+Pt,Wt=(Wt-jt)*dt._pixelsPerMercatorPixel+jt;const rr=[Ft*dt.worldSize,Wt*dt.worldSize,0];ns(rr,rr,xt),St=_f(St,rr,bt)}return ns(St,St,gt)}_makeGlobeTileDebugBorderBuffer(et,it,ct,dt,gt,xt){const bt=new wn,St=new El,Ct=new Nr,Pt=(Lt,Bt,Ft,Wt,rr)=>{const cr=(Ft-Lt)/(rr-1),yr=(Wt-Bt)/(rr-1),ur=bt.length;for(let mr=0;mr<rr;mr++){const xr=Lt+mr*cr,_r=Bt+mr*yr;bt.emplaceBack(xr,_r);const Vr=this._globePoint(xr,_r,it,ct,dt,gt,xt);Ct.emplaceBack(Vr[0],Vr[1],Vr[2]),St.emplaceBack(ur+mr)}},jt=qn;Pt(0,0,jt,0,16),Pt(jt,0,jt,jt,16),Pt(jt,jt,0,jt,16),Pt(0,jt,0,0,16),this._tileDebugIndexBuffer=et.createIndexBuffer(St),this._tileDebugBuffer=et.createVertexBuffer(bt,l_.members),this._globeTileDebugBorderBuffer=et.createVertexBuffer(Ct,a1.members),this._tileDebugSegments=us.simpleSegment(0,0,bt.length,St.length)}_makeGlobeTileDebugTextBuffer(et,it,ct,dt,gt,xt){const bt=qn/4,St=new wn,Ct=new Vn,Pt=new Nr,jt=25;Ct.reserve(32),St.reserve(jt),Pt.reserve(jt);const Lt=(Bt,Ft)=>jt*Bt+Ft;for(let Bt=0;Bt<jt;Bt++){const Ft=Bt*bt;for(let Wt=0;Wt<jt;Wt++){const rr=Wt*bt;St.emplaceBack(rr,Ft);const cr=this._globePoint(rr,Ft,it,ct,dt,gt,xt);Pt.emplaceBack(cr[0],cr[1],cr[2])}}for(let Bt=0;Bt<4;Bt++)for(let Ft=0;Ft<4;Ft++){const Wt=Lt(Bt,Ft),rr=Lt(Bt,Ft+1),cr=Lt(Bt+1,Ft),yr=Lt(Bt+1,Ft+1);Ct.emplaceBack(Wt,rr,cr),Ct.emplaceBack(cr,rr,yr)}this._tileDebugTextIndexBuffer=et.createIndexBuffer(Ct),this._tileDebugTextBuffer=et.createVertexBuffer(St,l_.members),this._globeTileDebugTextBuffer=et.createVertexBuffer(Pt,a1.members),this._tileDebugTextSegments=us.simpleSegment(0,0,jt,32)}}class OS{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(et,it,ct){const dt=String(it);if(this.stateChanges[et]=this.stateChanges[et]||{},this.stateChanges[et][dt]=this.stateChanges[et][dt]||{},kn(this.stateChanges[et][dt],ct),this.deletedStates[et]===null){this.deletedStates[et]={};for(const gt in this.state[et])gt!==dt&&(this.deletedStates[et][gt]=null)}else if(this.deletedStates[et]&&this.deletedStates[et][dt]===null){this.deletedStates[et][dt]={};for(const gt in this.state[et][dt])ct[gt]||(this.deletedStates[et][dt][gt]=null)}else for(const gt in ct)this.deletedStates[et]&&this.deletedStates[et][dt]&&this.deletedStates[et][dt][gt]===null&&delete this.deletedStates[et][dt][gt]}removeFeatureState(et,it,ct){if(this.deletedStates[et]===null)return;const dt=String(it);if(this.deletedStates[et]=this.deletedStates[et]||{},ct&&it!==void 0)this.deletedStates[et][dt]!==null&&(this.deletedStates[et][dt]=this.deletedStates[et][dt]||{},this.deletedStates[et][dt][ct]=null);else if(it!==void 0)if(this.stateChanges[et]&&this.stateChanges[et][dt])for(ct in this.deletedStates[et][dt]={},this.stateChanges[et][dt])this.deletedStates[et][dt][ct]=null;else this.deletedStates[et][dt]=null;else this.deletedStates[et]=null}getState(et,it){const ct=String(it),dt=kn({},(this.state[et]||{})[ct],(this.stateChanges[et]||{})[ct]);if(this.deletedStates[et]===null)return{};if(this.deletedStates[et]){const gt=this.deletedStates[et][it];if(gt===null)return{};for(const xt in gt)delete dt[xt]}return dt}initializeTileState(et,it){et.setFeatureState(this.state,it)}coalesceChanges(et,it){const ct={};for(const dt in this.stateChanges){this.state[dt]=this.state[dt]||{};const gt={};for(const xt in this.stateChanges[dt])this.state[dt][xt]||(this.state[dt][xt]={}),kn(this.state[dt][xt],this.stateChanges[dt][xt]),gt[xt]=this.state[dt][xt];ct[dt]=gt}for(const dt in this.deletedStates){this.state[dt]=this.state[dt]||{};const gt={};if(this.deletedStates[dt]===null)for(const xt in this.state[dt])gt[xt]={},this.state[dt][xt]={};else for(const xt in this.deletedStates[dt]){if(this.deletedStates[dt][xt]===null)this.state[dt][xt]={};else if(this.state[dt][xt])for(const bt of Object.keys(this.deletedStates[dt][xt]))delete this.state[dt][xt][bt];gt[xt]=this.state[dt][xt]}ct[dt]=ct[dt]||{},kn(ct[dt],gt)}if(this.stateChanges={},this.deletedStates={},Object.keys(ct).length!==0)for(const dt in et)et[dt].setFeatureState(ct,it)}}class Gw{constructor(et){this.size=et,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(et,it){const ct=this.toIdx(et,it);return{min:this.minimums[ct],max:this.maximums[ct]}}isLeaf(et,it){return this.leaves[this.toIdx(et,it)]}toIdx(et,it){return it*this.size+et}}function Hw(tt,et,it,ct){let dt=0,gt=Number.MAX_VALUE;for(let xt=0;xt<3;xt++)if(Math.abs(ct[xt])<1e-15){if(it[xt]<tt[xt]||it[xt]>et[xt])return null}else{const bt=1/ct[xt];let St=(tt[xt]-it[xt])*bt,Ct=(et[xt]-it[xt])*bt;if(St>Ct){const Pt=St;St=Ct,Ct=Pt}if(St>dt&&(dt=St),Ct<gt&&(gt=Ct),dt>gt)return null}return dt}function Ww(tt,et,it,ct,dt,gt,xt,bt,St,Ct,Pt){const jt=ct-tt,Lt=dt-et,Bt=gt-it,Ft=xt-tt,Wt=bt-et,rr=St-it,cr=Pt[1]*rr-Pt[2]*Wt,yr=Pt[2]*Ft-Pt[0]*rr,ur=Pt[0]*Wt-Pt[1]*Ft,mr=jt*cr+Lt*yr+Bt*ur;if(Math.abs(mr)<1e-15)return null;const xr=1/mr,_r=Ct[0]-tt,Vr=Ct[1]-et,Br=Ct[2]-it,Qr=(_r*cr+Vr*yr+Br*ur)*xr;if(Qr<0||Qr>1)return null;const bn=Vr*Bt-Br*Lt,Wr=Br*jt-_r*Bt,pn=_r*Lt-Vr*jt,mn=(Pt[0]*bn+Pt[1]*Wr+Pt[2]*pn)*xr;return mn<0||Qr+mn>1?null:(Ft*bn+Wt*Wr+rr*pn)*xr}function qw(tt,et,it){return(tt-et)/(it-et)}function Zw(tt,et,it,ct,dt,gt,xt,bt,St){const Ct=1<<it,Pt=gt-ct,jt=xt-dt,Lt=(tt+1)/Ct*Pt+ct,Bt=(et+0)/Ct*jt+dt,Ft=(et+1)/Ct*jt+dt;bt[0]=(tt+0)/Ct*Pt+ct,bt[1]=Bt,St[0]=Lt,St[1]=Ft}class Xw{constructor(et){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=et,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const it=function(gt){const xt=Math.ceil(Math.log2(gt.dim/8)),bt=[];let St=Math.ceil(Math.pow(2,xt));const Ct=1/St,Pt=(Bt,Ft,Wt,rr,cr)=>{const yr=rr?1:0,ur=(Bt+1)*Wt-yr,mr=Ft*Wt,xr=(Ft+1)*Wt-yr;cr[0]=Bt*Wt,cr[1]=mr,cr[2]=ur,cr[3]=xr};let jt=new Gw(St);const Lt=[];for(let Bt=0;Bt<St*St;Bt++){Pt(Bt%St,Math.floor(Bt/St),Ct,!1,Lt);const Ft=xp(Lt[0],Lt[1],gt),Wt=xp(Lt[2],Lt[1],gt),rr=xp(Lt[2],Lt[3],gt),cr=xp(Lt[0],Lt[3],gt);jt.minimums.push(Math.min(Ft,Wt,rr,cr)),jt.maximums.push(Math.max(Ft,Wt,rr,cr)),jt.leaves.push(1)}for(bt.push(jt),St/=2;St>=1;St/=2){const Bt=bt[bt.length-1];jt=new Gw(St);for(let Ft=0;Ft<St*St;Ft++){Pt(Ft%St,Math.floor(Ft/St),2,!0,Lt);const Wt=Bt.getElevation(Lt[0],Lt[1]),rr=Bt.getElevation(Lt[2],Lt[1]),cr=Bt.getElevation(Lt[2],Lt[3]),yr=Bt.getElevation(Lt[0],Lt[3]),ur=Bt.isLeaf(Lt[0],Lt[1]),mr=Bt.isLeaf(Lt[2],Lt[1]),xr=Bt.isLeaf(Lt[2],Lt[3]),_r=Bt.isLeaf(Lt[0],Lt[3]),Vr=Math.min(Wt.min,rr.min,cr.min,yr.min),Br=Math.max(Wt.max,rr.max,cr.max,yr.max),Qr=ur&&mr&&xr&&_r;jt.maximums.push(Br),jt.minimums.push(Vr),jt.leaves.push(Br-Vr<=5&&Qr?1:0)}bt.push(jt)}return bt}(this.dem),ct=it.length-1,dt=it[ct];this._addNode(dt.minimums[0],dt.maximums[0],dt.leaves[0]),this._construct(it,0,0,ct,0)}raycastRoot(et,it,ct,dt,gt,xt,bt=1){return Hw([et,it,-100],[ct,dt,this.maximums[0]*bt],gt,xt)}raycast(et,it,ct,dt,gt,xt,bt=1){if(!this.nodeCount)return null;const St=this.raycastRoot(et,it,ct,dt,gt,xt,bt);if(St==null)return null;const Ct=[],Pt=[],jt=[],Lt=[],Bt=[{idx:0,t:St,nodex:0,nodey:0,depth:0}];for(;Bt.length>0;){const{idx:Ft,t:Wt,nodex:rr,nodey:cr,depth:yr}=Bt.pop();if(this.leaves[Ft]){Zw(rr,cr,yr,et,it,ct,dt,jt,Lt);const mr=1<<yr,xr=(rr+0)/mr,_r=(rr+1)/mr,Vr=(cr+0)/mr,Br=(cr+1)/mr,Qr=xp(xr,Vr,this.dem)*bt,bn=xp(_r,Vr,this.dem)*bt,Wr=xp(_r,Br,this.dem)*bt,pn=xp(xr,Br,this.dem)*bt,mn=Ww(jt[0],jt[1],Qr,Lt[0],jt[1],bn,Lt[0],Lt[1],Wr,gt,xt),_n=Ww(Lt[0],Lt[1],Wr,jt[0],Lt[1],pn,jt[0],jt[1],Qr,gt,xt),Cn=Math.min(mn!==null?mn:Number.MAX_VALUE,_n!==null?_n:Number.MAX_VALUE);if(Cn!==Number.MAX_VALUE)return Cn;{const Kr=s_([],gt,xt,Wt);if(Kw(Qr,bn,pn,Wr,qw(Kr[0],jt[0],Lt[0]),qw(Kr[1],jt[1],Lt[1]))>=Kr[2])return Wt}continue}let ur=0;for(let mr=0;mr<this._siblingOffset.length;mr++){Zw((rr<<1)+this._siblingOffset[mr][0],(cr<<1)+this._siblingOffset[mr][1],yr+1,et,it,ct,dt,jt,Lt),jt[2]=-100,Lt[2]=this.maximums[this.childOffsets[Ft]+mr]*bt;const xr=Hw(jt,Lt,gt,xt);if(xr!=null){const _r=xr;Ct[mr]=_r;let Vr=!1;for(let Br=0;Br<ur&&!Vr;Br++)_r>=Ct[Pt[Br]]&&(Pt.splice(Br,0,mr),Vr=!0);Vr||(Pt[ur]=mr),ur++}}for(let mr=0;mr<ur;mr++){const xr=Pt[mr];Bt.push({idx:this.childOffsets[Ft]+xr,t:Ct[xr],nodex:(rr<<1)+this._siblingOffset[xr][0],nodey:(cr<<1)+this._siblingOffset[xr][1],depth:yr+1})}}return null}_addNode(et,it,ct){return this.minimums.push(et),this.maximums.push(it),this.leaves.push(ct),this.childOffsets.push(0),this.nodeCount++}_construct(et,it,ct,dt,gt){if(et[dt].isLeaf(it,ct)===1)return;this.childOffsets[gt]||(this.childOffsets[gt]=this.nodeCount);const xt=dt-1,bt=et[xt];let St=0,Ct=0;for(let Pt=0;Pt<this._siblingOffset.length;Pt++){const jt=2*it+this._siblingOffset[Pt][0],Lt=2*ct+this._siblingOffset[Pt][1],Bt=bt.getElevation(jt,Lt),Ft=bt.isLeaf(jt,Lt),Wt=this._addNode(Bt.min,Bt.max,Ft);Ft&&(St|=1<<Pt),Ct||(Ct=Wt)}for(let Pt=0;Pt<this._siblingOffset.length;Pt++)St&1<<Pt||this._construct(et,2*it+this._siblingOffset[Pt][0],2*ct+this._siblingOffset[Pt][1],xt,Ct+Pt)}}function Kw(tt,et,it,ct,dt,gt){return yo(yo(tt,it,gt),yo(et,ct,gt),dt)}function xp(tt,et,it){const ct=it.dim,dt=Pr(tt*ct-.5,0,ct-1),gt=Pr(et*ct-.5,0,ct-1),xt=Math.floor(dt),bt=Math.floor(gt),St=Math.min(xt+1,ct-1),Ct=Math.min(bt+1,ct-1);return Kw(it.get(xt,bt),it.get(St,bt),it.get(xt,Ct),it.get(St,Ct),dt-xt,gt-bt)}const Yw={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function zS(tt,et,it){return(256*tt*256+256*et+it)/10-1e4}function NS(tt,et,it){return 256*tt+et+it/256-32768}class ov{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(et,it,ct,dt=!1,gt=!1){if(this.uid=et,it.height!==it.width)throw new RangeError("DEM tiles must be square");if(ct&&ct!=="mapbox"&&ct!=="terrarium")return Hn(`"${ct}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=it.height;const xt=this.dim=it.height-2,bt=new Uint32Array(it.data.buffer);if(this.pixels=new Uint8Array(it.data.buffer),this.encoding=ct||"mapbox",this.borderReady=dt,!dt){for(let St=0;St<xt;St++)bt[this._idx(-1,St)]=bt[this._idx(0,St)],bt[this._idx(xt,St)]=bt[this._idx(xt-1,St)],bt[this._idx(St,-1)]=bt[this._idx(St,0)],bt[this._idx(St,xt)]=bt[this._idx(St,xt-1)];bt[this._idx(-1,-1)]=bt[this._idx(0,0)],bt[this._idx(xt,-1)]=bt[this._idx(xt-1,0)],bt[this._idx(-1,xt)]=bt[this._idx(0,xt-1)],bt[this._idx(xt,xt)]=bt[this._idx(xt-1,xt-1)],gt&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Xw(this)}get(et,it,ct=!1){ct&&(et=Pr(et,-1,this.dim),it=Pr(it,-1,this.dim));const dt=4*this._idx(et,it);return(this.encoding==="terrarium"?NS:zS)(this.pixels[dt],this.pixels[dt+1],this.pixels[dt+2])}static getUnpackVector(et){return Yw[et]}get unpackVector(){return Yw[this.encoding]}_idx(et,it){if(et<-1||et>=this.dim+1||it<-1||it>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(it+1)*this.stride+(et+1)}static pack(et,it){const ct=[0,0,0,0],dt=ov.getUnpackVector(it);let gt=Math.floor((et+dt[3])/dt[2]);return ct[2]=gt%256,gt=Math.floor(gt/256),ct[1]=gt%256,gt=Math.floor(gt/256),ct[0]=gt,ct}getPixels(){return new Tl({width:this.stride,height:this.stride},this.pixels)}backfillBorder(et,it,ct){if(this.dim!==et.dim)throw new Error("dem dimension mismatch");let dt=it*this.dim,gt=it*this.dim+this.dim,xt=ct*this.dim,bt=ct*this.dim+this.dim;switch(it){case-1:dt=gt-1;break;case 1:gt=dt+1}switch(ct){case-1:xt=bt-1;break;case 1:bt=xt+1}const St=-it*this.dim,Ct=-ct*this.dim;for(let Pt=xt;Pt<bt;Pt++)for(let jt=dt;jt<gt;jt++){const Lt=4*this._idx(jt,Pt),Bt=4*this._idx(jt+St,Pt+Ct);this.pixels[Lt+0]=et.pixels[Bt+0],this.pixels[Lt+1]=et.pixels[Bt+1],this.pixels[Lt+2]=et.pixels[Bt+2],this.pixels[Lt+3]=et.pixels[Bt+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}$n(ov,"DEMData"),$n(Xw,"DemMinMaxQuadTree",{omit:["dem"]});class BS{constructor(et,it){this.max=et,this.onRemove=it,this.reset()}reset(){for(const et in this.data)for(const it of this.data[et])it.timeout&&clearTimeout(it.timeout),this.onRemove(it.value);return this.data={},this.order=[],this}add(et,it,ct){const dt=et.wrapped().key;this.data[dt]===void 0&&(this.data[dt]=[]);const gt={value:it,timeout:void 0};if(ct!==void 0&&(gt.timeout=setTimeout(()=>{this.remove(et,gt)},ct)),this.data[dt].push(gt),this.order.push(dt),this.order.length>this.max){const xt=this._getAndRemoveByKey(this.order[0]);xt&&this.onRemove(xt)}return this}has(et){return et.wrapped().key in this.data}getAndRemove(et){return this.has(et)?this._getAndRemoveByKey(et.wrapped().key):null}_getAndRemoveByKey(et){const it=this.data[et].shift();return it.timeout&&clearTimeout(it.timeout),this.data[et].length===0&&delete this.data[et],this.order.splice(this.order.indexOf(et),1),it.value}getByKey(et){const it=this.data[et];return it?it[0].value:null}get(et){return this.has(et)?this.data[et.wrapped().key][0].value:null}remove(et,it){if(!this.has(et))return this;const ct=et.wrapped().key,dt=it===void 0?0:this.data[ct].indexOf(it),gt=this.data[ct][dt];return this.data[ct].splice(dt,1),gt.timeout&&clearTimeout(gt.timeout),this.data[ct].length===0&&delete this.data[ct],this.onRemove(gt.value),this.order.splice(this.order.indexOf(ct),1),this}setMaxSize(et){for(this.max=et;this.order.length>this.max;){const it=this._getAndRemoveByKey(this.order[0]);it&&this.onRemove(it)}return this}filter(et){const it=[];for(const ct in this.data)for(const dt of this.data[ct])et(dt.value)||it.push(dt);for(const ct of it)this.remove(ct.value.tileID,ct)}}class ny{constructor(et,it,ct){this.func=et,this.mask=it,this.range=ct}}ny.ReadOnly=!1,ny.ReadWrite=!0,ny.disabled=new ny(519,ny.ReadOnly,[0,1]);const C0=7680;class R0{constructor(et,it,ct,dt,gt,xt){this.test=et,this.ref=it,this.mask=ct,this.fail=dt,this.depthFail=gt,this.pass=xt}}R0.disabled=new R0({func:519,mask:0},0,0,C0,C0,C0);class Cu{constructor(et,it,ct){this.blendFunction=et,this.blendColor=it,this.mask=ct}}Cu.Replace=[1,0],Cu.disabled=new Cu(Cu.Replace,rs.transparent,[!1,!1,!1,!1]),Cu.unblended=new Cu(Cu.Replace,rs.transparent,[!0,!0,!0,!0]),Cu.alphaBlended=new Cu([1,771],rs.transparent,[!0,!0,!0,!0]);const A0=1029,k0=2305;class mu{constructor(et,it,ct){this.enable=et,this.mode=it,this.frontFace=ct}}mu.disabled=new mu(!1,A0,k0),mu.backCCW=new mu(!0,A0,k0),mu.backCW=new mu(!0,A0,2304),mu.frontCW=new mu(!0,1028,2304),mu.frontCCW=new mu(!0,1028,k0);class im extends bp{constructor(et,it,ct){super(),this.id=et,this._onlySymbols=ct,it.on("data",dt=>{dt.dataType==="source"&&dt.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&dt.dataType==="source"&&dt.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),it.on("error",()=>{this._sourceErrored=!0}),this._source=it,this._tiles={},this._cache=new BS(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=it.minTileCacheSize,this._maxTileCacheSize=it.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new OS,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(et){this.map=et,this._minTileCacheSize=this._minTileCacheSize===void 0&&et?et._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&et?et._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const et in this._tiles){const it=this._tiles[et];if(it.state!=="loaded"&&it.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const et=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,et&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(et,it){return et.isSymbolTile=this._onlySymbols,this._source.loadTile(et,it)}_unloadTile(et){if(this._source.unloadTile)return this._source.unloadTile(et,()=>{})}_abortTile(et){if(this._source.abortTile)return this._source.abortTile(et,()=>{})}serialize(){return this._source.serialize()}prepare(et){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const it in this._tiles){const ct=this._tiles[it];ct.upload(et),ct.prepare(this.map.style.imageManager)}}getIds(){return ln(this._tiles).map(et=>et.tileID).sort(Qw).map(et=>et.key)}getRenderableIds(et){const it=[];for(const ct in this._tiles)this._isIdRenderable(+ct,et)&&it.push(this._tiles[ct]);return et?it.sort((ct,dt)=>{const gt=ct.tileID,xt=dt.tileID,bt=new Mr(gt.canonical.x,gt.canonical.y)._rotate(this.transform.angle),St=new Mr(xt.canonical.x,xt.canonical.y)._rotate(this.transform.angle);return gt.overscaledZ-xt.overscaledZ||St.y-bt.y||St.x-bt.x}).map(ct=>ct.tileID.key):it.map(ct=>ct.tileID).sort(Qw).map(ct=>ct.key)}hasRenderableParent(et){const it=this.findLoadedParent(et,0);return!!it&&this._isIdRenderable(it.tileID.key)}_isIdRenderable(et,it){return this._tiles[et]&&this._tiles[et].hasData()&&!this._coveredTiles[et]&&(it||!this._tiles[et].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const et in this._tiles)this._tiles[et].state!=="errored"&&this._reloadTile(+et,"reloading")}}_reloadTile(et,it){const ct=this._tiles[et];ct&&(ct.state!=="loading"&&(ct.state=it),this._loadTile(ct,this._tileLoaded.bind(this,ct,et,it)))}_tileLoaded(et,it,ct,dt){if(dt)if(et.state="errored",dt.status!==404)this._source.fire(new Jl(dt,{tile:et}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const gt=this.map.painter.terrain;this.update(this.transform,gt.getScaledDemTileSize(),!0),gt.resetTileLookupCache(this.id)}else this.update(this.transform);else et.timeAdded=Ql.now(),ct==="expired"&&(et.refreshedUponExpiration=!0),this._setTileReloadTimer(it,et),this._source.type==="raster-dem"&&et.dem&&this._backfillDEM(et),this._state.initializeTileState(et,this.map?this.map.painter:null),this._source.fire(new Au("data",{dataType:"source",tile:et,coord:et.tileID,sourceCacheId:this.id}))}_backfillDEM(et){const it=this.getRenderableIds();for(let dt=0;dt<it.length;dt++){const gt=it[dt];if(et.neighboringTiles&&et.neighboringTiles[gt]){const xt=this.getTileByID(gt);ct(et,xt),ct(xt,et)}}function ct(dt,gt){if(!dt.dem||dt.dem.borderReady)return;dt.needsHillshadePrepare=!0,dt.needsDEMTextureUpload=!0;let xt=gt.tileID.canonical.x-dt.tileID.canonical.x;const bt=gt.tileID.canonical.y-dt.tileID.canonical.y,St=Math.pow(2,dt.tileID.canonical.z),Ct=gt.tileID.key;xt===0&&bt===0||Math.abs(bt)>1||(Math.abs(xt)>1&&(Math.abs(xt+St)===1?xt+=St:Math.abs(xt-St)===1&&(xt-=St)),gt.dem&&dt.dem&&(dt.dem.backfillBorder(gt.dem,xt,bt),dt.neighboringTiles&&dt.neighboringTiles[Ct]&&(dt.neighboringTiles[Ct].backfilled=!0)))}}getTile(et){return this.getTileByID(et.key)}getTileByID(et){return this._tiles[et]}_retainLoadedChildren(et,it,ct,dt){for(const gt in this._tiles){let xt=this._tiles[gt];if(dt[gt]||!xt.hasData()||xt.tileID.overscaledZ<=it||xt.tileID.overscaledZ>ct)continue;let bt=xt.tileID;for(;xt&&xt.tileID.overscaledZ>it+1;){const Ct=xt.tileID.scaledTo(xt.tileID.overscaledZ-1);xt=this._tiles[Ct.key],xt&&xt.hasData()&&(bt=Ct)}let St=bt;for(;St.overscaledZ>it;)if(St=St.scaledTo(St.overscaledZ-1),et[St.key]){dt[bt.key]=bt;break}}}findLoadedParent(et,it){if(et.key in this._loadedParentTiles){const ct=this._loadedParentTiles[et.key];return ct&&ct.tileID.overscaledZ>=it?ct:null}for(let ct=et.overscaledZ-1;ct>=it;ct--){const dt=et.scaledTo(ct),gt=this._getLoadedTile(dt);if(gt)return gt}}_getLoadedTile(et){const it=this._tiles[et.key];return it&&it.hasData()?it:this._cache.getByKey(this._source.reparseOverscaled?et.wrapped().key:et.canonical.key)}updateCacheSize(et,it){it=it||this._source.tileSize;const ct=Math.ceil(et.width/it)+1,dt=Math.ceil(et.height/it)+1,gt=Math.floor(ct*dt*5),xt=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,gt):gt,bt=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,xt):xt;this._cache.setMaxSize(bt)}handleWrapJump(et){const it=Math.round((et-(this._prevLng===void 0?et:this._prevLng))/360);if(this._prevLng=et,it){const ct={};for(const dt in this._tiles){const gt=this._tiles[dt];gt.tileID=gt.tileID.unwrapTo(gt.tileID.wrap+it),ct[gt.tileID.key]=gt}this._tiles=ct;for(const dt in this._timers)clearTimeout(this._timers[dt]),delete this._timers[dt];for(const dt in this._tiles)this._setTileReloadTimer(+dt,this._tiles[dt])}}update(et,it,ct){if(this.transform=et,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!ct)return;let dt;this.updateCacheSize(et,it),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?dt=et.getVisibleUnwrappedCoordinates(this._source.tileID).map(bt=>new Xs(bt.canonical.z,bt.wrap,bt.canonical.z,bt.canonical.x,bt.canonical.y)):(dt=et.coveringTiles({tileSize:it||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!ct,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(dt=dt.filter(bt=>this._source.hasTile(bt)))):dt=[];const gt=this._updateRetainedTiles(dt);if(Jw(this._source.type)&&dt.length!==0){const bt={},St={},Ct=Object.keys(gt);for(const jt of Ct){const Lt=gt[jt],Bt=this._tiles[jt];if(!Bt||Bt.fadeEndTime&&Bt.fadeEndTime<=Ql.now())continue;const Ft=this.findLoadedParent(Lt,Math.max(Lt.overscaledZ-im.maxOverzooming,this._source.minzoom));Ft&&(this._addTile(Ft.tileID),bt[Ft.tileID.key]=Ft.tileID),St[jt]=Lt}const Pt=dt[dt.length-1].overscaledZ;for(const jt in this._tiles){const Lt=this._tiles[jt];if(gt[jt]||!Lt.hasData())continue;let Bt=Lt.tileID;for(;Bt.overscaledZ>Pt;){Bt=Bt.scaledTo(Bt.overscaledZ-1);const Ft=this._tiles[Bt.key];if(Ft&&Ft.hasData()&&St[Bt.key]){gt[jt]=Lt.tileID;break}}}for(const jt in bt)gt[jt]||(this._coveredTiles[jt]=!0,gt[jt]=bt[jt])}for(const bt in gt)this._tiles[bt].clearFadeHold();const xt=function(bt,St){const Ct=[];for(const Pt in bt)Pt in St||Ct.push(Pt);return Ct}(this._tiles,gt);for(const bt of xt){const St=this._tiles[bt];St.hasSymbolBuckets&&!St.holdingForFade()?St.setHoldDuration(this.map._fadeDuration):St.hasSymbolBuckets&&!St.symbolFadeFinished()||this._removeTile(+bt)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const et in this._tiles)this._tiles[et].holdingForFade()&&this._removeTile(+et)}_updateRetainedTiles(et){const it={};if(et.length===0)return it;const ct={},dt=et.reduce((Ct,Pt)=>Math.min(Ct,Pt.overscaledZ),1/0),gt=et[0].overscaledZ,xt=Math.max(gt-im.maxOverzooming,this._source.minzoom),bt=Math.max(gt+im.maxUnderzooming,this._source.minzoom),St={};for(const Ct of et){const Pt=this._addTile(Ct);it[Ct.key]=Ct,Pt.hasData()||dt<this._source.maxzoom&&(St[Ct.key]=Ct)}this._retainLoadedChildren(St,dt,bt,it);for(const Ct of et){let Pt=this._tiles[Ct.key];if(Pt.hasData())continue;if(Ct.canonical.z>=this._source.maxzoom){const Lt=Ct.children(this._source.maxzoom)[0],Bt=this.getTile(Lt);if(Bt&&Bt.hasData()){it[Lt.key]=Lt;continue}}else{const Lt=Ct.children(this._source.maxzoom);if(it[Lt[0].key]&&it[Lt[1].key]&&it[Lt[2].key]&&it[Lt[3].key])continue}let jt=Pt.wasRequested();for(let Lt=Ct.overscaledZ-1;Lt>=xt;--Lt){const Bt=Ct.scaledTo(Lt);if(ct[Bt.key]||(ct[Bt.key]=!0,Pt=this.getTile(Bt),!Pt&&jt&&(Pt=this._addTile(Bt)),Pt&&(it[Bt.key]=Bt,jt=Pt.wasRequested(),Pt.hasData())))break}}return it}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const et in this._tiles){const it=[];let ct,dt=this._tiles[et].tileID;for(;dt.overscaledZ>0;){if(dt.key in this._loadedParentTiles){ct=this._loadedParentTiles[dt.key];break}it.push(dt.key);const gt=dt.scaledTo(dt.overscaledZ-1);if(ct=this._getLoadedTile(gt),ct)break;dt=gt}for(const gt of it)this._loadedParentTiles[gt]=ct}}_addTile(et){let it=this._tiles[et.key];if(it)return it;it=this._cache.getAndRemove(et),it&&(this._setTileReloadTimer(et.key,it),it.tileID=et,this._state.initializeTileState(it,this.map?this.map.painter:null),this._cacheTimers[et.key]&&(clearTimeout(this._cacheTimers[et.key]),delete this._cacheTimers[et.key],this._setTileReloadTimer(et.key,it)));const ct=!!it;if(!ct){const dt=this.map?this.map.painter:null;it=new T0(et,this._source.tileSize*et.overscaleFactor(),this.transform.tileZoom,dt,this._isRaster),this._loadTile(it,this._tileLoaded.bind(this,it,et.key,it.state))}return it?(it.uses++,this._tiles[et.key]=it,ct||this._source.fire(new Au("dataloading",{tile:it,coord:it.tileID,dataType:"source"})),it):null}_setTileReloadTimer(et,it){et in this._timers&&(clearTimeout(this._timers[et]),delete this._timers[et]);const ct=it.getExpiryTimeout();ct&&(this._timers[et]=setTimeout(()=>{this._reloadTile(et,"expired"),delete this._timers[et]},ct))}_removeTile(et){const it=this._tiles[et];it&&(it.uses--,delete this._tiles[et],this._timers[et]&&(clearTimeout(this._timers[et]),delete this._timers[et]),it.uses>0||(it.hasData()&&it.state!=="reloading"?this._cache.add(it.tileID,it,it.getExpiryTimeout()):(it.aborted=!0,this._abortTile(it),this._unloadTile(it))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const et in this._tiles)this._removeTile(+et);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(et,it,ct){const dt=[],gt=this.transform;if(!gt)return dt;const xt=gt.projection.name==="globe",bt=bu(gt.center.lng);for(const St in this._tiles){const Ct=this._tiles[St];if(ct&&Ct.clearQueryDebugViz(),Ct.holdingForFade())continue;let Pt;if(xt){const jt=Ct.tileID.canonical;if(jt.z===0){const Lt=[Math.abs(Pr(bt,...I_(jt,-1))-bt),Math.abs(Pr(bt,...I_(jt,1))-bt)];Pt=[0,2*Lt.indexOf(Math.min(...Lt))-1]}else{const Lt=[Math.abs(Pr(bt,...I_(jt,-1))-bt),Math.abs(Pr(bt,...I_(jt,0))-bt),Math.abs(Pr(bt,...I_(jt,1))-bt)];Pt=[Lt.indexOf(Math.min(...Lt))-1]}}else Pt=[0];for(const jt of Pt){const Lt=et.containsTile(Ct,gt,it,jt);Lt&&dt.push(Lt)}}return dt}getVisibleCoordinates(et){const it=this.getRenderableIds(et).map(ct=>this._tiles[ct].tileID);for(const ct of it)ct.projMatrix=this.transform.calculateProjMatrix(ct.toUnwrapped());return it}hasTransition(){if(this._source.hasTransition())return!0;if(Jw(this._source.type))for(const et in this._tiles){const it=this._tiles[et];if(it.fadeEndTime!==void 0&&it.fadeEndTime>=Ql.now())return!0}return!1}setFeatureState(et,it,ct){this._state.updateState(et=et||"_geojsonTileLayer",it,ct)}removeFeatureState(et,it,ct){this._state.removeFeatureState(et=et||"_geojsonTileLayer",it,ct)}getFeatureState(et,it){return this._state.getState(et=et||"_geojsonTileLayer",it)}setDependencies(et,it,ct){const dt=this._tiles[et];dt&&dt.setDependencies(it,ct)}reloadTilesForDependencies(et,it){for(const ct in this._tiles)this._tiles[ct].hasDependency(et,it)&&this._reloadTile(+ct,"reloading");this._cache.filter(ct=>!ct.hasDependency(et,it))}_preloadTiles(et,it){if(!this._sourceLoaded){const bt=()=>{this._sourceLoaded&&(this._source.off("data",bt),this._preloadTiles(et,it))};return void this._source.on("data",bt)}const ct=new Map,dt=Array.isArray(et)?et:[et],gt=this.map.painter.terrain,xt=this.usedForTerrain&&gt?gt.getScaledDemTileSize():this._source.tileSize;for(const bt of dt){const St=bt.coveringTiles({tileSize:xt,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const Ct of St)ct.set(Ct.key,Ct);this.usedForTerrain&&bt.updateElevation(!1)}sn(Array.from(ct.values()),(bt,St)=>{const Ct=new T0(bt,this._source.tileSize*bt.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(Ct,Pt=>{this._source.type==="raster-dem"&&Ct.dem&&this._backfillDEM(Ct),St(Pt,Ct)})},it)}}function Qw(tt,et){const it=Math.abs(2*tt.wrap)-+(tt.wrap<0),ct=Math.abs(2*et.wrap)-+(et.wrap<0);return tt.overscaledZ-et.overscaledZ||ct-it||et.canonical.y-tt.canonical.y||et.canonical.x-tt.canonical.x}function Jw(tt){return tt==="raster"||tt==="image"||tt==="video"||tt==="custom"}function I_(tt,et){const it=1<<tt.z;return[tt.x/it+et,(tt.x+1)/it+et]}im.maxOverzooming=10,im.maxUnderzooming=3;class sv{constructor(et,it,ct){this._demTile=et,this._dem=this._demTile.dem,this._scale=it,this._offset=ct}static create(et,it,ct){const dt=ct||et.findDEMTileFor(it);if(!dt||!dt.dem)return;const gt=dt.dem,xt=dt.tileID,bt=1<<it.canonical.z-xt.canonical.z;return new sv(dt,dt.tileSize/qn/bt,[(it.canonical.x/bt-xt.canonical.x)*gt.dim,(it.canonical.y/bt-xt.canonical.y)*gt.dim])}tileCoordToPixel(et,it){const ct=it*this._scale+this._offset[1],dt=Math.floor(et*this._scale+this._offset[0]),gt=Math.floor(ct);return new Mr(dt,gt)}getElevationAt(et,it,ct,dt){const gt=et*this._scale+this._offset[0],xt=it*this._scale+this._offset[1],bt=Math.floor(gt),St=Math.floor(xt),Ct=this._dem;return dt=!!dt,ct?yo(yo(Ct.get(bt,St,dt),Ct.get(bt,St+1,dt),xt-St),yo(Ct.get(bt+1,St,dt),Ct.get(bt+1,St+1,dt),xt-St),gt-bt):Ct.get(bt,St,dt)}getElevationAtPixel(et,it,ct){return this._dem.get(et,it,!!ct)}getMeterToDEM(et){return(1<<this._demTile.tileID.canonical.z)*du(1,et)*this._dem.stride}}class _b{constructor(et,it){this.tileID=et,this.x=et.canonical.x,this.y=et.canonical.y,this.z=et.canonical.z,this.grid=new Lu(qn,16,0),this.featureIndexArray=new qp,this.promoteId=it}insert(et,it,ct,dt,gt,xt=0){const bt=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(ct,dt,gt,xt);const St=this.grid;for(let Ct=0;Ct<it.length;Ct++){const Pt=it[Ct],jt=[1/0,1/0,-1/0,-1/0];for(let Lt=0;Lt<Pt.length;Lt++){const Bt=Pt[Lt];jt[0]=Math.min(jt[0],Bt.x),jt[1]=Math.min(jt[1],Bt.y),jt[2]=Math.max(jt[2],Bt.x),jt[3]=Math.max(jt[3],Bt.y)}jt[0]<qn&&jt[1]<qn&&jt[2]>=0&&jt[3]>=0&&St.insert(bt,jt[0],jt[1],jt[2],jt[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new c0(new Wx(this.rawTileData)).layers,this.sourceLayerCoder=new Nw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const et in this.vtLayers)this.vtFeatures[et]=[]}return this.vtLayers}query(et,it,ct,dt){this.loadVTLayers();const gt=et.params||{},xt=jm(gt.filter),bt=et.tileResult,St=et.transform,Ct=bt.bufferedTilespaceBounds,Pt=this.grid.query(Ct.min.x,Ct.min.y,Ct.max.x,Ct.max.y,(Ft,Wt,rr,cr)=>T1(bt.bufferedTilespaceGeometry,Ft,Wt,rr,cr));Pt.sort(FS);let jt=null;St.elevation&&Pt.length>0&&(jt=sv.create(St.elevation,this.tileID));const Lt={};let Bt;for(let Ft=0;Ft<Pt.length;Ft++){const Wt=Pt[Ft];if(Wt===Bt)continue;Bt=Wt;const rr=this.featureIndexArray.get(Wt);let cr=null;this.loadMatchingFeature(Lt,rr,xt,gt.layers,gt.availableImages,it,ct,dt,(yr,ur,mr,xr=0)=>(cr||(cr=Uu(yr,this.tileID.canonical,et.tileTransform)),ur.queryIntersectsFeature(bt,yr,mr,cr,this.z,et.transform,et.pixelPosMatrix,jt,xr)))}return Lt}loadMatchingFeature(et,it,ct,dt,gt,xt,bt,St,Ct){const{featureIndex:Pt,bucketIndex:jt,sourceLayerIndex:Lt,layoutVertexArrayOffset:Bt}=it,Ft=this.bucketLayerIDs[jt];if(dt&&!function(yr,ur){for(let mr=0;mr<yr.length;mr++)if(ur.indexOf(yr[mr])>=0)return!0;return!1}(dt,Ft))return;const Wt=this.sourceLayerCoder.decode(Lt),rr=this.vtLayers[Wt].feature(Pt);if(ct.needGeometry){const yr=em(rr,!0);if(!ct.filter(new It(this.tileID.overscaledZ),yr,this.tileID.canonical))return}else if(!ct.filter(new It(this.tileID.overscaledZ),rr))return;const cr=this.getId(rr,Wt);for(let yr=0;yr<Ft.length;yr++){const ur=Ft[yr];if(dt&&dt.indexOf(ur)<0)continue;const mr=xt[ur];if(!mr)continue;let xr={};cr!==void 0&&St&&(xr=St.getState(mr.sourceLayer||"_geojsonTileLayer",cr));const _r=kn({},bt[ur]);_r.paint=eE(_r.paint,mr.paint,rr,xr,gt),_r.layout=eE(_r.layout,mr.layout,rr,xr,gt);const Vr=!Ct||Ct(rr,mr,xr,Bt);if(!Vr)continue;const Br=new Bw(rr,this.z,this.x,this.y,cr);Br.layer=_r;let Qr=et[ur];Qr===void 0&&(Qr=et[ur]=[]),Qr.push({featureIndex:Pt,feature:Br,intersectionZ:Vr})}}lookupSymbolFeatures(et,it,ct,dt,gt,xt,bt,St){const Ct={};this.loadVTLayers();const Pt=jm(gt);for(const jt of et)this.loadMatchingFeature(Ct,{bucketIndex:ct,sourceLayerIndex:dt,featureIndex:jt,layoutVertexArrayOffset:0},Pt,xt,bt,St,it);return Ct}loadFeature(et){const{featureIndex:it,sourceLayerIndex:ct}=et;this.loadVTLayers();const dt=this.sourceLayerCoder.decode(ct),gt=this.vtFeatures[dt];if(gt[it])return gt[it];const xt=this.vtLayers[dt].feature(it);return gt[it]=xt,xt}hasLayer(et){for(const it of this.bucketLayerIDs)for(const ct of it)if(et===ct)return!0;return!1}getId(et,it){let ct=et.id;if(this.promoteId){const dt=typeof this.promoteId=="string"?this.promoteId:this.promoteId[it];dt!=null&&(ct=et.properties[dt]),typeof ct=="boolean"&&(ct=Number(ct))}return ct}}function eE(tt,et,it,ct,dt){return Un(tt,(gt,xt)=>{const bt=et instanceof lr?et.get(xt):null;return bt&&bt.evaluate?bt.evaluate(it,ct,dt):bt})}function FS(tt,et){return et-tt}$n(_b,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class tE{constructor(et,it){this.width=et,this.height=it,this.nextRow=0,this.image=new Vu({width:et,height:it}),this.positions={},this.uploaded=!1}getDash(et,it){const ct=this.getKey(et,it);return this.positions[ct]}trim(){const et=this.width,it=this.height=Kn(this.nextRow);this.image.resize({width:et,height:it})}getKey(et,it){return et.join(",")+it}getDashRanges(et,it,ct){const dt=[];let gt=et.length%2==1?-et[et.length-1]*ct:0,xt=et[0]*ct,bt=!0;dt.push({left:gt,right:xt,isDash:bt,zeroLength:et[0]===0});let St=et[0];for(let Ct=1;Ct<et.length;Ct++){bt=!bt;const Pt=et[Ct];gt=St*ct,St+=Pt,xt=St*ct,dt.push({left:gt,right:xt,isDash:bt,zeroLength:Pt===0})}return dt}addRoundDash(et,it,ct){const dt=it/2;for(let gt=-ct;gt<=ct;gt++){const xt=this.width*(this.nextRow+ct+gt);let bt=0,St=et[bt];for(let Ct=0;Ct<this.width;Ct++){Ct/St.right>1&&(St=et[++bt]);const Pt=Math.abs(Ct-St.left),jt=Math.abs(Ct-St.right),Lt=Math.min(Pt,jt);let Bt;const Ft=gt/ct*(dt+1);if(St.isDash){const Wt=dt-Math.abs(Ft);Bt=Math.sqrt(Lt*Lt+Wt*Wt)}else Bt=dt-Math.sqrt(Lt*Lt+Ft*Ft);this.image.data[xt+Ct]=Math.max(0,Math.min(255,Bt+128))}}}addRegularDash(et,it){for(let St=et.length-1;St>=0;--St){const Ct=et[St],Pt=et[St+1];Ct.zeroLength?et.splice(St,1):Pt&&Pt.isDash===Ct.isDash&&(Pt.left=Ct.left,et.splice(St,1))}const ct=et[0],dt=et[et.length-1];ct.isDash===dt.isDash&&(ct.left=dt.left-this.width,dt.right=ct.right+this.width);const gt=this.width*this.nextRow;let xt=0,bt=et[xt];for(let St=0;St<this.width;St++){St/bt.right>1&&(bt=et[++xt]);const Ct=Math.abs(St-bt.left),Pt=Math.abs(St-bt.right),jt=Math.min(Ct,Pt);this.image.data[gt+St]=Math.max(0,Math.min(255,(bt.isDash?jt:-jt)+it+128))}}addDash(et,it){const ct=this.getKey(et,it);if(this.positions[ct])return this.positions[ct];const dt=it==="round",gt=dt?7:0,xt=2*gt+1;if(this.nextRow+xt>this.height)return Hn("LineAtlas out of space"),null;et.length===0&&et.push(1);let bt=0;for(let Pt=0;Pt<et.length;Pt++)et[Pt]<0&&(Hn("Negative value is found in line dasharray, replacing values with 0"),et[Pt]=0),bt+=et[Pt];if(bt!==0){const Pt=this.width/bt,jt=this.getDashRanges(et,this.width,Pt);dt?this.addRoundDash(jt,Pt,gt):this.addRegularDash(jt,it==="square"?.5*Pt:0)}const St=this.nextRow+gt;this.nextRow+=xt;const Ct={tl:[St,gt],br:[bt,0]};return this.positions[ct]=Ct,Ct}}$n(tE,"LineAtlas");const rE=1*fu;class nE{constructor(et){const it={},ct=[];for(const bt in et){const St=et[bt],Ct=it[bt]={};for(const Pt in St.glyphs){const jt=St.glyphs[+Pt];if(!jt||jt.bitmap.width===0||jt.bitmap.height===0)continue;const Lt=jt.metrics.localGlyph?rE:1,Bt={x:0,y:0,w:jt.bitmap.width+2*Lt,h:jt.bitmap.height+2*Lt};ct.push(Bt),Ct[Pt]=Bt}}const{w:dt,h:gt}=p0(ct),xt=new Vu({width:dt||1,height:gt||1});for(const bt in et){const St=et[bt];for(const Ct in St.glyphs){const Pt=St.glyphs[+Ct];if(!Pt||Pt.bitmap.width===0||Pt.bitmap.height===0)continue;const jt=it[bt][Ct],Lt=Pt.metrics.localGlyph?rE:1;Vu.copy(Pt.bitmap,xt,{x:0,y:0},{x:jt.x+Lt,y:jt.y+Lt},Pt.bitmap)}}this.image=xt,this.positions=it}}$n(nE,"GlyphAtlas");class US{constructor(et){this.tileID=new Xs(et.tileID.overscaledZ,et.tileID.wrap,et.tileID.canonical.z,et.tileID.canonical.x,et.tileID.canonical.y),this.tileZoom=et.tileZoom,this.uid=et.uid,this.zoom=et.zoom,this.canonical=et.tileID.canonical,this.pixelRatio=et.pixelRatio,this.tileSize=et.tileSize,this.source=et.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=et.showCollisionBoxes,this.collectResourceTiming=!!et.collectResourceTiming,this.returnDependencies=!!et.returnDependencies,this.promoteId=et.promoteId,this.enableTerrain=!!et.enableTerrain,this.isSymbolTile=et.isSymbolTile,this.tileTransform=nm(et.tileID.canonical,et.projection),this.projection=et.projection}parse(et,it,ct,dt,gt){this.status="parsing",this.data=et,this.collisionBoxArray=new jo;const xt=new Nw(Object.keys(et.layers).sort()),bt=new _b(this.tileID,this.promoteId);bt.bucketLayerIDs=[];const St={},Ct=new tE(256,256),Pt={featureIndex:bt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:Ct,availableImages:ct},jt=it.familiesBySource[this.source];for(const xr in jt){const _r=et.layers[xr];if(!_r)continue;let Vr=!1,Br=!1;for(const Wr of jt[xr])Wr[0].type==="symbol"?Vr=!0:Br=!0;if(this.isSymbolTile===!0&&!Vr||this.isSymbolTile===!1&&!Br)continue;_r.version===1&&Hn(`Vector tile source "${this.source}" layer "${xr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Qr=xt.encode(xr),bn=[];for(let Wr=0;Wr<_r.length;Wr++){const pn=_r.feature(Wr),mn=bt.getId(pn,xr);bn.push({feature:pn,id:mn,index:Wr,sourceLayerIndex:Qr})}for(const Wr of jt[xr]){const pn=Wr[0];this.isSymbolTile!==void 0&&pn.type==="symbol"!==this.isSymbolTile||pn.minzoom&&this.zoom<Math.floor(pn.minzoom)||pn.maxzoom&&this.zoom>=pn.maxzoom||pn.visibility!=="none"&&(P0(Wr,this.zoom,ct),(St[pn.id]=pn.createBucket({index:bt.bucketLayerIDs.length,layers:Wr,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Qr,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:ct})).populate(bn,Pt,this.tileID.canonical,this.tileTransform),bt.bucketLayerIDs.push(Wr.map(mn=>mn.id)))}}let Lt,Bt,Ft,Wt;Ct.trim();const rr={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},cr=()=>{if(Lt)return gt(Lt);if(Bt&&Ft&&Wt){const xr=new nE(Bt),_r=new hw(Ft,Wt);for(const Vr in St){const Br=St[Vr];Br instanceof gp?(P0(Br.layers,this.zoom,ct),fS(Br,Bt,xr.positions,Ft,_r.iconPositions,this.showCollisionBoxes,ct,this.tileID.canonical,this.tileZoom,this.projection)):Br.hasPattern&&(Br instanceof Vx||Br instanceof zx||Br instanceof x_)&&(P0(Br.layers,this.zoom,ct),Br.addFeatures(Pt,this.tileID.canonical,_r.patternPositions,ct,this.tileTransform))}this.status="done",gt(null,{buckets:ln(St).filter(Vr=>!Vr.isEmpty()),featureIndex:bt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:xr.image,lineAtlas:Ct,imageAtlas:_r,glyphMap:this.returnDependencies?Bt:null,iconMap:this.returnDependencies?Ft:null,glyphPositions:this.returnDependencies?xr.positions:null})}},yr=Un(Pt.glyphDependencies,xr=>Object.keys(xr).map(Number));Object.keys(yr).length?dt.send("getGlyphs",{uid:this.uid,stacks:yr},(xr,_r)=>{Lt||(Lt=xr,Bt=_r,cr())},void 0,!1,rr):Bt={};const ur=Object.keys(Pt.iconDependencies);ur.length?dt.send("getImages",{icons:ur,source:this.source,tileID:this.tileID,type:"icons"},(xr,_r)=>{Lt||(Lt=xr,Ft=_r,cr())},void 0,!1,rr):Ft={};const mr=Object.keys(Pt.patternDependencies);mr.length?dt.send("getImages",{icons:mr,source:this.source,tileID:this.tileID,type:"patterns"},(xr,_r)=>{Lt||(Lt=xr,Wt=_r,cr())},void 0,!1,rr):Wt={},cr()}}function P0(tt,et,it){const ct=new It(et);for(const dt of tt)dt.recalculate(ct,it)}class iE{constructor(et){this.entries={},this.scheduler=et}request(et,it,ct,dt){const gt=this.entries[et]=this.entries[et]||{callbacks:[]};if(gt.result){const[xt,bt]=gt.result;return this.scheduler?this.scheduler.add(()=>{dt(xt,bt)},it):dt(xt,bt),()=>{}}return gt.callbacks.push(dt),gt.cancel||(gt.cancel=ct((xt,bt)=>{gt.result=[xt,bt];for(const St of gt.callbacks)this.scheduler?this.scheduler.add(()=>{St(xt,bt)},it):St(xt,bt);setTimeout(()=>delete this.entries[et],3e3)})),()=>{gt.result||(gt.callbacks=gt.callbacks.filter(xt=>xt!==dt),gt.callbacks.length||(gt.cancel(),delete this.entries[et]))}}}function oE(tt,et,it){const ct=JSON.stringify(tt.request);return tt.data&&(this.deduped.entries[ct]={result:[null,tt.data]}),this.deduped.request(ct,{type:"parseTile",isSymbolTile:tt.isSymbolTile,zoom:tt.tileZoom},dt=>{const gt=Wu(tt.request,(xt,bt,St,Ct)=>{xt?dt(xt):bt&&dt(null,{vectorTile:it?void 0:new c0(new Wx(bt)),rawData:bt,cacheControl:St,expires:Ct})});return()=>{gt.cancel(),dt()}},et)}const sE=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class I0{static from(et){if(!(et instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[it,ct]=new Uint8Array(et,0,2);if(it!==219)throw new Error("Data does not appear to be in a KDBush format.");const dt=ct>>4;if(dt!==1)throw new Error(`Got v${dt} data when expected v1.`);const gt=sE[15&ct];if(!gt)throw new Error("Unrecognized array type.");const[xt]=new Uint16Array(et,2,1),[bt]=new Uint32Array(et,4,1);return new I0(bt,xt,gt,et)}constructor(et,it=64,ct=Float64Array,dt){if(isNaN(et)||et<0)throw new Error(`Unpexpected numItems value: ${et}.`);this.numItems=+et,this.nodeSize=Math.min(Math.max(+it,2),65535),this.ArrayType=ct,this.IndexArrayType=et<65536?Uint16Array:Uint32Array;const gt=sE.indexOf(this.ArrayType),xt=2*et*this.ArrayType.BYTES_PER_ELEMENT,bt=et*this.IndexArrayType.BYTES_PER_ELEMENT,St=(8-bt%8)%8;if(gt<0)throw new Error(`Unexpected typed array class: ${ct}.`);dt&&dt instanceof ArrayBuffer?(this.data=dt,this.ids=new this.IndexArrayType(this.data,8,et),this.coords=new this.ArrayType(this.data,8+bt+St,2*et),this._pos=2*et,this._finished=!0):(this.data=new ArrayBuffer(8+xt+bt+St),this.ids=new this.IndexArrayType(this.data,8,et),this.coords=new this.ArrayType(this.data,8+bt+St,2*et),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+gt]),new Uint16Array(this.data,2,1)[0]=it,new Uint32Array(this.data,4,1)[0]=et)}add(et,it){const ct=this._pos>>1;return this.ids[ct]=ct,this.coords[this._pos++]=et,this.coords[this._pos++]=it,ct}finish(){const et=this._pos>>1;if(et!==this.numItems)throw new Error(`Added ${et} items when expected ${this.numItems}.`);return M0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(et,it,ct,dt){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:gt,coords:xt,nodeSize:bt}=this,St=[0,gt.length-1,0],Ct=[];for(;St.length;){const Pt=St.pop()||0,jt=St.pop()||0,Lt=St.pop()||0;if(jt-Lt<=bt){for(let rr=Lt;rr<=jt;rr++){const cr=xt[2*rr],yr=xt[2*rr+1];cr>=et&&cr<=ct&&yr>=it&&yr<=dt&&Ct.push(gt[rr])}continue}const Bt=Lt+jt>>1,Ft=xt[2*Bt],Wt=xt[2*Bt+1];Ft>=et&&Ft<=ct&&Wt>=it&&Wt<=dt&&Ct.push(gt[Bt]),(Pt===0?et<=Ft:it<=Wt)&&(St.push(Lt),St.push(Bt-1),St.push(1-Pt)),(Pt===0?ct>=Ft:dt>=Wt)&&(St.push(Bt+1),St.push(jt),St.push(1-Pt))}return Ct}within(et,it,ct){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:dt,coords:gt,nodeSize:xt}=this,bt=[0,dt.length-1,0],St=[],Ct=ct*ct;for(;bt.length;){const Pt=bt.pop()||0,jt=bt.pop()||0,Lt=bt.pop()||0;if(jt-Lt<=xt){for(let rr=Lt;rr<=jt;rr++)lE(gt[2*rr],gt[2*rr+1],et,it)<=Ct&&St.push(dt[rr]);continue}const Bt=Lt+jt>>1,Ft=gt[2*Bt],Wt=gt[2*Bt+1];lE(Ft,Wt,et,it)<=Ct&&St.push(dt[Bt]),(Pt===0?et-ct<=Ft:it-ct<=Wt)&&(bt.push(Lt),bt.push(Bt-1),bt.push(1-Pt)),(Pt===0?et+ct>=Ft:it+ct>=Wt)&&(bt.push(Bt+1),bt.push(jt),bt.push(1-Pt))}return St}}function M0(tt,et,it,ct,dt,gt){if(dt-ct<=it)return;const xt=ct+dt>>1;aE(tt,et,xt,ct,dt,gt),M0(tt,et,it,ct,xt-1,1-gt),M0(tt,et,it,xt+1,dt,1-gt)}function aE(tt,et,it,ct,dt,gt){for(;dt>ct;){if(dt-ct>600){const Ct=dt-ct+1,Pt=it-ct+1,jt=Math.log(Ct),Lt=.5*Math.exp(2*jt/3),Bt=.5*Math.sqrt(jt*Lt*(Ct-Lt)/Ct)*(Pt-Ct/2<0?-1:1);aE(tt,et,it,Math.max(ct,Math.floor(it-Pt*Lt/Ct+Bt)),Math.min(dt,Math.floor(it+(Ct-Pt)*Lt/Ct+Bt)),gt)}const xt=et[2*it+gt];let bt=ct,St=dt;for(M_(tt,et,ct,it),et[2*dt+gt]>xt&&M_(tt,et,ct,dt);bt<St;){for(M_(tt,et,bt,St),bt++,St--;et[2*bt+gt]<xt;)bt++;for(;et[2*St+gt]>xt;)St--}et[2*ct+gt]===xt?M_(tt,et,ct,St):(St++,M_(tt,et,St,dt)),St<=it&&(ct=St+1),it<=St&&(dt=St-1)}}function M_(tt,et,it,ct){j0(tt,it,ct),j0(et,2*it,2*ct),j0(et,2*it+1,2*ct+1)}function j0(tt,et,it){const ct=tt[et];tt[et]=tt[it],tt[it]=ct}function lE(tt,et,it,ct){const dt=tt-it,gt=et-ct;return dt*dt+gt*gt}st.ARRAY_TYPE=Sl,st.AUTH_ERR_MSG=vr,st.Aabb=Zs,st.Actor=class{constructor(tt,et,it){this.target=tt,this.parent=et,this.mapId=it,this.callbacks={},this.cancelCallbacks={},vo(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ds()?tt:Tt,this.scheduler=new LS}send(tt,et,it,ct,dt=!1,gt){const xt=Math.round(1e18*Math.random()).toString(36).substring(0,10);it&&(it.metadata=gt,this.callbacks[xt]=it);const bt=Ls(this.globalScope)?void 0:[];return this.target.postMessage({id:xt,type:tt,hasCallback:!!it,targetMapId:ct,mustQueue:dt,sourceMapId:this.mapId,data:lp(et,bt)},bt),{cancel:()=>{it&&delete this.callbacks[xt],this.target.postMessage({id:xt,type:"<cancel>",targetMapId:ct,sourceMapId:this.mapId})}}}receive(tt){const et=tt.data,it=et.id;if(it&&(!et.targetMapId||this.mapId===et.targetMapId))if(et.type==="<cancel>"){const ct=this.cancelCallbacks[it];delete this.cancelCallbacks[it],ct&&ct.cancel()}else if(et.mustQueue||Ds()){const ct=this.callbacks[it];this.cancelCallbacks[it]=this.scheduler.add(()=>this.processTask(it,et),ct&&ct.metadata||{type:"message"})}else this.processTask(it,et)}processTask(tt,et){if(et.type==="<response>"){const it=this.callbacks[tt];delete this.callbacks[tt],it&&(et.error?it($u(et.error)):it(null,$u(et.data)))}else{const it=Ls(this.globalScope)?void 0:[],ct=et.hasCallback?(gt,xt)=>{delete this.cancelCallbacks[tt],this.target.postMessage({id:tt,type:"<response>",sourceMapId:this.mapId,error:gt?lp(gt):null,data:lp(xt,it)},it)}:gt=>{},dt=$u(et.data);if(this.parent[et.type])this.parent[et.type](et.sourceMapId,dt,ct);else if(this.parent.getWorkerSource){const gt=et.type.split(".");this.parent.getWorkerSource(et.sourceMapId,gt[0],dt.source)[gt[1]](dt,ct)}else ct(new Error(`Could not find function ${et.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},st.CanonicalTileID=Ux,st.Color=rs,st.ColorMode=Cu,st.CullFaceMode=mu,st.DEMData=ov,st.DataConstantProperty=Gt,st.DedupedRequest=iE,st.DepthMode=ny,st.EXTENT=qn,st.Elevation=class{isDataAvailableAtPoint(tt){const et=this._source();if(this.isUsingMockSource()||!et||tt.y<0||tt.y>1)return!1;const it=et.getSource().maxzoom,ct=1<<it,dt=Math.floor(tt.x),gt=Math.floor((tt.x-dt)*ct),xt=Math.floor(tt.y*ct),bt=this.findDEMTileFor(new Xs(it,dt,it,gt,xt));return!(!bt||!bt.dem)}getAtPointOrZero(tt,et=0){return this.getAtPoint(tt,et)||0}getAtPoint(tt,et,it=!0){if(this.isUsingMockSource())return null;et==null&&(et=null);const ct=this._source();if(!ct||tt.y<0||tt.y>1)return et;const dt=ct.getSource().maxzoom,gt=1<<dt,xt=Math.floor(tt.x),bt=tt.x-xt,St=new Xs(dt,xt,dt,Math.floor(bt*gt),Math.floor(tt.y*gt)),Ct=this.findDEMTileFor(St);if(!Ct||!Ct.dem)return et;const Pt=Ct.dem,jt=1<<Ct.tileID.canonical.z,Lt=(bt*jt-Ct.tileID.canonical.x)*Pt.dim,Bt=(tt.y*jt-Ct.tileID.canonical.y)*Pt.dim,Ft=Math.floor(Lt),Wt=Math.floor(Bt);return(it?this.exaggeration():1)*yo(yo(Pt.get(Ft,Wt),Pt.get(Ft,Wt+1),Bt-Wt),yo(Pt.get(Ft+1,Wt),Pt.get(Ft+1,Wt+1),Bt-Wt),Lt-Ft)}getAtTileOffset(tt,et,it){const ct=1<<tt.canonical.z;return this.getAtPointOrZero(new Gm(tt.wrap+(tt.canonical.x+et/qn)/ct,(tt.canonical.y+it/qn)/ct))}getAtTileOffsetFunc(tt,et,it,ct){return dt=>{const gt=this.getAtTileOffset(tt,dt.x,dt.y),xt=ct.upVector(tt.canonical,dt.x,dt.y);return Ll(xt,xt,gt*ct.upVectorScale(tt.canonical,et,it).metersToTile),xt}}getForTilePoints(tt,et,it,ct){if(this.isUsingMockSource())return!1;const dt=sv.create(this,tt,ct);return!!dt&&(et.forEach(gt=>{gt[2]=this.exaggeration()*dt.getElevationAt(gt[0],gt[1],it)}),!0)}getMinMaxForTile(tt){if(this.isUsingMockSource())return null;const et=this.findDEMTileFor(tt);if(!et||!et.dem)return null;const it=et.dem.tree,ct=et.tileID,dt=1<<tt.canonical.z-ct.canonical.z;let gt=tt.canonical.x/dt-ct.canonical.x,xt=tt.canonical.y/dt-ct.canonical.y,bt=0;for(let St=0;St<tt.canonical.z-ct.canonical.z&&!it.leaves[bt];St++){gt*=2,xt*=2;const Ct=2*Math.floor(xt)+Math.floor(gt);bt=it.childOffsets[bt]+Ct,gt%=1,xt%=1}return{min:this.exaggeration()*it.minimums[bt],max:this.exaggeration()*it.maximums[bt]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(tt,et,it){throw new Error("Pure virtual method called.")}pointCoordinate(tt){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(tt){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},st.ErrorEvent=Jl,st.EvaluationParameters=It,st.Event=Au,st.Evented=bp,st.FillExtrusionBucket=x_,st.Frustum=Bv,st.FrustumCorners=Nv,st.GLOBE_RADIUS=vu,st.GLOBE_SCALE_MATCH_LATITUDE=45,st.GLOBE_ZOOM_THRESHOLD_MAX=l1,st.GLOBE_ZOOM_THRESHOLD_MIN=Fv,st.GlobeSharedBuffers=class{constructor(tt){this._createGrid(tt),this._createPoles(tt)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const tt of this._poleSegments)tt.destroy();for(const tt of this._gridSegments)tt.withSkirts.destroy(),tt.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const tt of this._wireframeSegments)tt.destroy()}}_fillGridMeshWithLods(tt,et){const it=new wn,ct=new Vn,dt=[],gt=tt+1+2,xt=et[0]+1,bt=et[0]+1+(1+et.length),St=(Ct,Pt,jt)=>{let Lt=Ct===gt-1?Ct-2:Ct===0?Ct:Ct-1;return Lt+=jt?24575:0,[Lt,Pt]};for(let Ct=0;Ct<gt;++Ct)it.emplaceBack(...St(Ct,0,!0));for(let Ct=0;Ct<xt;++Ct)for(let Pt=0;Pt<gt;++Pt)it.emplaceBack(...St(Pt,Ct,(Pt===0||Pt===gt-1)&&!0));for(let Ct=0;Ct<et.length;++Ct){const Pt=et[Ct];for(let jt=0;jt<gt;++jt)it.emplaceBack(...St(jt,Pt,!0))}for(let Ct=0;Ct<et.length;++Ct){const Pt=ct.length,jt=et[Ct]+1+2,Lt=new Vn;for(let Wt=0;Wt<jt-1;Wt++){const rr=Wt===jt-2,cr=rr?gt*(bt-et.length+Ct-Wt):gt;for(let yr=0;yr<gt-1;yr++){const ur=Wt*gt+yr;Wt===0||rr||yr===0||yr===gt-2?(Lt.emplaceBack(ur+1,ur,ur+cr),Lt.emplaceBack(ur+cr,ur+cr+1,ur+1)):(ct.emplaceBack(ur+1,ur,ur+cr),ct.emplaceBack(ur+cr,ur+cr+1,ur+1))}}const Bt=us.simpleSegment(0,Pt,it.length,ct.length-Pt);for(let Wt=0;Wt<Lt.uint16.length;Wt+=3)ct.emplaceBack(Lt.uint16[Wt],Lt.uint16[Wt+1],Lt.uint16[Wt+2]);const Ft=us.simpleSegment(0,Pt,it.length,ct.length-Pt);dt.push({withoutSkirts:Bt,withSkirts:Ft})}return{vertices:it,indices:ct,segments:dt}}_createGrid(tt){const et=this._fillGridMeshWithLods(Jp,c_);this._gridSegments=et.segments,this._gridBuffer=tt.createVertexBuffer(et.vertices,l_.members),this._gridIndexBuffer=tt.createIndexBuffer(et.indices,!0)}_createPoles(tt){const et=new Vn;for(let dt=0;dt<=Jp;dt++)et.emplaceBack(0,dt+1,dt+2);this._poleIndexBuffer=tt.createIndexBuffer(et,!0);const it=new Mo,ct=new Mo;this._poleSegments=[];for(let dt=0,gt=0;dt<Fv;dt++){const xt=360/(1<<dt);it.emplaceBack(0,-vu,0,.5,0),ct.emplaceBack(0,-vu,0,.5,1);for(let bt=0;bt<=Jp;bt++){const St=bt/Jp,Ct=yo(0,xt,St),[Pt,jt,Lt]=Fm(LE,$E,Ct,vu);it.emplaceBack(Pt,jt,Lt,St,0),ct.emplaceBack(Pt,jt,Lt,St,1)}this._poleSegments.push(us.simpleSegment(gt,0,66,64)),gt+=66}this._poleNorthVertexBuffer=tt.createVertexBuffer(it,s1,!1),this._poleSouthVertexBuffer=tt.createVertexBuffer(ct,s1,!1)}getGridBuffers(tt,et){return[this._gridBuffer,this._gridIndexBuffer,et?this._gridSegments[tt].withSkirts:this._gridSegments[tt].withoutSkirts]}getPoleBuffers(tt){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[tt]]}getWirefameBuffers(tt,et){if(!this._wireframeSegments){const it=new Cs,ct=Jp,dt=ct+1+2,gt=1;this._wireframeSegments=[];for(let xt=0,bt=0;xt<c_.length;xt++){const St=c_[xt];for(let Pt=gt;Pt<St+gt;Pt++)for(let jt=gt;jt<ct+gt;jt++){const Lt=Pt*dt+jt;it.emplaceBack(Lt,Lt+1),it.emplaceBack(Lt,Lt+dt),it.emplaceBack(Lt,Lt+dt+1)}const Ct=St*ct*3;this._wireframeSegments.push(us.simpleSegment(0,bt,(St+1)*dt,Ct)),bt+=Ct}this._wireframeIndexBuffer=tt.createIndexBuffer(it)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[et]]}},st.GlyphManager=Jm,st.ImagePosition=f0,st.KDBush=I0,st.LivePerformanceUtils=av,st.LngLat=Do,st.LngLatBounds=dp,st.LocalGlyphMode=y0,st.MAX_MERCATOR_LATITUDE=Bs,st.MercatorCoordinate=Gm,st.ONE_EM=Is,st.OverscaledTileID=Xs,st.PerformanceMarkers=qu,st.Point=Mr,st.Properties=dr,st.RGBAImage=Tl,st.Ray=zv,st.RequestManager=class{constructor(tt,et,it){this._transformRequestFn=tt,this._customAccessToken=et,this._silenceAuthErrors=!!it,this._createSkuToken()}_createSkuToken(){const tt=function(){let et="";for(let it=0;it<10;it++)et+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Kt,et].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=tt.token,this._skuTokenExpiresAt=tt.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(tt,et){return this._transformRequestFn&&this._transformRequestFn(tt,et)||{url:tt}}normalizeStyleURL(tt,et){if(!kr(tt))return tt;const it=Pn(tt);return it.path=`/styles/v1${it.path}`,this._makeAPIURL(it,this._customAccessToken||et)}normalizeGlyphsURL(tt,et){if(!kr(tt))return tt;const it=Pn(tt);return it.path=`/fonts/v1${it.path}`,this._makeAPIURL(it,this._customAccessToken||et)}normalizeSourceURL(tt,et,it,ct){if(!kr(tt))return tt;const dt=Pn(tt);return dt.path=`/v4/${dt.authority}.json`,dt.params.push("secure"),it&&dt.params.push(`language=${it}`),ct&&dt.params.push(`worldview=${ct}`),this._makeAPIURL(dt,this._customAccessToken||et)}normalizeSpriteURL(tt,et,it,ct){const dt=Pn(tt);return kr(tt)?(dt.path=`/styles/v1${dt.path}/sprite${et}${it}`,this._makeAPIURL(dt,this._customAccessToken||ct)):(dt.path+=`${et}${it}`,Tn(dt))}normalizeTileURL(tt,et,it){if(this._isSkuTokenExpired()&&this._createSkuToken(),tt&&!kr(tt))return tt;const ct=Pn(tt);ct.path=ct.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${et||it&&ct.authority!=="raster"&&it===512?"@2x":""}${Ot.supported?".webp":"$1"}`),ct.authority==="raster"?ct.path=`/${Dt.RASTER_URL_PREFIX}${ct.path}`:(ct.path=ct.path.replace(/^.+\/v4\//,"/"),ct.path=`/${Dt.TILE_URL_VERSION}${ct.path}`);const dt=this._customAccessToken||function(gt){for(const xt of gt){const bt=xt.match(/^access_token=(.*)$/);if(bt)return bt[1]}return null}(ct.params)||Dt.ACCESS_TOKEN;return Dt.REQUIRE_ACCESS_TOKEN&&dt&&this._skuToken&&ct.params.push(`sku=${this._skuToken}`),this._makeAPIURL(ct,dt)}canonicalizeTileURL(tt,et){const it=Pn(tt);if(!it.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!it.path.match(/\.[\w]+$/))return tt;let ct="mapbox://";it.path.match(/^\/raster\/v1\//)?ct+=`raster/${it.path.replace(`/${Dt.RASTER_URL_PREFIX}/`,"")}`:ct+=`tiles/${it.path.replace(`/${Dt.TILE_URL_VERSION}/`,"")}`;let dt=it.params;return et&&(dt=dt.filter(gt=>!gt.match(/^access_token=/))),dt.length&&(ct+=`?${dt.join("&")}`),ct}canonicalizeTileset(tt,et){const it=!!et&&kr(et),ct=[];for(const dt of tt.tiles||[])zr(dt)?ct.push(this.canonicalizeTileURL(dt,it)):ct.push(dt);return ct}_makeAPIURL(tt,et){const it="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",ct=Pn(Dt.API_URL);if(tt.protocol=ct.protocol,tt.authority=ct.authority,tt.protocol==="http"){const dt=tt.params.indexOf("secure");dt>=0&&tt.params.splice(dt,1)}if(ct.path!=="/"&&(tt.path=`${ct.path}${tt.path}`),!Dt.REQUIRE_ACCESS_TOKEN)return Tn(tt);if(et=et||Dt.ACCESS_TOKEN,!this._silenceAuthErrors){if(!et)throw new Error(`An API access token is required to use Mapbox GL. ${it}`);if(et[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${it}`)}return tt.params=tt.params.filter(dt=>dt.indexOf("access_token")===-1),tt.params.push(`access_token=${et||""}`),Tn(tt)}},st.ResourceType=Eo,st.SegmentVector=us,st.SourceCache=im,st.StencilMode=R0,st.StructArrayLayout1ui2=El,st.StructArrayLayout2f1f2i16=Zn,st.StructArrayLayout2i4=wn,st.StructArrayLayout2ui4=Cs,st.StructArrayLayout3f12=co,st.StructArrayLayout3ui6=Vn,st.StructArrayLayout4i8=hn,st.StructArrayLayout5f20=Mo,st.Texture=P_,st.Tile=T0,st.Transitionable=Vt,st.Uniform1f=Tx,st.Uniform1i=class extends Nu{constructor(tt){super(tt),this.current=0}set(tt,et,it){this.fetchUniformLocation(tt,et)&&this.current!==it&&(this.current=it,this.gl.uniform1i(this.location,it))}},st.Uniform2f=class extends Nu{constructor(tt){super(tt),this.current=[0,0]}set(tt,et,it){this.fetchUniformLocation(tt,et)&&(it[0]===this.current[0]&&it[1]===this.current[1]||(this.current=it,this.gl.uniform2f(this.location,it[0],it[1])))}},st.Uniform3f=class extends Nu{constructor(tt){super(tt),this.current=[0,0,0]}set(tt,et,it){this.fetchUniformLocation(tt,et)&&(it[0]===this.current[0]&&it[1]===this.current[1]&&it[2]===this.current[2]||(this.current=it,this.gl.uniform3f(this.location,it[0],it[1],it[2])))}},st.Uniform4f=V0,st.UniformColor=G0,st.UniformMatrix2f=class extends Nu{constructor(tt){super(tt),this.current=xE}set(tt,et,it){if(this.fetchUniformLocation(tt,et)){for(let ct=0;ct<4;ct++)if(it[ct]!==this.current[ct]){this.current=it,this.gl.uniformMatrix2fv(this.location,!1,it);break}}}},st.UniformMatrix3f=class extends Nu{constructor(tt){super(tt),this.current=_E}set(tt,et,it){if(this.fetchUniformLocation(tt,et)){for(let ct=0;ct<9;ct++)if(it[ct]!==this.current[ct]){this.current=it,this.gl.uniformMatrix3fv(this.location,!1,it);break}}}},st.UniformMatrix4f=class extends Nu{constructor(tt){super(tt),this.current=yE}set(tt,et,it){if(this.fetchUniformLocation(tt,et)){if(it[12]!==this.current[12]||it[0]!==this.current[0])return this.current=it,void this.gl.uniformMatrix4fv(this.location,!1,it);for(let ct=1;ct<16;ct++)if(it[ct]!==this.current[ct]){this.current=it,this.gl.uniformMatrix4fv(this.location,!1,it);break}}}},st.UnwrappedTileID=K1,st.ValidationError=Ln,st.VectorTileFeature=Bx,st.VectorTileWorkerSource=class extends bp{constructor(tt,et,it,ct,dt){super(),this.actor=tt,this.layerIndex=et,this.availableImages=it,this.loadVectorData=dt||oE,this.loading={},this.loaded={},this.deduped=new iE(tt.scheduler),this.isSpriteLoaded=ct,this.scheduler=tt.scheduler}loadTile(tt,et){const it=tt.uid,ct=tt&&tt.request,dt=ct&&ct.collectResourceTiming,gt=this.loading[it]=new US(tt);gt.abort=this.loadVectorData(tt,(xt,bt)=>{const St=!this.loading[it];if(delete this.loading[it],St||xt||!bt)return gt.status="done",St||(this.loaded[it]=gt),et(xt);const Ct=bt.rawData,Pt={};bt.expires&&(Pt.expires=bt.expires),bt.cacheControl&&(Pt.cacheControl=bt.cacheControl),gt.vectorTile=bt.vectorTile||new c0(new Wx(Ct));const jt=()=>{gt.parse(gt.vectorTile,this.layerIndex,this.availableImages,this.actor,(Lt,Bt)=>{if(Lt||!Bt)return et(Lt);const Ft={};if(dt){const Wt=oy(ct);Wt.length>0&&(Ft.resourceTiming=JSON.parse(JSON.stringify(Wt)))}et(null,kn({rawTileData:Ct.slice(0)},Bt,Pt,Ft))})};this.isSpriteLoaded?jt():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(jt,{type:"parseTile",isSymbolTile:tt.isSymbolTile,zoom:tt.tileZoom}):jt()}),this.loaded=this.loaded||{},this.loaded[it]=gt})}reloadTile(tt,et){const it=this.loaded,ct=tt.uid,dt=this;if(it&&it[ct]){const gt=it[ct];gt.showCollisionBoxes=tt.showCollisionBoxes,gt.enableTerrain=!!tt.enableTerrain,gt.projection=tt.projection,gt.tileTransform=nm(tt.tileID.canonical,tt.projection);const xt=(bt,St)=>{const Ct=gt.reloadCallback;Ct&&(delete gt.reloadCallback,gt.parse(gt.vectorTile,dt.layerIndex,this.availableImages,dt.actor,Ct)),et(bt,St)};gt.status==="parsing"?gt.reloadCallback=xt:gt.status==="done"&&(gt.vectorTile?gt.parse(gt.vectorTile,this.layerIndex,this.availableImages,this.actor,xt):xt())}}abortTile(tt,et){const it=tt.uid,ct=this.loading[it];ct&&(ct.abort&&ct.abort(),delete this.loading[it]),et()}removeTile(tt,et){const it=this.loaded,ct=tt.uid;it&&it[ct]&&delete it[ct],et()}},st.WritingMode=Ol,st.ZoomDependentExpression=Bp,st.add=Fu,st.addDynamicAttributes=rv,st.adjoint=function(tt,et){var it=et[0],ct=et[1],dt=et[2],gt=et[3],xt=et[4],bt=et[5],St=et[6],Ct=et[7],Pt=et[8];return tt[0]=xt*Pt-bt*Ct,tt[1]=dt*Ct-ct*Pt,tt[2]=ct*bt-dt*xt,tt[3]=bt*St-gt*Pt,tt[4]=it*Pt-dt*St,tt[5]=dt*gt-it*bt,tt[6]=gt*Ct-xt*St,tt[7]=ct*St-it*Ct,tt[8]=it*xt-ct*gt,tt},st.asyncAll=sn,st.bezier=xn,st.bindAll=vo,st.boundsAttributes=Uw,st.bufferConvexPolygon=function(tt,et){const it=[];for(let ct=0;ct<tt.length;ct++){const dt=Or(ct-1,-1,tt.length-1),gt=Or(ct+1,-1,tt.length-1),xt=tt[ct],bt=tt[gt],St=tt[dt].sub(xt).unit(),Ct=bt.sub(xt).unit(),Pt=Ct.angleWithSep(St.x,St.y),jt=St.add(Ct).unit().mult(-1*et/Math.sin(Pt/2));it.push(xt.add(jt))}return it},st.cacheEntryPossiblyAdded=function(tt){Jn++,Jn>os&&(tt.getActor().send("enforceCacheSizeLimit",Xo),Jn=0)},st.calculateGlobeLabelMatrix=function(tt,et){const{x:it,y:ct}=tt.point,dt=p1(it,ct,tt.worldSize/tt._pixelsPerMercatorPixel,0,0);return Kp(dt,dt,Gv(wu(et)))},st.calculateGlobeMatrix=function(tt){const{x:et,y:it}=tt.point,{lng:ct,lat:dt}=tt._center;return p1(et,it,tt.worldSize,ct,dt)},st.calculateGlobeMercatorMatrix=function(tt){const et=tt.pixelsPerMeter,it=et/du(1,tt.center.lat),ct=uu(new Float64Array(16));return r_(ct,ct,[tt.point.x,tt.point.y,0]),Yp(ct,ct,[it,it,et]),Float32Array.from(ct)},st.circumferenceAtLatitude=Wv,st.clamp=Pr,st.clearTileCache=function(tt){if(!Al())return;const et=Tt.caches.delete(Ro);tt&&et.catch(tt).then(()=>tt())},st.clipLine=Sw,st.clone=function(tt){var et=new Sl(16);return et[0]=tt[0],et[1]=tt[1],et[2]=tt[2],et[3]=tt[3],et[4]=tt[4],et[5]=tt[5],et[6]=tt[6],et[7]=tt[7],et[8]=tt[8],et[9]=tt[9],et[10]=tt[10],et[11]=tt[11],et[12]=tt[12],et[13]=tt[13],et[14]=tt[14],et[15]=tt[15],et},st.clone$1=Qn,st.collisionCircleLayout=B2,st.config=Dt,st.conjugate=function(tt,et){return tt[0]=-et[0],tt[1]=-et[1],tt[2]=-et[2],tt[3]=et[3],tt},st.create=function(){var tt=new Sl(16);return Sl!=Float32Array&&(tt[1]=0,tt[2]=0,tt[3]=0,tt[4]=0,tt[6]=0,tt[7]=0,tt[8]=0,tt[9]=0,tt[11]=0,tt[12]=0,tt[13]=0,tt[14]=0),tt[0]=1,tt[5]=1,tt[10]=1,tt[15]=1,tt},st.create$1=q0,st.createExpression=op,st.createLayout=Ir,st.createStyleLayer=function(tt){return tt.type==="custom"?new IS(tt):new jS[tt.type](tt)},st.cross=Ov,st.degToRad=Jr,st.distance=function(tt,et){return Math.hypot(et[0]-tt[0],et[1]-tt[1],et[2]-tt[2])},st.div=function(tt,et,it){return tt[0]=et[0]/it[0],tt[1]=et[1]/it[1],tt[2]=et[2]/it[2],tt},st.dot=Hl,st.earthRadius=d_,st.ease=gn,st.easeCubicInOut=Dr,st.ecefToLatLng=function([tt,et,it]){const ct=Math.hypot(tt,et,it),dt=Math.atan2(tt,it),gt=.5*Math.PI-Math.acos(-et/ct);return new Do(wr(dt),wr(gt))},st.emitValidationErrors=xx,st.endsWith=Ao,st.enforceCacheSizeLimit=function(tt){Pl(),ko&&ko.then(et=>{et.keys().then(it=>{for(let ct=0;ct<it.length-tt;ct++)et.delete(it[ct])})})},st.evaluateSizeForFeature=Gx,st.evaluateSizeForZoom=Xm,st.evaluateVariableOffset=kw,st.evented=vt,st.exactEquals=function(tt,et){return tt[0]===et[0]&&tt[1]===et[1]&&tt[2]===et[2]&&tt[3]===et[3]},st.exactEquals$1=function(tt,et){return tt[0]===et[0]&&tt[1]===et[1]&&tt[2]===et[2]},st.exported=Ql,st.exported$1=Ot,st.extend=kn,st.extend$1=_c,st.fillExtrusionHeightLift=q1,st.filterObject=so,st.fromMat4=function(tt,et){return tt[0]=et[0],tt[1]=et[1],tt[2]=et[2],tt[3]=et[4],tt[4]=et[5],tt[5]=et[6],tt[6]=et[8],tt[7]=et[9],tt[8]=et[10],tt},st.fromQuat=function(tt,et){var it=et[0],ct=et[1],dt=et[2],gt=et[3],xt=it+it,bt=ct+ct,St=dt+dt,Ct=it*xt,Pt=ct*xt,jt=ct*bt,Lt=dt*xt,Bt=dt*bt,Ft=dt*St,Wt=gt*xt,rr=gt*bt,cr=gt*St;return tt[0]=1-jt-Ft,tt[1]=Pt+cr,tt[2]=Lt-rr,tt[3]=0,tt[4]=Pt-cr,tt[5]=1-Ct-Ft,tt[6]=Bt+Wt,tt[7]=0,tt[8]=Lt+rr,tt[9]=Bt-Wt,tt[10]=1-Ct-jt,tt[11]=0,tt[12]=0,tt[13]=0,tt[14]=0,tt[15]=1,tt},st.fromRotation=function(tt,et){var it=Math.sin(et),ct=Math.cos(et);return tt[0]=ct,tt[1]=it,tt[2]=0,tt[3]=-it,tt[4]=ct,tt[5]=0,tt[6]=0,tt[7]=0,tt[8]=1,tt},st.fromScaling=X0,st.furthestTileCorner=function(tt){const et=Math.round((tt+45+360)%360/90)%4;return Xr[et]},st.getAABBPointSquareDist=function(tt,et,it){let ct=0;for(let dt=0;dt<2;++dt){const gt=it?it[dt]:0;tt[dt]>gt&&(ct+=(tt[dt]-gt)*(tt[dt]-gt)),et[dt]<gt&&(ct+=(gt-et[dt])*(gt-et[dt]))}return ct},st.getAnchorAlignment=g0,st.getAnchorJustification=x0,st.getBounds=function(tt){let et=1/0,it=1/0,ct=-1/0,dt=-1/0;for(const gt of tt)et=Math.min(et,gt.x),it=Math.min(it,gt.y),ct=Math.max(ct,gt.x),dt=Math.max(dt,gt.y);return{min:new Mr(et,it),max:new Mr(ct,dt)}},st.getColumn=ws,st.getDefaultExportFromCjs=Jt,st.getGridMatrix=function(tt,et,it,ct){const dt=et.getNorth(),gt=et.getSouth(),xt=et.getWest(),bt=et.getEast(),St=1<<tt.z,Ct=bt-xt,Pt=dt-gt,jt=Ct/Jp,Lt=-Pt/c_[it],Bt=[0,jt,0,Lt,0,0,dt,xt,0];if(tt.z>0){const Ft=180/ct;Z0(Bt,Bt,[Ft/Ct+1,0,0,0,Ft/Pt+1,0,-.5*Ft/jt,.5*Ft/Lt,1])}return Bt[2]=St,Bt[5]=tt.x,Bt[8]=tt.y,Bt},st.getImage=fr,st.getJSON=function(tt,et){return Yl(kn(tt,{type:"json"}),et)},st.getLatitudinalLod=function(tt){const et=Bs-5;tt=Pr(tt,-et,et)/et*90;const it=Math.pow(Math.abs(Math.sin(Jr(tt))),3);return Math.round(it*(c_.length-1))},st.getMapSessionAPI=Es,st.getPerformanceMeasurement=oy,st.getProjection=Ow,st.getRTLTextPluginStatus=Et,st.getReferrer=Qs,st.getTilePoint=function(tt,{x:et,y:it},ct=0){return new Mr(((et-ct)*tt.scale-tt.x)*qn,(it*tt.scale-tt.y)*qn)},st.getTileVec3=function(tt,et,it=0){return Bm(((et.x-it)*tt.scale-tt.x)*qn,(et.y*tt.scale-tt.y)*qn,y1(et.z,et.y))},st.getVideo=function(tt,et){const it=Tt.document.createElement("video");it.muted=!0,it.onloadstart=function(){et(null,it)};for(let ct=0;ct<tt.length;ct++){const dt=Tt.document.createElement("source");lm(tt[ct])||(it.crossOrigin="Anonymous"),dt.src=tt[ct],it.appendChild(dt)}return{cancel:()=>{}}},st.globeCenterToScreenPoint=function(tt){const et=[0,0,0],it=uu(new Float64Array(16));return Kp(it,tt.pixelMatrix,tt.globeMatrix),ns(et,et,it),new Mr(et[0],et[1])},st.globeDenormalizeECEF=Gv,st.globeECEFOrigin=function(tt,et){const it=[0,0,0];return ns(it,it,h_(wu(et.canonical))),ns(it,it,tt),it},st.globeMetersToEcef=Ax,st.globeNormalizeECEF=h_,st.globePixelsToTileUnits=function(tt,et){return qn/(512*Math.pow(2,tt))*Px(wu(et))},st.globePoleMatrixForTile=function(tt,et,it){const ct=uu(new Float64Array(16)),dt=(et/(1<<tt)-.5)*Math.PI*2;return Rx(ct,it.globeMatrix,dt),Float32Array.from(ct)},st.globeTileBounds=wu,st.globeTiltAtLngLat=f1,st.globeToMercatorTransition=Vm,st.globeUseCustomAntiAliasing=function(tt,et,it){const ct=Vm(it.zoom),dt=tt.style.map._antialias,gt=!!et.extStandardDerivatives,xt=et.extStandardDerivativesForceOff||tt.terrain&&tt.terrain.exaggeration()>0;return ct===0&&!dt&&!xt&&gt},st.identity=uu,st.identity$1=n1,st.invert=jv,st.isFullscreen=function(){return!!Tt.document.fullscreenElement||!!Tt.document.webkitFullscreenElement},st.isLngLatBehindGlobe=Hv,st.isMapAuthenticated=function(tt){return Fs.has(tt)},st.isMapboxURL=kr,st.isSafariWithAntialiasingBug=function(tt){const et=tt.navigator?tt.navigator.userAgent:null;return!!Ls(tt)&&et&&(et.match("Version/15.4")||et.match("Version/15.5")||et.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},st.latFromMercatorY=Ns,st.latLngToECEF=Um,st.len=AE,st.length=n_,st.length$1=function(tt){return Math.hypot(tt[0],tt[1],tt[2],tt[3])},st.lngFromMercatorX=$l,st.loadVectorTile=oE,st.makeRequest=Yl,st.mapValue=function(tt,et,it,ct,dt){return Pr((tt-et)/(it-et)*(dt-ct)+ct,ct,dt)},st.mercatorScale=_1,st.mercatorXfromLng=bu,st.mercatorYfromLat=Eu,st.mercatorZfromAltitude=du,st.mul=CE,st.mul$1=RE,st.multiply=Kp,st.multiply$1=Z0,st.multiply$2=Q0,st.nextPowerOfTwo=Kn,st.normalize=qs,st.normalize$1=kE,st.normalize$2=t1,st.number=yo,st.ortho=function(tt,et,it,ct,dt,gt,xt){var bt=1/(et-it),St=1/(ct-dt),Ct=1/(gt-xt);return tt[0]=-2*bt,tt[1]=0,tt[2]=0,tt[3]=0,tt[4]=0,tt[5]=-2*St,tt[6]=0,tt[7]=0,tt[8]=0,tt[9]=0,tt[10]=2*Ct,tt[11]=0,tt[12]=(et+it)*bt,tt[13]=(dt+ct)*St,tt[14]=(xt+gt)*Ct,tt[15]=1,tt},st.pbf=nw,st.perspective=function(tt,et,it,ct,dt){var gt,xt=1/Math.tan(et/2);return tt[0]=xt/it,tt[1]=0,tt[2]=0,tt[3]=0,tt[4]=0,tt[5]=xt,tt[6]=0,tt[7]=0,tt[8]=0,tt[9]=0,tt[11]=-1,tt[12]=0,tt[13]=0,tt[15]=0,dt!=null&&dt!==1/0?(tt[10]=(dt+ct)*(gt=1/(ct-dt)),tt[14]=2*dt*ct*gt):(tt[10]=-1,tt[14]=-2*ct),tt},st.pick=function(tt,et){const it={};for(let ct=0;ct<et.length;ct++){const dt=et[ct];dt in tt&&(it[dt]=tt[dt])}return it},st.plugin=At,st.pointGeometry=Rr,st.polesInViewport=function(tt){const et=uu(new Float64Array(16));Kp(et,tt.pixelMatrix,tt.globeMatrix);const it=[0,Wl,0],ct=[0,Zl,0];return ns(it,it,et),ns(ct,ct,et),[it[0]>0&&it[0]<=tt.width&&it[1]>0&&it[1]<=tt.height&&!Hv(tt,new Do(tt.center.lat,90)),ct[0]>0&&ct[0]<=tt.width&&ct[1]>0&&ct[1]<=tt.height&&!Hv(tt,new Do(tt.center.lat,-90))]},st.polygonContainsPoint=tm,st.polygonIntersectsBox=T1,st.polygonIntersectsPolygon=w1,st.polygonizeBounds=function(tt,et,it=0,ct=!0){const dt=new Mr(it,it),gt=tt.sub(dt),xt=et.add(dt),bt=[gt,new Mr(xt.x,gt.y),xt,new Mr(gt.x,xt.y)];return ct&&bt.push(gt.clone()),bt},st.posAttributes=l_,st.postMapLoadEvent=as,st.postPerformanceEvent=_s,st.postTurnstileEvent=go,st.potpack=p0,st.prevPowerOfTwo=function(tt){return tt<=1?1:Math.pow(2,Math.floor(Math.log(tt)/Math.LN2))},st.radToDeg=wr,st.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],st.registerForPluginStateChange=function(tt){return tt({pluginStatus:ft,pluginURL:ot}),vt.on("pluginStateChange",tt),tt},st.removeAuthState=function(tt){Fs.delete(tt)},st.renderColorRamp=e0,st.resample=x1,st.rotateX=Dv,st.rotateX$1=i1,st.rotateY=Rx,st.rotateY$1=o1,st.rotateZ=function(tt,et,it){var ct=Math.sin(it),dt=Math.cos(it),gt=et[0],xt=et[1],bt=et[2],St=et[3],Ct=et[4],Pt=et[5],jt=et[6],Lt=et[7];return et!==tt&&(tt[8]=et[8],tt[9]=et[9],tt[10]=et[10],tt[11]=et[11],tt[12]=et[12],tt[13]=et[13],tt[14]=et[14],tt[15]=et[15]),tt[0]=gt*dt+Ct*ct,tt[1]=xt*dt+Pt*ct,tt[2]=bt*dt+jt*ct,tt[3]=St*dt+Lt*ct,tt[4]=Ct*dt-gt*ct,tt[5]=Pt*dt-xt*ct,tt[6]=jt*dt-bt*ct,tt[7]=Lt*dt-St*ct,tt},st.rotateZ$1=function(tt,et,it){it*=.5;var ct=et[0],dt=et[1],gt=et[2],xt=et[3],bt=Math.sin(it),St=Math.cos(it);return tt[0]=ct*St+dt*bt,tt[1]=dt*St-ct*bt,tt[2]=gt*St+xt*bt,tt[3]=xt*St-gt*bt,tt},st.scale=Yp,st.scale$1=e1,st.scale$2=Ll,st.scaleAndAdd=s_,st.set=function(tt,et,it,ct){return tt[0]=et,tt[1]=it,tt[2]=ct,tt},st.setCacheLimits=function(tt,et){Xo=tt,os=et},st.setColumn=function(tt,et,it){tt[4*et+0]=it[0],tt[4*et+1]=it[1],tt[4*et+2]=it[2],tt[4*et+3]=it[3]},st.setRTLTextPlugin=function(tt,et,it=!1){if(ft===Yy||ft===Qy||ft===Jy)throw new Error("setRTLTextPlugin cannot be called multiple times.");ot=Ql.resolveURL(tt),ft=Yy,cp=et,yt(),it||Rt()},st.smoothstep=Gr,st.spec=Yr,st.squaredLength=function(tt){var et=tt[0],it=tt[1],ct=tt[2];return et*et+it*it+ct*ct},st.storeAuthState=function(tt,et){et?Fs.add(tt):Fs.delete(tt)},st.sub=hu,st.subtract=$v,st.symbolSize=F2,st.tileAABB=function(tt,et,it,ct,dt,gt,xt,bt,St){if(St.name==="globe")return DE(tt,et,new Ux(it,ct,dt));const Ct=nm({z:it,x:ct,y:dt},St);return new Zs([(gt+Ct.x/Ct.scale)*et,et*(Ct.y/Ct.scale),xt],[(gt+Ct.x2/Ct.scale)*et,et*(Ct.y2/Ct.scale),bt])},st.tileCornersToBounds=kx,st.tileTransform=nm,st.transformMat3=function(tt,et,it){var ct=et[0],dt=et[1],gt=et[2];return tt[0]=ct*it[0]+dt*it[3]+gt*it[6],tt[1]=ct*it[1]+dt*it[4]+gt*it[7],tt[2]=ct*it[2]+dt*it[5]+gt*it[8],tt},st.transformMat4=ns,st.transformMat4$1=Qp,st.transformQuat=J0,st.transitionTileAABBinECEF=u1,st.translate=r_,st.transpose=function(tt,et){if(tt===et){var it=et[1],ct=et[2],dt=et[5];tt[1]=et[3],tt[2]=et[6],tt[3]=it,tt[5]=et[7],tt[6]=ct,tt[7]=dt}else tt[0]=et[0],tt[1]=et[3],tt[2]=et[6],tt[3]=et[1],tt[4]=et[4],tt[5]=et[7],tt[6]=et[2],tt[7]=et[5],tt[8]=et[8];return tt},st.triggerPluginCompletionEvent=ut,st.uniqueId=Fn,st.updateGlobeVertexNormal=function(tt,et,it,ct,dt){const gt=5*et+2;tt.float32[gt+0]=it,tt.float32[gt+1]=ct,tt.float32[gt+2]=dt},st.validateCustomStyleLayer=function(tt){const et=[],it=tt.id;return it===void 0&&et.push({message:`layers.${it}: missing required property "id"`}),tt.render===void 0&&et.push({message:`layers.${it}: missing required method "render"`}),tt.renderingMode&&tt.renderingMode!=="2d"&&tt.renderingMode!=="3d"&&et.push({message:`layers.${it}: property "renderingMode" must be either "2d" or "3d"`}),et},st.validateFilter=tt=>xl(Hp(tt)),st.validateFog=tt=>xl(gx(tt)),st.validateLayer=tt=>xl(dx(tt)),st.validateLight=tt=>xl(mx(tt)),st.validateSource=tt=>xl(fx(tt)),st.validateStyle=_x,st.validateTerrain=tt=>xl(Wy(tt)),st.values=ln,st.vectorTile=Nx,st.version=kt,st.warnOnce=Hn,st.window=Tt,st.wrap=Or}),pt(["./shared"],function(st){function Tt(gr){if(typeof gr=="number"||typeof gr=="boolean"||typeof gr=="string"||gr==null)return JSON.stringify(gr);if(Array.isArray(gr)){let Qt="[";for(const fr of gr)Qt+=`${Tt(fr)},`;return`${Qt}]`}let Xt="{";for(const Qt of Object.keys(gr).sort())Xt+=`${Qt}:${Tt(gr[Qt])},`;return`${Xt}}`}function kt(gr){let Xt="";for(const Qt of st.refProperties)Xt+=`/${Tt(gr[Qt])}`;return Xt}class Mt{constructor(Xt){this.keyCache={},Xt&&this.replace(Xt)}replace(Xt){this._layerConfigs={},this._layers={},this.update(Xt,[])}update(Xt,Qt){for(const vr of Xt)this._layerConfigs[vr.id]=vr,(this._layers[vr.id]=st.createStyleLayer(vr)).compileFilter(),this.keyCache[vr.id]&&delete this.keyCache[vr.id];for(const vr of Qt)delete this.keyCache[vr],delete this._layerConfigs[vr],delete this._layers[vr];this.familiesBySource={};const fr=function(vr,kr){const zr={};for(let Ar=0;Ar<vr.length;Ar++){const qr=kr&&kr[vr[Ar].id]||kt(vr[Ar]);kr&&(kr[vr[Ar].id]=qr);let An=zr[qr];An||(An=zr[qr]=[]),An.push(vr[Ar])}const $r=[];for(const Ar in zr)$r.push(zr[Ar]);return $r}(st.values(this._layerConfigs),this.keyCache);for(const vr of fr){const kr=vr.map(Pn=>this._layers[Pn.id]),zr=kr[0];if(zr.visibility==="none")continue;const $r=zr.source||"";let Ar=this.familiesBySource[$r];Ar||(Ar=this.familiesBySource[$r]={});const qr=zr.sourceLayer||"_geojsonTileLayer";let An=Ar[qr];An||(An=Ar[qr]=[]),An.push(kr)}}}class Dt{loadTile(Xt,Qt){const{uid:fr,encoding:vr,rawImageData:kr,padding:zr,buildQuadTree:$r}=Xt,Ar=st.window.ImageBitmap&&kr instanceof st.window.ImageBitmap?this.getImageData(kr,zr):kr;Qt(null,new st.DEMData(fr,Ar,vr,zr<1,$r))}getImageData(Xt,Qt){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Xt.width,Xt.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Xt.width,this.offscreenCanvas.height=Xt.height,this.offscreenCanvasContext.drawImage(Xt,0,0,Xt.width,Xt.height);const fr=this.offscreenCanvasContext.getImageData(-Qt,-Qt,Xt.width+2*Qt,Xt.height+2*Qt);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),fr}}function Ot(gr,Xt){if(gr.length!==0){Ut(gr[0],Xt);for(var Qt=1;Qt<gr.length;Qt++)Ut(gr[Qt],!Xt)}}function Ut(gr,Xt){for(var Qt=0,fr=0,vr=0,kr=gr.length,zr=kr-1;vr<kr;zr=vr++){var $r=(gr[vr][0]-gr[zr][0])*(gr[zr][1]+gr[vr][1]),Ar=Qt+$r;fr+=Math.abs(Qt)>=Math.abs($r)?Qt-Ar+$r:$r-Ar+Qt,Qt=Ar}Qt+fr>=0!=!!Xt&&gr.reverse()}var qt=st.getDefaultExportFromCjs(function gr(Xt,Qt){var fr,vr=Xt&&Xt.type;if(vr==="FeatureCollection")for(fr=0;fr<Xt.features.length;fr++)gr(Xt.features[fr],Qt);else if(vr==="GeometryCollection")for(fr=0;fr<Xt.geometries.length;fr++)gr(Xt.geometries[fr],Qt);else if(vr==="Feature")gr(Xt.geometry,Qt);else if(vr==="Polygon")Ot(Xt.coordinates,Qt);else if(vr==="MultiPolygon")for(fr=0;fr<Xt.coordinates.length;fr++)Ot(Xt.coordinates[fr],Qt);return Xt});const tr=st.VectorTileFeature.prototype.toGeoJSON;var ar={exports:{}},Yt=st.pointGeometry,Kt=st.vectorTile.VectorTileFeature,Jt=pr;function pr(gr,Xt){this.options=Xt||{},this.features=gr,this.length=gr.length}function Sr(gr,Xt){this.id=typeof gr.id=="number"?gr.id:void 0,this.type=gr.type,this.rawGeometry=gr.type===1?[gr.geometry]:gr.geometry,this.properties=gr.tags,this.extent=Xt||4096}pr.prototype.feature=function(gr){return new Sr(this.features[gr],this.options.extent)},Sr.prototype.loadGeometry=function(){var gr=this.rawGeometry;this.geometry=[];for(var Xt=0;Xt<gr.length;Xt++){for(var Qt=gr[Xt],fr=[],vr=0;vr<Qt.length;vr++)fr.push(new Yt(Qt[vr][0],Qt[vr][1]));this.geometry.push(fr)}return this.geometry},Sr.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var gr=this.geometry,Xt=1/0,Qt=-1/0,fr=1/0,vr=-1/0,kr=0;kr<gr.length;kr++)for(var zr=gr[kr],$r=0;$r<zr.length;$r++){var Ar=zr[$r];Xt=Math.min(Xt,Ar.x),Qt=Math.max(Qt,Ar.x),fr=Math.min(fr,Ar.y),vr=Math.max(vr,Ar.y)}return[Xt,fr,Qt,vr]},Sr.prototype.toGeoJSON=Kt.prototype.toGeoJSON;var Er=st.pbf,Rr=Jt;function Lr(gr){var Xt=new Er;return function(Qt,fr){for(var vr in Qt.layers)fr.writeMessage(3,Mr,Qt.layers[vr])}(gr,Xt),Xt.finish()}function Mr(gr,Xt){var Qt;Xt.writeVarintField(15,gr.version||1),Xt.writeStringField(1,gr.name||""),Xt.writeVarintField(5,gr.extent||4096);var fr={keys:[],values:[],keycache:{},valuecache:{}};for(Qt=0;Qt<gr.length;Qt++)fr.feature=gr.feature(Qt),Xt.writeMessage(2,Zr,fr);var vr=fr.keys;for(Qt=0;Qt<vr.length;Qt++)Xt.writeStringField(3,vr[Qt]);var kr=fr.values;for(Qt=0;Qt<kr.length;Qt++)Xt.writeMessage(4,Dr,kr[Qt])}function Zr(gr,Xt){var Qt=gr.feature;Qt.id!==void 0&&Xt.writeVarintField(1,Qt.id),Xt.writeMessage(2,dn,gr),Xt.writeVarintField(3,Qt.type),Xt.writeMessage(4,Xr,Qt)}function dn(gr,Xt){var Qt=gr.feature,fr=gr.keys,vr=gr.values,kr=gr.keycache,zr=gr.valuecache;for(var $r in Qt.properties){var Ar=Qt.properties[$r],qr=kr[$r];if(Ar!==null){qr===void 0&&(fr.push($r),kr[$r]=qr=fr.length-1),Xt.writeVarint(qr);var An=typeof Ar;An!=="string"&&An!=="boolean"&&An!=="number"&&(Ar=JSON.stringify(Ar));var Pn=An+":"+Ar,Tn=zr[Pn];Tn===void 0&&(vr.push(Ar),zr[Pn]=Tn=vr.length-1),Xt.writeVarint(Tn)}}}function Jr(gr,Xt){return(Xt<<3)+(7&gr)}function wr(gr){return gr<<1^gr>>31}function Xr(gr,Xt){for(var Qt=gr.loadGeometry(),fr=gr.type,vr=0,kr=0,zr=Qt.length,$r=0;$r<zr;$r++){var Ar=Qt[$r],qr=1;fr===1&&(qr=Ar.length),Xt.writeVarint(Jr(1,qr));for(var An=fr===3?Ar.length-1:Ar.length,Pn=0;Pn<An;Pn++){Pn===1&&fr!==1&&Xt.writeVarint(Jr(2,An-1));var Tn=Ar[Pn].x-vr,ro=Ar[Pn].y-kr;Xt.writeVarint(wr(Tn)),Xt.writeVarint(wr(ro)),vr+=Tn,kr+=ro}fr===3&&Xt.writeVarint(Jr(7,1))}}function Dr(gr,Xt){var Qt=typeof gr;Qt==="string"?Xt.writeStringField(1,gr):Qt==="boolean"?Xt.writeBooleanField(7,gr):Qt==="number"&&(gr%1!=0?Xt.writeDoubleField(3,gr):gr<0?Xt.writeSVarintField(6,gr):Xt.writeVarintField(5,gr))}ar.exports=Lr,ar.exports.fromVectorTileJs=Lr,ar.exports.fromGeojsonVt=function(gr,Xt){Xt=Xt||{};var Qt={};for(var fr in gr)Qt[fr]=new Rr(gr[fr].features,Xt),Qt[fr].name=fr,Qt[fr].version=Xt.version,Qt[fr].extent=Xt.extent;return Lr({layers:Qt})},ar.exports.GeoJSONWrapper=Rr;var xn=st.getDefaultExportFromCjs(ar.exports);const gn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:gr=>gr},Pr=Math.fround||(Gr=new Float32Array(1),gr=>(Gr[0]=+gr,Gr[0]));var Gr;const Or=3,sn=5,ln=6;class kn{constructor(Xt){this.options=Object.assign(Object.create(gn),Xt),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Xt){const{log:Qt,minZoom:fr,maxZoom:vr}=this.options;Qt&&console.time("total time");const kr=`prepare ${Xt.length} points`;Qt&&console.time(kr),this.points=Xt;const zr=[];for(let Ar=0;Ar<Xt.length;Ar++){const qr=Xt[Ar];if(!qr.geometry)continue;const[An,Pn]=qr.geometry.coordinates,Tn=Pr(Nn(An)),ro=Pr(Kn(Pn));zr.push(Tn,ro,1/0,Ar,-1,1),this.options.reduce&&zr.push(0)}let $r=this.trees[vr+1]=this._createTree(zr);Qt&&console.timeEnd(kr);for(let Ar=vr;Ar>=fr;Ar--){const qr=+Date.now();$r=this.trees[Ar]=this._createTree(this._cluster($r,Ar)),Qt&&console.log("z%d: %d clusters in %dms",Ar,$r.numItems,+Date.now()-qr)}return Qt&&console.timeEnd("total time"),this}getClusters(Xt,Qt){let fr=((Xt[0]+180)%360+360)%360-180;const vr=Math.max(-90,Math.min(90,Xt[1]));let kr=Xt[2]===180?180:((Xt[2]+180)%360+360)%360-180;const zr=Math.max(-90,Math.min(90,Xt[3]));if(Xt[2]-Xt[0]>=360)fr=-180,kr=180;else if(fr>kr){const Pn=this.getClusters([fr,vr,180,zr],Qt),Tn=this.getClusters([-180,vr,kr,zr],Qt);return Pn.concat(Tn)}const $r=this.trees[this._limitZoom(Qt)],Ar=$r.range(Nn(fr),Kn(zr),Nn(kr),Kn(vr)),qr=$r.data,An=[];for(const Pn of Ar){const Tn=this.stride*Pn;An.push(qr[Tn+sn]>1?Bn(qr,Tn,this.clusterProps):this.points[qr[Tn+Or]])}return An}getChildren(Xt){const Qt=this._getOriginId(Xt),fr=this._getOriginZoom(Xt),vr="No cluster with the specified id.",kr=this.trees[fr];if(!kr)throw new Error(vr);const zr=kr.data;if(Qt*this.stride>=zr.length)throw new Error(vr);const $r=this.options.radius/(this.options.extent*Math.pow(2,fr-1)),Ar=kr.within(zr[Qt*this.stride],zr[Qt*this.stride+1],$r),qr=[];for(const An of Ar){const Pn=An*this.stride;zr[Pn+4]===Xt&&qr.push(zr[Pn+sn]>1?Bn(zr,Pn,this.clusterProps):this.points[zr[Pn+Or]])}if(qr.length===0)throw new Error(vr);return qr}getLeaves(Xt,Qt,fr){const vr=[];return this._appendLeaves(vr,Xt,Qt=Qt||10,fr=fr||0,0),vr}getTile(Xt,Qt,fr){const vr=this.trees[this._limitZoom(Xt)],kr=Math.pow(2,Xt),{extent:zr,radius:$r}=this.options,Ar=$r/zr,qr=(fr-Ar)/kr,An=(fr+1+Ar)/kr,Pn={features:[]};return this._addTileFeatures(vr.range((Qt-Ar)/kr,qr,(Qt+1+Ar)/kr,An),vr.data,Qt,fr,kr,Pn),Qt===0&&this._addTileFeatures(vr.range(1-Ar/kr,qr,1,An),vr.data,kr,fr,kr,Pn),Qt===kr-1&&this._addTileFeatures(vr.range(0,qr,Ar/kr,An),vr.data,-1,fr,kr,Pn),Pn.features.length?Pn:null}getClusterExpansionZoom(Xt){let Qt=this._getOriginZoom(Xt)-1;for(;Qt<=this.options.maxZoom;){const fr=this.getChildren(Xt);if(Qt++,fr.length!==1)break;Xt=fr[0].properties.cluster_id}return Qt}_appendLeaves(Xt,Qt,fr,vr,kr){const zr=this.getChildren(Qt);for(const $r of zr){const Ar=$r.properties;if(Ar&&Ar.cluster?kr+Ar.point_count<=vr?kr+=Ar.point_count:kr=this._appendLeaves(Xt,Ar.cluster_id,fr,vr,kr):kr<vr?kr++:Xt.push($r),Xt.length===fr)break}return kr}_createTree(Xt){const Qt=new st.KDBush(Xt.length/this.stride|0,this.options.nodeSize,Float32Array);for(let fr=0;fr<Xt.length;fr+=this.stride)Qt.add(Xt[fr],Xt[fr+1]);return Qt.finish(),Qt.data=Xt,Qt}_addTileFeatures(Xt,Qt,fr,vr,kr,zr){for(const $r of Xt){const Ar=$r*this.stride,qr=Qt[Ar+sn]>1;let An,Pn,Tn;if(qr)An=Fn(Qt,Ar,this.clusterProps),Pn=Qt[Ar],Tn=Qt[Ar+1];else{const no=this.points[Qt[Ar+Or]];An=no.properties;const[lo,go]=no.geometry.coordinates;Pn=Nn(lo),Tn=Kn(go)}const ro={type:1,geometry:[[Math.round(this.options.extent*(Pn*kr-fr)),Math.round(this.options.extent*(Tn*kr-vr))]],tags:An};let ao;ao=qr||this.options.generateId?Qt[Ar+Or]:this.points[Qt[Ar+Or]].id,ao!==void 0&&(ro.id=ao),zr.features.push(ro)}}_limitZoom(Xt){return Math.max(this.options.minZoom,Math.min(Math.floor(+Xt),this.options.maxZoom+1))}_cluster(Xt,Qt){const{radius:fr,extent:vr,reduce:kr,minPoints:zr}=this.options,$r=fr/(vr*Math.pow(2,Qt)),Ar=Xt.data,qr=[],An=this.stride;for(let Pn=0;Pn<Ar.length;Pn+=An){if(Ar[Pn+2]<=Qt)continue;Ar[Pn+2]=Qt;const Tn=Ar[Pn],ro=Ar[Pn+1],ao=Xt.within(Ar[Pn],Ar[Pn+1],$r),no=Ar[Pn+sn];let lo=no;for(const go of ao){const qo=go*An;Ar[qo+2]>Qt&&(lo+=Ar[qo+sn])}if(lo>no&&lo>=zr){let go,qo=Tn*no,as=ro*no,$s=-1;const _s=((Pn/An|0)<<5)+(Qt+1)+this.points.length;for(const zl of ao){const Es=zl*An;if(Ar[Es+2]<=Qt)continue;Ar[Es+2]=Qt;const Fs=Ar[Es+sn];qo+=Ar[Es]*Fs,as+=Ar[Es+1]*Fs,Ar[Es+4]=_s,kr&&(go||(go=this._map(Ar,Pn,!0),$s=this.clusterProps.length,this.clusterProps.push(go)),kr(go,this._map(Ar,Es)))}Ar[Pn+4]=_s,qr.push(qo/lo,as/lo,1/0,_s,-1,lo),kr&&qr.push($s)}else{for(let go=0;go<An;go++)qr.push(Ar[Pn+go]);if(lo>1)for(const go of ao){const qo=go*An;if(!(Ar[qo+2]<=Qt)){Ar[qo+2]=Qt;for(let as=0;as<An;as++)qr.push(Ar[qo+as])}}}}return qr}_getOriginId(Xt){return Xt-this.points.length>>5}_getOriginZoom(Xt){return(Xt-this.points.length)%32}_map(Xt,Qt,fr){if(Xt[Qt+sn]>1){const zr=this.clusterProps[Xt[Qt+ln]];return fr?Object.assign({},zr):zr}const vr=this.points[Xt[Qt+Or]].properties,kr=this.options.map(vr);return fr&&kr===vr?Object.assign({},kr):kr}}function Bn(gr,Xt,Qt){return{type:"Feature",id:gr[Xt+Or],properties:Fn(gr,Xt,Qt),geometry:{type:"Point",coordinates:[(fr=gr[Xt],360*(fr-.5)),uo(gr[Xt+1])]}};var fr}function Fn(gr,Xt,Qt){const fr=gr[Xt+sn],vr=fr>=1e4?`${Math.round(fr/1e3)}k`:fr>=1e3?Math.round(fr/100)/10+"k":fr,kr=gr[Xt+ln],zr=kr===-1?{}:Object.assign({},Qt[kr]);return Object.assign(zr,{cluster:!0,cluster_id:gr[Xt+Or],point_count:fr,point_count_abbreviated:vr})}function Nn(gr){return gr/360+.5}function Kn(gr){const Xt=Math.sin(gr*Math.PI/180),Qt=.5-.25*Math.log((1+Xt)/(1-Xt))/Math.PI;return Qt<0?0:Qt>1?1:Qt}function uo(gr){const Xt=(180-360*gr)*Math.PI/180;return 360*Math.atan(Math.exp(Xt))/Math.PI-90}function vo(gr,Xt,Qt,fr){for(var vr,kr=fr,zr=Qt-Xt>>1,$r=Qt-Xt,Ar=gr[Xt],qr=gr[Xt+1],An=gr[Qt],Pn=gr[Qt+1],Tn=Xt+3;Tn<Qt;Tn+=3){var ro=Ao(gr[Tn],gr[Tn+1],Ar,qr,An,Pn);if(ro>kr)vr=Tn,kr=ro;else if(ro===kr){var ao=Math.abs(Tn-zr);ao<$r&&(vr=Tn,$r=ao)}}kr>fr&&(vr-Xt>3&&vo(gr,Xt,vr,fr),gr[vr+2]=kr,Qt-vr>3&&vo(gr,vr,Qt,fr))}function Ao(gr,Xt,Qt,fr,vr,kr){var zr=vr-Qt,$r=kr-fr;if(zr!==0||$r!==0){var Ar=((gr-Qt)*zr+(Xt-fr)*$r)/(zr*zr+$r*$r);Ar>1?(Qt=vr,fr=kr):Ar>0&&(Qt+=zr*Ar,fr+=$r*Ar)}return(zr=gr-Qt)*zr+($r=Xt-fr)*$r}function Un(gr,Xt,Qt,fr){var vr={id:gr===void 0?null:gr,type:Xt,geometry:Qt,tags:fr,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(kr){var zr=kr.geometry,$r=kr.type;if($r==="Point"||$r==="MultiPoint"||$r==="LineString")so(kr,zr);else if($r==="Polygon"||$r==="MultiLineString")for(var Ar=0;Ar<zr.length;Ar++)so(kr,zr[Ar]);else if($r==="MultiPolygon")for(Ar=0;Ar<zr.length;Ar++)for(var qr=0;qr<zr[Ar].length;qr++)so(kr,zr[Ar][qr])}(vr),vr}function so(gr,Xt){for(var Qt=0;Qt<Xt.length;Qt+=3)gr.minX=Math.min(gr.minX,Xt[Qt]),gr.minY=Math.min(gr.minY,Xt[Qt+1]),gr.maxX=Math.max(gr.maxX,Xt[Qt]),gr.maxY=Math.max(gr.maxY,Xt[Qt+1])}function Qn(gr,Xt,Qt,fr){if(Xt.geometry){var vr=Xt.geometry.coordinates,kr=Xt.geometry.type,zr=Math.pow(Qt.tolerance/((1<<Qt.maxZoom)*Qt.extent),2),$r=[],Ar=Xt.id;if(Qt.promoteId?Ar=Xt.properties[Qt.promoteId]:Qt.generateId&&(Ar=fr||0),kr==="Point")Vo(vr,$r);else if(kr==="MultiPoint")for(var qr=0;qr<vr.length;qr++)Vo(vr[qr],$r);else if(kr==="LineString")Hn(vr,$r,zr,!1);else if(kr==="MultiLineString"){if(Qt.lineMetrics){for(qr=0;qr<vr.length;qr++)Hn(vr[qr],$r=[],zr,!1),gr.push(Un(Ar,"LineString",$r,Xt.properties));return}Jo(vr,$r,zr,!1)}else if(kr==="Polygon")Jo(vr,$r,zr,!0);else{if(kr!=="MultiPolygon"){if(kr==="GeometryCollection"){for(qr=0;qr<Xt.geometry.geometries.length;qr++)Qn(gr,{id:Ar,geometry:Xt.geometry.geometries[qr],properties:Xt.properties},Qt,fr);return}throw new Error("Input data is not a valid GeoJSON object.")}for(qr=0;qr<vr.length;qr++){var An=[];Jo(vr[qr],An,zr,!0),$r.push(An)}}gr.push(Un(Ar,kr,$r,Xt.properties))}}function Vo(gr,Xt){Xt.push(js(gr[0])),Xt.push(Ds(gr[1])),Xt.push(0)}function Hn(gr,Xt,Qt,fr){for(var vr,kr,zr=0,$r=0;$r<gr.length;$r++){var Ar=js(gr[$r][0]),qr=Ds(gr[$r][1]);Xt.push(Ar),Xt.push(qr),Xt.push(0),$r>0&&(zr+=fr?(vr*qr-Ar*kr)/2:Math.sqrt(Math.pow(Ar-vr,2)+Math.pow(qr-kr,2))),vr=Ar,kr=qr}var An=Xt.length-3;Xt[2]=1,vo(Xt,0,An,Qt),Xt[An+2]=1,Xt.size=Math.abs(zr),Xt.start=0,Xt.end=Xt.size}function Jo(gr,Xt,Qt,fr){for(var vr=0;vr<gr.length;vr++){var kr=[];Hn(gr[vr],kr,Qt,fr),Xt.push(kr)}}function js(gr){return gr/360+.5}function Ds(gr){var Xt=Math.sin(gr*Math.PI/180),Qt=.5-.25*Math.log((1+Xt)/(1-Xt))/Math.PI;return Qt<0?0:Qt>1?1:Qt}function vs(gr,Xt,Qt,fr,vr,kr,zr,$r){if(fr/=Xt,kr>=(Qt/=Xt)&&zr<fr)return gr;if(zr<Qt||kr>=fr)return null;for(var Ar=[],qr=0;qr<gr.length;qr++){var An=gr[qr],Pn=An.geometry,Tn=An.type,ro=vr===0?An.minX:An.minY,ao=vr===0?An.maxX:An.maxY;if(ro>=Qt&&ao<fr)Ar.push(An);else if(!(ao<Qt||ro>=fr)){var no=[];if(Tn==="Point"||Tn==="MultiPoint")ks(Pn,no,Qt,fr,vr);else if(Tn==="LineString")Ls(Pn,no,Qt,fr,vr,!1,$r.lineMetrics);else if(Tn==="MultiLineString")ws(Pn,no,Qt,fr,vr,!1);else if(Tn==="Polygon")ws(Pn,no,Qt,fr,vr,!0);else if(Tn==="MultiPolygon")for(var lo=0;lo<Pn.length;lo++){var go=[];ws(Pn[lo],go,Qt,fr,vr,!0),go.length&&no.push(go)}if(no.length){if($r.lineMetrics&&Tn==="LineString"){for(lo=0;lo<no.length;lo++)Ar.push(Un(An.id,Tn,no[lo],An.tags));continue}Tn!=="LineString"&&Tn!=="MultiLineString"||(no.length===1?(Tn="LineString",no=no[0]):Tn="MultiLineString"),Tn!=="Point"&&Tn!=="MultiPoint"||(Tn=no.length===3?"Point":"MultiPoint"),Ar.push(Un(An.id,Tn,no,An.tags))}}}return Ar.length?Ar:null}function ks(gr,Xt,Qt,fr,vr){for(var kr=0;kr<gr.length;kr+=3){var zr=gr[kr+vr];zr>=Qt&&zr<=fr&&(Xt.push(gr[kr]),Xt.push(gr[kr+1]),Xt.push(gr[kr+2]))}}function Ls(gr,Xt,Qt,fr,vr,kr,zr){for(var $r,Ar,qr=Vs(gr),An=vr===0?Xo:os,Pn=gr.start,Tn=0;Tn<gr.length-3;Tn+=3){var ro=gr[Tn],ao=gr[Tn+1],no=gr[Tn+2],lo=gr[Tn+3],go=gr[Tn+4],qo=vr===0?ro:ao,as=vr===0?lo:go,$s=!1;zr&&($r=Math.sqrt(Math.pow(ro-lo,2)+Math.pow(ao-go,2))),qo<Qt?as>Qt&&(Ar=An(qr,ro,ao,lo,go,Qt),zr&&(qr.start=Pn+$r*Ar)):qo>fr?as<fr&&(Ar=An(qr,ro,ao,lo,go,fr),zr&&(qr.start=Pn+$r*Ar)):Ro(qr,ro,ao,no),as<Qt&&qo>=Qt&&(Ar=An(qr,ro,ao,lo,go,Qt),$s=!0),as>fr&&qo<=fr&&(Ar=An(qr,ro,ao,lo,go,fr),$s=!0),!kr&&$s&&(zr&&(qr.end=Pn+$r*Ar),Xt.push(qr),qr=Vs(gr)),zr&&(Pn+=$r)}var _s=gr.length-3;ro=gr[_s],ao=gr[_s+1],no=gr[_s+2],(qo=vr===0?ro:ao)>=Qt&&qo<=fr&&Ro(qr,ro,ao,no),_s=qr.length-3,kr&&_s>=3&&(qr[_s]!==qr[0]||qr[_s+1]!==qr[1])&&Ro(qr,qr[0],qr[1],qr[2]),qr.length&&Xt.push(qr)}function Vs(gr){var Xt=[];return Xt.size=gr.size,Xt.start=gr.start,Xt.end=gr.end,Xt}function ws(gr,Xt,Qt,fr,vr,kr){for(var zr=0;zr<gr.length;zr++)Ls(gr[zr],Xt,Qt,fr,vr,kr,!1)}function Ro(gr,Xt,Qt,fr){gr.push(Xt),gr.push(Qt),gr.push(fr)}function Xo(gr,Xt,Qt,fr,vr,kr){var zr=(kr-Xt)/(fr-Xt);return gr.push(kr),gr.push(Qt+(vr-Qt)*zr),gr.push(1),zr}function os(gr,Xt,Qt,fr,vr,kr){var zr=(kr-Qt)/(vr-Qt);return gr.push(Xt+(fr-Xt)*zr),gr.push(kr),gr.push(1),zr}function ko(gr,Xt){for(var Qt=[],fr=0;fr<gr.length;fr++){var vr,kr=gr[fr],zr=kr.type;if(zr==="Point"||zr==="MultiPoint"||zr==="LineString")vr=ys(kr.geometry,Xt);else if(zr==="MultiLineString"||zr==="Polygon"){vr=[];for(var $r=0;$r<kr.geometry.length;$r++)vr.push(ys(kr.geometry[$r],Xt))}else if(zr==="MultiPolygon")for(vr=[],$r=0;$r<kr.geometry.length;$r++){for(var Ar=[],qr=0;qr<kr.geometry[$r].length;qr++)Ar.push(ys(kr.geometry[$r][qr],Xt));vr.push(Ar)}Qt.push(Un(kr.id,zr,vr,kr.tags))}return Qt}function ys(gr,Xt){var Qt=[];Qt.size=gr.size,gr.start!==void 0&&(Qt.start=gr.start,Qt.end=gr.end);for(var fr=0;fr<gr.length;fr+=3)Qt.push(gr[fr]+Xt,gr[fr+1],gr[fr+2]);return Qt}function Al(gr,Xt){if(gr.transformed)return gr;var Qt,fr,vr,kr=1<<gr.z,zr=gr.x,$r=gr.y;for(Qt=0;Qt<gr.features.length;Qt++){var Ar=gr.features[Qt],qr=Ar.geometry,An=Ar.type;if(Ar.geometry=[],An===1)for(fr=0;fr<qr.length;fr+=2)Ar.geometry.push(Pl(qr[fr],qr[fr+1],Xt,kr,zr,$r));else for(fr=0;fr<qr.length;fr++){var Pn=[];for(vr=0;vr<qr[fr].length;vr+=2)Pn.push(Pl(qr[fr][vr],qr[fr][vr+1],Xt,kr,zr,$r));Ar.geometry.push(Pn)}}return gr.transformed=!0,gr}function Pl(gr,Xt,Qt,fr,vr,kr){return[Math.round(Qt*(gr*fr-vr)),Math.round(Qt*(Xt*fr-kr))]}function Kl(gr,Xt,Qt,fr,vr){for(var kr=Xt===vr.maxZoom?0:vr.tolerance/((1<<Xt)*vr.extent),zr={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Qt,y:fr,z:Xt,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},$r=0;$r<gr.length;$r++){zr.numFeatures++,Jn(zr,gr[$r],kr,vr);var Ar=gr[$r].minX,qr=gr[$r].minY,An=gr[$r].maxX,Pn=gr[$r].maxY;Ar<zr.minX&&(zr.minX=Ar),qr<zr.minY&&(zr.minY=qr),An>zr.maxX&&(zr.maxX=An),Pn>zr.maxY&&(zr.maxY=Pn)}return zr}function Jn(gr,Xt,Qt,fr){var vr=Xt.geometry,kr=Xt.type,zr=[];if(kr==="Point"||kr==="MultiPoint")for(var $r=0;$r<vr.length;$r+=3)zr.push(vr[$r]),zr.push(vr[$r+1]),gr.numPoints++,gr.numSimplified++;else if(kr==="LineString")Eo(zr,vr,gr,Qt,!1,!1);else if(kr==="MultiLineString"||kr==="Polygon")for($r=0;$r<vr.length;$r++)Eo(zr,vr[$r],gr,Qt,kr==="Polygon",$r===0);else if(kr==="MultiPolygon")for(var Ar=0;Ar<vr.length;Ar++){var qr=vr[Ar];for($r=0;$r<qr.length;$r++)Eo(zr,qr[$r],gr,Qt,!0,$r===0)}if(zr.length){var An=Xt.tags||null;if(kr==="LineString"&&fr.lineMetrics){for(var Pn in An={},Xt.tags)An[Pn]=Xt.tags[Pn];An.mapbox_clip_start=vr.start/vr.size,An.mapbox_clip_end=vr.end/vr.size}var Tn={geometry:zr,type:kr==="Polygon"||kr==="MultiPolygon"?3:kr==="LineString"||kr==="MultiLineString"?2:1,tags:An};Xt.id!==null&&(Tn.id=Xt.id),gr.features.push(Tn)}}function Eo(gr,Xt,Qt,fr,vr,kr){var zr=fr*fr;if(fr>0&&Xt.size<(vr?zr:fr))Qt.numPoints+=Xt.length/3;else{for(var $r=[],Ar=0;Ar<Xt.length;Ar+=3)(fr===0||Xt[Ar+2]>zr)&&(Qt.numSimplified++,$r.push(Xt[Ar]),$r.push(Xt[Ar+1])),Qt.numPoints++;vr&&function(qr,An){for(var Pn=0,Tn=0,ro=qr.length,ao=ro-2;Tn<ro;ao=Tn,Tn+=2)Pn+=(qr[Tn]-qr[ao])*(qr[Tn+1]+qr[ao+1]);if(Pn>0===An)for(Tn=0,ro=qr.length;Tn<ro/2;Tn+=2){var no=qr[Tn],lo=qr[Tn+1];qr[Tn]=qr[ro-2-Tn],qr[Tn+1]=qr[ro-1-Tn],qr[ro-2-Tn]=no,qr[ro-1-Tn]=lo}}($r,kr),gr.push($r)}}function bs(gr,Xt){var Qt=(Xt=this.options=function(vr,kr){for(var zr in kr)vr[zr]=kr[zr];return vr}(Object.create(this.options),Xt)).debug;if(Qt&&console.time("preprocess data"),Xt.maxZoom<0||Xt.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Xt.promoteId&&Xt.generateId)throw new Error("promoteId and generateId cannot be used together.");var fr=function(vr,kr){var zr=[];if(vr.type==="FeatureCollection")for(var $r=0;$r<vr.features.length;$r++)Qn(zr,vr.features[$r],kr,$r);else Qn(zr,vr.type==="Feature"?vr:{geometry:vr},kr);return zr}(gr,Xt);this.tiles={},this.tileCoords=[],Qt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Xt.indexMaxZoom,Xt.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),fr=function(vr,kr){var zr=kr.buffer/kr.extent,$r=vr,Ar=vs(vr,1,-1-zr,zr,0,-1,2,kr),qr=vs(vr,1,1-zr,2+zr,0,-1,2,kr);return(Ar||qr)&&($r=vs(vr,1,-zr,1+zr,0,-1,2,kr)||[],Ar&&($r=ko(Ar,1).concat($r)),qr&&($r=$r.concat(ko(qr,-1)))),$r}(fr,Xt),fr.length&&this.splitTile(fr,0,0,0),Qt&&(fr.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Qs(gr,Xt,Qt){return 32*((1<<gr)*Qt+Xt)+gr}function Yl(gr,Xt){const Qt=gr.tileID.canonical;if(!this._geoJSONIndex)return Xt(null,null);const fr=this._geoJSONIndex.getTile(Qt.z,Qt.x,Qt.y);if(!fr)return Xt(null,null);const vr=new class{constructor(zr){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=st.EXTENT,this.length=zr.length,this._features=zr}feature(zr){return new class{constructor($r){this._feature=$r,this.extent=st.EXTENT,this.type=$r.type,this.properties=$r.tags,"id"in $r&&!isNaN($r.id)&&(this.id=parseInt($r.id,10))}loadGeometry(){if(this._feature.type===1){const $r=[];for(const Ar of this._feature.geometry)$r.push([new st.Point(Ar[0],Ar[1])]);return $r}{const $r=[];for(const Ar of this._feature.geometry){const qr=[];for(const An of Ar)qr.push(new st.Point(An[0],An[1]));$r.push(qr)}return $r}}toGeoJSON($r,Ar,qr){return tr.call(this,$r,Ar,qr)}}(this._features[zr])}}(fr.features);let kr=xn(vr);kr.byteOffset===0&&kr.byteLength===kr.buffer.byteLength||(kr=new Uint8Array(kr)),Xt(null,{vectorTile:vr,rawData:kr.buffer})}bs.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},bs.prototype.splitTile=function(gr,Xt,Qt,fr,vr,kr,zr){for(var $r=[gr,Xt,Qt,fr],Ar=this.options,qr=Ar.debug;$r.length;){fr=$r.pop(),Qt=$r.pop(),Xt=$r.pop(),gr=$r.pop();var An=1<<Xt,Pn=Qs(Xt,Qt,fr),Tn=this.tiles[Pn];if(!Tn&&(qr>1&&console.time("creation"),Tn=this.tiles[Pn]=Kl(gr,Xt,Qt,fr,Ar),this.tileCoords.push({z:Xt,x:Qt,y:fr}),qr)){qr>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Xt,Qt,fr,Tn.numFeatures,Tn.numPoints,Tn.numSimplified),console.timeEnd("creation"));var ro="z"+Xt;this.stats[ro]=(this.stats[ro]||0)+1,this.total++}if(Tn.source=gr,vr){if(Xt===Ar.maxZoom||Xt===vr)continue;var ao=1<<vr-Xt;if(Qt!==Math.floor(kr/ao)||fr!==Math.floor(zr/ao))continue}else if(Xt===Ar.indexMaxZoom||Tn.numPoints<=Ar.indexMaxPoints)continue;if(Tn.source=null,gr.length!==0){qr>1&&console.time("clipping");var no,lo,go,qo,as,$s,_s=.5*Ar.buffer/Ar.extent,zl=.5-_s,Es=.5+_s,Fs=1+_s;no=lo=go=qo=null,as=vs(gr,An,Qt-_s,Qt+Es,0,Tn.minX,Tn.maxX,Ar),$s=vs(gr,An,Qt+zl,Qt+Fs,0,Tn.minX,Tn.maxX,Ar),gr=null,as&&(no=vs(as,An,fr-_s,fr+Es,1,Tn.minY,Tn.maxY,Ar),lo=vs(as,An,fr+zl,fr+Fs,1,Tn.minY,Tn.maxY,Ar),as=null),$s&&(go=vs($s,An,fr-_s,fr+Es,1,Tn.minY,Tn.maxY,Ar),qo=vs($s,An,fr+zl,fr+Fs,1,Tn.minY,Tn.maxY,Ar),$s=null),qr>1&&console.timeEnd("clipping"),$r.push(no||[],Xt+1,2*Qt,2*fr),$r.push(lo||[],Xt+1,2*Qt,2*fr+1),$r.push(go||[],Xt+1,2*Qt+1,2*fr),$r.push(qo||[],Xt+1,2*Qt+1,2*fr+1)}}},bs.prototype.getTile=function(gr,Xt,Qt){var fr=this.options,vr=fr.extent,kr=fr.debug;if(gr<0||gr>24)return null;var zr=1<<gr,$r=Qs(gr,Xt=(Xt%zr+zr)%zr,Qt);if(this.tiles[$r])return Al(this.tiles[$r],vr);kr>1&&console.log("drilling down to z%d-%d-%d",gr,Xt,Qt);for(var Ar,qr=gr,An=Xt,Pn=Qt;!Ar&&qr>0;)qr--,An=Math.floor(An/2),Pn=Math.floor(Pn/2),Ar=this.tiles[Qs(qr,An,Pn)];return Ar&&Ar.source?(kr>1&&console.log("found parent tile z%d-%d-%d",qr,An,Pn),kr>1&&console.time("drilling down"),this.splitTile(Ar.source,qr,An,Pn,gr,Xt,Qt),kr>1&&console.timeEnd("drilling down"),this.tiles[$r]?Al(this.tiles[$r],vr):null):null};class Wu extends st.VectorTileWorkerSource{constructor(Xt,Qt,fr,vr,kr){super(Xt,Qt,fr,vr,Yl),kr&&(this.loadGeoJSON=kr)}loadData(Xt,Qt){const fr=Xt&&Xt.request,vr=fr&&fr.collectResourceTiming;this.loadGeoJSON(Xt,(kr,zr)=>{if(kr||!zr)return Qt(kr);if(typeof zr!="object")return Qt(new Error(`Input data given to '${Xt.source}' is not a valid GeoJSON object.`));{qt(zr,!0);try{if(Xt.filter){const Ar=st.createExpression(Xt.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ar.result==="error")throw new Error(Ar.value.map(An=>`${An.key}: ${An.message}`).join(", "));zr={type:"FeatureCollection",features:zr.features.filter(An=>Ar.value.evaluate({zoom:0},An))}}this._geoJSONIndex=Xt.cluster?new kn(function({superclusterOptions:Ar,clusterProperties:qr}){if(!qr||!Ar)return Ar;const An={},Pn={},Tn={accumulated:null,zoom:0},ro={properties:null},ao=Object.keys(qr);for(const no of ao){const[lo,go]=qr[no],qo=st.createExpression(go),as=st.createExpression(typeof lo=="string"?[lo,["accumulated"],["get",no]]:lo);An[no]=qo.value,Pn[no]=as.value}return Ar.map=no=>{ro.properties=no;const lo={};for(const go of ao)lo[go]=An[go].evaluate(Tn,ro);return lo},Ar.reduce=(no,lo)=>{ro.properties=lo;for(const go of ao)Tn.accumulated=no[go],no[go]=Pn[go].evaluate(Tn,ro)},Ar}(Xt)).load(zr.features):function(Ar,qr){return new bs(Ar,qr)}(zr,Xt.geojsonVtOptions)}catch(Ar){return Qt(Ar)}this.loaded={};const $r={};if(vr){const Ar=st.getPerformanceMeasurement(fr);Ar&&($r.resourceTiming={},$r.resourceTiming[Xt.source]=JSON.parse(JSON.stringify(Ar)))}Qt(null,$r)}})}reloadTile(Xt,Qt){const fr=this.loaded;return fr&&fr[Xt.uid]?super.reloadTile(Xt,Qt):this.loadTile(Xt,Qt)}loadGeoJSON(Xt,Qt){if(Xt.request)st.getJSON(Xt.request,Qt);else{if(typeof Xt.data!="string")return Qt(new Error(`Input data given to '${Xt.source}' is not a valid GeoJSON object.`));try{return Qt(null,JSON.parse(Xt.data))}catch{return Qt(new Error(`Input data given to '${Xt.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(Xt,Qt){try{Qt(null,this._geoJSONIndex.getClusterExpansionZoom(Xt.clusterId))}catch(fr){Qt(fr)}}getClusterChildren(Xt,Qt){try{Qt(null,this._geoJSONIndex.getChildren(Xt.clusterId))}catch(fr){Qt(fr)}}getClusterLeaves(Xt,Qt){try{Qt(null,this._geoJSONIndex.getLeaves(Xt.clusterId,Xt.limit,Xt.offset))}catch(fr){Qt(fr)}}}class lm{constructor(Xt){this.self=Xt,this.actor=new st.Actor(Xt,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=st.getProjection({name:"mercator"}),this.workerSourceTypes={vector:st.VectorTileWorkerSource,geojson:Wu},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Qt,fr)=>{if(this.workerSourceTypes[Qt])throw new Error(`Worker source with name "${Qt}" already registered.`);this.workerSourceTypes[Qt]=fr},this.self.registerRTLTextPlugin=Qt=>{if(st.plugin.isParsed())throw new Error("RTL text plugin already registered.");st.plugin.applyArabicShaping=Qt.applyArabicShaping,st.plugin.processBidirectionalText=Qt.processBidirectionalText,st.plugin.processStyledBidirectionalText=Qt.processStyledBidirectionalText}}clearCaches(Xt,Qt,fr){delete this.layerIndexes[Xt],delete this.availableImages[Xt],delete this.workerSources[Xt],delete this.demWorkerSources[Xt],fr()}checkIfReady(Xt,Qt,fr){fr()}setReferrer(Xt,Qt){this.referrer=Qt}spriteLoaded(Xt,Qt){this.isSpriteLoaded[Xt]=Qt;for(const fr in this.workerSources[Xt]){const vr=this.workerSources[Xt][fr];for(const kr in vr)vr[kr]instanceof st.VectorTileWorkerSource&&(vr[kr].isSpriteLoaded=Qt,vr[kr].fire(new st.Event("isSpriteLoaded")))}}setImages(Xt,Qt,fr){this.availableImages[Xt]=Qt;for(const vr in this.workerSources[Xt]){const kr=this.workerSources[Xt][vr];for(const zr in kr)kr[zr].availableImages=Qt}fr()}enableTerrain(Xt,Qt,fr){this.terrain=Qt,fr()}setProjection(Xt,Qt){this.projections[Xt]=st.getProjection(Qt)}setLayers(Xt,Qt,fr){this.getLayerIndex(Xt).replace(Qt),fr()}updateLayers(Xt,Qt,fr){this.getLayerIndex(Xt).update(Qt.layers,Qt.removedIds),fr()}loadTile(Xt,Qt,fr){const vr=this.enableTerrain?st.extend({enableTerrain:this.terrain},Qt):Qt;vr.projection=this.projections[Xt]||this.defaultProjection,this.getWorkerSource(Xt,Qt.type,Qt.source).loadTile(vr,fr)}loadDEMTile(Xt,Qt,fr){const vr=this.enableTerrain?st.extend({buildQuadTree:this.terrain},Qt):Qt;this.getDEMWorkerSource(Xt,Qt.source).loadTile(vr,fr)}reloadTile(Xt,Qt,fr){const vr=this.enableTerrain?st.extend({enableTerrain:this.terrain},Qt):Qt;vr.projection=this.projections[Xt]||this.defaultProjection,this.getWorkerSource(Xt,Qt.type,Qt.source).reloadTile(vr,fr)}abortTile(Xt,Qt,fr){this.getWorkerSource(Xt,Qt.type,Qt.source).abortTile(Qt,fr)}removeTile(Xt,Qt,fr){this.getWorkerSource(Xt,Qt.type,Qt.source).removeTile(Qt,fr)}removeSource(Xt,Qt,fr){if(!this.workerSources[Xt]||!this.workerSources[Xt][Qt.type]||!this.workerSources[Xt][Qt.type][Qt.source])return;const vr=this.workerSources[Xt][Qt.type][Qt.source];delete this.workerSources[Xt][Qt.type][Qt.source],vr.removeSource!==void 0?vr.removeSource(Qt,fr):fr()}loadWorkerSource(Xt,Qt,fr){try{this.self.importScripts(Qt.url),fr()}catch(vr){fr(vr.toString())}}syncRTLPluginState(Xt,Qt,fr){try{st.plugin.setState(Qt);const vr=st.plugin.getPluginURL();if(st.plugin.isLoaded()&&!st.plugin.isParsed()&&vr!=null){this.self.importScripts(vr);const kr=st.plugin.isParsed();fr(kr?void 0:new Error(`RTL Text Plugin failed to import scripts from ${vr}`),kr)}}catch(vr){fr(vr.toString())}}getAvailableImages(Xt){let Qt=this.availableImages[Xt];return Qt||(Qt=[]),Qt}getLayerIndex(Xt){let Qt=this.layerIndexes[Xt];return Qt||(Qt=this.layerIndexes[Xt]=new Mt),Qt}getWorkerSource(Xt,Qt,fr){if(this.workerSources[Xt]||(this.workerSources[Xt]={}),this.workerSources[Xt][Qt]||(this.workerSources[Xt][Qt]={}),!this.workerSources[Xt][Qt][fr]){const vr={send:(kr,zr,$r,Ar,qr,An)=>{this.actor.send(kr,zr,$r,Xt,qr,An)},scheduler:this.actor.scheduler};this.workerSources[Xt][Qt][fr]=new this.workerSourceTypes[Qt](vr,this.getLayerIndex(Xt),this.getAvailableImages(Xt),this.isSpriteLoaded[Xt])}return this.workerSources[Xt][Qt][fr]}getDEMWorkerSource(Xt,Qt){return this.demWorkerSources[Xt]||(this.demWorkerSources[Xt]={}),this.demWorkerSources[Xt][Qt]||(this.demWorkerSources[Xt][Qt]=new Dt),this.demWorkerSources[Xt][Qt]}enforceCacheSizeLimit(Xt,Qt){st.enforceCacheSizeLimit(Qt)}getWorkerPerformanceMetrics(Xt,Qt,fr){fr(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new lm(self)),lm}),pt(["./shared"],function(st){function Tt(ft,ot){if(Array.isArray(ft)){if(!Array.isArray(ot)||ft.length!==ot.length)return!1;for(let ut=0;ut<ft.length;ut++)if(!Tt(ft[ut],ot[ut]))return!1;return!0}if(typeof ft=="object"&&ft!==null&&ot!==null){if(typeof ot!="object"||Object.keys(ft).length!==Object.keys(ot).length)return!1;for(const ut in ft)if(!Tt(ft[ut],ot[ut]))return!1;return!0}return ft===ot}var kt=Mt;function Mt(ft){return!function(ot){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var yt,vt,Et=new Blob([""],{type:"text/javascript"}),Rt=URL.createObjectURL(Et);try{vt=new Worker(Rt),yt=!0}catch{yt=!1}return vt&&vt.terminate(),URL.revokeObjectURL(Rt),yt}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var yt=document.createElement("canvas");yt.width=yt.height=1;var vt=yt.getContext("2d");if(!vt)return!1;var Et=vt.getImageData(0,0,1,1);return Et&&Et.width===yt.width}()?(Dt[ut=ot&&ot.failIfMajorPerformanceCaveat]===void 0&&(Dt[ut]=function(yt){var vt,Et=function(Rt){var At=document.createElement("canvas"),It=Object.create(Mt.webGLContextAttributes);return It.failIfMajorPerformanceCaveat=Rt,At.getContext("webgl",It)||At.getContext("experimental-webgl",It)}(yt);if(!Et)return!1;try{vt=Et.createShader(Et.VERTEX_SHADER)}catch{return!1}return!(!vt||Et.isContextLost())&&(Et.shaderSource(vt,"void main() {}"),Et.compileShader(vt),Et.getShaderParameter(vt,Et.COMPILE_STATUS)===!0)}(ut)),Dt[ut]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var ut}(ft)}var Dt={};function Ot(ft,ot,ut){const yt=st.window.document.createElement(ft);return ot!==void 0&&(yt.className=ot),ut&&ut.appendChild(yt),yt}function Ut(ft,ot,ut){const yt=st.window.document.createElementNS("http://www.w3.org/2000/svg",ft);for(const vt of Object.keys(ot))yt.setAttributeNS(null,vt,ot[vt]);return ut&&ut.appendChild(yt),yt}Mt.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const qt=st.window.document&&st.window.document.documentElement.style,tr=qt&&qt.userSelect!==void 0?"userSelect":"WebkitUserSelect";let ar;function Yt(){qt&&tr&&(ar=qt[tr],qt[tr]="none")}function Kt(){qt&&tr&&(qt[tr]=ar)}function Jt(ft){ft.preventDefault(),ft.stopPropagation(),st.window.removeEventListener("click",Jt,!0)}function pr(){st.window.addEventListener("click",Jt,!0),st.window.setTimeout(()=>{st.window.removeEventListener("click",Jt,!0)},0)}function Sr(ft,ot){const ut=ft.getBoundingClientRect();return Lr(ft,ut,ot)}function Er(ft,ot){const ut=ft.getBoundingClientRect(),yt=[];for(let vt=0;vt<ot.length;vt++)yt.push(Lr(ft,ut,ot[vt]));return yt}function Rr(ft){return st.window.InstallTrigger!==void 0&&ft.button===2&&ft.ctrlKey&&st.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:ft.button}function Lr(ft,ot,ut){const yt=ft.offsetWidth===ot.width?1:ft.offsetWidth/ot.width;return new st.Point((ut.clientX-ot.left)*yt,(ut.clientY-ot.top)*yt)}function Mr(ft,ot){var ut=ot[0],yt=ot[1],vt=ot[2],Et=ot[3],Rt=ut*Et-vt*yt;return Rt?(ft[0]=Et*(Rt=1/Rt),ft[1]=-yt*Rt,ft[2]=-vt*Rt,ft[3]=ut*Rt,ft):null}function Zr(ft){const{userImage:ot}=ft;return!!(ot&&ot.render&&ot.render())&&(ft.data.replace(new Uint8Array(ot.data.buffer)),!0)}class dn extends st.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new st.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(ot){if(this.loaded!==ot&&(this.loaded=ot,ot)){for(const{ids:ut,callback:yt}of this.requestors)this._notify(ut,yt);this.requestors=[]}}hasImage(ot){return!!this.getImage(ot)}getImage(ot){return this.images[ot]}addImage(ot,ut){this._validate(ot,ut)&&(this.images[ot]=ut)}_validate(ot,ut){let yt=!0;return this._validateStretch(ut.stretchX,ut.data&&ut.data.width)||(this.fire(new st.ErrorEvent(new Error(`Image "${ot}" has invalid "stretchX" value`))),yt=!1),this._validateStretch(ut.stretchY,ut.data&&ut.data.height)||(this.fire(new st.ErrorEvent(new Error(`Image "${ot}" has invalid "stretchY" value`))),yt=!1),this._validateContent(ut.content,ut)||(this.fire(new st.ErrorEvent(new Error(`Image "${ot}" has invalid "content" value`))),yt=!1),yt}_validateStretch(ot,ut){if(!ot)return!0;let yt=0;for(const vt of ot){if(vt[0]<yt||vt[1]<vt[0]||ut<vt[1])return!1;yt=vt[1]}return!0}_validateContent(ot,ut){return!(ot&&(ot.length!==4||ot[0]<0||ut.data.width<ot[0]||ot[1]<0||ut.data.height<ot[1]||ot[2]<0||ut.data.width<ot[2]||ot[3]<0||ut.data.height<ot[3]||ot[2]<ot[0]||ot[3]<ot[1]))}updateImage(ot,ut){ut.version=this.images[ot].version+1,this.images[ot]=ut,this.updatedImages[ot]=!0}removeImage(ot){const ut=this.images[ot];delete this.images[ot],delete this.patterns[ot],ut.userImage&&ut.userImage.onRemove&&ut.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(ot,ut){let yt=!0;if(!this.isLoaded())for(const vt of ot)this.images[vt]||(yt=!1);this.isLoaded()||yt?this._notify(ot,ut):this.requestors.push({ids:ot,callback:ut})}_notify(ot,ut){const yt={};for(const vt of ot){this.images[vt]||this.fire(new st.Event("styleimagemissing",{id:vt}));const Et=this.images[vt];Et?yt[vt]={data:Et.data.clone(),pixelRatio:Et.pixelRatio,sdf:Et.sdf,version:Et.version,stretchX:Et.stretchX,stretchY:Et.stretchY,content:Et.content,hasRenderCallback:!!(Et.userImage&&Et.userImage.render)}:st.warnOnce(`Image "${vt}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}ut(null,yt)}getPixelSize(){const{width:ot,height:ut}=this.atlasImage;return{width:ot,height:ut}}getPattern(ot){const ut=this.patterns[ot],yt=this.getImage(ot);if(!yt)return null;if(ut&&ut.position.version===yt.version)return ut.position;if(ut)ut.position.version=yt.version;else{const vt={w:yt.data.width+2,h:yt.data.height+2,x:0,y:0},Et=new st.ImagePosition(vt,yt);this.patterns[ot]={bin:vt,position:Et}}return this._updatePatternAtlas(),this.patterns[ot].position}bind(ot){const ut=ot.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new st.Texture(ot,this.atlasImage,ut.RGBA),this.atlasTexture&&this.atlasTexture.bind(ut.LINEAR,ut.CLAMP_TO_EDGE)}_updatePatternAtlas(){const ot=[];for(const Et in this.patterns)ot.push(this.patterns[Et].bin);const{w:ut,h:yt}=st.potpack(ot),vt=this.atlasImage;vt.resize({width:ut||1,height:yt||1});for(const Et in this.patterns){const{bin:Rt}=this.patterns[Et],At=Rt.x+1,It=Rt.y+1,Nt=this.images[Et].data,$t=Nt.width,Vt=Nt.height;st.RGBAImage.copy(Nt,vt,{x:0,y:0},{x:At,y:It},{width:$t,height:Vt}),st.RGBAImage.copy(Nt,vt,{x:0,y:Vt-1},{x:At,y:It-1},{width:$t,height:1}),st.RGBAImage.copy(Nt,vt,{x:0,y:0},{x:At,y:It+Vt},{width:$t,height:1}),st.RGBAImage.copy(Nt,vt,{x:$t-1,y:0},{x:At-1,y:It},{width:1,height:Vt}),st.RGBAImage.copy(Nt,vt,{x:0,y:0},{x:At+$t,y:It},{width:1,height:Vt})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(ot){for(const ut of ot){if(this.callbackDispatchedThisFrame[ut])continue;this.callbackDispatchedThisFrame[ut]=!0;const yt=this.images[ut];Zr(yt)&&this.updateImage(ut,yt)}}}const Jr=new st.Properties({anchor:new st.DataConstantProperty(st.spec.light.anchor),position:new class{constructor(){this.specification=st.spec.light.position}possiblyEvaluate(ft,ot){return function([ut,yt,vt]){const Et=st.degToRad(yt+90),Rt=st.degToRad(vt);return{x:ut*Math.cos(Et)*Math.sin(Rt),y:ut*Math.sin(Et)*Math.sin(Rt),z:ut*Math.cos(Rt),azimuthal:yt,polar:vt}}(ft.expression.evaluate(ot))}interpolate(ft,ot,ut){return{x:st.number(ft.x,ot.x,ut),y:st.number(ft.y,ot.y,ut),z:st.number(ft.z,ot.z,ut),azimuthal:st.number(ft.azimuthal,ot.azimuthal,ut),polar:st.number(ft.polar,ot.polar,ut)}}},color:new st.DataConstantProperty(st.spec.light.color),intensity:new st.DataConstantProperty(st.spec.light.intensity)});class wr extends st.Evented{constructor(ot){super(),this._transitionable=new st.Transitionable(Jr),this.setLight(ot),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(ot,ut={}){if(!this._validate(st.validateLight,ot,ut))for(const yt in ot){const vt=ot[yt];st.endsWith(yt,"-transition")?this._transitionable.setTransition(yt.slice(0,-11),vt):this._transitionable.setValue(yt,vt)}}updateTransitions(ot){this._transitioning=this._transitionable.transitioned(ot,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(ot){this.properties=this._transitioning.possiblyEvaluate(ot)}_validate(ot,ut,yt){return(!yt||yt.validate!==!1)&&st.emitValidationErrors(this,ot.call(st.validateStyle,st.extend({value:ut,style:{glyphs:!0,sprite:!0},styleSpec:st.spec})))}}const Xr=new st.Properties({source:new st.DataConstantProperty(st.spec.terrain.source),exaggeration:new st.DataConstantProperty(st.spec.terrain.exaggeration)});let Dr=class extends st.Evented{constructor(ft,ot){super(),this._transitionable=new st.Transitionable(Xr),this.set(ft),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=ot}get(){return this._transitionable.serialize()}set(ft){for(const ot in ft){const ut=ft[ot];st.endsWith(ot,"-transition")?this._transitionable.setTransition(ot.slice(0,-11),ut):this._transitionable.setValue(ot,ut)}}updateTransitions(ft){this._transitioning=this._transitionable.transitioned(ft,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(ft){this.properties=this._transitioning.possiblyEvaluate(ft)}};function xn(ft,ot,ut,yt){const vt=st.smoothstep(45,65,ut),[Et,Rt]=gn(ft,yt),At=st.length(ot);let It=1-Math.min(1,Math.exp((At-Et)/(Rt-Et)*-6));return It*=It*It,It=Math.min(1,1.00747*It),It*vt*ft.alpha}function gn(ft,ot){const ut=.5/Math.tan(.5*ot);return[ft.range[0]+ut,ft.range[1]+ut]}const Pr=new st.Properties({range:new st.DataConstantProperty(st.spec.fog.range),color:new st.DataConstantProperty(st.spec.fog.color),"high-color":new st.DataConstantProperty(st.spec.fog["high-color"]),"space-color":new st.DataConstantProperty(st.spec.fog["space-color"]),"horizon-blend":new st.DataConstantProperty(st.spec.fog["horizon-blend"]),"star-intensity":new st.DataConstantProperty(st.spec.fog["star-intensity"])});class Gr extends st.Evented{constructor(ot,ut){super(),this._transitionable=new st.Transitionable(Pr),this.set(ot),this._transitioning=this._transitionable.untransitioned(),this._transform=ut}get state(){const ot=this._transform,ut=ot.projection.name==="globe",yt=st.globeToMercatorTransition(ot.zoom),vt=this.properties.get("range"),Et=[.5,3];return{range:ut?[st.number(Et[0],vt[0],yt),st.number(Et[1],vt[1],yt)]:vt,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(ot,ut={}){if(!this._validate(st.validateFog,ot,ut)){for(const yt of Object.keys(st.spec.fog))ot&&ot[yt]===void 0&&(ot[yt]=st.spec.fog[yt].default);for(const yt in ot){const vt=ot[yt];st.endsWith(yt,"-transition")?this._transitionable.setTransition(yt.slice(0,-11),vt):this._transitionable.setValue(yt,vt)}}}getOpacity(ot){if(!this._transform.projection.supportsFog)return 0;const ut=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:st.smoothstep(45,65,ot))*ut.a}getOpacityAtLatLng(ot,ut){return this._transform.projection.supportsFog?function(yt,vt,Et){const Rt=st.MercatorCoordinate.fromLngLat(vt),At=Et.elevation?Et.elevation.getAtPointOrZero(Rt):0,It=[Rt.x,Rt.y,At];return st.transformMat4(It,It,Et.mercatorFogMatrix),xn(yt,It,Et.pitch,Et._fov)}(this.state,ot,ut):0}getFovAdjustedRange(ot){return this._transform.projection.supportsFog?gn(this.state,ot):[0,1]}updateTransitions(ot){this._transitioning=this._transitionable.transitioned(ot,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(ot){this.properties=this._transitioning.possiblyEvaluate(ot)}_validate(ot,ut,yt){return(!yt||yt.validate!==!1)&&st.emitValidationErrors(this,ot.call(st.validateStyle,st.extend({value:ut,style:{glyphs:!0,sprite:!0},styleSpec:st.spec})))}}class Or{constructor(ot,ut){this.workerPool=ot,this.actors=[],this.currentActor=0,this.id=st.uniqueId();const yt=this.workerPool.acquire(this.id);for(let vt=0;vt<yt.length;vt++){const Et=new Or.Actor(yt[vt],ut,this.id);Et.name=`Worker ${vt}`,this.actors.push(Et)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(ot,ut,yt){st.asyncAll(this.actors,(vt,Et)=>{vt.send(ot,ut,Et)},yt=yt||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(ot=>{ot.remove()}),this.actors=[],this.workerPool.release(this.id)}}function sn(ft,ot,ut){return ot*(st.EXTENT/(ft.tileSize*Math.pow(2,ut-ft.tileID.overscaledZ)))}Or.Actor=st.Actor;class ln{constructor(ot,ut,yt,vt){this.screenBounds=ot,this.cameraPoint=ut,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=yt,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,vt)}static createFromScreenPoints(ot,ut){let yt,vt;if(ot instanceof st.Point||typeof ot[0]=="number"){const Et=st.Point.convert(ot);yt=[Et],vt=ut.isPointAboveHorizon(Et)}else{const Et=st.Point.convert(ot[0]),Rt=st.Point.convert(ot[1]);yt=[Et,Rt],vt=st.polygonizeBounds(Et,Rt).every(At=>ut.isPointAboveHorizon(At))}return new ln(yt,ut.getCameraPoint(),vt,ut)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(ot){return st.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],ot)}bufferedCameraGeometry(ot){const ut=this.screenBounds[0],yt=this.screenBounds.length===1?this.screenBounds[0].add(new st.Point(1,1)):this.screenBounds[1],vt=st.polygonizeBounds(ut,yt,0,!1);return this.cameraPoint.y>yt.y&&(this.cameraPoint.x>ut.x&&this.cameraPoint.x<yt.x?vt.splice(3,0,this.cameraPoint):this.cameraPoint.x>=yt.x?vt[2]=this.cameraPoint:this.cameraPoint.x<=ut.x&&(vt[3]=this.cameraPoint)),st.bufferConvexPolygon(vt,ot)}bufferedCameraGeometryGlobe(ot){const ut=this.screenBounds[0],yt=this.screenBounds.length===1?this.screenBounds[0].add(new st.Point(1,1)):this.screenBounds[1],vt=st.polygonizeBounds(ut,yt,ot),Et=this.cameraPoint.clone();switch(3*((Et.y>ut.y)+(Et.y>yt.y))+((Et.x>ut.x)+(Et.x>yt.x))){case 0:vt[0]=Et,vt[4]=Et.clone();break;case 1:vt.splice(1,0,Et);break;case 2:vt[1]=Et;break;case 3:vt.splice(4,0,Et);break;case 5:vt.splice(2,0,Et);break;case 6:vt[3]=Et;break;case 7:vt.splice(3,0,Et);break;case 8:vt[2]=Et}return vt}containsTile(ot,ut,yt,vt=0){const Et=ot.queryPadding/ut._pixelsPerMercatorPixel+1,Rt=yt?this._bufferedCameraMercator(Et,ut):this._bufferedScreenMercator(Et,ut);let At=ot.tileID.wrap+(Rt.unwrapped?vt:0);const It=Rt.polygon.map(lr=>st.getTilePoint(ot.tileTransform,lr,At));if(!st.polygonIntersectsBox(It,0,0,st.EXTENT,st.EXTENT))return;At=ot.tileID.wrap+(this.screenGeometryMercator.unwrapped?vt:0);const Nt=this.screenGeometryMercator.polygon.map(lr=>st.getTileVec3(ot.tileTransform,lr,At)),$t=Nt.map(lr=>new st.Point(lr[0],lr[1])),Vt=ut.getFreeCameraOptions().position||new st.MercatorCoordinate(0,0,0),er=st.getTileVec3(ot.tileTransform,Vt,At),ir=Nt.map(lr=>{const Gt=st.sub(lr,lr,er);return st.normalize(Gt,Gt),new st.Ray(er,Gt)}),sr=sn(ot,1,ut.zoom)*ut._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:$t,tilespaceRays:ir,bufferedTilespaceGeometry:It,bufferedTilespaceBounds:(or=st.getBounds(It),or.min.x=st.clamp(or.min.x,0,st.EXTENT),or.min.y=st.clamp(or.min.y,0,st.EXTENT),or.max.x=st.clamp(or.max.x,0,st.EXTENT),or.max.y=st.clamp(or.max.y,0,st.EXTENT),or),tile:ot,tileID:ot.tileID,pixelToTileUnitsFactor:sr};var or}_bufferedScreenMercator(ot,ut){const yt=Fn(ot);if(this._screenRaycastCache[yt])return this._screenRaycastCache[yt];{let vt;return vt=ut.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(ot),ut):{polygon:this.bufferedScreenGeometry(ot).map(Et=>ut.pointCoordinate3D(Et)),unwrapped:!0},this._screenRaycastCache[yt]=vt,vt}}_bufferedCameraMercator(ot,ut){const yt=Fn(ot);if(this._cameraRaycastCache[yt])return this._cameraRaycastCache[yt];{let vt;return vt=ut.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(ot),ut):{polygon:this.bufferedCameraGeometry(ot).map(Et=>ut.pointCoordinate3D(Et)),unwrapped:!0},this._cameraRaycastCache[yt]=vt,vt}}_projectAndResample(ot,ut){const yt=function(Et,Rt){const At=st.multiply([],Rt.pixelMatrix,Rt.globeMatrix),It=[0,-st.GLOBE_RADIUS,0,1],Nt=[0,st.GLOBE_RADIUS,0,1],$t=[0,0,0,1];st.transformMat4$1(It,It,At),st.transformMat4$1(Nt,Nt,At),st.transformMat4$1($t,$t,At);const Vt=new st.Point(It[0]/It[3],It[1]/It[3]),er=new st.Point(Nt[0]/Nt[3],Nt[1]/Nt[3]),ir=st.polygonContainsPoint(Et,Vt)&&It[3]<$t[3],sr=st.polygonContainsPoint(Et,er)&&Nt[3]<$t[3];if(!ir&&!sr)return null;const or=function(Tr,jr,Ir){for(let Ur=1;Ur<Tr.length;Ur++){const wn=Bn(jr.pointCoordinate3D(Tr[Ur-1]).x),Nr=Bn(jr.pointCoordinate3D(Tr[Ur]).x);if(Ir<0){if(wn<Nr)return{idx:Ur,t:-wn/(Nr-1-wn)}}else if(Nr<wn)return{idx:Ur,t:(1-wn)/(Nr+1-wn)}}return null}(Et,Rt,ir?-1:1);if(!or)return null;const{idx:lr,t:Gt}=or;let nr=lr>1?kn(Et.slice(0,lr),Rt):[],hr=lr<Et.length?kn(Et.slice(lr),Rt):[];nr=nr.map(Tr=>new st.Point(Bn(Tr.x),Tr.y)),hr=hr.map(Tr=>new st.Point(Bn(Tr.x),Tr.y));const dr=[...nr];dr.length===0&&dr.push(hr[hr.length-1]);const br=st.number(dr[dr.length-1].y,(hr.length===0?nr[0]:hr[0]).y,Gt);let Cr;return Cr=ir?[new st.Point(0,br),new st.Point(0,0),new st.Point(1,0),new st.Point(1,br)]:[new st.Point(1,br),new st.Point(1,1),new st.Point(0,1),new st.Point(0,br)],dr.push(...Cr),hr.length===0?dr.push(nr[0]):dr.push(...hr),{polygon:dr.map(Tr=>new st.MercatorCoordinate(Tr.x,Tr.y)),unwrapped:!1}}(ot,ut);if(yt)return yt;const vt=function(Et,Rt){let At=!1,It=-1/0,Nt=0;for(let Vt=0;Vt<Et.length-1;Vt++)Et[Vt].x>It&&(It=Et[Vt].x,Nt=Vt);for(let Vt=0;Vt<Et.length-1;Vt++){const er=(Nt+Vt)%(Et.length-1),ir=Et[er],sr=Et[er+1];Math.abs(ir.x-sr.x)>.5&&(ir.x<sr.x?(ir.x+=1,er===0&&(Et[Et.length-1].x+=1)):(sr.x+=1,er+1===Et.length-1&&(Et[0].x+=1)),At=!0)}const $t=st.mercatorXfromLng(Rt.center.lng);return At&&$t<Math.abs($t-1)&&Et.forEach(Vt=>{Vt.x-=1}),{polygon:Et,unwrapped:At}}(kn(ot,ut).map(Et=>new st.Point(Bn(Et.x),Et.y)),ut);return{polygon:vt.polygon.map(Et=>new st.MercatorCoordinate(Et.x,Et.y)),unwrapped:vt.unwrapped}}}function kn(ft,ot){return st.resample(ft,ut=>{const yt=ot.pointCoordinate3D(ut);ut.x=yt.x,ut.y=yt.y},1/256)}function Bn(ft){return ft<0?1+ft%1:ft%1}function Fn(ft){return 100*ft|0}function Nn(ft,ot,ut,yt,vt){const Et=function(Rt,At){if(Rt)return vt(Rt);if(At){ft.url&&At.tiles&&ft.tiles&&delete ft.tiles;const It=st.pick(st.extend(At,ft),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);At.vector_layers&&(It.vectorLayers=At.vector_layers,It.vectorLayerIds=It.vectorLayers.map(Nt=>Nt.id)),It.tiles=ot.canonicalizeTileset(It,ft.url),vt(null,It)}};return ft.url?st.getJSON(ot.transformRequest(ot.normalizeSourceURL(ft.url,null,ut,yt),st.ResourceType.Source),Et):st.exported.frame(()=>Et(null,ft))}class Kn{constructor(ot,ut,yt){this.bounds=st.LngLatBounds.convert(this.validateBounds(ot)),this.minzoom=ut||0,this.maxzoom=yt||24}validateBounds(ot){return Array.isArray(ot)&&ot.length===4?[Math.max(-180,ot[0]),Math.max(-90,ot[1]),Math.min(180,ot[2]),Math.min(90,ot[3])]:[-180,-90,180,90]}contains(ot){const ut=Math.pow(2,ot.z),yt=Math.floor(st.mercatorXfromLng(this.bounds.getWest())*ut),vt=Math.floor(st.mercatorYfromLat(this.bounds.getNorth())*ut),Et=Math.ceil(st.mercatorXfromLng(this.bounds.getEast())*ut),Rt=Math.ceil(st.mercatorYfromLat(this.bounds.getSouth())*ut);return ot.x>=yt&&ot.x<Et&&ot.y>=vt&&ot.y<Rt}}class uo{constructor(ot,ut,yt){this.context=ot;const vt=ot.gl;this.buffer=vt.createBuffer(),this.dynamicDraw=!!yt,this.context.unbindVAO(),ot.bindElementBuffer.set(this.buffer),vt.bufferData(vt.ELEMENT_ARRAY_BUFFER,ut.arrayBuffer,this.dynamicDraw?vt.DYNAMIC_DRAW:vt.STATIC_DRAW),this.dynamicDraw||ut.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(ot){const ut=this.context.gl;this.context.unbindVAO(),this.bind(),ut.bufferSubData(ut.ELEMENT_ARRAY_BUFFER,0,ot.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const vo={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ao{constructor(ot,ut,yt,vt){this.length=ut.length,this.attributes=yt,this.itemSize=ut.bytesPerElement,this.dynamicDraw=vt,this.context=ot;const Et=ot.gl;this.buffer=Et.createBuffer(),ot.bindVertexBuffer.set(this.buffer),Et.bufferData(Et.ARRAY_BUFFER,ut.arrayBuffer,this.dynamicDraw?Et.DYNAMIC_DRAW:Et.STATIC_DRAW),this.dynamicDraw||ut.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(ot){const ut=this.context.gl;this.bind(),ut.bufferSubData(ut.ARRAY_BUFFER,0,ot.arrayBuffer)}enableAttributes(ot,ut){for(let yt=0;yt<this.attributes.length;yt++){const vt=ut.attributes[this.attributes[yt].name];vt!==void 0&&ot.enableVertexAttribArray(vt)}}setVertexAttribPointers(ot,ut,yt){for(let vt=0;vt<this.attributes.length;vt++){const Et=this.attributes[vt],Rt=ut.attributes[Et.name];Rt!==void 0&&ot.vertexAttribPointer(Rt,Et.components,ot[vo[Et.type]],!1,this.itemSize,Et.offset+this.itemSize*(yt||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Un{constructor(ot){this.gl=ot.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(ot){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class so extends Un{getDefault(){return st.Color.transparent}set(ot){const ut=this.current;(ot.r!==ut.r||ot.g!==ut.g||ot.b!==ut.b||ot.a!==ut.a||this.dirty)&&(this.gl.clearColor(ot.r,ot.g,ot.b,ot.a),this.current=ot,this.dirty=!1)}}class Qn extends Un{getDefault(){return 1}set(ot){(ot!==this.current||this.dirty)&&(this.gl.clearDepth(ot),this.current=ot,this.dirty=!1)}}class Vo extends Un{getDefault(){return 0}set(ot){(ot!==this.current||this.dirty)&&(this.gl.clearStencil(ot),this.current=ot,this.dirty=!1)}}class Hn extends Un{getDefault(){return[!0,!0,!0,!0]}set(ot){const ut=this.current;(ot[0]!==ut[0]||ot[1]!==ut[1]||ot[2]!==ut[2]||ot[3]!==ut[3]||this.dirty)&&(this.gl.colorMask(ot[0],ot[1],ot[2],ot[3]),this.current=ot,this.dirty=!1)}}class Jo extends Un{getDefault(){return!0}set(ot){(ot!==this.current||this.dirty)&&(this.gl.depthMask(ot),this.current=ot,this.dirty=!1)}}class js extends Un{getDefault(){return 255}set(ot){(ot!==this.current||this.dirty)&&(this.gl.stencilMask(ot),this.current=ot,this.dirty=!1)}}class Ds extends Un{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(ot){const ut=this.current;(ot.func!==ut.func||ot.ref!==ut.ref||ot.mask!==ut.mask||this.dirty)&&(this.gl.stencilFunc(ot.func,ot.ref,ot.mask),this.current=ot,this.dirty=!1)}}class vs extends Un{getDefault(){const ot=this.gl;return[ot.KEEP,ot.KEEP,ot.KEEP]}set(ot){const ut=this.current;(ot[0]!==ut[0]||ot[1]!==ut[1]||ot[2]!==ut[2]||this.dirty)&&(this.gl.stencilOp(ot[0],ot[1],ot[2]),this.current=ot,this.dirty=!1)}}class ks extends Un{getDefault(){return!1}set(ot){if(ot===this.current&&!this.dirty)return;const ut=this.gl;ot?ut.enable(ut.STENCIL_TEST):ut.disable(ut.STENCIL_TEST),this.current=ot,this.dirty=!1}}class Ls extends Un{getDefault(){return[0,1]}set(ot){const ut=this.current;(ot[0]!==ut[0]||ot[1]!==ut[1]||this.dirty)&&(this.gl.depthRange(ot[0],ot[1]),this.current=ot,this.dirty=!1)}}class Vs extends Un{getDefault(){return!1}set(ot){if(ot===this.current&&!this.dirty)return;const ut=this.gl;ot?ut.enable(ut.DEPTH_TEST):ut.disable(ut.DEPTH_TEST),this.current=ot,this.dirty=!1}}class ws extends Un{getDefault(){return this.gl.LESS}set(ot){(ot!==this.current||this.dirty)&&(this.gl.depthFunc(ot),this.current=ot,this.dirty=!1)}}class Ro extends Un{getDefault(){return!1}set(ot){if(ot===this.current&&!this.dirty)return;const ut=this.gl;ot?ut.enable(ut.BLEND):ut.disable(ut.BLEND),this.current=ot,this.dirty=!1}}class Xo extends Un{getDefault(){const ot=this.gl;return[ot.ONE,ot.ZERO]}set(ot){const ut=this.current;(ot[0]!==ut[0]||ot[1]!==ut[1]||this.dirty)&&(this.gl.blendFunc(ot[0],ot[1]),this.current=ot,this.dirty=!1)}}class os extends Un{getDefault(){return st.Color.transparent}set(ot){const ut=this.current;(ot.r!==ut.r||ot.g!==ut.g||ot.b!==ut.b||ot.a!==ut.a||this.dirty)&&(this.gl.blendColor(ot.r,ot.g,ot.b,ot.a),this.current=ot,this.dirty=!1)}}class ko extends Un{getDefault(){return this.gl.FUNC_ADD}set(ot){(ot!==this.current||this.dirty)&&(this.gl.blendEquation(ot),this.current=ot,this.dirty=!1)}}class ys extends Un{getDefault(){return!1}set(ot){if(ot===this.current&&!this.dirty)return;const ut=this.gl;ot?ut.enable(ut.CULL_FACE):ut.disable(ut.CULL_FACE),this.current=ot,this.dirty=!1}}class Al extends Un{getDefault(){return this.gl.BACK}set(ot){(ot!==this.current||this.dirty)&&(this.gl.cullFace(ot),this.current=ot,this.dirty=!1)}}class Pl extends Un{getDefault(){return this.gl.CCW}set(ot){(ot!==this.current||this.dirty)&&(this.gl.frontFace(ot),this.current=ot,this.dirty=!1)}}let Kl,Jn=class extends Un{getDefault(){return null}set(ft){(ft!==this.current||this.dirty)&&(this.gl.useProgram(ft),this.current=ft,this.dirty=!1)}};class Eo extends Un{getDefault(){return this.gl.TEXTURE0}set(ot){(ot!==this.current||this.dirty)&&(this.gl.activeTexture(ot),this.current=ot,this.dirty=!1)}}class bs extends Un{getDefault(){const ot=this.gl;return[0,0,ot.drawingBufferWidth,ot.drawingBufferHeight]}set(ot){const ut=this.current;(ot[0]!==ut[0]||ot[1]!==ut[1]||ot[2]!==ut[2]||ot[3]!==ut[3]||this.dirty)&&(this.gl.viewport(ot[0],ot[1],ot[2],ot[3]),this.current=ot,this.dirty=!1)}}class Qs extends Un{getDefault(){return null}set(ot){if(ot===this.current&&!this.dirty)return;const ut=this.gl;ut.bindFramebuffer(ut.FRAMEBUFFER,ot),this.current=ot,this.dirty=!1}}class Yl extends Un{getDefault(){return null}set(ot){if(ot===this.current&&!this.dirty)return;const ut=this.gl;ut.bindRenderbuffer(ut.RENDERBUFFER,ot),this.current=ot,this.dirty=!1}}class Wu extends Un{getDefault(){return null}set(ot){if(ot===this.current&&!this.dirty)return;const ut=this.gl;ut.bindTexture(ut.TEXTURE_2D,ot),this.current=ot,this.dirty=!1}}class lm extends Un{getDefault(){return null}set(ot){if(ot===this.current&&!this.dirty)return;const ut=this.gl;ut.bindBuffer(ut.ARRAY_BUFFER,ot),this.current=ot,this.dirty=!1}}class gr extends Un{getDefault(){return null}set(ot){const ut=this.gl;ut.bindBuffer(ut.ELEMENT_ARRAY_BUFFER,ot),this.current=ot,this.dirty=!1}}class Xt extends Un{constructor(ot){super(ot),this.vao=ot.extVertexArrayObject}getDefault(){return null}set(ot){this.vao&&(ot!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(ot),this.current=ot,this.dirty=!1)}}class Qt extends Un{getDefault(){return 4}set(ot){if(ot===this.current&&!this.dirty)return;const ut=this.gl;ut.pixelStorei(ut.UNPACK_ALIGNMENT,ot),this.current=ot,this.dirty=!1}}class fr extends Un{getDefault(){return!1}set(ot){if(ot===this.current&&!this.dirty)return;const ut=this.gl;ut.pixelStorei(ut.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ot),this.current=ot,this.dirty=!1}}class vr extends Un{getDefault(){return!1}set(ot){if(ot===this.current&&!this.dirty)return;const ut=this.gl;ut.pixelStorei(ut.UNPACK_FLIP_Y_WEBGL,ot),this.current=ot,this.dirty=!1}}class kr extends Un{constructor(ot,ut){super(ot),this.context=ot,this.parent=ut}getDefault(){return null}}class zr extends kr{setDirty(){this.dirty=!0}set(ot){if(ot===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const ut=this.gl;ut.framebufferTexture2D(ut.FRAMEBUFFER,ut.COLOR_ATTACHMENT0,ut.TEXTURE_2D,ot,0),this.current=ot,this.dirty=!1}}class $r extends kr{attachment(){return this.gl.DEPTH_ATTACHMENT}set(ot){if(ot===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const ut=this.gl;ut.framebufferRenderbuffer(ut.FRAMEBUFFER,this.attachment(),ut.RENDERBUFFER,ot),this.current=ot,this.dirty=!1}}class Ar extends $r{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class qr{constructor(ot,ut,yt,vt){this.context=ot,this.width=ut,this.height=yt;const Et=this.framebuffer=ot.gl.createFramebuffer();this.colorAttachment=new zr(ot,Et),vt&&(this.depthAttachment=new $r(ot,Et))}destroy(){const ot=this.context.gl,ut=this.colorAttachment.get();if(ut&&ot.deleteTexture(ut),this.depthAttachment){const yt=this.depthAttachment.get();yt&&ot.deleteRenderbuffer(yt)}ot.deleteFramebuffer(this.framebuffer)}}class An{constructor(ot,ut=!1){if(this.gl=ot,this.isWebGL2=ut,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),ut){const yt=ot;this.extVertexArrayObject={createVertexArrayOES:yt.createVertexArray.bind(ot),deleteVertexArrayOES:yt.deleteVertexArray.bind(ot),bindVertexArrayOES:yt.bindVertexArray.bind(ot)}}this.clearColor=new so(this),this.clearDepth=new Qn(this),this.clearStencil=new Vo(this),this.colorMask=new Hn(this),this.depthMask=new Jo(this),this.stencilMask=new js(this),this.stencilFunc=new Ds(this),this.stencilOp=new vs(this),this.stencilTest=new ks(this),this.depthRange=new Ls(this),this.depthTest=new Vs(this),this.depthFunc=new ws(this),this.blend=new Ro(this),this.blendFunc=new Xo(this),this.blendColor=new os(this),this.blendEquation=new ko(this),this.cullFace=new ys(this),this.cullFaceSide=new Al(this),this.frontFace=new Pl(this),this.program=new Jn(this),this.activeTexture=new Eo(this),this.viewport=new bs(this),this.bindFramebuffer=new Qs(this),this.bindRenderbuffer=new Yl(this),this.bindTexture=new Wu(this),this.bindVertexBuffer=new lm(this),this.bindElementBuffer=new gr(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Xt(this),this.pixelStoreUnpack=new Qt(this),this.pixelStoreUnpackPremultiplyAlpha=new fr(this),this.pixelStoreUnpackFlipY=new vr(this),this.extTextureFilterAnisotropic=ot.getExtension("EXT_texture_filter_anisotropic")||ot.getExtension("MOZ_EXT_texture_filter_anisotropic")||ot.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=ot.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=ot.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=ot.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=ot.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),ut||(this.extTextureHalfFloat=ot.getExtension("OES_texture_half_float")),(ut||this.extTextureHalfFloat&&ot.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=ot.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=ut||ot.getExtension("OES_standard_derivatives"),this.extTimerQuery=ot.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=ot.getParameter(ot.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(ot,ut){return new uo(this,ot,ut)}createVertexBuffer(ot,ut,yt){return new Ao(this,ot,ut,yt)}createRenderbuffer(ot,ut,yt){const vt=this.gl,Et=vt.createRenderbuffer();return this.bindRenderbuffer.set(Et),vt.renderbufferStorage(vt.RENDERBUFFER,ot,ut,yt),this.bindRenderbuffer.set(null),Et}createFramebuffer(ot,ut,yt){return new qr(this,ot,ut,yt)}clear({color:ot,depth:ut,stencil:yt}){const vt=this.gl;let Et=0;ot&&(Et|=vt.COLOR_BUFFER_BIT,this.clearColor.set(ot),this.colorMask.set([!0,!0,!0,!0])),ut!==void 0&&(Et|=vt.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(ut),this.depthMask.set(!0)),yt!==void 0&&(Et|=vt.STENCIL_BUFFER_BIT,this.clearStencil.set(yt),this.stencilMask.set(255)),vt.clear(Et)}setCullFace(ot){ot.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(ot.mode),this.frontFace.set(ot.frontFace))}setDepthMode(ot){ot.func!==this.gl.ALWAYS||ot.mask?(this.depthTest.set(!0),this.depthFunc.set(ot.func),this.depthMask.set(ot.mask),this.depthRange.set(ot.range)):this.depthTest.set(!1)}setStencilMode(ot){ot.test.func!==this.gl.ALWAYS||ot.mask?(this.stencilTest.set(!0),this.stencilMask.set(ot.mask),this.stencilOp.set([ot.fail,ot.depthFail,ot.pass]),this.stencilFunc.set({func:ot.test.func,ref:ot.ref,mask:ot.test.mask})):this.stencilTest.set(!1)}setColorMode(ot){Tt(ot.blendFunction,st.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(ot.blendFunction),this.blendColor.set(ot.blendColor)),this.colorMask.set(ot.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Pn extends st.Evented{constructor(ot,ut,yt,vt){if(super(),this.id=ot,this.dispatcher=yt,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,st.extend(this,st.pick(ut,["url","scheme","tileSize","promoteId"])),this._options=st.extend({type:"vector"},ut),this._collectResourceTiming=ut.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(vt),this._tileWorkers={},this._deduped=new st.DedupedRequest}load(ot){this._loaded=!1,this.fire(new st.Event("dataloading",{dataType:"source"}));const ut=Array.isArray(this.map._language)?this.map._language.join():this.map._language,yt=this.map._worldview;this._tileJSONRequest=Nn(this._options,this.map._requestManager,ut,yt,(vt,Et)=>{this._tileJSONRequest=null,this._loaded=!0,vt?(ut&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${ut}`),yt&&yt.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${yt}`),this.fire(new st.ErrorEvent(vt))):Et&&(st.extend(this,Et),Et.bounds&&(this.tileBounds=new Kn(Et.bounds,this.minzoom,this.maxzoom)),st.postTurnstileEvent(Et.tiles,this.map._requestManager._customAccessToken),this.fire(new st.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new st.Event("data",{dataType:"source",sourceDataType:"content"}))),ot&&ot(vt)})}loaded(){return this._loaded}hasTile(ot){return!this.tileBounds||this.tileBounds.contains(ot.canonical)}onAdd(ot){this.map=ot,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(ot){return this._options.tiles=ot,this.reload(),this}setUrl(ot){return this.url=ot,this._options.url=ot,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return st.extend({},this._options)}loadTile(ot,ut){const yt=this.map._requestManager.normalizeTileURL(ot.tileID.canonical.url(this.tiles,this.scheme)),vt={request:this.map._requestManager.transformRequest(yt,st.ResourceType.Tile),data:void 0,uid:ot.uid,tileID:ot.tileID,tileZoom:ot.tileZoom,zoom:ot.tileID.overscaledZ,tileSize:this.tileSize*ot.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:st.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:ot.isSymbolTile};if(vt.request.collectResourceTiming=this._collectResourceTiming,ot.actor&&ot.state!=="expired")ot.state==="loading"?ot.reloadCallback=ut:ot.request=ot.actor.send("reloadTile",vt,Et.bind(this));else if(ot.actor=this._tileWorkers[yt]=this._tileWorkers[yt]||this.dispatcher.getActor(),this.dispatcher.ready)ot.request=ot.actor.send("loadTile",vt,Et.bind(this),void 0,!0);else{const Rt=st.loadVectorTile.call({deduped:this._deduped},vt,(At,It)=>{At||!It?Et.call(this,At):(vt.data={cacheControl:It.cacheControl,expires:It.expires,rawData:It.rawData.slice(0)},ot.actor&&ot.actor.send("loadTile",vt,Et.bind(this),void 0,!0))},!0);ot.request={cancel:Rt}}function Et(Rt,At){return delete ot.request,ot.aborted?ut(null):Rt&&Rt.status!==404?ut(Rt):(At&&At.resourceTiming&&(ot.resourceTiming=At.resourceTiming),this.map._refreshExpiredTiles&&At&&ot.setExpiryData(At),ot.loadVectorData(At,this.map.painter),st.cacheEntryPossiblyAdded(this.dispatcher),ut(null),void(ot.reloadCallback&&(this.loadTile(ot,ot.reloadCallback),ot.reloadCallback=null)))}}abortTile(ot){ot.request&&(ot.request.cancel(),delete ot.request),ot.actor&&ot.actor.send("abortTile",{uid:ot.uid,type:this.type,source:this.id})}unloadTile(ot){ot.unloadVectorData(),ot.actor&&ot.actor.send("removeTile",{uid:ot.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Tn extends st.Evented{constructor(ot,ut,yt,vt){super(),this.id=ot,this.dispatcher=yt,this.setEventedParent(vt),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=st.extend({type:"raster"},ut),st.extend(this,st.pick(ut,["url","scheme","tileSize"]))}load(ot){this._loaded=!1,this.fire(new st.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Nn(this._options,this.map._requestManager,null,null,(ut,yt)=>{this._tileJSONRequest=null,this._loaded=!0,ut?this.fire(new st.ErrorEvent(ut)):yt&&(st.extend(this,yt),yt.bounds&&(this.tileBounds=new Kn(yt.bounds,this.minzoom,this.maxzoom)),st.postTurnstileEvent(yt.tiles),this.fire(new st.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new st.Event("data",{dataType:"source",sourceDataType:"content"}))),ot&&ot(ut)})}loaded(){return this._loaded}onAdd(ot){this.map=ot,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(ot){return this._options.tiles=ot,this.reload(),this}setUrl(ot){return this.url=ot,this._options.url=ot,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return st.extend({},this._options)}hasTile(ot){return!this.tileBounds||this.tileBounds.contains(ot.canonical)}loadTile(ot,ut){const yt=st.exported.devicePixelRatio>=2,vt=this.map._requestManager.normalizeTileURL(ot.tileID.canonical.url(this.tiles,this.scheme),yt,this.tileSize);ot.request=st.getImage(this.map._requestManager.transformRequest(vt,st.ResourceType.Tile),(Et,Rt,At,It)=>(delete ot.request,ot.aborted?(ot.state="unloaded",ut(null)):Et?(ot.state="errored",ut(Et)):Rt?(this.map._refreshExpiredTiles&&ot.setExpiryData({cacheControl:At,expires:It}),ot.setTexture(Rt,this.map.painter),ot.state="loaded",st.cacheEntryPossiblyAdded(this.dispatcher),void ut(null)):ut(null)))}static loadTileData(ot,ut,yt){ot.setTexture(ut,yt)}static unloadTileData(ot,ut){ot.texture&&ut.saveTileTexture(ot.texture)}abortTile(ot,ut){ot.request&&(ot.request.cancel(),delete ot.request),ut()}unloadTile(ot,ut){ot.texture&&this.map.painter.saveTileTexture(ot.texture),ut()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function ro(ft,ot,ut,yt,vt,Et,Rt,At){const It=[ft,ut,vt,ot,yt,Et,1,1,1],Nt=[Rt,At,1],$t=st.adjoint([],It),[Vt,er,ir]=st.transformMat3(Nt,Nt,st.transpose($t,$t));return st.multiply$1(It,[Vt,0,0,0,er,0,0,0,ir],It)}class ao extends st.Evented{constructor(ot,ut,yt,vt){super(),this.id=ot,this.dispatcher=yt,this.coordinates=ut.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(vt),this.options=ut,this._dirty=!1}load(ot,ut){this._loaded=ut||!1,this.fire(new st.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=st.getImage(this.map._requestManager.transformRequest(this.url,st.ResourceType.Image),(yt,vt)=>{if(this._imageRequest=null,this._loaded=!0,yt)this.fire(new st.ErrorEvent(yt));else if(vt){const{HTMLImageElement:Et}=st.window;this.image=vt instanceof Et?st.exported.getImageData(vt):vt,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,ot&&(this.coordinates=ot),this._finishLoading()}})}loaded(){return this._loaded}updateImage(ot){return this.image&&ot.url?(this._imageRequest&&ot.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=ot.url,this.load(ot.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new st.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(ot){this.map=ot,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(ot){this.coordinates=ot,this._boundsArray=void 0;const ut=ot.map(st.MercatorCoordinate.fromLngLat);return this.tileID=function(yt){let vt=1/0,Et=1/0,Rt=-1/0,At=-1/0;for(const Vt of yt)vt=Math.min(vt,Vt.x),Et=Math.min(Et,Vt.y),Rt=Math.max(Rt,Vt.x),At=Math.max(At,Vt.y);const It=Math.max(Rt-vt,At-Et),Nt=Math.max(0,Math.floor(-Math.log(It)/Math.LN2)),$t=Math.pow(2,Nt);return new st.CanonicalTileID(Nt,Math.floor((vt+Rt)/2*$t),Math.floor((Et+At)/2*$t))}(ut),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new st.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(ot){for(const It in this.tiles){const Nt=this.tiles[It];Nt.state!=="loaded"&&(Nt.state="loaded",Nt.texture=this.texture)}if(this._boundsArray)return;const ut=st.tileTransform(this.tileID,this.map.transform.projection),[yt,vt,Et,Rt]=this.coordinates.map(It=>{const Nt=ut.projection.project(It[0],It[1]);return st.getTilePoint(ut,Nt)._round()});this.perspectiveTransform=function(It,Nt,$t,Vt,er,ir,sr,or,lr,Gt){const nr=ro(0,0,It,0,0,Nt,It,Nt),hr=ro($t,Vt,er,ir,sr,or,lr,Gt);return st.multiply$1(hr,st.adjoint(nr,nr),hr),[hr[6]/hr[8]*It/st.EXTENT,hr[7]/hr[8]*Nt/st.EXTENT]}(this.width,this.height,yt.x,yt.y,vt.x,vt.y,Rt.x,Rt.y,Et.x,Et.y);const At=this._boundsArray=new st.StructArrayLayout4i8;At.emplaceBack(yt.x,yt.y,0,0),At.emplaceBack(vt.x,vt.y,st.EXTENT,0),At.emplaceBack(Rt.x,Rt.y,0,st.EXTENT),At.emplaceBack(Et.x,Et.y,st.EXTENT,st.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=ot.createVertexBuffer(At,st.boundsAttributes.members),this.boundsSegments=st.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const ot=this.map.painter.context,ut=ot.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new st.Texture(ot,this.image,ut.RGBA),this.texture.bind(ut.LINEAR,ut.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(ot)}loadTile(ot,ut){this.tileID&&this.tileID.equals(ot.tileID.canonical)?(this.tiles[String(ot.tileID.wrap)]=ot,ot.buckets={},ut(null)):(ot.state="errored",ut(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const no={vector:Pn,raster:Tn,"raster-dem":class extends Tn{constructor(ft,ot,ut,yt){super(ft,ot,ut,yt),this.type="raster-dem",this.maxzoom=22,this._options=st.extend({type:"raster-dem"},ot),this.encoding=ot.encoding||"mapbox"}loadTile(ft,ot){const ut=this.map._requestManager.normalizeTileURL(ft.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function yt(vt,Et){vt&&(ft.state="errored",ot(vt)),Et&&(ft.dem=Et,ft.dem.onDeserialize(),ft.needsHillshadePrepare=!0,ft.needsDEMTextureUpload=!0,ft.state="loaded",ot(null))}ft.request=st.getImage(this.map._requestManager.transformRequest(ut,st.ResourceType.Tile),(function(vt,Et,Rt,At){if(delete ft.request,ft.aborted)ft.state="unloaded",ot(null);else if(vt)ft.state="errored",ot(vt);else if(Et){this.map._refreshExpiredTiles&&ft.setExpiryData({cacheControl:Rt,expires:At});const It=st.window.ImageBitmap&&Et instanceof st.window.ImageBitmap&&(Kl==null&&(Kl=st.window.OffscreenCanvas&&new st.window.OffscreenCanvas(1,1).getContext("2d")&&typeof st.window.createImageBitmap=="function"),Kl),Nt=1-(Et.width-st.prevPowerOfTwo(Et.width))/2;Nt<1||ft.neighboringTiles||(ft.neighboringTiles=this._getNeighboringTiles(ft.tileID));const $t=It?Et:st.exported.getImageData(Et,Nt),Vt={uid:ft.uid,coord:ft.tileID,source:this.id,rawImageData:$t,encoding:this.encoding,padding:Nt};ft.actor&&ft.state!=="expired"||(ft.actor=this.dispatcher.getActor(),ft.actor.send("loadDEMTile",Vt,yt.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(ft){const ot=ft.canonical,ut=Math.pow(2,ot.z),yt=(ot.x-1+ut)%ut,vt=ot.x===0?ft.wrap-1:ft.wrap,Et=(ot.x+1+ut)%ut,Rt=ot.x+1===ut?ft.wrap+1:ft.wrap,At={};return At[new st.OverscaledTileID(ft.overscaledZ,vt,ot.z,yt,ot.y).key]={backfilled:!1},At[new st.OverscaledTileID(ft.overscaledZ,Rt,ot.z,Et,ot.y).key]={backfilled:!1},ot.y>0&&(At[new st.OverscaledTileID(ft.overscaledZ,vt,ot.z,yt,ot.y-1).key]={backfilled:!1},At[new st.OverscaledTileID(ft.overscaledZ,ft.wrap,ot.z,ot.x,ot.y-1).key]={backfilled:!1},At[new st.OverscaledTileID(ft.overscaledZ,Rt,ot.z,Et,ot.y-1).key]={backfilled:!1}),ot.y+1<ut&&(At[new st.OverscaledTileID(ft.overscaledZ,vt,ot.z,yt,ot.y+1).key]={backfilled:!1},At[new st.OverscaledTileID(ft.overscaledZ,ft.wrap,ot.z,ot.x,ot.y+1).key]={backfilled:!1},At[new st.OverscaledTileID(ft.overscaledZ,Rt,ot.z,Et,ot.y+1).key]={backfilled:!1}),At}unloadTile(ft){ft.demTexture&&this.map.painter.saveTileTexture(ft.demTexture),ft.fbo&&(ft.fbo.destroy(),delete ft.fbo),ft.dem&&delete ft.dem,delete ft.neighboringTiles,ft.state="unloaded"}},geojson:class extends st.Evented{constructor(ft,ot,ut,yt){super(),this.id=ft,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=ut.getActor(),this.setEventedParent(yt),this._data=ot.data,this._options=st.extend({},ot),this._collectResourceTiming=ot.collectResourceTiming,ot.maxzoom!==void 0&&(this.maxzoom=ot.maxzoom),ot.type&&(this.type=ot.type),ot.attribution&&(this.attribution=ot.attribution),this.promoteId=ot.promoteId;const vt=st.EXTENT/this.tileSize;this.workerOptions=st.extend({source:this.id,cluster:ot.cluster||!1,geojsonVtOptions:{buffer:(ot.buffer!==void 0?ot.buffer:128)*vt,tolerance:(ot.tolerance!==void 0?ot.tolerance:.375)*vt,extent:st.EXTENT,maxZoom:this.maxzoom,lineMetrics:ot.lineMetrics||!1,generateId:ot.generateId||!1},superclusterOptions:{maxZoom:ot.clusterMaxZoom!==void 0?ot.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,ot.clusterMinPoints||2),extent:st.EXTENT,radius:(ot.clusterRadius!==void 0?ot.clusterRadius:50)*vt,log:!1,generateId:ot.generateId||!1},clusterProperties:ot.clusterProperties,filter:ot.filter},ot.workerOptions)}onAdd(ft){this.map=ft,this.setData(this._data)}setData(ft){return this._data=ft,this._updateWorkerData(),this}getClusterExpansionZoom(ft,ot){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:ft,source:this.id},ot),this}getClusterChildren(ft,ot){return this.actor.send("geojson.getClusterChildren",{clusterId:ft,source:this.id},ot),this}getClusterLeaves(ft,ot,ut,yt){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:ft,limit:ot,offset:ut},yt),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new st.Event("dataloading",{dataType:"source"})),this._loaded=!1;const ft=st.extend({},this.workerOptions),ot=this._data;typeof ot=="string"?(ft.request=this.map._requestManager.transformRequest(st.exported.resolveURL(ot),st.ResourceType.Source),ft.request.collectResourceTiming=this._collectResourceTiming):ft.data=JSON.stringify(ot),this._pendingLoad=this.actor.send(`${this.type}.loadData`,ft,(ut,yt)=>{if(this._loaded=!0,this._pendingLoad=null,ut)this.fire(new st.ErrorEvent(ut));else{const vt={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&yt&&yt.resourceTiming&&yt.resourceTiming[this.id]&&(vt.resourceTiming=yt.resourceTiming[this.id]),this.fire(new st.Event("data",vt)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(ft,ot){const ut=ft.actor?"reloadTile":"loadTile";ft.actor=this.actor,ft.request=this.actor.send(ut,{type:this.type,uid:ft.uid,tileID:ft.tileID,tileZoom:ft.tileZoom,zoom:ft.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:st.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(yt,vt)=>(delete ft.request,ft.unloadVectorData(),ft.aborted?ot(null):yt?ot(yt):(ft.loadVectorData(vt,this.map.painter,ut==="reloadTile"),ot(null))),void 0,ut==="loadTile")}abortTile(ft){ft.request&&(ft.request.cancel(),delete ft.request),ft.aborted=!0}unloadTile(ft){ft.unloadVectorData(),this.actor.send("removeTile",{uid:ft.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return st.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends ao{constructor(ft,ot,ut,yt){super(ft,ot,ut,yt),this.roundZoom=!0,this.type="video",this.options=ot}load(){this._loaded=!1;const ft=this.options;this.urls=[];for(const ot of ft.urls)this.urls.push(this.map._requestManager.transformRequest(ot,st.ResourceType.Source).url);st.getVideo(this.urls,(ot,ut)=>{this._loaded=!0,ot?this.fire(new st.ErrorEvent(ot)):ut&&(this.video=ut,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(ft){if(this.video){const ot=this.video.seekable;ft<ot.start(0)||ft>ot.end(0)?this.fire(new st.ErrorEvent(new st.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${ot.start(0)} and ${ot.end(0)}-second mark.`))):this.video.currentTime=ft}}getVideo(){return this.video}onAdd(ft){this.map||(this.map=ft,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const ft=this.map.painter.context,ot=ft.gl;this.texture?this.video.paused||(this.texture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE),ot.texSubImage2D(ot.TEXTURE_2D,0,0,0,ot.RGBA,ot.UNSIGNED_BYTE,this.video)):(this.texture=new st.Texture(ft,this.video,ot.RGBA),this.texture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(ft)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:ao,canvas:class extends ao{constructor(ft,ot,ut,yt){super(ft,ot,ut,yt),ot.coordinates?Array.isArray(ot.coordinates)&&ot.coordinates.length===4&&!ot.coordinates.some(vt=>!Array.isArray(vt)||vt.length!==2||vt.some(Et=>typeof Et!="number"))||this.fire(new st.ErrorEvent(new st.ValidationError(`sources.${ft}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new st.ErrorEvent(new st.ValidationError(`sources.${ft}`,null,'missing required property "coordinates"'))),ot.animate&&typeof ot.animate!="boolean"&&this.fire(new st.ErrorEvent(new st.ValidationError(`sources.${ft}`,null,'optional "animate" property must be a boolean value'))),ot.canvas?typeof ot.canvas=="string"||ot.canvas instanceof st.window.HTMLCanvasElement||this.fire(new st.ErrorEvent(new st.ValidationError(`sources.${ft}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new st.ErrorEvent(new st.ValidationError(`sources.${ft}`,null,'missing required property "canvas"'))),this.options=ot,this.animate=ot.animate===void 0||ot.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof st.window.HTMLCanvasElement?this.options.canvas:st.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new st.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(ft){this.map=ft,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let ft=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,ft=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,ft=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const ot=this.map.painter.context;this.texture?(ft||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new st.Texture(ot,this.canvas,ot.gl.RGBA,{premultiply:!0}),this._prepareData(ot)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const ft of[this.canvas.width,this.canvas.height])if(isNaN(ft)||ft<=0)return!0;return!1}},custom:class extends st.Evented{constructor(ft,ot,ut,yt){super(),this.id=ft,this.type="custom",this._dataType="raster",this._dispatcher=ut,this._implementation=ot,this.setEventedParent(yt),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new st.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new st.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Kn(this._implementation.bounds,this.minzoom,this.maxzoom)),ot.update=this._update.bind(this),ot.clearTiles=this._clearTiles.bind(this),ot.coveringTiles=this._coveringTiles.bind(this),st.extend(this,st.pick(ot,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return st.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new st.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new st.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(ft){this._map=ft,this._loaded=!1,this.fire(new st.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(ft),this.load()}onRemove(ft){this._implementation.onRemove&&this._implementation.onRemove(ft)}hasTile(ft){if(this._implementation.hasTile){const{x:ot,y:ut,z:yt}=ft.canonical;return this._implementation.hasTile({x:ot,y:ut,z:yt})}return!this.tileBounds||this.tileBounds.contains(ft.canonical)}loadTile(ft,ot){const{x:ut,y:yt,z:vt}=ft.tileID.canonical,Et=new st.window.AbortController;ft.request=Promise.resolve(this._implementation.loadTile({x:ut,y:yt,z:vt},{signal:Et.signal})).then((function(Rt){return delete ft.request,ft.aborted?(ft.state="unloaded",ot(null)):Rt===void 0?(ft.state="errored",ot(null)):Rt===null?(this.loadTileData(ft,{width:this.tileSize,height:this.tileSize,data:null}),ft.state="loaded",ot(null)):function(At){return At instanceof st.window.ImageData||At instanceof st.window.HTMLCanvasElement||At instanceof st.window.ImageBitmap||At instanceof st.window.HTMLImageElement}(Rt)?(this.loadTileData(ft,Rt),ft.state="loaded",void ot(null)):(ft.state="errored",ot(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(Rt=>{Rt.code!==20&&(ft.state="errored",ot(Rt))}),ft.request.cancel=()=>Et.abort()}loadTileData(ft,ot){Tn.loadTileData(ft,ot,this._map.painter)}unloadTileData(ft){Tn.unloadTileData(ft,this._map.painter)}unloadTile(ft,ot){if(this.unloadTileData(ft),this._implementation.unloadTile){const{x:ut,y:yt,z:vt}=ft.tileID.canonical;this._implementation.unloadTile({x:ut,y:yt,z:vt})}ot()}abortTile(ft,ot){ft.request&&ft.request.cancel&&(ft.request.cancel(),delete ft.request),ot()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(ft=>({x:ft.canonical.x,y:ft.canonical.y,z:ft.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new st.Event("data",{dataType:"source",sourceDataType:"content"}))}}},lo=function(ft,ot,ut,yt){const vt=new no[ot.type](ft,ot,ut,yt);if(vt.id!==ft)throw new Error(`Expected Source id to be ${ft} instead of ${vt.id}`);return st.bindAll(["load","abort","unload","serialize","prepare"],vt),vt};function go(ft,ot){const ut=st.identity([]);return st.scale(ut,ut,[.5*ft.width,.5*-ft.height,1]),st.translate(ut,ut,[1,-1,0]),st.multiply(ut,ut,ft.calculateProjMatrix(ot.toUnwrapped())),Float32Array.from(ut)}function qo(ft,ot,ut,yt,vt,Et,Rt,At=!1){const It=ft.tilesIn(yt,Rt,At);It.sort($s);const Nt=[];for(const Vt of It)Nt.push({wrappedTileID:Vt.tile.tileID.wrapped().key,queryResults:Vt.tile.queryRenderedFeatures(ot,ut,ft._state,Vt,vt,Et,go(ft.transform,Vt.tile.tileID),At)});const $t=function(Vt){const er={},ir={};for(const sr of Vt){const or=sr.queryResults,lr=sr.wrappedTileID,Gt=ir[lr]=ir[lr]||{};for(const nr in or){const hr=or[nr],dr=Gt[nr]=Gt[nr]||{},br=er[nr]=er[nr]||[];for(const Cr of hr)dr[Cr.featureIndex]||(dr[Cr.featureIndex]=!0,br.push(Cr))}}return er}(Nt);for(const Vt in $t)$t[Vt].forEach(er=>{const ir=er.feature,sr=ir.layer;sr&&sr.type!=="background"&&sr.type!=="sky"&&(ir.source=sr.source,sr["source-layer"]&&(ir.sourceLayer=sr["source-layer"]),ir.state=ir.id!==void 0?ft.getFeatureState(sr["source-layer"],ir.id):{})});return $t}function as(ft,ot){const ut=ft.getRenderableIds().map(Et=>ft.getTileByID(Et)),yt=[],vt={};for(let Et=0;Et<ut.length;Et++){const Rt=ut[Et],At=Rt.tileID.canonical.key;vt[At]||(vt[At]=!0,Rt.querySourceFeatures(yt,ot))}return yt}function $s(ft,ot){const ut=ft.tileID,yt=ot.tileID;return ut.overscaledZ-yt.overscaledZ||ut.canonical.y-yt.canonical.y||ut.wrap-yt.wrap||ut.canonical.x-yt.canonical.x}function _s(){return cp.workerClass!=null?new cp.workerClass:new st.window.Worker(cp.workerUrl)}const zl="mapboxgl_preloaded_worker_pool";class Es{constructor(){this.active={}}acquire(ot){if(!this.workers)for(this.workers=[];this.workers.length<Es.workerCount;)this.workers.push(new _s);return this.active[ot]=!0,this.workers.slice()}release(ot){delete this.active[ot],this.numActive()===0&&(this.workers.forEach(ut=>{ut.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[zl]}numActive(){return Object.keys(this.active).length}}let Fs;function qu(){return Fs||(Fs=new Es),Fs}function av(ft,ot){const ut={};for(const yt in ft)yt!=="ref"&&(ut[yt]=ft[yt]);return st.refProperties.forEach(yt=>{yt in ot&&(ut[yt]=ot[yt])}),ut}function $_(ft){ft=ft.slice();const ot=Object.create(null);for(let ut=0;ut<ft.length;ut++)ot[ft[ut].id]=ft[ut];for(let ut=0;ut<ft.length;ut++)"ref"in ft[ut]&&(ft[ut]=av(ft[ut],ot[ft[ut].ref]));return ft}Es.workerCount=2;const So={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function oy(ft,ot,ut){ut.push({command:So.addSource,args:[ft,ot[ft]]})}function wp(ft,ot,ut){ot.push({command:So.removeSource,args:[ft]}),ut[ft]=!0}function sy(ft,ot,ut,yt){wp(ft,ut,yt),oy(ft,ot,ut)}function cm(ft,ot,ut){let yt;for(yt in ft[ut])if(ft[ut].hasOwnProperty(yt)&&yt!=="data"&&!Tt(ft[ut][yt],ot[ut][yt]))return!1;for(yt in ot[ut])if(ot[ut].hasOwnProperty(yt)&&yt!=="data"&&!Tt(ft[ut][yt],ot[ut][yt]))return!1;return!0}function Nl(ft,ot,ut,yt,vt,Et){let Rt;for(Rt in ot=ot||{},ft=ft||{})ft.hasOwnProperty(Rt)&&(Tt(ft[Rt],ot[Rt])||ut.push({command:Et,args:[yt,Rt,ot[Rt],vt]}));for(Rt in ot)ot.hasOwnProperty(Rt)&&!ft.hasOwnProperty(Rt)&&(Tt(ft[Rt],ot[Rt])||ut.push({command:Et,args:[yt,Rt,ot[Rt],vt]}))}function Ql(ft){return ft.id}function ay(ft,ot){return ft[ot.id]=ot,ft}class ly{constructor(ot,ut){this.reset(ot,ut)}reset(ot,ut){this.points=ot||[],this._distances=[0];for(let yt=1;yt<this.points.length;yt++)this._distances[yt]=this._distances[yt-1]+this.points[yt].dist(this.points[yt-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(ut||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(ot){if(this.points.length===1)return this.points[0];ot=st.clamp(ot,0,1);let ut=1,yt=this._distances[ut];const vt=ot*this.paddedLength+this.padding;for(;yt<vt&&ut<this._distances.length;)yt=this._distances[++ut];const Et=ut-1,Rt=this._distances[Et],At=yt-Rt,It=At>0?(vt-Rt)/At:0;return this.points[Et].mult(1-It).add(this.points[ut].mult(It))}}class Au{constructor(ot,ut,yt){const vt=this.boxCells=[],Et=this.circleCells=[];this.xCellCount=Math.ceil(ot/yt),this.yCellCount=Math.ceil(ut/yt);for(let Rt=0;Rt<this.xCellCount*this.yCellCount;Rt++)vt.push([]),Et.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=ot,this.height=ut,this.xScale=this.xCellCount/ot,this.yScale=this.yCellCount/ut,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(ot,ut,yt,vt,Et){this._forEachCell(ut,yt,vt,Et,this._insertBoxCell,this.boxUid++),this.boxKeys.push(ot),this.bboxes.push(ut),this.bboxes.push(yt),this.bboxes.push(vt),this.bboxes.push(Et)}insertCircle(ot,ut,yt,vt){this._forEachCell(ut-vt,yt-vt,ut+vt,yt+vt,this._insertCircleCell,this.circleUid++),this.circleKeys.push(ot),this.circles.push(ut),this.circles.push(yt),this.circles.push(vt)}_insertBoxCell(ot,ut,yt,vt,Et,Rt){this.boxCells[Et].push(Rt)}_insertCircleCell(ot,ut,yt,vt,Et,Rt){this.circleCells[Et].push(Rt)}_query(ot,ut,yt,vt,Et,Rt){if(yt<0||ot>this.width||vt<0||ut>this.height)return!Et&&[];const At=[];if(ot<=0&&ut<=0&&this.width<=yt&&this.height<=vt){if(Et)return!0;for(let It=0;It<this.boxKeys.length;It++)At.push({key:this.boxKeys[It],x1:this.bboxes[4*It],y1:this.bboxes[4*It+1],x2:this.bboxes[4*It+2],y2:this.bboxes[4*It+3]});for(let It=0;It<this.circleKeys.length;It++){const Nt=this.circles[3*It],$t=this.circles[3*It+1],Vt=this.circles[3*It+2];At.push({key:this.circleKeys[It],x1:Nt-Vt,y1:$t-Vt,x2:Nt+Vt,y2:$t+Vt})}return Rt?At.filter(Rt):At}return this._forEachCell(ot,ut,yt,vt,this._queryCell,At,{hitTest:Et,seenUids:{box:{},circle:{}}},Rt),Et?At.length>0:At}_queryCircle(ot,ut,yt,vt,Et){const Rt=ot-yt,At=ot+yt,It=ut-yt,Nt=ut+yt;if(At<0||Rt>this.width||Nt<0||It>this.height)return!vt&&[];const $t=[];return this._forEachCell(Rt,It,At,Nt,this._queryCellCircle,$t,{hitTest:vt,circle:{x:ot,y:ut,radius:yt},seenUids:{box:{},circle:{}}},Et),vt?$t.length>0:$t}query(ot,ut,yt,vt,Et){return this._query(ot,ut,yt,vt,!1,Et)}hitTest(ot,ut,yt,vt,Et){return this._query(ot,ut,yt,vt,!0,Et)}hitTestCircle(ot,ut,yt,vt){return this._queryCircle(ot,ut,yt,!0,vt)}_queryCell(ot,ut,yt,vt,Et,Rt,At,It){const Nt=At.seenUids,$t=this.boxCells[Et];if($t!==null){const er=this.bboxes;for(const ir of $t)if(!Nt.box[ir]){Nt.box[ir]=!0;const sr=4*ir;if(ot<=er[sr+2]&&ut<=er[sr+3]&&yt>=er[sr+0]&&vt>=er[sr+1]&&(!It||It(this.boxKeys[ir]))){if(At.hitTest)return Rt.push(!0),!0;Rt.push({key:this.boxKeys[ir],x1:er[sr],y1:er[sr+1],x2:er[sr+2],y2:er[sr+3]})}}}const Vt=this.circleCells[Et];if(Vt!==null){const er=this.circles;for(const ir of Vt)if(!Nt.circle[ir]){Nt.circle[ir]=!0;const sr=3*ir;if(this._circleAndRectCollide(er[sr],er[sr+1],er[sr+2],ot,ut,yt,vt)&&(!It||It(this.circleKeys[ir]))){if(At.hitTest)return Rt.push(!0),!0;{const or=er[sr],lr=er[sr+1],Gt=er[sr+2];Rt.push({key:this.circleKeys[ir],x1:or-Gt,y1:lr-Gt,x2:or+Gt,y2:lr+Gt})}}}}}_queryCellCircle(ot,ut,yt,vt,Et,Rt,At,It){const Nt=At.circle,$t=At.seenUids,Vt=this.boxCells[Et];if(Vt!==null){const ir=this.bboxes;for(const sr of Vt)if(!$t.box[sr]){$t.box[sr]=!0;const or=4*sr;if(this._circleAndRectCollide(Nt.x,Nt.y,Nt.radius,ir[or+0],ir[or+1],ir[or+2],ir[or+3])&&(!It||It(this.boxKeys[sr])))return Rt.push(!0),!0}}const er=this.circleCells[Et];if(er!==null){const ir=this.circles;for(const sr of er)if(!$t.circle[sr]){$t.circle[sr]=!0;const or=3*sr;if(this._circlesCollide(ir[or],ir[or+1],ir[or+2],Nt.x,Nt.y,Nt.radius)&&(!It||It(this.circleKeys[sr])))return Rt.push(!0),!0}}}_forEachCell(ot,ut,yt,vt,Et,Rt,At,It){const Nt=this._convertToXCellCoord(ot),$t=this._convertToYCellCoord(ut),Vt=this._convertToXCellCoord(yt),er=this._convertToYCellCoord(vt);for(let ir=Nt;ir<=Vt;ir++)for(let sr=$t;sr<=er;sr++)if(Et.call(this,ot,ut,yt,vt,this.xCellCount*sr+ir,Rt,At,It))return}_convertToXCellCoord(ot){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(ot*this.xScale)))}_convertToYCellCoord(ot){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(ot*this.yScale)))}_circlesCollide(ot,ut,yt,vt,Et,Rt){const At=vt-ot,It=Et-ut,Nt=yt+Rt;return Nt*Nt>At*At+It*It}_circleAndRectCollide(ot,ut,yt,vt,Et,Rt,At){const It=(Rt-vt)/2,Nt=Math.abs(ot-(vt+It));if(Nt>It+yt)return!1;const $t=(At-Et)/2,Vt=Math.abs(ut-(Et+$t));if(Vt>$t+yt)return!1;if(Nt<=It||Vt<=$t)return!0;const er=Nt-It,ir=Vt-$t;return er*er+ir*ir<=yt*yt}}const Jl={unknown:0,flipRequired:1,flipNotRequired:2},bp=Math.tan(85*Math.PI/180);function Yr(ft,ot,ut,yt,vt,Et,Rt){const At=st.create();if(ut)if(Et.name==="globe"){const It=st.calculateGlobeLabelMatrix(vt,ot);st.multiply(At,At,It)}else{const It=Mr([],Rt);At[0]=It[0],At[1]=It[1],At[4]=It[2],At[5]=It[3],yt||st.rotateZ(At,At,vt.angle)}else st.multiply(At,vt.labelPlaneMatrix,ft);return At}function _c(ft,ot,ut,yt,vt,Et,Rt){const At=Yr(ft,ot,ut,yt,vt,Et,Rt);return Et.name==="globe"&&ut||(At[2]=At[6]=At[10]=At[14]=0),At}function ls(ft,ot,ut,yt,vt,Et,Rt){if(ut){if(Et.name==="globe"){const At=Yr(ft,ot,ut,yt,vt,Et,Rt);return st.invert(At,At),st.multiply(At,ft,At),At}{const At=st.clone(ft),It=st.identity([]);return It[0]=Rt[0],It[1]=Rt[1],It[4]=Rt[2],It[5]=Rt[3],st.multiply(At,At,It),yt||st.rotateZ(At,At,-vt.angle),At}}return vt.glCoordMatrix}function Ss(ft,ot,ut,yt){const vt=[ft,ot,ut,1];ut?st.transformMat4$1(vt,vt,yt):po(vt,vt,yt);const Et=vt[3];return vt[0]/=Et,vt[1]/=Et,vt[2]/=Et,vt}function O_(ft,ot){return Math.min(.5+ft/ot*.5,1.5)}function Bl(ft,ot){const ut=ft[0]/ft[3],yt=ft[1]/ft[3];return ut>=-ot[0]&&ut<=ot[0]&&yt>=-ot[1]&&yt<=ot[1]}function cy(ft,ot,ut,yt,vt,Et,Rt,At,It,Nt){const $t=ut.transform,Vt=yt?ft.textSizeData:ft.iconSizeData,er=st.evaluateSizeForZoom(Vt,ut.transform.zoom),ir=$t.projection.name==="globe",sr=[256/ut.width*2+1,256/ut.height*2+1],or=yt?ft.text.dynamicLayoutVertexArray:ft.icon.dynamicLayoutVertexArray;or.clear();let lr=null;ir&&(lr=yt?ft.text.globeExtVertexArray:ft.icon.globeExtVertexArray);const Gt=ft.lineVertexArray,nr=yt?ft.text.placedSymbolArray:ft.icon.placedSymbolArray,hr=ut.transform.width/ut.transform.height;let dr,br=!1;for(let Cr=0;Cr<nr.length;Cr++){const Tr=nr.get(Cr),{numGlyphs:jr,writingMode:Ir}=Tr;if(Ir!==st.WritingMode.vertical||br||dr===st.WritingMode.horizontal||(br=!0),dr=Ir,(Tr.hidden||Ir===st.WritingMode.vertical)&&!br){Il(jr,or);continue}br=!1;const Ur=new st.Point(Tr.tileAnchorX,Tr.tileAnchorY);let{x:wn,y:Nr,z:hn}=$t.projection.projectTilePoint(Ur.x,Ur.y,Nt.canonical);if(It){const[Yn,On,Zn]=It(Ur);wn+=Yn,Nr+=On,hn+=Zn}const Hr=[wn,Nr,hn,1];if(st.transformMat4$1(Hr,Hr,ot),!Bl(Hr,sr)){Il(jr,or);continue}const vn=O_(ut.transform.cameraToCenterDistance,Hr[3]),Fr=st.evaluateSizeForFeature(Vt,er,Tr),cn=Rt?Fr/vn:Fr*vn,En=Ss(wn,Nr,hn,vt);if(En[3]<=0){Il(jr,or);continue}let yn={};const Sn=Rt?null:It,Gn=Dn(Tr,cn,!1,At,ot,vt,Et,ft.glyphOffsetArray,Gt,or,lr,En,Ur,yn,hr,Sn,$t.projection,Nt,Rt);br=Gn.useVertical,Sn&&Gn.needsFlipping&&(yn={}),(Gn.notEnoughRoom||br||Gn.needsFlipping&&Dn(Tr,cn,!0,At,ot,vt,Et,ft.glyphOffsetArray,Gt,or,lr,En,Ur,yn,hr,Sn,$t.projection,Nt,Rt).notEnoughRoom)&&Il(jr,or)}yt?(ft.text.dynamicLayoutVertexBuffer.updateData(or),lr&&ft.text.globeExtVertexBuffer.updateData(lr)):(ft.icon.dynamicLayoutVertexBuffer.updateData(or),lr&&ft.icon.globeExtVertexBuffer.updateData(lr))}function z_(ft,ot,ut,yt,vt,Et,Rt,At,It,Nt,$t,Vt,er,ir,sr,or){const{lineStartIndex:lr,glyphStartIndex:Gt,segment:nr}=At,hr=Gt+At.numGlyphs,dr=lr+At.lineLength,br=ot.getoffsetX(Gt),Cr=ot.getoffsetX(hr-1),Tr=Js(ft*br,ut,yt,vt,Et,Rt,nr,lr,dr,It,Nt,$t,Vt,er,!0,ir,sr,or);if(!Tr)return null;const jr=Js(ft*Cr,ut,yt,vt,Et,Rt,nr,lr,dr,It,Nt,$t,Vt,er,!0,ir,sr,or);return jr?{first:Tr,last:jr}:null}function Zu(ft,ot,ut,yt){return ft===st.WritingMode.horizontal&&Math.abs(yt)>Math.abs(ut)?{useVertical:!0}:ft===st.WritingMode.vertical?yt>0?{needsFlipping:!0}:null:ot!==Jl.unknown&&function(vt,Et){return vt===0||Math.abs(Et/vt)>bp}(ut,yt)?ot===Jl.flipRequired?{needsFlipping:!0}:null:ut<0?{needsFlipping:!0}:null}function Dn(ft,ot,ut,yt,vt,Et,Rt,At,It,Nt,$t,Vt,er,ir,sr,or,lr,Gt,nr){const hr=ot/24,dr=ft.lineOffsetX*hr,br=ft.lineOffsetY*hr,{lineStartIndex:Cr,glyphStartIndex:Tr,numGlyphs:jr,segment:Ir,writingMode:Ur,flipState:wn}=ft,Nr=Cr+ft.lineLength,hn=Hr=>{if($t){const[En,yn,Sn]=Hr.up,Gn=Nt.length;st.updateGlobeVertexNormal($t,Gn+0,En,yn,Sn),st.updateGlobeVertexNormal($t,Gn+1,En,yn,Sn),st.updateGlobeVertexNormal($t,Gn+2,En,yn,Sn),st.updateGlobeVertexNormal($t,Gn+3,En,yn,Sn)}const[vn,Fr,cn]=Hr.point;st.addDynamicAttributes(Nt,vn,Fr,cn,Hr.angle)};if(jr>1){const Hr=z_(hr,At,dr,br,ut,Vt,er,ft,It,Et,ir,or,!1,lr,Gt,nr);if(!Hr)return{notEnoughRoom:!0};if(yt&&!ut){let[vn,Fr,cn]=Hr.first.point,[En,yn,Sn]=Hr.last.point;[vn,Fr]=Ss(vn,Fr,cn,Rt),[En,yn]=Ss(En,yn,Sn,Rt);const Gn=Zu(Ur,wn,(En-vn)*sr,yn-Fr);if(ft.flipState=Gn&&Gn.needsFlipping?Jl.flipRequired:Jl.flipNotRequired,Gn)return Gn}hn(Hr.first);for(let vn=Tr+1;vn<Tr+jr-1;vn++){const Fr=Js(hr*At.getoffsetX(vn),dr,br,ut,Vt,er,Ir,Cr,Nr,It,Et,ir,or,!1,!1,lr,Gt,nr);if(!Fr)return Nt.length-=4*(vn-Tr),{notEnoughRoom:!0};hn(Fr)}hn(Hr.last)}else{if(yt&&!ut){const vn=Ss(er.x,er.y,0,vt),Fr=Cr+Ir+1,cn=new st.Point(It.getx(Fr),It.gety(Fr)),En=Ss(cn.x,cn.y,0,vt),yn=En[3]>0?En:ho(er,cn,vn,1,vt,void 0,lr,Gt.canonical),Sn=Zu(Ur,wn,(yn[0]-vn[0])*sr,yn[1]-vn[1]);if(ft.flipState=Sn&&Sn.needsFlipping?Jl.flipRequired:Jl.flipNotRequired,Sn)return Sn}const Hr=Js(hr*At.getoffsetX(Tr),dr,br,ut,Vt,er,Ir,Cr,Nr,It,Et,ir,or,!1,!1,lr,Gt,nr);if(!Hr)return{notEnoughRoom:!0};hn(Hr)}return{}}function mo(ft,ot,ut,yt,vt){const{x:Et,y:Rt,z:At}=yt.projectTilePoint(ft.x,ft.y,ot);if(!vt)return Ss(Et,Rt,At,ut);const[It,Nt,$t]=vt(ft);return Ss(Et+It,Rt+Nt,At+$t,ut)}function ho(ft,ot,ut,yt,vt,Et,Rt,At){const It=mo(ft.sub(ot)._unit()._add(ft),At,vt,Rt,Et);return st.sub(It,ut,It),st.normalize(It,It),st.scaleAndAdd(It,ut,It,yt)}function Js(ft,ot,ut,yt,vt,Et,Rt,At,It,Nt,$t,Vt,er,ir,sr,or,lr,Gt){const nr=yt?ft-ot:ft+ot;let hr=nr>0?1:-1,dr=0;yt&&(hr*=-1,dr=Math.PI),hr<0&&(dr+=Math.PI);let br=At+Rt+(hr>0?0:1)|0,Cr=vt,Tr=vt,jr=0,Ir=0;const Ur=Math.abs(nr),wn=[],Nr=[];let hn=Et,Hr=hn;const vn=()=>ho(Hr,hn,Tr,Ur-jr+1,$t,er,or,lr.canonical);for(;jr+Ir<=Ur;){if(br+=hr,br<At||br>=It)return null;if(Tr=Cr,Hr=hn,wn.push(Tr),ir&&Nr.push(Hr),hn=new st.Point(Nt.getx(br),Nt.gety(br)),Cr=Vt[br],!Cr){const Zn=mo(hn,lr.canonical,$t,or,er);Cr=Zn[3]>0?Vt[br]=Zn:vn()}jr+=Ir,Ir=st.distance(Tr,Cr)}sr&&er&&(Vt[br]&&(Cr=vn(),Ir=st.distance(Tr,Cr)),Vt[br]=Cr);const Fr=(Ur-jr)/Ir,cn=hn.sub(Hr)._mult(Fr)._add(Hr),En=st.sub([],Cr,Tr),yn=st.scaleAndAdd([],Tr,En,Fr);let Sn=[0,0,1],Gn=En[0],Yn=En[1];if(Gt&&(Sn=or.upVector(lr.canonical,cn.x,cn.y),Sn[0]!==0||Sn[1]!==0||Sn[2]!==1)){const Zn=[Sn[2],0,-Sn[0]],fo=st.cross([],Sn,Zn);st.normalize(Zn,Zn),st.normalize(fo,fo),Gn=st.dot(En,Zn),Yn=st.dot(En,fo)}if(ut){const Zn=st.cross([],Sn,En);st.normalize(Zn,Zn),st.scaleAndAdd(yn,yn,Zn,ut*hr)}const On=dr+Math.atan2(Yn,Gn);return wn.push(yn),ir&&Nr.push(cn),{point:yn,angle:On,path:wn,tilePath:Nr,up:Sn}}function Il(ft,ot){const ut=ot.length,yt=ut+4*ft;ot.resize(yt),ot.float32.fill(-1/0,4*ut,4*yt)}function po(ft,ot,ut){const yt=ot[0],vt=ot[1];return ft[0]=ut[0]*yt+ut[4]*vt+ut[12],ft[1]=ut[1]*yt+ut[5]*vt+ut[13],ft[3]=ut[3]*yt+ut[7]*vt+ut[15],ft}const ga=100;class Ep{constructor(ot,ut,yt=new Au(ot.width+200,ot.height+200,25),vt=new Au(ot.width+200,ot.height+200,25)){this.transform=ot,this.grid=yt,this.ignoredGrid=vt,this.pitchfactor=Math.cos(ot._pitch)*ot.cameraToCenterDistance,this.screenRightBoundary=ot.width+ga,this.screenBottomBoundary=ot.height+ga,this.gridRightBoundary=ot.width+200,this.gridBottomBoundary=ot.height+200,this.fogState=ut}placeCollisionBox(ot,ut,yt,vt,Et,Rt,At,It){let Nt=yt.projectedAnchorX,$t=yt.projectedAnchorY,Vt=yt.projectedAnchorZ;const er=yt.elevation,ir=yt.tileID,sr=ot.getProjection();if(er&&ir){const[Cr,Tr,jr]=sr.upVector(ir.canonical,yt.tileAnchorX,yt.tileAnchorY),Ir=sr.upVectorScale(ir.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;Nt+=Cr*er*Ir,$t+=Tr*er*Ir,Vt+=jr*er*Ir}const or=this.projectAndGetPerspectiveRatio(At,Nt,$t,Vt,yt.tileID,sr.name==="globe"||!!er||this.transform.pitch>0,sr),lr=Rt*or.perspectiveRatio,Gt=(yt.x1*ut+vt.x-yt.padding)*lr+or.point.x,nr=(yt.y1*ut+vt.y-yt.padding)*lr+or.point.y,hr=(yt.x2*ut+vt.x+yt.padding)*lr+or.point.x,dr=(yt.y2*ut+vt.y+yt.padding)*lr+or.point.y,br=or.perspectiveRatio<=.55||or.occluded;return!this.isInsideGrid(Gt,nr,hr,dr)||!Et&&this.grid.hitTest(Gt,nr,hr,dr,It)||br?{box:[],offscreen:!1,occluded:or.occluded}:{box:[Gt,nr,hr,dr],offscreen:this.isOffscreen(Gt,nr,hr,dr),occluded:!1}}placeCollisionCircles(ot,ut,yt,vt,Et,Rt,At,It,Nt,$t,Vt,er,ir,sr,or){const lr=[],Gt=this.transform.elevation,nr=ot.getProjection(),hr=Gt?Gt.getAtTileOffsetFunc(or,this.transform.center.lat,this.transform.worldSize,nr):null,dr=new st.Point(yt.tileAnchorX,yt.tileAnchorY);let{x:br,y:Cr,z:Tr}=nr.projectTilePoint(dr.x,dr.y,or.canonical);if(hr){const[cn,En,yn]=hr(dr);br+=cn,Cr+=En,Tr+=yn}const jr=nr.name==="globe",Ir=this.projectAndGetPerspectiveRatio(At,br,Cr,Tr,or,jr||!!Gt||this.transform.pitch>0,nr),{perspectiveRatio:Ur}=Ir,wn=(Vt?Rt/Ur:Rt*Ur)/st.ONE_EM,Nr=Ss(br,Cr,Tr,It),hn=Ir.signedDistanceFromCamera>0?z_(wn,Et,yt.lineOffsetX*wn,yt.lineOffsetY*wn,!1,Nr,dr,yt,vt,It,{},Gt&&!Vt?hr:null,Vt&&!!Gt,nr,or,Vt):null;let Hr=!1,vn=!1,Fr=!0;if(hn&&!Ir.occluded){const cn=.5*ir*Ur+sr,En=new st.Point(-100,-100),yn=new st.Point(this.screenRightBoundary,this.screenBottomBoundary),Sn=new ly,{first:Gn,last:Yn}=hn,On=Gn.path.length;let Zn=[];for(let Vn=On-1;Vn>=1;Vn--)Zn.push(Gn.path[Vn]);for(let Vn=1;Vn<Yn.path.length;Vn++)Zn.push(Yn.path[Vn]);const fo=2.5*cn;Nt&&(Zn=Zn.map(([Vn,Co,Po],Io)=>(hr&&!jr&&(Po=hr(Io<On-1?Gn.tilePath[On-1-Io]:Yn.tilePath[Io-On+2])[2]),Ss(Vn,Co,Po,Nt))),Zn.some(Vn=>Vn[3]<=0)&&(Zn=[]));let co=[];if(Zn.length>0){let Vn=1/0,Co=-1/0,Po=1/0,Io=-1/0;for(const Mo of Zn)Vn=Math.min(Vn,Mo[0]),Po=Math.min(Po,Mo[1]),Co=Math.max(Co,Mo[0]),Io=Math.max(Io,Mo[1]);Co>=En.x&&Vn<=yn.x&&Io>=En.y&&Po<=yn.y&&(co=[Zn.map(Mo=>new st.Point(Mo[0],Mo[1]))],(Vn<En.x||Co>yn.x||Po<En.y||Io>yn.y)&&(co=st.clipLine(co,En.x,En.y,yn.x,yn.y)))}for(const Vn of co){Sn.reset(Vn,.25*cn);let Co=0;Co=Sn.length<=.5*cn?1:Math.ceil(Sn.paddedLength/fo)+1;for(let Po=0;Po<Co;Po++){const Io=Po/Math.max(Co-1,1),Mo=Sn.lerp(Io),zs=Mo.x+ga,Cs=Mo.y+ga;lr.push(zs,Cs,cn,0);const El=zs-cn,Gl=Cs-cn,Wo=zs+cn,jo=Cs+cn;if(Fr=Fr&&this.isOffscreen(El,Gl,Wo,jo),vn=vn||this.isInsideGrid(El,Gl,Wo,jo),!ut&&this.grid.hitTestCircle(zs,Cs,cn,er)&&(Hr=!0,!$t))return{circles:[],offscreen:!1,collisionDetected:Hr,occluded:!1}}}}return{circles:!$t&&Hr||!vn?[]:lr,offscreen:Fr,collisionDetected:Hr,occluded:Ir.occluded}}queryRenderedSymbols(ot){if(ot.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const ut=[];let yt=1/0,vt=1/0,Et=-1/0,Rt=-1/0;for(const $t of ot){const Vt=new st.Point($t.x+ga,$t.y+ga);yt=Math.min(yt,Vt.x),vt=Math.min(vt,Vt.y),Et=Math.max(Et,Vt.x),Rt=Math.max(Rt,Vt.y),ut.push(Vt)}const At=this.grid.query(yt,vt,Et,Rt).concat(this.ignoredGrid.query(yt,vt,Et,Rt)),It={},Nt={};for(const $t of At){const Vt=$t.key;if(It[Vt.bucketInstanceId]===void 0&&(It[Vt.bucketInstanceId]={}),It[Vt.bucketInstanceId][Vt.featureIndex])continue;const er=[new st.Point($t.x1,$t.y1),new st.Point($t.x2,$t.y1),new st.Point($t.x2,$t.y2),new st.Point($t.x1,$t.y2)];st.polygonIntersectsPolygon(ut,er)&&(It[Vt.bucketInstanceId][Vt.featureIndex]=!0,Nt[Vt.bucketInstanceId]===void 0&&(Nt[Vt.bucketInstanceId]=[]),Nt[Vt.bucketInstanceId].push(Vt.featureIndex))}return Nt}insertCollisionBox(ot,ut,yt,vt,Et){(ut?this.ignoredGrid:this.grid).insert({bucketInstanceId:yt,featureIndex:vt,collisionGroupID:Et},ot[0],ot[1],ot[2],ot[3])}insertCollisionCircles(ot,ut,yt,vt,Et){const Rt=ut?this.ignoredGrid:this.grid,At={bucketInstanceId:yt,featureIndex:vt,collisionGroupID:Et};for(let It=0;It<ot.length;It+=4)Rt.insertCircle(At,ot[It],ot[It+1],ot[It+2])}projectAndGetPerspectiveRatio(ot,ut,yt,vt,Et,Rt,At){const It=[ut,yt,vt,1];let Nt=!1;vt||this.transform.pitch>0?(st.transformMat4$1(It,It,ot),this.fogState&&Et&&At.name!=="globe"&&(Nt=function(er,ir,sr,or,lr,Gt){const nr=Gt.calculateFogTileMatrix(lr),hr=[ir,sr,or];return st.transformMat4(hr,hr,nr),xn(er,hr,Gt.pitch,Gt._fov)}(this.fogState,ut,yt,vt,Et.toUnwrapped(),this.transform)>.9)):po(It,It,ot);const $t=It[3];return{point:new st.Point((It[0]/$t+1)/2*this.transform.width+ga,(-It[1]/$t+1)/2*this.transform.height+ga),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(At)/$t*.5,1.5),signedDistanceFromCamera:$t,occluded:Rt&&It[2]>$t||Nt}}isOffscreen(ot,ut,yt,vt){return yt<ga||ot>=this.screenRightBoundary||vt<ga||ut>this.screenBottomBoundary}isInsideGrid(ot,ut,yt,vt){return yt>=0&&ot<this.gridRightBoundary&&vt>=0&&ut<this.gridBottomBoundary}getViewportMatrix(){const ot=st.identity([]);return st.translate(ot,ot,[-100,-100,0]),ot}}function ku(ft,ot,ut){const yt=ot.createTileMatrix(ft,ft.worldSize,ut.toUnwrapped());return st.multiply(new Float32Array(16),ft.projMatrix,yt)}function ba(ft,ot,ut){if(ot.projection.name===ut.projection.name)return ft.projMatrix;const yt=ut.clone();return yt.setProjection(ot.projection),ku(yt,ot.getProjection(),ft)}function Ho(ft,ot,ut){return ot.name===ut.projection.name?ft.projMatrix:ku(ut,ot,ft)}class N_{constructor(ot,ut,yt,vt){this.opacity=ot?Math.max(0,Math.min(1,ot.opacity+(ot.placed?ut:-ut))):vt&&yt?1:0,this.placed=yt}isHidden(){return this.opacity===0&&!this.placed}}class eu{constructor(ot,ut,yt,vt,Et,Rt=!1){this.text=new N_(ot?ot.text:null,ut,yt,Et),this.icon=new N_(ot?ot.icon:null,ut,vt,Et),this.clipped=Rt}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Sp{constructor(ot,ut,yt,vt=!1){this.text=ot,this.icon=ut,this.skipFade=yt,this.clipped=vt}}class Tp{constructor(){this.invProjMatrix=st.create(),this.viewportMatrix=st.create(),this.circles=[]}}class uy{constructor(ot,ut,yt,vt,Et){this.bucketInstanceId=ot,this.featureIndex=ut,this.sourceLayerIndex=yt,this.bucketIndex=vt,this.tileID=Et}}class B_{constructor(ot){this.crossSourceCollisions=ot,this.maxGroupID=0,this.collisionGroups={}}get(ot){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[ot]){const ut=++this.maxGroupID;this.collisionGroups[ot]={ID:ut,predicate:yt=>yt.collisionGroupID===ut}}return this.collisionGroups[ot]}}function Cp(ft,ot,ut,yt,vt){const{horizontalAlign:Et,verticalAlign:Rt}=st.getAnchorAlignment(ft),At=-(Et-.5)*ot,It=-(Rt-.5)*ut,Nt=st.evaluateVariableOffset(ft,yt);return new st.Point(At+Nt[0]*vt,It+Nt[1]*vt)}function Rp(ft,ot,ut,yt,vt){const Et=new st.Point(ft,ot);return ut&&Et._rotate(yt?vt:-vt),Et}class um{constructor(ot,ut,yt,vt,Et){this.transform=ot.clone(),this.projection=ot.projection.name,this.collisionIndex=new Ep(this.transform,Et),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=ut,this.retainedQueryData={},this.collisionGroups=new B_(yt),this.collisionCircleArrays={},this.prevPlacement=vt,vt&&(vt.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(ot,ut,yt,vt){const Et=yt.getBucket(ut),Rt=yt.latestFeatureIndex;if(!Et||!Rt||ut.id!==Et.layerIds[0])return;const At=Et.layers[0].layout,It=yt.collisionBoxArray,Nt=Math.pow(2,this.transform.zoom-yt.tileID.overscaledZ),$t=yt.tileSize/st.EXTENT,Vt=yt.tileID.toUnwrapped();this.transform.setProjection(Et.projection);const er=(ir=yt.tileID,sr=Et.getProjection(),or=this.transform,sr.name===this.projection?or.calculateProjMatrix(ir.toUnwrapped()):ku(or,sr,ir));var ir,sr,or;const lr=At.get("text-pitch-alignment")==="map",Gt=At.get("text-rotation-alignment")==="map";ut.compileFilter();const nr=ut.dynamicFilter(),hr=ut.dynamicFilterNeedsFeature(),dr=this.transform.calculatePixelsToTileUnitsMatrix(yt),br=_c(er,yt.tileID.canonical,lr,Gt,this.transform,Et.getProjection(),dr);let Cr=null;if(lr){const Ir=ls(er,yt.tileID.canonical,lr,Gt,this.transform,Et.getProjection(),dr);Cr=st.multiply([],this.transform.labelPlaneMatrix,Ir)}let Tr=null;nr&&yt.latestFeatureIndex&&(Tr={unwrappedTileID:Vt,dynamicFilter:nr,dynamicFilterNeedsFeature:hr,featureIndex:yt.latestFeatureIndex}),this.retainedQueryData[Et.bucketInstanceId]=new uy(Et.bucketInstanceId,Rt,Et.sourceLayerIndex,Et.index,yt.tileID);const jr={bucket:Et,layout:At,posMatrix:er,textLabelPlaneMatrix:br,labelToScreenMatrix:Cr,clippingData:Tr,scale:Nt,textPixelRatio:$t,holdingForFade:yt.holdingForFade(),collisionBoxArray:It,partiallyEvaluatedTextSize:st.evaluateSizeForZoom(Et.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:st.evaluateSizeForZoom(Et.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Et.sourceID)};if(vt)for(const Ir of Et.sortKeyRanges){const{sortKey:Ur,symbolInstanceStart:wn,symbolInstanceEnd:Nr}=Ir;ot.push({sortKey:Ur,symbolInstanceStart:wn,symbolInstanceEnd:Nr,parameters:jr})}else ot.push({symbolInstanceStart:0,symbolInstanceEnd:Et.symbolInstances.length,parameters:jr})}attemptAnchorPlacement(ot,ut,yt,vt,Et,Rt,At,It,Nt,$t,Vt,er,ir,sr,or,lr,Gt,nr){const{textOffset0:hr,textOffset1:dr,crossTileID:br}=er,Cr=[hr,dr],Tr=Cp(ot,yt,vt,Cr,Et),jr=this.collisionIndex.placeCollisionBox(sr,Et,ut,Rp(Tr.x,Tr.y,Rt,At,this.transform.angle),Vt,It,Nt,$t.predicate);if(lr){const Ir=sr.getSymbolInstanceIconSize(nr,this.transform.zoom,er.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(sr,Ir,lr,Rp(Tr.x,Tr.y,Rt,At,this.transform.angle),Vt,It,Nt,$t.predicate).box.length===0)return}if(jr.box.length>0){let Ir;return this.prevPlacement&&this.prevPlacement.variableOffsets[br]&&this.prevPlacement.placements[br]&&this.prevPlacement.placements[br].text&&(Ir=this.prevPlacement.variableOffsets[br].anchor),this.variableOffsets[br]={textOffset:Cr,width:yt,height:vt,anchor:ot,textScale:Et,prevAnchor:Ir},this.markUsedJustification(sr,ot,er,or),sr.allowVerticalPlacement&&(this.markUsedOrientation(sr,or,er),this.placedOrientations[br]=or),{shift:Tr,placedGlyphBoxes:jr}}}placeLayerBucketPart(ot,ut,yt,vt){const{bucket:Et,layout:Rt,posMatrix:At,textLabelPlaneMatrix:It,labelToScreenMatrix:Nt,clippingData:$t,textPixelRatio:Vt,holdingForFade:er,collisionBoxArray:ir,partiallyEvaluatedTextSize:sr,partiallyEvaluatedIconSize:or,collisionGroup:lr}=ot.parameters,Gt=Rt.get("text-optional"),nr=Rt.get("icon-optional"),hr=Rt.get("text-allow-overlap"),dr=Rt.get("icon-allow-overlap"),br=Rt.get("text-rotation-alignment")==="map",Cr=Rt.get("text-pitch-alignment")==="map",Tr=Rt.get("icon-text-fit")!=="none",jr=Rt.get("symbol-z-order")==="viewport-y";this.transform.setProjection(Et.projection);let Ir=hr&&(dr||!Et.hasIconData()||nr),Ur=dr&&(hr||!Et.hasTextData()||Gt);!Et.collisionArrays&&ir&&Et.deserializeCollisionBoxes(ir),yt&&vt&&Et.updateCollisionDebugBuffers(this.transform.zoom,ir);const wn=(Nr,hn,Hr)=>{const{crossTileID:vn,numVerticalGlyphVertices:Fr}=Nr;if($t){const Wo={zoom:this.transform.zoom,pitch:this.transform.pitch};let jo=null;if($t.dynamicFilterNeedsFeature){const wo=this.retainedQueryData[Et.bucketInstanceId];jo=$t.featureIndex.loadFeature({featureIndex:Nr.featureIndex,bucketIndex:wo.bucketIndex,sourceLayerIndex:wo.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,$t.dynamicFilter)(Wo,jo,this.retainedQueryData[Et.bucketInstanceId].tileID.canonical,new st.Point(Nr.tileAnchorX,Nr.tileAnchorY),this.transform.calculateDistanceTileData($t.unwrappedTileID)))return this.placements[vn]=new Sp(!1,!1,!1,!0),void ut.add(vn)}if(ut.has(vn))return;if(er)return void(this.placements[vn]=new Sp(!1,!1,!1));let cn=!1,En=!1,yn=!0,Sn=!1,Gn=!1,Yn=null,On={box:null,offscreen:null,occluded:null},Zn={box:null,offscreen:null,occluded:null},fo=null,co=null,Vn=null,Co=0,Po=0,Io=0;Hr.textFeatureIndex?Co=Hr.textFeatureIndex:Nr.useRuntimeCollisionCircles&&(Co=Nr.featureIndex),Hr.verticalTextFeatureIndex&&(Po=Hr.verticalTextFeatureIndex);const Mo=Wo=>{Wo.tileID=this.retainedQueryData[Et.bucketInstanceId].tileID;const jo=this.transform.elevation;(jo||Wo.elevation)&&(Wo.elevation=jo?jo.getAtTileOffset(Wo.tileID,Wo.tileAnchorX,Wo.tileAnchorY):0)},zs=Hr.textBox;if(zs){Mo(zs);const Wo=wo=>{let cs=st.WritingMode.horizontal;if(Et.allowVerticalPlacement&&!wo&&this.prevPlacement){const Us=this.prevPlacement.placedOrientations[vn];Us&&(this.placedOrientations[vn]=Us,cs=Us,this.markUsedOrientation(Et,cs,Nr))}return cs},jo=(wo,cs)=>{if(Et.allowVerticalPlacement&&Fr>0&&Hr.verticalTextBox){for(const Us of Et.writingModes)if(Us===st.WritingMode.vertical?(On=cs(),Zn=On):On=wo(),On&&On.box&&On.box.length)break}else On=wo()};if(Rt.get("text-variable-anchor")){let wo=Rt.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[vn]){const Go=this.prevPlacement.variableOffsets[vn];wo.indexOf(Go.anchor)>0&&(wo=wo.filter(Ws=>Ws!==Go.anchor),wo.unshift(Go.anchor))}const cs=(Go,Ws,Om)=>{const Ou=Et.getSymbolInstanceTextSize(sr,Nr,this.transform.zoom,hn),qp=(Go.x2-Go.x1)*Ou+2*Go.padding,au=(Go.y2-Go.y1)*Ou+2*Go.padding,xu=Tr&&!dr?Ws:null;xu&&Mo(xu);let zu={box:[],offscreen:!1,occluded:!1};const zm=hr?2*wo.length:wo.length;for(let Zp=0;Zp<zm;++Zp){const e_=this.attemptAnchorPlacement(wo[Zp%wo.length],Go,qp,au,Ou,br,Cr,Vt,At,lr,Zp>=wo.length,Nr,hn,Et,Om,xu,sr,or);if(e_&&(zu=e_.placedGlyphBoxes,zu&&zu.box&&zu.box.length)){cn=!0,Yn=e_.shift;break}}return zu};jo(()=>cs(zs,Hr.iconBox,st.WritingMode.horizontal),()=>{const Go=Hr.verticalTextBox;return Go&&Mo(Go),Et.allowVerticalPlacement&&!(On&&On.box&&On.box.length)&&Fr>0&&Go?cs(Go,Hr.verticalIconBox,st.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),On&&(cn=On.box,yn=On.offscreen,Sn=On.occluded);const Us=Wo(!(!On||!On.box));if(!cn&&this.prevPlacement){const Go=this.prevPlacement.variableOffsets[vn];Go&&(this.variableOffsets[vn]=Go,this.markUsedJustification(Et,Go.anchor,Nr,Us))}}else{const wo=(cs,Us)=>{const Go=Et.getSymbolInstanceTextSize(sr,Nr,this.transform.zoom,hn),Ws=this.collisionIndex.placeCollisionBox(Et,Go,cs,new st.Point(0,0),hr,Vt,At,lr.predicate);return Ws&&Ws.box&&Ws.box.length&&(this.markUsedOrientation(Et,Us,Nr),this.placedOrientations[vn]=Us),Ws};jo(()=>wo(zs,st.WritingMode.horizontal),()=>{const cs=Hr.verticalTextBox;return Et.allowVerticalPlacement&&Fr>0&&cs?(Mo(cs),wo(cs,st.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Wo(!!(On&&On.box&&On.box.length))}}if(fo=On,cn=fo&&fo.box&&fo.box.length>0,yn=fo&&fo.offscreen,Sn=fo&&fo.occluded,Nr.useRuntimeCollisionCircles){const Wo=Et.text.placedSymbolArray.get(Nr.centerJustifiedTextSymbolIndex>=0?Nr.centerJustifiedTextSymbolIndex:Nr.verticalPlacedTextSymbolIndex),jo=st.evaluateSizeForFeature(Et.textSizeData,sr,Wo),wo=Rt.get("text-padding");co=this.collisionIndex.placeCollisionCircles(Et,hr,Wo,Et.lineVertexArray,Et.glyphOffsetArray,jo,At,It,Nt,yt,Cr,lr.predicate,Nr.collisionCircleDiameter*jo/st.ONE_EM,wo,this.retainedQueryData[Et.bucketInstanceId].tileID),cn=hr||co.circles.length>0&&!co.collisionDetected,yn=yn&&co.offscreen,Sn=co.occluded}if(Hr.iconFeatureIndex&&(Io=Hr.iconFeatureIndex),Hr.iconBox){const Wo=jo=>{Mo(jo);const wo=Tr&&Yn?Rp(Yn.x,Yn.y,br,Cr,this.transform.angle):new st.Point(0,0),cs=Et.getSymbolInstanceIconSize(or,this.transform.zoom,Nr.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(Et,cs,jo,wo,dr,Vt,At,lr.predicate)};Zn&&Zn.box&&Zn.box.length&&Hr.verticalIconBox?(Vn=Wo(Hr.verticalIconBox),En=Vn.box.length>0):(Vn=Wo(Hr.iconBox),En=Vn.box.length>0),yn=yn&&Vn.offscreen,Gn=Vn.occluded}const Cs=Gt||Nr.numHorizontalGlyphVertices===0&&Fr===0,El=nr||Nr.numIconVertices===0;if(Cs||El?El?Cs||(En=En&&cn):cn=En&&cn:En=cn=En&&cn,cn&&fo&&fo.box&&this.collisionIndex.insertCollisionBox(fo.box,Rt.get("text-ignore-placement"),Et.bucketInstanceId,Zn&&Zn.box&&Po?Po:Co,lr.ID),En&&Vn&&this.collisionIndex.insertCollisionBox(Vn.box,Rt.get("icon-ignore-placement"),Et.bucketInstanceId,Io,lr.ID),co&&(cn&&this.collisionIndex.insertCollisionCircles(co.circles,Rt.get("text-ignore-placement"),Et.bucketInstanceId,Co,lr.ID),yt)){const Wo=Et.bucketInstanceId;let jo=this.collisionCircleArrays[Wo];jo===void 0&&(jo=this.collisionCircleArrays[Wo]=new Tp);for(let wo=0;wo<co.circles.length;wo+=4)jo.circles.push(co.circles[wo+0]),jo.circles.push(co.circles[wo+1]),jo.circles.push(co.circles[wo+2]),jo.circles.push(co.collisionDetected?1:0)}const Gl=Et.projection.name!=="globe";Ir=Ir&&(Gl||!Sn),Ur=Ur&&(Gl||!Gn),this.placements[vn]=new Sp(cn||Ir,En||Ur,yn||Et.justReloaded),ut.add(vn)};if(jr){const Nr=Et.getSortedSymbolIndexes(this.transform.angle);for(let hn=Nr.length-1;hn>=0;--hn){const Hr=Nr[hn];wn(Et.symbolInstances.get(Hr),Hr,Et.collisionArrays[Hr])}}else for(let Nr=ot.symbolInstanceStart;Nr<ot.symbolInstanceEnd;Nr++)wn(Et.symbolInstances.get(Nr),Nr,Et.collisionArrays[Nr]);if(yt&&Et.bucketInstanceId in this.collisionCircleArrays){const Nr=this.collisionCircleArrays[Et.bucketInstanceId];st.invert(Nr.invProjMatrix,At),Nr.viewportMatrix=this.collisionIndex.getViewportMatrix()}Et.justReloaded=!1}markUsedJustification(ot,ut,yt,vt){const{leftJustifiedTextSymbolIndex:Et,centerJustifiedTextSymbolIndex:Rt,rightJustifiedTextSymbolIndex:At,verticalPlacedTextSymbolIndex:It,crossTileID:Nt}=yt,$t=st.getAnchorJustification(ut),Vt=vt===st.WritingMode.vertical?It:$t==="left"?Et:$t==="center"?Rt:$t==="right"?At:-1;Et>=0&&(ot.text.placedSymbolArray.get(Et).crossTileID=Vt>=0&&Et!==Vt?0:Nt),Rt>=0&&(ot.text.placedSymbolArray.get(Rt).crossTileID=Vt>=0&&Rt!==Vt?0:Nt),At>=0&&(ot.text.placedSymbolArray.get(At).crossTileID=Vt>=0&&At!==Vt?0:Nt),It>=0&&(ot.text.placedSymbolArray.get(It).crossTileID=Vt>=0&&It!==Vt?0:Nt)}markUsedOrientation(ot,ut,yt){const vt=ut===st.WritingMode.horizontal||ut===st.WritingMode.horizontalOnly?ut:0,Et=ut===st.WritingMode.vertical?ut:0,{leftJustifiedTextSymbolIndex:Rt,centerJustifiedTextSymbolIndex:At,rightJustifiedTextSymbolIndex:It,verticalPlacedTextSymbolIndex:Nt}=yt,$t=ot.text.placedSymbolArray;Rt>=0&&($t.get(Rt).placedOrientation=vt),At>=0&&($t.get(At).placedOrientation=vt),It>=0&&($t.get(It).placedOrientation=vt),Nt>=0&&($t.get(Nt).placedOrientation=Et)}commit(ot){this.commitTime=ot,this.zoomAtLastRecencyCheck=this.transform.zoom;const ut=this.prevPlacement;let yt=!1;this.prevZoomAdjustment=ut?ut.zoomAdjustment(this.transform.zoom):0;const vt=ut?ut.symbolFadeChange(ot):1,Et=ut?ut.opacities:{},Rt=ut?ut.variableOffsets:{},At=ut?ut.placedOrientations:{};for(const It in this.placements){const Nt=this.placements[It],$t=Et[It];$t?(this.opacities[It]=new eu($t,vt,Nt.text,Nt.icon,null,Nt.clipped),yt=yt||Nt.text!==$t.text.placed||Nt.icon!==$t.icon.placed):(this.opacities[It]=new eu(null,vt,Nt.text,Nt.icon,Nt.skipFade,Nt.clipped),yt=yt||Nt.text||Nt.icon)}for(const It in Et){const Nt=Et[It];if(!this.opacities[It]){const $t=new eu(Nt,vt,!1,!1);$t.isHidden()||(this.opacities[It]=$t,yt=yt||Nt.text.placed||Nt.icon.placed)}}for(const It in Rt)this.variableOffsets[It]||!this.opacities[It]||this.opacities[It].isHidden()||(this.variableOffsets[It]=Rt[It]);for(const It in At)this.placedOrientations[It]||!this.opacities[It]||this.opacities[It].isHidden()||(this.placedOrientations[It]=At[It]);yt?this.lastPlacementChangeTime=ot:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=ut?ut.lastPlacementChangeTime:ot)}updateLayerOpacities(ot,ut){const yt=new Set;for(const vt of ut){const Et=vt.getBucket(ot);Et&&vt.latestFeatureIndex&&ot.id===Et.layerIds[0]&&this.updateBucketOpacities(Et,yt,vt.collisionBoxArray)}}updateBucketOpacities(ot,ut,yt){ot.hasTextData()&&ot.text.opacityVertexArray.clear(),ot.hasIconData()&&ot.icon.opacityVertexArray.clear(),ot.hasIconCollisionBoxData()&&ot.iconCollisionBox.collisionVertexArray.clear(),ot.hasTextCollisionBoxData()&&ot.textCollisionBox.collisionVertexArray.clear();const vt=ot.layers[0].layout,Et=!!ot.layers[0].dynamicFilter(),Rt=new eu(null,0,!1,!1,!0),At=vt.get("text-allow-overlap"),It=vt.get("icon-allow-overlap"),Nt=vt.get("text-variable-anchor"),$t=vt.get("text-rotation-alignment")==="map",Vt=vt.get("text-pitch-alignment")==="map",er=vt.get("icon-text-fit")!=="none",ir=new eu(null,0,At&&(It||!ot.hasIconData()||vt.get("icon-optional")),It&&(At||!ot.hasTextData()||vt.get("text-optional")),!0);!ot.collisionArrays&&yt&&(ot.hasIconCollisionBoxData()||ot.hasTextCollisionBoxData())&&ot.deserializeCollisionBoxes(yt);const sr=(lr,Gt,nr)=>{for(let hr=0;hr<Gt/4;hr++)lr.opacityVertexArray.emplaceBack(nr)};let or=0;for(let lr=0;lr<ot.symbolInstances.length;lr++){const Gt=ot.symbolInstances.get(lr),{numHorizontalGlyphVertices:nr,numVerticalGlyphVertices:hr,crossTileID:dr,numIconVertices:br}=Gt,Cr=ut.has(dr);let Tr=this.opacities[dr];Cr?Tr=Rt:Tr||(Tr=ir,this.opacities[dr]=Tr),ut.add(dr);const jr=nr>0||hr>0,Ir=br>0,Ur=this.placedOrientations[dr],wn=Ur===st.WritingMode.vertical,Nr=Ur===st.WritingMode.horizontal||Ur===st.WritingMode.horizontalOnly;if(!jr&&!Ir||Tr.isHidden()||or++,jr){const hn=Ap(Tr.text);sr(ot.text,nr,wn?Yo:hn),sr(ot.text,hr,Nr?Yo:hn);const Hr=Tr.text.isHidden(),{leftJustifiedTextSymbolIndex:vn,centerJustifiedTextSymbolIndex:Fr,rightJustifiedTextSymbolIndex:cn,verticalPlacedTextSymbolIndex:En}=Gt,yn=ot.text.placedSymbolArray,Sn=Hr||wn?1:0;vn>=0&&(yn.get(vn).hidden=Sn),Fr>=0&&(yn.get(Fr).hidden=Sn),cn>=0&&(yn.get(cn).hidden=Sn),En>=0&&(yn.get(En).hidden=Hr||Nr?1:0);const Gn=this.variableOffsets[dr];Gn&&this.markUsedJustification(ot,Gn.anchor,Gt,Ur);const Yn=this.placedOrientations[dr];Yn&&(this.markUsedJustification(ot,"left",Gt,Yn),this.markUsedOrientation(ot,Yn,Gt))}if(Ir){const hn=Ap(Tr.icon),{placedIconSymbolIndex:Hr,verticalPlacedIconSymbolIndex:vn}=Gt,Fr=ot.icon.placedSymbolArray,cn=Tr.icon.isHidden()?1:0;Hr>=0&&(sr(ot.icon,br,wn?Yo:hn),Fr.get(Hr).hidden=cn),vn>=0&&(sr(ot.icon,Gt.numVerticalIconVertices,Nr?Yo:hn),Fr.get(vn).hidden=cn)}if(ot.hasIconCollisionBoxData()||ot.hasTextCollisionBoxData()){const hn=ot.collisionArrays[lr];if(hn){let Hr=new st.Point(0,0),vn=!0;if(hn.textBox||hn.verticalTextBox){if(Nt){const cn=this.variableOffsets[dr];cn?(Hr=Cp(cn.anchor,cn.width,cn.height,cn.textOffset,cn.textScale),$t&&Hr._rotate(Vt?this.transform.angle:-this.transform.angle)):vn=!1}Et&&(vn=!Tr.clipped),hn.textBox&&Xu(ot.textCollisionBox.collisionVertexArray,Tr.text.placed,!vn||wn,Hr.x,Hr.y),hn.verticalTextBox&&Xu(ot.textCollisionBox.collisionVertexArray,Tr.text.placed,!vn||Nr,Hr.x,Hr.y)}const Fr=vn&&!!(!Nr&&hn.verticalIconBox);hn.iconBox&&Xu(ot.iconCollisionBox.collisionVertexArray,Tr.icon.placed,Fr,er?Hr.x:0,er?Hr.y:0),hn.verticalIconBox&&Xu(ot.iconCollisionBox.collisionVertexArray,Tr.icon.placed,!Fr,er?Hr.x:0,er?Hr.y:0)}}}if(ot.fullyClipped=or===0,ot.sortFeatures(this.transform.angle),this.retainedQueryData[ot.bucketInstanceId]&&(this.retainedQueryData[ot.bucketInstanceId].featureSortOrder=ot.featureSortOrder),ot.hasTextData()&&ot.text.opacityVertexBuffer&&ot.text.opacityVertexBuffer.updateData(ot.text.opacityVertexArray),ot.hasIconData()&&ot.icon.opacityVertexBuffer&&ot.icon.opacityVertexBuffer.updateData(ot.icon.opacityVertexArray),ot.hasIconCollisionBoxData()&&ot.iconCollisionBox.collisionVertexBuffer&&ot.iconCollisionBox.collisionVertexBuffer.updateData(ot.iconCollisionBox.collisionVertexArray),ot.hasTextCollisionBoxData()&&ot.textCollisionBox.collisionVertexBuffer&&ot.textCollisionBox.collisionVertexBuffer.updateData(ot.textCollisionBox.collisionVertexArray),ot.bucketInstanceId in this.collisionCircleArrays){const lr=this.collisionCircleArrays[ot.bucketInstanceId];ot.placementInvProjMatrix=lr.invProjMatrix,ot.placementViewportMatrix=lr.viewportMatrix,ot.collisionCircleArray=lr.circles,delete this.collisionCircleArrays[ot.bucketInstanceId]}}symbolFadeChange(ot){return this.fadeDuration===0?1:(ot-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(ot){return Math.max(0,(this.transform.zoom-ot)/1.5)}hasTransitions(ot){return this.stale||ot-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(ot,ut){const yt=this.zoomAtLastRecencyCheck===ut?1-this.zoomAdjustment(ut):1;return this.zoomAtLastRecencyCheck=ut,this.commitTime+this.fadeDuration*yt>ot}setStale(){this.stale=!0}}function Xu(ft,ot,ut,yt,vt){ft.emplaceBack(ot?1:0,ut?1:0,yt||0,vt||0),ft.emplaceBack(ot?1:0,ut?1:0,yt||0,vt||0),ft.emplaceBack(ot?1:0,ut?1:0,yt||0,vt||0),ft.emplaceBack(ot?1:0,ut?1:0,yt||0,vt||0)}const Gs=Math.pow(2,25),rs=Math.pow(2,24),hy=Math.pow(2,17),dy=Math.pow(2,16),Hs=Math.pow(2,9),yl=Math.pow(2,8),F_=Math.pow(2,1);function Ap(ft){if(ft.opacity===0&&!ft.placed)return 0;if(ft.opacity===1&&ft.placed)return 4294967295;const ot=ft.placed?1:0,ut=Math.floor(127*ft.opacity);return ut*Gs+ot*rs+ut*hy+ot*dy+ut*Hs+ot*yl+ut*F_+ot}const Yo=0;class kp{constructor(ot){this._sortAcrossTiles=ot.layout.get("symbol-z-order")!=="viewport-y"&&ot.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(ot,ut,yt,vt,Et){const Rt=this._bucketParts;for(;this._currentTileIndex<ot.length;)if(ut.getBucketParts(Rt,vt,ot[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,Et())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Rt.sort((At,It)=>At.sortKey-It.sortKey));this._currentPartIndex<Rt.length;){const At=Rt[this._currentPartIndex];if(ut.placeLayerBucketPart(At,this._seenCrossTileIDs,yt,At.symbolInstanceStart===0),this._currentPartIndex++,Et())return!0}return!1}}class py{constructor(ot,ut,yt,vt,Et,Rt,At,It){this.placement=new um(ot,Et,Rt,At,It),this._currentPlacementIndex=ut.length-1,this._forceFullPlacement=yt,this._showCollisionBoxes=vt,this._done=!1}isDone(){return this._done}continuePlacement(ot,ut,yt){const vt=st.exported.now(),Et=()=>{const Rt=st.exported.now()-vt;return!this._forceFullPlacement&&Rt>2};for(;this._currentPlacementIndex>=0;){const Rt=ut[ot[this._currentPlacementIndex]],At=this.placement.collisionIndex.transform.zoom;if(Rt.type==="symbol"&&(!Rt.minzoom||Rt.minzoom<=At)&&(!Rt.maxzoom||Rt.maxzoom>At)){if(this._inProgressLayer||(this._inProgressLayer=new kp(Rt)),this._inProgressLayer.continuePlacement(yt[Rt.source],this.placement,this._showCollisionBoxes,Rt,Et))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(ot){return this.placement.commit(ot),this.placement}}const Pu=512/st.EXTENT/2;class Ps{constructor(ot,ut,yt){this.tileID=ot,this.bucketInstanceId=yt,this.index=new st.KDBush(ut.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const vt=ot.canonical.x*st.EXTENT,Et=ot.canonical.y*st.EXTENT;for(let Rt=0;Rt<ut.length;Rt++){const{key:At,crossTileID:It,tileAnchorX:Nt,tileAnchorY:$t}=ut.get(Rt),Vt=Math.floor((vt+Nt)*Pu),er=Math.floor((Et+$t)*Pu);this.index.add(Vt,er),this.keys.push(At),this.crossTileIDs.push(It)}this.index.finish()}findMatches(ot,ut,yt){const vt=this.tileID.canonical.z<ut.canonical.z?1:Math.pow(2,this.tileID.canonical.z-ut.canonical.z),Et=Pu/Math.pow(2,ut.canonical.z-this.tileID.canonical.z),Rt=ut.canonical.x*st.EXTENT,At=ut.canonical.y*st.EXTENT;for(let It=0;It<ot.length;It++){const Nt=ot.get(It);if(Nt.crossTileID)continue;const{key:$t,tileAnchorX:Vt,tileAnchorY:er}=Nt,ir=Math.floor((Rt+Vt)*Et),sr=Math.floor((At+er)*Et),or=this.index.range(ir-vt,sr-vt,ir+vt,sr+vt);for(const lr of or){const Gt=this.crossTileIDs[lr];if(this.keys[lr]===$t&&!yt.has(Gt)){yt.add(Gt),Nt.crossTileID=Gt;break}}}}}class fy{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class my{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(ot){const ut=Math.round((ot-this.lng)/360);if(ut!==0)for(const yt in this.indexes){const vt=this.indexes[yt],Et={};for(const Rt in vt){const At=vt[Rt];At.tileID=At.tileID.unwrapTo(At.tileID.wrap+ut),Et[At.tileID.key]=At}this.indexes[yt]=Et}this.lng=ot}addBucket(ot,ut,yt){if(this.indexes[ot.overscaledZ]&&this.indexes[ot.overscaledZ][ot.key]){if(this.indexes[ot.overscaledZ][ot.key].bucketInstanceId===ut.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(ot.overscaledZ,this.indexes[ot.overscaledZ][ot.key])}for(let Et=0;Et<ut.symbolInstances.length;Et++)ut.symbolInstances.get(Et).crossTileID=0;this.usedCrossTileIDs[ot.overscaledZ]||(this.usedCrossTileIDs[ot.overscaledZ]=new Set);const vt=this.usedCrossTileIDs[ot.overscaledZ];for(const Et in this.indexes){const Rt=this.indexes[Et];if(Number(Et)>ot.overscaledZ)for(const At in Rt){const It=Rt[At];It.tileID.isChildOf(ot)&&It.findMatches(ut.symbolInstances,ot,vt)}else{const At=Rt[ot.scaledTo(Number(Et)).key];At&&At.findMatches(ut.symbolInstances,ot,vt)}}for(let Et=0;Et<ut.symbolInstances.length;Et++){const Rt=ut.symbolInstances.get(Et);Rt.crossTileID||(Rt.crossTileID=yt.generate(),vt.add(Rt.crossTileID))}return this.indexes[ot.overscaledZ]===void 0&&(this.indexes[ot.overscaledZ]={}),this.indexes[ot.overscaledZ][ot.key]=new Ps(ot,ut.symbolInstances,ut.bucketInstanceId),!0}removeBucketCrossTileIDs(ot,ut){for(const yt of ut.crossTileIDs)this.usedCrossTileIDs[ot].delete(yt)}removeStaleBuckets(ot){let ut=!1;for(const yt in this.indexes){const vt=this.indexes[yt];for(const Et in vt)ot[vt[Et].bucketInstanceId]||(this.removeBucketCrossTileIDs(yt,vt[Et]),delete vt[Et],ut=!0)}return ut}}class tu{constructor(){this.layerIndexes={},this.crossTileIDs=new fy,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(ot,ut,yt,vt){let Et=this.layerIndexes[ot.id];Et===void 0&&(Et=this.layerIndexes[ot.id]=new my);let Rt=!1;const At={};vt.name!=="globe"&&Et.handleWrapJump(yt);for(const It of ut){const Nt=It.getBucket(ot);Nt&&ot.id===Nt.layerIds[0]&&(Nt.bucketInstanceId||(Nt.bucketInstanceId=++this.maxBucketInstanceId),Et.addBucket(It.tileID,Nt,this.crossTileIDs)&&(Rt=!0),At[Nt.bucketInstanceId]=!0)}return Et.removeStaleBuckets(At)&&(Rt=!0),Rt}pruneUnusedLayers(ot){const ut={};ot.forEach(yt=>{ut[yt]=!0});for(const yt in this.layerIndexes)ut[yt]||delete this.layerIndexes[yt]}}const yu=(ft,ot)=>st.emitValidationErrors(ft,ot&&ot.filter(ut=>ut.identifier!=="source.canvas")),hm=st.pick(So,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),lv=st.pick(So,["setCenter","setZoom","setBearing","setPitch"]),gy={version:8,layers:[],sources:{}},Ku={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Fl extends st.Evented{constructor(ot,ut={}){super(),this.map=ot,this.dispatcher=new Or(qu(),this),this.imageManager=new dn,this.imageManager.setEventedParent(this),this.glyphManager=new st.GlyphManager(ot._requestManager,ut.localFontFamily?st.LocalGlyphMode.all:ut.localIdeographFontFamily?st.LocalGlyphMode.ideographs:st.LocalGlyphMode.none,ut.localFontFamily||ut.localIdeographFontFamily),this.crossTileSymbolIndex=new tu,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",st.getReferrer());const yt=this;this._rtlTextPluginCallback=Fl.registerForPluginStateChange(vt=>{yt.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:vt.pluginStatus,pluginURL:vt.pluginURL},(Et,Rt)=>{if(st.triggerPluginCompletionEvent(Et),Rt&&Rt.every(At=>At))for(const At in yt._sourceCaches){const It=yt._sourceCaches[At],Nt=It.getSource().type;Nt!=="vector"&&Nt!=="geojson"||It.reload()}})}),this.on("data",vt=>{if(vt.dataType!=="source"||vt.sourceDataType!=="metadata")return;const Et=this.getSource(vt.sourceId);if(Et&&Et.vectorLayerIds)for(const Rt in this._layers){const At=this._layers[Rt];At.source===Et.id&&this._validateLayer(At)}})}loadURL(ot,ut={}){this.fire(new st.Event("dataloading",{dataType:"style"}));const yt=typeof ut.validate=="boolean"?ut.validate:!st.isMapboxURL(ot);ot=this.map._requestManager.normalizeStyleURL(ot,ut.accessToken);const vt=this.map._requestManager.transformRequest(ot,st.ResourceType.Style);this._request=st.getJSON(vt,(Et,Rt)=>{this._request=null,Et?this.fire(new st.ErrorEvent(Et)):Rt&&this._load(Rt,yt)})}loadJSON(ot,ut={}){this.fire(new st.Event("dataloading",{dataType:"style"})),this._request=st.exported.frame(()=>{this._request=null,this._load(ot,ut.validate!==!1)})}loadEmpty(){this.fire(new st.Event("dataloading",{dataType:"style"})),this._load(gy,!1)}_updateLayerCount(ot,ut){const yt=ut?1:-1;ot.is3D()&&(this._num3DLayers+=yt),ot.type==="circle"&&(this._numCircleLayers+=yt),ot.type==="symbol"&&(this._numSymbolLayers+=yt)}_load(ot,ut){if(ut&&yu(this,st.validateStyle(ot)))return;this._loaded=!0,this.stylesheet=st.clone$1(ot),this._updateMapProjection();for(const vt in ot.sources)this.addSource(vt,ot.sources[vt],{validate:!1});this._changed=!1,ot.sprite?this._loadSprite(ot.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(ot.glyphs);const yt=$_(this.stylesheet.layers);this._order=yt.map(vt=>vt.id),this._layers={},this._serializedLayers={};for(const vt of yt){const Et=st.createStyleLayer(vt);Et.setEventedParent(this,{layer:{id:Et.id}}),this._layers[Et.id]=Et,this._serializedLayers[Et.id]=Et.serialize(),this._updateLayerCount(Et,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new wr(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new st.Event("data",{dataType:"style"})),this.fire(new st.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(ot){ot?this.stylesheet.projection=ot:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(ot){this._spriteRequest=function(ut,yt,vt){let Et,Rt,At;const It=st.exported.devicePixelRatio>1?"@2x":"";let Nt=st.getJSON(yt.transformRequest(yt.normalizeSpriteURL(ut,It,".json"),st.ResourceType.SpriteJSON),(er,ir)=>{Nt=null,At||(At=er,Et=ir,Vt())}),$t=st.getImage(yt.transformRequest(yt.normalizeSpriteURL(ut,It,".png"),st.ResourceType.SpriteImage),(er,ir)=>{$t=null,At||(At=er,Rt=ir,Vt())});function Vt(){if(At)vt(At);else if(Et&&Rt){const er=st.exported.getImageData(Rt),ir={};for(const sr in Et){const{width:or,height:lr,x:Gt,y:nr,sdf:hr,pixelRatio:dr,stretchX:br,stretchY:Cr,content:Tr}=Et[sr],jr=new st.RGBAImage({width:or,height:lr});st.RGBAImage.copy(er,jr,{x:Gt,y:nr},{x:0,y:0},{width:or,height:lr}),ir[sr]={data:jr,pixelRatio:dr,sdf:hr,stretchX:br,stretchY:Cr,content:Tr}}vt(null,ir)}}return{cancel(){Nt&&(Nt.cancel(),Nt=null),$t&&($t.cancel(),$t=null)}}}(ot,this.map._requestManager,(ut,yt)=>{if(this._spriteRequest=null,ut)this.fire(new st.ErrorEvent(ut));else if(yt)for(const vt in yt)this.imageManager.addImage(vt,yt[vt]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new st.Event("data",{dataType:"style"}))})}_validateLayer(ot){const ut=this.getSource(ot.source);if(!ut)return;const yt=ot.sourceLayer;yt&&(ut.type==="geojson"||ut.vectorLayerIds&&ut.vectorLayerIds.indexOf(yt)===-1)&&this.fire(new st.ErrorEvent(new Error(`Source layer "${yt}" does not exist on source "${ut.id}" as specified by style layer "${ot.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const ot in this._sourceCaches)if(!this._sourceCaches[ot].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(ot){const ut=[];for(const yt of ot){const vt=this._layers[yt];vt.type!=="custom"&&ut.push(vt.serialize())}return ut}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const ot in this._sourceCaches)if(this._sourceCaches[ot].hasTransition())return!0;for(const ot in this._layers)if(this._layers[ot].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(ot){return!!this.terrain&&(typeof ot.isLayerDraped=="function"?ot.isLayerDraped():Ku[ot.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(ot){if(!this._loaded)return;const ut=this._changed;if(this._changed){const vt=Object.keys(this._updatedLayers),Et=Object.keys(this._removedLayers);(vt.length||Et.length)&&this._updateWorkerLayers(vt,Et);for(const Rt in this._updatedSources){const At=this._updatedSources[Rt];At==="reload"?this._reloadSource(Rt):At==="clear"&&this._clearSource(Rt)}this._updateTilesForChangedImages();for(const Rt in this._updatedPaintProps)this._layers[Rt].updateTransitions(ot);this.light.updateTransitions(ot),this.fog&&this.fog.updateTransitions(ot),this._resetUpdates()}const yt={};for(const vt in this._sourceCaches){const Et=this._sourceCaches[vt];yt[vt]=Et.used,Et.used=!1}for(const vt of this._order){const Et=this._layers[vt];if(Et.recalculate(ot,this._availableImages),!Et.isHidden(ot.zoom)){const At=this._getLayerSourceCache(Et);At&&(At.used=!0)}const Rt=this.map.painter;if(Rt){const At=Et.getProgramIds();if(!At)continue;const It=Et.getProgramConfiguration(ot.zoom);for(const Nt of At)Rt.useProgram(Nt,It)}}for(const vt in yt){const Et=this._sourceCaches[vt];yt[vt]!==Et.used&&Et.getSource().fire(new st.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Et.getSource().id}))}this.light.recalculate(ot),this.terrain&&this.terrain.recalculate(ot),this.fog&&this.fog.recalculate(ot),this.z=ot.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),ut&&this.fire(new st.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const ot=Object.keys(this._changedImages);if(ot.length){for(const ut in this._sourceCaches)this._sourceCaches[ut].reloadTilesForDependencies(["icons","patterns"],ot);this._changedImages={}}}_updateWorkerLayers(ot,ut){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(ot),removedIds:ut})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(ot){if(this._checkLoaded(),yu(this,st.validateStyle(ot)))return!1;(ot=st.clone$1(ot)).layers=$_(ot.layers);const ut=function(vt,Et){if(!vt)return[{command:So.setStyle,args:[Et]}];let Rt=[];try{if(!Tt(vt.version,Et.version))return[{command:So.setStyle,args:[Et]}];Tt(vt.center,Et.center)||Rt.push({command:So.setCenter,args:[Et.center]}),Tt(vt.zoom,Et.zoom)||Rt.push({command:So.setZoom,args:[Et.zoom]}),Tt(vt.bearing,Et.bearing)||Rt.push({command:So.setBearing,args:[Et.bearing]}),Tt(vt.pitch,Et.pitch)||Rt.push({command:So.setPitch,args:[Et.pitch]}),Tt(vt.sprite,Et.sprite)||Rt.push({command:So.setSprite,args:[Et.sprite]}),Tt(vt.glyphs,Et.glyphs)||Rt.push({command:So.setGlyphs,args:[Et.glyphs]}),Tt(vt.transition,Et.transition)||Rt.push({command:So.setTransition,args:[Et.transition]}),Tt(vt.light,Et.light)||Rt.push({command:So.setLight,args:[Et.light]}),Tt(vt.fog,Et.fog)||Rt.push({command:So.setFog,args:[Et.fog]}),Tt(vt.projection,Et.projection)||Rt.push({command:So.setProjection,args:[Et.projection]});const At={},It=[];(function(Vt,er,ir,sr){let or;for(or in er=er||{},Vt=Vt||{})Vt.hasOwnProperty(or)&&(er.hasOwnProperty(or)||wp(or,ir,sr));for(or in er){if(!er.hasOwnProperty(or))continue;const lr=er[or];Vt.hasOwnProperty(or)?Tt(Vt[or],lr)||(Vt[or].type==="geojson"&&lr.type==="geojson"&&cm(Vt,er,or)?ir.push({command:So.setGeoJSONSourceData,args:[or,lr.data]}):sy(or,er,ir,sr)):oy(or,er,ir)}})(vt.sources,Et.sources,It,At);const Nt=[];vt.layers&&vt.layers.forEach(Vt=>{Vt.source&&At[Vt.source]?Rt.push({command:So.removeLayer,args:[Vt.id]}):Nt.push(Vt)});let $t=vt.terrain;$t&&At[$t.source]&&(Rt.push({command:So.setTerrain,args:[void 0]}),$t=void 0),Rt=Rt.concat(It),Tt($t,Et.terrain)||Rt.push({command:So.setTerrain,args:[Et.terrain]}),function(Vt,er,ir){er=er||[];const sr=(Vt=Vt||[]).map(Ql),or=er.map(Ql),lr=Vt.reduce(ay,{}),Gt=er.reduce(ay,{}),nr=sr.slice(),hr=Object.create(null);let dr,br,Cr,Tr,jr,Ir,Ur;for(dr=0,br=0;dr<sr.length;dr++)Cr=sr[dr],Gt.hasOwnProperty(Cr)?br++:(ir.push({command:So.removeLayer,args:[Cr]}),nr.splice(nr.indexOf(Cr,br),1));for(dr=0,br=0;dr<or.length;dr++)Cr=or[or.length-1-dr],nr[nr.length-1-dr]!==Cr&&(lr.hasOwnProperty(Cr)?(ir.push({command:So.removeLayer,args:[Cr]}),nr.splice(nr.lastIndexOf(Cr,nr.length-br),1)):br++,Ir=nr[nr.length-dr],ir.push({command:So.addLayer,args:[Gt[Cr],Ir]}),nr.splice(nr.length-dr,0,Cr),hr[Cr]=!0);for(dr=0;dr<or.length;dr++)if(Cr=or[dr],Tr=lr[Cr],jr=Gt[Cr],!hr[Cr]&&!Tt(Tr,jr))if(Tt(Tr.source,jr.source)&&Tt(Tr["source-layer"],jr["source-layer"])&&Tt(Tr.type,jr.type)){for(Ur in Nl(Tr.layout,jr.layout,ir,Cr,null,So.setLayoutProperty),Nl(Tr.paint,jr.paint,ir,Cr,null,So.setPaintProperty),Tt(Tr.filter,jr.filter)||ir.push({command:So.setFilter,args:[Cr,jr.filter]}),Tt(Tr.minzoom,jr.minzoom)&&Tt(Tr.maxzoom,jr.maxzoom)||ir.push({command:So.setLayerZoomRange,args:[Cr,jr.minzoom,jr.maxzoom]}),Tr)Tr.hasOwnProperty(Ur)&&Ur!=="layout"&&Ur!=="paint"&&Ur!=="filter"&&Ur!=="metadata"&&Ur!=="minzoom"&&Ur!=="maxzoom"&&(Ur.indexOf("paint.")===0?Nl(Tr[Ur],jr[Ur],ir,Cr,Ur.slice(6),So.setPaintProperty):Tt(Tr[Ur],jr[Ur])||ir.push({command:So.setLayerProperty,args:[Cr,Ur,jr[Ur]]}));for(Ur in jr)jr.hasOwnProperty(Ur)&&!Tr.hasOwnProperty(Ur)&&Ur!=="layout"&&Ur!=="paint"&&Ur!=="filter"&&Ur!=="metadata"&&Ur!=="minzoom"&&Ur!=="maxzoom"&&(Ur.indexOf("paint.")===0?Nl(Tr[Ur],jr[Ur],ir,Cr,Ur.slice(6),So.setPaintProperty):Tt(Tr[Ur],jr[Ur])||ir.push({command:So.setLayerProperty,args:[Cr,Ur,jr[Ur]]}))}else ir.push({command:So.removeLayer,args:[Cr]}),Ir=nr[nr.lastIndexOf(Cr)+1],ir.push({command:So.addLayer,args:[jr,Ir]})}(Nt,Et.layers,Rt)}catch(At){console.warn("Unable to compute style diff:",At),Rt=[{command:So.setStyle,args:[Et]}]}return Rt}(this.serialize(),ot).filter(vt=>!(vt.command in lv));if(ut.length===0)return!1;const yt=ut.filter(vt=>!(vt.command in hm));if(yt.length>0)throw new Error(`Unimplemented: ${yt.map(vt=>vt.command).join(", ")}.`);return ut.forEach(vt=>{vt.command!=="setTransition"&&vt.command!=="setProjection"&&this[vt.command].apply(this,vt.args)}),this.stylesheet=ot,this._updateMapProjection(),!0}addImage(ot,ut){return this.getImage(ot)?this.fire(new st.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(ot,ut),this._afterImageUpdated(ot),this)}updateImage(ot,ut){this.imageManager.updateImage(ot,ut)}getImage(ot){return this.imageManager.getImage(ot)}removeImage(ot){return this.getImage(ot)?(this.imageManager.removeImage(ot),this._afterImageUpdated(ot),this):this.fire(new st.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(ot){this._availableImages=this.imageManager.listImages(),this._changedImages[ot]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new st.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(ot,ut,yt={}){if(this._checkLoaded(),this.getSource(ot)!==void 0)throw new Error("There is already a source with this ID");if(!ut.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(ut).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(ut.type)>=0&&this._validate(st.validateSource,`sources.${ot}`,ut,null,yt))return;this.map&&this.map._collectResourceTiming&&(ut.collectResourceTiming=!0);const vt=lo(ot,ut,this.dispatcher,this);vt.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(ot),source:vt.serialize(),sourceId:ot}));const Et=Rt=>{const At=(Rt?"symbol:":"other:")+ot,It=this._sourceCaches[At]=new st.SourceCache(At,vt,Rt);(Rt?this._symbolSourceCaches:this._otherSourceCaches)[ot]=It,It.style=this,It.onAdd(this.map)};Et(!1),ut.type!=="vector"&&ut.type!=="geojson"||Et(!0),vt.onAdd&&vt.onAdd(this.map),this._changed=!0}removeSource(ot){this._checkLoaded();const ut=this.getSource(ot);if(!ut)throw new Error("There is no source with this ID");for(const vt in this._layers)if(this._layers[vt].source===ot)return this.fire(new st.ErrorEvent(new Error(`Source "${ot}" cannot be removed while layer "${vt}" is using it.`)));if(this.terrain&&this.terrain.get().source===ot)return this.fire(new st.ErrorEvent(new Error(`Source "${ot}" cannot be removed while terrain is using it.`)));const yt=this._getSourceCaches(ot);for(const vt of yt)delete this._sourceCaches[vt.id],delete this._updatedSources[vt.id],vt.fire(new st.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:vt.getSource().id})),vt.setEventedParent(null),vt.clearTiles();return delete this._otherSourceCaches[ot],delete this._symbolSourceCaches[ot],ut.setEventedParent(null),ut.onRemove&&ut.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(ot,ut){this._checkLoaded(),this.getSource(ot).setData(ut),this._changed=!0}getSource(ot){const ut=this._getSourceCache(ot);return ut&&ut.getSource()}_getSources(){const ot=[];for(const ut in this._otherSourceCaches){const yt=this._getSourceCache(ut);yt&&ot.push(yt.getSource())}return ot}addLayer(ot,ut,yt={}){this._checkLoaded();const vt=ot.id;if(this.getLayer(vt))return void this.fire(new st.ErrorEvent(new Error(`Layer with id "${vt}" already exists on this map`)));let Et;if(ot.type==="custom"){if(yu(this,st.validateCustomStyleLayer(ot)))return;Et=st.createStyleLayer(ot)}else{if(typeof ot.source=="object"&&(this.addSource(vt,ot.source),ot=st.clone$1(ot),ot=st.extend(ot,{source:vt})),this._validate(st.validateLayer,`layers.${vt}`,ot,{arrayIndex:-1},yt))return;Et=st.createStyleLayer(ot),this._validateLayer(Et),Et.setEventedParent(this,{layer:{id:vt}}),this._serializedLayers[Et.id]=Et.serialize(),this._updateLayerCount(Et,!0)}const Rt=ut?this._order.indexOf(ut):this._order.length;if(ut&&Rt===-1)return void this.fire(new st.ErrorEvent(new Error(`Layer with id "${ut}" does not exist on this map.`)));this._order.splice(Rt,0,vt),this._layerOrderChanged=!0,this._layers[vt]=Et;const At=this._getLayerSourceCache(Et);if(this._removedLayers[vt]&&Et.source&&At&&Et.type!=="custom"){const It=this._removedLayers[vt];delete this._removedLayers[vt],It.type!==Et.type?this._updatedSources[Et.source]="clear":(this._updatedSources[Et.source]="reload",At.pause())}this._updateLayer(Et),Et.onAdd&&Et.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(ot,ut){if(this._checkLoaded(),this._changed=!0,!this._layers[ot])return void this.fire(new st.ErrorEvent(new Error(`The layer '${ot}' does not exist in the map's style and cannot be moved.`)));if(ot===ut)return;const yt=this._order.indexOf(ot);this._order.splice(yt,1);const vt=ut?this._order.indexOf(ut):this._order.length;ut&&vt===-1?this.fire(new st.ErrorEvent(new Error(`Layer with id "${ut}" does not exist on this map.`))):(this._order.splice(vt,0,ot),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(ot){this._checkLoaded();const ut=this._layers[ot];if(!ut)return void this.fire(new st.ErrorEvent(new Error(`The layer '${ot}' does not exist in the map's style and cannot be removed.`)));ut.setEventedParent(null),this._updateLayerCount(ut,!1);const yt=this._order.indexOf(ot);this._order.splice(yt,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[ot]=ut,delete this._layers[ot],delete this._serializedLayers[ot],delete this._updatedLayers[ot],delete this._updatedPaintProps[ot],ut.onRemove&&ut.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(ot){return this._layers[ot]}hasLayer(ot){return ot in this._layers}hasLayerType(ot){for(const ut in this._layers)if(this._layers[ut].type===ot)return!0;return!1}setLayerZoomRange(ot,ut,yt){this._checkLoaded();const vt=this.getLayer(ot);vt?vt.minzoom===ut&&vt.maxzoom===yt||(ut!=null&&(vt.minzoom=ut),yt!=null&&(vt.maxzoom=yt),this._updateLayer(vt)):this.fire(new st.ErrorEvent(new Error(`The layer '${ot}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(ot,ut,yt={}){this._checkLoaded();const vt=this.getLayer(ot);if(vt){if(!Tt(vt.filter,ut))return ut==null?(vt.filter=void 0,void this._updateLayer(vt)):void(this._validate(st.validateFilter,`layers.${vt.id}.filter`,ut,{layerType:vt.type},yt)||(vt.filter=st.clone$1(ut),this._updateLayer(vt)))}else this.fire(new st.ErrorEvent(new Error(`The layer '${ot}' does not exist in the map's style and cannot be filtered.`)))}getFilter(ot){const ut=this.getLayer(ot);return ut&&st.clone$1(ut.filter)}setLayoutProperty(ot,ut,yt,vt={}){this._checkLoaded();const Et=this.getLayer(ot);Et?Tt(Et.getLayoutProperty(ut),yt)||(Et.setLayoutProperty(ut,yt,vt),this._updateLayer(Et)):this.fire(new st.ErrorEvent(new Error(`The layer '${ot}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(ot,ut){const yt=this.getLayer(ot);if(yt)return yt.getLayoutProperty(ut);this.fire(new st.ErrorEvent(new Error(`The layer '${ot}' does not exist in the map's style.`)))}setPaintProperty(ot,ut,yt,vt={}){this._checkLoaded();const Et=this.getLayer(ot);Et?Tt(Et.getPaintProperty(ut),yt)||(Et.setPaintProperty(ut,yt,vt)&&this._updateLayer(Et),this._changed=!0,this._updatedPaintProps[ot]=!0):this.fire(new st.ErrorEvent(new Error(`The layer '${ot}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(ot,ut){const yt=this.getLayer(ot);return yt&&yt.getPaintProperty(ut)}setFeatureState(ot,ut){this._checkLoaded();const yt=ot.source,vt=ot.sourceLayer,Et=this.getSource(yt);if(!Et)return void this.fire(new st.ErrorEvent(new Error(`The source '${yt}' does not exist in the map's style.`)));const Rt=Et.type;if(Rt==="geojson"&&vt)return void this.fire(new st.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(Rt==="vector"&&!vt)return void this.fire(new st.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));ot.id===void 0&&this.fire(new st.ErrorEvent(new Error("The feature id parameter must be provided.")));const At=this._getSourceCaches(yt);for(const It of At)It.setFeatureState(vt,ot.id,ut)}removeFeatureState(ot,ut){this._checkLoaded();const yt=ot.source,vt=this.getSource(yt);if(!vt)return void this.fire(new st.ErrorEvent(new Error(`The source '${yt}' does not exist in the map's style.`)));const Et=vt.type,Rt=Et==="vector"?ot.sourceLayer:void 0;if(Et==="vector"&&!Rt)return void this.fire(new st.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(ut&&typeof ot.id!="string"&&typeof ot.id!="number")return void this.fire(new st.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const At=this._getSourceCaches(yt);for(const It of At)It.removeFeatureState(Rt,ot.id,ut)}getFeatureState(ot){this._checkLoaded();const ut=ot.source,yt=ot.sourceLayer,vt=this.getSource(ut);if(vt){if(vt.type!=="vector"||yt)return ot.id===void 0&&this.fire(new st.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(ut)[0].getFeatureState(yt,ot.id);this.fire(new st.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new st.ErrorEvent(new Error(`The source '${ut}' does not exist in the map's style.`)))}getTransition(){return st.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const ot={};for(const ut in this._sourceCaches){const yt=this._sourceCaches[ut].getSource();ot[yt.id]||(ot[yt.id]=yt.serialize())}return st.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:ot,layers:this._serializeLayers(this._order)},ut=>ut!==void 0)}_updateLayer(ot){this._updatedLayers[ot.id]=!0;const ut=this._getLayerSourceCache(ot);ot.source&&!this._updatedSources[ot.source]&&ut&&ut.getSource().type!=="raster"&&(this._updatedSources[ot.source]="reload",ut.pause()),this._changed=!0,ot.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(ot){const ut=Rt=>this._layers[Rt].type==="fill-extrusion",yt={},vt=[];for(let Rt=this._order.length-1;Rt>=0;Rt--){const At=this._order[Rt];if(ut(At)){yt[At]=Rt;for(const It of ot){const Nt=It[At];if(Nt)for(const $t of Nt)vt.push($t)}}}vt.sort((Rt,At)=>At.intersectionZ-Rt.intersectionZ);const Et=[];for(let Rt=this._order.length-1;Rt>=0;Rt--){const At=this._order[Rt];if(ut(At))for(let It=vt.length-1;It>=0;It--){const Nt=vt[It].feature;if(yt[Nt.layer.id]<Rt)break;Et.push(Nt),vt.pop()}else for(const It of ot){const Nt=It[At];if(Nt)for(const $t of Nt)Et.push($t.feature)}}return Et}queryRenderedFeatures(ot,ut,yt){ut&&ut.filter&&this._validate(st.validateFilter,"queryRenderedFeatures.filter",ut.filter,null,ut);const vt={};if(ut&&ut.layers){if(!Array.isArray(ut.layers))return this.fire(new st.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const It of ut.layers){const Nt=this._layers[It];if(!Nt)return this.fire(new st.ErrorEvent(new Error(`The layer '${It}' does not exist in the map's style and cannot be queried for features.`))),[];vt[Nt.source]=!0}}const Et=[];ut.availableImages=this._availableImages;const Rt=ut&&ut.layers?ut.layers.some(It=>{const Nt=this.getLayer(It);return Nt&&Nt.is3D()}):this.has3DLayers(),At=ln.createFromScreenPoints(ot,yt);for(const It in this._sourceCaches){const Nt=this._sourceCaches[It].getSource().id;ut.layers&&!vt[Nt]||Et.push(qo(this._sourceCaches[It],this._layers,this._serializedLayers,At,ut,yt,Rt,!!this.map._showQueryGeometry))}return this.placement&&Et.push(function(It,Nt,$t,Vt,er,ir,sr){const or={},lr=ir.queryRenderedSymbols(Vt),Gt=[];for(const nr of Object.keys(lr).map(Number))Gt.push(sr[nr]);Gt.sort($s);for(const nr of Gt){const hr=nr.featureIndex.lookupSymbolFeatures(lr[nr.bucketInstanceId],Nt,nr.bucketIndex,nr.sourceLayerIndex,er.filter,er.layers,er.availableImages,It);for(const dr in hr){const br=or[dr]=or[dr]||[],Cr=hr[dr];Cr.sort((Tr,jr)=>{const Ir=nr.featureSortOrder;if(Ir){const Ur=Ir.indexOf(Tr.featureIndex);return Ir.indexOf(jr.featureIndex)-Ur}return jr.featureIndex-Tr.featureIndex});for(const Tr of Cr)br.push(Tr)}}for(const nr in or)or[nr].forEach(hr=>{const dr=hr.feature,br=$t(It[nr]);if(!br)return;const Cr=br.getFeatureState(dr.layer["source-layer"],dr.id);dr.source=dr.layer.source,dr.layer["source-layer"]&&(dr.sourceLayer=dr.layer["source-layer"]),dr.state=Cr});return or}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),At.screenGeometry,ut,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Et)}querySourceFeatures(ot,ut){ut&&ut.filter&&this._validate(st.validateFilter,"querySourceFeatures.filter",ut.filter,null,ut);const yt=this._getSourceCaches(ot);let vt=[];for(const Et of yt)vt=vt.concat(as(Et,ut));return vt}addSourceType(ot,ut,yt){return Fl.getSourceType(ot)?yt(new Error(`A source type called "${ot}" already exists.`)):(Fl.setSourceType(ot,ut),ut.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:ot,url:ut.workerSourceURL},yt):yt(null,null))}getLight(){return this.light.getLight()}setLight(ot,ut={}){this._checkLoaded();const yt=this.light.getLight();let vt=!1;for(const Rt in ot)if(!Tt(ot[Rt],yt[Rt])){vt=!0;break}if(!vt)return;const Et=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(ot,ut),this.light.updateTransitions(Et)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(ot,ut=1){if(this._checkLoaded(),!ot)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let yt=ot;if(ut===1){if(typeof yt.source=="object"){const vt="terrain-dem-src";this.addSource(vt,yt.source),yt=st.clone$1(yt),yt=st.extend(yt,{source:vt})}if(this._validate(st.validateTerrain,"terrain",yt))return}if(!this.terrain||this.terrain&&ut!==this.terrain.drapeRenderMode){if(!yt)return;this._createTerrain(yt,ut)}else{const vt=this.terrain,Et=vt.get();for(const Rt of Object.keys(st.spec.terrain))!yt.hasOwnProperty(Rt)&&st.spec.terrain[Rt].default&&(yt[Rt]=st.spec.terrain[Rt].default);for(const Rt in yt)if(!Tt(yt[Rt],Et[Rt])){vt.set(yt),this.stylesheet.terrain=yt;const At=this._setTransitionParameters({duration:0});vt.updateTransitions(At);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(ot){const ut=this.fog=new Gr(ot,this.map.transform);this.stylesheet.fog=ot;const yt=this._setTransitionParameters({duration:0});ut.updateTransitions(yt)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const ot of this.map._markers)ot._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(ot){if(this._checkLoaded(),!ot)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const ut=this.fog,yt=ut.get();Object.keys(ot).length===0&&ut.set(ot);for(const vt in ot)if(!Tt(ot[vt],yt[vt])){ut.set(ot),this.stylesheet.fog=ot;const Et=this._setTransitionParameters({duration:0});ut.updateTransitions(Et);break}}else this._createFog(ot);this._markersNeedUpdate=!0}_setTransitionParameters(ot){return{now:st.exported.now(),transition:st.extend(ot,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const ot=this._order.filter(yt=>this.isLayerDraped(this._layers[yt])),ut=this._order.filter(yt=>!this.isLayerDraped(this._layers[yt]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...ot),this._drapedFirstOrder.push(...ut)}_createTerrain(ot,ut){const yt=this.terrain=new Dr(ot,ut);this.stylesheet.terrain=ot,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const vt=this._setTransitionParameters({duration:0});yt.updateTransitions(vt)}_force3DLayerUpdate(){for(const ot in this._layers){const ut=this._layers[ot];ut.type==="fill-extrusion"&&this._updateLayer(ut)}}_forceSymbolLayerUpdate(){for(const ot in this._layers){const ut=this._layers[ot];ut.type==="symbol"&&this._updateLayer(ut)}}_validate(ot,ut,yt,vt,Et={}){return(!Et||Et.validate!==!1)&&yu(this,ot.call(st.validateStyle,st.extend({key:ut,style:this.serialize(),value:yt,styleSpec:st.spec},vt)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),st.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const ot in this._layers)this._layers[ot].setEventedParent(null);for(const ot in this._sourceCaches)this._sourceCaches[ot].clearTiles(),this._sourceCaches[ot].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(ot){const ut=this._getSourceCaches(ot);for(const yt of ut)yt.clearTiles()}_reloadSource(ot){const ut=this._getSourceCaches(ot);for(const yt of ut)yt.resume(),yt.reload()}_reloadSources(){for(const ot of this._getSources())ot.reload&&ot.reload()}_updateSources(ot){for(const ut in this._sourceCaches)this._sourceCaches[ut].update(ot)}_generateCollisionBoxes(){for(const ot in this._sourceCaches){const ut=this._sourceCaches[ot];ut.resume(),ut.reload()}}_updatePlacement(ot,ut,yt,vt,Et=!1){let Rt=!1,At=!1;const It={};for(const Nt of this._order){const $t=this._layers[Nt];if($t.type!=="symbol")continue;if(!It[$t.source]){const er=this._getLayerSourceCache($t);if(!er)continue;It[$t.source]=er.getRenderableIds(!0).map(ir=>er.getTileByID(ir)).sort((ir,sr)=>sr.tileID.overscaledZ-ir.tileID.overscaledZ||(ir.tileID.isLessThan(sr.tileID)?-1:1))}const Vt=this.crossTileSymbolIndex.addLayer($t,It[$t.source],ot.center.lng,ot.projection);Rt=Rt||Vt}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),Et=Et||this._layerOrderChanged||yt===0,this._layerOrderChanged&&this.fire(new st.Event("neworder")),(Et||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(st.exported.now(),ot.zoom))&&(this.pauseablePlacement=new py(ot,this._order,Et,ut,yt,vt,this.placement,this.fog&&ot.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,It),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(st.exported.now()),At=!0),Rt&&this.pauseablePlacement.placement.setStale()),At||Rt)for(const Nt of this._order){const $t=this._layers[Nt];$t.type==="symbol"&&this.placement.updateLayerOpacities($t,It[$t.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(st.exported.now())}_releaseSymbolFadeTiles(){for(const ot in this._sourceCaches)this._sourceCaches[ot].releaseSymbolFadeTiles()}getImages(ot,ut,yt){this.imageManager.getImages(ut.icons,yt),this._updateTilesForChangedImages();const vt=Et=>{Et&&Et.setDependencies(ut.tileID.key,ut.type,ut.icons)};vt(this._otherSourceCaches[ut.source]),vt(this._symbolSourceCaches[ut.source])}getGlyphs(ot,ut,yt){this.glyphManager.getGlyphs(ut.stacks,yt)}getResource(ot,ut,yt){return st.makeRequest(ut,yt)}_getSourceCache(ot){return this._otherSourceCaches[ot]}_getLayerSourceCache(ot){return ot.type==="symbol"?this._symbolSourceCaches[ot.source]:this._otherSourceCaches[ot.source]}_getSourceCaches(ot){const ut=[];return this._otherSourceCaches[ot]&&ut.push(this._otherSourceCaches[ot]),this._symbolSourceCaches[ot]&&ut.push(this._symbolSourceCaches[ot]),ut}_isSourceCacheLoaded(ot){const ut=this._getSourceCaches(ot);return ut.length===0?(this.fire(new st.ErrorEvent(new Error(`There is no source with ID '${ot}'`))),!1):ut.every(yt=>yt.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Fl.getSourceType=function(ft){return no[ft]},Fl.setSourceType=function(ft,ot){no[ft]=ot},Fl.registerForPluginStateChange=st.registerForPluginStateChange;var yy=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,Iu="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",ru=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,Pp=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,nu=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let dm={},Yu={};const Ip=[];Qu(yy,Ip),Qu(ru,Ip),Qu(Pp,Ip),Qu(nu,Ip),dm=To("",ru),Yu=To(nu,Pp);const U_=To(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),pm=yy,_y=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var xy={background:To(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:To(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:To(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:To("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:To(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:To(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:To("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:To("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:To("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:To(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:To(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:To(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:To(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:To(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:To(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:To(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:To(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:To(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:To(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:To(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:To(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:To(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:To(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:To(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:To(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:To(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Iu),skyboxGradient:To(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Iu),skyboxCapture:To(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:To(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:To(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function Qu(ft,ot){const ut=ft.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let yt of ut)if(yt=yt.trim(),yt[0]==="#"&&yt.includes("if")&&!yt.includes("endif")){yt=yt.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const vt=yt.split(" ");for(const Et of vt)ot.includes(Et)||ot.push(Et)}}function To(ft,ot){const ut=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,yt=ot.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),vt={},Et=[...Ip];return Qu(ft,Et),Qu(ot,Et),{fragmentSource:ft=ft.replace(ut,(Rt,At,It,Nt,$t)=>(vt[$t]=!0,At==="define"?`
#ifndef HAS_UNIFORM_u_${$t}
varying ${It} ${Nt} ${$t};
#else
uniform ${It} ${Nt} u_${$t};
#endif
`:`
#ifdef HAS_UNIFORM_u_${$t}
    ${It} ${Nt} ${$t} = u_${$t};
#endif
`)),vertexSource:ot=ot.replace(ut,(Rt,At,It,Nt,$t)=>{const Vt=Nt==="float"?"vec2":"vec4",er=$t.match(/color/)?"color":Vt;return vt[$t]?At==="define"?`
#ifndef HAS_UNIFORM_u_${$t}
uniform lowp float u_${$t}_t;
attribute ${It} ${Vt} a_${$t};
varying ${It} ${Nt} ${$t};
#else
uniform ${It} ${Nt} u_${$t};
#endif
`:er==="vec4"?`
#ifndef HAS_UNIFORM_u_${$t}
    ${$t} = a_${$t};
#else
    ${It} ${Nt} ${$t} = u_${$t};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$t}
    ${$t} = unpack_mix_${er}(a_${$t}, u_${$t}_t);
#else
    ${It} ${Nt} ${$t} = u_${$t};
#endif
`:At==="define"?`
#ifndef HAS_UNIFORM_u_${$t}
uniform lowp float u_${$t}_t;
attribute ${It} ${Vt} a_${$t};
#else
uniform ${It} ${Nt} u_${$t};
#endif
`:er==="vec4"?`
#ifndef HAS_UNIFORM_u_${$t}
    ${It} ${Nt} ${$t} = a_${$t};
#else
    ${It} ${Nt} ${$t} = u_${$t};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$t}
    ${It} ${Nt} ${$t} = unpack_mix_${er}(a_${$t}, u_${$t}_t);
#else
    ${It} ${Nt} ${$t} = u_${$t};
#endif
`}),staticAttributes:yt,usedDefines:Et}}class cv{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(ot,ut,yt,vt,Et,Rt,At){this.context=ot;let It=this.boundPaintVertexBuffers.length!==vt.length;for(let $t=0;!It&&$t<vt.length;$t++)this.boundPaintVertexBuffers[$t]!==vt[$t]&&(It=!0);let Nt=this.boundDynamicVertexBuffers.length!==At.length;for(let $t=0;!Nt&&$t<At.length;$t++)this.boundDynamicVertexBuffers[$t]!==At[$t]&&(Nt=!0);if(!ot.extVertexArrayObject||!this.vao||this.boundProgram!==ut||this.boundLayoutVertexBuffer!==yt||It||Nt||this.boundIndexBuffer!==Et||this.boundVertexOffset!==Rt)this.freshBind(ut,yt,vt,Et,Rt,At);else{ot.bindVertexArrayOES.set(this.vao);for(const $t of At)$t&&$t.bind();Et&&Et.dynamicDraw&&Et.bind()}}freshBind(ot,ut,yt,vt,Et,Rt){let At;const It=ot.numAttributes,Nt=this.context,$t=Nt.gl;if(Nt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Nt.extVertexArrayObject.createVertexArrayOES(),Nt.bindVertexArrayOES.set(this.vao),At=0,this.boundProgram=ot,this.boundLayoutVertexBuffer=ut,this.boundPaintVertexBuffers=yt,this.boundIndexBuffer=vt,this.boundVertexOffset=Et,this.boundDynamicVertexBuffers=Rt;else{At=Nt.currentNumAttributes||0;for(let Vt=It;Vt<At;Vt++)$t.disableVertexAttribArray(Vt)}ut.enableAttributes($t,ot),ut.bind(),ut.setVertexAttribPointers($t,ot,Et);for(const Vt of yt)Vt.enableAttributes($t,ot),Vt.bind(),Vt.setVertexAttribPointers($t,ot,Et);for(const Vt of Rt)Vt&&(Vt.enableAttributes($t,ot),Vt.bind(),Vt.setVertexAttribPointers($t,ot,Et));vt&&vt.bind(),Nt.currentNumAttributes=It}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function vy(ft,ot){const ut=Math.pow(2,ot.canonical.z),yt=ot.canonical.y;return[new st.MercatorCoordinate(0,yt/ut).toLngLat().lat,new st.MercatorCoordinate(0,(yt+1)/ut).toLngLat().lat]}function V_(ft,ot,ut,yt,vt,Et,Rt){const At=ft.context,It=At.gl,Nt=ut.fbo;if(!Nt)return;ft.prepareDrawTile();const $t=ft.useProgram("hillshade");At.activeTexture.set(It.TEXTURE0),It.bindTexture(It.TEXTURE_2D,Nt.colorAttachment.get());const Vt=((or,lr,Gt,nr)=>{const hr=Gt.paint.get("hillshade-shadow-color"),dr=Gt.paint.get("hillshade-highlight-color"),br=Gt.paint.get("hillshade-accent-color");let Cr=Gt.paint.get("hillshade-illumination-direction")*(Math.PI/180);Gt.paint.get("hillshade-illumination-anchor")==="viewport"&&(Cr-=or.transform.angle);const Tr=!or.options.moving;return{u_matrix:nr||or.transform.calculateProjMatrix(lr.tileID.toUnwrapped(),Tr),u_image:0,u_latrange:vy(0,lr.tileID),u_light:[Gt.paint.get("hillshade-exaggeration"),Cr],u_shadow:hr,u_highlight:dr,u_accent:br}})(ft,ut,yt,ft.terrain?ot.projMatrix:null);ft.prepareDrawProgram(At,$t,ot.toUnwrapped());const{tileBoundsBuffer:er,tileBoundsIndexBuffer:ir,tileBoundsSegments:sr}=ft.getTileBoundsBuffers(ut);$t.draw(At,It.TRIANGLES,vt,Et,Rt,st.CullFaceMode.disabled,Vt,yt.id,er,ir,sr)}function wy(ft,ot,ut){if(!ot.needsDEMTextureUpload)return;const yt=ft.context,vt=yt.gl;yt.pixelStoreUnpackPremultiplyAlpha.set(!1),ot.demTexture=ot.demTexture||ft.getTileTexture(ut.stride);const Et=ut.getPixels();ot.demTexture?ot.demTexture.update(Et,{premultiply:!1}):ot.demTexture=new st.Texture(yt,Et,vt.RGBA,{premultiply:!1}),ot.needsDEMTextureUpload=!1}function G_(ft,ot,ut,yt,vt,Et){const Rt=ft.context,At=Rt.gl;if(!ot.dem)return;const It=ot.dem;if(Rt.activeTexture.set(At.TEXTURE1),wy(ft,ot,It),!ot.demTexture)return;ot.demTexture.bind(At.NEAREST,At.CLAMP_TO_EDGE);const Nt=It.dim;Rt.activeTexture.set(At.TEXTURE0);let $t=ot.fbo;if(!$t){const sr=new st.Texture(Rt,{width:Nt,height:Nt,data:null},At.RGBA);sr.bind(At.LINEAR,At.CLAMP_TO_EDGE),$t=ot.fbo=Rt.createFramebuffer(Nt,Nt,!0),$t.colorAttachment.set(sr.texture)}Rt.bindFramebuffer.set($t.framebuffer),Rt.viewport.set([0,0,Nt,Nt]);const{tileBoundsBuffer:Vt,tileBoundsIndexBuffer:er,tileBoundsSegments:ir}=ft.getMercatorTileBoundsBuffers();ft.useProgram("hillshadePrepare").draw(Rt,At.TRIANGLES,yt,vt,Et,st.CullFaceMode.disabled,((sr,or)=>{const lr=or.stride,Gt=st.create();return st.ortho(Gt,0,st.EXTENT,-st.EXTENT,0,0,1),st.translate(Gt,Gt,[0,-st.EXTENT,0]),{u_matrix:Gt,u_image:1,u_dimension:[lr,lr],u_zoom:sr.overscaledZ,u_unpack:or.unpackVector}})(ot.tileID,It),ut.id,Vt,er,ir),ot.needsHillshadePrepare=!1}const by=ft=>({u_matrix:new st.UniformMatrix4f(ft),u_image0:new st.Uniform1i(ft),u_skirt_height:new st.Uniform1f(ft)}),Ju=(ft,ot)=>({u_matrix:ft,u_image0:0,u_skirt_height:ot}),fm=(ft,ot,ut,yt,vt,Et,Rt,At,It,Nt,$t,Vt,er,ir,sr)=>({u_proj_matrix:Float32Array.from(ft),u_globe_matrix:ot,u_normalize_matrix:Float32Array.from(yt),u_merc_matrix:ut,u_zoom_transition:vt,u_merc_center:Et,u_image0:0,u_frustum_tl:Rt,u_frustum_tr:At,u_frustum_br:It,u_frustum_bl:Nt,u_globe_pos:$t,u_globe_radius:Vt,u_viewport:er,u_grid_matrix:sr?Float32Array.from(sr):new Float32Array(9),u_skirt_height:ir});function _h(ft,ot){return ft!=null&&ot!=null&&!(!ft.hasData()||!ot.hasData())&&ft.demTexture!=null&&ot.demTexture!=null&&ft.tileID.key!==ot.tileID.key}const iu=new class{constructor(){this.operations={}}newMorphing(ft,ot,ut,yt,vt){if(ft in this.operations){const Et=this.operations[ft];Et.to.tileID.key!==ut.tileID.key&&(Et.queued=ut)}else this.operations[ft]={startTime:yt,phase:0,duration:vt,from:ot,to:ut,queued:null}}getMorphValuesForProxy(ft){if(!(ft in this.operations))return null;const ot=this.operations[ft];return{from:ot.from,to:ot.to,phase:ot.phase}}update(ft){for(const ot in this.operations){const ut=this.operations[ot];for(ut.phase=(ft-ut.startTime)/ut.duration;ut.phase>=1||!this._validOp(ut);)if(!this._nextOp(ut,ft)){delete this.operations[ot];break}}}_nextOp(ft,ot){return!!ft.queued&&(ft.from=ft.to,ft.to=ft.queued,ft.queued=null,ft.phase=0,ft.startTime=ot,!0)}_validOp(ft){return ft.from.hasData()&&ft.to.hasData()}},Mu={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function mm(ft){return 6*Math.pow(1.5,22-ft)}function H_(ft,ot){const ut=1<<ft.z;return!ot&&(ft.x===0||ft.x===ut-1)||ft.y===0||ft.y===ut-1}const Mp=ft=>({u_matrix:ft});function Ey(ft,ot,ut,yt,vt){if(vt>0){const Et=st.exported.now(),Rt=(Et-ft.timeAdded)/vt,At=ot?(Et-ot.timeAdded)/vt:-1,It=ut.getSource(),Nt=yt.coveringZoomLevel({tileSize:It.tileSize,roundZoom:It.roundZoom}),$t=!ot||Math.abs(ot.tileID.overscaledZ-Nt)>Math.abs(ft.tileID.overscaledZ-Nt),Vt=$t&&ft.refreshedUponExpiration?1:st.clamp($t?Rt:1-At,0,1);return ft.refreshedUponExpiration&&Rt>=1&&(ft.refreshedUponExpiration=!1),ot?{opacity:1,mix:1-Vt}:{opacity:Vt,mix:0}}return{opacity:1,mix:0}}class Sy extends st.SourceCache{constructor(ot){const ut={type:"raster-dem",maxzoom:ot.transform.maxZoom},yt=new Or(qu(),null),vt=lo("mock-dem",ut,yt,ot.style);super("mock-dem",vt,!1),vt.setEventedParent(this),this._sourceLoaded=!0}_loadTile(ot,ut){ot.state="loaded",ut(null)}}class gm extends st.SourceCache{constructor(ot){const ut=lo("proxy",{type:"geojson",maxzoom:ot.transform.maxZoom},new Or(qu(),null),ot.style);super("proxy",ut,!1),ut.setEventedParent(this),this.map=this.getSource().map=ot,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(ot,ut,yt){if(ot.freezeTileCoverage)return;this.transform=ot;const vt=ot.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((Et,Rt)=>{if(Et[Rt.key]="",!this._tiles[Rt.key]){const At=new st.Tile(Rt,this._source.tileSize*Rt.overscaleFactor(),ot.tileZoom);At.state="loaded",this._tiles[Rt.key]=At}return Et},{});for(const Et in this._tiles)Et in vt||(this.freeFBO(Et),this._tiles[Et].unloadVectorData(),delete this._tiles[Et])}freeFBO(ot){const ut=this.proxyCachedFBO[ot];if(ut!==void 0){const yt=Object.values(ut);this.renderCachePool.push(...yt),delete this.proxyCachedFBO[ot]}}deallocRenderCache(){this.renderCache.forEach(ot=>ot.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class ym extends st.OverscaledTileID{constructor(ot,ut,yt){super(ot.overscaledZ,ot.wrap,ot.canonical.z,ot.canonical.x,ot.canonical.y),this.proxyTileKey=ut,this.projMatrix=yt}}class Ty extends st.Elevation{constructor(ot,ut){super(),this.painter=ot,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[yt,vt,Et]=function(It){const Nt=new st.StructArrayLayout2i4,$t=new st.StructArrayLayout3ui6,Vt=131;Nt.reserve(17161),$t.reserve(33800);const er=st.EXTENT/128,ir=st.EXTENT+er/2,sr=ir+er;for(let lr=-er;lr<sr;lr+=er)for(let Gt=-er;Gt<sr;Gt+=er){const nr=Gt<0||Gt>ir||lr<0||lr>ir?24575:0,hr=st.clamp(Math.round(Gt),0,st.EXTENT),dr=st.clamp(Math.round(lr),0,st.EXTENT);Nt.emplaceBack(hr+nr,dr)}const or=(lr,Gt)=>{const nr=Gt*Vt+lr;$t.emplaceBack(nr+1,nr,nr+Vt),$t.emplaceBack(nr+Vt,nr+Vt+1,nr+1)};for(let lr=1;lr<129;lr++)for(let Gt=1;Gt<129;Gt++)or(Gt,lr);return[0,129].forEach(lr=>{for(let Gt=0;Gt<130;Gt++)or(Gt,lr),or(lr,Gt)}),[Nt,$t,32768]}(),Rt=ot.context;this.gridBuffer=Rt.createVertexBuffer(yt,st.posAttributes.members),this.gridIndexBuffer=Rt.createIndexBuffer(vt),this.gridSegments=st.SegmentVector.simpleSegment(0,0,yt.length,vt.length),this.gridNoSkirtSegments=st.SegmentVector.simpleSegment(0,0,yt.length,Et),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new gm(ut.map),this.orthoMatrix=st.create(),st.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,st.EXTENT,0,st.EXTENT,0,1);const At=Rt.gl;this._overlapStencilMode=new st.StencilMode({func:At.GEQUAL,mask:255},0,255,At.KEEP,At.KEEP,At.REPLACE),this._previousZoom=ot.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=ut,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Sy(ut.map)}set style(ot){ot.on("data",this._onStyleDataEvent.bind(this)),ot.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=ot,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(ot,ut,yt){if(ot&&ot.terrain){this._style!==ot&&(this.style=ot),this.enabled=!0;const vt=ot.terrain.properties;this.sourceCache=ot.terrain.drapeRenderMode===0?this._mockSourceCache:ot._getSourceCache(vt.get("source")),this._exaggeration=vt.get("exaggeration");const Et=()=>{this.sourceCache.used&&st.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const Rt=this.getScaledDemTileSize();this.sourceCache.update(ut,Rt,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,Et(),this._initializing=!0),Et(),ut.updateElevation(!0,yt),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(ut),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(ot){this._findCoveringTileCache[ot]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const ot=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||ot.efficiency!==100&&st.warnOnce(`Terrain render cache efficiency is not optimal (${ot.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${ot.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(ot){ot.coord&&ot.dataType==="source"?this._clearRenderCacheForTile(ot.sourceCacheId,ot.coord):ot.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const ot in this._style._sourceCaches)this._style._sourceCaches[ot].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(ot=>ot.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const ot=2*this.proxySourceCache.getSource().tileSize;return[ot,ot]}set useVertexMorphing(ot){this._useVertexMorphing=ot}updateTileBinding(ot){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const ut=this.proxySourceCache,yt=this.painter.transform;this._initializing&&(this._initializing=yt._centerAltitude===0&&this.getAtPointOrZero(st.MercatorCoordinate.fromLngLat(yt.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const vt=this.proxyCoords=ut.getIds().map(It=>{const Nt=ut.getTileByID(It).tileID;return Nt.projMatrix=yt.calculateProjMatrix(Nt.toUnwrapped()),Nt});(function(It,Nt){const $t=Nt.transform.pointCoordinate(Nt.transform.getCameraPoint()),Vt=new st.Point($t.x,$t.y);It.sort((er,ir)=>{if(ir.overscaledZ-er.overscaledZ)return ir.overscaledZ-er.overscaledZ;const sr=new st.Point(er.canonical.x+(1<<er.canonical.z)*er.wrap,er.canonical.y),or=new st.Point(ir.canonical.x+(1<<ir.canonical.z)*ir.wrap,ir.canonical.y),lr=Vt.mult(1<<er.canonical.z);return lr.x-=.5,lr.y-=.5,lr.distSqr(sr)-lr.distSqr(or)})})(vt,this.painter),this._previousZoom=yt.zoom;const Et=this.proxyToSource||{};this.proxyToSource={},vt.forEach(It=>{this.proxyToSource[It.key]={}}),this.terrainTileForTile={};const Rt=this._style._sourceCaches;for(const It in Rt){const Nt=Rt[It];if(!Nt.used||(Nt!==this.sourceCache&&this.resetTileLookupCache(Nt.id),this._setupProxiedCoordsForOrtho(Nt,ot[It],Et),Nt.usedForTerrain))continue;const $t=ot[It];Nt.getSource().reparseOverscaled&&this._assignTerrainTiles($t)}this.proxiedCoords[ut.id]=vt.map(It=>new ym(It,It.key,this.orthoMatrix)),this._assignTerrainTiles(vt),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(Et),this.renderingToTexture=!1,this._updateTimestamp=st.exported.now();const At={};this._visibleDemTiles=[];for(const It of this.proxyCoords){const Nt=this.terrainTileForTile[It.key];if(!Nt)continue;const $t=Nt.tileID.key;$t in At||(this._visibleDemTiles.push(Nt),At[$t]=$t)}}_assignTerrainTiles(ot){this._initializing||ot.forEach(ut=>{if(this.terrainTileForTile[ut.key])return;const yt=this._findTileCoveringTileID(ut,this.sourceCache);yt&&(this.terrainTileForTile[ut.key]=yt)})}_prepareDEMTextures(){const ot=this.painter.context,ut=ot.gl;for(const yt in this.terrainTileForTile){const vt=this.terrainTileForTile[yt],Et=vt.dem;!Et||vt.demTexture&&!vt.needsDEMTextureUpload||(ot.activeTexture.set(ut.TEXTURE1),wy(this.painter,vt,Et))}}_prepareDemTileUniforms(ot,ut,yt,vt){if(!ut||ut.demTexture==null)return!1;const Et=ot.tileID.canonical,Rt=Math.pow(2,ut.tileID.canonical.z-Et.z),At=vt||"";return yt[`u_dem_tl${At}`]=[Et.x*Rt%1,Et.y*Rt%1],yt[`u_dem_scale${At}`]=Rt,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const ot=this.painter.context,ut=ot.gl;if(!this._emptyDepthBufferTexture){const yt=new st.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new st.Texture(ot,yt,ut.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let ot=0;const ut=this._visibleDemTiles.reduce((yt,vt)=>{if(!vt.dem)return yt;const Et=vt.dem.tree.minimums[0];return Et>0&&ot++,yt+Et},0);return ot?ut/ot:0}_updateEmptyDEMTexture(){const ot=this.painter.context,ut=ot.gl;ot.activeTexture.set(ut.TEXTURE2);const yt=this._getLoadedAreaMinimum(),vt=new st.RGBAImage({width:1,height:1},new Uint8Array(st.DEMData.pack(yt,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let Et=this._emptyDEMTexture;return Et?Et.update(vt,{premultiply:!1}):Et=this._emptyDEMTexture=new st.Texture(ot,vt,ut.RGBA,{premultiply:!1}),Et}setupElevationDraw(ot,ut,yt){const vt=this.painter.context,Et=vt.gl,Rt=(At=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:st.DEMData.getUnpackVector(At),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var At;Rt.u_dem_size=this.sourceCache.getSource().tileSize,Rt.u_exaggeration=this.exaggeration();let It=null,Nt=null,$t=1;if(yt&&yt.morphing&&this._useVertexMorphing){const Vt=yt.morphing.srcDemTile,er=yt.morphing.dstDemTile;$t=yt.morphing.phase,Vt&&er&&(this._prepareDemTileUniforms(ot,Vt,Rt,"_prev")&&(Nt=Vt),this._prepareDemTileUniforms(ot,er,Rt)&&(It=er))}if(Nt&&It?(vt.activeTexture.set(Et.TEXTURE2),It.demTexture.bind(Et.NEAREST,Et.CLAMP_TO_EDGE,Et.NEAREST),vt.activeTexture.set(Et.TEXTURE4),Nt.demTexture.bind(Et.NEAREST,Et.CLAMP_TO_EDGE,Et.NEAREST),Rt.u_dem_lerp=$t):(It=this.terrainTileForTile[ot.tileID.key],vt.activeTexture.set(Et.TEXTURE2),(this._prepareDemTileUniforms(ot,It,Rt)?It.demTexture:this.emptyDEMTexture).bind(Et.NEAREST,Et.CLAMP_TO_EDGE)),vt.activeTexture.set(Et.TEXTURE3),yt&&yt.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(Et.NEAREST,Et.CLAMP_TO_EDGE),this._depthFBO&&(Rt.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(Et.NEAREST,Et.CLAMP_TO_EDGE),Rt.u_depth_size_inv=[1,1]),yt&&yt.useMeterToDem&&It){const Vt=(1<<It.tileID.canonical.z)*st.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;Rt.u_meter_to_dem=Vt}if(yt&&yt.labelPlaneMatrixInv&&(Rt.u_label_plane_matrix_inv=yt.labelPlaneMatrixInv),ut.setTerrainUniformValues(vt,Rt),this.painter.transform.projection.name==="globe"){const Vt=this.globeUniformValues(this.painter.transform,ot.tileID.canonical,yt&&yt.useDenormalizedUpVectorScale);ut.setGlobeUniformValues(vt,Vt)}}globeUniformValues(ot,ut,yt){const vt=ot.projection;return{u_tile_tl_up:vt.upVector(ut,0,0),u_tile_tr_up:vt.upVector(ut,st.EXTENT,0),u_tile_br_up:vt.upVector(ut,st.EXTENT,st.EXTENT),u_tile_bl_up:vt.upVector(ut,0,st.EXTENT),u_tile_up_scale:yt?st.globeMetersToEcef(1):vt.upVectorScale(ut,ot.center.lat,ot.worldSize).metersToTile}}renderToBackBuffer(ot){const ut=this.painter,yt=this.painter.context;ot.length!==0&&(yt.bindFramebuffer.set(null),yt.viewport.set([0,0,ut.width,ut.height]),ut.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(vt,Et,Rt,At,It){if(vt.transform.projection.name==="globe")(function(Nt,$t,Vt,er,ir){const sr=Nt.context,or=sr.gl;let lr,Gt;const nr=Nt.options.showTerrainWireframe?2:0,hr=Nt.transform,dr=st.globeUseCustomAntiAliasing(Nt,sr,hr),br=(vn,Fr)=>{if(Gt===vn)return;const cn=[Mu[vn],"PROJECTION_GLOBE_VIEW"];dr&&cn.push("CUSTOM_ANTIALIASING"),Fr&&cn.push(Mu[nr]),lr=Nt.useProgram("globeRaster",null,cn),Gt=vn},Cr=Nt.colorModeForRenderPass(),Tr=new st.DepthMode(or.LEQUAL,st.DepthMode.ReadWrite,Nt.depthRangeFor3D);iu.update(ir);const jr=st.calculateGlobeMercatorMatrix(hr),Ir=[st.mercatorXfromLng(hr.center.lng),st.mercatorYfromLat(hr.center.lat)],Ur=nr?[!1,!0]:[!1],wn=Nt.globeSharedBuffers,Nr=[hr.width*st.exported.devicePixelRatio,hr.height*st.exported.devicePixelRatio],hn=Float32Array.from(hr.globeMatrix),Hr={useDenormalizedUpVectorScale:!0};if(Ur.forEach(vn=>{const Fr=Nt.transform,cn=mm(Fr.zoom)*$t.exaggeration();Gt=-1;const En=vn?or.LINES:or.TRIANGLES;for(const yn of er){const Sn=Vt.getTile(yn),Gn=st.StencilMode.disabled,Yn=$t.prevTerrainTileForTile[yn.key],On=$t.terrainTileForTile[yn.key];_h(Yn,On)&&iu.newMorphing(yn.key,Yn,On,ir,250),sr.activeTexture.set(or.TEXTURE0),Sn.texture.bind(or.LINEAR,or.CLAMP_TO_EDGE);const Zn=iu.getMorphValuesForProxy(yn.key),fo=Zn?1:0;Zn&&st.extend$1(Hr,{morphing:{srcDemTile:Zn.from,dstDemTile:Zn.to,phase:st.easeCubicInOut(Zn.phase)}});const co=st.tileCornersToBounds(yn.canonical),Vn=st.getLatitudinalLod(co.getCenter().lat),Co=st.getGridMatrix(yn.canonical,co,Vn,Fr.worldSize/Fr._pixelsPerMercatorPixel),Po=st.globeNormalizeECEF(st.globeTileBounds(yn.canonical)),Io=fm(Fr.projMatrix,hn,jr,Po,st.globeToMercatorTransition(Fr.zoom),Ir,Fr.frustumCorners.TL,Fr.frustumCorners.TR,Fr.frustumCorners.BR,Fr.frustumCorners.BL,Fr.globeCenterInViewSpace,Fr.globeRadius,Nr,cn,Co);if(br(fo,vn),$t.setupElevationDraw(Sn,lr,Hr),Nt.prepareDrawProgram(sr,lr,yn.toUnwrapped()),wn){const[Mo,zs,Cs]=vn?wn.getWirefameBuffers(Nt.context,Vn):wn.getGridBuffers(Vn,cn!==0);lr.draw(sr,En,Tr,Gn,Cr,st.CullFaceMode.backCCW,Io,"globe_raster",Mo,zs,Cs)}}}),wn){const vn=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];dr&&vn.push("CUSTOM_ANTIALIASING"),lr=Nt.useProgram("globeRaster",null,vn);for(const Fr of er){const{x:cn,y:En,z:yn}=Fr.canonical,Sn=En===0,Gn=En===(1<<yn)-1,[Yn,On,Zn,fo]=wn.getPoleBuffers(yn);if(fo&&(Sn||Gn)){const co=Vt.getTile(Fr);sr.activeTexture.set(or.TEXTURE0),co.texture.bind(or.LINEAR,or.CLAMP_TO_EDGE);let Vn=st.globePoleMatrixForTile(yn,cn,hr);const Co=st.globeNormalizeECEF(st.globeTileBounds(Fr.canonical)),Po=(Io,Mo)=>Io.draw(sr,or.TRIANGLES,Tr,st.StencilMode.disabled,Cr,st.CullFaceMode.disabled,fm(hr.projMatrix,Vn,Vn,Co,0,Ir,hr.frustumCorners.TL,hr.frustumCorners.TR,hr.frustumCorners.BR,hr.frustumCorners.BL,hr.globeCenterInViewSpace,hr.globeRadius,Nr,0),"globe_pole_raster",Mo,Zn,fo);$t.setupElevationDraw(co,lr,Hr),Nt.prepareDrawProgram(sr,lr,Fr.toUnwrapped()),Sn&&Po(lr,Yn),Gn&&(Vn=st.scale(st.create(),Vn,[1,-1,1]),Po(lr,On))}}}})(vt,Et,Rt,At,It);else{const Nt=vt.context,$t=Nt.gl;let Vt,er;const ir=vt.options.showTerrainWireframe?2:0,sr=(hr,dr)=>{if(er===hr)return;const br=[Mu[hr]];dr&&br.push(Mu[ir]),Vt=vt.useProgram("terrainRaster",null,br),er=hr},or=vt.colorModeForRenderPass(),lr=new st.DepthMode($t.LEQUAL,st.DepthMode.ReadWrite,vt.depthRangeFor3D);iu.update(It);const Gt=vt.transform,nr=mm(Gt.zoom)*Et.exaggeration();(ir?[!1,!0]:[!1]).forEach(hr=>{er=-1;const dr=hr?$t.LINES:$t.TRIANGLES,[br,Cr]=hr?Et.getWirefameBuffer():[Et.gridIndexBuffer,Et.gridSegments];for(const Tr of At){const jr=Rt.getTile(Tr),Ir=st.StencilMode.disabled,Ur=Et.prevTerrainTileForTile[Tr.key],wn=Et.terrainTileForTile[Tr.key];_h(Ur,wn)&&iu.newMorphing(Tr.key,Ur,wn,It,250),Nt.activeTexture.set($t.TEXTURE0),jr.texture.bind($t.LINEAR,$t.CLAMP_TO_EDGE,$t.LINEAR_MIPMAP_NEAREST);const Nr=iu.getMorphValuesForProxy(Tr.key),hn=Nr?1:0;let Hr;Nr&&(Hr={morphing:{srcDemTile:Nr.from,dstDemTile:Nr.to,phase:st.easeCubicInOut(Nr.phase)}});const vn=Ju(Tr.projMatrix,H_(Tr.canonical,Gt.renderWorldCopies)?nr/10:nr);sr(hn,hr),Et.setupElevationDraw(jr,Vt,Hr),vt.prepareDrawProgram(Nt,Vt,Tr.toUnwrapped()),Vt.draw(Nt,dr,lr,Ir,or,st.CullFaceMode.backCCW,vn,"terrain_raster",Et.gridBuffer,br,Cr)}})}}(ut,this,this.proxySourceCache,ot,this._updateTimestamp),this.renderingToTexture=!0,ut.gpuTimingDeferredRenderEnd(),ot.splice(0,ot.length))}renderBatch(ot){if(this._drapedRenderBatches.length===0)return ot+1;this.renderingToTexture=!0;const ut=this.painter,yt=this.painter.context,vt=this.proxySourceCache,Et=this.proxiedCoords[vt.id],Rt=this._drapedRenderBatches.shift(),At=[],It=ut.style.order;let Nt=0;for(const $t of Et){const Vt=vt.getTileByID($t.proxyTileKey),er=vt.proxyCachedFBO[$t.key]?vt.proxyCachedFBO[$t.key][ot]:void 0,ir=er!==void 0?vt.renderCache[er]:this.pool[Nt++],sr=er!==void 0;if(Vt.texture=ir.tex,sr&&!ir.dirty){At.push(Vt.tileID);continue}let or;yt.bindFramebuffer.set(ir.fb.framebuffer),this.renderedToTile=!1,ir.dirty&&(yt.clear({color:st.Color.transparent,stencil:0}),ir.dirty=!1);for(let lr=Rt.start;lr<=Rt.end;++lr){const Gt=ut.style._layers[It[lr]];if(Gt.isHidden(ut.transform.zoom))continue;const nr=ut.style._getLayerSourceCache(Gt),hr=nr?this.proxyToSource[$t.key][nr.id]:[$t];if(!hr)continue;const dr=hr;yt.viewport.set([0,0,ir.fb.width,ir.fb.height]),or!==(nr?nr.id:null)&&(this._setupStencil(ir,hr,Gt,nr),or=nr?nr.id:null),ut.renderLayer(ut,nr,Gt,dr)}this.renderedToTile?(ir.dirty=!0,At.push(Vt.tileID)):sr||--Nt,Nt===5&&(Nt=0,this.renderToBackBuffer(At))}return this.renderToBackBuffer(At),this.renderingToTexture=!1,yt.bindFramebuffer.set(null),yt.viewport.set([0,0,ut.width,ut.height]),Rt.end+1}postRender(){}renderCacheEfficiency(ot){const ut=ot.order.length;if(ut===0)return{efficiency:100};let yt,vt=0,Et=0,Rt=!1;for(let At=0;At<ut;++At){const It=ot._layers[ot.order[At]];this._style.isLayerDraped(It)?(Rt&&++vt,++Et):Rt||(Rt=!0,yt=It.id)}return Et===0?{efficiency:100}:{efficiency:100*(1-vt/Et),firstUndrapedLayer:yt}}getMinElevationBelowMSL(){let ot=0;return this._visibleDemTiles.filter(ut=>ut.dem).forEach(ut=>{ot=Math.min(ot,ut.dem.tree.minimums[0])}),ot===0?ot:(ot-30)*this._exaggeration}raycast(ot,ut,yt){if(!this._visibleDemTiles)return null;const vt=this._visibleDemTiles.filter(Et=>Et.dem).map(Et=>{const Rt=Et.tileID,At=1<<Rt.overscaledZ,{x:It,y:Nt}=Rt.canonical,$t=It/At,Vt=(It+1)/At,er=Nt/At,ir=(Nt+1)/At;return{minx:$t,miny:er,maxx:Vt,maxy:ir,t:Et.dem.tree.raycastRoot($t,er,Vt,ir,ot,ut,yt),tile:Et}});vt.sort((Et,Rt)=>(Et.t!==null?Et.t:Number.MAX_VALUE)-(Rt.t!==null?Rt.t:Number.MAX_VALUE));for(const Et of vt){if(Et.t==null)return null;const Rt=Et.tile.dem.tree.raycast(Et.minx,Et.miny,Et.maxx,Et.maxy,ot,ut,yt);if(Rt!=null)return Rt}return null}_createFBO(){const ot=this.painter.context,ut=ot.gl,yt=this.drapeBufferSize;ot.activeTexture.set(ut.TEXTURE0);const vt=new st.Texture(ot,{width:yt[0],height:yt[1],data:null},ut.RGBA);vt.bind(ut.LINEAR,ut.CLAMP_TO_EDGE);const Et=ot.createFramebuffer(yt[0],yt[1],!1);return Et.colorAttachment.set(vt.texture),Et.depthAttachment=new Ar(ot,Et.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=ot.createRenderbuffer(ot.gl.DEPTH_STENCIL,yt[0],yt[1]),this._stencilRef=0,Et.depthAttachment.set(this._sharedDepthStencil),ot.clear({stencil:0})):Et.depthAttachment.set(this._sharedDepthStencil),ot.extTextureFilterAnisotropic&&!ot.extTextureFilterAnisotropicForceOff&&ut.texParameterf(ut.TEXTURE_2D,ot.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ot.extTextureFilterAnisotropicMax),{fb:Et,tex:vt,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const ot in this._style._sourceCaches)if(this._style._sourceCaches[ot].hasTransition())return!0;return this._style.order.some(ot=>{const ut=this._style._layers[ot],yt=ut.isHidden(this.painter.transform.zoom);return ut.type==="custom"?!yt&&ut.shouldRedrape():!yt&&ut.hasTransition()})}_clearLineLayersFromRenderCache(){let ot=!1;for(const yt of this._style._getSources())if(yt instanceof Pn){ot=!0;break}if(!ot)return;const ut={};for(let yt=0;yt<this._style.order.length;++yt){const vt=this._style._layers[this._style.order[yt]],Et=this._style._getLayerSourceCache(vt);if(Et&&!ut[Et.id]&&!vt.isHidden(this.painter.transform.zoom)&&vt.type==="line"&&vt.widthExpression()instanceof st.ZoomDependentExpression){ut[Et.id]=!0;for(const Rt of this.proxyCoords){const At=this.proxyToSource[Rt.key][Et.id];if(At)for(const It of At)this._clearRenderCacheForTile(Et.id,It)}}}}_clearRasterLayersFromRenderCache(){let ot=!1;for(const yt in this._style._sourceCaches)if(this._style._sourceCaches[yt]._source instanceof Tn){ot=!0;break}if(!ot)return;const ut={};for(let yt=0;yt<this._style.order.length;++yt){const vt=this._style._layers[this._style.order[yt]],Et=this._style._getLayerSourceCache(vt);if(!Et||ut[Et.id]||vt.isHidden(this.painter.transform.zoom)||vt.type!=="raster")continue;const Rt=vt.paint.get("raster-fade-duration");for(const At of this.proxyCoords){const It=this.proxyToSource[At.key][Et.id];if(It)for(const Nt of It){const $t=Ey(Et.getTile(Nt),Et.findLoadedParent(Nt,0),Et,this.painter.transform,Rt);($t.opacity!==1||$t.mix!==0)&&this._clearRenderCacheForTile(Et.id,Nt)}}}}_setupDrapedRenderBatches(){const ot=this._style.order,ut=ot.length;if(ut===0)return;const yt=[];let vt,Et=0,Rt=this._style._layers[ot[Et]];for(;!this._style.isLayerDraped(Rt)&&Rt.isHidden(this.painter.transform.zoom)&&++Et<ut;)Rt=this._style._layers[ot[Et]];for(;Et<ut;++Et){const At=this._style._layers[ot[Et]];At.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(At)?vt===void 0&&(vt=Et):vt!==void 0&&(yt.push({start:vt,end:Et-1}),vt=void 0))}vt!==void 0&&yt.push({start:vt,end:Et-1}),this._drapedRenderBatches=yt}_setupRenderCache(ot){const ut=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,ut.renderCache.length>ut.renderCachePool.length){const Rt=Object.values(ut.proxyCachedFBO);ut.proxyCachedFBO={};for(let At=0;At<Rt.length;++At){const It=Object.values(Rt[At]);ut.renderCachePool.push(...It)}}return}this._clearRasterLayersFromRenderCache();const yt=this.proxyCoords,vt=this._tilesDirty;for(let Rt=yt.length-1;Rt>=0;Rt--){const At=yt[Rt];if(ut.getTileByID(At.key),ut.proxyCachedFBO[At.key]!==void 0){const It=ot[At.key],Nt=this.proxyToSource[At.key];let $t=0;for(const Vt in Nt){const er=Nt[Vt],ir=It[Vt];if(!ir||ir.length!==er.length||er.some((sr,or)=>sr!==ir[or]||vt[Vt]&&vt[Vt].hasOwnProperty(sr.key))){$t=-1;break}++$t}for(const Vt in ut.proxyCachedFBO[At.key])ut.renderCache[ut.proxyCachedFBO[At.key][Vt]].dirty=$t<0||$t!==Object.values(It).length}}const Et=[...this._drapedRenderBatches];Et.sort((Rt,At)=>At.end-At.start-(Rt.end-Rt.start));for(const Rt of Et)for(const At of yt){if(ut.proxyCachedFBO[At.key])continue;let It=ut.renderCachePool.pop();It===void 0&&ut.renderCache.length<50&&(It=ut.renderCache.length,ut.renderCache.push(this._createFBO())),It!==void 0&&(ut.proxyCachedFBO[At.key]={},ut.proxyCachedFBO[At.key][Rt.start]=It,ut.renderCache[It].dirty=!0)}this._tilesDirty={}}_setupStencil(ot,ut,yt,vt){if(!vt||!this._sourceTilesOverlap[vt.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const Et=this.painter.context,Rt=Et.gl;if(ut.length<=1)return void(this._overlapStencilType=!1);let At;if(yt.isTileClipped())At=ut.length,this._overlapStencilMode.test={func:Rt.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(ut[0].overscaledZ>ut[ut.length-1].overscaledZ))return void(this._overlapStencilType=!1);At=1,this._overlapStencilMode.test={func:Rt.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+At>255&&(Et.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=At,this._overlapStencilMode.ref=this._stencilRef,yt.isTileClipped()&&this._renderTileClippingMasks(ut,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(ot){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[ot.key]),this._overlapStencilMode):st.StencilMode.disabled}_renderTileClippingMasks(ot,ut){const yt=this.painter,vt=this.painter.context,Et=vt.gl;yt._tileClippingMaskIDs={},vt.setColorMode(st.ColorMode.disabled),vt.setDepthMode(st.DepthMode.disabled);const Rt=yt.useProgram("clippingMask");for(const At of ot){const It=yt._tileClippingMaskIDs[At.key]=--ut;Rt.draw(vt,Et.TRIANGLES,st.DepthMode.disabled,new st.StencilMode({func:Et.ALWAYS,mask:0},It,255,Et.KEEP,Et.KEEP,Et.REPLACE),st.ColorMode.disabled,st.CullFaceMode.disabled,Mp(At.projMatrix),"$clipping",yt.tileExtentBuffer,yt.quadTriangleIndexBuffer,yt.tileExtentSegments)}}pointCoordinate(ot){const ut=this.painter.transform;if(ot.x<0||ot.x>ut.width||ot.y<0||ot.y>ut.height)return null;const yt=[ot.x,ot.y,1,1];st.transformMat4$1(yt,yt,ut.pixelMatrixInverse),st.scale$1(yt,yt,1/yt[3]),yt[0]/=ut.worldSize,yt[1]/=ut.worldSize;const vt=ut._camera.position,Et=st.mercatorZfromAltitude(1,ut.center.lat),Rt=[vt[0],vt[1],vt[2]/Et,0],At=st.subtract([],yt.slice(0,3),Rt);st.normalize(At,At);const It=this.raycast(Rt,At,this._exaggeration);return It!==null&&It?(st.scaleAndAdd(Rt,Rt,At,It),Rt[3]=Rt[2],Rt[2]*=Et,Rt):null}drawDepth(){const ot=this.painter,ut=ot.context,yt=this.proxySourceCache,vt=Math.ceil(ot.width),Et=Math.ceil(ot.height);if(!this._depthFBO||this._depthFBO.width===vt&&this._depthFBO.height===Et||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const Rt=ut.gl,At=ut.createFramebuffer(vt,Et,!0);ut.activeTexture.set(Rt.TEXTURE0);const It=new st.Texture(ut,{width:vt,height:Et,data:null},Rt.RGBA);It.bind(Rt.NEAREST,Rt.CLAMP_TO_EDGE),At.colorAttachment.set(It.texture);const Nt=ut.createRenderbuffer(ut.gl.DEPTH_COMPONENT16,vt,Et);At.depthAttachment.set(Nt),this._depthFBO=At,this._depthTexture=It}ut.bindFramebuffer.set(this._depthFBO.framebuffer),ut.viewport.set([0,0,vt,Et]),function(Rt,At,It,Nt){if(Rt.transform.projection.name==="globe")return;const $t=Rt.context,Vt=$t.gl;$t.clear({depth:1});const er=Rt.useProgram("terrainDepth"),ir=new st.DepthMode(Vt.LESS,st.DepthMode.ReadWrite,Rt.depthRangeFor3D);for(const sr of Nt){const or=It.getTile(sr),lr=Ju(sr.projMatrix,0);At.setupElevationDraw(or,er),er.draw($t,Vt.TRIANGLES,ir,st.StencilMode.disabled,st.ColorMode.unblended,st.CullFaceMode.backCCW,lr,"terrain_depth",At.gridBuffer,At.gridIndexBuffer,At.gridNoSkirtSegments)}}(ot,this,yt,this.proxyCoords)}_setupProxiedCoordsForOrtho(ot,ut,yt){if(ot.getSource()instanceof ao)return this._setupProxiedCoordsForImageSource(ot,ut,yt);this._findCoveringTileCache[ot.id]=this._findCoveringTileCache[ot.id]||{};const vt=this.proxiedCoords[ot.id]=[],Et=this.proxyCoords;for(let At=0;At<Et.length;At++){const It=Et[At],Nt=this._findTileCoveringTileID(It,ot);if(Nt){const $t=this._createProxiedId(It,Nt,yt[It.key]&&yt[It.key][ot.id]);vt.push($t),this.proxyToSource[It.key][ot.id]=[$t]}}let Rt=!1;for(let At=0;At<ut.length;At++){const It=ot.getTile(ut[At]);if(!It||!It.hasData())continue;const Nt=this._findTileCoveringTileID(It.tileID,this.proxySourceCache);if(Nt&&Nt.tileID.canonical.z!==It.tileID.canonical.z){const $t=this.proxyToSource[Nt.tileID.key][ot.id],Vt=this._createProxiedId(Nt.tileID,It,yt[Nt.tileID.key]&&yt[Nt.tileID.key][ot.id]);$t?$t.splice($t.length-1,0,Vt):this.proxyToSource[Nt.tileID.key][ot.id]=[Vt],vt.push(Vt),Rt=!0}}this._sourceTilesOverlap[ot.id]=Rt}_setupProxiedCoordsForImageSource(ot,ut,yt){if(!ot.getSource().loaded())return;const vt=this.proxiedCoords[ot.id]=[],Et=this.proxyCoords,Rt=ot.getSource(),At=new st.Point(Rt.tileID.x,Rt.tileID.y)._div(1<<Rt.tileID.z),It=Rt.coordinates.map(st.MercatorCoordinate.fromLngLat).reduce(($t,Vt)=>($t.min.x=Math.min($t.min.x,Vt.x-At.x),$t.min.y=Math.min($t.min.y,Vt.y-At.y),$t.max.x=Math.max($t.max.x,Vt.x-At.x),$t.max.y=Math.max($t.max.y,Vt.y-At.y),$t),{min:new st.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new st.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),Nt=($t,Vt)=>{const er=$t.wrap+$t.canonical.x/(1<<$t.canonical.z),ir=$t.canonical.y/(1<<$t.canonical.z),sr=st.EXTENT/(1<<$t.canonical.z),or=Vt.wrap+Vt.canonical.x/(1<<Vt.canonical.z),lr=Vt.canonical.y/(1<<Vt.canonical.z);return er+sr<or+It.min.x||er>or+It.max.x||ir+sr<lr+It.min.y||ir>lr+It.max.y};for(let $t=0;$t<Et.length;$t++){const Vt=Et[$t];for(let er=0;er<ut.length;er++){const ir=ot.getTile(ut[er]);if(!ir||!ir.hasData()||Nt(Vt,ir.tileID))continue;const sr=this._createProxiedId(Vt,ir,yt[Vt.key]&&yt[Vt.key][ot.id]),or=this.proxyToSource[Vt.key][ot.id];or?or.push(sr):this.proxyToSource[Vt.key][ot.id]=[sr],vt.push(sr)}}}_createProxiedId(ot,ut,yt){let vt=this.orthoMatrix;if(yt){const Et=yt.find(Rt=>Rt.key===ut.tileID.key);if(Et)return Et}if(ut.tileID.key!==ot.key){const Et=ot.canonical.z-ut.tileID.canonical.z;let Rt,At,It;vt=st.create();const Nt=ut.tileID.wrap-ot.wrap<<ot.overscaledZ;Et>0?(Rt=st.EXTENT>>Et,At=Rt*((ut.tileID.canonical.x<<Et)-ot.canonical.x+Nt),It=Rt*((ut.tileID.canonical.y<<Et)-ot.canonical.y)):(Rt=st.EXTENT<<-Et,At=st.EXTENT*(ut.tileID.canonical.x-(ot.canonical.x+Nt<<-Et)),It=st.EXTENT*(ut.tileID.canonical.y-(ot.canonical.y<<-Et))),st.ortho(vt,0,Rt,0,Rt,0,1),st.translate(vt,vt,[At,It,0])}return new ym(ut.tileID,ot.key,vt)}_findTileCoveringTileID(ot,ut){let yt=ut.getTile(ot);if(yt&&yt.hasData())return yt;const vt=this._findCoveringTileCache[ut.id],Et=vt[ot.key];if(yt=Et?ut.getTileByID(Et):null,yt&&yt.hasData()||Et===null)return yt;let Rt=yt?yt.tileID:ot,At=Rt.overscaledZ;const It=ut.getSource().minzoom,Nt=[];if(!Et){const Vt=ut.getSource().maxzoom;if(ot.canonical.z>=Vt){const er=ot.canonical.z-Vt;ut.getSource().reparseOverscaled?(At=Math.max(ot.canonical.z+2,ut.transform.tileZoom),Rt=new st.OverscaledTileID(At,ot.wrap,Vt,ot.canonical.x>>er,ot.canonical.y>>er)):er!==0&&(At=Vt,Rt=new st.OverscaledTileID(At,ot.wrap,Vt,ot.canonical.x>>er,ot.canonical.y>>er))}Rt.key!==ot.key&&(Nt.push(Rt.key),yt=ut.getTile(Rt))}const $t=Vt=>{Nt.forEach(er=>{vt[er]=Vt}),Nt.length=0};for(At-=1;At>=It&&(!yt||!yt.hasData());At--){yt&&$t(yt.tileID.key);const Vt=Rt.calculateScaledKey(At);if(yt=ut.getTileByID(Vt),yt&&yt.hasData())break;const er=vt[Vt];if(er===null)break;er===void 0?Nt.push(Vt):yt=ut.getTileByID(er)}return $t(yt?yt.tileID.key:null),yt&&yt.hasData()?yt:null}findDEMTileFor(ot){return this.enabled?this._findTileCoveringTileID(ot,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(ot,ut){let yt=this._tilesDirty[ot];yt||(yt=this._tilesDirty[ot]={}),yt[ut.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const ot=function(ut){let yt=0;const vt=new st.StructArrayLayout2ui4,Et=131;for(let Rt=1;Rt<129;Rt++){for(let At=1;At<129;At++)yt=Rt*Et+At,vt.emplaceBack(yt,yt+1),vt.emplaceBack(yt,yt+Et),vt.emplaceBack(yt+1,yt+Et),Rt===128&&vt.emplaceBack(yt+Et,yt+Et+1);vt.emplaceBack(yt+1,yt+1+Et)}return vt}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(ot),this.wireframeSegments=st.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,ot.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class yo{static cacheKey(ot,ut,yt,vt){let Et=`${ut}${vt?vt.cacheKey:""}`;for(const Rt of yt)ot.usedDefines.includes(Rt)&&(Et+=`/${Rt}`);return Et}constructor(ot,ut,yt,vt,Et,Rt){const At=ot.gl;this.program=At.createProgram();const It=function(Gt){const nr=[];for(let hr=0;hr<Gt.length;hr++){if(Gt[hr]===null)continue;const dr=Gt[hr].split(" ");nr.push(dr.pop())}return nr}(yt.staticAttributes),Nt=vt?vt.getBinderAttributes():[],$t=It.concat(Nt);let Vt=vt?vt.defines():[];Vt=Vt.concat(Rt.map(Gt=>`#define ${Gt}`));const er=ot.isWebGL2?`#version 300 es
`:"",ir=er+Vt.concat(ot.extStandardDerivatives&&er.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(_y):_y,_y,pm,U_.fragmentSource,Yu.fragmentSource,yt.fragmentSource).join(`
`),sr=er+Vt.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,pm,U_.vertexSource,Yu.vertexSource,dm.vertexSource,yt.vertexSource).join(`
`),or=At.createShader(At.FRAGMENT_SHADER);if(At.isContextLost())return void(this.failedToCreate=!0);At.shaderSource(or,ir),At.compileShader(or),At.attachShader(this.program,or);const lr=At.createShader(At.VERTEX_SHADER);if(At.isContextLost())this.failedToCreate=!0;else{At.shaderSource(lr,sr),At.compileShader(lr),At.attachShader(this.program,lr),this.attributes={},this.numAttributes=$t.length;for(let Gt=0;Gt<this.numAttributes;Gt++)$t[Gt]&&(At.bindAttribLocation(this.program,Gt,$t[Gt]),this.attributes[$t[Gt]]=Gt);At.linkProgram(this.program),At.deleteShader(lr),At.deleteShader(or),this.fixedUniforms=Et(ot),this.binderUniforms=vt?vt.getUniforms(ot):[],Rt.includes("TERRAIN")&&(this.terrainUniforms=(Gt=>({u_dem:new st.Uniform1i(Gt),u_dem_prev:new st.Uniform1i(Gt),u_dem_unpack:new st.Uniform4f(Gt),u_dem_tl:new st.Uniform2f(Gt),u_dem_scale:new st.Uniform1f(Gt),u_dem_tl_prev:new st.Uniform2f(Gt),u_dem_scale_prev:new st.Uniform1f(Gt),u_dem_size:new st.Uniform1f(Gt),u_dem_lerp:new st.Uniform1f(Gt),u_exaggeration:new st.Uniform1f(Gt),u_depth:new st.Uniform1i(Gt),u_depth_size_inv:new st.Uniform2f(Gt),u_meter_to_dem:new st.Uniform1f(Gt),u_label_plane_matrix_inv:new st.UniformMatrix4f(Gt)}))(ot)),Rt.includes("GLOBE")&&(this.globeUniforms=(Gt=>({u_tile_tl_up:new st.Uniform3f(Gt),u_tile_tr_up:new st.Uniform3f(Gt),u_tile_br_up:new st.Uniform3f(Gt),u_tile_bl_up:new st.Uniform3f(Gt),u_tile_up_scale:new st.Uniform1f(Gt)}))(ot)),Rt.includes("FOG")&&(this.fogUniforms=(Gt=>({u_fog_matrix:new st.UniformMatrix4f(Gt),u_fog_range:new st.Uniform2f(Gt),u_fog_color:new st.Uniform4f(Gt),u_fog_horizon_blend:new st.Uniform1f(Gt),u_fog_temporal_offset:new st.Uniform1f(Gt),u_frustum_tl:new st.Uniform3f(Gt),u_frustum_tr:new st.Uniform3f(Gt),u_frustum_br:new st.Uniform3f(Gt),u_frustum_bl:new st.Uniform3f(Gt),u_globe_pos:new st.Uniform3f(Gt),u_globe_radius:new st.Uniform1f(Gt),u_globe_transition:new st.Uniform1f(Gt),u_is_globe:new st.Uniform1i(Gt),u_viewport:new st.Uniform2f(Gt)}))(ot))}}setTerrainUniformValues(ot,ut){if(!this.terrainUniforms)return;const yt=this.terrainUniforms;if(!this.failedToCreate){ot.program.set(this.program);for(const vt in ut)yt[vt]&&yt[vt].set(this.program,vt,ut[vt])}}setGlobeUniformValues(ot,ut){if(!this.globeUniforms)return;const yt=this.globeUniforms;if(!this.failedToCreate){ot.program.set(this.program);for(const vt in ut)yt[vt]&&yt[vt].set(this.program,vt,ut[vt])}}setFogUniformValues(ot,ut){if(!this.fogUniforms)return;const yt=this.fogUniforms;if(!this.failedToCreate){ot.program.set(this.program);for(const vt in ut)yt[vt].set(this.program,vt,ut[vt])}}draw(ot,ut,yt,vt,Et,Rt,At,It,Nt,$t,Vt,er,ir,sr,or){const lr=ot.gl;if(this.failedToCreate)return;ot.program.set(this.program),ot.setDepthMode(yt),ot.setStencilMode(vt),ot.setColorMode(Et),ot.setCullFace(Rt);for(const nr of Object.keys(this.fixedUniforms))this.fixedUniforms[nr].set(this.program,nr,At[nr]);sr&&sr.setUniforms(this.program,ot,this.binderUniforms,er,{zoom:ir});const Gt={[lr.LINES]:2,[lr.TRIANGLES]:3,[lr.LINE_STRIP]:1}[ut];for(const nr of Vt.get()){const hr=nr.vaos||(nr.vaos={});(hr[It]||(hr[It]=new cv)).bind(ot,this,Nt,sr?sr.getPaintVertexBuffers():[],$t,nr.vertexOffset,or||[]),lr.drawElements(ut,nr.primitiveLength*Gt,lr.UNSIGNED_SHORT,nr.primitiveOffset*Gt*2)}}}function jp(ft,ot){const ut=Math.pow(2,ot.tileID.overscaledZ),yt=ot.tileSize*Math.pow(2,ft.transform.tileZoom)/ut,vt=yt*(ot.tileID.canonical.x+ot.tileID.wrap*ut),Et=yt*ot.tileID.canonical.y;return{u_image:0,u_texsize:ot.imageAtlasTexture.size,u_tile_units_to_pixels:1/sn(ot,1,ft.transform.tileZoom),u_pixel_coord_upper:[vt>>16,Et>>16],u_pixel_coord_lower:[65535&vt,65535&Et]}}const W_=st.create(),Cy=(ft,ot,ut,yt,vt,Et,Rt,At,It,Nt,$t)=>{const Vt=ot.style.light,er=Vt.properties.get("position"),ir=[er.x,er.y,er.z],sr=st.create$1();Vt.properties.get("anchor")==="viewport"&&(st.fromRotation(sr,-ot.transform.angle),st.transformMat3(ir,ir,sr));const or=Vt.properties.get("color"),lr=ot.transform,Gt={u_matrix:ft,u_lightpos:ir,u_lightintensity:Vt.properties.get("intensity"),u_lightcolor:[or.r,or.g,or.b],u_vertical_gradient:+ut,u_opacity:yt,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:W_,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:vt,u_edge_radius:Et};return lr.projection.name==="globe"&&(Gt.u_tile_id=[Rt.canonical.x,Rt.canonical.y,1<<Rt.canonical.z],Gt.u_zoom_transition=It,Gt.u_inv_rot_matrix=$t,Gt.u_merc_center=Nt,Gt.u_up_dir=lr.projection.upVector(new st.CanonicalTileID(0,0,0),Nt[0]*st.EXTENT,Nt[1]*st.EXTENT),Gt.u_height_lift=At),Gt},q_=(ft,ot,ut,yt,vt,Et,Rt,At,It,Nt,$t,Vt)=>{const er=Cy(ft,ot,ut,yt,vt,Et,Rt,It,Nt,$t,Vt),ir={u_height_factor:-Math.pow(2,Rt.overscaledZ)/At.tileSize/8};return st.extend(er,jp(ot,At),ir)},ju=ft=>({u_matrix:ft}),Ry=(ft,ot,ut)=>st.extend(ju(ft),jp(ot,ut)),uv=(ft,ot)=>({u_matrix:ft,u_world:ot}),hv=(ft,ot,ut,yt)=>st.extend(Ry(ft,ot,ut),{u_world:yt}),dv=st.create(),Ay=(ft,ot,ut,yt,vt,Et)=>{const Rt=ft.transform,At=Rt.projection.name==="globe";let It;if(Et.paint.get("circle-pitch-alignment")==="map")if(At){const $t=st.globePixelsToTileUnits(Rt.zoom,ot.canonical)*Rt._pixelsPerMercatorPixel;It=Float32Array.from([$t,0,0,$t])}else It=Rt.calculatePixelsToTileUnitsMatrix(ut);else It=new Float32Array([Rt.pixelsToGLUnits[0],0,0,Rt.pixelsToGLUnits[1]]);const Nt={u_camera_to_center_distance:Rt.cameraToCenterDistance,u_matrix:ft.translatePosMatrix(ot.projMatrix,ut,Et.paint.get("circle-translate"),Et.paint.get("circle-translate-anchor")),u_device_pixel_ratio:st.exported.devicePixelRatio,u_extrude_scale:It,u_inv_rot_matrix:dv,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(At){Nt.u_inv_rot_matrix=yt,Nt.u_merc_center=vt,Nt.u_tile_id=[ot.canonical.x,ot.canonical.y,1<<ot.canonical.z],Nt.u_zoom_transition=st.globeToMercatorTransition(Rt.zoom);const $t=vt[0]*st.EXTENT,Vt=vt[1]*st.EXTENT;Nt.u_up_dir=Rt.projection.upVector(new st.CanonicalTileID(0,0,0),$t,Vt)}return Nt},ky=ft=>{const ot=[];return ft.paint.get("circle-pitch-alignment")==="map"&&ot.push("PITCH_WITH_MAP"),ft.paint.get("circle-pitch-scale")==="map"&&ot.push("SCALE_WITH_MAP"),ot},Py=(ft,ot,ut,yt)=>{const vt=st.EXTENT/ut.tileSize;return{u_matrix:ft,u_camera_to_center_distance:ot.getCameraToCenterDistance(yt),u_extrude_scale:[ot.pixelsToGLUnits[0]/vt,ot.pixelsToGLUnits[1]/vt]}},_m=(ft,ot,ut=1)=>({u_matrix:ft,u_color:ot,u_overlay:0,u_overlay_scale:ut}),Z_=st.create(),X_=(ft,ot,ut,yt,vt,Et,Rt)=>{const At=ft.transform,It=At.projection.name==="globe",Nt=It?st.globePixelsToTileUnits(At.zoom,ot.canonical)*At._pixelsPerMercatorPixel:sn(ut,1,Et),$t={u_matrix:ot.projMatrix,u_extrude_scale:Nt,u_intensity:Rt,u_inv_rot_matrix:Z_,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(It){$t.u_inv_rot_matrix=yt,$t.u_merc_center=vt,$t.u_tile_id=[ot.canonical.x,ot.canonical.y,1<<ot.canonical.z],$t.u_zoom_transition=st.globeToMercatorTransition(At.zoom);const Vt=vt[0]*st.EXTENT,er=vt[1]*st.EXTENT;$t.u_up_dir=At.projection.upVector(new st.CanonicalTileID(0,0,0),Vt,er)}return $t},pv=(ft,ot,ut,yt,vt,Et,Rt)=>{const At=ft.transform,It=At.calculatePixelsToTileUnitsMatrix(ot);return{u_matrix:Iy(ft,ot,ut,yt),u_pixels_to_tile_units:It,u_device_pixel_ratio:Et,u_units_to_pixels:[1/At.pixelsToGLUnits[0],1/At.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:vt,u_texsize:Lp(ut)?ot.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:_d(ot,ft.transform),u_alpha_discard_threshold:0,u_trim_offset:Rt}},Dp=(ft,ot,ut,yt,vt)=>{const Et=ft.transform;return{u_matrix:Iy(ft,ot,ut,yt),u_texsize:ot.imageAtlasTexture.size,u_pixels_to_tile_units:Et.calculatePixelsToTileUnitsMatrix(ot),u_device_pixel_ratio:vt,u_image:0,u_tile_units_to_pixels:_d(ot,Et),u_units_to_pixels:[1/Et.pixelsToGLUnits[0],1/Et.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function _d(ft,ot){return 1/sn(ft,1,ot.tileZoom)}function Iy(ft,ot,ut,yt){return ft.translatePosMatrix(yt||ot.tileID.projMatrix,ot,ut.paint.get("line-translate"),ut.paint.get("line-translate-anchor"))}function Lp(ft){const ot=ft.paint.get("line-dasharray").value;return ot.value||ot.kind!=="constant"}const My=(ft,ot,ut,yt,vt,Et)=>{return{u_matrix:ft,u_tl_parent:ot,u_scale_parent:ut,u_fade_t:yt.mix,u_opacity:yt.opacity*vt.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:vt.paint.get("raster-brightness-min"),u_brightness_high:vt.paint.get("raster-brightness-max"),u_saturation_factor:(At=vt.paint.get("raster-saturation"),At>0?1-1/(1.001-At):-At),u_contrast_factor:(Rt=vt.paint.get("raster-contrast"),Rt>0?1/(1-Rt):1+Rt),u_spin_weights:Ul(vt.paint.get("raster-hue-rotate")),u_perspective_transform:Et};var Rt,At};function Ul(ft){ft*=Math.PI/180;const ot=Math.sin(ft),ut=Math.cos(ft);return[(2*ut+1)/3,(-Math.sqrt(3)*ot-ut+1)/3,(Math.sqrt(3)*ot-ut+1)/3]}const xm=st.create(),jy=(ft,ot,ut,yt,vt,Et,Rt,At,It,Nt,$t,Vt,er,ir,sr,or)=>{const lr=vt.transform,Gt={u_is_size_zoom_constant:+(ft==="constant"||ft==="source"),u_is_size_feature_constant:+(ft==="constant"||ft==="camera"),u_size_t:ot?ot.uSizeT:0,u_size:ot?ot.uSize:0,u_camera_to_center_distance:lr.cameraToCenterDistance,u_rotate_symbol:+ut,u_aspect_ratio:lr.width/lr.height,u_fade_change:vt.options.fadeDuration?vt.symbolFadeChange:1,u_matrix:Et,u_label_plane_matrix:Rt,u_coord_matrix:At,u_is_text:+It,u_pitch_with_map:+yt,u_texsize:Nt,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:xm,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:xm,u_up_vector:[0,-1,0]};return or.name==="globe"&&(Gt.u_tile_id=[$t.canonical.x,$t.canonical.y,1<<$t.canonical.z],Gt.u_zoom_transition=Vt,Gt.u_inv_rot_matrix=ir,Gt.u_merc_center=er,Gt.u_camera_forward=lr._camera.forward(),Gt.u_ecef_origin=st.globeECEFOrigin(lr.globeMatrix,$t.toUnwrapped()),Gt.u_tile_matrix=Float32Array.from(lr.globeMatrix),Gt.u_up_vector=sr),Gt},vm=(ft,ot,ut,yt,vt,Et,Rt,At,It,Nt,$t,Vt,er,ir,sr,or,lr)=>st.extend(jy(ft,ot,ut,yt,vt,Et,Rt,At,It,Nt,Vt,er,ir,sr,or,lr),{u_gamma_scale:yt?vt.transform.cameraToCenterDistance*Math.cos(vt.terrain?0:vt.transform._pitch):1,u_device_pixel_ratio:st.exported.devicePixelRatio,u_is_halo:+$t}),K_=(ft,ot,ut,yt,vt,Et,Rt,At,It,Nt,$t,Vt,er,ir,sr,or)=>st.extend(vm(ft,ot,ut,yt,vt,Et,Rt,At,!0,It,!0,$t,Vt,er,ir,sr,or),{u_texsize_icon:Nt,u_texture_icon:1}),Dy=(ft,ot,ut)=>({u_matrix:ft,u_opacity:ot,u_color:ut}),fv=(ft,ot,ut,yt,vt)=>st.extend(function(Et,Rt,At){const It=Rt.imageManager.getPattern(Et.toString()),{width:Nt,height:$t}=Rt.imageManager.getPixelSize(),Vt=Math.pow(2,At.tileID.overscaledZ),er=At.tileSize*Math.pow(2,Rt.transform.tileZoom)/Vt,ir=er*(At.tileID.canonical.x+At.tileID.wrap*Vt),sr=er*At.tileID.canonical.y;return{u_image:0,u_pattern_tl:It.tl,u_pattern_br:It.br,u_texsize:[Nt,$t],u_pattern_size:It.displaySize,u_tile_units_to_pixels:1/sn(At,1,Rt.transform.tileZoom),u_pixel_coord_upper:[ir>>16,sr>>16],u_pixel_coord_lower:[65535&ir,65535&sr]}}(yt,ut,vt),{u_matrix:ft,u_opacity:ot}),Ly={fillExtrusion:ft=>({u_matrix:new st.UniformMatrix4f(ft),u_lightpos:new st.Uniform3f(ft),u_lightintensity:new st.Uniform1f(ft),u_lightcolor:new st.Uniform3f(ft),u_vertical_gradient:new st.Uniform1f(ft),u_opacity:new st.Uniform1f(ft),u_edge_radius:new st.Uniform1f(ft),u_ao:new st.Uniform2f(ft),u_tile_id:new st.Uniform3f(ft),u_zoom_transition:new st.Uniform1f(ft),u_inv_rot_matrix:new st.UniformMatrix4f(ft),u_merc_center:new st.Uniform2f(ft),u_up_dir:new st.Uniform3f(ft),u_height_lift:new st.Uniform1f(ft)}),fillExtrusionPattern:ft=>({u_matrix:new st.UniformMatrix4f(ft),u_lightpos:new st.Uniform3f(ft),u_lightintensity:new st.Uniform1f(ft),u_lightcolor:new st.Uniform3f(ft),u_vertical_gradient:new st.Uniform1f(ft),u_height_factor:new st.Uniform1f(ft),u_edge_radius:new st.Uniform1f(ft),u_ao:new st.Uniform2f(ft),u_tile_id:new st.Uniform3f(ft),u_zoom_transition:new st.Uniform1f(ft),u_inv_rot_matrix:new st.UniformMatrix4f(ft),u_merc_center:new st.Uniform2f(ft),u_up_dir:new st.Uniform3f(ft),u_height_lift:new st.Uniform1f(ft),u_image:new st.Uniform1i(ft),u_texsize:new st.Uniform2f(ft),u_pixel_coord_upper:new st.Uniform2f(ft),u_pixel_coord_lower:new st.Uniform2f(ft),u_tile_units_to_pixels:new st.Uniform1f(ft),u_opacity:new st.Uniform1f(ft)}),fill:ft=>({u_matrix:new st.UniformMatrix4f(ft)}),fillPattern:ft=>({u_matrix:new st.UniformMatrix4f(ft),u_image:new st.Uniform1i(ft),u_texsize:new st.Uniform2f(ft),u_pixel_coord_upper:new st.Uniform2f(ft),u_pixel_coord_lower:new st.Uniform2f(ft),u_tile_units_to_pixels:new st.Uniform1f(ft)}),fillOutline:ft=>({u_matrix:new st.UniformMatrix4f(ft),u_world:new st.Uniform2f(ft)}),fillOutlinePattern:ft=>({u_matrix:new st.UniformMatrix4f(ft),u_world:new st.Uniform2f(ft),u_image:new st.Uniform1i(ft),u_texsize:new st.Uniform2f(ft),u_pixel_coord_upper:new st.Uniform2f(ft),u_pixel_coord_lower:new st.Uniform2f(ft),u_tile_units_to_pixels:new st.Uniform1f(ft)}),circle:ft=>({u_camera_to_center_distance:new st.Uniform1f(ft),u_extrude_scale:new st.UniformMatrix2f(ft),u_device_pixel_ratio:new st.Uniform1f(ft),u_matrix:new st.UniformMatrix4f(ft),u_inv_rot_matrix:new st.UniformMatrix4f(ft),u_merc_center:new st.Uniform2f(ft),u_tile_id:new st.Uniform3f(ft),u_zoom_transition:new st.Uniform1f(ft),u_up_dir:new st.Uniform3f(ft)}),collisionBox:ft=>({u_matrix:new st.UniformMatrix4f(ft),u_camera_to_center_distance:new st.Uniform1f(ft),u_extrude_scale:new st.Uniform2f(ft)}),collisionCircle:ft=>({u_matrix:new st.UniformMatrix4f(ft),u_inv_matrix:new st.UniformMatrix4f(ft),u_camera_to_center_distance:new st.Uniform1f(ft),u_viewport_size:new st.Uniform2f(ft)}),debug:ft=>({u_color:new st.UniformColor(ft),u_matrix:new st.UniformMatrix4f(ft),u_overlay:new st.Uniform1i(ft),u_overlay_scale:new st.Uniform1f(ft)}),clippingMask:ft=>({u_matrix:new st.UniformMatrix4f(ft)}),heatmap:ft=>({u_extrude_scale:new st.Uniform1f(ft),u_intensity:new st.Uniform1f(ft),u_matrix:new st.UniformMatrix4f(ft),u_inv_rot_matrix:new st.UniformMatrix4f(ft),u_merc_center:new st.Uniform2f(ft),u_tile_id:new st.Uniform3f(ft),u_zoom_transition:new st.Uniform1f(ft),u_up_dir:new st.Uniform3f(ft)}),heatmapTexture:ft=>({u_image:new st.Uniform1i(ft),u_color_ramp:new st.Uniform1i(ft),u_opacity:new st.Uniform1f(ft)}),hillshade:ft=>({u_matrix:new st.UniformMatrix4f(ft),u_image:new st.Uniform1i(ft),u_latrange:new st.Uniform2f(ft),u_light:new st.Uniform2f(ft),u_shadow:new st.UniformColor(ft),u_highlight:new st.UniformColor(ft),u_accent:new st.UniformColor(ft)}),hillshadePrepare:ft=>({u_matrix:new st.UniformMatrix4f(ft),u_image:new st.Uniform1i(ft),u_dimension:new st.Uniform2f(ft),u_zoom:new st.Uniform1f(ft),u_unpack:new st.Uniform4f(ft)}),line:ft=>({u_matrix:new st.UniformMatrix4f(ft),u_pixels_to_tile_units:new st.UniformMatrix2f(ft),u_device_pixel_ratio:new st.Uniform1f(ft),u_units_to_pixels:new st.Uniform2f(ft),u_dash_image:new st.Uniform1i(ft),u_gradient_image:new st.Uniform1i(ft),u_image_height:new st.Uniform1f(ft),u_texsize:new st.Uniform2f(ft),u_tile_units_to_pixels:new st.Uniform1f(ft),u_alpha_discard_threshold:new st.Uniform1f(ft),u_trim_offset:new st.Uniform2f(ft)}),linePattern:ft=>({u_matrix:new st.UniformMatrix4f(ft),u_texsize:new st.Uniform2f(ft),u_pixels_to_tile_units:new st.UniformMatrix2f(ft),u_device_pixel_ratio:new st.Uniform1f(ft),u_image:new st.Uniform1i(ft),u_units_to_pixels:new st.Uniform2f(ft),u_tile_units_to_pixels:new st.Uniform1f(ft),u_alpha_discard_threshold:new st.Uniform1f(ft)}),raster:ft=>({u_matrix:new st.UniformMatrix4f(ft),u_tl_parent:new st.Uniform2f(ft),u_scale_parent:new st.Uniform1f(ft),u_fade_t:new st.Uniform1f(ft),u_opacity:new st.Uniform1f(ft),u_image0:new st.Uniform1i(ft),u_image1:new st.Uniform1i(ft),u_brightness_low:new st.Uniform1f(ft),u_brightness_high:new st.Uniform1f(ft),u_saturation_factor:new st.Uniform1f(ft),u_contrast_factor:new st.Uniform1f(ft),u_spin_weights:new st.Uniform3f(ft),u_perspective_transform:new st.Uniform2f(ft)}),symbolIcon:ft=>({u_is_size_zoom_constant:new st.Uniform1i(ft),u_is_size_feature_constant:new st.Uniform1i(ft),u_size_t:new st.Uniform1f(ft),u_size:new st.Uniform1f(ft),u_camera_to_center_distance:new st.Uniform1f(ft),u_rotate_symbol:new st.Uniform1i(ft),u_aspect_ratio:new st.Uniform1f(ft),u_fade_change:new st.Uniform1f(ft),u_matrix:new st.UniformMatrix4f(ft),u_label_plane_matrix:new st.UniformMatrix4f(ft),u_coord_matrix:new st.UniformMatrix4f(ft),u_is_text:new st.Uniform1i(ft),u_pitch_with_map:new st.Uniform1i(ft),u_texsize:new st.Uniform2f(ft),u_tile_id:new st.Uniform3f(ft),u_zoom_transition:new st.Uniform1f(ft),u_inv_rot_matrix:new st.UniformMatrix4f(ft),u_merc_center:new st.Uniform2f(ft),u_camera_forward:new st.Uniform3f(ft),u_tile_matrix:new st.UniformMatrix4f(ft),u_up_vector:new st.Uniform3f(ft),u_ecef_origin:new st.Uniform3f(ft),u_texture:new st.Uniform1i(ft)}),symbolSDF:ft=>({u_is_size_zoom_constant:new st.Uniform1i(ft),u_is_size_feature_constant:new st.Uniform1i(ft),u_size_t:new st.Uniform1f(ft),u_size:new st.Uniform1f(ft),u_camera_to_center_distance:new st.Uniform1f(ft),u_rotate_symbol:new st.Uniform1i(ft),u_aspect_ratio:new st.Uniform1f(ft),u_fade_change:new st.Uniform1f(ft),u_matrix:new st.UniformMatrix4f(ft),u_label_plane_matrix:new st.UniformMatrix4f(ft),u_coord_matrix:new st.UniformMatrix4f(ft),u_is_text:new st.Uniform1i(ft),u_pitch_with_map:new st.Uniform1i(ft),u_texsize:new st.Uniform2f(ft),u_texture:new st.Uniform1i(ft),u_gamma_scale:new st.Uniform1f(ft),u_device_pixel_ratio:new st.Uniform1f(ft),u_tile_id:new st.Uniform3f(ft),u_zoom_transition:new st.Uniform1f(ft),u_inv_rot_matrix:new st.UniformMatrix4f(ft),u_merc_center:new st.Uniform2f(ft),u_camera_forward:new st.Uniform3f(ft),u_tile_matrix:new st.UniformMatrix4f(ft),u_up_vector:new st.Uniform3f(ft),u_ecef_origin:new st.Uniform3f(ft),u_is_halo:new st.Uniform1i(ft)}),symbolTextAndIcon:ft=>({u_is_size_zoom_constant:new st.Uniform1i(ft),u_is_size_feature_constant:new st.Uniform1i(ft),u_size_t:new st.Uniform1f(ft),u_size:new st.Uniform1f(ft),u_camera_to_center_distance:new st.Uniform1f(ft),u_rotate_symbol:new st.Uniform1i(ft),u_aspect_ratio:new st.Uniform1f(ft),u_fade_change:new st.Uniform1f(ft),u_matrix:new st.UniformMatrix4f(ft),u_label_plane_matrix:new st.UniformMatrix4f(ft),u_coord_matrix:new st.UniformMatrix4f(ft),u_is_text:new st.Uniform1i(ft),u_pitch_with_map:new st.Uniform1i(ft),u_texsize:new st.Uniform2f(ft),u_texsize_icon:new st.Uniform2f(ft),u_texture:new st.Uniform1i(ft),u_texture_icon:new st.Uniform1i(ft),u_gamma_scale:new st.Uniform1f(ft),u_device_pixel_ratio:new st.Uniform1f(ft),u_is_halo:new st.Uniform1i(ft)}),background:ft=>({u_matrix:new st.UniformMatrix4f(ft),u_opacity:new st.Uniform1f(ft),u_color:new st.UniformColor(ft)}),backgroundPattern:ft=>({u_matrix:new st.UniformMatrix4f(ft),u_opacity:new st.Uniform1f(ft),u_image:new st.Uniform1i(ft),u_pattern_tl:new st.Uniform2f(ft),u_pattern_br:new st.Uniform2f(ft),u_texsize:new st.Uniform2f(ft),u_pattern_size:new st.Uniform2f(ft),u_pixel_coord_upper:new st.Uniform2f(ft),u_pixel_coord_lower:new st.Uniform2f(ft),u_tile_units_to_pixels:new st.Uniform1f(ft)}),terrainRaster:by,terrainDepth:by,skybox:ft=>({u_matrix:new st.UniformMatrix4f(ft),u_sun_direction:new st.Uniform3f(ft),u_cubemap:new st.Uniform1i(ft),u_opacity:new st.Uniform1f(ft),u_temporal_offset:new st.Uniform1f(ft)}),skyboxGradient:ft=>({u_matrix:new st.UniformMatrix4f(ft),u_color_ramp:new st.Uniform1i(ft),u_center_direction:new st.Uniform3f(ft),u_radius:new st.Uniform1f(ft),u_opacity:new st.Uniform1f(ft),u_temporal_offset:new st.Uniform1f(ft)}),skyboxCapture:ft=>({u_matrix_3f:new st.UniformMatrix3f(ft),u_sun_direction:new st.Uniform3f(ft),u_sun_intensity:new st.Uniform1f(ft),u_color_tint_r:new st.Uniform4f(ft),u_color_tint_m:new st.Uniform4f(ft),u_luminance:new st.Uniform1f(ft)}),globeRaster:ft=>({u_proj_matrix:new st.UniformMatrix4f(ft),u_globe_matrix:new st.UniformMatrix4f(ft),u_normalize_matrix:new st.UniformMatrix4f(ft),u_merc_matrix:new st.UniformMatrix4f(ft),u_zoom_transition:new st.Uniform1f(ft),u_merc_center:new st.Uniform2f(ft),u_image0:new st.Uniform1i(ft),u_grid_matrix:new st.UniformMatrix3f(ft),u_skirt_height:new st.Uniform1f(ft),u_frustum_tl:new st.Uniform3f(ft),u_frustum_tr:new st.Uniform3f(ft),u_frustum_br:new st.Uniform3f(ft),u_frustum_bl:new st.Uniform3f(ft),u_globe_pos:new st.Uniform3f(ft),u_globe_radius:new st.Uniform1f(ft),u_viewport:new st.Uniform2f(ft)}),globeAtmosphere:ft=>({u_frustum_tl:new st.Uniform3f(ft),u_frustum_tr:new st.Uniform3f(ft),u_frustum_br:new st.Uniform3f(ft),u_frustum_bl:new st.Uniform3f(ft),u_horizon:new st.Uniform1f(ft),u_transition:new st.Uniform1f(ft),u_fadeout_range:new st.Uniform1f(ft),u_color:new st.Uniform4f(ft),u_high_color:new st.Uniform4f(ft),u_space_color:new st.Uniform4f(ft),u_star_intensity:new st.Uniform1f(ft),u_star_density:new st.Uniform1f(ft),u_star_size:new st.Uniform1f(ft),u_temporal_offset:new st.Uniform1f(ft),u_horizon_angle:new st.Uniform1f(ft),u_rotation_matrix:new st.UniformMatrix4f(ft)})};let wm;function $p(ft,ot,ut,yt,vt,Et,Rt){const At=ft.context,It=At.gl,Nt=ft.transform,$t=ft.useProgram("collisionBox"),Vt=[];let er=0,ir=0;for(let dr=0;dr<yt.length;dr++){const br=yt[dr],Cr=ot.getTile(br),Tr=Cr.getBucket(ut);if(!Tr)continue;const jr=ba(br,Tr,Nt);let Ir=jr;vt[0]===0&&vt[1]===0||(Ir=ft.translatePosMatrix(jr,Cr,vt,Et));const Ur=Rt?Tr.textCollisionBox:Tr.iconCollisionBox,wn=Tr.collisionCircleArray;if(wn.length>0){const Nr=st.create(),hn=Ir;st.mul(Nr,Tr.placementInvProjMatrix,Nt.glCoordMatrix),st.mul(Nr,Nr,Tr.placementViewportMatrix),Vt.push({circleArray:wn,circleOffset:ir,transform:hn,invTransform:Nr,projection:Tr.getProjection()}),er+=wn.length/4,ir=er}Ur&&(ft.terrain&&ft.terrain.setupElevationDraw(Cr,$t),$t.draw(At,It.LINES,st.DepthMode.disabled,st.StencilMode.disabled,ft.colorModeForRenderPass(),st.CullFaceMode.disabled,Py(Ir,Nt,Cr,Tr.getProjection()),ut.id,Ur.layoutVertexBuffer,Ur.indexBuffer,Ur.segments,null,Nt.zoom,null,[Ur.collisionVertexBuffer,Ur.collisionVertexBufferExt]))}if(!Rt||!Vt.length)return;const sr=ft.useProgram("collisionCircle"),or=new st.StructArrayLayout2f1f2i16;or.resize(4*er),or._trim();let lr=0;for(const dr of Vt)for(let br=0;br<dr.circleArray.length/4;br++){const Cr=4*br,Tr=dr.circleArray[Cr+0],jr=dr.circleArray[Cr+1],Ir=dr.circleArray[Cr+2],Ur=dr.circleArray[Cr+3];or.emplace(lr++,Tr,jr,Ir,Ur,0),or.emplace(lr++,Tr,jr,Ir,Ur,1),or.emplace(lr++,Tr,jr,Ir,Ur,2),or.emplace(lr++,Tr,jr,Ir,Ur,3)}(!wm||wm.length<2*er)&&(wm=function(dr){const br=2*dr,Cr=new st.StructArrayLayout3ui6;Cr.resize(br),Cr._trim();for(let Tr=0;Tr<br;Tr++){const jr=6*Tr;Cr.uint16[jr+0]=4*Tr+0,Cr.uint16[jr+1]=4*Tr+1,Cr.uint16[jr+2]=4*Tr+2,Cr.uint16[jr+3]=4*Tr+2,Cr.uint16[jr+4]=4*Tr+3,Cr.uint16[jr+5]=4*Tr+0}return Cr}(er));const Gt=At.createIndexBuffer(wm,!0),nr=At.createVertexBuffer(or,st.collisionCircleLayout.members,!0);for(const dr of Vt){const br={u_matrix:dr.transform,u_inv_matrix:dr.invTransform,u_camera_to_center_distance:(hr=Nt).getCameraToCenterDistance(dr.projection),u_viewport_size:[hr.width,hr.height]};sr.draw(At,It.TRIANGLES,st.DepthMode.disabled,st.StencilMode.disabled,ft.colorModeForRenderPass(),st.CullFaceMode.disabled,br,ut.id,nr,Gt,st.SegmentVector.simpleSegment(0,2*dr.circleOffset,dr.circleArray.length,dr.circleArray.length/2),null,Nt.zoom)}var hr;nr.destroy(),Gt.destroy()}const Y_=st.create();function $y({width:ft,height:ot,anchor:ut,textOffset:yt,textScale:vt},Et){const{horizontalAlign:Rt,verticalAlign:At}=st.getAnchorAlignment(ut),It=-(Rt-.5)*ft,Nt=-(At-.5)*ot,$t=st.evaluateVariableOffset(ut,yt);return new st.Point((It/vt+$t[0])*Et,(Nt/vt+$t[1])*Et)}function mv(ft,ot,ut,yt,vt,Et,Rt,At,It,Nt,$t){const Vt=ft.text.placedSymbolArray,er=ft.text.dynamicLayoutVertexArray,ir=ft.icon.dynamicLayoutVertexArray,sr={},or=ft.getProjection(),lr=Ho(At,or,Et),Gt=Et.elevation,nr=or.upVectorScale(At.canonical,Et.center.lat,Et.worldSize).metersToTile;er.clear();for(let hr=0;hr<Vt.length;hr++){const dr=Vt.get(hr),{tileAnchorX:br,tileAnchorY:Cr,numGlyphs:Tr}=dr,jr=dr.hidden||!dr.crossTileID||ft.allowVerticalPlacement&&!dr.placedOrientation?null:yt[dr.crossTileID];if(jr){let Ir=0,Ur=0,wn=0;if(Gt){const Sn=Gt?Gt.getAtTileOffset(At,br,Cr):0,[Gn,Yn,On]=or.upVector(At.canonical,br,Cr);Ir=Sn*Gn*nr,Ur=Sn*Yn*nr,wn=Sn*On*nr}let[Nr,hn,Hr,vn]=Ss(dr.projectedAnchorX+Ir,dr.projectedAnchorY+Ur,dr.projectedAnchorZ+wn,ut?lr:Rt);const Fr=O_(Et.getCameraToCenterDistance(or),vn);let cn=vt.evaluateSizeForFeature(ft.textSizeData,Nt,dr)*Fr/st.ONE_EM;ut&&(cn*=ft.tilePixelRatio/It);const En=$y(jr,cn);ut?({x:Nr,y:hn,z:Hr}=or.projectTilePoint(br+En.x,Cr+En.y,At.canonical),[Nr,hn,Hr]=Ss(Nr+Ir,hn+Ur,Hr+wn,Rt)):(ot&&En._rotate(-Et.angle),Nr+=En.x,hn+=En.y,Hr=0);const yn=ft.allowVerticalPlacement&&dr.placedOrientation===st.WritingMode.vertical?Math.PI/2:0;for(let Sn=0;Sn<Tr;Sn++)st.addDynamicAttributes(er,Nr,hn,Hr,yn);$t&&dr.associatedIconIndex>=0&&(sr[dr.associatedIconIndex]={x:Nr,y:hn,z:Hr,angle:yn})}else Il(Tr,er)}if($t){ir.clear();const hr=ft.icon.placedSymbolArray;for(let dr=0;dr<hr.length;dr++){const br=hr.get(dr),{numGlyphs:Cr}=br,Tr=sr[dr];if(br.hidden||!Tr)Il(Cr,ir);else{const{x:jr,y:Ir,z:Ur,angle:wn}=Tr;for(let Nr=0;Nr<Cr;Nr++)st.addDynamicAttributes(ir,jr,Ir,Ur,wn)}}ft.icon.dynamicLayoutVertexBuffer.updateData(ir)}ft.text.dynamicLayoutVertexBuffer.updateData(er)}function Oy(ft,ot,ut){return ut.iconsInText&&ot?"symbolTextAndIcon":ft?"symbolSDF":"symbolIcon"}function Q_(ft,ot,ut,yt,vt,Et,Rt,At,It,Nt,$t,Vt){const er=ft.context,ir=er.gl,sr=ft.transform,or=At==="map",lr=It==="map",Gt=or&&ut.layout.get("symbol-placement")!=="point",nr=or&&!lr&&!Gt,hr=ut.layout.get("symbol-sort-key").constantOr(1)!==void 0;let dr=!1;const br=ft.depthModeForSublayer(0,st.DepthMode.ReadOnly),Cr=[st.mercatorXfromLng(sr.center.lng),st.mercatorYfromLat(sr.center.lat)],Tr=ut.layout.get("text-variable-anchor"),jr=sr.projection.name==="globe",Ir=[],Ur=[0,-1,0];let wn=Ur;!jr&&!sr.mercatorFromTransition||or||(wn=function(Nr){const hn=Nr._camera.getWorldToCamera(Nr.worldSize,1),Hr=st.multiply([],hn,Nr.globeMatrix);st.invert(Hr,Hr);const vn=[0,0,0],Fr=[0,1,0,0];return st.transformMat4$1(Fr,Fr,Hr),vn[0]=Fr[0],vn[1]=Fr[1],vn[2]=Fr[2],st.normalize(vn,vn),vn}(sr));for(const Nr of yt){const hn=ot.getTile(Nr),Hr=hn.getBucket(ut);if(!Hr||Hr.projection.name==="mercator"&&jr)continue;const vn=vt?Hr.text:Hr.icon;if(!vn||Hr.fullyClipped||!vn.segments.get().length)continue;const Fr=vn.programConfigurations.get(ut.id),cn=vt||Hr.sdfIcons,En=vt?Hr.textSizeData:Hr.iconSizeData,yn=lr||sr.pitch!==0,Sn=st.evaluateSizeForZoom(En,sr.zoom);let Gn,Yn,On,Zn,fo=[0,0],co=null;if(vt)Yn=hn.glyphAtlasTexture,On=ir.LINEAR,Gn=hn.glyphAtlasTexture.size,Hr.iconsInText&&(fo=hn.imageAtlasTexture.size,co=hn.imageAtlasTexture,Zn=yn||ft.options.rotating||ft.options.zooming||En.kind==="composite"||En.kind==="camera"?ir.LINEAR:ir.NEAREST);else{const au=ut.layout.get("icon-size").constantOr(0)!==1||Hr.iconsNeedLinear;Yn=hn.imageAtlasTexture,On=cn||ft.options.rotating||ft.options.zooming||au||yn?ir.LINEAR:ir.NEAREST,Gn=hn.imageAtlasTexture.size}const Vn=Hr.projection.name==="globe",Co=Vn?wn:Ur,Po=Vn?st.globeToMercatorTransition(sr.zoom):0,Io=Ho(Nr,Hr.getProjection(),sr),Mo=sr.calculatePixelsToTileUnitsMatrix(hn),zs=Yr(Io,hn.tileID.canonical,lr,or,sr,Hr.getProjection(),Mo),Cs=ft.terrain&&lr&&Gt?st.invert(st.create(),zs):Y_,El=ls(Io,hn.tileID.canonical,lr,or,sr,Hr.getProjection(),Mo),Gl=Tr&&Hr.hasTextData(),Wo=ut.layout.get("icon-text-fit")!=="none"&&Gl&&Hr.hasIconData();if(Gt){const au=sr.elevation,xu=au?au.getAtTileOffsetFunc(Nr,sr.center.lat,sr.worldSize,Hr.getProjection()):null,zu=_c(Io,hn.tileID.canonical,lr,or,sr,Hr.getProjection(),Mo);cy(Hr,Io,ft,vt,zu,El,lr,Nt,xu,Nr)}const jo=Gt||vt&&Tr||Wo,wo=ft.translatePosMatrix(Io,hn,Et,Rt),cs=jo?Y_:zs,Us=ft.translatePosMatrix(El,hn,Et,Rt,!0),Go=Hr.getProjection().createInversionMatrix(sr,Nr.canonical),Ws=[];ft.terrainRenderModeElevated()&&lr&&Ws.push("PITCH_WITH_MAP_TERRAIN"),Vn&&Ws.push("PROJECTION_GLOBE_VIEW"),jo&&Ws.push("PROJECTED_POS_ON_VIEWPORT");const Om=cn&&ut.paint.get(vt?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ou;Ou=cn?Hr.iconsInText?K_(En.kind,Sn,nr,lr,ft,wo,cs,Us,Gn,fo,Nr,Po,Cr,Go,Co,Hr.getProjection()):vm(En.kind,Sn,nr,lr,ft,wo,cs,Us,vt,Gn,!0,Nr,Po,Cr,Go,Co,Hr.getProjection()):jy(En.kind,Sn,nr,lr,ft,wo,cs,Us,vt,Gn,Nr,Po,Cr,Go,Co,Hr.getProjection());const qp={program:ft.useProgram(Oy(cn,vt,Hr),Fr,Ws),buffers:vn,uniformValues:Ou,atlasTexture:Yn,atlasTextureIcon:co,atlasInterpolation:On,atlasInterpolationIcon:Zn,isSDF:cn,hasHalo:Om,tile:hn,labelPlaneMatrixInv:Cs};if(hr&&Hr.canOverlap){dr=!0;const au=vn.segments.get();for(const xu of au)Ir.push({segments:new st.SegmentVector([xu]),sortKey:xu.sortKey,state:qp})}else Ir.push({segments:vn.segments,sortKey:0,state:qp})}dr&&Ir.sort((Nr,hn)=>Nr.sortKey-hn.sortKey);for(const Nr of Ir){const hn=Nr.state;if(ft.terrain&&ft.terrain.setupElevationDraw(hn.tile,hn.program,{useDepthForOcclusion:!jr,labelPlaneMatrixInv:hn.labelPlaneMatrixInv}),er.activeTexture.set(ir.TEXTURE0),hn.atlasTexture.bind(hn.atlasInterpolation,ir.CLAMP_TO_EDGE),hn.atlasTextureIcon&&(er.activeTexture.set(ir.TEXTURE1),hn.atlasTextureIcon&&hn.atlasTextureIcon.bind(hn.atlasInterpolationIcon,ir.CLAMP_TO_EDGE)),hn.isSDF){const Hr=hn.uniformValues;hn.hasHalo&&(Hr.u_is_halo=1,Op(hn.buffers,Nr.segments,ut,ft,hn.program,br,$t,Vt,Hr)),Hr.u_is_halo=0}Op(hn.buffers,Nr.segments,ut,ft,hn.program,br,$t,Vt,hn.uniformValues)}}function Op(ft,ot,ut,yt,vt,Et,Rt,At,It){const Nt=yt.context,$t=[ft.dynamicLayoutVertexBuffer,ft.opacityVertexBuffer,ft.globeExtVertexBuffer];vt.draw(Nt,Nt.gl.TRIANGLES,Et,Rt,At,st.CullFaceMode.disabled,It,ut.id,ft.layoutVertexBuffer,ft.indexBuffer,ot,ut.paint,yt.transform.zoom,ft.programConfigurations.get(ut.id),$t)}function J_(ft,ot,ut,yt,vt,Et,Rt){const At=ft.context.gl,It=ut.paint.get("fill-pattern"),Nt=It&&It.constantOr(1);let $t,Vt,er,ir,sr;Rt?(Vt=Nt&&!ut.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",$t=At.LINES):(Vt=Nt?"fillPattern":"fill",$t=At.TRIANGLES);for(const or of yt){const lr=ot.getTile(or);if(Nt&&!lr.patternsLoaded())continue;const Gt=lr.getBucket(ut);if(!Gt)continue;ft.prepareDrawTile();const nr=Gt.programConfigurations.get(ut.id),hr=ft.useProgram(Vt,nr);Nt&&(ft.context.activeTexture.set(At.TEXTURE0),lr.imageAtlasTexture.bind(At.LINEAR,At.CLAMP_TO_EDGE),nr.updatePaintBuffers());const dr=It.constantOr(null);if(dr&&lr.imageAtlas){const Cr=lr.imageAtlas.patternPositions[dr.toString()];Cr&&nr.setConstantPatternPositions(Cr)}const br=ft.translatePosMatrix(or.projMatrix,lr,ut.paint.get("fill-translate"),ut.paint.get("fill-translate-anchor"));if(Rt){ir=Gt.indexBuffer2,sr=Gt.segments2;const Cr=ft.terrain&&ft.terrain.renderingToTexture?ft.terrain.drapeBufferSize:[At.drawingBufferWidth,At.drawingBufferHeight];er=Vt==="fillOutlinePattern"&&Nt?hv(br,ft,lr,Cr):uv(br,Cr)}else ir=Gt.indexBuffer,sr=Gt.segments,er=Nt?Ry(br,ft,lr):ju(br);ft.prepareDrawProgram(ft.context,hr,or.toUnwrapped()),hr.draw(ft.context,$t,vt,ft.stencilModeForClipping(or),Et,st.CullFaceMode.disabled,er,ut.id,Gt.layoutVertexBuffer,ir,sr,ut.paint,ft.transform.zoom,nr)}}function bm(ft,ot,ut,yt,vt,Et,Rt){const At=ft.context,It=At.gl,Nt=ft.transform,$t=ut.paint.get("fill-extrusion-pattern"),Vt=$t.constantOr(1),er=ut.paint.get("fill-extrusion-opacity"),ir=[ut.paint.get("fill-extrusion-ambient-occlusion-intensity"),ut.paint.get("fill-extrusion-ambient-occlusion-radius")],sr=ut.layout.get("fill-extrusion-edge-radius"),or=sr>0&&!ut.paint.get("fill-extrusion-rounded-roof"),lr=or?0:sr,Gt=Nt.projection.name==="globe"?st.fillExtrusionHeightLift():0,nr=Nt.projection.name==="globe",hr=nr?st.globeToMercatorTransition(Nt.zoom):0,dr=[st.mercatorXfromLng(Nt.center.lng),st.mercatorYfromLat(Nt.center.lat)],br=[];nr&&br.push("PROJECTION_GLOBE_VIEW"),ir[0]>0&&br.push("FAUX_AO"),or&&br.push("ZERO_ROOF_RADIUS");for(const Cr of yt){const Tr=ot.getTile(Cr),jr=Tr.getBucket(ut);if(!jr||jr.projection.name!==Nt.projection.name)continue;const Ir=jr.programConfigurations.get(ut.id),Ur=ft.useProgram(Vt?"fillExtrusionPattern":"fillExtrusion",Ir,br);if(ft.terrain){const cn=ft.terrain;if(ft.style.terrainSetForDrapingOnly())cn.setupElevationDraw(Tr,Ur,{useMeterToDem:!0});else{if(!jr.enableTerrain)continue;if(cn.setupElevationDraw(Tr,Ur,{useMeterToDem:!0}),ex(At,ot,Cr,jr,ut,cn),!jr.centroidVertexBuffer){const En=Ur.attributes.a_centroid_pos;En!==void 0&&It.vertexAttrib2f(En,0,0)}}}Vt&&(ft.context.activeTexture.set(It.TEXTURE0),Tr.imageAtlasTexture.bind(It.LINEAR,It.CLAMP_TO_EDGE),Ir.updatePaintBuffers());const wn=$t.constantOr(null);if(wn&&Tr.imageAtlas){const cn=Tr.imageAtlas.patternPositions[wn.toString()];cn&&Ir.setConstantPatternPositions(cn)}const Nr=ft.translatePosMatrix(Cr.projMatrix,Tr,ut.paint.get("fill-extrusion-translate"),ut.paint.get("fill-extrusion-translate-anchor")),hn=Nt.projection.createInversionMatrix(Nt,Cr.canonical),Hr=ut.paint.get("fill-extrusion-vertical-gradient"),vn=Vt?q_(Nr,ft,Hr,er,ir,lr,Cr,Tr,Gt,hr,dr,hn):Cy(Nr,ft,Hr,er,ir,lr,Cr,Gt,hr,dr,hn);ft.prepareDrawProgram(At,Ur,Cr.toUnwrapped());const Fr=[];ft.terrain&&Fr.push(jr.centroidVertexBuffer),nr&&Fr.push(jr.layoutVertexExtBuffer),Ur.draw(At,At.gl.TRIANGLES,vt,Et,Rt,st.CullFaceMode.backCCW,vn,ut.id,jr.layoutVertexBuffer,jr.indexBuffer,jr.segments,ut.paint,ft.transform.zoom,Ir,Fr)}}function ex(ft,ot,ut,yt,vt,Et){const Rt=[Gt=>{let nr=Gt.canonical.x-1,hr=Gt.wrap;return nr<0&&(nr=(1<<Gt.canonical.z)-1,hr--),new st.OverscaledTileID(Gt.overscaledZ,hr,Gt.canonical.z,nr,Gt.canonical.y)},Gt=>{let nr=Gt.canonical.x+1,hr=Gt.wrap;return nr===1<<Gt.canonical.z&&(nr=0,hr++),new st.OverscaledTileID(Gt.overscaledZ,hr,Gt.canonical.z,nr,Gt.canonical.y)},Gt=>new st.OverscaledTileID(Gt.overscaledZ,Gt.wrap,Gt.canonical.z,Gt.canonical.x,(Gt.canonical.y===0?1<<Gt.canonical.z:Gt.canonical.y)-1),Gt=>new st.OverscaledTileID(Gt.overscaledZ,Gt.wrap,Gt.canonical.z,Gt.canonical.x,Gt.canonical.y===(1<<Gt.canonical.z)-1?0:Gt.canonical.y+1)],At=Gt=>{const nr=ot.getSource().minzoom,hr=br=>{const Cr=ot.getTileByID(br);if(Cr&&Cr.hasData())return Cr.getBucket(vt)},dr=[0,-1,1];for(const br of dr){if(Gt.overscaledZ+br<nr)continue;const Cr=hr(Gt.calculateScaledKey(Gt.overscaledZ+br));if(Cr)return Cr}},It=[0,0,0],Nt=(Gt,nr)=>(It[0]=Math.min(Gt.min.y,nr.min.y),It[1]=Math.max(Gt.max.y,nr.max.y),It[2]=st.EXTENT-nr.min.x>Gt.max.x?nr.min.x-st.EXTENT:Gt.max.x,It),$t=(Gt,nr)=>(It[0]=Math.min(Gt.min.x,nr.min.x),It[1]=Math.max(Gt.max.x,nr.max.x),It[2]=st.EXTENT-nr.min.y>Gt.max.y?nr.min.y-st.EXTENT:Gt.max.y,It),Vt=[(Gt,nr)=>Nt(Gt,nr),(Gt,nr)=>Nt(nr,Gt),(Gt,nr)=>$t(Gt,nr),(Gt,nr)=>$t(nr,Gt)],er=new st.Point(0,0);let ir,sr,or;const lr=(Gt,nr,hr,dr,br)=>{const Cr=[[dr?hr:Gt,dr?Gt:hr,0],[dr?hr:nr,dr?nr:hr,0]],Tr=br<0?st.EXTENT+br:br,jr=[dr?Tr:(Gt+nr)/2,dr?(Gt+nr)/2:Tr,0];return hr===0&&br<0||hr!==0&&br>0?Et.getForTilePoints(or,[jr],!0,sr):Cr.push(jr),Et.getForTilePoints(ut,Cr,!0,ir),Math.max(Cr[0][2],Cr[1][2],jr[2])/Et.exaggeration()};for(let Gt=0;Gt<4;Gt++){const nr=(Gt<2?1:5)-Gt,hr=yt.borders[Gt];if(hr.length===0)continue;const dr=or=Rt[Gt](ut),br=At(dr);if(!(br&&br instanceof st.FillExtrusionBucket&&br.enableTerrain)||yt.borderDoneWithNeighborZ[Gt]===br.canonical.z&&br.borderDoneWithNeighborZ[nr]===yt.canonical.z||(sr=Et.findDEMTileFor(dr),!sr||!sr.dem))continue;if(!ir){const Ir=Et.findDEMTileFor(ut);if(!Ir||!Ir.dem)return;ir=Ir}const Cr=br.borders[nr];let Tr=0;const jr=br.borderDoneWithNeighborZ[nr]!==yt.canonical.z;if(yt.canonical.z===br.canonical.z){for(let Ir=0;Ir<hr.length;Ir++){const Ur=yt.featuresOnBorder[hr[Ir]],wn=Ur.borders[Gt];let Nr;for(;Tr<Cr.length&&(Nr=br.featuresOnBorder[Cr[Tr]],!(Nr.borders[nr][1]>wn[0]+3));)jr&&br.encodeCentroid(void 0,Nr,!1),Tr++;if(Nr&&Tr<Cr.length){const hn=Tr;let Hr=0;for(;!(Nr.borders[nr][0]>wn[1]-3)&&(Hr++,++Tr!==Cr.length);)Nr=br.featuresOnBorder[Cr[Tr]];if(Nr=br.featuresOnBorder[Cr[hn]],Ur.intersectsCount()>1||Nr.intersectsCount()>1||Hr!==1){Hr!==1&&(Tr=hn),yt.encodeCentroid(void 0,Ur,!1),jr&&br.encodeCentroid(void 0,Nr,!1);continue}const vn=Vt[Gt](Ur,Nr),Fr=Gt%2?st.EXTENT-1:0;er.x=lr(vn[0],Math.min(st.EXTENT-1,vn[1]),Fr,Gt<2,vn[2]),er.y=0,yt.encodeCentroid(er,Ur,!1),jr&&br.encodeCentroid(er,Nr,!1)}else yt.encodeCentroid(void 0,Ur,!1)}yt.borderDoneWithNeighborZ[Gt]=br.canonical.z,yt.needsCentroidUpdate=!0,jr&&(br.borderDoneWithNeighborZ[nr]=yt.canonical.z,br.needsCentroidUpdate=!0)}else{for(const Ir of hr)yt.encodeCentroid(void 0,yt.featuresOnBorder[Ir],!1);if(jr){for(const Ir of Cr)br.encodeCentroid(void 0,br.featuresOnBorder[Ir],!1);br.borderDoneWithNeighborZ[nr]=yt.canonical.z,br.needsCentroidUpdate=!0}yt.borderDoneWithNeighborZ[Gt]=br.canonical.z,yt.needsCentroidUpdate=!0}}(yt.needsCentroidUpdate||!yt.centroidVertexBuffer&&yt.centroidVertexArray.length!==0)&&yt.uploadCentroid(ft)}const ep=new st.Color(1,0,0,1),gv=new st.Color(0,1,0,1),yv=new st.Color(0,0,1,1),_v=new st.Color(1,0,1,1),xv=new st.Color(0,1,1,1);function vv(ft,ot,ut){const yt=ft.context,vt=ft.transform,Et=yt.gl,Rt=vt.projection.name==="globe",At=Rt?["PROJECTION_GLOBE_VIEW"]:null;let It=ut.projMatrix;if(Rt&&st.globeToMercatorTransition(vt.zoom)>0){const Ur=st.transitionTileAABBinECEF(ut.canonical,vt),wn=st.globeDenormalizeECEF(Ur);It=st.multiply(new Float32Array(16),vt.globeMatrix,wn),st.multiply(It,vt.projMatrix,It)}const Nt=ft.useProgram("debug",null,At),$t=ot.getTileByID(ut.key);ft.terrain&&ft.terrain.setupElevationDraw($t,Nt);const Vt=st.DepthMode.disabled,er=st.StencilMode.disabled,ir=ft.colorModeForRenderPass(),sr="$debug";yt.activeTexture.set(Et.TEXTURE0),ft.emptyTexture.bind(Et.LINEAR,Et.CLAMP_TO_EDGE),Rt?$t._makeGlobeTileDebugBuffers(ft.context,vt):$t._makeDebugTileBoundsBuffers(ft.context,vt.projection);const or=$t._tileDebugBuffer||ft.debugBuffer,lr=$t._tileDebugIndexBuffer||ft.debugIndexBuffer,Gt=$t._tileDebugSegments||ft.debugSegments;Nt.draw(yt,Et.LINE_STRIP,Vt,er,ir,st.CullFaceMode.disabled,_m(It,st.Color.red),sr,or,lr,Gt,null,null,null,[$t._globeTileDebugBorderBuffer]);const nr=$t.latestRawTileData,hr=Math.floor((nr&&nr.byteLength||0)/1024),dr=ot.getTile(ut).tileSize,br=512/Math.min(dr,512)*(ut.overscaledZ/vt.zoom)*.5;let Cr=ut.canonical.toString();ut.overscaledZ!==ut.canonical.z&&(Cr+=` => ${ut.overscaledZ}`),Cr+=` ${hr}kb`,function(Ur,wn){Ur.initDebugOverlayCanvas();const Nr=Ur.debugOverlayCanvas,hn=Ur.context.gl,Hr=Ur.debugOverlayCanvas.getContext("2d");Hr.clearRect(0,0,Nr.width,Nr.height),Hr.shadowColor="white",Hr.shadowBlur=2,Hr.lineWidth=1.5,Hr.strokeStyle="white",Hr.textBaseline="top",Hr.font="bold 36px Open Sans, sans-serif",Hr.fillText(wn,5,5),Hr.strokeText(wn,5,5),Ur.debugOverlayTexture.update(Nr),Ur.debugOverlayTexture.bind(hn.LINEAR,hn.CLAMP_TO_EDGE)}(ft,Cr);const Tr=$t._tileDebugTextBuffer||ft.debugBuffer,jr=$t._tileDebugTextIndexBuffer||ft.quadTriangleIndexBuffer,Ir=$t._tileDebugTextSegments||ft.debugSegments;Nt.draw(yt,Et.TRIANGLES,Vt,er,st.ColorMode.alphaBlended,st.CullFaceMode.disabled,_m(It,st.Color.transparent,br),sr,Tr,jr,Ir,null,null,null,[$t._globeTileDebugTextBuffer])}function tx(ft,ot,ut,yt){tp(ft,0,ot+ut/2,ft.transform.width,ut,yt)}function Em(ft,ot,ut,yt){tp(ft,ot-ut/2,0,ut,ft.transform.height,yt)}function tp(ft,ot,ut,yt,vt,Et){const Rt=ft.context,At=Rt.gl;At.enable(At.SCISSOR_TEST),At.scissor(ot*st.exported.devicePixelRatio,ut*st.exported.devicePixelRatio,yt*st.exported.devicePixelRatio,vt*st.exported.devicePixelRatio),Rt.clear({color:Et}),At.disable(At.SCISSOR_TEST)}const rx=st.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:nx}=rx;function ou(ft,ot,ut,yt){ft.emplaceBack(ot,ut,yt)}class Sm{constructor(ot){this.vertexArray=new st.StructArrayLayout3f12,this.indices=new st.StructArrayLayout3ui6,ou(this.vertexArray,-1,-1,1),ou(this.vertexArray,1,-1,1),ou(this.vertexArray,-1,1,1),ou(this.vertexArray,1,1,1),ou(this.vertexArray,-1,-1,-1),ou(this.vertexArray,1,-1,-1),ou(this.vertexArray,-1,1,-1),ou(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=ot.createVertexBuffer(this.vertexArray,nx),this.indexBuffer=ot.createIndexBuffer(this.indices),this.segment=st.SegmentVector.simpleSegment(0,0,36,12)}}function _l(ft,ot,ut,yt,vt,Et){const Rt=ft.gl,At=ot.paint.get("sky-atmosphere-color"),It=ot.paint.get("sky-atmosphere-halo-color"),Nt=ot.paint.get("sky-atmosphere-sun-intensity"),$t=((Vt,er,ir,sr,or)=>({u_matrix_3f:Vt,u_sun_direction:er,u_sun_intensity:ir,u_color_tint_r:[sr.r,sr.g,sr.b,sr.a],u_color_tint_m:[or.r,or.g,or.b,or.a],u_luminance:5e-5}))(st.fromMat4(st.create$1(),yt),vt,Nt,At,It);Rt.framebufferTexture2D(Rt.FRAMEBUFFER,Rt.COLOR_ATTACHMENT0,Rt.TEXTURE_CUBE_MAP_POSITIVE_X+Et,ot.skyboxTexture,0),ut.draw(ft,Rt.TRIANGLES,st.DepthMode.disabled,st.StencilMode.disabled,st.ColorMode.unblended,st.CullFaceMode.frontCW,$t,"skyboxCapture",ot.skyboxGeometry.vertexBuffer,ot.skyboxGeometry.indexBuffer,ot.skyboxGeometry.segment)}const zp=st.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class ix{constructor(ot){const ut=new st.StructArrayLayout5f20;ut.emplaceBack(-1,1,1,0,0),ut.emplaceBack(1,1,1,1,0),ut.emplaceBack(1,-1,1,1,1),ut.emplaceBack(-1,-1,1,0,1);const yt=new st.StructArrayLayout3ui6;yt.emplaceBack(0,1,2),yt.emplaceBack(2,3,0),this.vertexBuffer=ot.createVertexBuffer(ut,zp.members),this.indexBuffer=ot.createIndexBuffer(yt),this.segments=st.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Du={symbol:function(ft,ot,ut,yt,vt){if(ft.renderPass!=="translucent")return;const Et=st.StencilMode.disabled,Rt=ft.colorModeForRenderPass();ut.layout.get("text-variable-anchor")&&function(At,It,Nt,$t,Vt,er,ir){const sr=It.transform,or=Vt==="map",lr=er==="map";for(const Gt of At){const nr=$t.getTile(Gt),hr=nr.getBucket(Nt);if(!hr||!hr.text||!hr.text.segments.get().length)continue;const dr=st.evaluateSizeForZoom(hr.textSizeData,sr.zoom),br=Ho(Gt,hr.getProjection(),sr),Cr=sr.calculatePixelsToTileUnitsMatrix(nr),Tr=Yr(br,nr.tileID.canonical,lr,or,sr,hr.getProjection(),Cr),jr=Nt.layout.get("icon-text-fit")!=="none"&&hr.hasIconData();if(dr){const Ir=Math.pow(2,sr.zoom-nr.tileID.overscaledZ);mv(hr,or,lr,ir,st.symbolSize,sr,Tr,Gt,Ir,dr,jr)}}}(yt,ft,ut,ot,ut.layout.get("text-rotation-alignment"),ut.layout.get("text-pitch-alignment"),vt),ut.paint.get("icon-opacity").constantOr(1)!==0&&Q_(ft,ot,ut,yt,!1,ut.paint.get("icon-translate"),ut.paint.get("icon-translate-anchor"),ut.layout.get("icon-rotation-alignment"),ut.layout.get("icon-pitch-alignment"),ut.layout.get("icon-keep-upright"),Et,Rt),ut.paint.get("text-opacity").constantOr(1)!==0&&Q_(ft,ot,ut,yt,!0,ut.paint.get("text-translate"),ut.paint.get("text-translate-anchor"),ut.layout.get("text-rotation-alignment"),ut.layout.get("text-pitch-alignment"),ut.layout.get("text-keep-upright"),Et,Rt),ot.map.showCollisionBoxes&&($p(ft,ot,ut,yt,ut.paint.get("text-translate"),ut.paint.get("text-translate-anchor"),!0),$p(ft,ot,ut,yt,ut.paint.get("icon-translate"),ut.paint.get("icon-translate-anchor"),!1))},circle:function(ft,ot,ut,yt){if(ft.renderPass!=="translucent")return;const vt=ut.paint.get("circle-opacity"),Et=ut.paint.get("circle-stroke-width"),Rt=ut.paint.get("circle-stroke-opacity"),At=ut.layout.get("circle-sort-key").constantOr(1)!==void 0;if(vt.constantOr(1)===0&&(Et.constantOr(1)===0||Rt.constantOr(1)===0))return;const It=ft.context,Nt=It.gl,$t=ft.transform,Vt=ft.depthModeForSublayer(0,st.DepthMode.ReadOnly),er=st.StencilMode.disabled,ir=ft.colorModeForRenderPass(),sr=$t.projection.name==="globe",or=[st.mercatorXfromLng($t.center.lng),st.mercatorYfromLat($t.center.lat)],lr=[];for(let nr=0;nr<yt.length;nr++){const hr=yt[nr],dr=ot.getTile(hr),br=dr.getBucket(ut);if(!br||br.projection.name!==$t.projection.name)continue;const Cr=br.programConfigurations.get(ut.id),Tr=ky(ut);sr&&Tr.push("PROJECTION_GLOBE_VIEW");const jr=ft.useProgram("circle",Cr,Tr),Ir=br.layoutVertexBuffer,Ur=br.globeExtVertexBuffer,wn=br.indexBuffer,Nr=$t.projection.createInversionMatrix($t,hr.canonical),hn={programConfiguration:Cr,program:jr,layoutVertexBuffer:Ir,globeExtVertexBuffer:Ur,indexBuffer:wn,uniformValues:Ay(ft,hr,dr,Nr,or,ut),tile:dr};if(At){const Hr=br.segments.get();for(const vn of Hr)lr.push({segments:new st.SegmentVector([vn]),sortKey:vn.sortKey,state:hn})}else lr.push({segments:br.segments,sortKey:0,state:hn})}At&&lr.sort((nr,hr)=>nr.sortKey-hr.sortKey);const Gt={useDepthForOcclusion:!sr};for(const nr of lr){const{programConfiguration:hr,program:dr,layoutVertexBuffer:br,globeExtVertexBuffer:Cr,indexBuffer:Tr,uniformValues:jr,tile:Ir}=nr.state,Ur=nr.segments;ft.terrain&&ft.terrain.setupElevationDraw(Ir,dr,Gt),ft.prepareDrawProgram(It,dr,Ir.tileID.toUnwrapped()),dr.draw(It,Nt.TRIANGLES,Vt,er,ir,st.CullFaceMode.disabled,jr,ut.id,br,Tr,Ur,ut.paint,$t.zoom,hr,[Cr])}},heatmap:function(ft,ot,ut,yt){if(ut.paint.get("heatmap-opacity")!==0)if(ft.renderPass==="offscreen"){const vt=ft.context,Et=vt.gl,Rt=st.StencilMode.disabled,At=new st.ColorMode([Et.ONE,Et.ONE],st.Color.transparent,[!0,!0,!0,!0]);(function(ir,sr,or,lr){const Gt=ir.gl,nr=sr.width*lr,hr=sr.height*lr;ir.activeTexture.set(Gt.TEXTURE1),ir.viewport.set([0,0,nr,hr]);let dr=or.heatmapFbo;if(!dr||dr&&(dr.width!==nr||dr.height!==hr)){dr&&dr.destroy();const br=Gt.createTexture();Gt.bindTexture(Gt.TEXTURE_2D,br),Gt.texParameteri(Gt.TEXTURE_2D,Gt.TEXTURE_WRAP_S,Gt.CLAMP_TO_EDGE),Gt.texParameteri(Gt.TEXTURE_2D,Gt.TEXTURE_WRAP_T,Gt.CLAMP_TO_EDGE),Gt.texParameteri(Gt.TEXTURE_2D,Gt.TEXTURE_MIN_FILTER,Gt.LINEAR),Gt.texParameteri(Gt.TEXTURE_2D,Gt.TEXTURE_MAG_FILTER,Gt.LINEAR),dr=or.heatmapFbo=ir.createFramebuffer(nr,hr,!1),function(Cr,Tr,jr,Ir,Ur,wn){const Nr=Cr.gl;Nr.texImage2D(Nr.TEXTURE_2D,0,Cr.isWebGL2&&Cr.extRenderToTextureHalfFloat?Nr.RGBA16F:Nr.RGBA,Ur,wn,0,Nr.RGBA,Cr.extRenderToTextureHalfFloat?Cr.isWebGL2?Nr.HALF_FLOAT:Cr.extTextureHalfFloat.HALF_FLOAT_OES:Nr.UNSIGNED_BYTE,null),Ir.colorAttachment.set(jr)}(ir,0,br,dr,nr,hr)}else Gt.bindTexture(Gt.TEXTURE_2D,dr.colorAttachment.get()),ir.bindFramebuffer.set(dr.framebuffer)})(vt,ft,ut,ft.transform.projection.name==="globe"?.5:.25),vt.clear({color:st.Color.transparent});const It=ft.transform,Nt=It.projection.name==="globe",$t=Nt?["PROJECTION_GLOBE_VIEW"]:null,Vt=Nt?st.CullFaceMode.frontCCW:st.CullFaceMode.disabled,er=[st.mercatorXfromLng(It.center.lng),st.mercatorYfromLat(It.center.lat)];for(let ir=0;ir<yt.length;ir++){const sr=yt[ir];if(ot.hasRenderableParent(sr))continue;const or=ot.getTile(sr),lr=or.getBucket(ut);if(!lr||lr.projection.name!==It.projection.name)continue;const Gt=lr.programConfigurations.get(ut.id),nr=ft.useProgram("heatmap",Gt,$t),{zoom:hr}=ft.transform;ft.terrain&&ft.terrain.setupElevationDraw(or,nr),ft.prepareDrawProgram(vt,nr,sr.toUnwrapped());const dr=It.projection.createInversionMatrix(It,sr.canonical);nr.draw(vt,Et.TRIANGLES,st.DepthMode.disabled,Rt,At,Vt,X_(ft,sr,or,dr,er,hr,ut.paint.get("heatmap-intensity")),ut.id,lr.layoutVertexBuffer,lr.indexBuffer,lr.segments,ut.paint,ft.transform.zoom,Gt,Nt?[lr.globeExtVertexBuffer]:null)}vt.viewport.set([0,0,ft.width,ft.height])}else ft.renderPass==="translucent"&&(ft.context.setColorMode(ft.colorModeForRenderPass()),function(vt,Et){const Rt=vt.context,At=Rt.gl,It=Et.heatmapFbo;if(!It)return;Rt.activeTexture.set(At.TEXTURE0),At.bindTexture(At.TEXTURE_2D,It.colorAttachment.get()),Rt.activeTexture.set(At.TEXTURE1);let Nt=Et.colorRampTexture;Nt||(Nt=Et.colorRampTexture=new st.Texture(Rt,Et.colorRamp,At.RGBA)),Nt.bind(At.LINEAR,At.CLAMP_TO_EDGE),vt.useProgram("heatmapTexture").draw(Rt,At.TRIANGLES,st.DepthMode.disabled,st.StencilMode.disabled,vt.colorModeForRenderPass(),st.CullFaceMode.disabled,(($t,Vt,er,ir)=>({u_image:0,u_color_ramp:1,u_opacity:Vt.paint.get("heatmap-opacity")}))(0,Et),Et.id,vt.viewportBuffer,vt.quadTriangleIndexBuffer,vt.viewportSegments,Et.paint,vt.transform.zoom)}(ft,ut))},line:function(ft,ot,ut,yt){if(ft.renderPass!=="translucent")return;const vt=ut.paint.get("line-opacity"),Et=ut.paint.get("line-width");if(vt.constantOr(1)===0||Et.constantOr(1)===0)return;const Rt=ft.depthModeForSublayer(0,st.DepthMode.ReadOnly),At=ft.colorModeForRenderPass(),It=ft.terrain&&ft.terrain.renderingToTexture?1:st.exported.devicePixelRatio,Nt=ut.paint.get("line-dasharray"),$t=Nt.constantOr(1),Vt=ut.layout.get("line-cap"),er=ut.paint.get("line-pattern"),ir=er.constantOr(1),sr=ut.paint.get("line-gradient"),or=ir?"linePattern":"line",lr=ft.context,Gt=lr.gl,nr=(dr=>{const br=[];Lp(dr)&&br.push("RENDER_LINE_DASH"),dr.paint.get("line-gradient")&&br.push("RENDER_LINE_GRADIENT");const Cr=dr.paint.get("line-trim-offset");Cr[0]===0&&Cr[1]===0||br.push("RENDER_LINE_TRIM_OFFSET");const Tr=dr.paint.get("line-pattern").constantOr(1),jr=dr.paint.get("line-opacity").constantOr(1)!==1;return!Tr&&jr&&br.push("RENDER_LINE_ALPHA_DISCARD"),br})(ut);let hr=nr.includes("RENDER_LINE_ALPHA_DISCARD");ft.terrain&&ft.terrain.clipOrMaskOverlapStencilType()&&(hr=!1);for(const dr of yt){const br=ot.getTile(dr);if(ir&&!br.patternsLoaded())continue;const Cr=br.getBucket(ut);if(!Cr)continue;ft.prepareDrawTile();const Tr=Cr.programConfigurations.get(ut.id),jr=ft.useProgram(or,Tr,nr),Ir=er.constantOr(null);if(Ir&&br.imageAtlas){const cn=br.imageAtlas.patternPositions[Ir.toString()];cn&&Tr.setConstantPatternPositions(cn)}const Ur=Nt.constantOr(null),wn=Vt.constantOr(null);if(!ir&&Ur&&wn&&br.lineAtlas){const cn=br.lineAtlas.getDash(Ur,wn);cn&&Tr.setConstantPatternPositions(cn)}let[Nr,hn]=ut.paint.get("line-trim-offset");(wn==="round"||wn==="square")&&Nr!==hn&&(Nr===0&&(Nr-=1),hn===1&&(hn+=1));const Hr=ft.terrain?dr.projMatrix:null,vn=ir?Dp(ft,br,ut,Hr,It):pv(ft,br,ut,Hr,Cr.lineClipsArray.length,It,[Nr,hn]);if(sr){const cn=Cr.gradients[ut.id];let En=cn.texture;if(ut.gradientVersion!==cn.version){let yn=256;if(ut.stepInterpolant){const Sn=ot.getSource().maxzoom,Gn=dr.canonical.z===Sn?Math.ceil(1<<ft.transform.maxZoom-dr.canonical.z):1;yn=st.clamp(st.nextPowerOfTwo(Cr.maxLineLength/st.EXTENT*1024*Gn),256,lr.maxTextureSize)}cn.gradient=st.renderColorRamp({expression:ut.gradientExpression(),evaluationKey:"lineProgress",resolution:yn,image:cn.gradient||void 0,clips:Cr.lineClipsArray}),cn.texture?cn.texture.update(cn.gradient):cn.texture=new st.Texture(lr,cn.gradient,Gt.RGBA),cn.version=ut.gradientVersion,En=cn.texture}lr.activeTexture.set(Gt.TEXTURE1),En.bind(ut.stepInterpolant?Gt.NEAREST:Gt.LINEAR,Gt.CLAMP_TO_EDGE)}$t&&(lr.activeTexture.set(Gt.TEXTURE0),br.lineAtlasTexture.bind(Gt.LINEAR,Gt.REPEAT),Tr.updatePaintBuffers()),ir&&(lr.activeTexture.set(Gt.TEXTURE0),br.imageAtlasTexture.bind(Gt.LINEAR,Gt.CLAMP_TO_EDGE),Tr.updatePaintBuffers()),ft.prepareDrawProgram(lr,jr,dr.toUnwrapped());const Fr=cn=>{jr.draw(lr,Gt.TRIANGLES,Rt,cn,At,st.CullFaceMode.disabled,vn,ut.id,Cr.layoutVertexBuffer,Cr.indexBuffer,Cr.segments,ut.paint,ft.transform.zoom,Tr,[Cr.layoutVertexBuffer2])};if(hr){const cn=ft.stencilModeForClipping(dr).ref;cn===0&&ft.terrain&&lr.clear({stencil:0});const En={func:Gt.EQUAL,mask:255};vn.u_alpha_discard_threshold=.8,Fr(new st.StencilMode(En,cn,255,Gt.KEEP,Gt.KEEP,Gt.INVERT)),vn.u_alpha_discard_threshold=0,Fr(new st.StencilMode(En,cn,255,Gt.KEEP,Gt.KEEP,Gt.KEEP))}else Fr(ft.stencilModeForClipping(dr))}hr&&(ft.resetStencilClippingMasks(),ft.terrain&&lr.clear({stencil:0}))},fill:function(ft,ot,ut,yt){const vt=ut.paint.get("fill-color"),Et=ut.paint.get("fill-opacity");if(Et.constantOr(1)===0)return;const Rt=ft.colorModeForRenderPass(),At=ut.paint.get("fill-pattern"),It=ft.opaquePassEnabledForLayer()&&!At.constantOr(1)&&vt.constantOr(st.Color.transparent).a===1&&Et.constantOr(0)===1?"opaque":"translucent";if(ft.renderPass===It){const Nt=ft.depthModeForSublayer(1,ft.renderPass==="opaque"?st.DepthMode.ReadWrite:st.DepthMode.ReadOnly);J_(ft,ot,ut,yt,Nt,Rt,!1)}if(ft.renderPass==="translucent"&&ut.paint.get("fill-antialias")){const Nt=ft.depthModeForSublayer(ut.getPaintProperty("fill-outline-color")?2:0,st.DepthMode.ReadOnly);J_(ft,ot,ut,yt,Nt,Rt,!0)}},"fill-extrusion":function(ft,ot,ut,yt){const vt=ut.paint.get("fill-extrusion-opacity");if(vt!==0&&ft.renderPass==="translucent"){const Et=new st.DepthMode(ft.context.gl.LEQUAL,st.DepthMode.ReadWrite,ft.depthRangeFor3D);if(vt!==1||ut.paint.get("fill-extrusion-pattern").constantOr(1))bm(ft,ot,ut,yt,Et,st.StencilMode.disabled,st.ColorMode.disabled),bm(ft,ot,ut,yt,Et,ft.stencilModeFor3D(),ft.colorModeForRenderPass()),ft.resetStencilClippingMasks();else{const Rt=ft.colorModeForRenderPass();bm(ft,ot,ut,yt,Et,st.StencilMode.disabled,Rt)}}},hillshade:function(ft,ot,ut,yt){if(ft.renderPass!=="offscreen"&&ft.renderPass!=="translucent")return;const vt=ft.context,Et=ft.depthModeForSublayer(0,st.DepthMode.ReadOnly),Rt=ft.colorModeForRenderPass(),At=ft.terrain&&ft.terrain.renderingToTexture,[It,Nt]=ft.renderPass!=="translucent"||At?[{},yt]:ft.stencilConfigForOverlap(yt);for(const $t of Nt){const Vt=ot.getTile($t);if(Vt.needsHillshadePrepare&&ft.renderPass==="offscreen")G_(ft,Vt,ut,Et,st.StencilMode.disabled,Rt);else if(ft.renderPass==="translucent"){const er=At&&ft.terrain?ft.terrain.stencilModeForRTTOverlap($t):It[$t.overscaledZ];V_(ft,$t,Vt,ut,Et,er,Rt)}}vt.viewport.set([0,0,ft.width,ft.height]),ft.resetStencilClippingMasks()},raster:function(ft,ot,ut,yt,vt,Et){if(ft.renderPass!=="translucent"||ut.paint.get("raster-opacity")===0||!yt.length)return;const Rt=ft.context,At=Rt.gl,It=ot.getSource(),Nt=ft.useProgram("raster"),$t=ft.colorModeForRenderPass(),Vt=ft.terrain&&ft.terrain.renderingToTexture,[er,ir]=It instanceof ao||Vt?[{},yt]:ft.stencilConfigForOverlap(yt),sr=ir[ir.length-1].overscaledZ,or=!ft.options.moving;for(const lr of ir){const Gt=Vt?st.DepthMode.disabled:ft.depthModeForSublayer(lr.overscaledZ-sr,ut.paint.get("raster-opacity")===1?st.DepthMode.ReadWrite:st.DepthMode.ReadOnly,At.LESS),nr=lr.toUnwrapped(),hr=ot.getTile(lr);if(Vt&&(!hr||!hr.hasData()))continue;const dr=Vt?lr.projMatrix:ft.transform.calculateProjMatrix(nr,or),br=ft.terrain&&Vt?ft.terrain.stencilModeForRTTOverlap(lr):er[lr.overscaledZ],Cr=Et?0:ut.paint.get("raster-fade-duration");hr.registerFadeDuration(Cr);const Tr=ot.findLoadedParent(lr,0),jr=Ey(hr,Tr,ot,ft.transform,Cr);let Ir,Ur;ft.terrain&&ft.terrain.prepareDrawTile();const wn=ut.paint.get("raster-resampling")==="nearest"?At.NEAREST:At.LINEAR;Rt.activeTexture.set(At.TEXTURE0),hr.texture.bind(wn,At.CLAMP_TO_EDGE),Rt.activeTexture.set(At.TEXTURE1),Tr?(Tr.texture.bind(wn,At.CLAMP_TO_EDGE),Ir=Math.pow(2,Tr.tileID.overscaledZ-hr.tileID.overscaledZ),Ur=[hr.tileID.canonical.x*Ir%1,hr.tileID.canonical.y*Ir%1]):hr.texture.bind(wn,At.CLAMP_TO_EDGE),hr.texture.useMipmap&&Rt.extTextureFilterAnisotropic&&ft.transform.pitch>20&&At.texParameterf(At.TEXTURE_2D,Rt.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Rt.extTextureFilterAnisotropicMax);const Nr=My(dr,Ur||[0,0],Ir||1,jr,ut,It instanceof ao?It.perspectiveTransform:[0,0]);if(ft.prepareDrawProgram(Rt,Nt,nr),It instanceof ao)It.boundsBuffer&&It.boundsSegments&&Nt.draw(Rt,At.TRIANGLES,Gt,st.StencilMode.disabled,$t,st.CullFaceMode.disabled,Nr,ut.id,It.boundsBuffer,ft.quadTriangleIndexBuffer,It.boundsSegments);else{const{tileBoundsBuffer:hn,tileBoundsIndexBuffer:Hr,tileBoundsSegments:vn}=ft.getTileBoundsBuffers(hr);Nt.draw(Rt,At.TRIANGLES,Gt,br,$t,st.CullFaceMode.disabled,Nr,ut.id,hn,Hr,vn)}}ft.resetStencilClippingMasks()},background:function(ft,ot,ut,yt){const vt=ut.paint.get("background-color"),Et=ut.paint.get("background-opacity");if(Et===0)return;const Rt=ft.context,At=Rt.gl,It=ft.transform,Nt=It.tileSize,$t=ut.paint.get("background-pattern");if(ft.isPatternMissing($t))return;const Vt=!$t&&vt.a===1&&Et===1&&ft.opaquePassEnabledForLayer()?"opaque":"translucent";if(ft.renderPass!==Vt)return;const er=st.StencilMode.disabled,ir=ft.depthModeForSublayer(0,Vt==="opaque"?st.DepthMode.ReadWrite:st.DepthMode.ReadOnly),sr=ft.colorModeForRenderPass(),or=ft.useProgram($t?"backgroundPattern":"background");let lr,Gt=yt;Gt||(lr=ft.getBackgroundTiles(),Gt=Object.values(lr).map(nr=>nr.tileID)),$t&&(Rt.activeTexture.set(At.TEXTURE0),ft.imageManager.bind(ft.context));for(const nr of Gt){const hr=nr.toUnwrapped(),dr=yt?nr.projMatrix:ft.transform.calculateProjMatrix(hr);ft.prepareDrawTile();const br=ot?ot.getTile(nr):lr?lr[nr.key]:new st.Tile(nr,Nt,It.zoom,ft),Cr=$t?fv(dr,Et,ft,$t,{tileID:nr,tileSize:Nt}):Dy(dr,Et,vt);ft.prepareDrawProgram(Rt,or,hr);const{tileBoundsBuffer:Tr,tileBoundsIndexBuffer:jr,tileBoundsSegments:Ir}=ft.getTileBoundsBuffers(br);or.draw(Rt,At.TRIANGLES,ir,er,sr,st.CullFaceMode.disabled,Cr,ut.id,Tr,jr,Ir)}},sky:function(ft,ot,ut){const yt=ft.transform,vt=yt.projection.name==="mercator"||yt.projection.name==="globe"?1:st.smoothstep(7,8,yt.zoom),Et=ut.paint.get("sky-opacity")*vt;if(Et===0)return;const Rt=ft.context,At=ut.paint.get("sky-type"),It=new st.DepthMode(Rt.gl.LEQUAL,st.DepthMode.ReadOnly,[0,1]),Nt=ft.frameCounter/1e3%1;At==="atmosphere"?ft.renderPass==="offscreen"?ut.needsSkyboxCapture(ft)&&(function($t,Vt,er,ir){const sr=$t.context,or=sr.gl;let lr=Vt.skyboxFbo;if(!lr){lr=Vt.skyboxFbo=sr.createFramebuffer(32,32,!1),Vt.skyboxGeometry=new Sm(sr),Vt.skyboxTexture=sr.gl.createTexture(),or.bindTexture(or.TEXTURE_CUBE_MAP,Vt.skyboxTexture),or.texParameteri(or.TEXTURE_CUBE_MAP,or.TEXTURE_WRAP_S,or.CLAMP_TO_EDGE),or.texParameteri(or.TEXTURE_CUBE_MAP,or.TEXTURE_WRAP_T,or.CLAMP_TO_EDGE),or.texParameteri(or.TEXTURE_CUBE_MAP,or.TEXTURE_MIN_FILTER,or.LINEAR),or.texParameteri(or.TEXTURE_CUBE_MAP,or.TEXTURE_MAG_FILTER,or.LINEAR);for(let dr=0;dr<6;++dr)or.texImage2D(or.TEXTURE_CUBE_MAP_POSITIVE_X+dr,0,or.RGBA,32,32,0,or.RGBA,or.UNSIGNED_BYTE,null)}sr.bindFramebuffer.set(lr.framebuffer),sr.viewport.set([0,0,32,32]);const Gt=Vt.getCenter($t,!0),nr=$t.useProgram("skyboxCapture"),hr=new Float64Array(16);st.identity(hr),st.rotateY(hr,hr,.5*-Math.PI),_l(sr,Vt,nr,hr,Gt,0),st.identity(hr),st.rotateY(hr,hr,.5*Math.PI),_l(sr,Vt,nr,hr,Gt,1),st.identity(hr),st.rotateX(hr,hr,.5*-Math.PI),_l(sr,Vt,nr,hr,Gt,2),st.identity(hr),st.rotateX(hr,hr,.5*Math.PI),_l(sr,Vt,nr,hr,Gt,3),st.identity(hr),_l(sr,Vt,nr,hr,Gt,4),st.identity(hr),st.rotateY(hr,hr,Math.PI),_l(sr,Vt,nr,hr,Gt,5),sr.viewport.set([0,0,$t.width,$t.height])}(ft,ut),ut.markSkyboxValid(ft)):ft.renderPass==="sky"&&function($t,Vt,er,ir,sr){const or=$t.context,lr=or.gl,Gt=$t.transform,nr=$t.useProgram("skybox");or.activeTexture.set(lr.TEXTURE0),lr.bindTexture(lr.TEXTURE_CUBE_MAP,Vt.skyboxTexture);const hr=((dr,br,Cr,Tr,jr)=>({u_matrix:dr,u_sun_direction:br,u_cubemap:0,u_opacity:Tr,u_temporal_offset:jr}))(Gt.skyboxMatrix,Vt.getCenter($t,!1),0,ir,sr);$t.prepareDrawProgram(or,nr),nr.draw(or,lr.TRIANGLES,er,st.StencilMode.disabled,$t.colorModeForRenderPass(),st.CullFaceMode.backCW,hr,"skybox",Vt.skyboxGeometry.vertexBuffer,Vt.skyboxGeometry.indexBuffer,Vt.skyboxGeometry.segment)}(ft,ut,It,Et,Nt):At==="gradient"&&ft.renderPass==="sky"&&function($t,Vt,er,ir,sr){const or=$t.context,lr=or.gl,Gt=$t.transform,nr=$t.useProgram("skyboxGradient");Vt.skyboxGeometry||(Vt.skyboxGeometry=new Sm(or)),or.activeTexture.set(lr.TEXTURE0);let hr=Vt.colorRampTexture;hr||(hr=Vt.colorRampTexture=new st.Texture(or,Vt.colorRamp,lr.RGBA)),hr.bind(lr.LINEAR,lr.CLAMP_TO_EDGE);const dr=((br,Cr,Tr,jr,Ir)=>({u_matrix:br,u_color_ramp:0,u_center_direction:Cr,u_radius:st.degToRad(Tr),u_opacity:jr,u_temporal_offset:Ir}))(Gt.skyboxMatrix,Vt.getCenter($t,!1),Vt.paint.get("sky-gradient-radius"),ir,sr);$t.prepareDrawProgram(or,nr),nr.draw(or,lr.TRIANGLES,er,st.StencilMode.disabled,$t.colorModeForRenderPass(),st.CullFaceMode.backCW,dr,"skyboxGradient",Vt.skyboxGeometry.vertexBuffer,Vt.skyboxGeometry.indexBuffer,Vt.skyboxGeometry.segment)}(ft,ut,It,Et,Nt)},debug:function(ft,ot,ut){for(let yt=0;yt<ut.length;yt++)vv(ft,ot,ut[yt])},custom:function(ft,ot,ut,yt){const vt=ft.context,Et=ut.implementation;if(!ft.transform.projection.unsupportedLayers||!ft.transform.projection.unsupportedLayers.includes("custom")||ft.terrain&&(ft.terrain.renderingToTexture||ft.renderPass==="offscreen")&&ut.isLayerDraped()){if(ft.renderPass==="offscreen"){const Rt=Et.prerender;if(Rt){if(ft.setCustomLayerDefaults(),vt.setColorMode(ft.colorModeForRenderPass()),ft.transform.projection.name==="globe"){const At=ft.transform.pointMerc;Rt.call(Et,vt.gl,ft.transform.customLayerMatrix(),ft.transform.getProjection(),ft.transform.globeToMercatorMatrix(),st.globeToMercatorTransition(ft.transform.zoom),[At.x,At.y],ft.transform.pixelsPerMeterRatio)}else Rt.call(Et,vt.gl,ft.transform.customLayerMatrix());vt.setDirty(),ft.setBaseState()}}else if(ft.renderPass==="translucent"){if(ft.terrain&&ft.terrain.renderingToTexture){const At=Et.renderToTile;if(At){const It=yt[0].canonical,Nt=new st.MercatorCoordinate(It.x+yt[0].wrap*(1<<It.z),It.y,It.z);vt.setDepthMode(st.DepthMode.disabled),vt.setStencilMode(st.StencilMode.disabled),vt.setColorMode(ft.colorModeForRenderPass()),ft.setCustomLayerDefaults(),At.call(Et,vt.gl,Nt),vt.setDirty(),ft.setBaseState()}return}ft.setCustomLayerDefaults(),vt.setColorMode(ft.colorModeForRenderPass()),vt.setStencilMode(st.StencilMode.disabled);const Rt=Et.renderingMode==="3d"?new st.DepthMode(ft.context.gl.LEQUAL,st.DepthMode.ReadWrite,ft.depthRangeFor3D):ft.depthModeForSublayer(0,st.DepthMode.ReadOnly);if(vt.setDepthMode(Rt),ft.transform.projection.name==="globe"){const At=ft.transform.pointMerc;Et.render(vt.gl,ft.transform.customLayerMatrix(),ft.transform.getProjection(),ft.transform.globeToMercatorMatrix(),st.globeToMercatorTransition(ft.transform.zoom),[At.x,At.y],ft.transform.pixelsPerMeterRatio)}else Et.render(vt.gl,ft.transform.customLayerMatrix());vt.setDirty(),ft.setBaseState(),vt.bindFramebuffer.set(null)}}else st.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class rp{constructor(ot,ut,yt=!1){this.context=new An(ot,yt),this.transform=ut,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=st.SourceCache.maxUnderzooming+st.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(ot,ut){const yt=!!ot&&!!ot.terrain&&this.transform.projection.supportsTerrain;if(!(yt||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Ty(this,ot));const vt=this._terrain;this.transform.elevation=yt?vt:null,vt.update(ot,this.transform,ut)}_updateFog(ot){const ut=ot.fog;if(!ut||this.transform.projection.name==="globe"||ut.getOpacity(this.transform.pitch)<1||ut.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[yt,vt]=ut.getFovAdjustedRange(this.transform._fov);if(yt>vt)return void(this.transform.fogCullDistSq=null);const Et=yt+.78*(vt-yt);this.transform.fogCullDistSq=Et*Et}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(ot,ut){if(this.width=ot*st.exported.devicePixelRatio,this.height=ut*st.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const yt of this.style.order)this.style._layers[yt].resize()}setup(){const ot=this.context,ut=new st.StructArrayLayout2i4;ut.emplaceBack(0,0),ut.emplaceBack(st.EXTENT,0),ut.emplaceBack(0,st.EXTENT),ut.emplaceBack(st.EXTENT,st.EXTENT),this.tileExtentBuffer=ot.createVertexBuffer(ut,st.posAttributes.members),this.tileExtentSegments=st.SegmentVector.simpleSegment(0,0,4,2);const yt=new st.StructArrayLayout2i4;yt.emplaceBack(0,0),yt.emplaceBack(st.EXTENT,0),yt.emplaceBack(0,st.EXTENT),yt.emplaceBack(st.EXTENT,st.EXTENT),this.debugBuffer=ot.createVertexBuffer(yt,st.posAttributes.members),this.debugSegments=st.SegmentVector.simpleSegment(0,0,4,5);const vt=new st.StructArrayLayout2i4;vt.emplaceBack(-1,-1),vt.emplaceBack(1,-1),vt.emplaceBack(-1,1),vt.emplaceBack(1,1),this.viewportBuffer=ot.createVertexBuffer(vt,st.posAttributes.members),this.viewportSegments=st.SegmentVector.simpleSegment(0,0,4,2);const Et=new st.StructArrayLayout4i8;Et.emplaceBack(0,0,0,0),Et.emplaceBack(st.EXTENT,0,st.EXTENT,0),Et.emplaceBack(0,st.EXTENT,0,st.EXTENT),Et.emplaceBack(st.EXTENT,st.EXTENT,st.EXTENT,st.EXTENT),this.mercatorBoundsBuffer=ot.createVertexBuffer(Et,st.boundsAttributes.members),this.mercatorBoundsSegments=st.SegmentVector.simpleSegment(0,0,4,2);const Rt=new st.StructArrayLayout3ui6;Rt.emplaceBack(0,1,2),Rt.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=ot.createIndexBuffer(Rt);const At=new st.StructArrayLayout1ui2;for(const Nt of[0,1,3,2,0])At.emplaceBack(Nt);this.debugIndexBuffer=ot.createIndexBuffer(At),this.emptyTexture=new st.Texture(ot,new st.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),ot.gl.RGBA),this.identityMat=st.create();const It=this.context.gl;this.stencilClearMode=new st.StencilMode({func:It.ALWAYS,mask:0},0,255,It.ZERO,It.ZERO,It.ZERO),this.loadTimeStamps.push(st.window.performance.now()),this.atmosphereBuffer=new ix(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(ot){return ot._makeTileBoundsBuffers(this.context,this.transform.projection),ot._tileBoundsBuffer?{tileBoundsBuffer:ot._tileBoundsBuffer,tileBoundsIndexBuffer:ot._tileBoundsIndexBuffer,tileBoundsSegments:ot._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const ot=this.context,ut=ot.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(ot,ut.TRIANGLES,st.DepthMode.disabled,this.stencilClearMode,st.ColorMode.disabled,st.CullFaceMode.disabled,Mp(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(ot,ut,yt){if(!ut||this.currentStencilSource===ut.id||!ot.isTileClipped()||!yt||yt.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let At=!1;for(const It of yt)if(this._tileClippingMaskIDs[It.key]===void 0){At=!0;break}if(!At)return}this.currentStencilSource=ut.id;const vt=this.context,Et=vt.gl;this.nextStencilID+yt.length>256&&this.clearStencil(),vt.setColorMode(st.ColorMode.disabled),vt.setDepthMode(st.DepthMode.disabled);const Rt=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const At of yt){const It=ut.getTile(At),Nt=this._tileClippingMaskIDs[At.key]=this.nextStencilID++,{tileBoundsBuffer:$t,tileBoundsIndexBuffer:Vt,tileBoundsSegments:er}=this.getTileBoundsBuffers(It);Rt.draw(vt,Et.TRIANGLES,st.DepthMode.disabled,new st.StencilMode({func:Et.ALWAYS,mask:0},Nt,255,Et.KEEP,Et.KEEP,Et.REPLACE),st.ColorMode.disabled,st.CullFaceMode.disabled,Mp(At.projMatrix),"$clipping",$t,Vt,er)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const ot=this.nextStencilID++,ut=this.context.gl;return new st.StencilMode({func:ut.NOTEQUAL,mask:255},ot,255,ut.KEEP,ut.KEEP,ut.REPLACE)}stencilModeForClipping(ot){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(ot);const ut=this.context.gl;return new st.StencilMode({func:ut.EQUAL,mask:255},this._tileClippingMaskIDs[ot.key],0,ut.KEEP,ut.KEEP,ut.REPLACE)}stencilConfigForOverlap(ot){const ut=this.context.gl,yt=ot.sort((Rt,At)=>At.overscaledZ-Rt.overscaledZ),vt=yt[yt.length-1].overscaledZ,Et=yt[0].overscaledZ-vt+1;if(Et>1){this.currentStencilSource=void 0,this.nextStencilID+Et>256&&this.clearStencil();const Rt={};for(let At=0;At<Et;At++)Rt[At+vt]=new st.StencilMode({func:ut.GEQUAL,mask:255},At+this.nextStencilID,255,ut.KEEP,ut.KEEP,ut.REPLACE);return this.nextStencilID+=Et,[Rt,yt]}return[{[vt]:st.StencilMode.disabled},yt]}colorModeForRenderPass(){const ot=this.context.gl;return this._showOverdrawInspector?new st.ColorMode([ot.CONSTANT_COLOR,ot.ONE],new st.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?st.ColorMode.unblended:st.ColorMode.alphaBlended}depthModeForSublayer(ot,ut,yt){if(!this.opaquePassEnabledForLayer())return st.DepthMode.disabled;const vt=1-((1+this.currentLayer)*this.numSublayers+ot)*this.depthEpsilon;return new st.DepthMode(yt||this.context.gl.LEQUAL,ut,[vt,vt])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(ot,ut){this.style=ot,this.options=ut,this.imageManager=ot.imageManager,this.glyphManager=ot.glyphManager,this.symbolFadeChange=ot.placement.symbolFadeChange(st.exported.now()),this.imageManager.beginFrame();const yt=this.style.order,vt=this.style._sourceCaches;for(const Nt in vt){const $t=vt[Nt];$t.used&&$t.prepare(this.context)}const Et={},Rt={},At={};for(const Nt in vt){const $t=vt[Nt];Et[Nt]=$t.getVisibleCoordinates(),Rt[Nt]=Et[Nt].slice().reverse(),At[Nt]=$t.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Nt=0;Nt<yt.length;Nt++)if(this.style._layers[yt[Nt]].is3D()){this.opaquePassCutoff=Nt;break}if(this.terrain&&(this.terrain.updateTileBinding(At),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new st.GlobeSharedBuffers(this.context)),!st.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const Nt of yt){const $t=this.style._layers[Nt],Vt=ot._getLayerSourceCache($t);if(!$t.hasOffscreenPass()||$t.isHidden(this.transform.zoom))continue;const er=Vt?Rt[Vt.id]:void 0;($t.type==="custom"||$t.isSky()||er&&er.length)&&this.renderLayer(this,Vt,$t,er)}this.depthRangeFor3D=[0,1-(ot.order.length+2)*this.numSublayers*this.depthEpsilon];const It=this.terrain;if(It&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&It.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:ut.showOverdrawInspector?st.Color.black:st.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=ut.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=yt.length-1;this.currentLayer>=0;this.currentLayer--){const Nt=this.style._layers[yt[this.currentLayer]],$t=ot._getLayerSourceCache(Nt);if(Nt.isSky())continue;const Vt=$t?Rt[$t.id]:void 0;this._renderTileClippingMasks(Nt,$t,Vt),this.renderLayer(this,$t,Nt,Vt)}if(this.style.fog&&this.transform.projection.supportsFog&&function(Nt,$t){const Vt=Nt.context,er=Vt.gl,ir=Nt.transform,sr=new st.DepthMode(er.LEQUAL,st.DepthMode.ReadOnly,[0,1]),or=Nt.useProgram("globeAtmosphere",null,ir.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),lr=st.globeToMercatorTransition(ir.zoom),Gt=$t.properties.get("color").toArray01(),nr=$t.properties.get("high-color").toArray01(),hr=$t.properties.get("space-color").toArray01PremultipliedAlpha(),dr=st.identity$1([]);st.rotateY$1(dr,dr,-st.degToRad(ir._center.lng)),st.rotateX$1(dr,dr,st.degToRad(ir._center.lat)),st.rotateZ$1(dr,dr,ir.angle),st.rotateX$1(dr,dr,-ir._pitch);const br=st.fromQuat(new Float32Array(16),dr),Cr=st.mapValue($t.properties.get("star-intensity"),0,1,0,.25),Tr=5e-4,jr=st.mapValue($t.properties.get("horizon-blend"),0,1,Tr,.25),Ir=st.globeUseCustomAntiAliasing(Nt,Vt,ir)&&jr===Tr?ir.worldSize/(2*Math.PI*1.025)-1:ir.globeRadius,Ur=Nt.frameCounter/1e3%1,wn=st.length(ir.globeCenterInViewSpace),Nr=Math.sqrt(Math.pow(wn,2)-Math.pow(Ir,2)),hn=Math.acos(Nr/wn),Hr=((Fr,cn,En,yn,Sn,Gn,Yn,On,Zn,fo,co,Vn,Co,Po)=>({u_frustum_tl:Fr,u_frustum_tr:cn,u_frustum_br:En,u_frustum_bl:yn,u_horizon:Sn,u_transition:Gn,u_fadeout_range:Yn,u_color:On,u_high_color:Zn,u_space_color:fo,u_star_intensity:co,u_star_size:5*st.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Vn,u_horizon_angle:Co,u_rotation_matrix:Po}))(ir.frustumCorners.TL,ir.frustumCorners.TR,ir.frustumCorners.BR,ir.frustumCorners.BL,ir.frustumCorners.horizon,lr,jr,Gt,nr,hr,Cr,Ur,hn,br);Nt.prepareDrawProgram(Vt,or);const vn=Nt.atmosphereBuffer;vn&&or.draw(Vt,er.TRIANGLES,sr,st.StencilMode.disabled,st.ColorMode.alphaBlended,st.CullFaceMode.backCW,Hr,"skybox",vn.vertexBuffer,vn.indexBuffer,vn.segments)}(this,this.style.fog),this.renderPass="sky",(st.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<yt.length;this.currentLayer++){const Nt=this.style._layers[yt[this.currentLayer]],$t=ot._getLayerSourceCache(Nt);Nt.isSky()&&this.renderLayer(this,$t,Nt,$t?Rt[$t.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<yt.length;){const Nt=this.style._layers[yt[this.currentLayer]],$t=ot._getLayerSourceCache(Nt);if(Nt.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(Nt)){if(Nt.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const Vt=$t?(Nt.type==="symbol"?At:Rt)[$t.id]:void 0;this._renderTileClippingMasks(Nt,$t,$t?Et[$t.id]:void 0),this.renderLayer(this,$t,Nt,Vt),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let Nt=null;st.values(this.style._layers).forEach($t=>{const Vt=ot._getLayerSourceCache($t);Vt&&!$t.isHidden(this.transform.zoom)&&(!Nt||Nt.getSource().maxzoom<Vt.getSource().maxzoom)&&(Nt=Vt)}),Nt&&this.options.showTileBoundaries&&Du.debug(this,Nt,Nt.getVisibleCoordinates())}this.options.showPadding&&function(Nt){const $t=Nt.transform.padding;tx(Nt,Nt.transform.height-($t.top||0),3,ep),tx(Nt,$t.bottom||0,3,gv),Em(Nt,$t.left||0,3,yv),Em(Nt,Nt.transform.width-($t.right||0),3,_v);const Vt=Nt.transform.centerPoint;(function(er,ir,sr,or){tp(er,ir-1,sr-10,2,20,or),tp(er,ir-10,sr-1,20,2,or)})(Nt,Vt.x,Nt.transform.height-Vt.y,xv)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(st.window.performance.now()),this.saveCanvasCopy())}renderLayer(ot,ut,yt,vt){yt.isHidden(this.transform.zoom)||(yt.type==="background"||yt.type==="sky"||yt.type==="custom"||vt&&vt.length)&&(this.id=yt.id,this.gpuTimingStart(yt),(!ot.transform.projection.unsupportedLayers||!ot.transform.projection.unsupportedLayers.includes(yt.type)||ot.terrain&&yt.type==="custom")&&Du[yt.type](ot,ut,yt,vt,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(ot){if(!this.options.gpuTiming)return;const ut=this.context.extTimerQuery;let yt=this.gpuTimers[ot.id];yt||(yt=this.gpuTimers[ot.id]={calls:0,cpuTime:0,query:ut.createQueryEXT()}),yt.calls++,ut.beginQueryEXT(ut.TIME_ELAPSED_EXT,yt.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const ot=this.context.extTimerQuery,ut=ot.createQueryEXT();this.deferredRenderGpuTimeQueries.push(ut),ot.beginQueryEXT(ot.TIME_ELAPSED_EXT,ut)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const ot=this.context.extTimerQuery;ot.endQueryEXT(ot.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const ot=this.context.extTimerQuery;ot.endQueryEXT(ot.TIME_ELAPSED_EXT)}collectGpuTimers(){const ot=this.gpuTimers;return this.gpuTimers={},ot}collectDeferredRenderGpuQueries(){const ot=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],ot}queryGpuTimers(ot){const ut={};for(const yt in ot){const vt=ot[yt],Et=this.context.extTimerQuery,Rt=Et.getQueryObjectEXT(vt.query,Et.QUERY_RESULT_EXT)/1e6;Et.deleteQueryEXT(vt.query),ut[yt]=Rt}return ut}queryGpuTimeDeferredRender(ot){if(!this.options.gpuTimingDeferredRender)return 0;const ut=this.context.extTimerQuery;let yt=0;for(const vt of ot)yt+=ut.getQueryObjectEXT(vt,ut.QUERY_RESULT_EXT)/1e6,ut.deleteQueryEXT(vt);return yt}translatePosMatrix(ot,ut,yt,vt,Et){if(!yt[0]&&!yt[1])return ot;const Rt=Et?vt==="map"?this.transform.angle:0:vt==="viewport"?-this.transform.angle:0;if(Rt){const Nt=Math.sin(Rt),$t=Math.cos(Rt);yt=[yt[0]*$t-yt[1]*Nt,yt[0]*Nt+yt[1]*$t]}const At=[Et?yt[0]:sn(ut,yt[0],this.transform.zoom),Et?yt[1]:sn(ut,yt[1],this.transform.zoom),0],It=new Float32Array(16);return st.translate(It,ot,At),It}saveTileTexture(ot){const ut=this._tileTextures[ot.size[0]];ut?ut.push(ot):this._tileTextures[ot.size[0]]=[ot]}getTileTexture(ot){const ut=this._tileTextures[ot];return ut&&ut.length>0?ut.pop():null}isPatternMissing(ot){return ot===null||ot!==void 0&&!this.imageManager.getPattern(ot.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const ot=this.terrain&&this.terrain.renderingToTexture,ut=this.terrain&&this.terrain.exaggeration()===0,yt=this.style&&this.style.fog,vt=[];return this.terrainRenderModeElevated()&&vt.push("TERRAIN"),this.transform.projection.name==="globe"&&vt.push("GLOBE"),ut&&vt.push("ZERO_EXAGGERATION"),yt&&!ot&&yt.getOpacity(this.transform.pitch)!==0&&vt.push("FOG"),ot&&vt.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&vt.push("OVERDRAW_INSPECTOR"),vt}useProgram(ot,ut,yt){this.cache=this.cache||{};const vt=yt||[],Et=this.currentGlobalDefines().concat(vt),Rt=yo.cacheKey(xy[ot],ot,Et,ut);return this.cache[Rt]||(this.cache[Rt]=new yo(this.context,ot,xy[ot],ut,Ly[ot],Et)),this.cache[Rt]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const ot=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(ot.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=st.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new st.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(ot,ut,yt){if(this.terrain&&this.terrain.renderingToTexture)return;const vt=this.style.fog;if(vt){const Et=vt.getOpacity(this.transform.pitch),Rt=((At,It,Nt,$t,Vt,er,ir,sr,or,lr,Gt)=>{const nr=At.transform,hr=It.properties.get("color").toArray01();hr[3]=$t;const dr=At.frameCounter/1e3%1;return{u_fog_matrix:Nt?nr.calculateFogTileMatrix(Nt):At.identityMat,u_fog_range:It.getFovAdjustedRange(nr._fov),u_fog_color:hr,u_fog_horizon_blend:It.properties.get("horizon-blend"),u_fog_temporal_offset:dr,u_frustum_tl:Vt,u_frustum_tr:er,u_frustum_br:ir,u_frustum_bl:sr,u_globe_pos:or,u_globe_radius:lr,u_viewport:Gt,u_globe_transition:st.globeToMercatorTransition(nr.zoom),u_is_globe:+(nr.projection.name==="globe")}})(this,vt,yt,Et,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*st.exported.devicePixelRatio,this.transform.height*st.exported.devicePixelRatio]);ut.setFogUniformValues(ot,Rt)}}setTileLoadedFlag(ot){this.tileLoaded=ot}saveCanvasCopy(){const ot=this.canvasCopy();ot&&(this.frameCopies.push(ot),this.tileLoaded=!1)}canvasCopy(){const ot=this.context.gl,ut=ot.createTexture();return ot.bindTexture(ot.TEXTURE_2D,ut),ot.copyTexImage2D(ot.TEXTURE_2D,0,ot.RGBA,0,0,ot.drawingBufferWidth,ot.drawingBufferHeight,0),ut}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const ot=this.style&&this.style.fog;return!!ot&&ot.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const ot=this._backgroundTiles,ut=this._backgroundTiles={},yt=this.transform.coveringTiles({tileSize:512});for(const vt of yt)ut[vt.key]=ot[vt.key]||new st.Tile(vt,512,this.transform.tileZoom,this);return ut}clearBackgroundTiles(){this._backgroundTiles={}}}class Tm{constructor(ot=0,ut=0,yt=0,vt=0){if(isNaN(ot)||ot<0||isNaN(ut)||ut<0||isNaN(yt)||yt<0||isNaN(vt)||vt<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=ot,this.bottom=ut,this.left=yt,this.right=vt}interpolate(ot,ut,yt){return ut.top!=null&&ot.top!=null&&(this.top=st.number(ot.top,ut.top,yt)),ut.bottom!=null&&ot.bottom!=null&&(this.bottom=st.number(ot.bottom,ut.bottom,yt)),ut.left!=null&&ot.left!=null&&(this.left=st.number(ot.left,ut.left,yt)),ut.right!=null&&ot.right!=null&&(this.right=st.number(ot.right,ut.right,yt)),this}getCenter(ot,ut){const yt=st.clamp((this.left+ot-this.right)/2,0,ot),vt=st.clamp((this.top+ut-this.bottom)/2,0,ut);return new st.Point(yt,vt)}equals(ot){return this.top===ot.top&&this.bottom===ot.bottom&&this.left===ot.left&&this.right===ot.right}clone(){return new Tm(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Cm(ft,ot){const ut=st.getColumn(ft,3);st.fromQuat(ft,ot),st.setColumn(ft,3,ut)}function _o(ft,ot){const ut=st.identity$1([]);return st.rotateZ$1(ut,ut,-ot),st.rotateX$1(ut,ut,-ft),ut}function Np(ft,ot){const ut=[ft[0],ft[1],0],yt=[ot[0],ot[1],0];if(st.length(ut)>=1e-15){const Rt=st.normalize([],ut);st.scale$2(yt,Rt,st.dot(yt,Rt)),ot[0]=yt[0],ot[1]=yt[1]}const vt=st.cross([],ot,ft);if(st.len(vt)<1e-15)return null;const Et=Math.atan2(-vt[1],vt[0]);return _o(Math.atan2(Math.sqrt(ft[0]*ft[0]+ft[1]*ft[1]),-ft[2]),Et)}class ox{constructor(ot,ut){this.position=ot,this.orientation=ut}get position(){return this._position}set position(ot){if(ot){const ut=ot instanceof st.MercatorCoordinate?ot:new st.MercatorCoordinate(ot[0],ot[1],ot[2]);this._renderWorldCopies&&(ut.x=st.wrap(ut.x,0,1)),this._position=ut}else this._position=null}lookAtPoint(ot,ut){if(this.orientation=null,!this.position)return;const yt=this.position,vt=this._elevation?this._elevation.getAtPointOrZero(st.MercatorCoordinate.fromLngLat(ot)):0,Et=st.MercatorCoordinate.fromLngLat(ot,vt),Rt=[Et.x-yt.x,Et.y-yt.y,Et.z-yt.z];ut||(ut=[0,0,1]),ut[2]=Math.abs(ut[2]),this.orientation=Np(Rt,ut)}setPitchBearing(ot,ut){this.orientation=_o(st.degToRad(ot),st.degToRad(-ut))}}class Rm{constructor(ot,ut){this._transform=st.identity([]),this.orientation=ut,this.position=ot}get mercatorPosition(){const ot=this.position;return new st.MercatorCoordinate(ot[0],ot[1],ot[2])}get position(){const ot=st.getColumn(this._transform,3);return[ot[0],ot[1],ot[2]]}set position(ot){var ut;ot&&st.setColumn(this._transform,3,[(ut=ot)[0],ut[1],ut[2],1])}get orientation(){return this._orientation}set orientation(ot){this._orientation=ot||st.identity$1([]),ot&&Cm(this._transform,this._orientation)}getPitchBearing(){const ot=this.forward(),ut=this.right();return{bearing:Math.atan2(-ut[1],ut[0]),pitch:Math.atan2(Math.sqrt(ot[0]*ot[0]+ot[1]*ot[1]),-ot[2])}}setPitchBearing(ot,ut){this._orientation=_o(ot,ut),Cm(this._transform,this._orientation)}forward(){const ot=st.getColumn(this._transform,2);return[-ot[0],-ot[1],-ot[2]]}up(){const ot=st.getColumn(this._transform,1);return[-ot[0],-ot[1],-ot[2]]}right(){const ot=st.getColumn(this._transform,0);return[ot[0],ot[1],ot[2]]}getCameraToWorld(ot,ut){const yt=new Float64Array(16);return st.invert(yt,this.getWorldToCamera(ot,ut)),yt}getWorldToCameraPosition(ot,ut,yt){const vt=this.position;st.scale$2(vt,vt,-ot);const Et=new Float64Array(16);return st.fromScaling(Et,[yt,yt,yt]),st.translate(Et,Et,vt),Et[10]*=ut,Et}getWorldToCamera(ot,ut){const yt=new Float64Array(16),vt=new Float64Array(4),Et=this.position;return st.conjugate(vt,this._orientation),st.scale$2(Et,Et,-ot),st.fromQuat(yt,vt),st.translate(yt,yt,Et),yt[1]*=-1,yt[5]*=-1,yt[9]*=-1,yt[13]*=-1,yt[8]*=ut,yt[9]*=ut,yt[10]*=ut,yt[11]*=ut,yt}getCameraToClipPerspective(ot,ut,yt,vt){const Et=new Float64Array(16);return st.perspective(Et,ot,ut,yt,vt),Et}getDistanceToElevation(ot,ut=!1){const yt=ot===0?0:st.mercatorZfromAltitude(ot,ut?st.latFromMercatorY(this.position[1]):this.position[1]),vt=this.forward();return(yt-this.position[2])/vt[2]}clone(){return new Rm([...this.position],[...this.orientation])}}function np(ft,ot){const ut=Am(ft.projection,ft.zoom,ft.width,ft.height),yt=function(Et,Rt,At,It,Nt){const $t=new st.LngLat(At.lng-180*su,At.lat),Vt=new st.LngLat(At.lng+180*su,At.lat),er=Et.project($t.lng,$t.lat),ir=Et.project(Vt.lng,Vt.lat),sr=-Math.atan2(ir.y-er.y,ir.x-er.x),or=st.MercatorCoordinate.fromLngLat(At);or.y=st.clamp(or.y,-1+su,1-su);const lr=or.toLngLat(),Gt=Et.project(lr.lng,lr.lat),nr=st.MercatorCoordinate.fromLngLat(lr);nr.x+=su;const hr=nr.toLngLat(),dr=Et.project(hr.lng,hr.lat),br=km(dr.x-Gt.x,dr.y-Gt.y,sr),Cr=st.MercatorCoordinate.fromLngLat(lr);Cr.y+=su;const Tr=Cr.toLngLat(),jr=Et.project(Tr.lng,Tr.lat),Ir=km(jr.x-Gt.x,jr.y-Gt.y,sr),Ur=Math.abs(br.x)/Math.abs(Ir.y),wn=st.identity([]);st.rotateZ(wn,wn,-sr*(1-(Nt?0:It)));const Nr=st.identity([]);return st.scale(Nr,Nr,[1,1-(1-Ur)*It,1]),Nr[4]=-Ir.x/Ir.y*It,st.rotateZ(Nr,Nr,sr),st.multiply(Nr,wn,Nr),Nr}(ft.projection,0,ft.center,ut,ot),vt=sx(ft);return st.scale(yt,yt,[vt,vt,1]),yt}function sx(ft){const ot=ft.projection,ut=Am(ft.projection,ft.zoom,ft.width,ft.height),yt=ax(ot,ft.center),vt=ax(ot,st.LngLat.convert(ot.center));return Math.pow(2,yt*ut+(1-ut)*vt)}function Am(ft,ot,ut,yt,vt=1/0){const Et=ft.range;if(!Et)return 0;const Rt=Math.min(vt,Math.max(ut,yt)),At=Math.log(Rt/1024)/Math.LN2;return st.smoothstep(Et[0]+At,Et[1]+At,ot)}const su=1/4e4;function ax(ft,ot){const ut=st.clamp(ot.lat,-st.MAX_MERCATOR_LATITUDE,st.MAX_MERCATOR_LATITUDE),yt=new st.LngLat(ot.lng-180*su,ut),vt=new st.LngLat(ot.lng+180*su,ut),Et=ft.project(yt.lng,ut),Rt=ft.project(vt.lng,ut),At=st.MercatorCoordinate.fromLngLat(yt),It=st.MercatorCoordinate.fromLngLat(vt),Nt=Rt.x-Et.x,$t=Rt.y-Et.y,Vt=It.x-At.x,er=It.y-At.y,ir=Math.sqrt((Vt*Vt+er*er)/(Nt*Nt+$t*$t));return Math.log(ir)/Math.LN2}function km(ft,ot,ut){const yt=Math.cos(ut),vt=Math.sin(ut);return{x:ft*yt-ot*vt,y:ft*vt+ot*yt}}class ip{constructor(ot,ut,yt,vt,Et,Rt,At){this.tileSize=512,this._renderWorldCopies=Et===void 0||Et,this._minZoom=ot||0,this._maxZoom=ut||22,this._minPitch=yt??0,this._maxPitch=vt??60,this.setProjection(Rt),this.setMaxBounds(At),this.width=0,this.height=0,this._center=new st.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Tm,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Rm,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const ot=new ip(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return ot._elevation=this._elevation,ot._centerAltitude=this._centerAltitude,ot._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,ot.tileSize=this.tileSize,ot.mercatorFromTransition=this.mercatorFromTransition,ot.width=this.width,ot.height=this.height,ot.cameraElevationReference=this.cameraElevationReference,ot._center=this._center,ot._setZoom(this.zoom),ot._seaLevelZoom=this._seaLevelZoom,ot.angle=this.angle,ot._fov=this._fov,ot._pitch=this._pitch,ot._nearZ=this._nearZ,ot._farZ=this._farZ,ot._averageElevation=this._averageElevation,ot._unmodified=this._unmodified,ot._edgeInsets=this._edgeInsets.clone(),ot._camera=this._camera.clone(),ot._calcMatrices(),ot.freezeTileCoverage=this.freezeTileCoverage,ot.frustumCorners=this.frustumCorners,ot}get elevation(){return this._elevation}set elevation(ot){this._elevation!==ot&&(this._elevation=ot,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(ot,ut=!1){const yt=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||yt)&&this._updateCameraOnTerrain(),(ot||yt)&&this._constrainCamera(ut),this._calcMatrices()}getProjection(){return st.pick(this.projection,["name","center","parallels"])}setProjection(ot){this.projectionOptions=ot||{name:"mercator"};const ut=this.projection?this.getProjection():void 0;this.projection=st.getProjection(this.projectionOptions);const yt=!Tt(ut,this.getProjection());return yt&&this._calcMatrices(),this.mercatorFromTransition=!1,yt}setMercatorFromTransition(){const ot=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=st.getProjection({name:"mercator"});const ut=ot!==this.projection.name;return ut&&this._calcMatrices(),ut}get minZoom(){return this._minZoom}set minZoom(ot){this._minZoom!==ot&&(this._minZoom=ot,this.zoom=Math.max(this.zoom,ot))}get maxZoom(){return this._maxZoom}set maxZoom(ot){this._maxZoom!==ot&&(this._maxZoom=ot,this.zoom=Math.min(this.zoom,ot))}get minPitch(){return this._minPitch}set minPitch(ot){this._minPitch!==ot&&(this._minPitch=ot,this.pitch=Math.max(this.pitch,ot))}get maxPitch(){return this._maxPitch}set maxPitch(ot){this._maxPitch!==ot&&(this._maxPitch=ot,this.pitch=Math.min(this.pitch,ot))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(ot){ot===void 0?ot=!0:ot===null&&(ot=!1),this._renderWorldCopies=ot}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const ot=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(ot))}get cameraWorldSize(){const ot=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(ot))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return st.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new st.Point(this.width,this.height)}get bearing(){return st.wrap(this.rotation,-180,180)}set bearing(ot){this.rotation=ot}get rotation(){return-this.angle/Math.PI*180}set rotation(ot){const ut=-ot*Math.PI/180;var yt;this.angle!==ut&&(this._unmodified=!1,this.angle=ut,this._calcMatrices(),this.rotationMatrix=(yt=new st.ARRAY_TYPE(4),st.ARRAY_TYPE!=Float32Array&&(yt[1]=0,yt[2]=0),yt[0]=1,yt[3]=1,yt),function(vt,Et,Rt){var At=Et[0],It=Et[1],Nt=Et[2],$t=Et[3],Vt=Math.sin(Rt),er=Math.cos(Rt);vt[0]=At*er+Nt*Vt,vt[1]=It*er+$t*Vt,vt[2]=At*-Vt+Nt*er,vt[3]=It*-Vt+$t*er}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(ot){const ut=st.clamp(ot,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==ut&&(this._unmodified=!1,this._pitch=ut,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const ot=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/ot)}set fov(ot){ot=Math.max(.01,Math.min(60,ot)),this._fov!==ot&&(this._unmodified=!1,this._fov=st.degToRad(ot),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(ot){this._averageElevation=ot,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(ot){const ut=Math.min(Math.max(ot,this.minZoom),this.maxZoom);this._zoom!==ut&&(this._unmodified=!1,this._setZoom(ut),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(ot){this._zoom=ot,this.scale=this.zoomScale(ot),this.tileZoom=Math.floor(ot),this.zoomFraction=ot-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const ot=this._elevation;this._centerAltitude=ot.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=ot.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const ot=this._elevation,ut=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],yt=this.horizonLineFromTop();let vt=0,Et=0;for(let Rt=0;Rt<ut.length;Rt++){const At=new st.Point(ut[Rt][0]*this.width,yt+ut[Rt][1]*(this.height-yt)),It=ot.pointCoordinate(At);if(!It)continue;const Nt=1/Math.hypot(It[0]-this._camera.position[0],It[1]-this._camera.position[1]);vt+=It[3]*Nt,Et+=Nt}return Et===0?NaN:vt/Et}get center(){return this._center}set center(ot){ot.lat===this._center.lat&&ot.lng===this._center.lng||(this._unmodified=!1,this._center=ot,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const ot=this._seaLevelZoom,ut=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),yt=this.pixelsPerMeter/this.worldSize*ut,vt=this._mercatorZfromZoom(ot),Et=this._mercatorZfromZoom(this._maxZoom),Rt=Math.max(vt-yt,Et);this._setZoom(this._zoomFromMercatorZ(Rt))}get padding(){return this._edgeInsets.toJSON()}set padding(ot){this._edgeInsets.equals(ot)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,ot,1),this._calcMatrices())}computeZoomRelativeTo(ot){const ut=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,ot.toAltitude()));let yt;yt=ot.z<this._camera.position[2]?[ut.x,ut.y,ut.z]:[ot.x,ot.y,ot.z];const vt=st.length(st.sub([],this._camera.position,yt));return st.clamp(this._zoomFromMercatorZ(vt),this._minZoom,this._maxZoom)}setFreeCameraOptions(ot){if(!this.height||!ot.position&&!ot.orientation)return;this._updateCameraState();let ut=!1;if(ot.orientation&&!st.exactEquals(ot.orientation,this._camera.orientation)&&(ut=this._setCameraOrientation(ot.orientation)),ot.position){const yt=[ot.position.x,ot.position.y,ot.position.z];st.exactEquals$1(yt,this._camera.position)||(this._setCameraPosition(yt),ut=!0)}ut&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const ot=this._camera.position,ut=new ox;return ut.position=new st.MercatorCoordinate(ot[0],ot[1],ot[2]),ut.orientation=this._camera.orientation,ut._elevation=this.elevation,ut._renderWorldCopies=this.renderWorldCopies,ut}_setCameraOrientation(ot){if(!st.length$1(ot))return!1;st.normalize$1(ot,ot);const ut=st.transformQuat([],[0,0,-1],ot),yt=st.transformQuat([],[0,-1,0],ot);if(yt[2]<0)return!1;const vt=Np(ut,yt);return!!vt&&(this._camera.orientation=vt,!0)}_setCameraPosition(ot){const ut=this.zoomScale(this.minZoom)*this.tileSize,yt=this.zoomScale(this.maxZoom)*this.tileSize,vt=this.cameraToCenterDistance;ot[2]=st.clamp(ot[2],vt/yt,vt/ut),this._camera.position=ot}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(ot){return this._edgeInsets.equals(ot)}interpolatePadding(ot,ut,yt){this._unmodified=!1,this._edgeInsets.interpolate(ot,ut,yt),this._constrain(),this._calcMatrices()}coveringZoomLevel(ot){const ut=(ot.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/ot.tileSize));return Math.max(0,ut)}getVisibleUnwrappedCoordinates(ot){const ut=[new st.UnwrappedTileID(0,ot)];if(this.renderWorldCopies){const yt=this.pointCoordinate(new st.Point(0,0)),vt=this.pointCoordinate(new st.Point(this.width,0)),Et=this.pointCoordinate(new st.Point(this.width,this.height)),Rt=this.pointCoordinate(new st.Point(0,this.height)),At=Math.floor(Math.min(yt.x,vt.x,Et.x,Rt.x)),It=Math.floor(Math.max(yt.x,vt.x,Et.x,Rt.x)),Nt=1;for(let $t=At-Nt;$t<=It+Nt;$t++)$t!==0&&ut.push(new st.UnwrappedTileID($t,ot))}return ut}coveringTiles(ot){let ut=this.coveringZoomLevel(ot);const yt=ut,vt=this.elevation&&!ot.isTerrainDEM,Et=this.projection.name==="mercator";if(ot.minzoom!==void 0&&ut<ot.minzoom)return[];ot.maxzoom!==void 0&&ut>ot.maxzoom&&(ut=ot.maxzoom);const Rt=this.locationCoordinate(this.center),At=this.center.lat,It=1<<ut,Nt=[It*Rt.x,It*Rt.y,0],$t=this.projection.name==="globe",Vt=!$t,er=st.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,ut,Vt),ir=$t?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),sr=It*st.mercatorZfromAltitude(1,this.center.lat),or=this._camera.position[2]/st.mercatorZfromAltitude(1,this.center.lat),lr=[It*ir.x,It*ir.y,or*(Vt?1:sr)],Gt=this.cameraToCenterDistance/ot.tileSize*(ot.roundZoom?1:.502),nr=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?ut:0,hr=ot.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,dr=ot.isTerrainDEM?-hr:this._elevation?this._elevation.getMinElevationBelowMSL():0,br=this.projection.isReprojectedInTileSpace?sx(this):1,Cr=Fr=>{const En=new st.MercatorCoordinate(Fr.x+25e-6,Fr.y,Fr.z),yn=new st.MercatorCoordinate(Fr.x,Fr.y+25e-6,Fr.z),Sn=Fr.toLngLat(),Gn=En.toLngLat(),Yn=yn.toLngLat(),On=this.locationCoordinate(Sn),Zn=this.locationCoordinate(Gn),fo=this.locationCoordinate(Yn),co=Math.hypot(Zn.x-On.x,Zn.y-On.y),Vn=Math.hypot(fo.x-On.x,fo.y-On.y);return Math.sqrt(co*Vn)*br/25e-6},Tr=Fr=>{const cn=hr,En=dr;return{aabb:st.tileAABB(this,It,0,0,0,Fr,En,cn,this.projection),zoom:0,x:0,y:0,minZ:En,maxZ:cn,wrap:Fr,fullyVisible:!1}},jr=[];let Ir=[];const Ur=ut,wn=ot.reparseOverscaled?yt:ut,Nr=Fr=>Fr*Fr,hn=Nr((or-this._centerAltitude)*sr),Hr=Fr=>{if(!this._elevation||!Fr.tileID||!Et)return;const cn=this._elevation.getMinMaxForTile(Fr.tileID),En=Fr.aabb;cn?(En.min[2]=cn.min,En.max[2]=cn.max,En.center[2]=(En.min[2]+En.max[2])/2):(Fr.shouldSplit=vn(Fr),Fr.shouldSplit||(En.min[2]=En.max[2]=En.center[2]=this._centerAltitude))},vn=Fr=>{if(Fr.zoom<nr)return!0;if(Fr.zoom===Ur)return!1;if(Fr.shouldSplit!=null)return Fr.shouldSplit;const cn=Fr.aabb.distanceX(lr),En=Fr.aabb.distanceY(lr);let yn=hn,Sn=1;if($t){yn=Nr(Fr.aabb.distanceZ(lr));const On=Math.pow(2,Fr.zoom),Zn=st.latFromMercatorY((Fr.y+1)/On),fo=st.latFromMercatorY(Fr.y/On),co=Math.min(Math.max(At,Zn),fo),Vn=st.circumferenceAtLatitude(co)/st.circumferenceAtLatitude(At);if(Sn=co===At?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Vn/this._mercatorScaleRatio),this.zoom<=st.GLOBE_ZOOM_THRESHOLD_MIN&&Fr.zoom===Ur-1&&Vn>=.9)return!0}else if(vt&&(yn=Nr(Fr.aabb.distanceZ(lr)*sr)),this.projection.isReprojectedInTileSpace&&yt<=5){const On=Math.pow(2,Fr.zoom),Zn=Cr(new st.MercatorCoordinate((Fr.x+.5)/On,(Fr.y+.5)/On));Sn=Zn>.85?1:Zn}const Gn=cn*cn+En*En+yn,Yn=Nr((1<<Ur-Fr.zoom)*Gt*Sn*((On,Zn)=>{if(Zn*Nr(.707)<On)return 1;const fo=Math.sqrt(Zn/On);return fo/(1.4144271570014144+(Math.pow(1.1,fo-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(yn,hn),Gn));return Gn<Yn};if(this.renderWorldCopies)for(let Fr=1;Fr<=3;Fr++)jr.push(Tr(-Fr)),jr.push(Tr(Fr));for(jr.push(Tr(0));jr.length>0;){const Fr=jr.pop(),cn=Fr.x,En=Fr.y;let yn=Fr.fullyVisible;if(!yn){const Sn=Fr.aabb.intersects(er);if(Sn===0)continue;yn=Sn===2}if(Fr.zoom!==Ur&&vn(Fr))for(let Sn=0;Sn<4;Sn++){const Gn=(cn<<1)+Sn%2,Yn=(En<<1)+(Sn>>1),On={aabb:Et?Fr.aabb.quadrant(Sn):st.tileAABB(this,It,Fr.zoom+1,Gn,Yn,Fr.wrap,Fr.minZ,Fr.maxZ,this.projection),zoom:Fr.zoom+1,x:Gn,y:Yn,wrap:Fr.wrap,fullyVisible:yn,tileID:void 0,shouldSplit:void 0,minZ:Fr.minZ,maxZ:Fr.maxZ};vt&&!$t&&(On.tileID=new st.OverscaledTileID(Fr.zoom+1===Ur?wn:Fr.zoom+1,Fr.wrap,Fr.zoom+1,Gn,Yn),Hr(On)),jr.push(On)}else{const Sn=Fr.zoom===Ur?wn:Fr.zoom;if(ot.minzoom&&ot.minzoom>Sn)continue;const Gn=Nt[0]-(.5+cn+(Fr.wrap<<Fr.zoom))*(1<<ut-Fr.zoom),Yn=Nt[1]-.5-En,On=Fr.tileID?Fr.tileID:new st.OverscaledTileID(Sn,Fr.wrap,Fr.zoom,cn,En);Ir.push({tileID:On,distanceSq:Gn*Gn+Yn*Yn})}}if(this.fogCullDistSq){const Fr=this.fogCullDistSq,cn=this.horizonLineFromTop();Ir=Ir.filter(En=>{const yn=[0,0,0,1],Sn=[st.EXTENT,st.EXTENT,0,1],Gn=this.calculateFogTileMatrix(En.tileID.toUnwrapped());st.transformMat4$1(yn,yn,Gn),st.transformMat4$1(Sn,Sn,Gn);const Yn=st.getAABBPointSquareDist(yn,Sn);if(Yn===0)return!0;let On=!1;const Zn=this._elevation;if(Zn&&Yn>Fr&&cn!==0){const fo=this.calculateProjMatrix(En.tileID.toUnwrapped());let co;ot.isTerrainDEM||(co=Zn.getMinMaxForTile(En.tileID)),co||(co={min:dr,max:hr});const Vn=st.furthestTileCorner(this.rotation),Co=[Vn[0]*st.EXTENT,Vn[1]*st.EXTENT,co.max];st.transformMat4(Co,Co,fo),On=(1-Co[1])*this.height*.5<cn}return Yn<Fr||On})}return Ir.sort((Fr,cn)=>Fr.distanceSq-cn.distanceSq).map(Fr=>Fr.tileID)}resize(ot,ut){this.width=ot,this.height=ut,this.pixelsToGLUnits=[2/ot,-2/ut],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(ot){return Math.pow(2,ot)}scaleZoom(ot){return Math.log(ot)/Math.LN2}project(ot){const ut=st.clamp(ot.lat,-st.MAX_MERCATOR_LATITUDE,st.MAX_MERCATOR_LATITUDE),yt=this.projection.project(ot.lng,ut);return new st.Point(yt.x*this.worldSize,yt.y*this.worldSize)}unproject(ot){return this.projection.unproject(ot.x/this.worldSize,ot.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/st.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(ot,ut){let yt,vt;const Et=this.centerPoint;if(this.projection.name==="globe"){const At=this.worldSize;yt=(ut.x-Et.x)/At,vt=(ut.y-Et.y)/At}else{const At=this.pointCoordinate(ut),It=this.pointCoordinate(Et);yt=At.x-It.x,vt=At.y-It.y}const Rt=this.locationCoordinate(ot);this.setLocation(new st.MercatorCoordinate(Rt.x-yt,Rt.y-vt))}setLocation(ot){this.center=this.coordinateLocation(ot),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(ot){return this.projection.locationPoint(this,ot)}locationPoint3D(ot){return this.projection.locationPoint(this,ot,!0)}pointLocation(ot){return this.coordinateLocation(this.pointCoordinate(ot))}pointLocation3D(ot){return this.coordinateLocation(this.pointCoordinate3D(ot))}locationCoordinate(ot,ut){const yt=ut?st.mercatorZfromAltitude(ut,ot.lat):void 0,vt=this.projection.project(ot.lng,ot.lat);return new st.MercatorCoordinate(vt.x,vt.y,yt)}coordinateLocation(ot){return this.projection.unproject(ot.x,ot.y)}pointRayIntersection(ot,ut){const yt=ut??this._centerAltitude,vt=[ot.x,ot.y,0,1],Et=[ot.x,ot.y,1,1];st.transformMat4$1(vt,vt,this.pixelMatrixInverse),st.transformMat4$1(Et,Et,this.pixelMatrixInverse);const Rt=Et[3];st.scale$1(vt,vt,1/vt[3]),st.scale$1(Et,Et,1/Rt);const At=vt[2],It=Et[2];return{p0:vt,p1:Et,t:At===It?0:(yt-At)/(It-At)}}screenPointToMercatorRay(ot){const ut=[ot.x,ot.y,0,1],yt=[ot.x,ot.y,1,1];return st.transformMat4$1(ut,ut,this.pixelMatrixInverse),st.transformMat4$1(yt,yt,this.pixelMatrixInverse),st.scale$1(ut,ut,1/ut[3]),st.scale$1(yt,yt,1/yt[3]),ut[2]=st.mercatorZfromAltitude(ut[2],this._center.lat)*this.worldSize,yt[2]=st.mercatorZfromAltitude(yt[2],this._center.lat)*this.worldSize,st.scale$1(ut,ut,1/this.worldSize),st.scale$1(yt,yt,1/this.worldSize),new st.Ray([ut[0],ut[1],ut[2]],st.normalize([],st.sub([],yt,ut)))}rayIntersectionCoordinate(ot){const{p0:ut,p1:yt,t:vt}=ot,Et=st.mercatorZfromAltitude(ut[2],this._center.lat),Rt=st.mercatorZfromAltitude(yt[2],this._center.lat);return new st.MercatorCoordinate(st.number(ut[0],yt[0],vt)/this.worldSize,st.number(ut[1],yt[1],vt)/this.worldSize,st.number(Et,Rt,vt))}pointCoordinate(ot,ut=this._centerAltitude){return this.projection.pointCoordinate(this,ot.x,ot.y,ut)}pointCoordinate3D(ot){if(!this.elevation)return this.pointCoordinate(ot);let ut=this.projection.pointCoordinate3D(this,ot.x,ot.y);if(ut)return new st.MercatorCoordinate(ut[0],ut[1],ut[2]);let yt=0,vt=this.horizonLineFromTop();if(ot.y>vt)return this.pointCoordinate(ot);const Et=.02*vt,Rt=ot.clone();for(let At=0;At<10&&vt-yt>Et;At++){Rt.y=st.number(yt,vt,.66);const It=this.projection.pointCoordinate3D(this,Rt.x,Rt.y);It?(vt=Rt.y,ut=It):yt=Rt.y}return ut?new st.MercatorCoordinate(ut[0],ut[1],ut[2]):this.pointCoordinate(ot)}isPointAboveHorizon(ot){return this.projection.isPointAboveHorizon(this,ot)}isPointOnSurface(ot){if(ot.y<0||ot.y>this.height||ot.x<0||ot.x>this.width)return!1;if(this.elevation||this.zoom>=st.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(ot);const ut=this.pointCoordinate(ot);return ut.y>=0&&ut.y<=1}_coordinatePoint(ot,ut){const yt=ut&&this.elevation?this.elevation.getAtPointOrZero(ot,this._centerAltitude):this._centerAltitude,vt=[ot.x*this.worldSize,ot.y*this.worldSize,yt+ot.toAltitude(),1];return st.transformMat4$1(vt,vt,this.pixelMatrix),vt[3]>0?new st.Point(vt[0]/vt[3],vt[1]/vt[3]):new st.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:ot,left:ut}=this._edgeInsets,yt=this.height-this._edgeInsets.bottom,vt=this.width-this._edgeInsets.right,Et=this.pointLocation3D(new st.Point(ut,ot)),Rt=this.pointLocation3D(new st.Point(vt,ot)),At=this.pointLocation3D(new st.Point(vt,yt)),It=this.pointLocation3D(new st.Point(ut,yt));let Nt=Math.min(Et.lng,Rt.lng,At.lng,It.lng),$t=Math.max(Et.lng,Rt.lng,At.lng,It.lng),Vt=Math.min(Et.lat,Rt.lat,At.lat,It.lat),er=Math.max(Et.lat,Rt.lat,At.lat,It.lat);const ir=Math.pow(2,-this.zoom)/16*270,sr=this.projection.name==="globe"?1:4,or=(lr,Gt,nr,hr,dr)=>{const br=(lr+nr)/2,Cr=(Gt+hr)/2,Tr=new st.Point(br,Cr),{lng:jr,lat:Ir}=this.pointLocation3D(Tr),Ur=Math.max(0,Nt-jr,Vt-Ir,jr-$t,Ir-er);Nt=Math.min(Nt,jr),$t=Math.max($t,jr),Vt=Math.min(Vt,Ir),er=Math.max(er,Ir),(dr<sr||Ur>ir)&&(or(lr,Gt,br,Cr,dr+1),or(br,Cr,nr,hr,dr+1))};if(or(ut,ot,vt,ot,1),or(vt,ot,vt,yt,1),or(vt,yt,ut,yt,1),or(ut,yt,ut,ot,1),this.projection.name==="globe"){const[lr,Gt]=st.polesInViewport(this);lr?(er=90,$t=180,Nt=-180):Gt&&(Vt=-90,$t=180,Nt=-180)}return new st.LngLatBounds(new st.LngLat(Nt,Vt),new st.LngLat($t,er))}_getBoundsRectangular(ot,ut){const{top:yt,left:vt}=this._edgeInsets,Et=this.height-this._edgeInsets.bottom,Rt=this.width-this._edgeInsets.right,At=new st.Point(vt,yt),It=new st.Point(Rt,yt),Nt=new st.Point(Rt,Et),$t=new st.Point(vt,Et);let Vt=this.pointCoordinate(At,ot),er=this.pointCoordinate(It,ot);const ir=this.pointCoordinate(Nt,ut),sr=this.pointCoordinate($t,ut),or=(lr,Gt)=>(Gt.y-lr.y)/(Gt.x-lr.x);return Vt.y>1&&er.y>=0?Vt=new st.MercatorCoordinate((1-sr.y)/or(sr,Vt)+sr.x,1):Vt.y<0&&er.y<=1&&(Vt=new st.MercatorCoordinate(-sr.y/or(sr,Vt)+sr.x,0)),er.y>1&&Vt.y>=0?er=new st.MercatorCoordinate((1-ir.y)/or(ir,er)+ir.x,1):er.y<0&&Vt.y<=1&&(er=new st.MercatorCoordinate(-ir.y/or(ir,er)+ir.x,0)),new st.LngLatBounds().extend(this.coordinateLocation(Vt)).extend(this.coordinateLocation(er)).extend(this.coordinateLocation(sr)).extend(this.coordinateLocation(ir))}_getBoundsRectangularTerrain(){const ot=this.elevation;if(!ot.visibleDemTiles.length||ot.isUsingMockSource())return this._getBoundsRectangular(0,0);const ut=ot.visibleDemTiles.reduce((yt,vt)=>{if(vt.dem){const Et=vt.dem.tree;yt.min=Math.min(yt.min,Et.minimums[0]),yt.max=Math.max(yt.max,Et.maximums[0])}return yt},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(ut.min*ot.exaggeration(),ut.max*ot.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(ot=!0){const ut=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,yt=this.height/2-ut*(1-this._horizonShift);return ot?Math.max(0,yt):yt}getMaxBounds(){return this.maxBounds}setMaxBounds(ot){this.maxBounds=ot,this.minLat=-st.MAX_MERCATOR_LATITUDE,this.maxLat=st.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,ot&&(this.minLat=ot.getSouth(),this.maxLat=ot.getNorth(),this.minLng=ot.getWest(),this.maxLng=ot.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=st.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=st.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=st.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=st.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(ot,ut){return this.projection.createTileMatrix(this,ut,ot)}calculateDistanceTileData(ot){const ut=ot.key,yt=this._distanceTileDataCache;if(yt[ut])return yt[ut];const vt=ot.canonical,Et=1/this.height,Rt=this.cameraWorldSize,At=Rt/this.zoomScale(vt.z),It=(vt.x+Math.pow(2,vt.z)*ot.wrap)*At,Nt=vt.y*At,$t=this.point;$t.x*=Rt/this.worldSize,$t.y*=Rt/this.worldSize;const Vt=this.angle,er=Math.sin(-Vt),ir=-Math.cos(-Vt);return yt[ut]={bearing:[er,ir],center:[($t.x-It)*Et,($t.y-Nt)*Et],scale:At/st.EXTENT*Et},yt[ut]}calculateFogTileMatrix(ot){const ut=ot.key,yt=this._fogTileMatrixCache;if(yt[ut])return yt[ut];const vt=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,ot);return st.multiply(vt,this.worldToFogMatrix,vt),yt[ut]=new Float32Array(vt),yt[ut]}calculateProjMatrix(ot,ut=!1){const yt=ot.key,vt=ut?this._alignedProjMatrixCache:this._projMatrixCache;if(vt[yt])return vt[yt];const Et=this.calculatePosMatrix(ot,this.worldSize);return st.multiply(Et,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:ut?this.alignedProjMatrix:this.projMatrix,Et),vt[yt]=new Float32Array(Et),vt[yt]}calculatePixelsToTileUnitsMatrix(ot){const ut=ot.tileID.key,yt=this._pixelsToTileUnitsCache;if(yt[ut])return yt[ut];const vt=function(Et,Rt){const{scale:At}=Et.tileTransform,It=At*st.EXTENT/(Et.tileSize*Math.pow(2,Rt.zoom-Et.tileID.overscaledZ+Et.tileID.canonical.z));return Nt=new Float32Array(4),er=($t=Rt.inverseAdjustmentMatrix)[1],ir=$t[2],sr=$t[3],lr=(Vt=[It,It])[1],Nt[0]=$t[0]*(or=Vt[0]),Nt[1]=er*or,Nt[2]=ir*lr,Nt[3]=sr*lr,Nt;var Nt,$t,Vt,er,ir,sr,or,lr}(ot,this);return yt[ut]=vt,yt[ut]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const ot=1/this.worldSize,ut=st.fromScaling([],[ot,ot,ot]);return st.multiply(ut,ut,this.globeMatrix),ut}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const ot=this._elevation;this._updateCameraState();const ut=st.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,yt=this._computeCameraPosition(ut),vt=this._camera.forward(),Et=st.mercatorZfromAltitude(1,this._center.lat);yt[2]/=Et,vt[2]/=Et,st.normalize(vt,vt);const Rt=ot.raycast(yt,vt,ot.exaggeration());if(Rt){const At=st.scaleAndAdd([],yt,vt,Rt),It=new st.MercatorCoordinate(At[0],At[1],st.mercatorZfromAltitude(At[2],st.latFromMercatorY(At[1]))),Nt=(It.z+st.length([It.x-yt[0],It.y-yt[1],It.z-yt[2]*Et]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(Nt),this._centerAltitude=It.toAltitude(),this._center=this.coordinateLocation(It),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(ot=!1){if(!this._elevation)return;const ut=this._elevation,yt=st.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,vt=this._computeCameraPosition(yt),Et=ut.getAtPointOrZero(new st.MercatorCoordinate(...vt)),Rt=this.pixelsPerMeter/this.worldSize*Et,At=this._minimumHeightOverTerrain(),It=vt[2]-Rt;if(It<=At)if(It<0||ot){const Nt=this.locationCoordinate(this._center,this._centerAltitude),$t=[vt[0],vt[1],Nt.z-vt[2]],Vt=st.length($t);$t[2]-=(At-It)/this._pixelsPerMercatorPixel;const er=st.length($t);if(er===0)return;st.scale$2($t,$t,Vt/er*this._pixelsPerMercatorPixel),this._camera.position=[vt[0],vt[1],Nt.z*this._pixelsPerMercatorPixel-$t[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const ot=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||ot){const er=this.center;return er.lat=st.clamp(er.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!ot)&&(er.lng=st.clamp(er.lng,this.minLng,this.maxLng)),this.center=er,void(this._constraining=!1)}const ut=this._unmodified,{x:yt,y:vt}=this.point;let Et=0,Rt=yt,At=vt;const It=this.width/2,Nt=this.height/2,$t=this.worldMinY*this.scale,Vt=this.worldMaxY*this.scale;if(vt-Nt<$t&&(At=$t+Nt),vt+Nt>Vt&&(At=Vt-Nt),Vt-$t<this.height&&(Et=Math.max(Et,this.height/(Vt-$t)),At=(Vt+$t)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const er=this.worldMinX*this.scale,ir=this.worldMaxX*this.scale,sr=this.worldSize/2-(er+ir)/2;Rt=(yt+sr+this.worldSize)%this.worldSize-sr,Rt-It<er&&(Rt=er+It),Rt+It>ir&&(Rt=ir-It),ir-er<this.width&&(Et=Math.max(Et,this.width/(ir-er)),Rt=(ir+er)/2)}Rt===yt&&At===vt||(this.center=this.unproject(new st.Point(Rt,At))),Et&&(this.zoom+=this.scaleZoom(Et)),this._constrainCamera(),this._unmodified=ut,this._constraining=!1}_minZoomForBounds(){let ot=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(ot=Math.max(ot,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),ot}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const ot=this.centerOffset,ut=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=st.mercatorZfromAltitude(1,this.center.lat)/st.mercatorZfromAltitude(1,st.GLOBE_SCALE_MATCH_LATITUDE));const yt=Am(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,yt),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const vt=this.projection.zAxisUnit==="meters"?ut:1,Et=this._camera.getWorldToCamera(this.worldSize,vt),Rt=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);Rt[8]=2*-ot.x/this.width,Rt[9]=2*ot.y/this.height;let At=st.mul([],Rt,Et);if(this.projection.isReprojectedInTileSpace){const Cr=this.locationCoordinate(this.center),Tr=st.identity([]);st.translate(Tr,Tr,[Cr.x*this.worldSize,Cr.y*this.worldSize,0]),st.multiply(Tr,Tr,np(this)),st.translate(Tr,Tr,[-Cr.x*this.worldSize,-Cr.y*this.worldSize,0]),st.multiply(At,At,Tr),this.inverseAdjustmentMatrix=function(jr){const Ir=np(jr,!0);return Mr([],[Ir[0],Ir[1],Ir[4],Ir[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=st.scale([],At,[this.worldSize,this.worldSize,this.worldSize/vt,1]),this.projMatrix=At,this.invProjMatrix=st.invert(new Float64Array(16),this.projMatrix);const It=st.invert([],Rt);this.frustumCorners=st.FrustumCorners.fromInvProjectionMatrix(It,this.horizonLineFromTop(),this.height);const Nt=new Float32Array(16);st.identity(Nt),st.scale(Nt,Nt,[1,-1,1]),st.rotateX(Nt,Nt,this._pitch),st.rotateZ(Nt,Nt,this.angle);const $t=st.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),Vt=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;$t[8]=2*-ot.x/this.width,$t[9]=2*(ot.y+Vt)/this.height,this.skyboxMatrix=st.multiply(Nt,$t,Nt);const er=this.point,ir=er.x,sr=er.y,or=this.width%2/2,lr=this.height%2/2,Gt=Math.cos(this.angle),nr=Math.sin(this.angle),hr=ir-Math.round(ir)+Gt*or+nr*lr,dr=sr-Math.round(sr)+Gt*lr+nr*or,br=new Float64Array(At);if(st.translate(br,br,[hr>.5?hr-1:hr,dr>.5?dr-1:dr,0]),this.alignedProjMatrix=br,At=st.create(),st.scale(At,At,[this.width/2,-this.height/2,1]),st.translate(At,At,[1,-1,0]),this.labelPlaneMatrix=At,At=st.create(),st.scale(At,At,[1,-1,1]),st.translate(At,At,[-1,-1,0]),st.scale(At,At,[2/this.width,2/this.height,1]),this.glCoordMatrix=At,this.pixelMatrix=st.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},At=st.invert(new Float64Array(16),this.pixelMatrix),!At)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=At,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=st.calculateGlobeMatrix(this);const Cr=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=st.transformMat4(Cr,Cr,Et),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=At;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const ot=this.cameraWorldSizeForFog,ut=this.cameraPixelsPerMeter,yt=this._camera.position,vt=1/this.height/this._pixelsPerMercatorPixel,Et=[ot,ot,ut];st.scale$2(Et,Et,vt),st.scale$2(yt,yt,-1),st.multiply$2(yt,yt,Et);const Rt=st.create();st.translate(Rt,Rt,yt),st.scale(Rt,Rt,Et),this.mercatorFogMatrix=Rt,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(ot,ut,vt)}_computeCameraPosition(ot){const ut=(ot=ot||this.pixelsPerMeter)/this.pixelsPerMeter,yt=this._camera.forward(),vt=this.point,Et=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*ut-ot/this.worldSize*this._centerAltitude;return[vt.x/this.worldSize-yt[0]*Et,vt.y/this.worldSize-yt[1]*Et,ot/this.worldSize*this._centerAltitude-yt[2]*Et]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(ot){const ut=this._maxCameraBoundsDistance()*Math.cos(this._pitch),yt=this._camera.position[2],vt=ot[2];let Et=1;this.projection.wrap&&(this.center=this.center.wrap()),vt>0&&(Et=Math.min((ut-yt)/vt,1)),this._camera.position=st.scaleAndAdd([],this._camera.position,ot,Et),this._updateStateFromCamera()}_updateStateFromCamera(){const ot=this._camera.position,ut=this._camera.forward(),{pitch:yt,bearing:vt}=this._camera.getPitchBearing(),Et=st.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,Rt=this._mercatorZfromZoom(this._maxZoom)*Math.cos(st.degToRad(this._maxPitch)),At=Math.max((ot[2]-Et)/Math.cos(yt),Rt),It=this._zoomFromMercatorZ(At);st.scaleAndAdd(ot,ot,ut,At),this._pitch=st.clamp(yt,st.degToRad(this.minPitch),st.degToRad(this.maxPitch)),this.angle=st.wrap(vt,-Math.PI,Math.PI),this._setZoom(st.clamp(It,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new st.MercatorCoordinate(ot[0],ot[1],ot[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(ot){return Math.pow(2,ot)*this.tileSize}_mercatorZfromZoom(ot){return this.cameraToCenterDistance/this._worldSizeFromZoom(ot)}_minimumHeightOverTerrain(){const ot=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(ot)}_zoomFromMercatorZ(ot){return this.scaleZoom(this.cameraToCenterDistance/(ot*this.tileSize))}zoomFromMercatorZAdjusted(ot){let ut=0,yt=st.GLOBE_ZOOM_THRESHOLD_MAX,vt=0,Et=1/0;for(;yt-ut>1e-6&&yt>ut;){const Rt=ut+.5*(yt-ut),At=this.tileSize*Math.pow(2,Rt),It=this.getCameraToCenterDistance(this.projection,Rt,At),Nt=this.scaleZoom(It/(ot*this.tileSize)),$t=Math.abs(Rt-Nt);$t<Et&&(Et=$t,vt=Rt),Rt<Nt?ut=Rt:yt=Rt}return vt}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(st.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(ot,ut){const yt=Math.min(ot.x,ut.x),vt=Math.max(ot.x,ut.x),Et=Math.min(ot.y,ut.y),Rt=Math.max(ot.y,ut.y);if(Et<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const At=[new st.Point(yt,Et),new st.Point(vt,Rt),new st.Point(yt,Rt),new st.Point(vt,Et)],It=this.renderWorldCopies?-3:0,Nt=this.renderWorldCopies?4:1;for(const $t of At){const Vt=this.pointRayIntersection($t);if(Vt.t<0)return!0;const er=this.rayIntersectionCoordinate(Vt);if(er.x<It||er.y<0||er.x>Nt||er.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+st.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new st.Point(0,0),new st.Point(this.width,this.height))}zoomDeltaToMovement(ot,ut){const yt=st.length(st.sub([],this._camera.position,ot)),vt=this._zoomFromMercatorZ(yt)+ut;return yt-this._mercatorZfromZoom(vt)}getCameraPoint(){if(this.projection.name==="globe"){const ot=function([ut,yt,vt],Et){const Rt=[ut,yt,vt,1];st.transformMat4$1(Rt,Rt,Et);const At=Rt[3]=Math.max(Rt[3],1e-6);return Rt[0]/=At,Rt[1]/=At,Rt[2]/=At,Rt}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new st.Point(ot[0],ot[1])}{const ot=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new st.Point(0,ot))}}getCameraToCenterDistance(ot,ut=this.zoom,yt=this.worldSize){const vt=Am(ot,ut,this.width,this.height,1024),Et=ot.pixelSpaceConversion(this.center.lat,yt,vt);return .5/Math.tan(.5*this._fov)*this.height*Et}getWorldToCameraMatrix(){const ot=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&st.multiply(ot,ot,this.globeMatrix),ot}}function op(ft,ot){let ut=!1,yt=null;const vt=()=>{yt=null,ut&&(ft(),yt=setTimeout(vt,ot),ut=!1)};return()=>(ut=!0,yt||vt(),yt)}class zy{constructor(ot){this._hashName=ot&&encodeURIComponent(ot),st.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=op(this._updateHashUnthrottled.bind(this),300)}addTo(ot){return this._map=ot,st.window.addEventListener("hashchange",this._onHashChange,!1),ot.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),st.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const ot=this._map;if(!ot)return"";const ut=Bp(ot);if(this._hashName){const yt=this._hashName;let vt=!1;const Et=st.window.location.hash.slice(1).split("&").map(Rt=>{const At=Rt.split("=")[0];return At===yt?(vt=!0,`${At}=${ut}`):Rt}).filter(Rt=>Rt);return vt||Et.push(`${yt}=${ut}`),`#${Et.join("&")}`}return`#${ut}`}_getCurrentHash(){const ot=st.window.location.hash.replace("#","");if(this._hashName){let ut;return ot.split("&").map(yt=>yt.split("=")).forEach(yt=>{yt[0]===this._hashName&&(ut=yt)}),(ut&&ut[1]||"").split("/")}return ot.split("/")}_onHashChange(){const ot=this._map;if(!ot)return!1;const ut=this._getCurrentHash();if(ut.length>=3&&!ut.some(yt=>isNaN(yt))){const yt=ot.dragRotate.isEnabled()&&ot.touchZoomRotate.isEnabled()?+(ut[3]||0):ot.getBearing();return ot.jumpTo({center:[+ut[2],+ut[1]],zoom:+ut[0],bearing:yt,pitch:+(ut[4]||0)}),!0}return!1}_updateHashUnthrottled(){const ot=st.window.location.href.replace(/(#.+)?$/,this.getHashString());st.window.history.replaceState(st.window.history.state,null,ot)}}function Bp(ft,ot){const ut=ft.getCenter(),yt=Math.round(100*ft.getZoom())/100,vt=Math.ceil((yt*Math.LN2+Math.log(512/360/.5))/Math.LN10),Et=Math.pow(10,vt),Rt=Math.round(ut.lng*Et)/Et,At=Math.round(ut.lat*Et)/Et,It=ft.getBearing(),Nt=ft.getPitch();let $t=ot?`/${Rt}/${At}/${yt}`:`${yt}/${At}/${Rt}`;return(It||Nt)&&($t+="/"+Math.round(10*It)/10),Nt&&($t+=`/${Math.round(Nt)}`),$t}const Fp={linearity:.3,easing:st.bezier(0,0,.3,1)},Pm=st.extend({deceleration:2500,maxSpeed:1400},Fp),Im=st.extend({deceleration:20,maxSpeed:1400},Fp),Ln=st.extend({deceleration:1e3,maxSpeed:360},Fp),Ml=st.extend({deceleration:1e3,maxSpeed:90},Fp);class lx{constructor(ot){this._map=ot,this.clear()}clear(){this._inertiaBuffer=[]}record(ot){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:st.exported.now(),settings:ot})}_drainInertiaBuffer(){const ot=this._inertiaBuffer,ut=st.exported.now();for(;ot.length>0&&ut-ot[0].time>160;)ot.shift()}_onMoveEnd(ot){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const ut={zoom:0,bearing:0,pitch:0,pan:new st.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:Et}of this._inertiaBuffer)ut.zoom+=Et.zoomDelta||0,ut.bearing+=Et.bearingDelta||0,ut.pitch+=Et.pitchDelta||0,Et.panDelta&&ut.pan._add(Et.panDelta),Et.around&&(ut.around=Et.around),Et.pinchAround&&(ut.pinchAround=Et.pinchAround);const yt=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,vt={};if(ut.pan.mag()){const Et=Vp(ut.pan.mag(),yt,st.extend({},Pm,ot||{}));vt.offset=ut.pan.mult(Et.amount/ut.pan.mag()),vt.center=this._map.transform.center,Up(vt,Et)}if(ut.zoom){const Et=Vp(ut.zoom,yt,Im);vt.zoom=this._map.transform.zoom+Et.amount,Up(vt,Et)}if(ut.bearing){const Et=Vp(ut.bearing,yt,Ln);vt.bearing=this._map.transform.bearing+st.clamp(Et.amount,-179,179),Up(vt,Et)}if(ut.pitch){const Et=Vp(ut.pitch,yt,Ml);vt.pitch=this._map.transform.pitch+Et.amount,Up(vt,Et)}if(vt.zoom||vt.bearing){const Et=ut.pinchAround===void 0?ut.around:ut.pinchAround;vt.around=Et?this._map.unproject(Et):this._map.getCenter()}return this.clear(),vt.noMoveStart=!0,vt}}function Up(ft,ot){(!ft.duration||ft.duration<ot.duration)&&(ft.duration=ot.duration,ft.easing=ot.easing)}function Vp(ft,ot,ut){const{maxSpeed:yt,linearity:vt,deceleration:Et}=ut,Rt=st.clamp(ft*vt/(ot/1e3),-yt,yt),At=Math.abs(Rt)/(Et*vt);return{easing:ut.easing,duration:1e3*At,amount:Rt*(At/2)}}class Ts extends st.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(ot,ut,yt,vt={}){const Et=Sr(ut.getCanvasContainer(),yt),Rt=ut.unproject(Et);super(ot,st.extend({point:Et,lngLat:Rt,originalEvent:yt},vt)),this._defaultPrevented=!1,this.target=ut}}class Gp extends st.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(ot,ut,yt){const vt=ot==="touchend"?yt.changedTouches:yt.touches,Et=Er(ut.getCanvasContainer(),vt),Rt=Et.map(It=>ut.unproject(It)),At=Et.reduce((It,Nt,$t,Vt)=>It.add(Nt.div(Vt.length)),new st.Point(0,0));super(ot,{points:Et,point:At,lngLats:Rt,lngLat:ut.unproject(At),originalEvent:yt}),this._defaultPrevented=!1}}class Mm extends st.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(ot,ut,yt){super(ot,{originalEvent:yt}),this._defaultPrevented=!1}}class Ny{constructor(ot,ut){this._map=ot,this._clickTolerance=ut.clickTolerance}reset(){this._mousedownPos=void 0}wheel(ot){return this._firePreventable(new Mm(ot.type,this._map,ot))}mousedown(ot,ut){return this._mousedownPos=ut,this._firePreventable(new Ts(ot.type,this._map,ot))}mouseup(ot){this._map.fire(new Ts(ot.type,this._map,ot))}preclick(ot){const ut=st.extend({},ot);ut.type="preclick",this._map.fire(new Ts(ut.type,this._map,ut))}click(ot,ut){this._mousedownPos&&this._mousedownPos.dist(ut)>=this._clickTolerance||(this.preclick(ot),this._map.fire(new Ts(ot.type,this._map,ot)))}dblclick(ot){return this._firePreventable(new Ts(ot.type,this._map,ot))}mouseover(ot){this._map.fire(new Ts(ot.type,this._map,ot))}mouseout(ot){this._map.fire(new Ts(ot.type,this._map,ot))}touchstart(ot){return this._firePreventable(new Gp(ot.type,this._map,ot))}touchmove(ot){this._map.fire(new Gp(ot.type,this._map,ot))}touchend(ot){this._map.fire(new Gp(ot.type,this._map,ot))}touchcancel(ot){this._map.fire(new Gp(ot.type,this._map,ot))}_firePreventable(ot){if(this._map.fire(ot),ot.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class jm{constructor(ot){this._map=ot}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(ot){this._map.fire(new Ts(ot.type,this._map,ot))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ts("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(ot){this._delayContextMenu?this._contextMenuEvent=ot:this._map.fire(new Ts(ot.type,this._map,ot)),this._map.listens("contextmenu")&&ot.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class cx{constructor(ot,ut){this._map=ot,this._el=ot.getCanvasContainer(),this._container=ot.getContainer(),this._clickTolerance=ut.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(ot,ut){this.isEnabled()&&ot.shiftKey&&ot.button===0&&(Yt(),this._startPos=this._lastPos=ut,this._active=!0)}mousemoveWindow(ot,ut){if(!this._active)return;const yt=ut,vt=this._startPos,Et=this._lastPos;if(!vt||!Et||Et.equals(yt)||!this._box&&yt.dist(vt)<this._clickTolerance)return;this._lastPos=yt,this._box||(this._box=Ot("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",ot));const Rt=Math.min(vt.x,yt.x),At=Math.max(vt.x,yt.x),It=Math.min(vt.y,yt.y),Nt=Math.max(vt.y,yt.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${Rt}px,${It}px)`,this._box.style.width=At-Rt+"px",this._box.style.height=Nt-It+"px")})}mouseupWindow(ot,ut){if(!this._active)return;const yt=this._startPos,vt=ut;if(yt&&ot.button===0){if(this.reset(),pr(),yt.x!==vt.x||yt.y!==vt.y)return this._map.fire(new st.Event("boxzoomend",{originalEvent:ot})),{cameraAnimation:Et=>Et.fitScreenCoordinates(yt,vt,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",ot)}}keydown(ot){this._active&&ot.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",ot))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Kt(),delete this._startPos,delete this._lastPos}_fireEvent(ot,ut){return this._map.fire(new st.Event(ot,{originalEvent:ut}))}}function Dm(ft,ot){const ut={};for(let yt=0;yt<ft.length;yt++)ut[ft[yt].identifier]=ot[yt];return ut}class sp{constructor(ot){this.reset(),this.numTouches=ot.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(ot,ut,yt){(this.centroid||yt.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=ot.timeStamp),yt.length===this.numTouches&&(this.centroid=function(vt){const Et=new st.Point(0,0);for(const Rt of vt)Et._add(Rt);return Et.div(vt.length)}(ut),this.touches=Dm(yt,ut)))}touchmove(ot,ut,yt){if(this.aborted||!this.centroid)return;const vt=Dm(yt,ut);for(const Et in this.touches){const Rt=vt[Et];(!Rt||Rt.dist(this.touches[Et])>30)&&(this.aborted=!0)}}touchend(ot,ut,yt){if((!this.centroid||ot.timeStamp-this.startTime>500)&&(this.aborted=!0),yt.length===0){const vt=!this.aborted&&this.centroid;if(this.reset(),vt)return vt}}}class By{constructor(ot){this.singleTap=new sp(ot),this.numTaps=ot.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(ot,ut,yt){this.singleTap.touchstart(ot,ut,yt)}touchmove(ot,ut,yt){this.singleTap.touchmove(ot,ut,yt)}touchend(ot,ut,yt){const vt=this.singleTap.touchend(ot,ut,yt);if(vt){const Et=ot.timeStamp-this.lastTime<500,Rt=!this.lastTap||this.lastTap.dist(vt)<30;if(Et&&Rt||this.reset(),this.count++,this.lastTime=ot.timeStamp,this.lastTap=vt,this.count===this.numTaps)return this.reset(),vt}}}class wv{constructor(){this._zoomIn=new By({numTouches:1,numTaps:2}),this._zoomOut=new By({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(ot,ut,yt){this._zoomIn.touchstart(ot,ut,yt),this._zoomOut.touchstart(ot,ut,yt)}touchmove(ot,ut,yt){this._zoomIn.touchmove(ot,ut,yt),this._zoomOut.touchmove(ot,ut,yt)}touchend(ot,ut,yt){const vt=this._zoomIn.touchend(ot,ut,yt),Et=this._zoomOut.touchend(ot,ut,yt);return vt?(this._active=!0,ot.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Rt=>Rt.easeTo({duration:300,zoom:Rt.getZoom()+1,around:Rt.unproject(vt)},{originalEvent:ot})}):Et?(this._active=!0,ot.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Rt=>Rt.easeTo({duration:300,zoom:Rt.getZoom()-1,around:Rt.unproject(Et)},{originalEvent:ot})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const ux={0:1,2:2};class ap{constructor(ot){this.reset(),this._clickTolerance=ot.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(ot,ut){return!1}_move(ot,ut){return{}}mousedown(ot,ut){if(this._lastPoint)return;const yt=Rr(ot);this._correctButton(ot,yt)&&(this._lastPoint=ut,this._eventButton=yt)}mousemoveWindow(ot,ut){const yt=this._lastPoint;if(yt){if(ot.preventDefault(),this._eventButton!=null&&function(vt,Et){const Rt=ux[Et];return vt.buttons===void 0||(vt.buttons&Rt)!==Rt}(ot,this._eventButton))this.reset();else if(this._moved||!(ut.dist(yt)<this._clickTolerance))return this._moved=!0,this._lastPoint=ut,this._move(yt,ut)}}mouseupWindow(ot){this._lastPoint&&Rr(ot)===this._eventButton&&(this._moved&&pr(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fy extends ap{mousedown(ot,ut){super.mousedown(ot,ut),this._lastPoint&&(this._active=!0)}_correctButton(ot,ut){return ut===0&&!ot.ctrlKey}_move(ot,ut){return{around:ut,panDelta:ut.sub(ot)}}}class Uy extends ap{_correctButton(ot,ut){return ut===0&&ot.ctrlKey||ut===2}_move(ot,ut){const yt=.8*(ut.x-ot.x);if(yt)return this._active=!0,{bearingDelta:yt}}contextmenu(ot){ot.preventDefault()}}class Vy extends ap{_correctButton(ot,ut){return ut===0&&ot.ctrlKey||ut===2}_move(ot,ut){const yt=-.5*(ut.y-ot.y);if(yt)return this._active=!0,{pitchDelta:yt}}contextmenu(ot){ot.preventDefault()}}class Lm{constructor(ot,ut){this._map=ot,this._el=ot.getCanvasContainer(),this._minTouches=1,this._clickTolerance=ut.clickTolerance||1,this.reset(),st.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new st.Point(0,0)}touchstart(ot,ut,yt){return this._calculateTransform(ot,ut,yt)}touchmove(ot,ut,yt){if(this._active&&!(yt.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(yt.length===1&&!st.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return ot.cancelable&&ot.preventDefault(),this._calculateTransform(ot,ut,yt)}}touchend(ot,ut,yt){this._calculateTransform(ot,ut,yt),this._active&&yt.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(ot,ut,yt){yt.length>0&&(this._active=!0);const vt=Dm(yt,ut),Et=new st.Point(0,0),Rt=new st.Point(0,0);let At=0;for(const Nt in vt){const $t=vt[Nt],Vt=this._touches[Nt];Vt&&(Et._add($t),Rt._add($t.sub(Vt)),At++,vt[Nt]=$t)}if(this._touches=vt,At<this._minTouches||!Rt.mag())return;const It=Rt.div(At);return this._sum._add(It),this._sum.mag()<this._clickTolerance?void 0:{around:Et.div(At),panDelta:It}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Ot("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Hp{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(ot){}_move(ot,ut,yt){return{}}touchstart(ot,ut,yt){this._firstTwoTouches||yt.length<2||(this._firstTwoTouches=[yt[0].identifier,yt[1].identifier],this._start([ut[0],ut[1]]))}touchmove(ot,ut,yt){const vt=this._firstTwoTouches;if(!vt)return;ot.preventDefault();const[Et,Rt]=vt,At=Wp(yt,ut,Et),It=Wp(yt,ut,Rt);if(!At||!It)return;const Nt=this._aroundCenter?null:At.add(It).div(2);return this._move([At,It],Nt,ot)}touchend(ot,ut,yt){if(!this._firstTwoTouches)return;const[vt,Et]=this._firstTwoTouches,Rt=Wp(yt,ut,vt),At=Wp(yt,ut,Et);Rt&&At||(this._active&&pr(),this.reset())}touchcancel(){this.reset()}enable(ot){this._enabled=!0,this._aroundCenter=!!ot&&ot.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Wp(ft,ot,ut){for(let yt=0;yt<ft.length;yt++)if(ft[yt].identifier===ut)return ot[yt]}function Gy(ft,ot){return Math.log(ft/ot)/Math.LN2}class hx extends Hp{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(ot){this._startDistance=this._distance=ot[0].dist(ot[1])}_move(ot,ut){const yt=this._distance;if(this._distance=ot[0].dist(ot[1]),this._active||!(Math.abs(Gy(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Gy(this._distance,yt),pinchAround:ut}}}function Hy(ft,ot){return 180*ft.angleWith(ot)/Math.PI}class dx extends Hp{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(ot){this._startVector=this._vector=ot[0].sub(ot[1]),this._minDiameter=ot[0].dist(ot[1])}_move(ot,ut){const yt=this._vector;if(this._vector=ot[0].sub(ot[1]),yt&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Hy(this._vector,yt),pinchAround:ut}}_isBelowThreshold(ot){this._minDiameter=Math.min(this._minDiameter,ot.mag());const ut=25/(Math.PI*this._minDiameter)*360,yt=this._startVector;if(!yt)return!1;const vt=Hy(ot,yt);return Math.abs(vt)<ut}}function _u(ft){return Math.abs(ft.y)>Math.abs(ft.x)}class px extends Hp{constructor(ot){super(),this._map=ot}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(ot){this._lastPoints=ot,_u(ot[0].sub(ot[1]))&&(this._valid=!1)}_move(ot,ut,yt){const vt=this._lastPoints;if(!vt)return;const Et=ot[0].sub(vt[0]),Rt=ot[1].sub(vt[1]);return this._map._cooperativeGestures&&!st.isFullscreen()&&yt.touches.length<3||(this._valid=this.gestureBeginsVertically(Et,Rt,yt.timeStamp),!this._valid)?void 0:(this._lastPoints=ot,this._active=!0,{pitchDelta:(Et.y+Rt.y)/2*-.5})}gestureBeginsVertically(ot,ut,yt){if(this._valid!==void 0)return this._valid;const vt=ot.mag()>=2,Et=ut.mag()>=2;if(!vt&&!Et)return;if(!vt||!Et)return this._firstMove==null&&(this._firstMove=yt),yt-this._firstMove<100&&void 0;const Rt=ot.y>0==ut.y>0;return _u(ot)&&_u(ut)&&Rt}}const fx={panStep:100,bearingStep:15,pitchStep:10};class bv{constructor(){const ot=fx;this._panStep=ot.panStep,this._bearingStep=ot.bearingStep,this._pitchStep=ot.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(ot){if(ot.altKey||ot.ctrlKey||ot.metaKey)return;let ut=0,yt=0,vt=0,Et=0,Rt=0;switch(ot.keyCode){case 61:case 107:case 171:case 187:ut=1;break;case 189:case 109:case 173:ut=-1;break;case 37:ot.shiftKey?yt=-1:(ot.preventDefault(),Et=-1);break;case 39:ot.shiftKey?yt=1:(ot.preventDefault(),Et=1);break;case 38:ot.shiftKey?vt=1:(ot.preventDefault(),Rt=-1);break;case 40:ot.shiftKey?vt=-1:(ot.preventDefault(),Rt=1);break;default:return}return this._rotationDisabled&&(yt=0,vt=0),{cameraAnimation:At=>{const It=At.getZoom();At.easeTo({duration:300,easeId:"keyboardHandler",easing:mx,zoom:ut?Math.round(It)+ut*(ot.shiftKey?2:1):It,bearing:At.getBearing()+yt*this._bearingStep,pitch:At.getPitch()+vt*this._pitchStep,offset:[-Et*this._panStep,-Rt*this._panStep],center:At.getCenter()},{originalEvent:ot})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function mx(ft){return ft*(2-ft)}const Wy=4.000244140625;class gx{constructor(ot,ut){this._map=ot,this._el=ot.getCanvasContainer(),this._handler=ut,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,st.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(ot){this._defaultZoomRate=ot}setWheelZoomRate(ot){this._wheelZoomRate=ot}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(ot){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!ot&&ot.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(ot){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(ot.ctrlKey||ot.metaKey||this.isZooming()||st.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let ut=ot.deltaMode===st.window.WheelEvent.DOM_DELTA_LINE?40*ot.deltaY:ot.deltaY;const yt=st.exported.now(),vt=yt-(this._lastWheelEventTime||0);this._lastWheelEventTime=yt,ut!==0&&ut%Wy==0?this._type="wheel":ut!==0&&Math.abs(ut)<4?this._type="trackpad":vt>400?(this._type=null,this._lastValue=ut,this._timeout=setTimeout(this._onTimeout,40,ot)):this._type||(this._type=Math.abs(vt*ut)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,ut+=this._lastValue)),ot.shiftKey&&ut&&(ut/=4),this._type&&(this._lastWheelEvent=ot,this._delta-=ut,this._active||this._start(ot)),ot.preventDefault()}_onTimeout(ot){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(ot)}_start(ot){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const ut=Sr(this._el,ot);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:ut,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const ot=this._map.transform;this._type==="wheel"&&ot.projection.wrap&&(ot._center.lng>=180||ot._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const ut=()=>ot._terrainEnabled()&&this._aroundCoord?ot.computeZoomRelativeTo(this._aroundCoord):ot.zoom;if(this._delta!==0){const It=this._type==="wheel"&&Math.abs(this._delta)>Wy?this._wheelZoomRate:this._defaultZoomRate;let Nt=2/(1+Math.exp(-Math.abs(this._delta*It)));this._delta<0&&Nt!==0&&(Nt=1/Nt);const $t=ut(),Vt=Math.pow(2,$t),er=typeof this._targetZoom=="number"?ot.zoomScale(this._targetZoom):Vt;this._targetZoom=Math.min(ot.maxZoom,Math.max(ot.minZoom,ot.scaleZoom(er*Nt))),this._type==="wheel"&&(this._startZoom=$t,this._easing=this._smoothOutEasing(200)),this._delta=0}const yt=typeof this._targetZoom=="number"?this._targetZoom:ut(),vt=this._startZoom,Et=this._easing;let Rt,At=!1;if(this._type==="wheel"&&vt&&Et){const It=Math.min((st.exported.now()-this._lastWheelEventTime)/200,1),Nt=Et(It);Rt=st.number(vt,yt,Nt),It<1?this._frameId||(this._frameId=!0):At=!0}else Rt=yt,At=!0;return this._active=!0,At&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!At,zoomDelta:Rt-ut(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(ot){let ut=st.ease;if(this._prevEase){const yt=this._prevEase,vt=(st.exported.now()-yt.start)/yt.duration,Et=yt.easing(vt+.01)-yt.easing(vt),Rt=.27/Math.sqrt(Et*Et+1e-4)*.01,At=Math.sqrt(.0729-Rt*Rt);ut=st.bezier(Rt,At,.25,1)}return this._prevEase={start:st.exported.now(),duration:ot,easing:ut},ut}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Ot("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(st.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class yx{constructor(ot,ut){this._clickZoom=ot,this._tapZoom=ut}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Os{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(ot,ut){return ot.preventDefault(),{cameraAnimation:yt=>{yt.easeTo({duration:300,zoom:yt.getZoom()+(ot.shiftKey?-1:1),around:yt.unproject(ut)},{originalEvent:ot})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ev{constructor(){this._tap=new By({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(ot,ut,yt){this._swipePoint||(this._tapTime&&ot.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?yt.length>0&&(this._swipePoint=ut[0],this._swipeTouch=yt[0].identifier):this._tap.touchstart(ot,ut,yt))}touchmove(ot,ut,yt){if(this._tapTime){if(this._swipePoint){if(yt[0].identifier!==this._swipeTouch)return;const vt=ut[0],Et=vt.y-this._swipePoint.y;return this._swipePoint=vt,ot.preventDefault(),this._active=!0,{zoomDelta:Et/128}}}else this._tap.touchmove(ot,ut,yt)}touchend(ot,ut,yt){this._tapTime?this._swipePoint&&yt.length===0&&this.reset():this._tap.touchend(ot,ut,yt)&&(this._tapTime=ot.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _x{constructor(ot,ut,yt){this._el=ot,this._mousePan=ut,this._touchPan=yt}enable(ot){this._inertiaOptions=ot||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Sv{constructor(ot,ut,yt){this._pitchWithRotate=ot.pitchWithRotate,this._mouseRotate=ut,this._mousePitch=yt}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Tv{constructor(ot,ut,yt,vt){this._el=ot,this._touchZoom=ut,this._touchRotate=yt,this._tapDragZoom=vt,this._rotationDisabled=!1,this._enabled=!0}enable(ot){this._touchZoom.enable(ot),this._rotationDisabled||this._touchRotate.enable(ot),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const xl=ft=>ft.zoom||ft.drag||ft.pitch||ft.rotate;class xx extends st.Event{}class Cv{constructor(){this.constants=[1,1,.01],this.radius=0}setup(ot,ut){const yt=st.sub([],ut,ot);this.radius=st.length(yt[2]<0?st.div([],yt,this.constants):[yt[0],yt[1],0])}projectRay(ot){st.div(ot,ot,this.constants),st.normalize(ot,ot),st.mul$1(ot,ot,this.constants);const ut=st.scale$2([],ot,this.radius);if(ut[2]>0){const yt=st.scale$2([],[0,0,1],st.dot(ut,[0,0,1])),vt=st.scale$2([],st.normalize([],[ut[0],ut[1],0]),this.radius),Et=st.add([],ut,st.scale$2([],st.sub([],st.add([],vt,yt),ut),2));ut[0]=Et[0],ut[1]=Et[1]}return ut}}function Dl(ft){return ft.panDelta&&ft.panDelta.mag()||ft.zoomDelta||ft.bearingDelta||ft.pitchDelta}class Vl{constructor(ot,ut){this._map=ot,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new lx(ot),this._bearingSnap=ut.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Cv,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(ut),st.bindAll(["handleEvent","handleWindowEvent"],this);const yt=this._el;this._listeners=[[yt,"touchstart",{passive:!0}],[yt,"touchmove",{passive:!1}],[yt,"touchend",void 0],[yt,"touchcancel",void 0],[yt,"mousedown",void 0],[yt,"mousemove",void 0],[yt,"mouseup",void 0],[st.window.document,"mousemove",{capture:!0}],[st.window.document,"mouseup",void 0],[yt,"mouseover",void 0],[yt,"mouseout",void 0],[yt,"dblclick",void 0],[yt,"click",void 0],[yt,"keydown",{capture:!1}],[yt,"keyup",void 0],[yt,"wheel",{passive:!1}],[yt,"contextmenu",void 0],[st.window,"blur",void 0]];for(const[vt,Et,Rt]of this._listeners)vt.addEventListener(Et,vt===st.window.document?this.handleWindowEvent:this.handleEvent,Rt)}destroy(){for(const[ot,ut,yt]of this._listeners)ot.removeEventListener(ut,ot===st.window.document?this.handleWindowEvent:this.handleEvent,yt)}_addDefaultHandlers(ot){const ut=this._map,yt=ut.getCanvasContainer();this._add("mapEvent",new Ny(ut,ot));const vt=ut.boxZoom=new cx(ut,ot);this._add("boxZoom",vt);const Et=new wv,Rt=new Os;ut.doubleClickZoom=new yx(Rt,Et),this._add("tapZoom",Et),this._add("clickZoom",Rt);const At=new Ev;this._add("tapDragZoom",At);const It=ut.touchPitch=new px(ut);this._add("touchPitch",It);const Nt=new Uy(ot),$t=new Vy(ot);ut.dragRotate=new Sv(ot,Nt,$t),this._add("mouseRotate",Nt,["mousePitch"]),this._add("mousePitch",$t,["mouseRotate"]);const Vt=new Fy(ot),er=new Lm(ut,ot);ut.dragPan=new _x(yt,Vt,er),this._add("mousePan",Vt),this._add("touchPan",er,["touchZoom","touchRotate"]);const ir=new dx,sr=new hx;ut.touchZoomRotate=new Tv(yt,sr,ir,At),this._add("touchRotate",ir,["touchPan","touchZoom"]),this._add("touchZoom",sr,["touchPan","touchRotate"]),this._add("blockableMapEvent",new jm(ut));const or=ut.scrollZoom=new gx(ut,this);this._add("scrollZoom",or,["mousePan"]);const lr=ut.keyboard=new bv;this._add("keyboard",lr);for(const Gt of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])ot.interactive&&ot[Gt]&&ut[Gt].enable(ot[Gt])}_add(ot,ut,yt){this._handlers.push({handlerName:ot,handler:ut,allowed:yt}),this._handlersById[ot]=ut}stop(ot){if(!this._updatingCamera){for(const{handler:ut}of this._handlers)ut.reset();this._inertia.clear(),this._fireEvents({},{},ot),this._changes=[]}}isActive(){for(const{handler:ot}of this._handlers)if(ot.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!xl(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(ot,ut,yt){for(const vt in ot)if(vt!==yt&&(!ut||ut.indexOf(vt)<0))return!0;return!1}handleWindowEvent(ot){this.handleEvent(ot,`${ot.type}Window`)}_getMapTouches(ot){const ut=[];for(const yt of ot)this._el.contains(yt.target)&&ut.push(yt);return ut}handleEvent(ot,ut){this._updatingCamera=!0;const yt=ot.type==="renderFrame",vt=yt?void 0:ot,Et={needsRenderFrame:!1},Rt={},At={},It=ot.touches?this._getMapTouches(ot.touches):void 0,Nt=It?Er(this._el,It):yt?void 0:Sr(this._el,ot);for(const{handlerName:er,handler:ir,allowed:sr}of this._handlers){if(!ir.isEnabled())continue;let or;this._blockedByActive(At,sr,er)?ir.reset():ir[ut||ot.type]&&(or=ir[ut||ot.type](ot,Nt,It),this.mergeHandlerResult(Et,Rt,or,er,vt),or&&or.needsRenderFrame&&this._triggerRenderFrame()),(or||ir.isActive())&&(At[er]=ir)}const $t={};for(const er in this._previousActiveHandlers)At[er]||($t[er]=vt);this._previousActiveHandlers=At,(Object.keys($t).length||Dl(Et))&&(this._changes.push([Et,Rt,$t]),this._triggerRenderFrame()),(Object.keys(At).length||Dl(Et))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Vt}=Et;Vt&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Vt(this._map))}mergeHandlerResult(ot,ut,yt,vt,Et){if(!yt)return;st.extend(ot,yt);const Rt={handlerName:vt,originalEvent:yt.originalEvent||Et};yt.zoomDelta!==void 0&&(ut.zoom=Rt),yt.panDelta!==void 0&&(ut.drag=Rt),yt.pitchDelta!==void 0&&(ut.pitch=Rt),yt.bearingDelta!==void 0&&(ut.rotate=Rt)}_applyChanges(){const ot={},ut={},yt={};for(const[vt,Et,Rt]of this._changes)vt.panDelta&&(ot.panDelta=(ot.panDelta||new st.Point(0,0))._add(vt.panDelta)),vt.zoomDelta&&(ot.zoomDelta=(ot.zoomDelta||0)+vt.zoomDelta),vt.bearingDelta&&(ot.bearingDelta=(ot.bearingDelta||0)+vt.bearingDelta),vt.pitchDelta&&(ot.pitchDelta=(ot.pitchDelta||0)+vt.pitchDelta),vt.around!==void 0&&(ot.around=vt.around),vt.aroundCoord!==void 0&&(ot.aroundCoord=vt.aroundCoord),vt.pinchAround!==void 0&&(ot.pinchAround=vt.pinchAround),vt.noInertia&&(ot.noInertia=vt.noInertia),st.extend(ut,Et),st.extend(yt,Rt);this._updateMapTransform(ot,ut,yt),this._changes=[]}_updateMapTransform(ot,ut,yt){const vt=this._map,Et=vt.transform,Rt=nr=>[nr.x,nr.y,nr.z];if((nr=>{const hr=this._eventsInProgress.drag;return hr&&!this._handlersById[hr.handlerName].isActive()})()&&!Dl(ot)){const nr=Et.zoom;Et.cameraElevationReference="sea",Et.recenterOnTerrain(),Et.cameraElevationReference="ground",nr!==Et.zoom&&this._map._update(!0)}if(Et._isCameraConstrained&&vt._stop(!0),!Dl(ot))return void this._fireEvents(ut,yt,!0);let{panDelta:At,zoomDelta:It,bearingDelta:Nt,pitchDelta:$t,around:Vt,aroundCoord:er,pinchAround:ir}=ot;Et._isCameraConstrained&&(It>0&&(It=0),Et._isCameraConstrained=!1),ir!==void 0&&(Vt=ir),(It||(nr=>ut[nr]&&!this._eventsInProgress[nr])("drag"))&&Vt&&(this._dragOrigin=Rt(Et.pointCoordinate3D(Vt)),this._trackingEllipsoid.setup(Et._camera.position,this._dragOrigin)),Et.cameraElevationReference="sea",vt._stop(!0),Vt=Vt||vt.transform.centerPoint,Nt&&(Et.bearing+=Nt),$t&&(Et.pitch+=$t),Et._updateCameraState();const sr=[0,0,0];if(At)if(Et.projection.name==="mercator"){const nr=this._trackingEllipsoid.projectRay(Et.screenPointToMercatorRay(Vt).dir),hr=this._trackingEllipsoid.projectRay(Et.screenPointToMercatorRay(Vt.sub(At)).dir);sr[0]=hr[0]-nr[0],sr[1]=hr[1]-nr[1]}else{const nr=Et.pointCoordinate(Vt);if(Et.projection.name==="globe"){At=At.rotate(-Et.angle);const hr=Et._pixelsPerMercatorPixel/Et.worldSize;sr[0]=-At.x*st.mercatorScale(st.latFromMercatorY(nr.y))*hr,sr[1]=-At.y*st.mercatorScale(Et.center.lat)*hr}else{const hr=Et.pointCoordinate(Vt.sub(At));nr&&hr&&(sr[0]=hr.x-nr.x,sr[1]=hr.y-nr.y)}}const or=Et.zoom,lr=[0,0,0];if(It){const nr=Rt(er||Et.pointCoordinate3D(Vt)),hr={dir:st.normalize([],st.sub([],nr,Et._camera.position))};if(hr.dir[2]<0){const dr=Et.zoomDeltaToMovement(nr,It);st.scale$2(lr,hr.dir,dr)}}const Gt=st.add(sr,sr,lr);Et._translateCameraConstrained(Gt),It&&Math.abs(Et.zoom-or)>1e-4&&Et.recenterOnTerrain(),Et.cameraElevationReference="ground",this._map._update(),ot.noInertia||this._inertia.record(ot),this._fireEvents(ut,yt,!0)}_fireEvents(ot,ut,yt){const vt=xl(this._eventsInProgress),Et=xl(ot),Rt={};for(const $t in ot){const{originalEvent:Vt}=ot[$t];this._eventsInProgress[$t]||(Rt[`${$t}start`]=Vt),this._eventsInProgress[$t]=ot[$t]}!vt&&Et&&this._fireEvent("movestart",Et.originalEvent);for(const $t in Rt)this._fireEvent($t,Rt[$t]);Et&&this._fireEvent("move",Et.originalEvent);for(const $t in ot){const{originalEvent:Vt}=ot[$t];this._fireEvent($t,Vt)}const At={};let It;for(const $t in this._eventsInProgress){const{handlerName:Vt,originalEvent:er}=this._eventsInProgress[$t];this._handlersById[Vt].isActive()||(delete this._eventsInProgress[$t],It=ut[Vt]||er,At[`${$t}end`]=It)}for(const $t in At)this._fireEvent($t,At[$t]);const Nt=xl(this._eventsInProgress);if(yt&&(vt||Et)&&!Nt){this._updatingCamera=!0;const $t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Vt=er=>er!==0&&-this._bearingSnap<er&&er<this._bearingSnap;$t?(Vt($t.bearing||this._map.getBearing())&&($t.bearing=0),this._map.easeTo($t,{originalEvent:It})):(this._map.fire(new st.Event("moveend",{originalEvent:It})),Vt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(ot,ut){this._map.fire(new st.Event(ot,ut?{originalEvent:ut}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(ot=>{this._frameId=void 0,this.handleEvent(new xx("renderFrame",{timeStamp:ot})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Lu="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class $m extends st.Evented{constructor(ot,ut){super(),this._moving=!1,this._zooming=!1,this.transform=ot,this._bearingSnap=ut.bearingSnap,this._respectPrefersReducedMotion=ut.respectPrefersReducedMotion!==!1,st.bindAll(["_renderFrameCallback"],this)}getCenter(){return new st.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(ot,ut){return this.jumpTo({center:ot},ut)}panBy(ot,ut,yt){return ot=st.Point.convert(ot).mult(-1),this.panTo(this.transform.center,st.extend({offset:ot},ut),yt)}panTo(ot,ut,yt){return this.easeTo(st.extend({center:ot},ut),yt)}getZoom(){return this.transform.zoom}setZoom(ot,ut){return this.jumpTo({zoom:ot},ut),this}zoomTo(ot,ut,yt){return this.easeTo(st.extend({zoom:ot},ut),yt)}zoomIn(ot,ut){return this.zoomTo(this.getZoom()+1,ot,ut),this}zoomOut(ot,ut){return this.zoomTo(this.getZoom()-1,ot,ut),this}getBearing(){return this.transform.bearing}setBearing(ot,ut){return this.jumpTo({bearing:ot},ut),this}getPadding(){return this.transform.padding}setPadding(ot,ut){return this.jumpTo({padding:ot},ut),this}rotateTo(ot,ut,yt){return this.easeTo(st.extend({bearing:ot},ut),yt)}resetNorth(ot,ut){return this.rotateTo(0,st.extend({duration:1e3},ot),ut),this}resetNorthPitch(ot,ut){return this.easeTo(st.extend({bearing:0,pitch:0,duration:1e3},ot),ut),this}snapToNorth(ot,ut){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(ot,ut):this}getPitch(){return this.transform.pitch}setPitch(ot,ut){return this.jumpTo({pitch:ot},ut),this}cameraForBounds(ot,ut){ot=st.LngLatBounds.convert(ot);const yt=ut&&ut.bearing||0,vt=ut&&ut.pitch||0,Et=ot.getNorthWest(),Rt=ot.getSouthEast();return this._cameraForBounds(this.transform,Et,Rt,yt,vt,ut)}_extendCameraOptions(ot){const ut={top:0,bottom:0,right:0,left:0};if(typeof(ot=st.extend({padding:ut,offset:[0,0],maxZoom:this.transform.maxZoom},ot)).padding=="number"){const yt=ot.padding;ot.padding={top:yt,bottom:yt,right:yt,left:yt}}return ot.padding=st.extend(ut,ot.padding),ot}_minimumAABBFrustumDistance(ot,ut){const yt=ut.max[0]-ut.min[0],vt=ut.max[1]-ut.min[1];return yt/vt>ot.aspect?yt/(2*Math.tan(.5*ot.fovX)*ot.aspect):vt/(2*Math.tan(.5*ot.fovY)*ot.aspect)}_cameraForBoundsOnGlobe(ot,ut,yt,vt,Et,Rt){const At=ot.clone(),It=this._extendCameraOptions(Rt);At.bearing=vt,At.pitch=Et;const Nt=st.LngLat.convert(ut),$t=st.LngLat.convert(yt),Vt=.5*(Nt.lat+$t.lat),er=.5*(Nt.lng+$t.lng),ir=st.latLngToECEF(Vt,er),sr=st.normalize([],ir),or=st.normalize([],st.cross([],sr,[0,1,0])),lr=st.cross([],or,sr),Gt=[or[0],or[1],or[2],0,lr[0],lr[1],lr[2],0,sr[0],sr[1],sr[2],0,0,0,0,1],nr=[ir,st.latLngToECEF(Nt.lat,Nt.lng),st.latLngToECEF($t.lat,Nt.lng),st.latLngToECEF($t.lat,$t.lng),st.latLngToECEF(Nt.lat,$t.lng),st.latLngToECEF(Vt,Nt.lng),st.latLngToECEF(Vt,$t.lng),st.latLngToECEF(Nt.lat,er),st.latLngToECEF($t.lat,er)];let hr=st.Aabb.fromPoints(nr.map(yn=>[st.dot(or,yn),st.dot(lr,yn),st.dot(sr,yn)]));const dr=st.transformMat4([],hr.center,Gt);st.squaredLength(dr)===0&&st.set(dr,0,0,1),st.normalize(dr,dr),st.scale$2(dr,dr,st.GLOBE_RADIUS),At.center=st.ecefToLatLng(dr);const br=At.getWorldToCameraMatrix(),Cr=st.invert(new Float64Array(16),br);hr=st.Aabb.applyTransform(hr,st.multiply([],br,Gt)),st.transformMat4(dr,dr,br);const Tr=.5*(hr.max[2]-hr.min[2]),jr=this._minimumAABBFrustumDistance(At,hr),Ir=st.scale$2([],[0,0,1],Tr),Ur=st.add(Ir,dr,Ir),wn=jr+(At.pitch===0?0:st.distance(dr,Ur)),Nr=At.globeCenterInViewSpace,hn=st.sub([],dr,[Nr[0],Nr[1],Nr[2]]);st.normalize(hn,hn),st.scale$2(hn,hn,wn);const Hr=st.add([],dr,hn);st.transformMat4(Hr,Hr,Cr);const vn=st.earthRadius/st.GLOBE_RADIUS,Fr=st.length(Hr),cn=st.mercatorZfromAltitude(Math.max(Fr*vn-st.earthRadius,Number.EPSILON),0),En=Math.min(At.zoomFromMercatorZAdjusted(cn),It.maxZoom);return En>.5*(st.GLOBE_ZOOM_THRESHOLD_MIN+st.GLOBE_ZOOM_THRESHOLD_MAX)?(At.setProjection({name:"mercator"}),At.zoom=En,this._cameraForBounds(At,ut,yt,vt,Et,Rt)):{center:At.center,zoom:En,bearing:vt,pitch:Et}}queryTerrainElevation(ot,ut){const yt=this.transform.elevation;return yt?(ut=st.extend({},{exaggerated:!0},ut),yt.getAtPoint(st.MercatorCoordinate.fromLngLat(ot),null,ut.exaggerated)):null}_cameraForBounds(ot,ut,yt,vt,Et,Rt){if(ot.projection.name==="globe")return this._cameraForBoundsOnGlobe(ot,ut,yt,vt,Et,Rt);const At=ot.clone(),It=this._extendCameraOptions(Rt),Nt=At.padding;At.bearing=vt,At.pitch=Et;const $t=st.LngLat.convert(ut),Vt=st.LngLat.convert(yt),er=new st.LngLat($t.lng,Vt.lat),ir=new st.LngLat(Vt.lng,$t.lat),sr=At.project($t),or=At.project(Vt),lr=this.queryTerrainElevation($t),Gt=this.queryTerrainElevation(Vt),nr=this.queryTerrainElevation(er),hr=this.queryTerrainElevation(ir),dr=[[sr.x,sr.y,Math.min(lr||0,Gt||0,nr||0,hr||0)],[or.x,or.y,Math.max(lr||0,Gt||0,nr||0,hr||0)]];let br=st.Aabb.fromPoints(dr);const Cr=At.getWorldToCameraMatrix(),Tr=st.invert(new Float64Array(16),Cr);br=st.Aabb.applyTransform(br,Cr);const jr=st.sub([],br.max,br.min),Ir=Nt.left||0,Ur=Nt.right||0,wn=Nt.bottom||0,Nr=Nt.top||0,{left:hn,right:Hr,top:vn,bottom:Fr}=It.padding,cn=.5*(Ir+Ur),En=.5*(Nr+wn),yn=Math.min(At.scaleZoom(At.scale*Math.min((At.width-(Ir+Ur+hn+Hr))/jr[0],(At.height-(wn+Nr+Fr+vn))/jr[1])),It.maxZoom),Sn=At.scale/At.zoomScale(yn);br=new st.Aabb([br.min[0]-(hn+cn)*Sn,br.min[1]-(Fr+En)*Sn,br.min[2]],[br.max[0]+(Hr+cn)*Sn,br.max[1]+(vn+En)*Sn,br.max[2]]);const Gn=.5*jr[2],Yn=this._minimumAABBFrustumDistance(At,br),On=[0,0,1,0];st.transformMat4$1(On,On,Cr),st.normalize$2(On,On);const Zn=st.scale$2([],On,Yn+Gn),fo=st.add([],br.center,Zn),co=(typeof It.offset.x=="number"&&typeof It.offset.y=="number"?new st.Point(It.offset.x,It.offset.y):st.Point.convert(It.offset)).rotate(-st.degToRad(vt));br.center[0]-=co.x*Sn,br.center[1]+=co.y*Sn,st.transformMat4(br.center,br.center,Tr),st.transformMat4(fo,fo,Tr);const Vn=[br.center[0],br.center[1],fo[2]*At.pixelsPerMeter];st.scale$2(Vn,Vn,1/At.worldSize);const Co=st.lngFromMercatorX(Vn[0]),Po=st.latFromMercatorY(Vn[1]),Io=Math.min(At._zoomFromMercatorZ(Vn[2]),It.maxZoom),Mo=new st.LngLat(Co,Po);return At.mercatorFromTransition&&Io<.5*(st.GLOBE_ZOOM_THRESHOLD_MIN+st.GLOBE_ZOOM_THRESHOLD_MAX)?(At.setProjection({name:"globe"}),At.zoom=Io,this._cameraForBounds(At,ut,yt,vt,Et,Rt)):{center:Mo,zoom:Io,bearing:vt,pitch:Et}}fitBounds(ot,ut,yt){const vt=this.cameraForBounds(ot,ut);return this._fitInternal(vt,ut,yt)}fitScreenCoordinates(ot,ut,yt,vt,Et){const Rt=st.Point.convert(ot),At=st.Point.convert(ut),It=new st.Point(Math.min(Rt.x,At.x),Math.min(Rt.y,At.y)),Nt=new st.Point(Math.max(Rt.x,At.x),Math.max(Rt.y,At.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(Rt,At))return this;const $t=this.transform.pointLocation3D(It),Vt=this.transform.pointLocation3D(Nt),er=this.transform.pointLocation3D(new st.Point(It.x,Nt.y)),ir=this.transform.pointLocation3D(new st.Point(Nt.x,It.y)),sr=[Math.min($t.lng,Vt.lng,er.lng,ir.lng),Math.min($t.lat,Vt.lat,er.lat,ir.lat)],or=[Math.max($t.lng,Vt.lng,er.lng,ir.lng),Math.max($t.lat,Vt.lat,er.lat,ir.lat)],lr=vt&&vt.pitch?vt.pitch:this.getPitch(),Gt=this._cameraForBounds(this.transform,sr,or,yt,lr,vt);return this._fitInternal(Gt,vt,Et)}_fitInternal(ot,ut,yt){return ot?(delete(ut=st.extend(ot,ut)).padding,ut.linear?this.easeTo(ut,yt):this.flyTo(ut,yt)):this}jumpTo(ot,ut){this.stop();const yt=ot.preloadOnly?this.transform.clone():this.transform;let vt=!1,Et=!1,Rt=!1;return"zoom"in ot&&yt.zoom!==+ot.zoom&&(vt=!0,yt.zoom=+ot.zoom),ot.center!==void 0&&(yt.center=st.LngLat.convert(ot.center)),"bearing"in ot&&yt.bearing!==+ot.bearing&&(Et=!0,yt.bearing=+ot.bearing),"pitch"in ot&&yt.pitch!==+ot.pitch&&(Rt=!0,yt.pitch=+ot.pitch),ot.padding==null||yt.isPaddingEqual(ot.padding)||(yt.padding=ot.padding),ot.preloadOnly?(this._preloadTiles(yt),this):(this.fire(new st.Event("movestart",ut)).fire(new st.Event("move",ut)),vt&&this.fire(new st.Event("zoomstart",ut)).fire(new st.Event("zoom",ut)).fire(new st.Event("zoomend",ut)),Et&&this.fire(new st.Event("rotatestart",ut)).fire(new st.Event("rotate",ut)).fire(new st.Event("rotateend",ut)),Rt&&this.fire(new st.Event("pitchstart",ut)).fire(new st.Event("pitch",ut)).fire(new st.Event("pitchend",ut)),this.fire(new st.Event("moveend",ut)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||st.warnOnce(Lu),this.transform.getFreeCameraOptions()}setFreeCameraOptions(ot,ut){const yt=this.transform;if(!yt.projection.supportsFreeCamera)return st.warnOnce(Lu),this;this.stop();const vt=yt.zoom,Et=yt.pitch,Rt=yt.bearing;yt.setFreeCameraOptions(ot);const At=vt!==yt.zoom,It=Et!==yt.pitch,Nt=Rt!==yt.bearing;return this.fire(new st.Event("movestart",ut)).fire(new st.Event("move",ut)),At&&this.fire(new st.Event("zoomstart",ut)).fire(new st.Event("zoom",ut)).fire(new st.Event("zoomend",ut)),Nt&&this.fire(new st.Event("rotatestart",ut)).fire(new st.Event("rotate",ut)).fire(new st.Event("rotateend",ut)),It&&this.fire(new st.Event("pitchstart",ut)).fire(new st.Event("pitch",ut)).fire(new st.Event("pitchend",ut)),this.fire(new st.Event("moveend",ut)),this}easeTo(ot,ut){this._stop(!1,ot.easeId),((ot=st.extend({offset:[0,0],duration:500,easing:st.ease},ot)).animate===!1||this._prefersReducedMotion(ot))&&(ot.duration=0);const yt=this.transform,vt=this.getZoom(),Et=this.getBearing(),Rt=this.getPitch(),At=this.getPadding(),It="zoom"in ot?+ot.zoom:vt,Nt="bearing"in ot?this._normalizeBearing(ot.bearing,Et):Et,$t="pitch"in ot?+ot.pitch:Rt,Vt="padding"in ot?ot.padding:yt.padding,er=st.Point.convert(ot.offset);let ir,sr,or;if(yt.projection.name==="globe"){const Ir=st.MercatorCoordinate.fromLngLat(yt.center),Ur=er.rotate(-yt.angle);Ir.x+=Ur.x/yt.worldSize,Ir.y+=Ur.y/yt.worldSize;const wn=Ir.toLngLat(),Nr=st.LngLat.convert(ot.center||wn);this._normalizeCenter(Nr),ir=yt.centerPoint.add(Ur),sr=new st.Point(Ir.x,Ir.y).mult(yt.worldSize),or=new st.Point(st.mercatorXfromLng(Nr.lng),st.mercatorYfromLat(Nr.lat)).mult(yt.worldSize).sub(sr)}else{ir=yt.centerPoint.add(er);const Ir=yt.pointLocation(ir),Ur=st.LngLat.convert(ot.center||Ir);this._normalizeCenter(Ur),sr=yt.project(Ir),or=yt.project(Ur).sub(sr)}const lr=yt.zoomScale(It-vt);let Gt,nr;ot.around&&(Gt=st.LngLat.convert(ot.around),nr=yt.locationPoint(Gt));const hr=this._zooming||It!==vt,dr=this._rotating||Et!==Nt,br=this._pitching||$t!==Rt,Cr=!yt.isPaddingEqual(Vt),Tr=Ir=>Ur=>{if(hr&&(Ir.zoom=st.number(vt,It,Ur)),dr&&(Ir.bearing=st.number(Et,Nt,Ur)),br&&(Ir.pitch=st.number(Rt,$t,Ur)),Cr&&(Ir.interpolatePadding(At,Vt,Ur),ir=Ir.centerPoint.add(er)),Gt)Ir.setLocationAtPoint(Gt,nr);else{const wn=Ir.zoomScale(Ir.zoom-vt),Nr=It>vt?Math.min(2,lr):Math.max(.5,lr),hn=Math.pow(Nr,1-Ur),Hr=Ir.unproject(sr.add(or.mult(Ur*hn)).mult(wn));Ir.setLocationAtPoint(Ir.renderWorldCopies?Hr.wrap():Hr,ir)}return ot.preloadOnly||this._fireMoveEvents(ut),Ir};if(ot.preloadOnly){const Ir=this._emulate(Tr,ot.duration,yt);return this._preloadTiles(Ir),this}const jr={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=hr,this._rotating=dr,this._pitching=br,this._padding=Cr,this._easeId=ot.easeId,this._prepareEase(ut,ot.noMoveStart,jr),this._ease(Tr(yt),Ir=>{yt.recenterOnTerrain(),this._afterEase(ut,Ir)},ot),this}_prepareEase(ot,ut,yt={}){this._moving=!0,this.transform.cameraElevationReference="sea",ut||yt.moving||this.fire(new st.Event("movestart",ot)),this._zooming&&!yt.zooming&&this.fire(new st.Event("zoomstart",ot)),this._rotating&&!yt.rotating&&this.fire(new st.Event("rotatestart",ot)),this._pitching&&!yt.pitching&&this.fire(new st.Event("pitchstart",ot))}_fireMoveEvents(ot){this.fire(new st.Event("move",ot)),this._zooming&&this.fire(new st.Event("zoom",ot)),this._rotating&&this.fire(new st.Event("rotate",ot)),this._pitching&&this.fire(new st.Event("pitch",ot))}_afterEase(ot,ut){if(this._easeId&&ut&&this._easeId===ut)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const yt=this._zooming,vt=this._rotating,Et=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,yt&&this.fire(new st.Event("zoomend",ot)),vt&&this.fire(new st.Event("rotateend",ot)),Et&&this.fire(new st.Event("pitchend",ot)),this.fire(new st.Event("moveend",ot))}flyTo(ot,ut){if(this._prefersReducedMotion(ot)){const yn=st.pick(ot,["center","zoom","bearing","pitch","around"]);return this.jumpTo(yn,ut)}this.stop(),ot=st.extend({offset:[0,0],speed:1.2,curve:1.42,easing:st.ease},ot);const yt=this.transform,vt=this.getZoom(),Et=this.getBearing(),Rt=this.getPitch(),At=this.getPadding(),It="zoom"in ot?st.clamp(+ot.zoom,yt.minZoom,yt.maxZoom):vt,Nt="bearing"in ot?this._normalizeBearing(ot.bearing,Et):Et,$t="pitch"in ot?+ot.pitch:Rt,Vt="padding"in ot?ot.padding:yt.padding,er=yt.zoomScale(It-vt),ir=st.Point.convert(ot.offset);let sr=yt.centerPoint.add(ir);const or=yt.pointLocation(sr),lr=st.LngLat.convert(ot.center||or);this._normalizeCenter(lr);const Gt=yt.project(or),nr=yt.project(lr).sub(Gt);let hr=ot.curve;const dr=Math.max(yt.width,yt.height),br=dr/er,Cr=nr.mag();if("minZoom"in ot){const yn=st.clamp(Math.min(ot.minZoom,vt,It),yt.minZoom,yt.maxZoom),Sn=dr/yt.zoomScale(yn-vt);hr=Math.sqrt(Sn/Cr*2)}const Tr=hr*hr;function jr(yn){const Sn=(br*br-dr*dr+(yn?-1:1)*Tr*Tr*Cr*Cr)/(2*(yn?br:dr)*Tr*Cr);return Math.log(Math.sqrt(Sn*Sn+1)-Sn)}function Ir(yn){return(Math.exp(yn)-Math.exp(-yn))/2}function Ur(yn){return(Math.exp(yn)+Math.exp(-yn))/2}const wn=jr(0);let Nr=function(yn){return Ur(wn)/Ur(wn+hr*yn)},hn=function(yn){return dr*((Ur(wn)*(Ir(Sn=wn+hr*yn)/Ur(Sn))-Ir(wn))/Tr)/Cr;var Sn},Hr=(jr(1)-wn)/hr;if(Math.abs(Cr)<1e-6||!isFinite(Hr)){if(Math.abs(dr-br)<1e-6)return this.easeTo(ot,ut);const yn=br<dr?-1:1;Hr=Math.abs(Math.log(br/dr))/hr,hn=function(){return 0},Nr=function(Sn){return Math.exp(yn*hr*Sn)}}ot.duration="duration"in ot?+ot.duration:1e3*Hr/("screenSpeed"in ot?+ot.screenSpeed/hr:+ot.speed),ot.maxDuration&&ot.duration>ot.maxDuration&&(ot.duration=0);const vn=Et!==Nt,Fr=$t!==Rt,cn=!yt.isPaddingEqual(Vt),En=yn=>Sn=>{const Gn=Sn*Hr,Yn=1/Nr(Gn);yn.zoom=Sn===1?It:vt+yn.scaleZoom(Yn),vn&&(yn.bearing=st.number(Et,Nt,Sn)),Fr&&(yn.pitch=st.number(Rt,$t,Sn)),cn&&(yn.interpolatePadding(At,Vt,Sn),sr=yn.centerPoint.add(ir));const On=Sn===1?lr:yn.unproject(Gt.add(nr.mult(hn(Gn))).mult(Yn));return yn.setLocationAtPoint(yn.renderWorldCopies?On.wrap():On,sr),yn._updateCameraOnTerrain(),ot.preloadOnly||this._fireMoveEvents(ut),yn};if(ot.preloadOnly){const yn=this._emulate(En,ot.duration,yt);return this._preloadTiles(yn),this}return this._zooming=!0,this._rotating=vn,this._pitching=Fr,this._padding=cn,this._prepareEase(ut,!1),this._ease(En(yt),()=>this._afterEase(ut),ot),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(ot,ut){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const yt=this._onEaseEnd;this._onEaseEnd=void 0,yt.call(this,ut)}if(!ot){const yt=this.handlers;yt&&yt.stop(!1)}return this}_ease(ot,ut,yt){yt.animate===!1||yt.duration===0?(ot(1),ut()):(this._easeStart=st.exported.now(),this._easeOptions=yt,this._onEaseFrame=ot,this._onEaseEnd=ut,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const ot=Math.min((st.exported.now()-this._easeStart)/this._easeOptions.duration,1),ut=this._onEaseFrame;ut&&ut(this._easeOptions.easing(ot)),ot<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(ot,ut){ot=st.wrap(ot,-180,180);const yt=Math.abs(ot-ut);return Math.abs(ot-360-ut)<yt&&(ot-=360),Math.abs(ot+360-ut)<yt&&(ot+=360),ot}_normalizeCenter(ot){const ut=this.transform;if(!ut.renderWorldCopies||ut.maxBounds)return;const yt=ot.lng-ut.center.lng;ot.lng+=yt>180?-360:yt<-180?360:0}_prefersReducedMotion(ot){return this._respectPrefersReducedMotion&&st.exported.prefersReducedMotion&&!(ot&&ot.essential)}_emulate(ot,ut,yt){const vt=Math.ceil(15*ut/1e3),Et=[],Rt=ot(yt.clone());for(let At=0;At<=vt;At++){const It=Rt(At/vt);Et.push(It.clone())}return Et}}class $n{constructor(ot={}){this.options=ot,st.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(ot){const ut=this.options&&this.options.compact;return this._map=ot,this._container=Ot("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Ot("button","mapboxgl-ctrl-attrib-button",this._container),Ot("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Ot("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),ut&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),ut===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(ot,ut){const yt=this._map._getUIString(`AttributionControl.${ut}`);ot.setAttribute("aria-label",yt),ot.removeAttribute("title"),ot.firstElementChild&&ot.firstElementChild.setAttribute("title",yt)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let ot=this._editLink;ot||(ot=this._editLink=this._container.querySelector(".mapbox-improve-map"));const ut=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||st.config.ACCESS_TOKEN}];if(ot){const yt=ut.reduce((vt,Et,Rt)=>(Et.value&&(vt+=`${Et.key}=${Et.value}${Rt<ut.length-1?"&":""}`),vt),"?");ot.href=`${st.config.FEEDBACK_URL}/${yt}#${Bp(this._map,!0)}`,ot.rel="noopener nofollow",this._setElementTitle(ot,"MapFeedback")}}_updateData(ot){!ot||ot.sourceDataType!=="metadata"&&ot.sourceDataType!=="visibility"&&ot.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let ot=[];if(this._map.style.stylesheet){const vt=this._map.style.stylesheet;this.styleOwner=vt.owner,this.styleId=vt.id}const ut=this._map.style._sourceCaches;for(const vt in ut){const Et=ut[vt];if(Et.used){const Rt=Et.getSource();Rt.attribution&&ot.indexOf(Rt.attribution)<0&&ot.push(Rt.attribution)}}ot.sort((vt,Et)=>vt.length-Et.length),ot=ot.filter((vt,Et)=>{for(let Rt=Et+1;Rt<ot.length;Rt++)if(ot[Rt].indexOf(vt)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?ot=[...this.options.customAttribution,...ot]:ot.unshift(this.options.customAttribution));const yt=ot.join(" | ");yt!==this._attribHTML&&(this._attribHTML=yt,ot.length?(this._innerContainer.innerHTML=yt,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class qy{constructor(){st.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(ot){this._map=ot,this._container=Ot("div","mapboxgl-ctrl");const ut=Ot("a","mapboxgl-ctrl-logo");return ut.target="_blank",ut.rel="noopener nofollow",ut.href="https://www.mapbox.com/",ut.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),ut.setAttribute("rel","noopener nofollow"),this._container.appendChild(ut),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(ot){ot&&ot.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const ot=this._map.style._sourceCaches;if(Object.entries(ot).length===0)return!0;for(const ut in ot){const yt=ot[ut].getSource();if(yt.hasOwnProperty("mapbox_logo")&&!yt.mapbox_logo)return!1}return!0}_updateCompact(){const ot=this._container.children;if(ot.length){const ut=ot[0];this._map.getCanvasContainer().offsetWidth<250?ut.classList.add("mapboxgl-compact"):ut.classList.remove("mapboxgl-compact")}}}class Zy{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(ot){const ut=++this._id;return this._queue.push({callback:ot,id:ut,cancelled:!1}),ut}remove(ot){const ut=this._currentlyRunning,yt=ut?this._queue.concat(ut):this._queue;for(const vt of yt)if(vt.id===ot)return void(vt.cancelled=!0)}run(ot=0){const ut=this._currentlyRunning=this._queue;this._queue=[];for(const yt of ut)if(!yt.cancelled&&(yt.callback(ot),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function lp(ft,ot,ut){if(ft=new st.LngLat(ft.lng,ft.lat),ot){const yt=new st.LngLat(ft.lng-360,ft.lat),vt=new st.LngLat(ft.lng+360,ft.lat),Et=360*Math.ceil(Math.abs(ft.lng-ut.center.lng)/360),Rt=ut.locationPoint(ft).distSqr(ot),At=ot.x<0||ot.y<0||ot.x>ut.width||ot.y>ut.height;ut.locationPoint(yt).distSqr(ot)<Rt&&(At||Math.abs(yt.lng-ut.center.lng)<Et)?ft=yt:ut.locationPoint(vt).distSqr(ot)<Rt&&(At||Math.abs(vt.lng-ut.center.lng)<Et)&&(ft=vt)}for(;Math.abs(ft.lng-ut.center.lng)>180;){const yt=ut.locationPoint(ft);if(yt.x>=0&&yt.y>=0&&yt.x<=ut.width&&yt.y<=ut.height)break;ft.lng>ut.center.lng?ft.lng-=360:ft.lng+=360}return ft}const $u={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class jn extends st.Evented{constructor(ot,ut){if(super(),(ot instanceof st.window.HTMLElement||ut)&&(ot=st.extend({element:ot},ut)),st.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=ot&&ot.anchor||"center",this._color=ot&&ot.color||"#3FB1CE",this._scale=ot&&ot.scale||1,this._draggable=ot&&ot.draggable||!1,this._clickTolerance=ot&&ot.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=ot&&ot.rotation||0,this._rotationAlignment=ot&&ot.rotationAlignment||"auto",this._pitchAlignment=ot&&ot.pitchAlignment&&ot.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=ot&&ot.occludedOpacity||.2,ot&&ot.element)this._element=ot.element,this._offset=st.Point.convert(ot&&ot.offset||[0,0]);else{this._defaultMarker=!0,this._element=Ot("div");const vt=41,Et=27,Rt=Ut("svg",{display:"block",height:vt*this._scale+"px",width:Et*this._scale+"px",viewBox:`0 0 ${Et} ${vt}`},this._element),At=Ut("radialGradient",{id:"shadowGradient"},Ut("defs",{},Rt));Ut("stop",{offset:"10%","stop-opacity":.4},At),Ut("stop",{offset:"100%","stop-opacity":.05},At),Ut("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},Rt),Ut("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},Rt),Ut("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},Rt),Ut("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},Rt),this._offset=st.Point.convert(ot&&ot.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",vt=>{vt.preventDefault()}),this._element.addEventListener("mousedown",vt=>{vt.preventDefault()});const yt=this._element.classList;for(const vt in $u)yt.remove(`mapboxgl-marker-anchor-${vt}`);yt.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(ot){return ot===this._map||(this.remove(),this._map=ot,ot.getCanvasContainer().appendChild(this._element),ot.on("move",this._updateMoving),ot.on("moveend",this._update),ot.on("remove",this._clearFadeTimer),ot._addMarker(this),this.setDraggable(this._draggable),this._update(),ot.on("click",this._onMapClick)),this}remove(){const ot=this._map;return ot&&(ot.off("click",this._onMapClick),ot.off("move",this._updateMoving),ot.off("moveend",this._update),ot.off("mousedown",this._addDragHandler),ot.off("touchstart",this._addDragHandler),ot.off("mouseup",this._onUp),ot.off("touchend",this._onUp),ot.off("mousemove",this._onMove),ot.off("touchmove",this._onMove),ot.off("remove",this._clearFadeTimer),ot._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(ot){return this._lngLat=st.LngLat.convert(ot),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(ot){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),ot){if(!("offset"in ot.options)){const vt=Math.sqrt(Math.pow(13.5,2)/2);ot.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[vt,-1*(38.1-13.5+vt)],"bottom-right":[-vt,-1*(38.1-13.5+vt)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=ot,ot._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(ot){const ut=ot.code,yt=ot.charCode||ot.keyCode;ut!=="Space"&&ut!=="Enter"&&yt!==32&&yt!==13||this.togglePopup()}_onMapClick(ot){const ut=ot.originalEvent.target,yt=this._element;this._popup&&(ut===yt||yt.contains(ut))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const ot=this._popup;return ot?(ot.isOpen()?(ot.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(ot.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const ot=this._map,ut=this._pos;if(!ot||!ut)return!1;const yt=ot.unproject(ut),vt=ot.getFreeCameraOptions();if(!vt.position)return!1;const Et=vt.position.toLngLat();return Et.distanceTo(yt)<.9*Et.distanceTo(this._lngLat)}_evaluateOpacity(){const ot=this._map;if(!ot)return;const ut=this._pos;if(!ut||ut.x<0||ut.x>ot.transform.width||ut.y<0||ut.y>ot.transform.height)return void this._clearFadeTimer();const yt=ot.unproject(ut);let vt;ot._showingGlobe()&&st.isLngLatBehindGlobe(ot.transform,this._lngLat)?vt=0:(vt=1-ot._queryFogOpacity(yt),ot.transform._terrainEnabled()&&ot.getTerrain()&&this._behindTerrain()&&(vt*=this._occludedOpacity)),this._element.style.opacity=`${vt}`,this._element.style.pointerEvents=vt>0?"auto":"none",this._popup&&this._popup._setOpacity(vt),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const ot=this._pos;if(!ot||!this._map)return;const ut=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${ot.x}px,${ot.y}px)
            ${$u[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${ut.x}px,${ut.y}px)
        `}_calculateXYTransform(){const ot=this._pos,ut=this._map,yt=this.getPitchAlignment();if(!ut||!ot||yt!=="map")return"";if(!ut._showingGlobe()){const It=ut.getPitch();return It?`rotateX(${It}deg)`:""}const vt=st.radToDeg(st.globeTiltAtLngLat(ut.transform,this._lngLat)),Et=ot.sub(st.globeCenterToScreenPoint(ut.transform)),Rt=Math.abs(Et.x)+Math.abs(Et.y);if(Rt===0)return"";const At=vt/Rt;return`rotateX(${-Et.y*At}deg) rotateY(${Et.x*At}deg)`}_calculateZTransform(){const ot=this._pos,ut=this._map;if(!ut||!ot)return"";let yt=0;const vt=this.getRotationAlignment();if(vt==="map")if(ut._showingGlobe()){const Et=ut.project(new st.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),Rt=ut.project(new st.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(Et);yt=st.radToDeg(Math.atan2(Rt.y,Rt.x))-90}else yt=-ut.getBearing();else if(vt==="horizon"){const Et=st.smoothstep(4,6,ut.getZoom()),Rt=st.globeCenterToScreenPoint(ut.transform);Rt.y+=Et*ut.transform.height;const At=ot.sub(Rt),It=st.radToDeg(Math.atan2(At.y,At.x));yt=(It>90?It-270:It+90)*(1-Et)}return yt+=this._rotation,yt?`rotateZ(${yt}deg)`:""}_update(ot){st.window.cancelAnimationFrame(this._updateFrameId);const ut=this._map;ut&&(ut.transform.renderWorldCopies&&(this._lngLat=lp(this._lngLat,this._pos,ut.transform)),this._pos=ut.project(this._lngLat),ot===!0?this._updateFrameId=st.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),ut._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(ut._showingGlobe()||ut.getTerrain()||ut.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(ot){return this._offset=st.Point.convert(ot),this._update(),this}_onMove(ot){const ut=this._map;if(!ut)return;const yt=this._pointerdownPos,vt=this._positionDelta;if(yt&&vt){if(!this._isDragging){const Et=this._clickTolerance||ut._clickTolerance;if(ot.point.dist(yt)<Et)return;this._isDragging=!0}this._pos=ot.point.sub(vt),this._lngLat=ut.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new st.Event("dragstart"))),this.fire(new st.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const ot=this._map;ot&&(ot.off("mousemove",this._onMove),ot.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new st.Event("dragend")),this._state="inactive"}_addDragHandler(ot){const ut=this._map,yt=this._pos;ut&&yt&&this._element.contains(ot.originalEvent.target)&&(ot.preventDefault(),this._positionDelta=ot.point.sub(yt),this._pointerdownPos=ot.point,this._state="pending",ut.on("mousemove",this._onMove),ut.on("touchmove",this._onMove),ut.once("mouseup",this._onUp),ut.once("touchend",this._onUp))}setDraggable(ot){this._draggable=!!ot;const ut=this._map;return ut&&(ot?(ut.on("mousedown",this._addDragHandler),ut.on("touchstart",this._addDragHandler)):(ut.off("mousedown",this._addDragHandler),ut.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(ot){return this._rotation=ot||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(ot){return this._rotationAlignment=ot||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(ot){return this._pitchAlignment=ot||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(ot){return this._occludedOpacity=ot||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Xy={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Rv=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function vx(ft=new st.Point(0,0),ot="bottom"){if(typeof ft=="number"){const ut=Math.round(Math.sqrt(.5*Math.pow(ft,2)));switch(ot){case"top":return new st.Point(0,ft);case"top-left":return new st.Point(ut,ut);case"top-right":return new st.Point(-ut,ut);case"bottom":return new st.Point(0,-ft);case"bottom-left":return new st.Point(ut,-ut);case"bottom-right":return new st.Point(-ut,-ut);case"left":return new st.Point(ft,0);case"right":return new st.Point(-ft,0)}return new st.Point(0,0)}return ft instanceof st.Point||Array.isArray(ft)?st.Point.convert(ft):st.Point.convert(ft[ot]||[0,0])}class Ky{constructor(ot){this.jumpTo(ot)}getValue(ot){if(ot<=this._startTime)return this._start;if(ot>=this._endTime)return this._end;const ut=st.easeCubicInOut((ot-this._startTime)/(this._endTime-this._startTime));return this._start*(1-ut)+this._end*ut}isEasing(ot){return ot>=this._startTime&&ot<=this._endTime}jumpTo(ot){this._startTime=-1/0,this._endTime=-1/0,this._start=ot,this._end=ot}easeTo(ot,ut,yt){this._start=this.getValue(ut),this._end=ot,this._startTime=ut,this._endTime=ut+yt}}const wx={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},bx={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},Av={showCompass:!0,showZoom:!0,visualizePitch:!1};class kv{constructor(ot,ut,yt=!1){this._clickTolerance=10,this.element=ut,this.mouseRotate=new Uy({clickTolerance:ot.dragRotate._mouseRotate._clickTolerance}),this.map=ot,yt&&(this.mousePitch=new Vy({clickTolerance:ot.dragRotate._mousePitch._clickTolerance})),st.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),ut.addEventListener("mousedown",this.mousedown),ut.addEventListener("touchstart",this.touchstart,{passive:!1}),ut.addEventListener("touchmove",this.touchmove),ut.addEventListener("touchend",this.touchend),ut.addEventListener("touchcancel",this.reset)}down(ot,ut){this.mouseRotate.mousedown(ot,ut),this.mousePitch&&this.mousePitch.mousedown(ot,ut),Yt()}move(ot,ut){const yt=this.map,vt=this.mouseRotate.mousemoveWindow(ot,ut),Et=vt&&vt.bearingDelta;if(Et&&yt.setBearing(yt.getBearing()+Et),this.mousePitch){const Rt=this.mousePitch.mousemoveWindow(ot,ut),At=Rt&&Rt.pitchDelta;At&&yt.setPitch(yt.getPitch()+At)}}off(){const ot=this.element;ot.removeEventListener("mousedown",this.mousedown),ot.removeEventListener("touchstart",this.touchstart,{passive:!1}),ot.removeEventListener("touchmove",this.touchmove),ot.removeEventListener("touchend",this.touchend),ot.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Kt(),st.window.removeEventListener("mousemove",this.mousemove),st.window.removeEventListener("mouseup",this.mouseup)}mousedown(ot){this.down(st.extend({},ot,{ctrlKey:!0,preventDefault:()=>ot.preventDefault()}),Sr(this.element,ot)),st.window.addEventListener("mousemove",this.mousemove),st.window.addEventListener("mouseup",this.mouseup)}mousemove(ot){this.move(ot,Sr(this.element,ot))}mouseup(ot){this.mouseRotate.mouseupWindow(ot),this.mousePitch&&this.mousePitch.mouseupWindow(ot),this.offTemp()}touchstart(ot){ot.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Er(this.element,ot.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>ot.preventDefault()},this._startPos))}touchmove(ot){ot.targetTouches.length!==1?this.reset():(this._lastPos=Er(this.element,ot.targetTouches)[0],this.move({preventDefault:()=>ot.preventDefault()},this._lastPos))}touchend(ot){ot.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Yy={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Qy={maxWidth:100,unit:"metric"},Jy={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},cp={version:st.version,supported:kt,setRTLTextPlugin:st.setRTLTextPlugin,getRTLTextPluginStatus:st.getRTLTextPluginStatus,Map:class extends $m{constructor(ft){if(st.LivePerformanceUtils.mark(st.PerformanceMarkers.create),(ft=st.extend({},bx,ft)).minZoom!=null&&ft.maxZoom!=null&&ft.minZoom>ft.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(ft.minPitch!=null&&ft.maxPitch!=null&&ft.minPitch>ft.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(ft.minPitch!=null&&ft.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(ft.maxPitch!=null&&ft.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(ft.antialias&&st.isSafariWithAntialiasingBug(st.window)&&(ft.antialias=!1,st.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new ip(ft.minZoom,ft.maxZoom,ft.minPitch,ft.maxPitch,ft.renderWorldCopies),ft),this._interactive=ft.interactive,this._minTileCacheSize=ft.minTileCacheSize,this._maxTileCacheSize=ft.maxTileCacheSize,this._failIfMajorPerformanceCaveat=ft.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=ft.preserveDrawingBuffer,this._antialias=ft.antialias,this._useWebGL2=ft.useWebGL2,this._trackResize=ft.trackResize,this._bearingSnap=ft.bearingSnap,this._refreshExpiredTiles=ft.refreshExpiredTiles,this._fadeDuration=ft.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=ft.crossSourceCollisions,this._collectResourceTiming=ft.collectResourceTiming,this._optimizeForTerrain=ft.optimizeForTerrain,this._language=this._parseLanguage(ft.language),this._worldview=ft.worldview,this._renderTaskQueue=new Zy,this._domRenderTaskQueue=new Zy,this._controls=[],this._markers=[],this._popups=[],this._mapId=st.uniqueId(),this._locale=st.extend({},wx,ft.locale),this._clickTolerance=ft.clickTolerance,this._cooperativeGestures=ft.cooperativeGestures,this._performanceMetricsCollection=ft.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Ky(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new st.RequestManager(ft.transformRequest,ft.accessToken,ft.testMode),this._silenceAuthErrors=!!ft.testMode,typeof ft.container=="string"){if(this._container=st.window.document.getElementById(ft.container),!this._container)throw new Error(`Container '${ft.container}' not found.`)}else{if(!(ft.container instanceof st.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=ft.container}if(this._container.childNodes.length>0&&st.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),ft.maxBounds&&this.setMaxBounds(ft.maxBounds),st.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),st.window!==void 0&&(st.window.addEventListener("online",this._onWindowOnline,!1),st.window.addEventListener("resize",this._onWindowResize,!1),st.window.addEventListener("orientationchange",this._onWindowResize,!1),st.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),st.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Vl(this,ft),this._localFontFamily=ft.localFontFamily,this._localIdeographFontFamily=ft.localIdeographFontFamily,ft.style&&this.setStyle(ft.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),ft.projection&&this.setProjection(ft.projection),this._hash=ft.hash&&new zy(typeof ft.hash=="string"&&ft.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:ft.center,zoom:ft.zoom,bearing:ft.bearing,pitch:ft.pitch}),ft.bounds&&(this.resize(),this.fitBounds(ft.bounds,st.extend({},ft.fitBoundsOptions,{duration:0})))),this.resize(),ft.attributionControl&&this.addControl(new $n({customAttribution:ft.customAttribution})),this._logoControl=new qy,this.addControl(this._logoControl,ft.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",ot=>{this._update(ot.dataType==="style"),this.fire(new st.Event(`${ot.dataType}data`,ot))}),this.on("dataloading",ot=>{this.fire(new st.Event(`${ot.dataType}dataloading`,ot))})}_getMapId(){return this._mapId}addControl(ft,ot){if(ot===void 0&&(ot=ft.getDefaultPosition?ft.getDefaultPosition():"top-right"),!ft||!ft.onAdd)return this.fire(new st.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const ut=ft.onAdd(this);this._controls.push(ft);const yt=this._controlPositions[ot];return ot.indexOf("bottom")!==-1?yt.insertBefore(ut,yt.firstChild):yt.appendChild(ut),this}removeControl(ft){if(!ft||!ft.onRemove)return this.fire(new st.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const ot=this._controls.indexOf(ft);return ot>-1&&this._controls.splice(ot,1),ft.onRemove(this),this}hasControl(ft){return this._controls.indexOf(ft)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(ft){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const ot=!this._moving;return ot&&this.fire(new st.Event("movestart",ft)).fire(new st.Event("move",ft)),this.fire(new st.Event("resize",ft)),ot&&this.fire(new st.Event("moveend",ft)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(ft){return this.transform.setMaxBounds(st.LngLatBounds.convert(ft)),this._update()}setMinZoom(ft){if((ft=ft??-2)>=-2&&ft<=this.transform.maxZoom)return this.transform.minZoom=ft,this._update(),this.getZoom()<ft?this.setZoom(ft):this.fire(new st.Event("zoomstart")).fire(new st.Event("zoom")).fire(new st.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(ft){if((ft=ft??22)>=this.transform.minZoom)return this.transform.maxZoom=ft,this._update(),this.getZoom()>ft?this.setZoom(ft):this.fire(new st.Event("zoomstart")).fire(new st.Event("zoom")).fire(new st.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(ft){if((ft=ft??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(ft>=0&&ft<=this.transform.maxPitch)return this.transform.minPitch=ft,this._update(),this.getPitch()<ft?this.setPitch(ft):this.fire(new st.Event("pitchstart")).fire(new st.Event("pitch")).fire(new st.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(ft){if((ft=ft??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(ft>=this.transform.minPitch)return this.transform.maxPitch=ft,this._update(),this.getPitch()>ft?this.setPitch(ft):this.fire(new st.Event("pitchstart")).fire(new st.Event("pitch")).fire(new st.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(ft){return this.transform.renderWorldCopies=ft,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(ft){return ft==="auto"?st.window.navigator.language:Array.isArray(ft)?ft.length===0?void 0:ft.map(ot=>ot==="auto"?st.window.navigator.language:ot):ft}setLanguage(ft){const ot=this._parseLanguage(ft);if(!this.style||ot===this._language)return this;this._language=ot,this.style._reloadSources();for(const ut of this._controls)ut._setLanguage&&ut._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(ft){return this.style&&ft!==this._worldview?(this._worldview=ft,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(ft){return this._lazyInitEmptyStyle(),ft?typeof ft=="string"&&(ft={name:ft}):ft=null,this._useExplicitProjection=!!ft,this._prioritizeAndUpdateProjection(ft,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const ft=this.transform,ot=ft.projection.name;let ut;ot==="globe"&&ft.zoom>=st.GLOBE_ZOOM_THRESHOLD_MAX?(ft.setMercatorFromTransition(),ut=!0):ot==="mercator"&&ft.zoom<st.GLOBE_ZOOM_THRESHOLD_MAX&&(ft.setProjection({name:"globe"}),ut=!0),ut&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(ft,ot){return this._updateProjection(ft||ot||{name:"mercator"})}_updateProjection(ft){let ot;if(ot=ft.name==="globe"&&this.transform.zoom>=st.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(ft),this.style.applyProjectionUpdate(),ot){this.painter.clearBackgroundTiles();for(const ut in this.style._sourceCaches)this.style._sourceCaches[ut].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(ft){return this.transform.locationPoint3D(st.LngLat.convert(ft))}unproject(ft){return this.transform.pointLocation3D(st.Point.convert(ft))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(ft,ot,ut){if(ft==="mouseenter"||ft==="mouseover"){let yt=!1;const vt=Rt=>{const At=ot.filter(Nt=>this.getLayer(Nt)),It=At.length?this.queryRenderedFeatures(Rt.point,{layers:At}):[];It.length?yt||(yt=!0,ut.call(this,new Ts(ft,this,Rt.originalEvent,{features:It}))):yt=!1},Et=()=>{yt=!1};return{layers:new Set(ot),listener:ut,delegates:{mousemove:vt,mouseout:Et}}}if(ft==="mouseleave"||ft==="mouseout"){let yt=!1;const vt=Rt=>{const At=ot.filter(It=>this.getLayer(It));(At.length?this.queryRenderedFeatures(Rt.point,{layers:At}):[]).length?yt=!0:yt&&(yt=!1,ut.call(this,new Ts(ft,this,Rt.originalEvent)))},Et=Rt=>{yt&&(yt=!1,ut.call(this,new Ts(ft,this,Rt.originalEvent)))};return{layers:new Set(ot),listener:ut,delegates:{mousemove:vt,mouseout:Et}}}{const yt=vt=>{const Et=ot.filter(At=>this.getLayer(At)),Rt=Et.length?this.queryRenderedFeatures(vt.point,{layers:Et}):[];Rt.length&&(vt.features=Rt,ut.call(this,vt),delete vt.features)};return{layers:new Set(ot),listener:ut,delegates:{[ft]:yt}}}}on(ft,ot,ut){if(ut===void 0)return super.on(ft,ot);Array.isArray(ot)||(ot=[ot]);const yt=this._createDelegatedListener(ft,ot,ut);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[ft]=this._delegatedListeners[ft]||[],this._delegatedListeners[ft].push(yt);for(const vt in yt.delegates)this.on(vt,yt.delegates[vt]);return this}once(ft,ot,ut){if(ut===void 0)return super.once(ft,ot);Array.isArray(ot)||(ot=[ot]);const yt=this._createDelegatedListener(ft,ot,ut);for(const vt in yt.delegates)this.once(vt,yt.delegates[vt]);return this}off(ft,ot,ut){if(ut===void 0)return super.off(ft,ot);ot=new Set(Array.isArray(ot)?ot:[ot]);const yt=(Et,Rt)=>{if(Et.size!==Rt.size)return!1;for(const At of Et)if(!Rt.has(At))return!1;return!0},vt=this._delegatedListeners?this._delegatedListeners[ft]:void 0;return vt&&(Et=>{for(let Rt=0;Rt<Et.length;Rt++){const At=Et[Rt];if(At.listener===ut&&yt(At.layers,ot)){for(const It in At.delegates)this.off(It,At.delegates[It]);return Et.splice(Rt,1),this}}})(vt),this}queryRenderedFeatures(ft,ot){return this.style?(ot!==void 0||ft===void 0||ft instanceof st.Point||Array.isArray(ft)||(ot=ft,ft=void 0),this.style.queryRenderedFeatures(ft=ft||[[0,0],[this.transform.width,this.transform.height]],ot=ot||{},this.transform)):[]}querySourceFeatures(ft,ot){return this.style.querySourceFeatures(ft,ot)}isPointOnSurface(ft){const{name:ot}=this.transform.projection;return ot!=="globe"&&ot!=="mercator"&&st.warnOnce(`${ot} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(st.Point.convert(ft))}setStyle(ft,ot){return(ot=st.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},ot)).diff!==!1&&ot.localIdeographFontFamily===this._localIdeographFontFamily&&ot.localFontFamily===this._localFontFamily&&this.style&&ft?(this._diffStyle(ft,ot),this):(this._localIdeographFontFamily=ot.localIdeographFontFamily,this._localFontFamily=ot.localFontFamily,this._updateStyle(ft,ot))}_getUIString(ft){const ot=this._locale[ft];if(ot==null)throw new Error(`Missing UI string '${ft}'`);return ot}_updateStyle(ft,ot){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),ft&&(this.style=new Fl(this,ot||{}),this.style.setEventedParent(this,{style:this.style}),typeof ft=="string"?this.style.loadURL(ft):this.style.loadJSON(ft)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Fl(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(ft,ot){if(typeof ft=="string"){const ut=this._requestManager.normalizeStyleURL(ft),yt=this._requestManager.transformRequest(ut,st.ResourceType.Style);st.getJSON(yt,(vt,Et)=>{vt?this.fire(new st.ErrorEvent(vt)):Et&&this._updateDiff(Et,ot)})}else typeof ft=="object"&&this._updateDiff(ft,ot)}_updateDiff(ft,ot){try{this.style.setState(ft)&&this._update(!0)}catch(ut){st.warnOnce(`Unable to perform style diff: ${ut.message||ut.error||ut}.  Rebuilding the style from scratch.`),this._updateStyle(ft,ot)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(st.warnOnce("There is no style added to the map."),!1)}addSource(ft,ot){return this._lazyInitEmptyStyle(),this.style.addSource(ft,ot),this._update(!0)}isSourceLoaded(ft){return!!this.style&&this.style._isSourceCacheLoaded(ft)}areTilesLoaded(){const ft=this.style&&this.style._sourceCaches;for(const ot in ft){const ut=ft[ot]._tiles;for(const yt in ut){const vt=ut[yt];if(vt.state!=="loaded"&&vt.state!=="errored")return!1}}return!0}addSourceType(ft,ot,ut){this._lazyInitEmptyStyle(),this.style.addSourceType(ft,ot,ut)}removeSource(ft){return this.style.removeSource(ft),this._updateTerrain(),this._update(!0)}getSource(ft){return this.style.getSource(ft)}addImage(ft,ot,{pixelRatio:ut=1,sdf:yt=!1,stretchX:vt,stretchY:Et,content:Rt}={}){if(this._lazyInitEmptyStyle(),ot instanceof st.window.HTMLImageElement||st.window.ImageBitmap&&ot instanceof st.window.ImageBitmap){const{width:At,height:It,data:Nt}=st.exported.getImageData(ot);this.style.addImage(ft,{data:new st.RGBAImage({width:At,height:It},Nt),pixelRatio:ut,stretchX:vt,stretchY:Et,content:Rt,sdf:yt,version:0})}else if(ot.width===void 0||ot.height===void 0)this.fire(new st.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:At,height:It}=ot,Nt=ot;this.style.addImage(ft,{data:new st.RGBAImage({width:At,height:It},new Uint8Array(Nt.data)),pixelRatio:ut,stretchX:vt,stretchY:Et,content:Rt,sdf:yt,version:0,userImage:Nt}),Nt.onAdd&&Nt.onAdd(this,ft)}}updateImage(ft,ot){const ut=this.style.getImage(ft);if(!ut)return void this.fire(new st.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const yt=ot instanceof st.window.HTMLImageElement||st.window.ImageBitmap&&ot instanceof st.window.ImageBitmap?st.exported.getImageData(ot):ot,{width:vt,height:Et}=yt;vt!==void 0&&Et!==void 0?vt===ut.data.width&&Et===ut.data.height?(ut.data.replace(yt.data,!(ot instanceof st.window.HTMLImageElement||st.window.ImageBitmap&&ot instanceof st.window.ImageBitmap)),this.style.updateImage(ft,ut)):this.fire(new st.ErrorEvent(new Error(`The width and height of the updated image (${vt}, ${Et})
                must be that same as the previous version of the image
                (${ut.data.width}, ${ut.data.height})`))):this.fire(new st.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(ft){return ft?!!this.style.getImage(ft):(this.fire(new st.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(ft){this.style.removeImage(ft)}loadImage(ft,ot){st.getImage(this._requestManager.transformRequest(ft,st.ResourceType.Image),(ut,yt)=>{ot(ut,yt instanceof st.window.HTMLImageElement?st.exported.getImageData(yt):yt)})}listImages(){return this.style.listImages()}addLayer(ft,ot){return this._lazyInitEmptyStyle(),this.style.addLayer(ft,ot),this._update(!0)}moveLayer(ft,ot){return this.style.moveLayer(ft,ot),this._update(!0)}removeLayer(ft){return this.style.removeLayer(ft),this._update(!0)}getLayer(ft){return this.style.getLayer(ft)}setLayerZoomRange(ft,ot,ut){return this.style.setLayerZoomRange(ft,ot,ut),this._update(!0)}setFilter(ft,ot,ut={}){return this.style.setFilter(ft,ot,ut),this._update(!0)}getFilter(ft){return this.style.getFilter(ft)}setPaintProperty(ft,ot,ut,yt={}){return this.style.setPaintProperty(ft,ot,ut,yt),this._update(!0)}getPaintProperty(ft,ot){return this.style.getPaintProperty(ft,ot)}setLayoutProperty(ft,ot,ut,yt={}){return this.style.setLayoutProperty(ft,ot,ut,yt),this._update(!0)}getLayoutProperty(ft,ot){return this.style.getLayoutProperty(ft,ot)}setLight(ft,ot={}){return this._lazyInitEmptyStyle(),this.style.setLight(ft,ot),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(ft){return this._lazyInitEmptyStyle(),!ft&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(ft),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(ft){return this._lazyInitEmptyStyle(),this.style.setFog(ft),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(ft){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(st.LngLat.convert(ft),this.transform):0}setFeatureState(ft,ot){return this.style.setFeatureState(ft,ot),this._update()}removeFeatureState(ft,ot){return this.style.removeFeatureState(ft,ot),this._update()}getFeatureState(ft){return this.style.getFeatureState(ft)}_updateContainerDimensions(){if(!this._container)return;const ft=this._container.getBoundingClientRect().width||400,ot=this._container.getBoundingClientRect().height||300;let ut,yt,vt,Et=this._container;for(;Et&&(!yt||!vt);){const Rt=st.window.getComputedStyle(Et).transform;Rt&&Rt!=="none"&&(ut=Rt.match(/matrix.*\((.+)\)/)[1].split(", "),ut[0]&&ut[0]!=="0"&&ut[0]!=="1"&&(yt=ut[0]),ut[3]&&ut[3]!=="0"&&ut[3]!=="1"&&(vt=ut[3])),Et=Et.parentElement}this._containerWidth=yt?Math.abs(ft/yt):ft,this._containerHeight=vt?Math.abs(ot/vt):ot}_detectMissingCSS(){st.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&st.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const ft=this._container;ft.classList.add("mapboxgl-map"),(this._missingCSSCanary=Ot("div","mapboxgl-canary",ft)).style.visibility="hidden",this._detectMissingCSS();const ot=this._canvasContainer=Ot("div","mapboxgl-canvas-container",ft);this._interactive&&ot.classList.add("mapboxgl-interactive"),this._canvas=Ot("canvas","mapboxgl-canvas",ot),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const ut=this._controlContainer=Ot("div","mapboxgl-control-container",ft),yt=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(vt=>{yt[vt]=Ot("div",`mapboxgl-ctrl-${vt}`,ut)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(ft,ot){const ut=st.exported.devicePixelRatio||1;this._canvas.width=ut*Math.ceil(ft),this._canvas.height=ut*Math.ceil(ot),this._canvas.style.width=`${ft}px`,this._canvas.style.height=`${ot}px`}_addMarker(ft){this._markers.push(ft)}_removeMarker(ft){const ot=this._markers.indexOf(ft);ot!==-1&&this._markers.splice(ot,1)}_addPopup(ft){this._popups.push(ft)}_removePopup(ft){const ot=this._popups.indexOf(ft);ot!==-1&&this._popups.splice(ot,1)}_setupPainter(){const ft=st.extend({},kt.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),ot=this._useWebGL2&&this._canvas.getContext("webgl2",ft),ut=ot||this._canvas.getContext("webgl",ft)||this._canvas.getContext("experimental-webgl",ft);ut?(this._useWebGL2&&!ot&&st.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),st.storeAuthState(ut,!0),this.painter=new rp(ut,this.transform,!!ot),this.on("data",yt=>{yt.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),st.exported$1.testSupport(ut)):this.fire(new st.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(ft){ft.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new st.Event("webglcontextlost",{originalEvent:ft}))}_contextRestored(ft){this._setupPainter(),this.resize(),this._update(),this.fire(new st.Event("webglcontextrestored",{originalEvent:ft}))}_onMapScroll(ft){if(ft.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(ft){return this.style?(this._styleDirty=this._styleDirty||ft,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(ft){return this._update(),this._renderTaskQueue.add(ft)}_cancelRenderFrame(ft){this._renderTaskQueue.remove(ft)}_requestDomTask(ft){!this.loaded()||this.loaded()&&!this.isMoving()?ft():this._domRenderTaskQueue.add(ft)}_render(ft){let ot;const ut=this.painter.context.extTimerQuery,yt=st.exported.now();if(this.listens("gpu-timing-frame")&&(ot=ut.createQueryEXT(),ut.beginQueryEXT(ut.TIME_ELAPSED_EXT,ot)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],st.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],st.window.performance.now())),this._renderTaskQueue.run(ft),this._domRenderTaskQueue.run(ft),this._removed)return;this._updateProjectionTransition();const vt=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const At=this.transform.zoom,It=this.transform.pitch,Nt=st.exported.now(),$t=new st.EvaluationParameters(At,{now:Nt,fadeDuration:vt,pitch:It,transition:this.style.getTransition()});this.style.update($t)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let Et=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),Et=this._updateAverageElevation(yt),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):Et=this._updateAverageElevation(yt),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,vt,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:vt,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new st.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new st.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),ot){const At=st.exported.now()-yt;ut.endQueryEXT(ut.TIME_ELAPSED_EXT,ot),setTimeout(()=>{const It=ut.getQueryObjectEXT(ot,ut.QUERY_RESULT_EXT)/1e6;ut.deleteQueryEXT(ot),this.fire(new st.Event("gpu-timing-frame",{cpuTime:At,gpuTime:It})),st.window.performance.mark("frame-gpu",{startTime:yt,detail:{gpuTime:It}})},50)}if(this.listens("gpu-timing-layer")){const At=this.painter.collectGpuTimers();setTimeout(()=>{const It=this.painter.queryGpuTimers(At);this.fire(new st.Event("gpu-timing-layer",{layerTimes:It}))},50)}if(this.listens("gpu-timing-deferred-render")){const At=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const It=this.painter.queryGpuTimeDeferredRender(At);this.fire(new st.Event("gpu-timing-deferred-render",{gpuTime:It}))},50)}const Rt=this._sourcesDirty||this._styleDirty||this._placementDirty||Et;if(Rt||this._repaint)this.triggerRepaint();else{const At=!this.isMoving()&&this.loaded();if(At&&(Et=this._updateAverageElevation(yt,!0)),Et)this.triggerRepaint();else if(this._triggerFrame(!1),At&&(this.fire(new st.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const It=this._calculateSpeedIndex();this.fire(new st.Event("speedindexcompleted",{speedIndex:It})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||Rt||(this._fullyLoaded=!0,st.LivePerformanceUtils.mark(st.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&st.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(ft){for(const ot of this._markers)ft&&!this.getRenderWorldCopies()&&(ot._lngLat=ot._lngLat.wrap()),ot._update();for(const ot of this._popups)!ft||this.getRenderWorldCopies()||ot._trackPointer||(ot._lngLat=ot._lngLat.wrap()),ot._update()}_updateAverageElevation(ft,ot=!1){const ut=yt=>(this.transform.averageElevation=yt,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&ut(0);if((ot||ft-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(ft)){const yt=this.transform.averageElevation;let vt=this.transform.sampleAverageElevation(),Et=!1;this.transform.elevation&&(Et=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(vt)?vt=0:this._averageElevationLastSampledAt=ft;const Rt=Math.abs(yt-vt);if(Rt>1){if(this._isInitialLoad||Et)return this._averageElevation.jumpTo(vt),ut(vt);this._averageElevation.easeTo(vt,ft,300)}else if(Rt>1e-4)return this._averageElevation.jumpTo(vt),ut(vt)}return!!this._averageElevation.isEasing(ft)&&ut(this._averageElevation.getValue(ft))}_authenticate(){st.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,ft=>{if(ft&&(ft.message===st.AUTH_ERR_MSG||ft.status===401)){const ot=this.painter.context.gl;st.storeAuthState(ot,!1),this._logoControl instanceof qy&&this._logoControl._updateLogo(),ot&&ot.clear(ot.DEPTH_BUFFER_BIT|ot.COLOR_BUFFER_BIT|ot.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new st.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),st.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const ft=this._isDragging();this.painter.updateTerrain(this.style,ft)}_calculateSpeedIndex(){const ft=this.painter.canvasCopy(),ot=this.painter.getCanvasCopiesAndTimestamps();ot.timeStamps.push(performance.now());const ut=this.painter.context.gl,yt=ut.createFramebuffer();function vt(Et){ut.framebufferTexture2D(ut.FRAMEBUFFER,ut.COLOR_ATTACHMENT0,ut.TEXTURE_2D,Et,0);const Rt=new Uint8Array(ut.drawingBufferWidth*ut.drawingBufferHeight*4);return ut.readPixels(0,0,ut.drawingBufferWidth,ut.drawingBufferHeight,ut.RGBA,ut.UNSIGNED_BYTE,Rt),Rt}return ut.bindFramebuffer(ut.FRAMEBUFFER,yt),this._canvasPixelComparison(vt(ft),ot.canvasCopies.map(vt),ot.timeStamps)}_canvasPixelComparison(ft,ot,ut){let yt=ut[1]-ut[0];const vt=ft.length/4;for(let Et=0;Et<ot.length;Et++){const Rt=ot[Et];let At=0;for(let It=0;It<Rt.length;It+=4)Rt[It]===ft[It]&&Rt[It+1]===ft[It+1]&&Rt[It+2]===ft[It+2]&&Rt[It+3]===ft[It+3]&&(At+=1);yt+=(ut[Et+2]-ut[Et+1])*(1-At/vt)}return yt}remove(){this._hash&&this._hash.remove();for(const ot of this._controls)ot.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),st.window!==void 0&&(st.window.removeEventListener("resize",this._onWindowResize,!1),st.window.removeEventListener("orientationchange",this._onWindowResize,!1),st.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),st.window.removeEventListener("online",this._onWindowOnline,!1),st.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const ft=this.painter.context.gl.getExtension("WEBGL_lose_context");ft&&ft.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),st.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new st.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(ft){this._renderNextFrame=this._renderNextFrame||ft,this.style&&!this._frame&&(this._frame=st.exported.frame(ot=>{const ut=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,ut&&this._render(ot)}))}_preloadTiles(ft){const ot=this.style?Object.values(this.style._sourceCaches):[];return st.asyncAll(ot,(ut,yt)=>ut._preloadTiles(ft,yt),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(ft){this._trackResize&&this.resize({originalEvent:ft})._update()}_onVisibilityChange(){st.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(ft){this._showTileBoundaries!==ft&&(this._showTileBoundaries=ft,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(ft){this._showTerrainWireframe!==ft&&(this._showTerrainWireframe=ft,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(ft){this._speedIndexTiming!==ft&&(this._speedIndexTiming=ft,this._update())}get showPadding(){return!!this._showPadding}set showPadding(ft){this._showPadding!==ft&&(this._showPadding=ft,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(ft){this._showCollisionBoxes!==ft&&(this._showCollisionBoxes=ft,ft?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(ft){this._showOverdrawInspector!==ft&&(this._showOverdrawInspector=ft,this._update())}get repaint(){return!!this._repaint}set repaint(ft){this._repaint!==ft&&(this._repaint=ft,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(ft){this._vertices=ft,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(ft){this._showTileAABBs!==ft&&(this._showTileAABBs=ft,ft&&this._update())}_setCacheLimits(ft,ot){st.setCacheLimits(ft,ot)}get version(){return st.version}},NavigationControl:class{constructor(ft){this.options=st.extend({},Av,ft),this._container=Ot("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",ot=>ot.preventDefault()),this.options.showZoom&&(st.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",ot=>{this._map&&this._map.zoomIn({},{originalEvent:ot})}),Ot("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",ot=>{this._map&&this._map.zoomOut({},{originalEvent:ot})}),Ot("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(st.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",ot=>{const ut=this._map;ut&&(this.options.visualizePitch?ut.resetNorthPitch({},{originalEvent:ot}):ut.resetNorth({},{originalEvent:ot}))}),this._compassIcon=Ot("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const ft=this._map;if(!ft)return;const ot=ft.getZoom(),ut=ot===ft.getMaxZoom(),yt=ot===ft.getMinZoom();this._zoomInButton.disabled=ut,this._zoomOutButton.disabled=yt,this._zoomInButton.setAttribute("aria-disabled",ut.toString()),this._zoomOutButton.setAttribute("aria-disabled",yt.toString())}_rotateCompassArrow(){const ft=this._map;if(!ft)return;const ot=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(ft.transform.pitch*(Math.PI/180)),.5)}) rotateX(${ft.transform.pitch}deg) rotateZ(${ft.transform.angle*(180/Math.PI)}deg)`:`rotate(${ft.transform.angle*(180/Math.PI)}deg)`;ft._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=ot)})}onAdd(ft){return this._map=ft,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),ft.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&ft.on("pitch",this._rotateCompassArrow),ft.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new kv(ft,this._compass,this.options.visualizePitch)),this._container}onRemove(){const ft=this._map;ft&&(this._container.remove(),this.options.showZoom&&ft.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&ft.off("pitch",this._rotateCompassArrow),ft.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(ft,ot){const ut=Ot("button",ft,this._container);return ut.type="button",ut.addEventListener("click",ot),ut}_setButtonTitle(ft,ot){if(!this._map)return;const ut=this._map._getUIString(`NavigationControl.${ot}`);ft.setAttribute("aria-label",ut),ft.firstElementChild&&ft.firstElementChild.setAttribute("title",ut)}},GeolocateControl:class extends st.Evented{constructor(ft){super(),this.options=st.extend({geolocation:st.window.navigator.geolocation},Yy,ft),st.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=op(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(ft){return this._map=ft,this._container=Ot("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(ft){const ot=(ut=!!this.options.geolocation)=>{this._supportsGeolocation=ut,ft(ut)};this._supportsGeolocation!==void 0?ft(this._supportsGeolocation):st.window.navigator.permissions!==void 0?st.window.navigator.permissions.query({name:"geolocation"}).then(ut=>ot(ut.state!=="denied")).catch(()=>ot()):ot()}_isOutOfMapMaxBounds(ft){const ot=this._map.getMaxBounds(),ut=ft.coords;return!!ot&&(ut.longitude<ot.getWest()||ut.longitude>ot.getEast()||ut.latitude<ot.getSouth()||ut.latitude>ot.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(ft){if(this._map){if(this._isOutOfMapMaxBounds(ft))return this._setErrorState(),this.fire(new st.Event("outofmaxbounds",ft)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=ft,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(ft),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(ft),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new st.Event("geolocate",ft)),this._finish()}}_updateCamera(ft){const ot=new st.LngLat(ft.coords.longitude,ft.coords.latitude),ut=ft.coords.accuracy,yt=this._map.getBearing(),vt=st.extend({bearing:yt},this.options.fitBoundsOptions);this._map.fitBounds(ot.toBounds(ut),vt,{geolocateSource:!0})}_updateMarker(ft){if(ft){const ot=new st.LngLat(ft.coords.longitude,ft.coords.latitude);this._accuracyCircleMarker.setLngLat(ot).addTo(this._map),this._userLocationDotMarker.setLngLat(ot).addTo(this._map),this._accuracy=ft.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const ft=this._map.transform,ot=st.mercatorZfromAltitude(1,ft._center.lat)*ft.worldSize,ut=Math.ceil(2*this._accuracy*ot);this._circleElement.style.width=`${ut}px`,this._circleElement.style.height=`${ut}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(ft){if(this._map){if(this.options.trackUserLocation)if(ft.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const ot=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",ot),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",ot),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(ft.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new st.Event("error",ft)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(ft){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",ot=>ot.preventDefault()),this._geolocateButton=Ot("button","mapboxgl-ctrl-geolocate",this._container),Ot("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",ft===!1){st.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const ot=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",ot),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",ot)}else{const ot=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",ot),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",ot)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Ot("div","mapboxgl-user-location"),this._dotElement.appendChild(Ot("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(Ot("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new jn({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=Ot("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new jn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",ot=>{ot.geolocateSource||this._watchState!=="ACTIVE_LOCK"||ot.originalEvent&&ot.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new st.Event("trackuserlocationend")))})}}_onDeviceOrientation(ft){this._userLocationDotMarker&&(ft.webkitCompassHeading?this._heading=ft.webkitCompassHeading:ft.absolute===!0&&(this._heading=-1*ft.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return st.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new st.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new st.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new st.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let ft;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(ft={maximumAge:6e5,timeout:0},this._noTimeout=!0):(ft=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,ft),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const ft=()=>{st.window.addEventListener("ondeviceorientationabsolute"in st.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};st.window.DeviceMotionEvent!==void 0&&typeof st.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(ot=>{ot==="granted"&&ft()}).catch(console.error):ft()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),st.window.removeEventListener("deviceorientation",this._onDeviceOrientation),st.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:$n,ScaleControl:class{constructor(ft){this.options=st.extend({},Qy,ft),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),st.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const ft=this.options.maxWidth||100,ot=this._map,ut=ot._containerHeight/2,yt=ot._containerWidth/2-ft/2,vt=ot.unproject([yt,ut]),Et=ot.unproject([yt+ft,ut]),Rt=vt.distanceTo(Et);if(this.options.unit==="imperial"){const At=3.2808*Rt;At>5280?this._setScale(ft,At/5280,"mile"):this._setScale(ft,At,"foot")}else this.options.unit==="nautical"?this._setScale(ft,Rt/1852,"nautical-mile"):Rt>=1e3?this._setScale(ft,Rt/1e3,"kilometer"):this._setScale(ft,Rt,"meter")}_setScale(ft,ot,ut){this._map._requestDomTask(()=>{const yt=function(Et){const Rt=Math.pow(10,`${Math.floor(Et)}`.length-1);let At=Et/Rt;return At=At>=10?10:At>=5?5:At>=3?3:At>=2?2:At>=1?1:function(It){const Nt=Math.pow(10,Math.ceil(-Math.log(It)/Math.LN10));return Math.round(It*Nt)/Nt}(At),Rt*At}(ot),vt=yt/ot;this._container.innerHTML=this._isNumberFormatSupported&&ut!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:ut}).format(yt):`${yt}&nbsp;${Jy[ut]}`,this._container.style.width=ft*vt+"px"})}onAdd(ft){return this._map=ft,this._language=ft.getLanguage(),this._container=Ot("div","mapboxgl-ctrl mapboxgl-ctrl-scale",ft.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(ft){this._language=ft,this._update()}setUnit(ft){this.options.unit=ft,this._update()}},FullscreenControl:class{constructor(ft){this._fullscreen=!1,ft&&ft.container&&(ft.container instanceof st.window.HTMLElement?this._container=ft.container:st.warnOnce("Full screen control 'container' must be a DOM element.")),st.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in st.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in st.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(ft){return this._map=ft,this._container||(this._container=this._map.getContainer()),this._controlContainer=Ot("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",st.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,st.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!st.window.document.fullscreenEnabled&&!st.window.document.webkitFullscreenEnabled)}_setupUI(){const ft=this._fullscreenButton=Ot("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Ot("span","mapboxgl-ctrl-icon",ft).setAttribute("aria-hidden","true"),ft.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),st.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const ft=this._getTitle();this._fullscreenButton.setAttribute("aria-label",ft),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",ft)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(st.window.document.fullscreenElement||st.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?st.window.document.exitFullscreen?st.window.document.exitFullscreen():st.window.document.webkitCancelFullScreen&&st.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends st.Evented{constructor(ft){super(),this.options=st.extend(Object.create(Xy),ft),st.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(ft&&ft.className?ft.className.trim().split(/\s+/):[])}addTo(ft){return this._map&&this.remove(),this._map=ft,this.options.closeOnClick&&ft.on("preclick",this._onClose),this.options.closeOnMove&&ft.on("move",this._onClose),ft.on("remove",this.remove),this._update(),ft._addPopup(this),this._focusFirstElement(),this._trackPointer?(ft.on("mousemove",this._onMouseEvent),ft.on("mouseup",this._onMouseEvent),ft._canvasContainer.classList.add("mapboxgl-track-pointer")):ft.on("move",this._update),this.fire(new st.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const ft=this._map;return ft&&(ft.off("move",this._update),ft.off("move",this._onClose),ft.off("preclick",this._onClose),ft.off("click",this._onClose),ft.off("remove",this.remove),ft.off("mousemove",this._onMouseEvent),ft.off("mouseup",this._onMouseEvent),ft.off("drag",this._onMouseEvent),ft._canvasContainer&&ft._canvasContainer.classList.remove("mapboxgl-track-pointer"),ft._removePopup(this),this._map=void 0),this.fire(new st.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(ft){this._lngLat=st.LngLat.convert(ft),this._pos=null,this._trackPointer=!1,this._update();const ot=this._map;return ot&&(ot.on("move",this._update),ot.off("mousemove",this._onMouseEvent),ot._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const ft=this._map;return ft&&(ft.off("move",this._update),ft.on("mousemove",this._onMouseEvent),ft.on("drag",this._onMouseEvent),ft._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(ft){return this.setDOMContent(st.window.document.createTextNode(ft))}setHTML(ft){const ot=st.window.document.createDocumentFragment(),ut=st.window.document.createElement("body");let yt;for(ut.innerHTML=ft;yt=ut.firstChild,yt;)ot.appendChild(yt);return this.setDOMContent(ot)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(ft){return this.options.maxWidth=ft,this._update(),this}setDOMContent(ft){let ot=this._content;if(ot)for(;ot.hasChildNodes();)ot.firstChild&&ot.removeChild(ot.firstChild);else ot=this._content=Ot("div","mapboxgl-popup-content",this._container||void 0);if(ot.appendChild(ft),this.options.closeButton){const ut=this._closeButton=Ot("button","mapboxgl-popup-close-button",ot);ut.type="button",ut.setAttribute("aria-label","Close popup"),ut.setAttribute("aria-hidden","true"),ut.innerHTML="&#215;",ut.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(ft){return this._classList.add(ft),this._updateClassList(),this}removeClassName(ft){return this._classList.delete(ft),this._updateClassList(),this}setOffset(ft){return this.options.offset=ft,this._update(),this}toggleClassName(ft){let ot;return this._classList.delete(ft)?ot=!1:(this._classList.add(ft),ot=!0),this._updateClassList(),ot}_onMouseEvent(ft){this._update(ft.point)}_getAnchor(ft){if(this.options.anchor)return this.options.anchor;const ot=this._map,ut=this._container,yt=this._pos;if(!ot||!ut||!yt)return"bottom";const vt=ut.offsetWidth,Et=ut.offsetHeight,Rt=yt.x<vt/2,At=yt.x>ot.transform.width-vt/2;if(yt.y+ft<Et)return Rt?"top-left":At?"top-right":"top";if(yt.y>ot.transform.height-Et){if(Rt)return"bottom-left";if(At)return"bottom-right"}return Rt?"left":At?"right":"bottom"}_updateClassList(){const ft=this._container;if(!ft)return;const ot=[...this._classList];ot.push("mapboxgl-popup"),this._anchor&&ot.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&ot.push("mapboxgl-popup-track-pointer"),ft.className=ot.join(" ")}_update(ft){const ot=this._map,ut=this._content;if(!ot||!this._lngLat&&!this._trackPointer||!ut)return;let yt=this._container;if(yt||(yt=this._container=Ot("div","mapboxgl-popup",ot.getContainer()),this._tip=Ot("div","mapboxgl-popup-tip",yt),yt.appendChild(ut)),this.options.maxWidth&&yt.style.maxWidth!==this.options.maxWidth&&(yt.style.maxWidth=this.options.maxWidth),ot.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=lp(this._lngLat,this._pos,ot.transform)),!this._trackPointer||ft){const vt=this._pos=this._trackPointer&&ft?ft:ot.project(this._lngLat),Et=vx(this.options.offset),Rt=this._anchor=this._getAnchor(Et.y),At=vx(this.options.offset,Rt),It=vt.add(At).round();ot._requestDomTask(()=>{this._container&&Rt&&(this._container.style.transform=`${$u[Rt]} translate(${It.x}px,${It.y}px)`)})}if(!this._marker&&ot._showingGlobe()){const vt=st.isLngLatBehindGlobe(ot.transform,this._lngLat)?0:1;this._setOpacity(vt)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const ft=this._container.querySelector(Rv);ft&&ft.focus()}_onClose(){this.remove()}_setOpacity(ft){this._container&&(this._container.style.opacity=`${ft}`),this._content&&(this._content.style.pointerEvents=ft?"auto":"none")}},Marker:jn,Style:Fl,LngLat:st.LngLat,LngLatBounds:st.LngLatBounds,Point:st.Point,MercatorCoordinate:st.MercatorCoordinate,FreeCameraOptions:ox,Evented:st.Evented,config:st.config,prewarm:function(){qu().acquire(zl)},clearPrewarmedResources:function(){const ft=Fs;ft&&(ft.isPreloaded()&&ft.numActive()===1?(ft.release(zl),Fs=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return st.config.ACCESS_TOKEN},set accessToken(ft){st.config.ACCESS_TOKEN=ft},get baseApiUrl(){return st.config.API_URL},set baseApiUrl(ft){st.config.API_URL=ft},get workerCount(){return Es.workerCount},set workerCount(ft){Es.workerCount=ft},get maxParallelImageRequests(){return st.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(ft){st.config.MAX_PARALLEL_IMAGE_REQUESTS=ft},clearStorage(ft){st.clearTileCache(ft)},workerUrl:"",workerClass:null,setNow:st.exported.setNow,restoreNow:st.exported.restoreNow};return cp});var wt=ht;return wt})})(mapboxGl);var mapboxGlExports=mapboxGl.exports;const mapboxgl=getDefaultExportFromCjs(mapboxGlExports);mapboxgl.accessToken="pk.eyJ1IjoiYXNoYWRhc2hyYWYiLCJhIjoiY2xuMzZrd2luMGc1NjJqbXUzeXZudzRhZCJ9.6-dCIqLi0A5a8XpfJKJtEQ";const Mapbox=()=>{const $=useDispatch(),_e=reactExports.useRef(null),rt=reactExports.useRef(null),[at,ht]=reactExports.useState(76.2494),[pt,wt]=reactExports.useState(9.9477),[st,Tt]=reactExports.useState(9),[kt,Mt]=reactExports.useState(null);return reactExports.useEffect(()=>{if(rt.current)return;axios$1.get("http://127.0.0.1:8000/api/maps/allcoordinates/").then(Ot=>{const Ut=Ot.data;rt.current=new mapboxgl.Map({container:_e.current,style:"mapbox://styles/mapbox/streets-v12",center:[at,pt],zoom:st}),rt.current.on("load",()=>{rt.current.loadImage("https://docs.mapbox.com/mapbox-gl-js/assets/custom_marker.png",function(qt,tr){if(qt)throw qt;rt.current.hasImage("custom-marker")||rt.current.addImage("custom-marker",tr),rt.current.addSource("points",{type:"geojson",data:{type:"FeatureCollection",features:Ut.features}}),rt.current.addLayer({id:"points",type:"symbol",source:"points",layout:{"icon-image":"custom-marker","text-field":["get","title"],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-offset":[0,1.25],"text-anchor":"top"}})})}),rt.current.on("move",()=>{ht(rt.current.getCenter().lng.toFixed(4)),wt(rt.current.getCenter().lat.toFixed(4)),Tt(rt.current.getZoom().toFixed(2))}),rt.current.on("click",qt=>{const{x:tr,y:ar}=qt.point,Yt=rt.current.unproject([tr,ar]),{lng:Kt,lat:Jt}=Yt;console.log(qt.lngLat),$(addAddress({lng:Kt,lat:Jt})),Mt([Kt,Jt])}),Dt()});const Dt=()=>{_e.current.clientWidth,_e.current.clientHeight,rt.current.resize()};return window.addEventListener("resize",Dt),()=>{window.removeEventListener("resize",Dt)}},[at,pt,st]),reactExports.useEffect(()=>{if(kt){const Dt=new mapboxgl.Marker({color:"red"}).setLngLat(kt).addTo(rt.current);return()=>{Dt.remove()}}},[kt]),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{className:"map-container",style:{width:"100%"},children:[jsxRuntimeExports.jsx("div",{ref:_e,className:"map"}),kt&&jsxRuntimeExports.jsx("div",{className:"marker",children:jsxRuntimeExports.jsx("button",{onClick:()=>Mt(null),children:"Clear Marker"})})]})})},house="/assets/browse-house-1-16b9f75b.jpg",apartment="/assets/browse-apartment-2-24c3098b.jpg",business_complex="/assets/browse-business_complex-3-7d590037.jpg",land="/assets/browse-land-4-8341e84b.jpg",UserHomeMid=()=>{const $=useHistory(),_e=useDispatch();localStorage.getItem("accessToken");const rt=async at=>{try{const ht=await axios$1.get("http://127.0.0.1:8000/api/property/browsebytype/",{params:{browse_type:at}});if(ht.status===200)console.log("success"),console.log(ht.data),_e(addPropertiesList({showPropertiesList:ht.data.data})),$.push("/userlistproperties");else{console.log("failed"),console.log(ht.data);const pt=await ht.text();console.log("Error Details:",pt),console.log("Status",ht.status),console.log("Response",ht)}}catch(ht){console.log("failed to sent the request",ht.response)}};return jsxRuntimeExports.jsxs("div",{style:{backgroundColor:"#C9C2F6"},children:[jsxRuntimeExports.jsx("h1",{className:"text-lg font-semibold p-2 p-md-3 p-lg-4",children:"BROWSE PROPERTIES IN INDIA"}),jsxRuntimeExports.jsxs("div",{className:"row ml-7 mr-7 mb-3 browse-container",children:[jsxRuntimeExports.jsxs("div",{className:"col-3 browse-image-container",onClick:()=>rt("house"),children:[jsxRuntimeExports.jsx("img",{src:house,alt:"House",className:"browse-img"}),jsxRuntimeExports.jsx("div",{className:"text-overlay",children:jsxRuntimeExports.jsx("div",{className:"browse-text font-semibold",children:"HOUSES"})})]}),jsxRuntimeExports.jsxs("div",{className:"col-3 browse-image-container",onClick:()=>rt("flat"),children:[jsxRuntimeExports.jsx("img",{src:apartment,alt:"Apartment",className:"browse-img"}),jsxRuntimeExports.jsx("div",{className:"text-overlay",children:jsxRuntimeExports.jsxs("div",{className:"browse-text font-semibold",children:["FLAT ",jsxRuntimeExports.jsx("br",{})," & ",jsxRuntimeExports.jsx("br",{})," APARTMENT"]})})]}),jsxRuntimeExports.jsxs("div",{className:"col-3 browse-image-container",onClick:()=>rt("complex"),children:[jsxRuntimeExports.jsx("img",{src:business_complex,alt:"Business_complex",className:"browse-img"}),jsxRuntimeExports.jsx("div",{className:"text-overlay",children:jsxRuntimeExports.jsxs("div",{className:"browse-text font-semibold",children:["BUSINESS ",jsxRuntimeExports.jsx("br",{})," COMPLEX"]})})]}),jsxRuntimeExports.jsxs("div",{className:"col-3 browse-image-container",onClick:()=>rt("land"),children:[jsxRuntimeExports.jsx("img",{src:land,alt:"Land",className:"browse-img"}),jsxRuntimeExports.jsx("div",{className:"text-overlay",children:jsxRuntimeExports.jsx("div",{className:"browse-text font-semibold",children:"LAND"})})]})]}),jsxRuntimeExports.jsx("br",{})]})},buy="/assets/type-1-c26713ec.webp",rent="/assets/type-2-ad0404fe.webp",sell="/assets/type-3-02f73130.webp",lease="/assets/type-4-8e14a7fa.webp",UserHomeBottom=()=>jsxRuntimeExports.jsx(React.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"row pl-5 pr-5 bottom-container",children:[jsxRuntimeExports.jsxs("div",{className:"col-2 bottom-image-container",children:[jsxRuntimeExports.jsx("img",{src:buy,alt:"buy",className:"bottom-img"}),jsxRuntimeExports.jsxs("div",{className:"bottom-text p-2 font-semibold",style:{backgroundColor:"#C9C2F6"},children:[jsxRuntimeExports.jsx("span",{className:"text-indigo-900",children:"BUY"})," PROPERTY"]})]}),jsxRuntimeExports.jsxs("div",{className:"col-2 bottom-image-container",children:[jsxRuntimeExports.jsx("img",{src:rent,alt:"rent",className:"bottom-img"}),jsxRuntimeExports.jsxs("div",{className:"bottom-text p-2 font-semibold",style:{backgroundColor:"#C9C2F6"},children:[jsxRuntimeExports.jsx("span",{className:"text-red-700",children:"RENT"})," PROPERTY"]})]}),jsxRuntimeExports.jsxs("div",{className:"col-2 bottom-image-container",children:[jsxRuntimeExports.jsx("img",{src:sell,alt:"sell",className:"bottom-img"}),jsxRuntimeExports.jsxs("div",{className:"bottom-text p-2 font-semibold",style:{backgroundColor:"#C9C2F6"},children:[jsxRuntimeExports.jsx("span",{className:"text-green-800",children:"SELL"})," PROPERTY"]})]}),jsxRuntimeExports.jsxs("div",{className:"col-2 bottom-image-container",children:[jsxRuntimeExports.jsx("img",{src:lease,alt:"lease",className:"bottom-img"}),jsxRuntimeExports.jsxs("div",{className:"bottom-text p-2 font-semibold",style:{backgroundColor:"#C9C2F6"},children:[jsxRuntimeExports.jsx("span",{className:"text-yellow-700",children:"LEASE"})," PROPERTY"]})]})]})}),propTypes$1={type:PropTypes.string,tooltip:PropTypes.bool,as:PropTypes.elementType},Feedback=reactExports.forwardRef(({as:$="div",className:_e,type:rt="valid",tooltip:at=!1,...ht},pt)=>jsxRuntimeExports.jsx($,{...ht,ref:pt,className:classNames(_e,`${rt}-${at?"tooltip":"feedback"}`)}));Feedback.displayName="Feedback";Feedback.propTypes=propTypes$1;const Feedback$1=Feedback,FormContext=reactExports.createContext({}),FormContext$1=FormContext,FormCheckInput=reactExports.forwardRef(({id:$,bsPrefix:_e,className:rt,type:at="checkbox",isValid:ht=!1,isInvalid:pt=!1,as:wt="input",...st},Tt)=>{const{controlId:kt}=reactExports.useContext(FormContext$1);return _e=useBootstrapPrefix(_e,"form-check-input"),jsxRuntimeExports.jsx(wt,{...st,ref:Tt,type:at,id:$||kt,className:classNames(rt,_e,ht&&"is-valid",pt&&"is-invalid")})});FormCheckInput.displayName="FormCheckInput";const FormCheckInput$1=FormCheckInput,FormCheckLabel=reactExports.forwardRef(({bsPrefix:$,className:_e,htmlFor:rt,...at},ht)=>{const{controlId:pt}=reactExports.useContext(FormContext$1);return $=useBootstrapPrefix($,"form-check-label"),jsxRuntimeExports.jsx("label",{...at,ref:ht,htmlFor:rt||pt,className:classNames(_e,$)})});FormCheckLabel.displayName="FormCheckLabel";const FormCheckLabel$1=FormCheckLabel;function map($,_e){let rt=0;return reactExports.Children.map($,at=>reactExports.isValidElement(at)?_e(at,rt++):at)}function forEach($,_e){let rt=0;reactExports.Children.forEach($,at=>{reactExports.isValidElement(at)&&_e(at,rt++)})}function hasChildOfType($,_e){return reactExports.Children.toArray($).some(rt=>reactExports.isValidElement(rt)&&rt.type===_e)}const FormCheck=reactExports.forwardRef(({id:$,bsPrefix:_e,bsSwitchPrefix:rt,inline:at=!1,reverse:ht=!1,disabled:pt=!1,isValid:wt=!1,isInvalid:st=!1,feedbackTooltip:Tt=!1,feedback:kt,feedbackType:Mt,className:Dt,style:Ot,title:Ut="",type:qt="checkbox",label:tr,children:ar,as:Yt="input",...Kt},Jt)=>{_e=useBootstrapPrefix(_e,"form-check"),rt=useBootstrapPrefix(rt,"form-switch");const{controlId:pr}=reactExports.useContext(FormContext$1),Sr=reactExports.useMemo(()=>({controlId:$||pr}),[pr,$]),Er=!ar&&tr!=null&&tr!==!1||hasChildOfType(ar,FormCheckLabel$1),Rr=jsxRuntimeExports.jsx(FormCheckInput$1,{...Kt,type:qt==="switch"?"checkbox":qt,ref:Jt,isValid:wt,isInvalid:st,disabled:pt,as:Yt});return jsxRuntimeExports.jsx(FormContext$1.Provider,{value:Sr,children:jsxRuntimeExports.jsx("div",{style:Ot,className:classNames(Dt,Er&&_e,at&&`${_e}-inline`,ht&&`${_e}-reverse`,qt==="switch"&&rt),children:ar||jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Rr,Er&&jsxRuntimeExports.jsx(FormCheckLabel$1,{title:Ut,children:tr}),kt&&jsxRuntimeExports.jsx(Feedback$1,{type:Mt,tooltip:Tt,children:kt})]})})})});FormCheck.displayName="FormCheck";const FormCheck$1=Object.assign(FormCheck,{Input:FormCheckInput$1,Label:FormCheckLabel$1}),FormControl=reactExports.forwardRef(({bsPrefix:$,type:_e,size:rt,htmlSize:at,id:ht,className:pt,isValid:wt=!1,isInvalid:st=!1,plaintext:Tt,readOnly:kt,as:Mt="input",...Dt},Ot)=>{const{controlId:Ut}=reactExports.useContext(FormContext$1);return $=useBootstrapPrefix($,"form-control"),jsxRuntimeExports.jsx(Mt,{...Dt,type:_e,size:at,ref:Ot,readOnly:kt,id:ht||Ut,className:classNames(pt,Tt?`${$}-plaintext`:$,rt&&`${$}-${rt}`,_e==="color"&&`${$}-color`,wt&&"is-valid",st&&"is-invalid")})});FormControl.displayName="FormControl";const FormControl$1=Object.assign(FormControl,{Feedback:Feedback$1}),FormFloating=reactExports.forwardRef(({className:$,bsPrefix:_e,as:rt="div",...at},ht)=>(_e=useBootstrapPrefix(_e,"form-floating"),jsxRuntimeExports.jsx(rt,{ref:ht,className:classNames($,_e),...at})));FormFloating.displayName="FormFloating";const FormFloating$1=FormFloating,FormGroup=reactExports.forwardRef(({controlId:$,as:_e="div",...rt},at)=>{const ht=reactExports.useMemo(()=>({controlId:$}),[$]);return jsxRuntimeExports.jsx(FormContext$1.Provider,{value:ht,children:jsxRuntimeExports.jsx(_e,{...rt,ref:at})})});FormGroup.displayName="FormGroup";const FormGroup$1=FormGroup,FormLabel=reactExports.forwardRef(({as:$="label",bsPrefix:_e,column:rt=!1,visuallyHidden:at=!1,className:ht,htmlFor:pt,...wt},st)=>{const{controlId:Tt}=reactExports.useContext(FormContext$1);_e=useBootstrapPrefix(_e,"form-label");let kt="col-form-label";typeof rt=="string"&&(kt=`${kt} ${kt}-${rt}`);const Mt=classNames(ht,_e,at&&"visually-hidden",rt&&kt);return pt=pt||Tt,rt?jsxRuntimeExports.jsx(Col$1,{ref:st,as:"label",className:Mt,htmlFor:pt,...wt}):jsxRuntimeExports.jsx($,{ref:st,className:Mt,htmlFor:pt,...wt})});FormLabel.displayName="FormLabel";const FormLabel$1=FormLabel,FormRange=reactExports.forwardRef(({bsPrefix:$,className:_e,id:rt,...at},ht)=>{const{controlId:pt}=reactExports.useContext(FormContext$1);return $=useBootstrapPrefix($,"form-range"),jsxRuntimeExports.jsx("input",{...at,type:"range",ref:ht,className:classNames(_e,$),id:rt||pt})});FormRange.displayName="FormRange";const FormRange$1=FormRange,FormSelect=reactExports.forwardRef(({bsPrefix:$,size:_e,htmlSize:rt,className:at,isValid:ht=!1,isInvalid:pt=!1,id:wt,...st},Tt)=>{const{controlId:kt}=reactExports.useContext(FormContext$1);return $=useBootstrapPrefix($,"form-select"),jsxRuntimeExports.jsx("select",{...st,size:rt,ref:Tt,className:classNames(at,$,_e&&`${$}-${_e}`,ht&&"is-valid",pt&&"is-invalid"),id:wt||kt})});FormSelect.displayName="FormSelect";const FormSelect$1=FormSelect,FormText=reactExports.forwardRef(({bsPrefix:$,className:_e,as:rt="small",muted:at,...ht},pt)=>($=useBootstrapPrefix($,"form-text"),jsxRuntimeExports.jsx(rt,{...ht,ref:pt,className:classNames(_e,$,at&&"text-muted")})));FormText.displayName="FormText";const FormText$1=FormText,Switch=reactExports.forwardRef(($,_e)=>jsxRuntimeExports.jsx(FormCheck$1,{...$,ref:_e,type:"switch"}));Switch.displayName="Switch";const Switch$1=Object.assign(Switch,{Input:FormCheck$1.Input,Label:FormCheck$1.Label}),FloatingLabel=reactExports.forwardRef(({bsPrefix:$,className:_e,children:rt,controlId:at,label:ht,...pt},wt)=>($=useBootstrapPrefix($,"form-floating"),jsxRuntimeExports.jsxs(FormGroup$1,{ref:wt,className:classNames(_e,$),controlId:at,...pt,children:[rt,jsxRuntimeExports.jsx("label",{htmlFor:at,children:ht})]})));FloatingLabel.displayName="FloatingLabel";const FloatingLabel$1=FloatingLabel,propTypes={_ref:PropTypes.any,validated:PropTypes.bool,as:PropTypes.elementType},Form=reactExports.forwardRef(({className:$,validated:_e,as:rt="form",...at},ht)=>jsxRuntimeExports.jsx(rt,{...at,ref:ht,className:classNames($,_e&&"was-validated")}));Form.displayName="Form";Form.propTypes=propTypes;const Form$1=Object.assign(Form,{Group:FormGroup$1,Control:FormControl$1,Floating:FormFloating$1,Check:FormCheck$1,Switch:Switch$1,Label:FormLabel$1,Text:FormText$1,Range:FormRange$1,Select:FormSelect$1,FloatingLabel:FloatingLabel$1});function UserHomeBanner(){return jsxRuntimeExports.jsxs(React.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"row w-100",style:{display:"flex",justifyContent:"center"},children:[jsxRuntimeExports.jsxs("div",{className:"col-6 position-relative",children:[jsxRuntimeExports.jsx("img",{src:myImage,alt:"Image",style:{width:"100%"},className:"image-container"}),jsxRuntimeExports.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center",children:jsxRuntimeExports.jsx(Form$1.Control,{type:"text",placeholder:"Address, School, City, ZIP or Neighborhood",className:"m-5 border-0 bg-blue-200"})})]}),jsxRuntimeExports.jsx("div",{className:"col-6 position-relative p-0",children:jsxRuntimeExports.jsx(Mapbox,{})})]}),jsxRuntimeExports.jsx(UserHomeMid,{}),jsxRuntimeExports.jsx(UserHomeBottom,{})]})}function UserFooter(){return jsxRuntimeExports.jsx("div",{children:"UserFooter"})}function UserSideHome(){return jsxRuntimeExports.jsxs(React.Fragment,{children:[jsxRuntimeExports.jsx(UserHeader,{}),jsxRuntimeExports.jsx(UserHomeBanner,{}),jsxRuntimeExports.jsx(UserFooter,{})]})}const NotFound=()=>jsxRuntimeExports.jsxs("div",{className:"not-found",children:[jsxRuntimeExports.jsx("h2",{children:"Sorry"}),jsxRuntimeExports.jsx("p",{children:"Page cannot be found"}),jsxRuntimeExports.jsx(Link,{to:"/",children:"Back to Home..."})]}),UserPropertyListing$1="",CardBody=reactExports.forwardRef(({className:$,bsPrefix:_e,as:rt="div",...at},ht)=>(_e=useBootstrapPrefix(_e,"card-body"),jsxRuntimeExports.jsx(rt,{ref:ht,className:classNames($,_e),...at})));CardBody.displayName="CardBody";const CardBody$1=CardBody,CardFooter=reactExports.forwardRef(({className:$,bsPrefix:_e,as:rt="div",...at},ht)=>(_e=useBootstrapPrefix(_e,"card-footer"),jsxRuntimeExports.jsx(rt,{ref:ht,className:classNames($,_e),...at})));CardFooter.displayName="CardFooter";const CardFooter$1=CardFooter,CardHeader=reactExports.forwardRef(({bsPrefix:$,className:_e,as:rt="div",...at},ht)=>{const pt=useBootstrapPrefix($,"card-header"),wt=reactExports.useMemo(()=>({cardHeaderBsPrefix:pt}),[pt]);return jsxRuntimeExports.jsx(CardHeaderContext.Provider,{value:wt,children:jsxRuntimeExports.jsx(rt,{ref:ht,...at,className:classNames(_e,pt)})})});CardHeader.displayName="CardHeader";const CardHeader$1=CardHeader,CardImg=reactExports.forwardRef(({bsPrefix:$,className:_e,variant:rt,as:at="img",...ht},pt)=>{const wt=useBootstrapPrefix($,"card-img");return jsxRuntimeExports.jsx(at,{ref:pt,className:classNames(rt?`${wt}-${rt}`:wt,_e),...ht})});CardImg.displayName="CardImg";const CardImg$1=CardImg,CardImgOverlay=reactExports.forwardRef(({className:$,bsPrefix:_e,as:rt="div",...at},ht)=>(_e=useBootstrapPrefix(_e,"card-img-overlay"),jsxRuntimeExports.jsx(rt,{ref:ht,className:classNames($,_e),...at})));CardImgOverlay.displayName="CardImgOverlay";const CardImgOverlay$1=CardImgOverlay,CardLink=reactExports.forwardRef(({className:$,bsPrefix:_e,as:rt="a",...at},ht)=>(_e=useBootstrapPrefix(_e,"card-link"),jsxRuntimeExports.jsx(rt,{ref:ht,className:classNames($,_e),...at})));CardLink.displayName="CardLink";const CardLink$1=CardLink,DivStyledAsH6=divWithClassName("h6"),CardSubtitle=reactExports.forwardRef(({className:$,bsPrefix:_e,as:rt=DivStyledAsH6,...at},ht)=>(_e=useBootstrapPrefix(_e,"card-subtitle"),jsxRuntimeExports.jsx(rt,{ref:ht,className:classNames($,_e),...at})));CardSubtitle.displayName="CardSubtitle";const CardSubtitle$1=CardSubtitle,CardText=reactExports.forwardRef(({className:$,bsPrefix:_e,as:rt="p",...at},ht)=>(_e=useBootstrapPrefix(_e,"card-text"),jsxRuntimeExports.jsx(rt,{ref:ht,className:classNames($,_e),...at})));CardText.displayName="CardText";const CardText$1=CardText,DivStyledAsH5=divWithClassName("h5"),CardTitle=reactExports.forwardRef(({className:$,bsPrefix:_e,as:rt=DivStyledAsH5,...at},ht)=>(_e=useBootstrapPrefix(_e,"card-title"),jsxRuntimeExports.jsx(rt,{ref:ht,className:classNames($,_e),...at})));CardTitle.displayName="CardTitle";const CardTitle$1=CardTitle,Card=reactExports.forwardRef(({bsPrefix:$,className:_e,bg:rt,text:at,border:ht,body:pt=!1,children:wt,as:st="div",...Tt},kt)=>{const Mt=useBootstrapPrefix($,"card");return jsxRuntimeExports.jsx(st,{ref:kt,...Tt,className:classNames(_e,Mt,rt&&`bg-${rt}`,at&&`text-${at}`,ht&&`border-${ht}`),children:pt?jsxRuntimeExports.jsx(CardBody$1,{children:wt}):wt})});Card.displayName="Card";const Card$1=Object.assign(Card,{Img:CardImg$1,Title:CardTitle$1,Subtitle:CardSubtitle$1,Body:CardBody$1,Link:CardLink$1,Text:CardText$1,Header:CardHeader$1,Footer:CardFooter$1,ImgOverlay:CardImgOverlay$1}),initialState$1=null,propertyDetailSlice=createSlice({name:"showPropertyDetail",initialState:initialState$1,reducers:{addPropertyDetail:($,_e)=>({...$,..._e.payload,property:_e.payload.propertyDetail})}}),{addPropertyDetail}=propertyDetailSlice.actions,propertyDetailReducer=propertyDetailSlice.reducer,UserPropertyCard=()=>{const $=useSelector(ht=>ht.showPropertiesList.showPropertiesList),_e=useDispatch(),rt=useHistory(),at=async ht=>{try{const pt=await axios$1.get("http://127.0.0.1:8000/api/property/details/",{params:{property_id:ht}});if(pt.status===200)console.log("success"),console.log(pt.data),_e(addPropertyDetail({showPropertyDetail:pt.data})),rt.push("/userpropertydetail");else{console.log("failed"),console.log(pt.data);const wt=await pt.text();console.log("Error Details:",wt),console.log("Status",pt.status),console.log("Response",pt)}}catch(pt){console.log("failed to sent the request",pt.response)}};return jsxRuntimeExports.jsx(React.Fragment,{children:jsxRuntimeExports.jsx(Row$1,{children:$.map(ht=>jsxRuntimeExports.jsx(Col$1,{xs:12,sm:6,className:"p-1 m-0",children:jsxRuntimeExports.jsxs(Card$1,{className:"mb-3 cursor-pointer",onClick:()=>at(ht.id),style:{width:"100%"},children:[jsxRuntimeExports.jsx(Card$1.Img,{variant:"top",style:{height:"15vw"},src:ht.images[0].image}),jsxRuntimeExports.jsxs(Card$1.Body,{children:[jsxRuntimeExports.jsxs(Row$1,{className:"d-flex justify-between",children:[jsxRuntimeExports.jsx(Col$1,{children:jsxRuntimeExports.jsxs(Card$1.Title,{children:["$",ht.price]})}),jsxRuntimeExports.jsx(Col$1,{children:jsxRuntimeExports.jsx(Card$1.Text,{children:ht.property_type})}),jsxRuntimeExports.jsx(Col$1,{children:jsxRuntimeExports.jsx(Card$1.Text,{className:"bg-success",children:ht.transaction_type})}),jsxRuntimeExports.jsx(Col$1,{className:"d-flex justify-end",children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heart",viewBox:"0 0 16 16",children:jsxRuntimeExports.jsx("path",{d:"m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"})})})]}),jsxRuntimeExports.jsxs(Row$1,{children:[jsxRuntimeExports.jsxs(Col$1,{sm:8,className:"d-flex inline-flex justify-around",children:[jsxRuntimeExports.jsxs(Card$1.Text,{children:[ht.bedroom," bed"]}),jsxRuntimeExports.jsxs(Card$1.Text,{children:[ht.bathroom," bath"]})]}),jsxRuntimeExports.jsx(Col$1,{sm:4,children:jsxRuntimeExports.jsxs(Card$1.Text,{className:"text-left",children:[ht.basement_square_feet," sqft"]})})]}),jsxRuntimeExports.jsxs(Row$1,{children:[jsxRuntimeExports.jsx(Col$1,{sm:8,children:jsxRuntimeExports.jsxs(Card$1.Text,{className:"text-left",children:[ht.address,", ",ht.locality.unit,", ",ht.locality.district,", ",ht.locality.state,"."]})}),jsxRuntimeExports.jsx(Col$1,{sm:4,children:jsxRuntimeExports.jsxs(Card$1.Text,{className:"text-left",children:[ht.lot_size," sqft lot"]})})]}),jsxRuntimeExports.jsx("div",{className:"text-center cursor-pointer z-10",children:jsxRuntimeExports.jsx("div",{className:"d-flex justify-end mt-2",children:jsxRuntimeExports.jsx(Button$1,{size:"sm",className:"text-white bg-blue-950 hover:bg-blue-900 hover:translate-y-[-2px] transition-transform","data-drawer-target":"drawer-right-card-list","data-drawer-show":"drawer-right-card-list","data-drawer-placement":"right","aria-controls":"drawer-right-card-list",children:"Message"})})}),jsxRuntimeExports.jsxs("div",{id:"drawer-right-card-list",className:"fixed top-0 right-0 z-40 h-screen p-4 overflow-y-auto transition-transform translate-x-full bg-white w-50 md:w-75 dark:bg-gray-800",tabIndex:"-1","aria-labelledby":"drawer-right-label",children:[jsxRuntimeExports.jsxs("button",{type:"button","data-drawer-hide":"drawer-right-card-list","aria-controls":"drawer-right-card-list",className:"pb-3 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 absolute top-2.5 end-2.5 inline-flex items-center justify-center dark:hover:bg-gray-600 dark:hover:text-white",children:[jsxRuntimeExports.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:jsxRuntimeExports.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Close menu"})]}),jsxRuntimeExports.jsx(UserMessages,{})]})]})]})},ht.id))})})},UserPropertyListing=()=>{const[$,_e]=reactExports.useState(window.innerWidth>=992&&window.innerWidth<=1399);return reactExports.useEffect(()=>{const rt=()=>{_e(window.innerWidth>=992&&window.innerWidth<=1399)};return window.addEventListener("resize",rt),()=>{window.removeEventListener("resize",rt)}},[]),jsxRuntimeExports.jsx(React.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"row w-100",children:[jsxRuntimeExports.jsx("div",{className:`col-5 col-lg-4 p-1 ${$?"wide-screen-map":""}`,children:jsxRuntimeExports.jsx(Mapbox,{})}),jsxRuntimeExports.jsx("div",{className:"col-7 col-lg-8 pr-0 mr-0",children:jsxRuntimeExports.jsx(UserPropertyCard,{})})]})})},UserSideListProperties=()=>jsxRuntimeExports.jsxs(React.Fragment,{children:[jsxRuntimeExports.jsx(UserHeader,{}),jsxRuntimeExports.jsx(UserPropertyListing,{}),jsxRuntimeExports.jsx(UserFooter,{})]});function useUpdateEffect($,_e){const rt=reactExports.useRef(!0);reactExports.useEffect(()=>{if(rt.current){rt.current=!1;return}return $()},_e)}const MAX_DELAY_MS=2**31-1;function setChainedTimeout($,_e,rt){const at=rt-Date.now();$.current=at<=MAX_DELAY_MS?setTimeout(_e,at):setTimeout(()=>setChainedTimeout($,_e,rt),MAX_DELAY_MS)}function useTimeout(){const $=useMounted(),_e=reactExports.useRef();return useWillUnmount(()=>clearTimeout(_e.current)),reactExports.useMemo(()=>{const rt=()=>clearTimeout(_e.current);function at(ht,pt=0){$()&&(rt(),pt<=MAX_DELAY_MS?_e.current=setTimeout(ht,pt):setChainedTimeout(_e,ht,Date.now()+pt))}return{set:at,clear:rt}},[])}const CarouselCaption=reactExports.forwardRef(({className:$,bsPrefix:_e,as:rt="div",...at},ht)=>(_e=useBootstrapPrefix(_e,"carousel-caption"),jsxRuntimeExports.jsx(rt,{ref:ht,className:classNames($,_e),...at})));CarouselCaption.displayName="CarouselCaption";const CarouselCaption$1=CarouselCaption,CarouselItem=reactExports.forwardRef(({as:$="div",bsPrefix:_e,className:rt,...at},ht)=>{const pt=classNames(rt,useBootstrapPrefix(_e,"carousel-item"));return jsxRuntimeExports.jsx($,{ref:ht,...at,className:pt})});CarouselItem.displayName="CarouselItem";const CarouselItem$1=CarouselItem,SWIPE_THRESHOLD=40;function isVisible($){if(!$||!$.style||!$.parentNode||!$.parentNode.style)return!1;const _e=getComputedStyle($);return _e.display!=="none"&&_e.visibility!=="hidden"&&getComputedStyle($.parentNode).display!=="none"}const Carousel=reactExports.forwardRef(({defaultActiveIndex:$=0,..._e},rt)=>{const{as:at="div",bsPrefix:ht,slide:pt=!0,fade:wt=!1,controls:st=!0,indicators:Tt=!0,indicatorLabels:kt=[],activeIndex:Mt,onSelect:Dt,onSlide:Ot,onSlid:Ut,interval:qt=5e3,keyboard:tr=!0,onKeyDown:ar,pause:Yt="hover",onMouseOver:Kt,onMouseOut:Jt,wrap:pr=!0,touch:Sr=!0,onTouchStart:Er,onTouchMove:Rr,onTouchEnd:Lr,prevIcon:Mr=jsxRuntimeExports.jsx("span",{"aria-hidden":"true",className:"carousel-control-prev-icon"}),prevLabel:Zr="Previous",nextIcon:dn=jsxRuntimeExports.jsx("span",{"aria-hidden":"true",className:"carousel-control-next-icon"}),nextLabel:Jr="Next",variant:wr,className:Xr,children:Dr,...xn}=useUncontrolled({defaultActiveIndex:$,..._e},{activeIndex:"onSelect"}),gn=useBootstrapPrefix(ht,"carousel"),Pr=useIsRTL(),Gr=reactExports.useRef(null),[Or,sn]=reactExports.useState("next"),[ln,kn]=reactExports.useState(!1),[Bn,Fn]=reactExports.useState(!1),[Nn,Kn]=reactExports.useState(Mt||0);reactExports.useEffect(()=>{!Bn&&Mt!==Nn&&(Gr.current?sn(Gr.current):sn((Mt||0)>Nn?"next":"prev"),pt&&Fn(!0),Kn(Mt||0))},[Mt,Bn,Nn,pt]),reactExports.useEffect(()=>{Gr.current&&(Gr.current=null)});let uo=0,vo;forEach(Dr,(Jn,Eo)=>{++uo,Eo===Mt&&(vo=Jn.props.interval)});const Ao=useCommittedRef(vo),Un=reactExports.useCallback(Jn=>{if(Bn)return;let Eo=Nn-1;if(Eo<0){if(!pr)return;Eo=uo-1}Gr.current="prev",Dt==null||Dt(Eo,Jn)},[Bn,Nn,Dt,pr,uo]),so=useEventCallback(Jn=>{if(Bn)return;let Eo=Nn+1;if(Eo>=uo){if(!pr)return;Eo=0}Gr.current="next",Dt==null||Dt(Eo,Jn)}),Qn=reactExports.useRef();reactExports.useImperativeHandle(rt,()=>({element:Qn.current,prev:Un,next:so}));const Vo=useEventCallback(()=>{!document.hidden&&isVisible(Qn.current)&&(Pr?Un():so())}),Hn=Or==="next"?"start":"end";useUpdateEffect(()=>{pt||(Ot==null||Ot(Nn,Hn),Ut==null||Ut(Nn,Hn))},[Nn]);const Jo=`${gn}-item-${Or}`,js=`${gn}-item-${Hn}`,Ds=reactExports.useCallback(Jn=>{triggerBrowserReflow(Jn),Ot==null||Ot(Nn,Hn)},[Ot,Nn,Hn]),vs=reactExports.useCallback(()=>{Fn(!1),Ut==null||Ut(Nn,Hn)},[Ut,Nn,Hn]),ks=reactExports.useCallback(Jn=>{if(tr&&!/input|textarea/i.test(Jn.target.tagName))switch(Jn.key){case"ArrowLeft":Jn.preventDefault(),Pr?so(Jn):Un(Jn);return;case"ArrowRight":Jn.preventDefault(),Pr?Un(Jn):so(Jn);return}ar==null||ar(Jn)},[tr,ar,Un,so,Pr]),Ls=reactExports.useCallback(Jn=>{Yt==="hover"&&kn(!0),Kt==null||Kt(Jn)},[Yt,Kt]),Vs=reactExports.useCallback(Jn=>{kn(!1),Jt==null||Jt(Jn)},[Jt]),ws=reactExports.useRef(0),Ro=reactExports.useRef(0),Xo=useTimeout(),os=reactExports.useCallback(Jn=>{ws.current=Jn.touches[0].clientX,Ro.current=0,Yt==="hover"&&kn(!0),Er==null||Er(Jn)},[Yt,Er]),ko=reactExports.useCallback(Jn=>{Jn.touches&&Jn.touches.length>1?Ro.current=0:Ro.current=Jn.touches[0].clientX-ws.current,Rr==null||Rr(Jn)},[Rr]),ys=reactExports.useCallback(Jn=>{if(Sr){const Eo=Ro.current;Math.abs(Eo)>SWIPE_THRESHOLD&&(Eo>0?Un(Jn):so(Jn))}Yt==="hover"&&Xo.set(()=>{kn(!1)},qt||void 0),Lr==null||Lr(Jn)},[Sr,Yt,Un,so,Xo,qt,Lr]),Al=qt!=null&&!ln&&!Bn,Pl=reactExports.useRef();reactExports.useEffect(()=>{var Jn,Eo;if(!Al)return;const bs=Pr?Un:so;return Pl.current=window.setInterval(document.visibilityState?Vo:bs,(Jn=(Eo=Ao.current)!=null?Eo:qt)!=null?Jn:void 0),()=>{Pl.current!==null&&clearInterval(Pl.current)}},[Al,Un,so,Ao,qt,Vo,Pr]);const Kl=reactExports.useMemo(()=>Tt&&Array.from({length:uo},(Jn,Eo)=>bs=>{Dt==null||Dt(Eo,bs)}),[Tt,uo,Dt]);return jsxRuntimeExports.jsxs(at,{ref:Qn,...xn,onKeyDown:ks,onMouseOver:Ls,onMouseOut:Vs,onTouchStart:os,onTouchMove:ko,onTouchEnd:ys,className:classNames(Xr,gn,pt&&"slide",wt&&`${gn}-fade`,wr&&`${gn}-${wr}`),children:[Tt&&jsxRuntimeExports.jsx("div",{className:`${gn}-indicators`,children:map(Dr,(Jn,Eo)=>jsxRuntimeExports.jsx("button",{type:"button","data-bs-target":"","aria-label":kt!=null&&kt.length?kt[Eo]:`Slide ${Eo+1}`,className:Eo===Nn?"active":void 0,onClick:Kl?Kl[Eo]:void 0,"aria-current":Eo===Nn},Eo))}),jsxRuntimeExports.jsx("div",{className:`${gn}-inner`,children:map(Dr,(Jn,Eo)=>{const bs=Eo===Nn;return pt?jsxRuntimeExports.jsx(TransitionWrapper$1,{in:bs,onEnter:bs?Ds:void 0,onEntered:bs?vs:void 0,addEndListener:transitionEndListener,children:(Qs,Yl)=>reactExports.cloneElement(Jn,{...Yl,className:classNames(Jn.props.className,bs&&Qs!=="entered"&&Jo,(Qs==="entered"||Qs==="exiting")&&"active",(Qs==="entering"||Qs==="exiting")&&js)})}):reactExports.cloneElement(Jn,{className:classNames(Jn.props.className,bs&&"active")})})}),st&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[(pr||Mt!==0)&&jsxRuntimeExports.jsxs(Anchor$1,{className:`${gn}-control-prev`,onClick:Un,children:[Mr,Zr&&jsxRuntimeExports.jsx("span",{className:"visually-hidden",children:Zr})]}),(pr||Mt!==uo-1)&&jsxRuntimeExports.jsxs(Anchor$1,{className:`${gn}-control-next`,onClick:so,children:[dn,Jr&&jsxRuntimeExports.jsx("span",{className:"visually-hidden",children:Jr})]})]})]})});Carousel.displayName="Carousel";const Carousel$1=Object.assign(Carousel,{Caption:CarouselCaption$1,Item:CarouselItem$1});PropTypes.string,PropTypes.bool,PropTypes.bool,PropTypes.bool,PropTypes.bool;const Image=reactExports.forwardRef(({bsPrefix:$,className:_e,fluid:rt=!1,rounded:at=!1,roundedCircle:ht=!1,thumbnail:pt=!1,...wt},st)=>($=useBootstrapPrefix($,"img"),jsxRuntimeExports.jsx("img",{ref:st,...wt,className:classNames(_e,rt&&`${$}-fluid`,at&&"rounded",ht&&"rounded-circle",pt&&`${$}-thumbnail`)})));Image.displayName="Image";const Image$1=Image,UserDisplayPropertyTop=()=>{const $=useSelector(at=>at.showPropertyDetail.showPropertyDetail[0]),[_e,rt]=reactExports.useState(null);return reactExports.useEffect(()=>{const at=setInterval(()=>{rt(null)},6500);return()=>clearInterval(at)},[]),console.log($),jsxRuntimeExports.jsx(React.Fragment,{children:jsxRuntimeExports.jsxs(Row$1,{className:"w-100 pl-1 pr-1 pb-1",children:[jsxRuntimeExports.jsx(Col$1,{md:7,className:"pt-1",children:jsxRuntimeExports.jsx(Carousel$1,{fade:!0,children:$.images.map(({image:at},ht)=>jsxRuntimeExports.jsx(Carousel$1.Item,{children:jsxRuntimeExports.jsx(Image$1,{src:_e||at,className:"d-block w-100 rounded-xl",style:{height:"30vw"},alt:`Image ${ht+1}`})},ht))})}),jsxRuntimeExports.jsx(Col$1,{lg:5,className:"p-0",children:jsxRuntimeExports.jsx(Row$1,{children:$.images.map(({image:at},ht)=>jsxRuntimeExports.jsx(Col$1,{xl:6,xs:12,className:"pl-0 pt-0 pr-1 pb-0",children:jsxRuntimeExports.jsx(Image$1,{src:at,onClick:()=>rt(at),className:"d-block w-100 rounded-xl mt-1 ml-1 mr-1 mb-0",style:{height:"9.6vw"},alt:`Image ${ht+1}`})},ht))})})]})})},UserDisplayProperty$1="",bedLogo="/assets/bed-logo-889a1d3e.png",bathLogo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJcAAACECAYAAACd3blMAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAtxSURBVHhe7Z1ZaBRLFIbL7bqBiGgMaqJx10QRxUTUID4IERSMorhEwV0jakRFxBUVQeKbkSgoElweRFDjkyYuuMcgmBgVV1wQfHKFJO73npqq3DM1ZzrpyVSme3I++ElXp/5MT+ef7urq6poWDx48+CsU//zzj1qi+fHjh1qiYT/7MS3VT4aJOhwuxhocLsYaHC7GGhwuxhocLsYaLR4/flzXFcGX2ux3wq2fj1yMNSI+cpWWlopTp06pUoC/f+v+FEmLFi3UEg37veVv2bKl2LBhg+jXr58suz1yRRyuEydOiL1796oSE6906dJFHkQSExP5tMhEl48fP4rXr1+rkjs4XIw1Ij4tPnnyRNy9e1eVAvz+/Vv+PH/+vHj58qVcBsaOHSvGjBkjWrVqpdbQaD/mzp07UppZs2aJ3r17q1IwlB8Tyetj/OY3992wYcNEVlaWKoWi/YWFhaKmpkYuA4cOHZL/vyZrc1Fof15enrh27ZpcBlauXCmWL1/ueuMAeGMgzZEjR2RYKaK1/eHwm9/cd9OnTxd79uxRpVC0f+LEieLTp09yGYg0XC1hhRaYnYTrUtL1zKsS+MS58WOZn9Zfv36RXhDlx6I8WJQHi/JgUR4syoNFebAoD5ZZ39x3f/78IX1a2mf+/1q3bi3XUx4s7dfiNhdjDQ4XYw0OF2ONiIY5//z5U14Rmlcn+hx/+vRp8ezZM7kMTJgwQWRmZkZ0NXT9+nUpzezZs0VKSooqBQN+aC+kp6fX9Spj9PaHo6HvPxxe8x88eFBKM23aNLFz505VCkX7x48fL/u3NPoiyu3ruw4XXEWsXbtWVFZWqrXeo2fPnqKgoEAMGjRIrQkQ63DAP+zGjRvizZs3ak0w1IcL4/bDWV5eLu7du6dKPghXWVmZ7FbwOuvXrxeLFy9WpQCxDNe+ffvkER33HzU1TR0u120uuJz1A17ZTjjaQN9SUVFRTIMVC1x3ot66dUssXbpUrQn0gQwfPlwuU/9QaHtVV1erkhDJycmia9euqhRMfYGAu/ThePHihfj69asqCbFmzRqxaNEiVQpg88gEmH54P5s2bRIlJSVqTWxp6k7URocL7prfvHlTLlP+uXPniv9eQ5WE2L17t5gxY4YqBdOQ1w/HsmXL6rYDiHW44Ig1Z86coAsbAC444P336tUrpLMykgsejOmHJgxIw+FywE/hunDhgti2bZsqBYB7ovn5+SItLU2tCSaarw/E/PaP+slEmffv36ulAAkJCeL48eNhgxWPcLgsUVVVpZYCHD16NGxbM17hcFnCPHIlJSWppeYDh8sSza3bgYLDxVjD9XguGE9l4uQ3L7dtjccyn1yBy3Y3fpBZ3xTlwcJ1Tdz6KVEeLLO+2XUB/W6UT0v7eDwX43k4XIw1OFyMNThcjDU4XIw1XI/ngufg4FExDdxbvHLlilym/DNnzhSPHj1SJSF27NghsrOzVSmYhrx+OFatWiXve2rWrVsXdA8UcPID5uvDTd/i4uI6n5tRG5cvXxa1tbWqJMSUKVNc35ju0KGD3H+pqamy7Hb7fTcStbmEq6KiQuTk5NQbCNu0a9dOnD17Vt709lu4WsIKLTA7CepAn4eJk9/sf9J9JpQoPxbl0aKGr7jxg3DdS5cuxTxYABz94MPrdvtB5vbDkZXyaWmf+T/TfZOUB0v7tbjNFQZ4CMUrwD/Kj/B4LgR+/f3798tpojT9+/eXTzE54bZNZaL9MHIV3/iGB2IWLlzoavuBWI/n4nAh8Oub4Zo6dap8yMKJxmw/oP25ubni9u3bchnwa7j4tMhYg8PFWIPDxViDw8VYg8dzIeG65pUdPM0zdOhQR40YMcJRlAdL18ONeUC/F2qbsfD2U++Bx3MxcQOHKwzQxeIV/PrUEIcrDNCXB/1aGRkZdacrmLbASbpeOFEeLLP+uHHj5L1BuCfoR/jGNaIxrw94zR/zG9fqJ8NEHQ4XYw0OF2MNHs+FZNY3RXmwKA8W5cGiPFiUB8usz+O5mLiFw8VYg8PFWIPDxViDw8VYg8PFWIPDxVjD+ngu+GZXuO8HWrFihRgwYEBdfVOUH4vyaEV7PBclyoNFebAoDxblwaI8WGb9uB/PZYZr8ODB6jdMvMOnRcYaHC7GGhwuxhocLsYaHC7GGhwuxhrWx3Nh6XrhRHmwKI8Wj+cK9fN4LiZu4XAx1uBwMdbgcDHWsD6zIAb8TjTGb84sCE8wm/cxnb6AHXAzFThFU/k7duwoZ3lOSUkRWVlZdevN/RfrmQXjNlzNhdGjR4uioiK5bO6/WIfL+aMUQ+AxdAixFkxhxIRSXl4uzp07p0rewvp4LixdL5xw3VevXskdp/XhwwfSo2X2zTQndu3aJd6+fRu0/0CxHs9lfSISDPidwP7Vq1fLrzjRwHgwfDo2gd/jiUjgNDlv3jxVClDf3PJt2rRxDGlD/Brq77jxU+j9V1lZKSd0qa6ulmUAnx41PBGJJaDR261btyDBPFdOgjoJCQlhZf49U7hu9+7dQ4R/T4nyUJo0aZLYuHGjeqcBIHD1XRA0NXEbrngHji6Y79+/i2/fvqmSN+Bw+ZTPnz+rpf+p77Ta1HC4fAjckC4oKFClAD169JBfoecl4rZBP2rUKNmRijFHCZiYV1cmXvFD++q//5tc1sDFy5YtW1QpQKwb9HEbruZEWlqa/K6i5ORktSZAzK8WYYUWmJ0EdZpqPJd55QOfWsqjZfbNNBfg1g/0oEOw8P4DmUdKqEvtOy3t4/FcjPz22MOHD8uzhxfx7L1FmI356tWrqiTkA7XwNXfhMO8twjdSwHckYvzSpqJ4+vSplGb79u1ypmz8N839H+t7i3EbrsZ+3yJFLP1mUOC7IEeOHKlKAUx/rMPFp0XGGhwuxhocLsYaHC7GGp4dz2UOCYarIsqjZfbNQH3890CUD8usb4ryYFEeLMqDRXm0zCtNGL5Tn9/0NPV4Lj5yMdbgcDHW4HAx1uBwMdbgcDHW4HD5FD+MAuFw+QSzC6h9+/ZqybvE7XguqI//HojyYZn1TVEeLMqDRXmwKI/W/fv31TsL9OENHDiwXr85yoLHczEhwPOJDx8+VCUh+vbtK9q2batK3oXD5QNKSkrko2MaeADWD3C4PA48pg9j2DHwAK0f4HB5GGjrbN26Vbx7906tCbS3Jk+erErehsPlYWCCEXiMDJOdnS2SkpJUydtwuDwIPNYFD14UFxerNQEyMjJEXl6eKnkfDpfHOHnypDw6FRYWqjUBYBbBAwcOePZJH4q4Hc9VU1MjHzLAgraLk8z6pigPFuXBojzwRA88VAzBycnJEfn5+eLLly/qXfzPkiVL6t2HeP+BYj2ei5+49jgQEJguacGCBa72HxDzJ67VT8aDbN68WVRUVMhg+REOl8eAUxI03KFBP3/+/JDmgZ/gcHkACBDMyANtrosXL4pjx46JzMxM9Vv/Erdtrtzc3JDTids2g0m0/GVlZUHTTsKUmaWlpVF//Vi3uRodLjiMa199Y4yoSWgx2A9Pt+C7+tCwpUZkaKA+HkkB0wGYYYxWOMLRUD98CODDoGmqcMER0mn2Qb3/4T4m/l/FrEEPGwEbA6qtrXWUrhdOuK45XATKlEfLHKLDhAL7iNp3Wnrf13cQaCiux3PBbMJ+oHPnzuT2O8msb4ryYFEeLF0PZppOTEysE9yIduMPJ7M+fIVLNOjUqVNEr+/6yAXfp2PO7+41oHHs5Zu76enpsp2qdebMGfWb6AJtrCFDhqhSZMD/GgYmRoLrKZQ0VVVVIb31VO89xqnNBETL36dPH/lpM8HbT+Hm/VN40Q+nwufPn8vTntv9D+3c1NRUVXL/+hGHi4L97MdwPxdjDQ4XYw0OF2MNDhdjDdc99E6wn/0YPnIx1uBwMdbgcDHW4HAxlhDiXxt62+eFCfQgAAAAAElFTkSuQmCC",lotLogo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJcAAAB6CAYAAACyRcElAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAArYSURBVHhe7Z1naBRdFIZPjH723nsvWMDesGvsJfbeRSKxIYiKomIj/lDsKNhQ7Cj+UNDYRUWxiwQLKkGNvff+8V7vxMk4u+vuzt1MOQ9IZu/mOJuZd2855U5UUlLSL5J8/fpVHpnz33//ySNz2J7t9WSQPxnGclhcjDJYXIwyWFyMMlhcjDJYXIwyoq5cuZLqiuClNtv7I1h77rkYZbC4GGWwuBhlsLgYZbC4GGWwuBhlsLgYZXDKjQ62t9aeey5GGSwuRhksLkYZIYvr27dv8ohhzAlZXMuXL6cdO3awyBifhCyuAQMGUEJCAnXo0IHu3r0rWxnmDyGLq0iRIrRo0SJKSUmhbt260aRJk2jNmjWUnJwsf4PxOiHlc/38+ZM+fPhADx8+pH79+ok2jYIFC9KwYcOob9++lC1bNtn6G7f5cYywfVr7oMS1ePFiaty4MW3evJnOnz9P379/p8+fP8t305InTx4aOHAgxcfHyxa+OV6zD0pchw4dogkTJshX/0aNGjWoWbNmVLp0aWrbtq1sNcdtF9eI1+yDEhfmVx07dgx4El/ExMTQkCFDhODMcNvFNeI1+3+e0N+/f59mzJgR8AT+QM83ePBgGj58OF27dk22Mm7ln8VVoEABMVm3gsuXL9OIESNo+vTplJSUJFsZtxH0avHevXtiJRhOD2Ykc+bM1KlTJxo6dChVrFhRtv5NpLt1I2wfnH3Qfq6yZcsKz3x0dLRsCZ8vX77Qnj17KDY2VgyZjx8/lu8wTibkfC64IOCSWL16NX369Em2WgOE27JlS+FDq1u3rmx13zfbiNvsw04WnDhxIiUmJspX1tOgQQOqVasWVa9enVq0aEEZMvjubN12c4w4zT5kcd24cYPOnj1Lq1atovfv38tWtdSuXZvGjh0rBBcVFSVb/+C2m2PEafYhxxYzZcokYouREha4dOmSWGV27tyZNm7cSL9+pX4vGBsSHR8fP1se048fP+SROfpJfL58+ah48eKi7c6dO7I1Mrx+/ZpOnz5NBw4coKdPn9L169fFsBmIQIuQYP5+M9g+rb0lBRq4sQhmpyd58+alLl26UPfu3cWK1gyvDUtGIm0f8rCoB0NVevPq1SvatGkT9ejRgyZPnky3bt2S7zDphSXiwirOLmAehjBTnz59RFbG7t275TtMpAkpn8vIo0ePqGvXrrZOecYcEUF3rDazZMkiW9PitWHLiNX20XFxcakT+lAnfDlz5qTcuXPTqVOnZIv9gKMXwfJt27aJJEfkmyGbVo/XJtxGrLa3ZFgE1apVk0f2Bhm0CDUhjjly5EjxhUjvxYhbsWRY1EDMcf369fTkyRPZ4hyKFi0qAvIY3o09mobXhjUjwdpbKi7Yw+eFG+RUByfCS/Xr16cpU6ZQ5cqVZetvvCYOI8HaWy4ugHwt5GktXLhQ5Nk7lSpVqojKJvjPsCDwmjiMBGuvRFwa48ePp8OHD8tXzgVJkqjPRDVTkyZNfEYD7HZzjUTa3rIJvRlmwWUn8uzZM+GgRXoRagBGjRpFe/fuFYsDxjdK9+f6+PGjKEVzK/CXxcXFiWETCwKn9SxGrLZXKi6A+kbMv5YtWxbQT+JUsAioV68eDRo0iJo2bSpb/4bF5YdwPtyCBQto586d8pW7yZ49u8iixX4a+fPnl60sLnlkTjgfDoFkxPu8BDzWjRo1EsUnWBCwuPwQ7oerWbOmPPIecGvA/weh+SrRs5s4jNhaXAizzJw5k/bt2ydbvAmuY/PmzYXYsNUBsnqB3cRhxNbigv3t27dF1fXbt29lq7cpX768WAhg2PSVraHB4vID7BEWworq5cuXspUBuDboxVBNVaJECdmalkiLw0iw9ko99EZgj6GxXbt2wjHJ/A0cz6hyQnwTvVqrVq1SezS7iceI0T6i4oJTFaVoyJxg/o0cOXJQ+/btRWSgVKlSstUcT4vr5s2b1L9/f58bxjG+waQfcU0sAvBTWwTo8ay4kNc+Z84cevHihWxhQqVChQrUunVrEUjHsFmyZEnR7klxoa4QMTiexFsP5mgYDZAa5GtTPQ3XiQtV0qNHjxbzLUYtcNTiWmPBZIftDpSLC/t5oSACmCUOInN17dq19ObNG9liD7AfBf5eJD46Dew/i+Jg1HBi0z4N14lLTyB75EedO3dOVE+jx9uwYUNE96IAyHCYN2+ecGpiy/OrV6/Kd5xJ1qxZxWqzZ8+eAbc8sFxckXai+sNof+LECVH0cebMGdmiFviVsJUm/Ex4/My6devkO+4AG7j06tVLpAdFYthUmokaLoi/4UZHAgSTUdOonW/79u3ip5tATBe9MYLn2P5KdRGNrXsugGERYRFVtYVIi0ENI86hz9pAGOb48ePylTvRng1QpkwZUY0eKC092Ptne3FhMYBvmirg+Z46dao41p8fq1tsnYn9Wr1Arly5xNwMiwCsOs0I9v7ZelgEiKvBh4PtAqwGhRbYEccMbPob6MviJpClgkxhZNAiaxjZK+Fi+55LA3MEPEco3Dx8rJ5QWY1UZPSIGBI0tPNjQ7lAj5LxAnXq1BGZtIgGYM+zYO+fY8R14cIF0dOEy8GDB1PDJUa08yMGCgEyv4F7BnNShO/0fjMjxvtn+2FR48iRI/IodLAE9yUsPRxYTwsWU6iBCDThN2IrJ6o/+9mzZ4dUPYR6woYNG4r8KDgR/YlLOz8cuXjYAkMiOD5mzBhRm4ltp/xhvH+OEReIlP2xY8fSPCfSq2DViO2mNIK9/o4ZFiMJPxSehEsCMd9wYHGZEOgb6nYQJpo1a5bY2SccWFwmeLnnQio14qtmma7BwuIywcl7ioUKcvXbtGlDK1eutMxhzeIywQt7pGIPCwx/WAUiQQAZKNgsBpkhVsHiMsHt4sJzA5Adgby1uXPn0tKlSwPu5BwKjvHQg0jZI90mISFBHLsNhL927dpF5cqVky1/sPr6c8/lEZDdiy8M0ojMhKUCFpdHWLFihah5xAMpIgWLywR/T6N1GkiA3Lp1a7o8hILFZUKwAdr0BpNxFGCMGzdOPGAVvRQKTEDv3r2patWq4jjS8IReh2aPeBrSS5wCVnwQl/Hv379/v3gAfeHChcXrSF9/7rlMsMI7HUmQjm0GkiE1YaUHLC4TMmbMKI/sD1KDwo0BqoJTbnRo9omJiaL6x+6gKhzhGu3LYLfrz+LSodmfPHlSFONieMTuPP7q+5CaUqhQIXGD8XsPHjwQ+WBIUEQoBTn/qCRCvA6VRPD+43MkJyfTxYsXQ95DA9U6SImpVKmSbLHf9Wdx6dDsU1JSqFixYuJ4/vz5tGXLFnGsJzY2VqzI0HtowF4rIDELpxjPj3Tq58+fi/8fQkbRKgoiINKjR4+aplujeBfFI9hHFVm2eux2/VlcOszsUZSL1Rh6I+xVilRppEzHxMT85bII9/wQJP7h97Bv7Lt37+Q7JCrBsXsNekOsAM2w2/VjcenwZ4/hLFAqjlXnR+83bdq01C3V0VstWbIkoCPUbtePxaXDTvYQsnHV6rS/n10RNsVJ7hBfsLgYZXD4RwfbW2vPPRejDBYXowwWF6MMFhejDBYXowwWF6MMFhejDA7/6GB7a+2552KUweJilMHiYpTB4mKUweJilMHiYpTB4mKUwflcOtjeWnvuuRhlsLgYZbC4GGWwuBhlsLgYZbC4GGWwuBhlcD6XDra31p57LkYZLC5GEUT/A64evsXzo8m3AAAAAElFTkSuQmCC",basementLogo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIsAAACECAYAAACgT9gqAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAftSURBVHhe7Z1LbA5dGMefVknjUpq2LgsURQlxabdNbIgNsSERQUQIipVVkUgkLERiJcTOSkTc0lTcgo3LQlwWXdBYsCAhlGqkrt/3zDzTnDnvmdfTed95Z/r6/5J/vnPeb/7znrZ/c87MnDlT0d3d/YcMvn//LiU3o0aNkpIb+MvXXyn/BeCvICxADcIC1CAsQA3CAtQgLEBNxdOnT0Onzji1hD8KHFmAGoQFqEFYgJpYY5bdu3dTd3e3fFIctmzZQhs3bozd57a1tUmJqKGhgTo7O6UWJstjhqNHj1JXV5fUiG7evEk1NTVS80mz/bGOLF++fKGPHz8WVd++fZO9x6Ovr29Q/f398unwYmBgIPRz/PkT+necOuiGgBqEBaiJNUVh/fr19OzZM/mE6MyZM1Ii+vnzp5TcVFVVSSnMtGnTaOrUqbH71Pnz50uJaOLEiXTjxg2phUmyT2cK8R84cIAuXrwoNaJ79+7R+PHjpeaTZvuLEhZzsJvWLxth8Umy/eiGgBqEBahBWIAahAWoQViAmsTPhvjydW9vr9SiT50XLVpECxcujD2ax9mQT5Ltj3VvaNOmTfT8+XP5hOj/fUgp179mzRp68eKF1KLZtWsXbd++PfYPs3jxYikRTZo0ie7cuSO1MEn+MplC/IcOHaLLly9LjejBgwc5YUmz/eiGgBqEBahJPCw8lmhtbR1US0uLU1OmTBEHyCqJj1lskupzMWbxSbL96IaAGoQFqEFYgBpMUbBIc0yAKQqgbCh5WN6/f089PT054knbINuUPCynTp2i1atX5+jcuXOyBcgq6IaAGoQFqEFYgJqSh6Wjo8O7VWBrx44dsgXIKpV8Xm2Kz8PzibexH6sciv/Xr1/0+/fvHPHzRtrvd8mkoqLC6WW5vKZcHlMujymXx5TLE4h/DyZD9bNcHlMujymXJxC6IaAGYQFqEBagBmEBahAWoCbxsNy+fZsuXbo0qCtXrjileQIApAseBbGI+/0BhfgzP62S/6cp3lk+8TZ8HcMkn1+71NWIESPU3++SCX+ny8tyeU25PKZcHlMujymXJ1BlZfhAP1Q/y+Ux5fKYcnkCYcwC1CQelsbGRmpubh7UvHnznKqvrxcHyCqZnlbJE6WWL18uNRCXpqYmunDhglceyu/fBt0QUIOwADUIC1CT6TEL37J/+/at1HxGjhwppTArVqyQElFdXR2dPXtWamGi/AE/fvyQkpsk/cePH6fr169Ljbx5yePGjZOaT5zvZw8/HsMUMmbBs84WabWfwbPOoGwoeViOHDniHQVsnT59WrYAWQVHFqAGYQFqEBagpuRh2bt3L926dStH/BYzkG1KHpaxY8d6Nw1tjR49WrYAWQXrs1ikeR0D67OAsgFhAWoQFqAGYQFqEg/Lo0ePQqfIPPB06dWrV+IAWSXxs6G1a9fSy5cvpRbNnj17aOfOnbFH8zgb8kmy/eiGgJrE12exnzGKgtdt0X6/SyZYnyVaLo8plydQ4kcWnojEL/f+m2pqasQBsgpmylmk1X4GM+VA2YCwADUIC1CDsAA1CAtQg/ksFmmebeAKrsXhw4e9P6ytkydPyhYgq6AbAmoQFqAGYQFqSh4WXpWys7MzRzxoBtmm5GHh5TBmzpyZo9raWtkCZBV0Q0AN7jpbpHkdA3edQdmAsAA1CAtQU5Qxy/Tp06Xkz3/NR9Ra/hs2bKB169bF7nODhQp5sT1+DwCPW1yk2ecz+fyfP38OLSA4efJk53r++Uiy/UUJSzEo9K0gAfAn50c3BNQgLEBNrPksDx8+pN7eXvkkDL+fOR9VVVVSCjN79myaNWvWP32YZ7LsjxWWfBTLf/fuXerv7/fKTEtLizfgc/nfvHkzeGGQw9ra2ho5wOUBtj0xit88Ul1d7ZXt9r97944eP34sNX+S1dy5c6UWhh+Uu3r1qtR8li1bRmPGjJFa+Of/8OGDd+EtYM6cOTRjxgyp5XLt2rXQgLetrY0mTJggNZ+g/ffv36dPnz55ZWbBggXeiUhZhmXVqlVeCAKOHTvm/VFdfn734v79+6VGdOLECe+P5KKvr8/7JZvwjLSGhgavbLefH+bft2+f1Ija29s9uRgYGKAlS5ZIzYfbZgbAbD8HZevWrVLz971t2zap5cL/CMwj9/nz570QmATt37x5c2g2Y0dHR0FnmwzGLEANwgLUICxADcIC1CAsQE2s9VnyyeUx5fKYCraz7zHxPZ8ov31th6/lBPuxxS974tNsUzxnJNiXvb19XShYR8YlbjM/Q2WKT7PN/Znb2+3mfZvb2uJbLGa7+VTb3B8r2Na+p1Toe7NZOLIANQgLUFMWYeGugtf+D8SH3GJh7zvqdkUcuKtIat9JEGuKQj6K5V+5ciW9fv3aKzN8VZZfmlmq749iuPh5ftCTJ0+8MnPw4EHvcZtCvh/dEFCDsAA1CAtQU8l9lCnu0/LJ3t6Wy2PK5TEVbGfP1eW5qUPxR8nlMeXymHJ5TLk8plweUy6PKZfHVLCdvaZuoesMs3BkAWoQFqBm2Ex+amxs9C7L25exbezDr82/4u/p6QnNNCzG5KdhExZQGJgpB0oKwgLUZLYb6urqoq9fv3plk7/d9+FTxHz8q/6lS5dSU1NTQX+/zN4bigL+9PzohoAahAWoQViAGoQFqEFYgBqEBahBWICazF6UiwL+9Pw4sgA1CAtQg7AANQgLUEL0H4ZoIMN3RiB5AAAAAElFTkSuQmCC",propertyTypeLogo="/assets/property-type-logo-3c8ab164.png",dateLogo="/assets/date-logo-db0b47a5.png",parkingLogo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIoAAACCCAYAAACZ1FAJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAA5LSURBVHhe7Z0HzBRFFMcfoNJUqoAFQic0AQE1KNIhSK8xgiZABINGowE0ipBgVFBDaKEFpQgh9A6hKy1KU5CmID1AqAJKUQH5z81+39x8c7d7dcu9XzK5nd2bLbNv37x982Y214EDB+6Rxj///COXzDz00ENyyQyXD1753PKXYaLCgsI4ggVFcubMGRo1ahQ1atSImjdvTuPGjaOzZ8/KrUxG2yi3bt2iGTNm0Nq1a+l+PdC9e+FVkStXLqpatSo1bdqUevbsSfny5RPrg3L9kTCVz/XLL7/kEJSgVsTVq1dpzZo1QlMcOXKEtm7dSjdv3pRbo5M/f35q2LAhVapUiYoVK0bNmjWjQoUKya3hBLH+Ai8od+7cofXr19PcuXNp+/bt9N9//8ktifHAAw9QvXr1qGvXrkLj5M6d3YoHqf4sAisoW7ZsEU0KhOTy5ctyS2ooWrQoNW7cWGiZF154IRD1pxMYQTl8+LAQCmz76aefaP/+/XJLeqlWrVqWsLRs2VI0VTperD8VU3lfC8qJEydo8eLFtGHDBrHsRcqWLSveojp37iyWgVfqLxKm8r4TlIsXL9Lq1auF9ti5c2fSbI5UA5vm2WefpRYtWgijuHjx4nJLTrxY/74QlH///Vc0J7A5FixYQHfv3pVb/AkM344dOwqbBsLz4IMPyi0hvFb/wJOCAi2xadMmWrduHf3www/0999/yy3BpGDBgkLL4O3pxRdfpMKFC8stZlwRFK843ODs2rdvn9Aay5cvp3PnzsktmUWpUqWodevWQttUr15dOP10UlH/KqbyrgsKbA7YG/PmzRPeUSYbeIVhBDdp0iTMpskIQTl16pRoTqA59uzZI9cyTnj66aeFpmnVqhWVKVNGrs2JbwXlxo0bwgEGQxRGKZM4zz//PHXv3p1eeuklKlCggFwbwleCApsDTi8Ix8qVK+n27dtyK5NM0FHZpk0bITQ1atQQNo2nBQV9Kjt27KCff/6Zzp8/L5qXTDVI3QKGMN6c8NZUq1Yt0ReVJ08euTUbVwTl5MmT4jV2ypQp9Oeff8q1jBdA73bv3r2F8JQuXVquTaOgwM+xZMkS0SP722+/ybWMl6lcubLo6W7btm1cfpqYHG7oV8HbyrZt29jm8CmwaWAI4+2pXbt2cm04pvvvWFCgwn788UeZY4IABGbixIkyl43p/juOmb0vUHKJCQqx3FPHgqLHkzL+J5Z7ylH4jCNYUBhHsKAwjmBBYRyRG69CeoLDRU9MMHF6/1mjMI5gQWEcwYLCOIIFhXEECwrjCMdhBs8991xcPcZ58+bNEf4IyzoapuOrcPnw8rVr17YtYwL3BoFmOqZ9sUZhHOE4zKBOnTpxaRTEP+zevVvmQvjtidXxWnmMNrTbpwmTtgem47NGYRzBgsI4IuVNDwZkN2jQQOZC2A0yV2cvMsHlw8sj8tBunyZiaXpSLiiMd2EbhUk6LCiMI1Le9GCmoXfeeUfmQmBUYTRMo9tUuHx4eUyebLdPEzHZKOyZzYnfysf7EOPesGeWSSosKIwjWFAYR6TcRoEx+9FHH8lcCKyLht2UoFw+vPywYcNsy5iIxUZJuaAw3oWNWSbpsKAwjkhLpyA+JKAStE45nXSXP3TokO0+TcTkcOPApZz4rXwynaHAdPzoosswEhYUxhEsKIwjUm6joB3EnLMqbGMktzw+HGW3TxOeMmYZ78LGLJN0eH6UDMfp/WeNwjgiLRFumPFaRf+Gng6+IRgNLh9e/uWXXzbeMztwbzzTe2wymKDeomF30Vw+vDyHQjKewdcaBU/DqlWr6I8//qCrV69mdYzZzchs+qCjSrLK43+PPPIIlStXTvg6MJgc+FGj+FJQ8GWxMWPGGH0AXqZmzZr01ltvic+7RcOLguKrpgeVgUru0aOH74QE/Prrr/Tmm29S3bp1ffct59yQHj1BYvUUL1C/+r5Mx1ST/n8kDIoaNGgQXbt2Te7Zv9y8eZPeeOMNun79uuPrV5P+/0TQ94VkOqZv4lFGjRpFkydPlrkQEMJnnnlGNIslSpTICvjxykg/2Cpnz56lrVu3Gj95gm8aDxkyROayMV2/il5/yTQLgOn4vhCUjRs3imGp6g3CN4D79u0rPlGvE2tF66Si/Pfff09jx46lgwcPyjUhQUcEvf4lrliPnw5B8YWN8tlnn4UJSfny5cWXq0xC4lUaN25M3377LT311FNyTUjjfP311zLnbXwhKGfOnJFLIT755JMcH4X2A/hqqD7GCa/1fsDzgvLXX3/JpRDwRaAZ9CuNGjUSXwxVuXTpklzyLp4XlL1798qlEA0bNpRL/gR2iX4Nu3btkkveJe3GLFTtp59+KgQg0hADVCZA81KkSBHavn27yIOpU6faapRUGKMqiZZfvXo1vffeezIXmlD4xo0bWdrTun4d2GnFixen999/X7ztWaTlrSfdnlm00StXrpS52Nm8eTMVK1ZM5sy4LQh25fHFeRi38fLoo4+KN8H8+fOLfLwPsac9syZ/Qiyg78TvwOeTCHA6Hj16VObSgy/eeiwiqWQ/4rdr8ZWglClTRi75H9Wf4gd8JSj16tWTS/4Hn7v3EywoLsGCkkL0WRH8DGJT/ETaBaVWrVpyKTZKliwZOBuldOnSMhcbjz32GD3++OMylx7SHo+CDr7evXsL7RCL5V+/fn3x3o99mM5ZTerxTMlURk2mMmoylVGTqYyarP/hmmIBAtKkSRMaP348Pfzww1n7SQRrH2oynbOrYQaI8jp27JiIeUV4IxLy8FLq4JwgKEEC9WCqUzxA8LXUqFFDNFEVKlQQqWzZsmK7VX8WGRmPgq73nTt3igiwTKRPnz4iziaaY9ENQfGUMYu+n9GjR4uKylS++eYbGjBggAiT9BKeERQIyeDBg2natGm2wyWCDvqzXn/9dU/Fqnim6Zk7dy59/vnnMpcNhk92795dtNFWJ1hQJhxGkDVssvnz5xuHkfbv35/efvttmcsmY22UCxcuUIcOHcKM2CpVqtDIkSPF4CmdaDYOMJ2/ihfLQ2AwyuDw4cNyTYgJEyaIYCcVvXzG2Chol3UhmTFjhlFIggquFTG1lSpVkmtCwGbzAq6PFLx165aI+FIHRL377rvUq1cvsQz1vHDhQjp//rxQ6TgPROAjJiMSXtQYFmhiTpw4QZs2bRKhAshjQFjr1q1FnM2UKVOEJlWB3YbgJgv9+OmIR3FdUJYtW0YffPCBzBE98cQTNHPmTKFh5s2bR4sWLcox6At+hieffFJUsNULC1sGX0PFE2nnyEu1oKCeTp06RVu2bMk69ytXrtCePXuEz8hkj6CJ7tatm5jCAtFv586dk1tyjv/JSEFBBcCYs4Am6devH73yyit0/PhxudY50DoYzoFhp23atDEalqkSFIwW+Pjjj2nfvn1xDxnFteMh+e677+SaUHjF0qVLZc4dQXHdRlGfHFCxYkWhReIREoA3it9//52GDh1Kr732Gl28eFFuSS0w2Dt16iQeikTGFUPD6rYZml23cV1Q9BuJ4OFk+Q8wKk9t1lIF7CgEPCfDSQatdPLkSZkLATsOyU1cF5TTp0/LpRCwOfSKSgQMhVi/fr3MpQa8tSXzqcd4ZR29ntKNq4KCp0Qf4AXL324Os1hB1HsqSXbzVrRoUbmUzeXLl+WSO7gqKPoIORhp6AxLNEpdB7EsqSTZ54sQDH1CP7dHE7o6Pwq8kSp45YU2sRu3Ewvopm/atKnx+JGS+l9T0v+PN6xknTPcAx07dswRfI3mKNLxE0HfF5J6rVbylEaxVC5ea61+nUTAPCUffvihzKUOnCs6NO0+yOQEXDvOW29+XNco8tcV9HbXqhyECH755Ze287FGA5WNuUfgY0gHiDzDK3kiwDUApxvQNZTbguJqpyD6MTCW2AIqfODAgVnHR8QbJqCBRxOvjVava6QwBDzRqGDE5TZr1ixsfK6KdfxImK5fJVp5dDfgpsIjqxvqFuqYaxwL51y4cGHhh4ETDOu++OKLMKcbvNBWXj9+OjoFXRUUTCIDd70Fotowa2IiNwro5b/66quwV2S7eBe7LgC1POwfdcA5SMb54yGaNGmSXBOytebMmSOW3RAUV5uedIB5aKG14JuxEvphoiX1v6ak/nf69Om0Zs0aebTgEnhBMfVlJJv7WlkuBZfAC0o6wiojzfMSJFL+vR7cKH1f1nH0aTqRj3R8NVnlIyX1v3ZTfSYD67xNxzcl9b+mhP/o563Wo/7/RND3hWQdR02B1yhMcnA1HmXEiBHCGLTA9N+YT1Y/PnqTMd7lyJEjck0wwBsT3m50zYrrHzdunIh2s8BgMOsN0ao/i4yIR3ECApuCJiRgw4YNtG7dOpnzNr4QFMR7BBWeZzaJwGPZpUsXEdSE3mUkvV8F/S3WNq+kaP1VBQsWFOOV8B0fP+ALG0UH5eGiVwN80DfUtm1bseykfDSSVX7FihUihtYCdYip2VE+mvcX5dlGUdCfuEOHDjnyeyBQSI8o8+KU5/o5IawCYRR2XQRAjxlORm96Irja1wOPJqLuVeHA9N92gUAQKDWqDJ1qGNph9T6nS2NEwiqP3vH27duH9ZLj+jBKIJqw4Np27NghcyEwcB3zygD9+IHvFAToLV67dq3MxQcmOUZ7b+EVQQGzZs0SkwclAsIuMFwDNxa4ISiOm554VbtdOQT8JDJ0FIE+VgyHF3n11VezbKd4gFGMkYOWkJiIt1mK5Z46FhSMkYmHVq1aySUz+DQJDFo8FbECLYJ59Z20+W6Bcxs+fLgY0BYrGIM9e/Zsql69ulxjpmXLlnIpNhD/4xTHTY9KOlW3CS6f/vK+8KMw7sOCwjiCBYVxhGPPrAq34ZlXnjUK4wgWFMYRLCiMI1hQGAcQ/Q8/dXUPOXRACwAAAABJRU5ErkJggg==",UserDisplayPropertyMid=()=>{const $=useSelector(Ut=>Ut.showPropertyDetail.showPropertyDetail[0]),[_e,rt]=reactExports.useState("#FFFFFF"),at=new Date,ht=new Date($.posted_on),pt=at-ht,wt=Math.floor(pt/(1e3*60*60*24))+1,[st,Tt]=reactExports.useState(null),[kt,Mt]=reactExports.useState(null),Dt=useSelector(Ut=>Ut.showIsLoggedin.userId);reactExports.useEffect(()=>{$.transaction_type==="Sale"?rt("#099317"):$.transaction_type==="Rent"?rt("#CA2B15"):$.transaction_type==="Lease"&&rt("#BA8214"),st&&$.id&&Mt(!st.includes($.id))},[st]);const Ot=async()=>{const Ut=localStorage.getItem("accessToken");try{const qt=await axios$1.put("http://127.0.0.1:8000/api/property/favourite/",{property_id:$.id},{headers:{Authorization:`Bearer ${Ut}`}});qt.status===200&&(Tt(qt.data.favourites),console.log(st,2)),console.log(qt.status),console.log(qt.data)}catch(qt){console.log(qt.response.data)}};return jsxRuntimeExports.jsx(React.Fragment,{children:jsxRuntimeExports.jsxs(Row$1,{className:"w-100",children:[jsxRuntimeExports.jsxs(Row$1,{children:[jsxRuntimeExports.jsxs(Col$1,{xl:8,children:[jsxRuntimeExports.jsxs("p",{className:"transaction-type d-flex justify-start",style:{color:_e},children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-circle-fill m-0.5",viewBox:"0 0 16 16",children:jsxRuntimeExports.jsx("circle",{cx:"8",cy:"8",r:"6"})}),"For ",$.transaction_type]}),jsxRuntimeExports.jsxs("h2",{className:"price-text display-6 text-white d-flex justify-start",children:["$ ",$.price]}),jsxRuntimeExports.jsxs("p",{className:"address-text text-white d-flex justify-start",children:[$.address,", ",$.locality.unit,", ",$.locality.district,", ",$.locality.state,", ",$.locality.pincode]})]}),jsxRuntimeExports.jsxs(Col$1,{xl:4,children:[jsxRuntimeExports.jsxs(Row$1,{className:"pt-3",children:[jsxRuntimeExports.jsx(Col$1,{className:"d-flex justify-end cursor-pointer",onClick:Ot,children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"27",height:"27",fill:kt?"red":"white",className:"bi bi-suit-heart-fill",viewBox:"0 0 16 16",children:jsxRuntimeExports.jsx("path",{d:"M4 1c2.21 0 4 1.755 4 3.92C8 2.755 9.79 1 12 1s4 1.755 4 3.92c0 3.263-3.234 4.414-7.608 9.608a.513.513 0 0 1-.784 0C3.234 9.334 0 8.183 0 4.92 0 2.755 1.79 1 4 1z"})})}),jsxRuntimeExports.jsx(Col$1,{className:"d-flex justify-center",children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"white",className:"bi bi-share-fill",viewBox:"0 0 16 16",children:jsxRuntimeExports.jsx("path",{d:"M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z"})})}),jsxRuntimeExports.jsxs(Col$1,{className:"d-flex justify-start",children:[jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsx("button",{className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800",type:"button","data-drawer-target":"drawer-right-example","data-drawer-show":"drawer-right-example","data-drawer-placement":"right","aria-controls":"drawer-right-example",children:"Message"})}),jsxRuntimeExports.jsxs("div",{id:"drawer-right-example",className:"fixed top-0 right-0 z-40 h-screen p-4 overflow-y-auto transition-transform translate-x-full bg-black w-50 md:w-75 dark:bg-gray-800",tabIndex:"-1","aria-labelledby":"drawer-right-label",children:[jsxRuntimeExports.jsxs("button",{type:"button","data-drawer-hide":"drawer-right-example","aria-controls":"drawer-right-example",className:"pb-3 text-gray-400 bg-transparent hover:bg-black hover:text-gray-900 rounded-lg text-sm w-8 h-8 absolute top-2.5 end-2.5 inline-flex items-center justify-center dark:hover:bg-gray-600 dark:hover:text-white",children:[jsxRuntimeExports.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:jsxRuntimeExports.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Close menu"})]}),jsxRuntimeExports.jsx(UserMessages,{propertyId:$.id,propertyUser:$.user_id,currentUser:Dt})]})]})]}),jsxRuntimeExports.jsxs(Row$1,{className:"pt-3 text-blue-200",children:[jsxRuntimeExports.jsx(Col$1,{className:"d-flex justify-end",children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-globe",viewBox:"0 0 16 16",children:jsxRuntimeExports.jsx("path",{d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm7.5-6.923c-.67.204-1.335.82-1.887 1.855A7.97 7.97 0 0 0 5.145 4H7.5V1.077zM4.09 4a9.267 9.267 0 0 1 .64-1.539 6.7 6.7 0 0 1 .597-.933A7.025 7.025 0 0 0 2.255 4H4.09zm-.582 3.5c.03-.877.138-1.718.312-2.5H1.674a6.958 6.958 0 0 0-.656 2.5h2.49zM4.847 5a12.5 12.5 0 0 0-.338 2.5H7.5V5H4.847zM8.5 5v2.5h2.99a12.495 12.495 0 0 0-.337-2.5H8.5zM4.51 8.5a12.5 12.5 0 0 0 .337 2.5H7.5V8.5H4.51zm3.99 0V11h2.653c.187-.765.306-1.608.338-2.5H8.5zM5.145 12c.138.386.295.744.468 1.068.552 1.035 1.218 1.65 1.887 1.855V12H5.145zm.182 2.472a6.696 6.696 0 0 1-.597-.933A9.268 9.268 0 0 1 4.09 12H2.255a7.024 7.024 0 0 0 3.072 2.472zM3.82 11a13.652 13.652 0 0 1-.312-2.5h-2.49c.062.89.291 1.733.656 2.5H3.82zm6.853 3.472A7.024 7.024 0 0 0 13.745 12H11.91a9.27 9.27 0 0 1-.64 1.539 6.688 6.688 0 0 1-.597.933zM8.5 12v2.923c.67-.204 1.335-.82 1.887-1.855.173-.324.33-.682.468-1.068H8.5zm3.68-1h2.146c.365-.767.594-1.61.656-2.5h-2.49a13.65 13.65 0 0 1-.312 2.5zm2.802-3.5a6.959 6.959 0 0 0-.656-2.5H12.18c.174.782.282 1.623.312 2.5h2.49zM11.27 2.461c.247.464.462.98.64 1.539h1.835a7.024 7.024 0 0 0-3.072-2.472c.218.284.418.598.597.933zM10.855 4a7.966 7.966 0 0 0-.468-1.068C9.835 1.897 9.17 1.282 8.5 1.077V4h2.355z"})})}),jsxRuntimeExports.jsx(Col$1,{className:"d-flex justify-start",children:jsxRuntimeExports.jsx("a",{href:`https://${$.related_website}`,children:$.related_website})})]})]})]}),jsxRuntimeExports.jsxs(Row$1,{className:"p-2",children:[$.bedroom&&jsxRuntimeExports.jsx(Col$1,{xl:3,xs:6,className:"p-3",children:jsxRuntimeExports.jsxs(Row$1,{children:[jsxRuntimeExports.jsx(Col$1,{className:"d-flex justify-end",children:jsxRuntimeExports.jsx(Image$1,{src:bedLogo,className:"h-5 w-5"})}),jsxRuntimeExports.jsx(Col$1,{className:"d-flex justify-start",children:jsxRuntimeExports.jsxs("p",{className:"text-white",children:[$.bedroom," Bed"]})})]})}),$.bathroom&&jsxRuntimeExports.jsx(Col$1,{xl:3,xs:6,className:"p-3",children:jsxRuntimeExports.jsxs(Row$1,{children:[jsxRuntimeExports.jsx(Col$1,{className:"d-flex justify-end",children:jsxRuntimeExports.jsx(Image$1,{src:bathLogo,className:"h-5 w-5"})}),jsxRuntimeExports.jsx(Col$1,{className:"d-flex justify-start",children:jsxRuntimeExports.jsxs("p",{className:"text-white",children:[$.bathroom," Bath"]})})]})}),$.lot_size&&jsxRuntimeExports.jsx(Col$1,{xl:3,xs:6,className:"p-3",children:jsxRuntimeExports.jsxs(Row$1,{children:[jsxRuntimeExports.jsx(Col$1,{className:"d-flex justify-end",children:jsxRuntimeExports.jsx(Image$1,{src:lotLogo,className:"h-5 w-5"})}),jsxRuntimeExports.jsx(Col$1,{className:"d-flex justify-start",children:jsxRuntimeExports.jsxs("p",{className:"text-white",children:[$.lot_size," sqft Lot"]})})]})}),$.basement_square_feet&&jsxRuntimeExports.jsx(Col$1,{xl:3,xs:6,className:"p-3",children:jsxRuntimeExports.jsxs(Row$1,{children:[jsxRuntimeExports.jsx(Col$1,{className:"d-flex justify-end",children:jsxRuntimeExports.jsx(Image$1,{src:basementLogo,className:"h-5 w-5"})}),jsxRuntimeExports.jsx(Col$1,{className:"d-flex justify-start",children:jsxRuntimeExports.jsxs("p",{className:"text-white",children:[$==null?void 0:$.basement_square_feet," Basement sqft"]})})]})}),$&&jsxRuntimeExports.jsx(Col$1,{xl:3,xs:6,className:"p-3",children:jsxRuntimeExports.jsxs(Row$1,{children:[jsxRuntimeExports.jsx(Col$1,{className:"d-flex justify-end",children:jsxRuntimeExports.jsx(Image$1,{src:propertyTypeLogo,className:"h-5 w-5"})}),jsxRuntimeExports.jsx(Col$1,{className:"d-flex justify-start",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-white",style:{textAlign:"left"},children:$.property_type.toUpperCase()}),jsxRuntimeExports.jsx("p",{className:"text-white opacity-75",style:{fontSize:"smaller",textAlign:"left"},children:"Property type"})]})})]})}),wt&&jsxRuntimeExports.jsx(Col$1,{xl:3,xs:6,className:"p-3",children:jsxRuntimeExports.jsxs(Row$1,{children:[jsxRuntimeExports.jsx(Col$1,{className:"d-flex justify-end",children:jsxRuntimeExports.jsx(Image$1,{src:dateLogo,className:"h-5 w-5"})}),jsxRuntimeExports.jsx(Col$1,{className:"d-flex justify-start",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-white",style:{textAlign:"left"},children:[wt," days ago"]}),jsxRuntimeExports.jsx("p",{className:"text-white opacity-75",style:{fontSize:"smaller",textAlign:"left"},children:"Time on Rykerz.com"})]})})]})}),$.parking.parking_spaces&&jsxRuntimeExports.jsx(Col$1,{xl:3,xs:6,className:"p-3",children:jsxRuntimeExports.jsxs(Row$1,{children:[jsxRuntimeExports.jsx(Col$1,{className:"d-flex justify-end",children:jsxRuntimeExports.jsx(Image$1,{src:parkingLogo,className:"h-5 w-5"})}),jsxRuntimeExports.jsx(Col$1,{className:"d-flex justify-start",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-white",style:{textAlign:"left"},children:[$.parking.parking_spaces," Cars"]}),jsxRuntimeExports.jsx("p",{className:"text-white opacity-75",style:{fontSize:"smaller",textAlign:"left"},children:"Garage"})]})})]})}),$.year_build&&jsxRuntimeExports.jsx(Col$1,{xl:3,xs:6,className:"p-3",children:jsxRuntimeExports.jsxs(Row$1,{children:[jsxRuntimeExports.jsx(Col$1,{className:"d-flex justify-end",children:jsxRuntimeExports.jsx(Image$1,{src:dateLogo,className:"h-5 w-5"})}),jsxRuntimeExports.jsx(Col$1,{className:"d-flex justify-start",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-white",style:{textAlign:"left"},children:$.year_build}),jsxRuntimeExports.jsx("p",{className:"text-white opacity-75",style:{fontSize:"smaller",textAlign:"left"},children:"Year build"})]})})]})})]}),jsxRuntimeExports.jsx(Row$1,{className:"ml-3 pt-3 pl-3 pr-3 pb-3 text-left text-white bg-blue-950",children:jsxRuntimeExports.jsxs("p",{children:["Description: ",$.description]})})]})})},noop$1=()=>{};function useRootClose($,_e,{disabled:rt,clickTrigger:at}={}){const ht=_e||noop$1;useClickOutside($,ht,{disabled:rt,clickTrigger:at});const pt=useEventCallback(wt=>{isEscKey(wt)&&ht(wt)});reactExports.useEffect(()=>{if(rt||$==null)return;const wt=ownerDocument(getRefTarget($));let st=(wt.defaultView||window).event;const Tt=listen(wt,"keyup",kt=>{if(kt===st){st=void 0;return}pt(kt)});return()=>{Tt()}},[$,rt,pt])}const Overlay$2=reactExports.forwardRef(($,_e)=>{const{flip:rt,offset:at,placement:ht,containerPadding:pt,popperConfig:wt={},transition:st,runTransition:Tt}=$,[kt,Mt]=useCallbackRef(),[Dt,Ot]=useCallbackRef(),Ut=useMergedRefs(Mt,_e),qt=useWaitForDOMRef($.container),tr=useWaitForDOMRef($.target),[ar,Yt]=reactExports.useState(!$.show),Kt=usePopper(tr,kt,mergeOptionsWithPopperConfig({placement:ht,enableEvents:!!$.show,containerPadding:pt||5,flip:rt,offset:at,arrowElement:Dt,popperConfig:wt}));$.show&&ar&&Yt(!1);const Jt=(...dn)=>{Yt(!0),$.onExited&&$.onExited(...dn)},pr=$.show||!ar;if(useRootClose(kt,$.onHide,{disabled:!$.rootClose||$.rootCloseDisabled,clickTrigger:$.rootCloseEvent}),!pr)return null;const{onExit:Sr,onExiting:Er,onEnter:Rr,onEntering:Lr,onEntered:Mr}=$;let Zr=$.children(Object.assign({},Kt.attributes.popper,{style:Kt.styles.popper,ref:Ut}),{popper:Kt,placement:ht,show:!!$.show,arrowProps:Object.assign({},Kt.attributes.arrow,{style:Kt.styles.arrow,ref:Ot})});return Zr=renderTransition(st,Tt,{in:!!$.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Zr,onExit:Sr,onExiting:Er,onExited:Jt,onEnter:Rr,onEntering:Lr,onEntered:Mr}),qt?ReactDOM.createPortal(Zr,qt):null});Overlay$2.displayName="Overlay";const BaseOverlay=Overlay$2,PopoverHeader=reactExports.forwardRef(({className:$,bsPrefix:_e,as:rt="div",...at},ht)=>(_e=useBootstrapPrefix(_e,"popover-header"),jsxRuntimeExports.jsx(rt,{ref:ht,className:classNames($,_e),...at})));PopoverHeader.displayName="PopoverHeader";const PopoverHeader$1=PopoverHeader,PopoverBody=reactExports.forwardRef(({className:$,bsPrefix:_e,as:rt="div",...at},ht)=>(_e=useBootstrapPrefix(_e,"popover-body"),jsxRuntimeExports.jsx(rt,{ref:ht,className:classNames($,_e),...at})));PopoverBody.displayName="PopoverBody";const PopoverBody$1=PopoverBody;function getOverlayDirection($,_e){let rt=$;return $==="left"?rt=_e?"end":"start":$==="right"&&(rt=_e?"start":"end"),rt}function getInitialPopperStyles($="absolute"){return{position:$,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const Popover=reactExports.forwardRef(({bsPrefix:$,placement:_e="right",className:rt,style:at,children:ht,body:pt,arrowProps:wt,hasDoneInitialMeasure:st,popper:Tt,show:kt,...Mt},Dt)=>{const Ot=useBootstrapPrefix($,"popover"),Ut=useIsRTL(),[qt]=(_e==null?void 0:_e.split("-"))||[],tr=getOverlayDirection(qt,Ut);let ar=at;return kt&&!st&&(ar={...at,...getInitialPopperStyles(Tt==null?void 0:Tt.strategy)}),jsxRuntimeExports.jsxs("div",{ref:Dt,role:"tooltip",style:ar,"x-placement":qt,className:classNames(rt,Ot,qt&&`bs-popover-${tr}`),...Mt,children:[jsxRuntimeExports.jsx("div",{className:"popover-arrow",...wt}),pt?jsxRuntimeExports.jsx(PopoverBody$1,{children:ht}):ht]})}),Popover$1=Object.assign(Popover,{Header:PopoverHeader$1,Body:PopoverBody$1,POPPER_OFFSET:[0,8]}),Tooltip=reactExports.forwardRef(({bsPrefix:$,placement:_e="right",className:rt,style:at,children:ht,arrowProps:pt,hasDoneInitialMeasure:wt,popper:st,show:Tt,...kt},Mt)=>{$=useBootstrapPrefix($,"tooltip");const Dt=useIsRTL(),[Ot]=(_e==null?void 0:_e.split("-"))||[],Ut=getOverlayDirection(Ot,Dt);let qt=at;return Tt&&!wt&&(qt={...at,...getInitialPopperStyles(st==null?void 0:st.strategy)}),jsxRuntimeExports.jsxs("div",{ref:Mt,style:qt,role:"tooltip","x-placement":Ot,className:classNames(rt,$,`bs-tooltip-${Ut}`),...kt,children:[jsxRuntimeExports.jsx("div",{className:"tooltip-arrow",...pt}),jsxRuntimeExports.jsx("div",{className:`${$}-inner`,children:ht})]})});Tooltip.displayName="Tooltip";const Tooltip$1=Object.assign(Tooltip,{TOOLTIP_OFFSET:[0,6]});function useOverlayOffset($){const _e=reactExports.useRef(null),rt=useBootstrapPrefix(void 0,"popover"),at=useBootstrapPrefix(void 0,"tooltip"),ht=reactExports.useMemo(()=>({name:"offset",options:{offset:()=>{if($)return $;if(_e.current){if(hasClass(_e.current,rt))return Popover$1.POPPER_OFFSET;if(hasClass(_e.current,at))return Tooltip$1.TOOLTIP_OFFSET}return[0,0]}}}),[$,rt,at]);return[_e,[ht]]}function wrapRefs($,_e){const{ref:rt}=$,{ref:at}=_e;$.ref=rt.__wrapped||(rt.__wrapped=ht=>rt(safeFindDOMNode(ht))),_e.ref=at.__wrapped||(at.__wrapped=ht=>at(safeFindDOMNode(ht)))}const Overlay=reactExports.forwardRef(({children:$,transition:_e=Fade$1,popperConfig:rt={},rootClose:at=!1,placement:ht="top",show:pt=!1,...wt},st)=>{const Tt=reactExports.useRef({}),[kt,Mt]=reactExports.useState(null),[Dt,Ot]=useOverlayOffset(wt.offset),Ut=useMergedRefs(st,Dt),qt=_e===!0?Fade$1:_e||void 0,tr=useEventCallback(ar=>{Mt(ar),rt==null||rt.onFirstUpdate==null||rt.onFirstUpdate(ar)});return useIsomorphicEffect(()=>{kt&&wt.target&&(Tt.current.scheduleUpdate==null||Tt.current.scheduleUpdate())},[kt,wt.target]),reactExports.useEffect(()=>{pt||Mt(null)},[pt]),jsxRuntimeExports.jsx(BaseOverlay,{...wt,ref:Ut,popperConfig:{...rt,modifiers:Ot.concat(rt.modifiers||[]),onFirstUpdate:tr},transition:qt,rootClose:at,placement:ht,show:pt,children:(ar,{arrowProps:Yt,popper:Kt,show:Jt})=>{var pr,Sr;wrapRefs(ar,Yt);const Er=Kt==null?void 0:Kt.placement,Rr=Object.assign(Tt.current,{state:Kt==null?void 0:Kt.state,scheduleUpdate:Kt==null?void 0:Kt.update,placement:Er,outOfBoundaries:(Kt==null||(pr=Kt.state)==null||(Sr=pr.modifiersData.hide)==null?void 0:Sr.isReferenceHidden)||!1,strategy:rt.strategy}),Lr=!!kt;return typeof $=="function"?$({...ar,placement:Er,show:Jt,...!_e&&Jt&&{className:"show"},popper:Rr,arrowProps:Yt,hasDoneInitialMeasure:Lr}):reactExports.cloneElement($,{...ar,placement:Er,arrowProps:Yt,popper:Rr,hasDoneInitialMeasure:Lr,className:classNames($.props.className,!_e&&Jt&&"show"),style:{...$.props.style,...ar.style}})}})});Overlay.displayName="Overlay";const Overlay$1=Overlay;function normalizeDelay($){return $&&typeof $=="object"?$:{show:$,hide:$}}function handleMouseOverOut($,_e,rt){const[at]=_e,ht=at.currentTarget,pt=at.relatedTarget||at.nativeEvent[rt];(!pt||pt!==ht)&&!contains$1(ht,pt)&&$(..._e)}PropTypes.oneOf(["click","hover","focus"]);const OverlayTrigger=({trigger:$=["hover","focus"],overlay:_e,children:rt,popperConfig:at={},show:ht,defaultShow:pt=!1,onToggle:wt,delay:st,placement:Tt,flip:kt=Tt&&Tt.indexOf("auto")!==-1,...Mt})=>{const Dt=reactExports.useRef(null),Ot=useMergedRefs(Dt,rt.ref),Ut=useTimeout(),qt=reactExports.useRef(""),[tr,ar]=useUncontrolledProp$1(ht,pt,wt),Yt=normalizeDelay(st),{onFocus:Kt,onBlur:Jt,onClick:pr}=typeof rt!="function"?reactExports.Children.only(rt).props:{},Sr=Dr=>{Ot(safeFindDOMNode(Dr))},Er=reactExports.useCallback(()=>{if(Ut.clear(),qt.current="show",!Yt.show){ar(!0);return}Ut.set(()=>{qt.current==="show"&&ar(!0)},Yt.show)},[Yt.show,ar,Ut]),Rr=reactExports.useCallback(()=>{if(Ut.clear(),qt.current="hide",!Yt.hide){ar(!1);return}Ut.set(()=>{qt.current==="hide"&&ar(!1)},Yt.hide)},[Yt.hide,ar,Ut]),Lr=reactExports.useCallback((...Dr)=>{Er(),Kt==null||Kt(...Dr)},[Er,Kt]),Mr=reactExports.useCallback((...Dr)=>{Rr(),Jt==null||Jt(...Dr)},[Rr,Jt]),Zr=reactExports.useCallback((...Dr)=>{ar(!tr),pr==null||pr(...Dr)},[pr,ar,tr]),dn=reactExports.useCallback((...Dr)=>{handleMouseOverOut(Er,Dr,"fromElement")},[Er]),Jr=reactExports.useCallback((...Dr)=>{handleMouseOverOut(Rr,Dr,"toElement")},[Rr]),wr=$==null?[]:[].concat($),Xr={ref:Sr};return wr.indexOf("click")!==-1&&(Xr.onClick=Zr),wr.indexOf("focus")!==-1&&(Xr.onFocus=Lr,Xr.onBlur=Mr),wr.indexOf("hover")!==-1&&(Xr.onMouseOver=dn,Xr.onMouseOut=Jr),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[typeof rt=="function"?rt(Xr):reactExports.cloneElement(rt,Xr),jsxRuntimeExports.jsx(Overlay$1,{...Mt,show:tr,onHide:Rr,flip:kt,placement:Tt,popperConfig:at,target:Dt.current,children:_e})]})},OverlayTrigger$1=OverlayTrigger;function isAccordionItemSelected($,_e){return Array.isArray($)?$.includes(_e):$===_e}const context$1=reactExports.createContext({});context$1.displayName="AccordionContext";const AccordionContext=context$1,AccordionCollapse=reactExports.forwardRef(({as:$="div",bsPrefix:_e,className:rt,children:at,eventKey:ht,...pt},wt)=>{const{activeEventKey:st}=reactExports.useContext(AccordionContext);return _e=useBootstrapPrefix(_e,"accordion-collapse"),jsxRuntimeExports.jsx(Collapse$1,{ref:wt,in:isAccordionItemSelected(st,ht),...pt,className:classNames(rt,_e),children:jsxRuntimeExports.jsx($,{children:reactExports.Children.only(at)})})});AccordionCollapse.displayName="AccordionCollapse";const AccordionCollapse$1=AccordionCollapse,context=reactExports.createContext({eventKey:""});context.displayName="AccordionItemContext";const AccordionItemContext=context,AccordionBody=reactExports.forwardRef(({as:$="div",bsPrefix:_e,className:rt,onEnter:at,onEntering:ht,onEntered:pt,onExit:wt,onExiting:st,onExited:Tt,...kt},Mt)=>{_e=useBootstrapPrefix(_e,"accordion-body");const{eventKey:Dt}=reactExports.useContext(AccordionItemContext);return jsxRuntimeExports.jsx(AccordionCollapse$1,{eventKey:Dt,onEnter:at,onEntering:ht,onEntered:pt,onExit:wt,onExiting:st,onExited:Tt,children:jsxRuntimeExports.jsx($,{ref:Mt,...kt,className:classNames(rt,_e)})})});AccordionBody.displayName="AccordionBody";const AccordionBody$1=AccordionBody;function useAccordionButton($,_e){const{activeEventKey:rt,onSelect:at,alwaysOpen:ht}=reactExports.useContext(AccordionContext);return pt=>{let wt=$===rt?null:$;ht&&(Array.isArray(rt)?rt.includes($)?wt=rt.filter(st=>st!==$):wt=[...rt,$]:wt=[$]),at==null||at(wt,pt),_e==null||_e(pt)}}const AccordionButton=reactExports.forwardRef(({as:$="button",bsPrefix:_e,className:rt,onClick:at,...ht},pt)=>{_e=useBootstrapPrefix(_e,"accordion-button");const{eventKey:wt}=reactExports.useContext(AccordionItemContext),st=useAccordionButton(wt,at),{activeEventKey:Tt}=reactExports.useContext(AccordionContext);return $==="button"&&(ht.type="button"),jsxRuntimeExports.jsx($,{ref:pt,onClick:st,...ht,"aria-expanded":Array.isArray(Tt)?Tt.includes(wt):wt===Tt,className:classNames(rt,_e,!isAccordionItemSelected(Tt,wt)&&"collapsed")})});AccordionButton.displayName="AccordionButton";const AccordionButton$1=AccordionButton,AccordionHeader=reactExports.forwardRef(({as:$="h2",bsPrefix:_e,className:rt,children:at,onClick:ht,...pt},wt)=>(_e=useBootstrapPrefix(_e,"accordion-header"),jsxRuntimeExports.jsx($,{ref:wt,...pt,className:classNames(rt,_e),children:jsxRuntimeExports.jsx(AccordionButton$1,{onClick:ht,children:at})})));AccordionHeader.displayName="AccordionHeader";const AccordionHeader$1=AccordionHeader,AccordionItem=reactExports.forwardRef(({as:$="div",bsPrefix:_e,className:rt,eventKey:at,...ht},pt)=>{_e=useBootstrapPrefix(_e,"accordion-item");const wt=reactExports.useMemo(()=>({eventKey:at}),[at]);return jsxRuntimeExports.jsx(AccordionItemContext.Provider,{value:wt,children:jsxRuntimeExports.jsx($,{ref:pt,...ht,className:classNames(rt,_e)})})});AccordionItem.displayName="AccordionItem";const AccordionItem$1=AccordionItem,Accordion=reactExports.forwardRef(($,_e)=>{const{as:rt="div",activeKey:at,bsPrefix:ht,className:pt,onSelect:wt,flush:st,alwaysOpen:Tt,...kt}=useUncontrolled($,{activeKey:"onSelect"}),Mt=useBootstrapPrefix(ht,"accordion"),Dt=reactExports.useMemo(()=>({activeEventKey:at,onSelect:wt,alwaysOpen:Tt}),[at,wt,Tt]);return jsxRuntimeExports.jsx(AccordionContext.Provider,{value:Dt,children:jsxRuntimeExports.jsx(rt,{ref:_e,...kt,className:classNames(pt,Mt,st&&`${Mt}-flush`)})})});Accordion.displayName="Accordion";const Accordion$1=Object.assign(Accordion,{Button:AccordionButton$1,Collapse:AccordionCollapse$1,Item:AccordionItem$1,Header:AccordionHeader$1,Body:AccordionBody$1}),UserDisplayPropertyBottom=()=>{const $=useSelector(Tt=>Tt.showPropertyDetail.showPropertyDetail[0]);console.log($);const _e=["appliances","architectural_style","basement","building_amenities","exterior","floor_covering","indoor_features","outdoor_amenities","parking","roof","rooms","view"],rt=Tt=>$[Tt]&&typeof $[Tt]=="object"?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h4",{className:"pt-3",children:[jsxRuntimeExports.jsx("b",{children:Tt.replace(/_/g," ")}),":"]}),jsxRuntimeExports.jsx("ol",{children:jsxRuntimeExports.jsx(Row$1,{children:Object.entries($[Tt]).map(([kt,Mt])=>jsxRuntimeExports.jsxs(Col$1,{sm:4,children:[Mt===!0&&jsxRuntimeExports.jsx("li",{children:kt.replace(/_/g," ")}),Mt!==!0&&Mt!==!1&&jsxRuntimeExports.jsx("li",{children:`${kt.replace(/_/g," ")}: ${Mt}`})]},kt))})})]},Tt):null,at=()=>jsxRuntimeExports.jsx("div",{children:_e.map(Tt=>rt(Tt))}),ht=[{id:"openHouse",title:"Open House",content:jsxRuntimeExports.jsxs(Popover$1,{id:"popover-basic",style:{maxWidth:"60vw"},classNameName:"popover-container",children:[jsxRuntimeExports.jsx(Popover$1.Header,{as:"h3",children:jsxRuntimeExports.jsx("b",{children:"Open House"})}),jsxRuntimeExports.jsxs(Popover$1.Body,{className:"popover-body",children:[jsxRuntimeExports.jsx("h2",{children:jsxRuntimeExports.jsx("b",{children:"Request a private showing"})}),jsxRuntimeExports.jsxs("div",{className:"row",children:[jsxRuntimeExports.jsx("div",{className:"col",children:jsxRuntimeExports.jsxs(Form$1,{children:[jsxRuntimeExports.jsxs(Form$1.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[jsxRuntimeExports.jsx(Form$1.Label,{children:"Full name"}),jsxRuntimeExports.jsx(Form$1.Control,{size:"sm",type:"text"})]}),jsxRuntimeExports.jsxs(Form$1.Group,{className:"mb-3",controlId:"exampleForm.ControlInput2",children:[jsxRuntimeExports.jsx(Form$1.Label,{children:"Email address"}),jsxRuntimeExports.jsx(Form$1.Control,{size:"sm",type:"email"})]}),jsxRuntimeExports.jsxs(Form$1.Group,{className:"mb-3",controlId:"exampleForm.ControlInput3",children:[jsxRuntimeExports.jsx(Form$1.Label,{children:"Phone Number"}),jsxRuntimeExports.jsx(Form$1.Control,{size:"sm",type:"text"})]}),jsxRuntimeExports.jsx(Button$1,{className:"bg-black text-white",type:"submit",children:"Email"})]})}),jsxRuntimeExports.jsxs("div",{className:"col",children:[jsxRuntimeExports.jsx(Image$1,{src:$.images[0].image}),jsxRuntimeExports.jsx("div",{className:"d-flex justify-center align-middle p-2",children:jsxRuntimeExports.jsx(Button$1,{size:"sm",variant:"primary",className:"text-whit bg-primary",children:"Message"})})]})]})]})]})},{id:"propertyDetail",title:"Property Details",content:jsxRuntimeExports.jsxs(Popover$1,{id:"popover-basic",style:{maxWidth:"50vw"},className:"popover-container",children:[jsxRuntimeExports.jsx(Popover$1.Header,{as:"h3",style:{fontSize:"medium"},className:"pt-2 pb-2",children:jsxRuntimeExports.jsx("b",{children:"Property Details"})}),jsxRuntimeExports.jsxs(Popover$1.Body,{className:"popover-body",children:[jsxRuntimeExports.jsx(Row$1,{children:jsxRuntimeExports.jsx("h4",{children:jsxRuntimeExports.jsx("b",{children:$.property_name})})}),jsxRuntimeExports.jsx(Row$1,{children:jsxRuntimeExports.jsx("p",{children:$.more_description})}),jsxRuntimeExports.jsx(Row$1,{children:jsxRuntimeExports.jsxs("p",{className:"pt-3",children:["Remodal Year: ",$.remodal_year]})}),jsxRuntimeExports.jsxs(Row$1,{className:"d-flex",children:[jsxRuntimeExports.jsx(Col$1,{className:"mt-4",sm:4,children:jsxRuntimeExports.jsxs("span",{className:"bg-blue-100 text-blue-800 text-sm font-small me-2 px-2.5 py-0.5 rounded dark:bg-blue-900 dark:text-blue-300",children:[jsxRuntimeExports.jsx("b",{children:"Total Area:"})," ",$.lot_size," sqft"]})}),jsxRuntimeExports.jsx(Col$1,{className:"mt-4",sm:4,children:jsxRuntimeExports.jsxs("span",{className:"bg-gray-100 text-gray-800 text-sm font-small me-2 px-2.5 py-0.5 rounded dark:bg-gray-700 dark:text-gray-300",children:[jsxRuntimeExports.jsx("b",{children:"Basement Area:"})," ",$.basement_square_feet," sqft"]})}),jsxRuntimeExports.jsx(Col$1,{className:"mt-4",sm:4,children:jsxRuntimeExports.jsxs("span",{className:"bg-green-100 text-green-800 text-sm font-small me-2 px-2.5 py-0.5 rounded dark:bg-green-900 dark:text-green-300",children:[jsxRuntimeExports.jsx("b",{children:"Garage Area:"})," ",$.garage_square_feet," sqft"]})}),jsxRuntimeExports.jsx(Col$1,{className:"mt-4",sm:4,children:jsxRuntimeExports.jsxs("span",{className:"bg-red-100 text-red-800 text-sm font-small me-2 px-2.5 py-0.5 rounded dark:bg-red-900 dark:text-red-300",children:[jsxRuntimeExports.jsx("b",{children:"Finished Area:"})," ",$.finished_square_feet," sqft"]})})]}),jsxRuntimeExports.jsxs("div",{className:"row mt-3",children:[jsxRuntimeExports.jsx("h4",{style:{fontSize:"medium"},className:"pt-3",children:jsxRuntimeExports.jsx("b",{children:"Property Features"})}),jsxRuntimeExports.jsx("br",{}),at()]})]})]})},{id:"monthlyPayment",title:"Monthly Payment",content:jsxRuntimeExports.jsxs(Popover$1,{id:"popover-basic",style:{maxWidth:"50vw"},className:"popover-container",children:[jsxRuntimeExports.jsx(Popover$1.Header,{as:"h3",style:{fontSize:"medium"},className:"pt-2 pb-2",children:jsxRuntimeExports.jsx("b",{children:"Costs for this home"})}),jsxRuntimeExports.jsxs(Popover$1.Body,{className:"popover-body",children:[jsxRuntimeExports.jsx("h4",{children:jsxRuntimeExports.jsxs("b",{children:["Home Price: $",$.price]})}),jsxRuntimeExports.jsxs("h4",{children:["Estimated Monthly Payment: $",(($.price-$.accounts.down_payment)*($.accounts.interest_rate/100)+($.price-$.accounts.down_payment*($.accounts.tax_rate/100))/12).toFixed(3)]}),jsxRuntimeExports.jsxs(Accordion$1,{defaultActiveKey:["0"],alwaysOpen:!0,className:"mt-4",children:[jsxRuntimeExports.jsxs(Accordion$1.Item,{eventKey:"0",children:[jsxRuntimeExports.jsx(Accordion$1.Header,{children:"Principal & Interest"}),jsxRuntimeExports.jsx(Accordion$1.Body,{className:"bg-blue-400",children:jsxRuntimeExports.jsxs("div",{className:"grid gap-4 mb-4 sm:grid-cols-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{for:"username",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",style:{textTransform:"capitalize"},children:[$.property_type," Price"]}),jsxRuntimeExports.jsx("input",{type:"text",name:"username",id:"username",value:$.price,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"username.example",required:""})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{hidden:!0,for:"email",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Email"}),jsxRuntimeExports.jsx("input",{hidden:!0,type:"email",name:"email",id:"email",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"name@company.com",required:""})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{for:"username",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Down Payment"}),jsxRuntimeExports.jsx("input",{type:"text",name:"username",id:"username",value:$.accounts.down_payment?$.accounts.down_payment:0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"})]}),"                        ",jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{for:"username",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"%"}),jsxRuntimeExports.jsx("input",{type:"text",name:"username",id:"username",value:$.accounts.down_payment/$.price,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"username.example"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{for:"username",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Loan Program"}),jsxRuntimeExports.jsx("input",{type:"text",name:"username",id:"username",value:$.accounts.loan_years?$.accounts.loan_years:0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"})]}),"                        ",jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{for:"username",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Interest Rate (%)"}),jsxRuntimeExports.jsx("input",{type:"text",name:"username",id:"username",value:$.accounts.interest_rate?$.accounts.interest_rate:0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"username.example"})]})]})})]}),jsxRuntimeExports.jsxs(Accordion$1.Item,{eventKey:"1",children:[jsxRuntimeExports.jsx(Accordion$1.Header,{children:"Property Taxes"}),jsxRuntimeExports.jsxs(Accordion$1.Body,{className:"bg-red-400",children:[jsxRuntimeExports.jsx("p",{style:{fontSize:"smaller"},children:"This estimate is based on the home value, property type, and an estimated local tax rate. Actual rate or taxes assessed may vary."}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 mb-4 sm:grid-cols-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{for:"username",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Home Price"}),jsxRuntimeExports.jsx("input",{type:"text",name:"username",id:"username",value:$.price,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"username.example",required:""})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{for:"username",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",style:{textTransform:"capitalize"},children:"Tax Rate (%)"}),jsxRuntimeExports.jsx("input",{type:"text",name:"username",id:"username",value:$.accounts.tax_rate?$.accounts.tax_rate:0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"username.example",required:""})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{for:"username",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",style:{textTransform:"capitalize"},children:"Tax Price"}),jsxRuntimeExports.jsx("input",{type:"text",name:"username",id:"username",value:$.price*($.accounts.tax_rate?$.accounts.tax_rate/100:0),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"username.example",required:""})]})]})]})]})]})]})]})},{id:"neighborhood",title:"Neighborhood",content:jsxRuntimeExports.jsxs(Popover$1,{id:"popover-basic",style:{maxWidth:"60vw"},className:"popover-container",children:[jsxRuntimeExports.jsx(Popover$1.Header,{as:"h3",children:jsxRuntimeExports.jsxs("b",{children:["Explore schools, safety, and lifestyle around ",$.address]})}),jsxRuntimeExports.jsx(Popover$1.Body,{className:"popover-body",children:jsxRuntimeExports.jsx(Mapbox,{})})]})}],[pt,wt]=reactExports.useState(null),st=Tt=>{wt(kt=>kt===Tt?null:Tt)};return jsxRuntimeExports.jsx("div",{className:"box m-5",children:ht.map(({id:Tt,title:kt,content:Mt})=>jsxRuntimeExports.jsx("div",{className:"d-flex justify-start mt-2 mb-2",children:jsxRuntimeExports.jsx(OverlayTrigger$1,{trigger:"click",placement:"right",overlay:Mt,show:pt===Tt,onToggle:()=>st(Tt),children:jsxRuntimeExports.jsx(Button$1,{variant:"dark",className:"detail-button w-25",children:jsxRuntimeExports.jsx("b",{children:kt})})})},Tt))})},UserDisplayProperty=()=>jsxRuntimeExports.jsx(React.Fragment,{children:jsxRuntimeExports.jsxs("div",{style:{backgroundColor:"#080231"},children:[jsxRuntimeExports.jsx("hr",{}),jsxRuntimeExports.jsx(UserDisplayPropertyTop,{}),jsxRuntimeExports.jsx("hr",{}),jsxRuntimeExports.jsx(UserDisplayPropertyMid,{}),jsxRuntimeExports.jsx(UserDisplayPropertyBottom,{})]})}),UserSidePropertyDetail=()=>jsxRuntimeExports.jsxs(React.Fragment,{children:[jsxRuntimeExports.jsx(UserHeader,{}),jsxRuntimeExports.jsx(UserDisplayProperty,{}),jsxRuntimeExports.jsx(UserFooter,{})]}),UserSideSellProperty=reactExports.lazy(()=>__vitePreload(()=>import("./UserSideSellProperty-e2abb302.js"),["assets/UserSideSellProperty-e2abb302.js","assets/UserPropertySell-fc6c15f0.js","assets/UserPropertySell-fb36fe5d.css"])),UserSideMarkProperty=reactExports.lazy(()=>__vitePreload(()=>import("./UserSideMarkProperty-1efb333f.js"),["assets/UserSideMarkProperty-1efb333f.js","assets/UserPropertySell-fc6c15f0.js","assets/UserPropertySell-fb36fe5d.css"])),UserSideAddPropertyDetails=reactExports.lazy(()=>__vitePreload(()=>import("./UserSideAddPropertyDetails-02050a2a.js"),["assets/UserSideAddPropertyDetails-02050a2a.js","assets/UserPropertySell-fc6c15f0.js","assets/UserPropertySell-fb36fe5d.css","assets/UserSideAddPropertyDetails-cb277aa1.css"])),UserSideAddPropertyDocuments=reactExports.lazy(()=>__vitePreload(()=>import("./UserSideAddPropertyDocuments-feddde14.js"),["assets/UserSideAddPropertyDocuments-feddde14.js","assets/UserPropertySell-fc6c15f0.js","assets/UserPropertySell-fb36fe5d.css"])),UserSideManageMyProperty=reactExports.lazy(()=>__vitePreload(()=>import("./UserSideManageMyProperty-fd14fe27.js"),["assets/UserSideManageMyProperty-fd14fe27.js","assets/UserSideManageMyProperty-2f943f8d.css"])),VideoChat=reactExports.lazy(()=>__vitePreload(()=>import("./VideoChat-a8587b0f.js"),[])),App=()=>{const $=jsxRuntimeExports.jsx("div",{class:"flex items-center justify-center w-full h-50 border border-gray-200 rounded-lg bg-gray-50 dark:bg-gray-800 dark:border-gray-700",children:jsxRuntimeExports.jsx("div",{class:"px-3 py-1 text-xs font-medium leading-none text-center text-blue-800 bg-blue-200 rounded-full animate-pulse dark:bg-blue-900 dark:text-blue-200",children:"loading..."})});return jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx("div",{className:"App",children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:$,children:jsxRuntimeExports.jsxs(Switch$2,{children:[jsxRuntimeExports.jsx(Route,{exact:!0,path:"/",children:jsxRuntimeExports.jsx(UserSideHome,{})}),jsxRuntimeExports.jsx(Route,{path:"/sellproperty",children:jsxRuntimeExports.jsx(UserSideSellProperty,{})}),jsxRuntimeExports.jsx(Route,{path:"/markproperty",children:jsxRuntimeExports.jsx(UserSideMarkProperty,{})}),jsxRuntimeExports.jsx(Route,{path:"/postpropertydetails",children:jsxRuntimeExports.jsx(UserSideAddPropertyDetails,{})}),jsxRuntimeExports.jsx(Route,{path:"/postpropertydocuments",children:jsxRuntimeExports.jsx(UserSideAddPropertyDocuments,{})}),jsxRuntimeExports.jsx(Route,{path:"/userlistproperties",children:jsxRuntimeExports.jsx(UserSideListProperties,{})}),jsxRuntimeExports.jsx(Route,{path:"/userpropertydetail",children:jsxRuntimeExports.jsx(UserSidePropertyDetail,{})}),jsxRuntimeExports.jsx(Route,{path:"/usermyproperty",children:jsxRuntimeExports.jsx(UserSideManageMyProperty,{})}),jsxRuntimeExports.jsx(Route,{path:"/room/:roomID",children:jsxRuntimeExports.jsx(VideoChat,{})}),jsxRuntimeExports.jsx(Route,{path:"*",children:jsxRuntimeExports.jsx(NotFound,{})})]})})})})};function _typeof$2($){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(rt){return typeof rt}:_typeof$2=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$2($)}function _classCallCheck($,_e){if(!($ instanceof _e))throw new TypeError("Cannot call a class as a function")}function _defineProperties($,_e){for(var rt=0;rt<_e.length;rt++){var at=_e[rt];at.enumerable=at.enumerable||!1,at.configurable=!0,"value"in at&&(at.writable=!0),Object.defineProperty($,at.key,at)}}function _createClass($,_e,rt){return _e&&_defineProperties($.prototype,_e),rt&&_defineProperties($,rt),$}function _possibleConstructorReturn($,_e){return _e&&(_typeof$2(_e)==="object"||typeof _e=="function")?_e:_assertThisInitialized($)}function _getPrototypeOf($){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(rt){return rt.__proto__||Object.getPrototypeOf(rt)},_getPrototypeOf($)}function _assertThisInitialized($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function _inherits($,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(_e&&_e.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),_e&&_setPrototypeOf($,_e)}function _setPrototypeOf($,_e){return _setPrototypeOf=Object.setPrototypeOf||function(at,ht){return at.__proto__=ht,at},_setPrototypeOf($,_e)}function _defineProperty$3($,_e,rt){return _e in $?Object.defineProperty($,_e,{value:rt,enumerable:!0,configurable:!0,writable:!0}):$[_e]=rt,$}var PersistGate=function($){_inherits(_e,$);function _e(){var rt,at;_classCallCheck(this,_e);for(var ht=arguments.length,pt=new Array(ht),wt=0;wt<ht;wt++)pt[wt]=arguments[wt];return at=_possibleConstructorReturn(this,(rt=_getPrototypeOf(_e)).call.apply(rt,[this].concat(pt))),_defineProperty$3(_assertThisInitialized(at),"state",{bootstrapped:!1}),_defineProperty$3(_assertThisInitialized(at),"_unsubscribe",void 0),_defineProperty$3(_assertThisInitialized(at),"handlePersistorState",function(){var st=at.props.persistor,Tt=st.getState(),kt=Tt.bootstrapped;kt&&(at.props.onBeforeLift?Promise.resolve(at.props.onBeforeLift()).finally(function(){return at.setState({bootstrapped:!0})}):at.setState({bootstrapped:!0}),at._unsubscribe&&at._unsubscribe())}),at}return _createClass(_e,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),_e}(reactExports.PureComponent);_defineProperty$3(PersistGate,"defaultProps",{children:null,loading:null});var KEY_PREFIX="persist:",FLUSH="persist/FLUSH",REHYDRATE="persist/REHYDRATE",PAUSE="persist/PAUSE",PERSIST="persist/PERSIST",PURGE="persist/PURGE",REGISTER="persist/REGISTER",DEFAULT_VERSION=-1;function _typeof$1($){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(rt){return typeof rt}:_typeof$1=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof$1($)}function ownKeys$2($,_e){var rt=Object.keys($);if(Object.getOwnPropertySymbols){var at=Object.getOwnPropertySymbols($);_e&&(at=at.filter(function(ht){return Object.getOwnPropertyDescriptor($,ht).enumerable})),rt.push.apply(rt,at)}return rt}function _objectSpread$2($){for(var _e=1;_e<arguments.length;_e++){var rt=arguments[_e]!=null?arguments[_e]:{};_e%2?ownKeys$2(rt,!0).forEach(function(at){_defineProperty$2($,at,rt[at])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(rt)):ownKeys$2(rt).forEach(function(at){Object.defineProperty($,at,Object.getOwnPropertyDescriptor(rt,at))})}return $}function _defineProperty$2($,_e,rt){return _e in $?Object.defineProperty($,_e,{value:rt,enumerable:!0,configurable:!0,writable:!0}):$[_e]=rt,$}function autoMergeLevel1($,_e,rt,at){at.debug;var ht=_objectSpread$2({},rt);return $&&_typeof$1($)==="object"&&Object.keys($).forEach(function(pt){pt!=="_persist"&&_e[pt]===rt[pt]&&(ht[pt]=$[pt])}),ht}function createPersistoid($){var _e=$.blacklist||null,rt=$.whitelist||null,at=$.transforms||[],ht=$.throttle||0,pt="".concat($.keyPrefix!==void 0?$.keyPrefix:KEY_PREFIX).concat($.key),wt=$.storage,st;$.serialize===!1?st=function(Sr){return Sr}:typeof $.serialize=="function"?st=$.serialize:st=defaultSerialize;var Tt=$.writeFailHandler||null,kt={},Mt={},Dt=[],Ot=null,Ut=null,qt=function(Sr){Object.keys(Sr).forEach(function(Er){Yt(Er)&&kt[Er]!==Sr[Er]&&Dt.indexOf(Er)===-1&&Dt.push(Er)}),Object.keys(kt).forEach(function(Er){Sr[Er]===void 0&&Yt(Er)&&Dt.indexOf(Er)===-1&&kt[Er]!==void 0&&Dt.push(Er)}),Ot===null&&(Ot=setInterval(tr,ht)),kt=Sr};function tr(){if(Dt.length===0){Ot&&clearInterval(Ot),Ot=null;return}var pr=Dt.shift(),Sr=at.reduce(function(Er,Rr){return Rr.in(Er,pr,kt)},kt[pr]);if(Sr!==void 0)try{Mt[pr]=st(Sr)}catch(Er){console.error("redux-persist/createPersistoid: error serializing state",Er)}else delete Mt[pr];Dt.length===0&&ar()}function ar(){Object.keys(Mt).forEach(function(pr){kt[pr]===void 0&&delete Mt[pr]}),Ut=wt.setItem(pt,st(Mt)).catch(Kt)}function Yt(pr){return!(rt&&rt.indexOf(pr)===-1&&pr!=="_persist"||_e&&_e.indexOf(pr)!==-1)}function Kt(pr){Tt&&Tt(pr)}var Jt=function(){for(;Dt.length!==0;)tr();return Ut||Promise.resolve()};return{update:qt,flush:Jt}}function defaultSerialize($){return JSON.stringify($)}function getStoredState($){var _e=$.transforms||[],rt="".concat($.keyPrefix!==void 0?$.keyPrefix:KEY_PREFIX).concat($.key),at=$.storage;$.debug;var ht;return $.deserialize===!1?ht=function(wt){return wt}:typeof $.deserialize=="function"?ht=$.deserialize:ht=defaultDeserialize,at.getItem(rt).then(function(pt){if(pt)try{var wt={},st=ht(pt);return Object.keys(st).forEach(function(Tt){wt[Tt]=_e.reduceRight(function(kt,Mt){return Mt.out(kt,Tt,st)},ht(st[Tt]))}),wt}catch(Tt){throw Tt}else return})}function defaultDeserialize($){return JSON.parse($)}function purgeStoredState($){var _e=$.storage,rt="".concat($.keyPrefix!==void 0?$.keyPrefix:KEY_PREFIX).concat($.key);return _e.removeItem(rt,warnIfRemoveError)}function warnIfRemoveError($){}function ownKeys$1($,_e){var rt=Object.keys($);if(Object.getOwnPropertySymbols){var at=Object.getOwnPropertySymbols($);_e&&(at=at.filter(function(ht){return Object.getOwnPropertyDescriptor($,ht).enumerable})),rt.push.apply(rt,at)}return rt}function _objectSpread$1($){for(var _e=1;_e<arguments.length;_e++){var rt=arguments[_e]!=null?arguments[_e]:{};_e%2?ownKeys$1(rt,!0).forEach(function(at){_defineProperty$1($,at,rt[at])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(rt)):ownKeys$1(rt).forEach(function(at){Object.defineProperty($,at,Object.getOwnPropertyDescriptor(rt,at))})}return $}function _defineProperty$1($,_e,rt){return _e in $?Object.defineProperty($,_e,{value:rt,enumerable:!0,configurable:!0,writable:!0}):$[_e]=rt,$}function _objectWithoutProperties($,_e){if($==null)return{};var rt=_objectWithoutPropertiesLoose($,_e),at,ht;if(Object.getOwnPropertySymbols){var pt=Object.getOwnPropertySymbols($);for(ht=0;ht<pt.length;ht++)at=pt[ht],!(_e.indexOf(at)>=0)&&Object.prototype.propertyIsEnumerable.call($,at)&&(rt[at]=$[at])}return rt}function _objectWithoutPropertiesLoose($,_e){if($==null)return{};var rt={},at=Object.keys($),ht,pt;for(pt=0;pt<at.length;pt++)ht=at[pt],!(_e.indexOf(ht)>=0)&&(rt[ht]=$[ht]);return rt}var DEFAULT_TIMEOUT=5e3;function persistReducer($,_e){var rt=$.version!==void 0?$.version:DEFAULT_VERSION;$.debug;var at=$.stateReconciler===void 0?autoMergeLevel1:$.stateReconciler,ht=$.getStoredState||getStoredState,pt=$.timeout!==void 0?$.timeout:DEFAULT_TIMEOUT,wt=null,st=!1,Tt=!0,kt=function(Dt){return Dt._persist.rehydrated&&wt&&!Tt&&wt.update(Dt),Dt};return function(Mt,Dt){var Ot=Mt||{},Ut=Ot._persist,qt=_objectWithoutProperties(Ot,["_persist"]),tr=qt;if(Dt.type===PERSIST){var ar=!1,Yt=function(Lr,Mr){ar||(Dt.rehydrate($.key,Lr,Mr),ar=!0)};if(pt&&setTimeout(function(){!ar&&Yt(void 0,new Error('redux-persist: persist timed out for persist key "'.concat($.key,'"')))},pt),Tt=!1,wt||(wt=createPersistoid($)),Ut)return _objectSpread$1({},_e(tr,Dt),{_persist:Ut});if(typeof Dt.rehydrate!="function"||typeof Dt.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return Dt.register($.key),ht($).then(function(Rr){var Lr=$.migrate||function(Mr,Zr){return Promise.resolve(Mr)};Lr(Rr,rt).then(function(Mr){Yt(Mr)},function(Mr){Yt(void 0,Mr)})},function(Rr){Yt(void 0,Rr)}),_objectSpread$1({},_e(tr,Dt),{_persist:{version:rt,rehydrated:!1}})}else{if(Dt.type===PURGE)return st=!0,Dt.result(purgeStoredState($)),_objectSpread$1({},_e(tr,Dt),{_persist:Ut});if(Dt.type===FLUSH)return Dt.result(wt&&wt.flush()),_objectSpread$1({},_e(tr,Dt),{_persist:Ut});if(Dt.type===PAUSE)Tt=!0;else if(Dt.type===REHYDRATE){if(st)return _objectSpread$1({},tr,{_persist:_objectSpread$1({},Ut,{rehydrated:!0})});if(Dt.key===$.key){var Kt=_e(tr,Dt),Jt=Dt.payload,pr=at!==!1&&Jt!==void 0?at(Jt,Mt,Kt,$):Kt,Sr=_objectSpread$1({},pr,{_persist:_objectSpread$1({},Ut,{rehydrated:!0})});return kt(Sr)}}}if(!Ut)return _e(Mt,Dt);var Er=_e(tr,Dt);return Er===tr?Mt:kt(_objectSpread$1({},Er,{_persist:Ut}))}}function _toConsumableArray($){return _arrayWithoutHoles($)||_iterableToArray($)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray($){if(Symbol.iterator in Object($)||Object.prototype.toString.call($)==="[object Arguments]")return Array.from($)}function _arrayWithoutHoles($){if(Array.isArray($)){for(var _e=0,rt=new Array($.length);_e<$.length;_e++)rt[_e]=$[_e];return rt}}function ownKeys($,_e){var rt=Object.keys($);if(Object.getOwnPropertySymbols){var at=Object.getOwnPropertySymbols($);_e&&(at=at.filter(function(ht){return Object.getOwnPropertyDescriptor($,ht).enumerable})),rt.push.apply(rt,at)}return rt}function _objectSpread($){for(var _e=1;_e<arguments.length;_e++){var rt=arguments[_e]!=null?arguments[_e]:{};_e%2?ownKeys(rt,!0).forEach(function(at){_defineProperty($,at,rt[at])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(rt)):ownKeys(rt).forEach(function(at){Object.defineProperty($,at,Object.getOwnPropertyDescriptor(rt,at))})}return $}function _defineProperty($,_e,rt){return _e in $?Object.defineProperty($,_e,{value:rt,enumerable:!0,configurable:!0,writable:!0}):$[_e]=rt,$}var initialState={registry:[],bootstrapped:!1},persistorReducer=function $(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:initialState,rt=arguments.length>1?arguments[1]:void 0;switch(rt.type){case REGISTER:return _objectSpread({},_e,{registry:[].concat(_toConsumableArray(_e.registry),[rt.key])});case REHYDRATE:var at=_e.registry.indexOf(rt.key),ht=_toConsumableArray(_e.registry);return ht.splice(at,1),_objectSpread({},_e,{registry:ht,bootstrapped:ht.length===0});default:return _e}};function persistStore($,_e,rt){var at=rt||!1,ht=createStore(persistorReducer,initialState,_e&&_e.enhancer?_e.enhancer:void 0),pt=function(kt){ht.dispatch({type:REGISTER,key:kt})},wt=function(kt,Mt,Dt){var Ot={type:REHYDRATE,payload:Mt,err:Dt,key:kt};$.dispatch(Ot),ht.dispatch(Ot),at&&st.getState().bootstrapped&&(at(),at=!1)},st=_objectSpread({},ht,{purge:function(){var kt=[];return $.dispatch({type:PURGE,result:function(Dt){kt.push(Dt)}}),Promise.all(kt)},flush:function(){var kt=[];return $.dispatch({type:FLUSH,result:function(Dt){kt.push(Dt)}}),Promise.all(kt)},pause:function(){$.dispatch({type:PAUSE})},persist:function(){$.dispatch({type:PERSIST,register:pt,rehydrate:wt})}});return _e&&_e.manualPersist||st.persist(),st}var createWebStorage$1={},getStorage$1={};getStorage$1.__esModule=!0;getStorage$1.default=getStorage;function _typeof($){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(rt){return typeof rt}:_typeof=function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof($)}function noop(){}var noopStorage={getItem:noop,setItem:noop,removeItem:noop};function hasStorage($){if((typeof self>"u"?"undefined":_typeof(self))!=="object"||!($ in self))return!1;try{var _e=self[$],rt="redux-persist ".concat($," test");_e.setItem(rt,"test"),_e.getItem(rt),_e.removeItem(rt)}catch{return!1}return!0}function getStorage($){var _e="".concat($,"Storage");return hasStorage(_e)?self[_e]:noopStorage}createWebStorage$1.__esModule=!0;createWebStorage$1.default=createWebStorage;var _getStorage=_interopRequireDefault$1(getStorage$1);function _interopRequireDefault$1($){return $&&$.__esModule?$:{default:$}}function createWebStorage($){var _e=(0,_getStorage.default)($);return{getItem:function(at){return new Promise(function(ht,pt){ht(_e.getItem(at))})},setItem:function(at,ht){return new Promise(function(pt,wt){pt(_e.setItem(at,ht))})},removeItem:function(at){return new Promise(function(ht,pt){ht(_e.removeItem(at))})}}}var default_1=void 0,_createWebStorage=_interopRequireDefault(createWebStorage$1);function _interopRequireDefault($){return $&&$.__esModule?$:{default:$}}var _default=(0,_createWebStorage.default)("local");default_1=_default;const chatMessageSlice=createSlice({name:"chatMessages",initialState:{messages:[]},reducers:{setMessages:($,_e)=>{$.messages=_e.payload},addMessage:($,_e)=>{$.messages.push(_e.payload)}}}),chatMessagesReducer=chatMessageSlice.reducer,focusCoordinatesSlice=createSlice({name:"focusCoordinates",initialState:{lng:76.2494,lat:9.9477},reducers:{setLng:($,_e)=>{$.lng=_e.payload},setLat:($,_e)=>{$.lat=_e.payload}}}),focusCoordinatesReducer=focusCoordinatesSlice.reducer,persistConfig={key:"root",storage:default_1},rootReducer=combineReducers({showSignupModal:signupReducer,showSigninModal:signinReducer,showIsLoggedin:LoggedinReducer,showIsGoogleLoggedin:GoogleLoggedinReducer,showPropertyAddress:propertyAddressReducer,showPropertiesList:propertiesListReducer,showPropertyDetail:propertyDetailReducer,chatMessages:chatMessagesReducer,focusCoordinates:focusCoordinatesReducer}),persistedReducer=persistReducer(persistConfig,rootReducer),store=configureStore({reducer:persistedReducer}),persistor=persistStore(store);client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(Provider,{store,children:jsxRuntimeExports.jsx(PersistGate,{loading:null,persistor,children:jsxRuntimeExports.jsx(App,{})})})}));export{Accordion$1 as A,Button$1 as B,Col$1 as C,FormCheckInput$1 as F,InputGroupContext as I,Mapbox as M,Nav$1 as N,React as R,UserHeader as U,useHistory as a,useDispatch as b,classNames as c,useSelector as d,Form$1 as e,Row$1 as f,addAddress as g,UserFooter as h,FloatingLabel$1 as i,jsxRuntimeExports as j,resetPropertyAddress as k,getAugmentedNamespace as l,reactRouter as m,history as n,UserPropertyCard as o,commonjsGlobal$1 as p,useParams as q,reactExports as r,tinyInvariant as t,useBootstrapPrefix as u};
