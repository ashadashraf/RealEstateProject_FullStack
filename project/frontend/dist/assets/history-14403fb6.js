import{a as ln}from"./@zegocloud-df1323c4.js";import{_ as J}from"./@babel-11e817af.js";import{r as vn}from"./resolve-pathname-e210f2ac.js";import{v as gn}from"./value-equal-17d7769a.js";import{i as on}from"./tiny-invariant-253458cb.js";function z(n){return n.charAt(0)==="/"?n:"/"+n}function Z(n){return n.charAt(0)==="/"?n.substr(1):n}function pn(n,e){return n.toLowerCase().indexOf(e.toLowerCase())===0&&"/?#".indexOf(n.charAt(e.length))!==-1}function sn(n,e){return pn(n,e)?n.substr(e.length):n}function cn(n){return n.charAt(n.length-1)==="/"?n.slice(0,-1):n}function fn(n){var e=n||"/",f="",c="",a=e.indexOf("#");a!==-1&&(c=e.substr(a),e=e.substr(0,a));var p=e.indexOf("?");return p!==-1&&(f=e.substr(p),e=e.substr(0,p)),{pathname:e,search:f==="?"?"":f,hash:c==="#"?"":c}}function S(n){var e=n.pathname,f=n.search,c=n.hash,a=e||"/";return f&&f!=="?"&&(a+=f.charAt(0)==="?"?f:"?"+f),c&&c!=="#"&&(a+=c.charAt(0)==="#"?c:"#"+c),a}function _(n,e,f,c){var a;typeof n=="string"?(a=fn(n),a.state=e):(a=J({},n),a.pathname===void 0&&(a.pathname=""),a.search?a.search.charAt(0)!=="?"&&(a.search="?"+a.search):a.search="",a.hash?a.hash.charAt(0)!=="#"&&(a.hash="#"+a.hash):a.hash="",e!==void 0&&a.state===void 0&&(a.state=e));try{a.pathname=decodeURI(a.pathname)}catch(p){throw p instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):p}return f&&(a.key=f),c?a.pathname?a.pathname.charAt(0)!=="/"&&(a.pathname=vn(a.pathname,c.pathname)):a.pathname=c.pathname:a.pathname||(a.pathname="/"),a}function mn(n,e){return n.pathname===e.pathname&&n.search===e.search&&n.hash===e.hash&&n.key===e.key&&gn(n.state,e.state)}function X(){var n=null;function e(m){return n=m,function(){n===m&&(n=null)}}function f(m,l,v,h){if(n!=null){var H=typeof n=="function"?n(m,l):n;typeof H=="string"?typeof v=="function"?v(H,h):h(!0):h(H!==!1)}else h(!0)}var c=[];function a(m){var l=!0;function v(){l&&m.apply(void 0,arguments)}return c.push(v),function(){l=!1,c=c.filter(function(h){return h!==v})}}function p(){for(var m=arguments.length,l=new Array(m),v=0;v<m;v++)l[v]=arguments[v];c.forEach(function(h){return h.apply(void 0,l)})}return{setPrompt:e,confirmTransitionTo:f,appendListener:a,notifyListeners:p}}var hn=!!(typeof window<"u"&&window.document&&window.document.createElement);function un(n,e){e(window.confirm(n))}function wn(){var n=window.navigator.userAgent;return(n.indexOf("Android 2.")!==-1||n.indexOf("Android 4.0")!==-1)&&n.indexOf("Mobile Safari")!==-1&&n.indexOf("Chrome")===-1&&n.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function yn(){return window.navigator.userAgent.indexOf("Trident")===-1}function Pn(){return window.navigator.userAgent.indexOf("Firefox")===-1}function xn(n){return n.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}var nn="popstate",en="hashchange";function tn(){try{return window.history.state||{}}catch{return{}}}function kn(n){n===void 0&&(n={}),hn||on(!1);var e=window.history,f=wn(),c=!yn(),a=n,p=a.forceRefresh,m=p===void 0?!1:p,l=a.getUserConfirmation,v=l===void 0?un:l,h=a.keyLength,H=h===void 0?6:h,I=n.basename?cn(z(n.basename)):"";function x(i){var t=i||{},o=t.key,r=t.state,d=window.location,w=d.pathname,T=d.search,U=d.hash,A=w+T+U;return I&&(A=sn(A,I)),_(A,r,o)}function b(){return Math.random().toString(36).substr(2,H)}var k=X();function M(i){J(C,i),C.length=e.length,k.notifyListeners(C.location,C.action)}function G(i){xn(i)||N(x(i.state))}function $(){N(x(tn()))}var R=!1;function N(i){if(R)R=!1,M();else{var t="POP";k.confirmTransitionTo(i,t,v,function(o){o?M({action:t,location:i}):j(i)})}}function j(i){var t=C.location,o=E.indexOf(t.key);o===-1&&(o=0);var r=E.indexOf(i.key);r===-1&&(r=0);var d=o-r;d&&(R=!0,y(d))}var F=x(tn()),E=[F.key];function s(i){return I+S(i)}function u(i,t){var o="PUSH",r=_(i,t,b(),C.location);k.confirmTransitionTo(r,o,v,function(d){if(d){var w=s(r),T=r.key,U=r.state;if(f)if(e.pushState({key:T,state:U},null,w),m)window.location.href=w;else{var A=E.indexOf(C.location.key),D=E.slice(0,A+1);D.push(r.key),E=D,M({action:o,location:r})}else window.location.href=w}})}function L(i,t){var o="REPLACE",r=_(i,t,b(),C.location);k.confirmTransitionTo(r,o,v,function(d){if(d){var w=s(r),T=r.key,U=r.state;if(f)if(e.replaceState({key:T,state:U},null,w),m)window.location.replace(w);else{var A=E.indexOf(C.location.key);A!==-1&&(E[A]=r.key),M({action:o,location:r})}else window.location.replace(w)}})}function y(i){e.go(i)}function g(){y(-1)}function B(){y(1)}var q=0;function O(i){q+=i,q===1&&i===1?(window.addEventListener(nn,G),c&&window.addEventListener(en,$)):q===0&&(window.removeEventListener(nn,G),c&&window.removeEventListener(en,$))}var P=!1;function K(i){i===void 0&&(i=!1);var t=k.setPrompt(i);return P||(O(1),P=!0),function(){return P&&(P=!1,O(-1)),t()}}function Q(i){var t=k.appendListener(i);return O(1),function(){O(-1),t()}}var C={length:e.length,action:"POP",location:F,createHref:s,push:u,replace:L,go:y,goBack:g,goForward:B,block:K,listen:Q};return C}var an="hashchange",Ln={hashbang:{encodePath:function(e){return e.charAt(0)==="!"?e:"!/"+Z(e)},decodePath:function(e){return e.charAt(0)==="!"?e.substr(1):e}},noslash:{encodePath:Z,decodePath:z},slash:{encodePath:z,decodePath:z}};function dn(n){var e=n.indexOf("#");return e===-1?n:n.slice(0,e)}function W(){var n=window.location.href,e=n.indexOf("#");return e===-1?"":n.substring(e+1)}function On(n){window.location.hash=n}function V(n){window.location.replace(dn(window.location.href)+"#"+n)}function Tn(n){n===void 0&&(n={}),hn||on(!1);var e=window.history;Pn();var f=n,c=f.getUserConfirmation,a=c===void 0?un:c,p=f.hashType,m=p===void 0?"slash":p,l=n.basename?cn(z(n.basename)):"",v=Ln[m],h=v.encodePath,H=v.decodePath;function I(){var t=H(W());return l&&(t=sn(t,l)),_(t)}var x=X();function b(t){J(i,t),i.length=e.length,x.notifyListeners(i.location,i.action)}var k=!1,M=null;function G(t,o){return t.pathname===o.pathname&&t.search===o.search&&t.hash===o.hash}function $(){var t=W(),o=h(t);if(t!==o)V(o);else{var r=I(),d=i.location;if(!k&&G(d,r)||M===S(r))return;M=null,R(r)}}function R(t){if(k)k=!1,b();else{var o="POP";x.confirmTransitionTo(t,o,a,function(r){r?b({action:o,location:t}):N(t)})}}function N(t){var o=i.location,r=s.lastIndexOf(S(o));r===-1&&(r=0);var d=s.lastIndexOf(S(t));d===-1&&(d=0);var w=r-d;w&&(k=!0,g(w))}var j=W(),F=h(j);j!==F&&V(F);var E=I(),s=[S(E)];function u(t){var o=document.querySelector("base"),r="";return o&&o.getAttribute("href")&&(r=dn(window.location.href)),r+"#"+h(l+S(t))}function L(t,o){var r="PUSH",d=_(t,void 0,void 0,i.location);x.confirmTransitionTo(d,r,a,function(w){if(w){var T=S(d),U=h(l+T),A=W()!==U;if(A){M=T,On(U);var D=s.lastIndexOf(S(i.location)),Y=s.slice(0,D+1);Y.push(T),s=Y,b({action:r,location:d})}else b()}})}function y(t,o){var r="REPLACE",d=_(t,void 0,void 0,i.location);x.confirmTransitionTo(d,r,a,function(w){if(w){var T=S(d),U=h(l+T),A=W()!==U;A&&(M=T,V(U));var D=s.indexOf(S(i.location));D!==-1&&(s[D]=T),b({action:r,location:d})}})}function g(t){e.go(t)}function B(){g(-1)}function q(){g(1)}var O=0;function P(t){O+=t,O===1&&t===1?window.addEventListener(an,$):O===0&&window.removeEventListener(an,$)}var K=!1;function Q(t){t===void 0&&(t=!1);var o=x.setPrompt(t);return K||(P(1),K=!0),function(){return K&&(K=!1,P(-1)),o()}}function C(t){var o=x.appendListener(t);return P(1),function(){P(-1),o()}}var i={length:e.length,action:"POP",location:E,createHref:u,push:L,replace:y,go:g,goBack:B,goForward:q,block:Q,listen:C};return i}function rn(n,e,f){return Math.min(Math.max(n,e),f)}function Hn(n){n===void 0&&(n={});var e=n,f=e.getUserConfirmation,c=e.initialEntries,a=c===void 0?["/"]:c,p=e.initialIndex,m=p===void 0?0:p,l=e.keyLength,v=l===void 0?6:l,h=X();function H(u){J(s,u),s.length=s.entries.length,h.notifyListeners(s.location,s.action)}function I(){return Math.random().toString(36).substr(2,v)}var x=rn(m,0,a.length-1),b=a.map(function(u){return typeof u=="string"?_(u,void 0,I()):_(u,void 0,u.key||I())}),k=S;function M(u,L){var y="PUSH",g=_(u,L,I(),s.location);h.confirmTransitionTo(g,y,f,function(B){if(B){var q=s.index,O=q+1,P=s.entries.slice(0);P.length>O?P.splice(O,P.length-O,g):P.push(g),H({action:y,location:g,index:O,entries:P})}})}function G(u,L){var y="REPLACE",g=_(u,L,I(),s.location);h.confirmTransitionTo(g,y,f,function(B){B&&(s.entries[s.index]=g,H({action:y,location:g}))})}function $(u){var L=rn(s.index+u,0,s.entries.length-1),y="POP",g=s.entries[L];h.confirmTransitionTo(g,y,f,function(B){B?H({action:y,location:g,index:L}):H()})}function R(){$(-1)}function N(){$(1)}function j(u){var L=s.index+u;return L>=0&&L<s.entries.length}function F(u){return u===void 0&&(u=!1),h.setPrompt(u)}function E(u){return h.appendListener(u)}var s={length:b.length,action:"POP",location:b[x],index:x,entries:b,createHref:k,push:M,replace:G,go:$,goBack:R,goForward:N,canGo:j,block:F,listen:E};return s}const bn=Object.freeze(Object.defineProperty({__proto__:null,createBrowserHistory:kn,createHashHistory:Tn,createLocation:_,createMemoryHistory:Hn,createPath:S,locationsAreEqual:mn,parsePath:fn},Symbol.toStringTag,{value:"Module"})),Mn=ln(bn);export{_ as a,S as b,Hn as c,kn as d,Tn as e,mn as l,Mn as r};
