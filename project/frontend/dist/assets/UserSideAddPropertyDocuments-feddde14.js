import{r as d,a as V,j as e,R as j,e as s,C as r,B as n,U as w}from"./index-9d4d201b.js";import{U as k}from"./UserPropertySell-fc6c15f0.js";const N=()=>{d.useState(!1);const[l,h]=d.useState([{id:5}]),[c,I]=d.useState([]),[m,x]=d.useState([{id:1}]),[p,y]=d.useState([]),F=V(),f=()=>{const o={id:l.length+1};h([...l,o])},C=()=>{const o={id:m.length+1};x([...m,o])},b=t=>{const o=l.filter(i=>i.id!==t);h(o)},v=t=>{const o=m.filter(i=>i.id!==t);x(o)},g=(t,o)=>{const i=t.target.files,a=[...c];a[o]=i[0],I(a)},S=(t,o)=>{console.log(o);const i=t.target.files,a=[...p];a[o]=i[0],y(a)},U=async t=>{t.preventDefault();const o=new FormData;for(let a=0;a<c.length;a++)c[a]&&o.append("property_images",c[a]);for(let a=0;a<p.length;a++)p[a]&&o.append("property_videos",p[a]);localStorage.getItem("accessToken");const i=localStorage.getItem("propertyId");o.append("property",i);try{const a=await fetch("http://127.0.0.1:8000/api/property/adddocuments/",{method:"POST",body:o,headers:{}});if(a.ok){console.log("Property Document Added");const u=await a.json();console.log(u),localStorage.removeItem("propertyId"),F.push("/")}else{console.log("Failed to add property documents");const u=await a.text();console.log("Error Details:",u),console.log("Status",a.status),console.log("Response",a)}}catch(a){console.error("Error in sending request",a)}};return e.jsx(j.Fragment,{children:e.jsxs(s,{className:"m-5",onSubmit:U,children:[e.jsx(s.Label,{className:"text-lg",children:"Images"}),e.jsxs(s.Group,{as:r,md:"3",controlId:"imageUpload",required:!0,children:[e.jsx(s.Label,{children:"Image 1"}),e.jsx(s.Control,{name:"uploaded_images",type:"file",accept:"image/jpeg,image/png,image/gif",multiple:!0,onChange:t=>g(t,0)})]},"1"),e.jsxs(s.Group,{as:r,md:"3",controlId:"imageUpload",required:!0,children:[e.jsx(s.Label,{children:"Image 2"}),e.jsx(s.Control,{name:"uploaded_images",type:"file",accept:"image/jpeg,image/png,image/gif",multiple:!0,onChange:t=>g(t,1)})]},"2"),e.jsxs(s.Group,{as:r,md:"3",controlId:"imageUpload",required:!0,children:[e.jsx(s.Label,{children:"Image 3"}),e.jsx(s.Control,{name:"uploaded_images",type:"file",accept:"image/jpeg,image/png,image/gif",multiple:!0,onChange:t=>g(t,2)})]},"3"),l.map((t,o)=>e.jsxs(s.Group,{className:"pt-3",as:r,md:"3",controlId:`imageUpload-${t.id}`,children:[e.jsx(s.Label,{children:"Image"}),e.jsx(s.Control,{name:"uploaded_images",type:"file",accept:"image/jpeg,image/png,image/gif",multiple:!0,onChange:i=>g(i,t.id)}),e.jsx(n,{variant:"danger",onClick:()=>b(t.id),children:"Remove Image"})]},t.id)),e.jsx(r,{md:"3",className:"pb-3 pt-4 mt-3",children:e.jsx(n,{variant:"primary",className:"text-black",onClick:f,children:"Add Image"})}),m.map((t,o)=>e.jsxs(s.Group,{className:"pt-3",as:r,md:"3",controlId:`imageUpload-${t.id}`,children:[e.jsx(s.Label,{children:"Video"}),e.jsx(s.Control,{name:"uploaded_videos",type:"file",accept:"video/*",multiple:!0,onChange:i=>S(i,t.id)}),e.jsx(n,{variant:"danger",onClick:()=>v(t.id),children:"Remove Video"})]},t.id)),e.jsx(r,{md:"3",className:"pb-3 pt-4 mt-3",children:e.jsx(n,{variant:"primary",className:"text-black",onClick:C,children:"Add Video"})}),e.jsx(n,{type:"submit",variant:"primary",className:"text-black",children:"Submit"})]})})},L=()=>e.jsxs(j.Fragment,{children:[e.jsx(w,{}),e.jsx(k,{}),e.jsx(N,{})]});export{L as default};
