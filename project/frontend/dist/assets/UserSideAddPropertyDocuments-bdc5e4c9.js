import{r as n,j as o,R as x}from"./react-5e5497d9.js";import{c as v,U as S}from"./index-179d2157.js";import{U as k}from"./UserPropertySell-0983ef9d.js";import{F as a,C as p,B as h}from"./react-bootstrap-083f7f9e.js";import{Q as g}from"./react-toastify-c23c37f3.js";import{u as P}from"./react-router-c0ec2a24.js";import"./@zegocloud-df1323c4.js";import"./react-dom-585b8c01.js";import"./scheduler-765c72db.js";import"./react-router-dom-992c6d67.js";import"./@babel-11e817af.js";import"./history-14403fb6.js";import"./resolve-pathname-e210f2ac.js";import"./value-equal-17d7769a.js";import"./tiny-invariant-253458cb.js";/* empty css                  */import"./react-icons-64287f7e.js";import"./mdb-react-ui-kit-0e4b3bef.js";import"./react-redux-fda6d297.js";import"./hoist-non-react-statics-d5fd62bb.js";import"./react-is-e5978b8b.js";import"./use-sync-external-store-9e4930e8.js";import"./@reduxjs-69ed7b28.js";import"./immer-41fd5235.js";import"./redux-cef7b9c2.js";import"./redux-thunk-ef899f4c.js";import"./react-google-login-4b940c99.js";import"./gapi-script-6c9bcd75.js";import"./axios-28bc18a3.js";import"./mapbox-gl-6f08f8e4.js";import"./redux-persist-daa3df3a.js";import"./classnames-8e509635.js";import"./prop-types-extra-571b8aa3.js";import"./uncontrollable-11f2de37.js";import"./@restart-bee8d52b.js";import"./dom-helpers-fa9da9d2.js";import"./@react-aria-2d9aeea2.js";import"./dequal-5d0cf067.js";import"./@popperjs-a8253bfa.js";import"./warning-a06a1dc5.js";import"./react-transition-group-33a4e12e.js";import"./prop-types-9bfe13df.js";import"./path-to-regexp-00f975c1.js";import"./isarray-7a86238f.js";const U=()=>{const j=(e,t)=>{switch(t){case"error":g.error(e,{position:"top-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"});break;case"warning":g.warning(e,{position:"top-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"});break;default:g(e,{position:"top-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"})}};n.useState(!1);const[l,f]=n.useState([{id:5}]),[d,I]=n.useState([]);n.useState([{id:1}]);const[u,D]=n.useState([]),w=P(),y=()=>{const t={id:l.length+1};f([...l,t])},b=e=>{const t=l.filter(s=>s.id!==e);f(t)},c=(e,t)=>{const s=e.target.files,r=[...d];r[t]=s[0],I(r)};n.useEffect(()=>{const e=()=>{window.history.forward()};return e(),window.onpageshow=t=>{t.persisted&&e()},window.onunload=()=>{},()=>{window.onpageshow=null,window.onunload=null}},[]);const C=async e=>{e.preventDefault();const t=new FormData;for(let r=0;r<d.length;r++)d[r]&&t.append("property_images",d[r]);for(let r=0;r<u.length;r++)u[r]&&t.append("property_videos",u[r]);localStorage.getItem("accessToken");const s=localStorage.getItem("propertyId");t.append("property",s);try{const i=await fetch(v("api/property/adddocuments/"),{method:"POST",body:t,headers:{}}),F=new Promise(m=>{setTimeout(()=>m(i),3e3)});if(g.promise(F,{pending:"Saving documents...",success:"Documents added successfully",error:"Failed to add documents"}),i.ok){console.log("Property Document Added");const m=await i.json();console.log(m),localStorage.removeItem("propertyId"),w.push("/")}else{console.log("Failed to add property documents");const m=await i.text();console.log("Error Details:",m),console.log("Status",i.status),console.log("Response",i),j("Failed to add documents","warning")}}catch(r){console.error("Error in sending request",r)}};return o.jsx(x.Fragment,{children:o.jsxs(a,{className:"m-5",onSubmit:C,children:[o.jsx(a.Label,{className:"text-lg",children:"Images"}),o.jsxs(a.Group,{as:p,md:"3",controlId:"imageUpload",required:!0,children:[o.jsx(a.Label,{children:"Image 1"}),o.jsx(a.Control,{name:"uploaded_images",type:"file",accept:"image/jpeg,image/png,image/gif",multiple:!0,onChange:e=>c(e,0)})]},"1"),o.jsxs(a.Group,{as:p,md:"3",controlId:"imageUpload",required:!0,children:[o.jsx(a.Label,{children:"Image 2"}),o.jsx(a.Control,{name:"uploaded_images",type:"file",accept:"image/jpeg,image/png,image/gif",multiple:!0,onChange:e=>c(e,1)})]},"2"),o.jsxs(a.Group,{as:p,md:"3",controlId:"imageUpload",required:!0,children:[o.jsx(a.Label,{children:"Image 3"}),o.jsx(a.Control,{name:"uploaded_images",type:"file",accept:"image/jpeg,image/png,image/gif",multiple:!0,onChange:e=>c(e,2)})]},"3"),l.map((e,t)=>o.jsxs(a.Group,{className:"pt-3",as:p,md:"3",controlId:`imageUpload-${e.id}`,children:[o.jsx(a.Label,{children:"Image"}),o.jsx(a.Control,{name:"uploaded_images",type:"file",accept:"image/jpeg,image/png,image/gif",multiple:!0,onChange:s=>c(s,e.id)}),o.jsx(h,{variant:"danger",onClick:()=>b(e.id),children:"Remove Image"})]},e.id)),o.jsx(p,{md:"3",className:"pb-3 pt-4 mt-3",children:o.jsx(h,{variant:"primary",className:"text-black",onClick:y,children:"Add Image"})}),o.jsx(h,{type:"submit",variant:"primary",className:"text-black",children:"Submit"})]})})},ye=()=>o.jsxs(x.Fragment,{children:[o.jsx(S,{}),o.jsx(k,{}),o.jsx(U,{})]});export{ye as default};
